"
use
strict
"
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
results
:
Cr
}
=
Components
;
Cu
.
import
(
'
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
'
)
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
cpmm
"
"
mozilla
.
org
/
childprocessmessagemanager
;
1
"
"
nsIMessageSender
"
)
;
this
.
EXPORTED_SYMBOLS
=
[
"
ActivityChannel
"
]
;
this
.
ActivityChannel
=
function
(
aURI
aLoadInfo
aName
aDetails
)
{
this
.
_activityName
=
aName
;
this
.
_activityDetails
=
aDetails
;
this
.
originalURI
=
aURI
;
this
.
URI
=
aURI
;
this
.
loadInfo
=
aLoadInfo
;
}
this
.
ActivityChannel
.
prototype
=
{
originalURI
:
null
URI
:
null
owner
:
null
notificationCallbacks
:
null
securityInfo
:
null
contentType
:
null
contentCharset
:
null
contentLength
:
0
contentDisposition
:
Ci
.
nsIChannel
.
DISPOSITION_INLINE
contentDispositionFilename
:
null
contentDispositionHeader
:
null
loadInfo
:
null
open
:
function
(
)
{
throw
Cr
.
NS_ERROR_NOT_IMPLEMENTED
;
}
open2
:
function
(
)
{
throw
Cr
.
NS_ERROR_NOT_IMPLEMENTED
;
}
asyncOpen
:
function
(
aListener
aContext
)
{
cpmm
.
sendAsyncMessage
(
this
.
_activityName
this
.
_activityDetails
)
;
aListener
.
onStopRequest
(
this
aContext
Cr
.
NS_OK
)
;
}
asyncOpen2
:
function
(
aListener
)
{
this
.
asyncOpen
(
aListener
null
)
;
}
QueryInterface2
:
XPCOMUtils
.
generateQI
(
[
Ci
.
nsIChannel
]
)
}
