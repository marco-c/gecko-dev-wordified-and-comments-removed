#
ifdef
MOZ_USING_WASM_SANDBOXING
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
rlbox
/
rlbox_config
.
h
"
#
include
"
mozilla
/
rlbox
/
rlbox_wasm2c_tls
.
hpp
"
#
include
"
wasm
-
rt
.
h
"
#
include
"
nsExceptionHandler
.
h
"
RLBOX_WASM2C_SANDBOX_STATIC_VARIABLES
(
)
;
extern
"
C
"
{
void
moz_wasm2c_trap_handler
(
wasm_rt_trap_t
code
)
{
MOZ_CRASH_UNSAFE_PRINTF
(
"
wasm2c
crash
:
%
s
"
wasm_rt_strerror
(
code
)
)
;
}
void
moz_wasm2c_memgrow_failed
(
)
{
CrashReporter
:
:
AnnotateCrashReport
(
CrashReporter
:
:
Annotation
:
:
WasmLibrarySandboxMallocFailed
true
)
;
}
}
#
endif
