#
ifdef
MOZ_USING_WASM_SANDBOXING
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
rlbox
/
rlbox_config
.
h
"
#
include
"
mozilla
/
rlbox
/
rlbox_wasm2c_sandbox
.
hpp
"
#
include
"
mozilla
/
rlbox
/
rlbox
.
hpp
"
#
include
"
nsExceptionHandler
.
h
"
RLBOX_WASM2C_SANDBOX_STATIC_VARIABLES
(
)
;
extern
"
C
"
{
void
moz_wasm2c_trap_handler
(
const
char
*
msg
)
{
MOZ_CRASH_UNSAFE_PRINTF
(
"
wasm2c
crash
:
%
s
"
msg
)
;
}
void
moz_wasm2c_malloc_failed
(
uint32_t
size
)
{
(
void
)
size
;
CrashReporter
:
:
AnnotateCrashReport
(
CrashReporter
:
:
Annotation
:
:
WasmLibrarySandboxMallocFailed
true
)
;
}
}
#
endif
