import
os
import
subprocess
import
sys
sys
.
stdout
=
os
.
fdopen
(
sys
.
stdout
.
fileno
(
)
"
wb
"
0
)
sys
.
stderr
=
os
.
fdopen
(
sys
.
stderr
.
fileno
(
)
"
wb
"
0
)
prefix
=
sys
.
argv
[
1
]
.
encode
(
"
utf
-
8
"
)
args
=
sys
.
argv
[
2
:
]
p
=
subprocess
.
Popen
(
    
args
    
bufsize
=
0
    
stdout
=
subprocess
.
PIPE
    
stderr
=
subprocess
.
STDOUT
    
stdin
=
sys
.
stdin
.
fileno
(
)
    
close_fds
=
False
)
while
True
:
    
data
=
p
.
stdout
.
readline
(
)
    
if
data
=
=
b
"
"
:
        
break
    
if
data
.
startswith
(
b
"
BUILDSTATUS
"
)
:
        
sys
.
stdout
.
write
(
data
)
    
else
:
        
sys
.
stdout
.
write
(
b
"
%
s
>
%
s
"
%
(
prefix
data
)
)
sys
.
exit
(
p
.
wait
(
)
)
