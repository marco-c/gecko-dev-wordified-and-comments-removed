#
ifndef
PHC_h
#
define
PHC_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
<
stdint
.
h
>
#
include
<
stdlib
.
h
>
namespace
mozilla
{
namespace
phc
{
struct
StackTrace
{
public
:
static
const
size_t
kMaxFrames
=
16
;
size_t
mLength
;
const
void
*
mPcs
[
kMaxFrames
]
;
public
:
StackTrace
(
)
:
mLength
(
0
)
{
}
}
;
class
AddrInfo
{
public
:
enum
class
Kind
{
Unknown
=
0
NeverAllocatedPage
=
1
InUsePage
=
2
FreedPage
=
3
GuardPage
=
4
}
;
Kind
mKind
;
const
void
*
mBaseAddr
;
size_t
mUsableSize
;
mozilla
:
:
Maybe
<
StackTrace
>
mAllocStack
;
mozilla
:
:
Maybe
<
StackTrace
>
mFreeStack
;
bool
mPhcWasLocked
=
false
;
AddrInfo
(
)
:
mKind
(
Kind
:
:
Unknown
)
mBaseAddr
(
nullptr
)
mUsableSize
(
0
)
mAllocStack
(
)
mFreeStack
(
)
{
}
}
;
extern
AddrInfo
gAddrInfo
;
}
}
#
endif
