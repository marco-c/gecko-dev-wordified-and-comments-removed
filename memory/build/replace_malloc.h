#
ifndef
replace_malloc_h
#
define
replace_malloc_h
#
ifdef
replace_malloc_bridge_h
#
error
Do
not
include
replace_malloc_bridge
.
h
before
replace_malloc
.
h
.
\
In
fact
you
only
need
the
latter
.
#
endif
#
define
REPLACE_MALLOC_IMPL
#
include
"
replace_malloc_bridge
.
h
"
#
define
MOZ_NO_MOZALLOC
1
#
include
"
mozilla
/
Types
.
h
"
MOZ_BEGIN_EXTERN_C
#
ifndef
MOZ_NO_REPLACE_FUNC_DECL
#
ifndef
MOZ_REPLACE_WEAK
#
define
MOZ_REPLACE_WEAK
#
endif
#
define
MALLOC_DECL
(
name
return_type
.
.
.
)
\
MOZ_EXPORT
return_type
replace_
#
#
name
(
__VA_ARGS__
)
MOZ_REPLACE_WEAK
;
#
define
MALLOC_FUNCS
MALLOC_FUNCS_INIT
#
include
"
malloc_decls
.
h
"
#
define
MALLOC_DECL
(
name
return_type
.
.
.
)
\
return_type
replace_
#
#
name
(
__VA_ARGS__
)
;
#
include
"
malloc_decls
.
h
"
#
endif
MOZ_END_EXTERN_C
#
endif
