#
include
"
mozmemory
.
h
"
#
include
"
mozjemalloc
.
h
"
#
include
<
stdlib
.
h
>
struct
SystemMalloc
{
#
define
MALLOC_DECL
(
name
return_type
.
.
.
)
\
static
inline
return_type
\
name
(
ARGS_HELPER
(
TYPED_ARGS
#
#
__VA_ARGS__
)
)
\
{
\
return
:
:
name
(
ARGS_HELPER
(
ARGS
#
#
__VA_ARGS__
)
)
;
\
}
#
define
MALLOC_FUNCS
MALLOC_FUNCS_MALLOC_BASE
#
include
"
malloc_decls
.
h
"
}
;
#
define
MALLOC_DECL
(
name
return_type
.
.
.
)
\
MOZ_JEMALLOC_API
return_type
\
name
(
ARGS_HELPER
(
TYPED_ARGS
#
#
__VA_ARGS__
)
)
\
{
\
return
DummyArenaAllocator
<
SystemMalloc
>
:
:
name
(
ARGS_HELPER
(
ARGS
#
#
__VA_ARGS__
)
)
;
\
}
#
define
MALLOC_FUNCS
MALLOC_FUNCS_ARENA
#
include
"
malloc_decls
.
h
"
