#
ifndef
mozmemory_wrap_h
#
define
mozmemory_wrap_h
#
if
defined
(
MOZ_MEMORY_IMPL
)
&
&
!
defined
(
IMPL_MFBT
)
#
ifdef
MFBT_API
#
error
mozmemory_wrap
.
h
has
to
be
included
before
mozilla
/
Types
.
h
when
MOZ_MEMORY_IMPL
is
set
and
IMPL_MFBT
is
not
.
#
endif
#
define
IMPL_MFBT
#
endif
#
include
"
mozilla
/
Types
.
h
"
#
ifndef
MOZ_EXTERN_C
#
ifdef
__cplusplus
#
define
MOZ_EXTERN_C
extern
"
C
"
#
else
#
define
MOZ_EXTERN_C
#
endif
#
endif
#
ifdef
MOZ_MEMORY_IMPL
#
define
MOZ_JEMALLOC_API
MOZ_EXTERN_C
MFBT_API
#
if
defined
(
XP_WIN
)
#
define
mozmem_malloc_impl
(
a
)
je_
#
#
a
#
else
#
define
MOZ_MEMORY_API
MOZ_EXTERN_C
MFBT_API
#
endif
#
endif
#
ifdef
XP_WIN
#
define
mozmem_dup_impl
(
a
)
wrap_
#
#
a
#
endif
#
if
!
defined
(
MOZ_MEMORY_IMPL
)
#
define
MOZ_MEMORY_API
MOZ_EXTERN_C
MFBT_API
#
define
MOZ_JEMALLOC_API
MOZ_EXTERN_C
MFBT_API
#
endif
#
ifndef
MOZ_MEMORY_API
#
define
MOZ_MEMORY_API
MOZ_EXTERN_C
#
endif
#
ifndef
MOZ_JEMALLOC_API
#
define
MOZ_JEMALLOC_API
MOZ_EXTERN_C
#
endif
#
ifndef
mozmem_malloc_impl
#
define
mozmem_malloc_impl
(
a
)
a
#
endif
#
ifndef
mozmem_dup_impl
#
define
mozmem_dup_impl
(
a
)
a
#
endif
#
define
malloc_impl
mozmem_malloc_impl
(
malloc
)
#
define
posix_memalign_impl
mozmem_malloc_impl
(
posix_memalign
)
#
define
aligned_alloc_impl
mozmem_malloc_impl
(
aligned_alloc
)
#
define
calloc_impl
mozmem_malloc_impl
(
calloc
)
#
define
realloc_impl
mozmem_malloc_impl
(
realloc
)
#
define
free_impl
mozmem_malloc_impl
(
free
)
#
define
memalign_impl
mozmem_malloc_impl
(
memalign
)
#
define
valloc_impl
mozmem_malloc_impl
(
valloc
)
#
define
malloc_usable_size_impl
mozmem_malloc_impl
(
malloc_usable_size
)
#
define
malloc_good_size_impl
mozmem_malloc_impl
(
malloc_good_size
)
#
define
strndup_impl
mozmem_dup_impl
(
strndup
)
#
define
strdup_impl
mozmem_dup_impl
(
strdup
)
#
ifdef
XP_WIN
#
define
wcsdup_impl
mozmem_dup_impl
(
wcsdup
)
#
define
_aligned_malloc_impl
mozmem_dup_impl
(
_aligned_malloc
)
#
endif
#
ifdef
ANDROID
#
define
vasprintf_impl
mozmem_dup_impl
(
vasprintf
)
#
define
asprintf_impl
mozmem_dup_impl
(
asprintf
)
#
endif
#
endif
