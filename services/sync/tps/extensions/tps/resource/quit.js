var
EXPORTED_SYMBOLS
=
[
"
goQuitApplication
"
]
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
function
canQuitApplication
(
)
{
try
{
var
cancelQuit
=
Cc
[
"
mozilla
.
org
/
supports
-
PRBool
;
1
"
]
.
createInstance
(
Ci
.
nsISupportsPRBool
)
;
Services
.
obs
.
notifyObservers
(
cancelQuit
"
quit
-
application
-
requested
"
)
;
if
(
cancelQuit
.
data
)
{
return
false
;
}
}
catch
(
ex
)
{
}
return
true
;
}
function
goQuitApplication
(
)
{
if
(
!
canQuitApplication
(
)
)
{
return
false
;
}
try
{
Services
.
startup
.
quit
(
Ci
.
nsIAppStartup
.
eForceQuit
)
;
}
catch
(
ex
)
{
throw
new
Error
(
goQuitApplication
:
{
ex
.
message
}
)
;
}
return
true
;
}
