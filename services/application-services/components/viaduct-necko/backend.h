#
ifndef
VIADUCT_NECKO_H
#
define
VIADUCT_NECKO_H
#
include
<
stdint
.
h
>
#
include
<
stddef
.
h
>
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
enum
ViaductMethod
:
uint8_t
{
VIADUCT_METHOD_GET
=
0
VIADUCT_METHOD_HEAD
=
1
VIADUCT_METHOD_POST
=
2
VIADUCT_METHOD_PUT
=
3
VIADUCT_METHOD_DELETE
=
4
VIADUCT_METHOD_CONNECT
=
5
VIADUCT_METHOD_OPTIONS
=
6
VIADUCT_METHOD_TRACE
=
7
VIADUCT_METHOD_PATCH
=
8
}
;
struct
ViaductHeader
{
const
char
*
key
;
const
char
*
value
;
}
;
struct
ViaductRequest
{
uint32_t
timeout
;
uint32_t
redirect_limit
;
ViaductMethod
method
;
const
char
*
url
;
const
ViaductHeader
*
headers
;
size_t
header_count
;
const
uint8_t
*
body
;
size_t
body_len
;
}
;
struct
ViaductResult
;
void
viaduct_necko_backend_init
(
)
;
void
viaduct_necko_backend_send_request
(
const
ViaductRequest
*
request
ViaductResult
*
result
)
;
void
viaduct_necko_result_set_url
(
ViaductResult
*
result
const
char
*
url
size_t
length
)
;
void
viaduct_necko_result_set_status_code
(
ViaductResult
*
result
uint16_t
code
)
;
void
viaduct_necko_result_add_header
(
ViaductResult
*
result
const
char
*
key
size_t
key_length
const
char
*
value
size_t
value_length
)
;
void
viaduct_necko_result_extend_body
(
ViaductResult
*
result
const
uint8_t
*
data
size_t
length
)
;
void
viaduct_necko_result_complete
(
ViaductResult
*
result
)
;
void
viaduct_necko_result_complete_error
(
ViaductResult
*
result
uint32_t
error_code
const
char
*
message
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
