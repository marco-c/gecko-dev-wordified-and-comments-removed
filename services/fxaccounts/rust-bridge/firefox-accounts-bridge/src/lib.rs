#
[
macro_use
]
extern
crate
cstr
;
#
[
macro_use
]
extern
crate
xpcom
;
mod
bridge
;
mod
punt
;
use
crate
:
:
bridge
:
:
Bridge
;
use
nserror
:
:
{
nsresult
NS_OK
}
;
use
xpcom
:
:
{
interfaces
:
:
mozIFirefoxAccountsBridge
RefPtr
}
;
#
[
no_mangle
]
pub
unsafe
extern
"
C
"
fn
NS_NewFirefoxAccountsBridge
(
result
:
*
mut
*
const
mozIFirefoxAccountsBridge
)
-
>
nsresult
{
match
Bridge
:
:
new
(
)
{
Ok
(
bridge
)
=
>
{
RefPtr
:
:
new
(
bridge
.
coerce
:
:
<
mozIFirefoxAccountsBridge
>
(
)
)
.
forget
(
&
mut
*
result
)
;
NS_OK
}
Err
(
err
)
=
>
err
.
into
(
)
}
}
