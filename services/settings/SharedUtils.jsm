var
EXPORTED_SYMBOLS
=
[
"
SharedUtils
"
]
;
if
(
typeof
crypto
=
=
"
undefined
"
)
{
Cu
.
importGlobalProperties
(
[
"
crypto
"
]
)
;
}
var
SharedUtils
=
{
async
checkContentHash
(
buffer
size
hash
)
{
const
bytes
=
new
Uint8Array
(
buffer
)
;
if
(
bytes
.
length
!
=
=
size
)
{
return
false
;
}
const
hashBuffer
=
await
crypto
.
subtle
.
digest
(
"
SHA
-
256
"
bytes
)
;
const
hashBytes
=
new
Uint8Array
(
hashBuffer
)
;
const
toHex
=
b
=
>
b
.
toString
(
16
)
.
padStart
(
2
"
0
"
)
;
const
hashStr
=
Array
.
from
(
hashBytes
toHex
)
.
join
(
"
"
)
;
return
hashStr
=
=
hash
;
}
}
;
