#
ifndef
CELT_FIXED_GENERIC_MIPSR1_H
#
define
CELT_FIXED_GENERIC_MIPSR1_H
#
undef
MULT16_32_Q15_ADD
static
inline
int
MULT16_32_Q15_ADD
(
int
a
int
b
int
c
int
d
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
acc
=
__builtin_mips_madd
(
acc
c
d
)
;
return
__builtin_mips_extr_w
(
acc
15
)
;
}
#
undef
MULT16_32_Q15_SUB
static
inline
int
MULT16_32_Q15_SUB
(
int
a
int
b
int
c
int
d
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
acc
=
__builtin_mips_msub
(
acc
c
d
)
;
return
__builtin_mips_extr_w
(
acc
15
)
;
}
#
undef
MULT16_16_Q15_ADD
static
inline
int
MULT16_16_Q15_ADD
(
int
a
int
b
int
c
int
d
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
acc
=
__builtin_mips_madd
(
acc
c
d
)
;
return
__builtin_mips_extr_w
(
acc
15
)
;
}
#
undef
MULT16_16_Q15_SUB
static
inline
int
MULT16_16_Q15_SUB
(
int
a
int
b
int
c
int
d
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
acc
=
__builtin_mips_msub
(
acc
c
d
)
;
return
__builtin_mips_extr_w
(
acc
15
)
;
}
#
undef
MULT16_32_Q16
static
inline
int
MULT16_32_Q16
(
int
a
int
b
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
return
__builtin_mips_extr_w
(
acc
16
)
;
}
#
undef
MULT16_32_P16
static
inline
int
MULT16_32_P16
(
int
a
int
b
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
return
__builtin_mips_extr_r_w
(
acc
16
)
;
}
#
undef
MULT16_32_Q15
static
inline
int
MULT16_32_Q15
(
int
a
int
b
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
return
__builtin_mips_extr_w
(
acc
15
)
;
}
#
undef
MULT32_32_Q31
static
inline
int
MULT32_32_Q31
(
int
a
int
b
)
{
long
long
acc
=
__builtin_mips_mult
(
a
b
)
;
return
__builtin_mips_extr_w
(
acc
31
)
;
}
#
undef
PSHR32
static
inline
int
PSHR32
(
int
a
int
shift
)
{
return
__builtin_mips_shra_r_w
(
a
shift
)
;
}
#
undef
MULT16_16_P15
static
inline
int
MULT16_16_P15
(
int
a
int
b
)
{
int
r
=
a
*
b
;
return
__builtin_mips_shra_r_w
(
r
15
)
;
}
#
endif
