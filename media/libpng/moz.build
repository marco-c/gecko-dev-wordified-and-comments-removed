with
Files
(
"
*
*
"
)
:
BUG_COMPONENT
=
(
"
Core
"
"
Graphics
:
ImageLib
"
)
EXPORTS
+
=
[
'
png
.
h
'
'
pngconf
.
h
'
'
pnglibconf
.
h
'
]
SOURCES
+
=
[
'
png
.
c
'
'
pngerror
.
c
'
'
pngget
.
c
'
'
pngmem
.
c
'
'
pngread
.
c
'
'
pngrio
.
c
'
'
pngrtran
.
c
'
'
pngset
.
c
'
'
pngtrans
.
c
'
'
pngwio
.
c
'
'
pngwrite
.
c
'
]
SOURCES
+
=
[
'
pngpread
.
c
'
'
pngrutil
.
c
'
'
pngwutil
.
c
'
]
if
CONFIG
[
'
TARGET_CPU
'
]
=
=
'
arm
'
or
CONFIG
[
'
TARGET_CPU
'
]
=
=
'
aarch64
'
:
DEFINES
[
'
MOZ_PNG_USE_ARM_NEON
'
]
=
True
SOURCES
+
=
[
'
arm
/
arm_init
.
c
'
'
arm
/
filter_neon_intrinsics
.
c
'
'
arm
/
palette_neon_intrinsics
.
c
'
]
if
CONFIG
[
'
TARGET_CPU
'
]
=
=
'
arm
'
:
SOURCES
+
=
[
'
arm
/
filter_neon
.
S
'
]
if
CONFIG
[
'
INTEL_ARCHITECTURE
'
]
:
DEFINES
[
'
MOZ_PNG_USE_INTEL_SSE
'
]
=
True
SOURCES
+
=
[
'
intel
/
filter_sse2_intrinsics
.
c
'
'
intel
/
intel_init
.
c
'
]
if
CONFIG
[
'
TARGET_CPU
'
]
in
(
'
mips32
'
'
mips64
'
)
:
DEFINES
[
'
MOZ_PNG_USE_MIPS_MSA
'
]
=
True
SOURCES
+
=
[
'
mips
/
filter_mmi_inline_assembly
.
c
'
'
mips
/
filter_msa_intrinsics
.
c
'
'
mips
/
mips_init
.
c
'
]
if
CONFIG
[
'
HAVE_ALTIVEC
'
]
:
DEFINES
[
'
MOZ_PNG_USE_POWERPC
'
]
=
True
SOURCES
+
=
[
'
powerpc
/
filter_vsx_intrinsics
.
c
'
'
powerpc
/
powerpc_init
.
c
'
]
if
CONFIG
[
'
TARGET_CPU
'
]
=
=
'
loongarch64
'
:
DEFINES
[
'
MOZ_PNG_USE_LOONGARCH_LSX
'
]
=
True
CFLAGS
+
=
[
'
-
mlsx
'
]
SOURCES
+
=
[
'
loongarch
/
filter_lsx_intrinsics
.
c
'
'
loongarch
/
loongarch_lsx_init
.
c
'
]
if
CONFIG
[
'
TARGET_CPU
'
]
=
=
'
riscv64
'
:
DEFINES
[
'
MOZ_PNG_USE_RISCV_RVV
'
]
=
True
SOURCES
+
=
[
'
riscv
/
filter_rvv_intrinsics
.
c
'
'
riscv
/
riscv_init
.
c
'
]
if
CONFIG
[
'
MOZ_TREE_FREETYPE
'
]
:
DEFINES
[
'
FT_CONFIG_OPTION_USE_PNG
'
]
=
True
Library
(
'
mozpng
'
)
FINAL_LIBRARY
=
'
xul
'
AllowCompilerWarnings
(
)
if
CONFIG
[
'
CC_TYPE
'
]
in
(
'
clang
'
'
gcc
'
)
:
CFLAGS
+
=
[
'
-
std
=
gnu89
'
]
