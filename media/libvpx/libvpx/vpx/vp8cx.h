#
ifndef
VPX_VPX_VP8CX_H_
#
define
VPX_VPX_VP8CX_H_
#
include
"
.
/
vp8
.
h
"
#
include
"
.
/
vpx_encoder
.
h
"
#
include
"
.
/
vpx_ext_ratectrl
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
extern
vpx_codec_iface_t
vpx_codec_vp8_cx_algo
;
extern
vpx_codec_iface_t
*
vpx_codec_vp8_cx
(
void
)
;
extern
vpx_codec_iface_t
vpx_codec_vp9_cx_algo
;
extern
vpx_codec_iface_t
*
vpx_codec_vp9_cx
(
void
)
;
#
define
VP8_EFLAG_NO_REF_LAST
(
1
<
<
16
)
#
define
VP8_EFLAG_NO_REF_GF
(
1
<
<
17
)
#
define
VP8_EFLAG_NO_REF_ARF
(
1
<
<
21
)
#
define
VP8_EFLAG_NO_UPD_LAST
(
1
<
<
18
)
#
define
VP8_EFLAG_NO_UPD_GF
(
1
<
<
22
)
#
define
VP8_EFLAG_NO_UPD_ARF
(
1
<
<
23
)
#
define
VP8_EFLAG_FORCE_GF
(
1
<
<
19
)
#
define
VP8_EFLAG_FORCE_ARF
(
1
<
<
24
)
#
define
VP8_EFLAG_NO_UPD_ENTROPY
(
1
<
<
20
)
enum
vp8e_enc_control_id
{
VP8E_SET_ROI_MAP
=
8
VP8E_SET_ACTIVEMAP
VP8E_SET_SCALEMODE
=
11
VP8E_SET_CPUUSED
=
13
VP8E_SET_ENABLEAUTOALTREF
VP8E_SET_NOISE_SENSITIVITY
VP8E_SET_SHARPNESS
VP8E_SET_STATIC_THRESHOLD
VP8E_SET_TOKEN_PARTITIONS
VP8E_GET_LAST_QUANTIZER
VP8E_GET_LAST_QUANTIZER_64
VP8E_SET_ARNR_MAXFRAMES
VP8E_SET_ARNR_STRENGTH
VP8E_SET_ARNR_TYPE
VP8E_SET_TUNING
VP8E_SET_CQ_LEVEL
VP8E_SET_MAX_INTRA_BITRATE_PCT
VP8E_SET_FRAME_FLAGS
VP9E_SET_MAX_INTER_BITRATE_PCT
VP9E_SET_GF_CBR_BOOST_PCT
VP8E_SET_TEMPORAL_LAYER_ID
VP8E_SET_SCREEN_CONTENT_MODE
VP9E_SET_LOSSLESS
VP9E_SET_TILE_COLUMNS
VP9E_SET_TILE_ROWS
VP9E_SET_FRAME_PARALLEL_DECODING
VP9E_SET_AQ_MODE
VP9E_SET_FRAME_PERIODIC_BOOST
VP9E_SET_NOISE_SENSITIVITY
VP9E_SET_SVC
VP9E_SET_ROI_MAP
VP9E_SET_SVC_PARAMETERS
VP9E_SET_SVC_LAYER_ID
VP9E_SET_TUNE_CONTENT
VP9E_GET_SVC_LAYER_ID
VP9E_REGISTER_CX_CALLBACK
VP9E_SET_COLOR_SPACE
VP9E_SET_MIN_GF_INTERVAL
=
48
VP9E_SET_MAX_GF_INTERVAL
VP9E_GET_ACTIVEMAP
VP9E_SET_COLOR_RANGE
VP9E_SET_SVC_REF_FRAME_CONFIG
VP9E_SET_RENDER_SIZE
VP9E_SET_TARGET_LEVEL
VP9E_SET_ROW_MT
VP9E_GET_LEVEL
VP9E_SET_ALT_REF_AQ
VP8E_SET_GF_CBR_BOOST_PCT
VP9E_ENABLE_MOTION_VECTOR_UNIT_TEST
VP9E_SET_SVC_INTER_LAYER_PRED
VP9E_SET_SVC_FRAME_DROP_LAYER
VP9E_GET_SVC_REF_FRAME_CONFIG
VP9E_SET_SVC_GF_TEMPORAL_REF
VP9E_SET_SVC_SPATIAL_LAYER_SYNC
VP9E_SET_TPL
VP9E_SET_KEY_FRAME_FILTERING
VP9E_SET_POSTENCODE_DROP
VP9E_SET_DELTA_Q_UV
VP9E_SET_DISABLE_OVERSHOOT_MAXQ_CBR
VP9E_SET_DISABLE_LOOPFILTER
VP9E_SET_EXTERNAL_RATE_CONTROL
VP9E_SET_RTC_EXTERNAL_RATECTRL
VP9E_GET_LOOPFILTER_LEVEL
VP9E_GET_LAST_QUANTIZER_SVC_LAYERS
VP8E_SET_RTC_EXTERNAL_RATECTRL
VP9E_SET_QUANTIZER_ONE_PASS
}
;
typedef
enum
vpx_scaling_mode_1d
{
VP8E_NORMAL
=
0
VP8E_FOURFIVE
=
1
VP8E_THREEFIVE
=
2
VP8E_ONETWO
=
3
}
VPX_SCALING_MODE
;
typedef
enum
vp9e_temporal_layering_mode
{
VP9E_TEMPORAL_LAYERING_MODE_NOLAYERING
=
0
VP9E_TEMPORAL_LAYERING_MODE_BYPASS
=
1
VP9E_TEMPORAL_LAYERING_MODE_0101
=
2
VP9E_TEMPORAL_LAYERING_MODE_0212
=
3
}
VP9E_TEMPORAL_LAYERING_MODE
;
typedef
struct
vpx_roi_map
{
uint8_t
enabled
;
unsigned
char
*
roi_map
;
unsigned
int
rows
;
unsigned
int
cols
;
int
delta_q
[
8
]
;
int
delta_lf
[
8
]
;
int
skip
[
8
]
;
int
ref_frame
[
8
]
;
unsigned
int
static_threshold
[
4
]
;
}
vpx_roi_map_t
;
typedef
struct
vpx_active_map
{
unsigned
char
*
active_map
;
unsigned
int
rows
;
unsigned
int
cols
;
}
vpx_active_map_t
;
typedef
struct
vpx_scaling_mode
{
VPX_SCALING_MODE
h_scaling_mode
;
VPX_SCALING_MODE
v_scaling_mode
;
}
vpx_scaling_mode_t
;
typedef
enum
{
VP8_ONE_TOKENPARTITION
=
0
VP8_TWO_TOKENPARTITION
=
1
VP8_FOUR_TOKENPARTITION
=
2
VP8_EIGHT_TOKENPARTITION
=
3
}
vp8e_token_partitions
;
typedef
enum
{
VP9E_CONTENT_DEFAULT
VP9E_CONTENT_SCREEN
VP9E_CONTENT_FILM
VP9E_CONTENT_INVALID
}
vp9e_tune_content
;
typedef
enum
{
VP8_TUNE_PSNR
VP8_TUNE_SSIM
}
vp8e_tuning
;
typedef
struct
vpx_svc_layer_id
{
int
spatial_layer_id
;
int
temporal_layer_id
;
int
temporal_layer_id_per_spatial
[
VPX_SS_MAX_LAYERS
]
;
}
vpx_svc_layer_id_t
;
typedef
struct
vpx_svc_ref_frame_config
{
int
lst_fb_idx
[
VPX_SS_MAX_LAYERS
]
;
int
gld_fb_idx
[
VPX_SS_MAX_LAYERS
]
;
int
alt_fb_idx
[
VPX_SS_MAX_LAYERS
]
;
int
update_buffer_slot
[
VPX_SS_MAX_LAYERS
]
;
int
update_last
[
VPX_SS_MAX_LAYERS
]
;
int
update_golden
[
VPX_SS_MAX_LAYERS
]
;
int
update_alt_ref
[
VPX_SS_MAX_LAYERS
]
;
int
reference_last
[
VPX_SS_MAX_LAYERS
]
;
int
reference_golden
[
VPX_SS_MAX_LAYERS
]
;
int
reference_alt_ref
[
VPX_SS_MAX_LAYERS
]
;
int64_t
duration
[
VPX_SS_MAX_LAYERS
]
;
}
vpx_svc_ref_frame_config_t
;
typedef
enum
{
CONSTRAINED_LAYER_DROP
LAYER_DROP
FULL_SUPERFRAME_DROP
CONSTRAINED_FROM_ABOVE_DROP
}
SVC_LAYER_DROP_MODE
;
typedef
struct
vpx_svc_frame_drop
{
int
framedrop_thresh
[
VPX_SS_MAX_LAYERS
]
;
SVC_LAYER_DROP_MODE
framedrop_mode
;
int
max_consec_drop
;
}
vpx_svc_frame_drop_t
;
typedef
struct
vpx_svc_spatial_layer_sync
{
int
spatial_layer_sync
[
VPX_SS_MAX_LAYERS
]
;
int
base_layer_intra_only
;
}
vpx_svc_spatial_layer_sync_t
;
VPX_CTRL_USE_TYPE
(
VP8E_SET_ROI_MAP
vpx_roi_map_t
*
)
#
define
VPX_CTRL_VP8E_SET_ROI_MAP
VPX_CTRL_USE_TYPE
(
VP8E_SET_ACTIVEMAP
vpx_active_map_t
*
)
#
define
VPX_CTRL_VP8E_SET_ACTIVEMAP
VPX_CTRL_USE_TYPE
(
VP8E_SET_SCALEMODE
vpx_scaling_mode_t
*
)
#
define
VPX_CTRL_VP8E_SET_SCALEMODE
VPX_CTRL_USE_TYPE
(
VP8E_SET_CPUUSED
int
)
#
define
VPX_CTRL_VP8E_SET_CPUUSED
VPX_CTRL_USE_TYPE
(
VP8E_SET_ENABLEAUTOALTREF
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_ENABLEAUTOALTREF
VPX_CTRL_USE_TYPE
(
VP8E_SET_NOISE_SENSITIVITY
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_NOISE_SENSITIVITY
VPX_CTRL_USE_TYPE
(
VP8E_SET_SHARPNESS
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_SHARPNESS
VPX_CTRL_USE_TYPE
(
VP8E_SET_STATIC_THRESHOLD
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_STATIC_THRESHOLD
VPX_CTRL_USE_TYPE
(
VP8E_SET_TOKEN_PARTITIONS
int
)
#
define
VPX_CTRL_VP8E_SET_TOKEN_PARTITIONS
VPX_CTRL_USE_TYPE
(
VP8E_GET_LAST_QUANTIZER
int
*
)
#
define
VPX_CTRL_VP8E_GET_LAST_QUANTIZER
VPX_CTRL_USE_TYPE
(
VP8E_GET_LAST_QUANTIZER_64
int
*
)
#
define
VPX_CTRL_VP8E_GET_LAST_QUANTIZER_64
VPX_CTRL_USE_TYPE
(
VP8E_SET_ARNR_MAXFRAMES
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_ARNR_MAXFRAMES
VPX_CTRL_USE_TYPE
(
VP8E_SET_ARNR_STRENGTH
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_ARNR_STRENGTH
VPX_CTRL_USE_TYPE_DEPRECATED
(
VP8E_SET_ARNR_TYPE
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_ARNR_TYPE
VPX_CTRL_USE_TYPE
(
VP8E_SET_TUNING
int
)
#
define
VPX_CTRL_VP8E_SET_TUNING
VPX_CTRL_USE_TYPE
(
VP8E_SET_CQ_LEVEL
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_CQ_LEVEL
VPX_CTRL_USE_TYPE
(
VP8E_SET_MAX_INTRA_BITRATE_PCT
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_MAX_INTRA_BITRATE_PCT
VPX_CTRL_USE_TYPE
(
VP8E_SET_FRAME_FLAGS
int
)
#
define
VPX_CTRL_VP8E_SET_FRAME_FLAGS
VPX_CTRL_USE_TYPE
(
VP9E_SET_MAX_INTER_BITRATE_PCT
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_MAX_INTER_BITRATE_PCT
VPX_CTRL_USE_TYPE
(
VP9E_SET_GF_CBR_BOOST_PCT
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_GF_CBR_BOOST_PCT
VPX_CTRL_USE_TYPE
(
VP8E_SET_TEMPORAL_LAYER_ID
int
)
#
define
VPX_CTRL_VP8E_SET_TEMPORAL_LAYER_ID
VPX_CTRL_USE_TYPE
(
VP8E_SET_SCREEN_CONTENT_MODE
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_SCREEN_CONTENT_MODE
VPX_CTRL_USE_TYPE
(
VP9E_SET_LOSSLESS
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_LOSSLESS
VPX_CTRL_USE_TYPE
(
VP9E_SET_TILE_COLUMNS
int
)
#
define
VPX_CTRL_VP9E_SET_TILE_COLUMNS
VPX_CTRL_USE_TYPE
(
VP9E_SET_TILE_ROWS
int
)
#
define
VPX_CTRL_VP9E_SET_TILE_ROWS
VPX_CTRL_USE_TYPE
(
VP9E_SET_FRAME_PARALLEL_DECODING
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_FRAME_PARALLEL_DECODING
VPX_CTRL_USE_TYPE
(
VP9E_SET_AQ_MODE
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_AQ_MODE
VPX_CTRL_USE_TYPE
(
VP9E_SET_FRAME_PERIODIC_BOOST
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_FRAME_PERIODIC_BOOST
VPX_CTRL_USE_TYPE
(
VP9E_SET_NOISE_SENSITIVITY
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_NOISE_SENSITIVITY
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC
int
)
#
define
VPX_CTRL_VP9E_SET_SVC
VPX_CTRL_USE_TYPE
(
VP9E_SET_ROI_MAP
vpx_roi_map_t
*
)
#
define
VPX_CTRL_VP9E_SET_ROI_MAP
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_PARAMETERS
void
*
)
#
define
VPX_CTRL_VP9E_SET_SVC_PARAMETERS
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_LAYER_ID
vpx_svc_layer_id_t
*
)
#
define
VPX_CTRL_VP9E_SET_SVC_LAYER_ID
VPX_CTRL_USE_TYPE
(
VP9E_SET_TUNE_CONTENT
int
)
#
define
VPX_CTRL_VP9E_SET_TUNE_CONTENT
VPX_CTRL_USE_TYPE
(
VP9E_GET_SVC_LAYER_ID
vpx_svc_layer_id_t
*
)
#
define
VPX_CTRL_VP9E_GET_SVC_LAYER_ID
VPX_CTRL_USE_TYPE
(
VP9E_REGISTER_CX_CALLBACK
void
*
)
#
define
VPX_CTRL_VP9E_REGISTER_CX_CALLBACK
VPX_CTRL_USE_TYPE
(
VP9E_SET_COLOR_SPACE
int
)
#
define
VPX_CTRL_VP9E_SET_COLOR_SPACE
VPX_CTRL_USE_TYPE
(
VP9E_SET_MIN_GF_INTERVAL
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_MIN_GF_INTERVAL
VPX_CTRL_USE_TYPE
(
VP9E_SET_MAX_GF_INTERVAL
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_MAX_GF_INTERVAL
VPX_CTRL_USE_TYPE
(
VP9E_GET_ACTIVEMAP
vpx_active_map_t
*
)
#
define
VPX_CTRL_VP9E_GET_ACTIVEMAP
VPX_CTRL_USE_TYPE
(
VP9E_SET_COLOR_RANGE
int
)
#
define
VPX_CTRL_VP9E_SET_COLOR_RANGE
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_REF_FRAME_CONFIG
vpx_svc_ref_frame_config_t
*
)
#
define
VPX_CTRL_VP9E_SET_SVC_REF_FRAME_CONFIG
VPX_CTRL_USE_TYPE
(
VP9E_SET_RENDER_SIZE
int
*
)
#
define
VPX_CTRL_VP9E_SET_RENDER_SIZE
VPX_CTRL_USE_TYPE
(
VP9E_SET_TARGET_LEVEL
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_TARGET_LEVEL
VPX_CTRL_USE_TYPE
(
VP9E_SET_ROW_MT
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_ROW_MT
VPX_CTRL_USE_TYPE
(
VP9E_GET_LEVEL
int
*
)
#
define
VPX_CTRL_VP9E_GET_LEVEL
VPX_CTRL_USE_TYPE
(
VP9E_SET_ALT_REF_AQ
int
)
#
define
VPX_CTRL_VP9E_SET_ALT_REF_AQ
VPX_CTRL_USE_TYPE
(
VP8E_SET_GF_CBR_BOOST_PCT
unsigned
int
)
#
define
VPX_CTRL_VP8E_SET_GF_CBR_BOOST_PCT
VPX_CTRL_USE_TYPE
(
VP9E_ENABLE_MOTION_VECTOR_UNIT_TEST
unsigned
int
)
#
define
VPX_CTRL_VP9E_ENABLE_MOTION_VECTOR_UNIT_TEST
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_INTER_LAYER_PRED
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_SVC_INTER_LAYER_PRED
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_FRAME_DROP_LAYER
vpx_svc_frame_drop_t
*
)
#
define
VPX_CTRL_VP9E_SET_SVC_FRAME_DROP_LAYER
VPX_CTRL_USE_TYPE
(
VP9E_GET_SVC_REF_FRAME_CONFIG
vpx_svc_ref_frame_config_t
*
)
#
define
VPX_CTRL_VP9E_GET_SVC_REF_FRAME_CONFIG
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_GF_TEMPORAL_REF
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_SVC_GF_TEMPORAL_REF
VPX_CTRL_USE_TYPE
(
VP9E_SET_SVC_SPATIAL_LAYER_SYNC
vpx_svc_spatial_layer_sync_t
*
)
#
define
VPX_CTRL_VP9E_SET_SVC_SPATIAL_LAYER_SYNC
VPX_CTRL_USE_TYPE
(
VP9E_SET_TPL
int
)
#
define
VPX_CTRL_VP9E_SET_TPL
VPX_CTRL_USE_TYPE
(
VP9E_SET_KEY_FRAME_FILTERING
int
)
#
define
VPX_CTRL_VP9E_SET_KEY_FRAME_FILTERING
VPX_CTRL_USE_TYPE
(
VP9E_SET_POSTENCODE_DROP
unsigned
int
)
#
define
VPX_CTRL_VP9E_SET_POSTENCODE_DROP
VPX_CTRL_USE_TYPE
(
VP9E_SET_DELTA_Q_UV
int
)
#
define
VPX_CTRL_VP9E_SET_DELTA_Q_UV
VPX_CTRL_USE_TYPE
(
VP9E_SET_DISABLE_OVERSHOOT_MAXQ_CBR
int
)
#
define
VPX_CTRL_VP9E_SET_DISABLE_OVERSHOOT_MAXQ_CBR
VPX_CTRL_USE_TYPE
(
VP9E_SET_DISABLE_LOOPFILTER
int
)
#
define
VPX_CTRL_VP9E_SET_DISABLE_LOOPFILTER
VPX_CTRL_USE_TYPE
(
VP9E_SET_EXTERNAL_RATE_CONTROL
vpx_rc_funcs_t
*
)
#
define
VPX_CTRL_VP9E_SET_EXTERNAL_RATE_CONTROL
VPX_CTRL_USE_TYPE
(
VP9E_SET_RTC_EXTERNAL_RATECTRL
int
)
#
define
VPX_CTRL_VP9E_SET_RTC_EXTERNAL_RATECTRL
VPX_CTRL_USE_TYPE
(
VP9E_GET_LOOPFILTER_LEVEL
int
*
)
#
define
VPX_CTRL_VP9E_GET_LOOPFILTER_LEVEL
VPX_CTRL_USE_TYPE
(
VP9E_GET_LAST_QUANTIZER_SVC_LAYERS
int
*
)
#
define
VPX_CTRL_VP9E_GET_LAST_QUANTIZER_SVC_LAYERS
VPX_CTRL_USE_TYPE
(
VP8E_SET_RTC_EXTERNAL_RATECTRL
int
)
#
define
VPX_CTRL_VP8E_SET_RTC_EXTERNAL_RATECTRL
VPX_CTRL_USE_TYPE
(
VP9E_SET_QUANTIZER_ONE_PASS
int
)
#
define
VPX_CTRL_VP9E_SET_QUANTIZER_ONE_PASS
#
ifdef
__cplusplus
}
#
endif
#
endif
