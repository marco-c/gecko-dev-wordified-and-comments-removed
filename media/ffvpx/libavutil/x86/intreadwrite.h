#
ifndef
AVUTIL_X86_INTREADWRITE_H
#
define
AVUTIL_X86_INTREADWRITE_H
#
include
<
stdint
.
h
>
#
include
"
config
.
h
"
#
include
"
libavutil
/
attributes
.
h
"
#
if
HAVE_MMX
#
ifdef
__SSE__
#
define
AV_COPY128
AV_COPY128
static
av_always_inline
void
AV_COPY128
(
void
*
d
const
void
*
s
)
{
struct
v
{
uint64_t
v
[
2
]
;
}
;
__asm__
(
"
movaps
%
1
%
%
xmm0
\
n
\
t
"
"
movaps
%
%
xmm0
%
0
\
n
\
t
"
:
"
=
m
"
(
*
(
struct
v
*
)
d
)
:
"
m
"
(
*
(
const
struct
v
*
)
s
)
:
"
xmm0
"
)
;
}
#
endif
#
ifdef
__SSE2__
#
define
AV_ZERO128
AV_ZERO128
static
av_always_inline
void
AV_ZERO128
(
void
*
d
)
{
struct
v
{
uint64_t
v
[
2
]
;
}
;
__asm__
(
"
pxor
%
%
xmm0
%
%
xmm0
\
n
\
t
"
"
movdqa
%
%
xmm0
%
0
\
n
\
t
"
:
"
=
m
"
(
*
(
struct
v
*
)
d
)
:
:
"
xmm0
"
)
;
}
#
endif
#
endif
#
endif
