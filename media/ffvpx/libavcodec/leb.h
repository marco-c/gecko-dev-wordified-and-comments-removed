#
ifndef
AVCODEC_LEB_H
#
define
AVCODEC_LEB_H
#
include
"
get_bits
.
h
"
static
inline
unsigned
get_leb
(
GetBitContext
*
s
)
{
int
more
i
=
0
;
unsigned
leb
=
0
;
do
{
int
byte
=
get_bits
(
s
8
)
;
unsigned
bits
=
byte
&
0x7f
;
more
=
byte
&
0x80
;
if
(
i
<
=
4
)
leb
|
=
bits
<
<
(
i
*
7
)
;
if
(
+
+
i
=
=
8
)
break
;
}
while
(
more
)
;
return
leb
;
}
static
inline
int64_t
get_leb128
(
GetBitContext
*
gb
)
{
int64_t
ret
=
0
;
for
(
int
i
=
0
;
i
<
8
;
i
+
+
)
{
int
byte
=
get_bits
(
gb
8
)
;
ret
|
=
(
int64_t
)
(
byte
&
0x7f
)
<
<
(
i
*
7
)
;
if
(
!
(
byte
&
0x80
)
)
break
;
}
return
ret
;
}
#
endif
