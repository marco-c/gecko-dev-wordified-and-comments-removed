#
ifndef
AVCODEC_VP89_RAC_H
#
define
AVCODEC_VP89_RAC_H
#
include
<
stdint
.
h
>
#
include
"
libavutil
/
attributes
.
h
"
#
include
"
vpx_rac
.
h
"
static
av_always_inline
int
vp89_rac_get
(
VPXRangeCoder
*
c
)
{
return
vpx_rac_get_prob
(
c
128
)
;
}
static
av_unused
int
vp89_rac_get_uint
(
VPXRangeCoder
*
c
int
bits
)
{
int
value
=
0
;
while
(
bits
-
-
)
{
value
=
(
value
<
<
1
)
|
vp89_rac_get
(
c
)
;
}
return
value
;
}
static
av_always_inline
int
vp89_rac_get_tree
(
VPXRangeCoder
*
c
const
int8_t
(
*
tree
)
[
2
]
const
uint8_t
*
probs
)
{
int
i
=
0
;
do
{
i
=
tree
[
i
]
[
vpx_rac_get_prob
(
c
probs
[
i
]
)
]
;
}
while
(
i
>
0
)
;
return
-
i
;
}
#
endif
