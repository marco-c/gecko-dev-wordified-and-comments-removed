#
if
!
defined
(
CUBEB_c2f983e9_c96f_e71c_72c3_bbf62992a382
)
#
define
CUBEB_c2f983e9_c96f_e71c_72c3_bbf62992a382
#
include
<
cubeb
/
cubeb
-
stdint
.
h
>
#
if
defined
(
__cplusplus
)
extern
"
C
"
{
#
endif
typedef
struct
cubeb
cubeb
;
typedef
struct
cubeb_stream
cubeb_stream
;
typedef
enum
{
CUBEB_SAMPLE_S16LE
CUBEB_SAMPLE_S16BE
CUBEB_SAMPLE_FLOAT32LE
CUBEB_SAMPLE_FLOAT32BE
#
if
defined
(
WORDS_BIGENDIAN
)
|
|
defined
(
__BIG_ENDIAN__
)
CUBEB_SAMPLE_S16NE
=
CUBEB_SAMPLE_S16BE
CUBEB_SAMPLE_FLOAT32NE
=
CUBEB_SAMPLE_FLOAT32BE
#
else
CUBEB_SAMPLE_S16NE
=
CUBEB_SAMPLE_S16LE
CUBEB_SAMPLE_FLOAT32NE
=
CUBEB_SAMPLE_FLOAT32LE
#
endif
}
cubeb_sample_format
;
#
if
defined
(
__ANDROID__
)
typedef
enum
{
CUBEB_STREAM_TYPE_VOICE_CALL
=
0
CUBEB_STREAM_TYPE_SYSTEM
=
1
CUBEB_STREAM_TYPE_RING
=
2
CUBEB_STREAM_TYPE_MUSIC
=
3
CUBEB_STREAM_TYPE_ALARM
=
4
CUBEB_STREAM_TYPE_NOTIFICATION
=
5
CUBEB_STREAM_TYPE_BLUETOOTH_SCO
=
6
CUBEB_STREAM_TYPE_SYSTEM_ENFORCED
=
7
CUBEB_STREAM_TYPE_DTMF
=
8
CUBEB_STREAM_TYPE_TTS
=
9
CUBEB_STREAM_TYPE_FM
=
10
CUBEB_STREAM_TYPE_MAX
}
cubeb_stream_type
;
#
endif
typedef
void
*
cubeb_devid
;
typedef
struct
{
cubeb_sample_format
format
;
unsigned
int
rate
;
unsigned
int
channels
;
#
if
defined
(
__ANDROID__
)
cubeb_stream_type
stream_type
;
#
endif
}
cubeb_stream_params
;
typedef
struct
{
char
*
output_name
;
char
*
input_name
;
}
cubeb_device
;
typedef
enum
{
CUBEB_STATE_STARTED
CUBEB_STATE_STOPPED
CUBEB_STATE_DRAINED
CUBEB_STATE_ERROR
}
cubeb_state
;
enum
{
CUBEB_OK
=
0
CUBEB_ERROR
=
-
1
CUBEB_ERROR_INVALID_FORMAT
=
-
2
CUBEB_ERROR_INVALID_PARAMETER
=
-
3
CUBEB_ERROR_NOT_SUPPORTED
=
-
4
CUBEB_ERROR_DEVICE_UNAVAILABLE
=
-
5
}
;
typedef
enum
{
CUBEB_DEVICE_TYPE_UNKNOWN
CUBEB_DEVICE_TYPE_INPUT
CUBEB_DEVICE_TYPE_OUTPUT
}
cubeb_device_type
;
typedef
enum
{
CUBEB_DEVICE_STATE_DISABLED
CUBEB_DEVICE_STATE_UNPLUGGED
CUBEB_DEVICE_STATE_ENABLED
}
cubeb_device_state
;
typedef
enum
{
CUBEB_DEVICE_FMT_S16LE
=
0x0010
CUBEB_DEVICE_FMT_S16BE
=
0x0020
CUBEB_DEVICE_FMT_F32LE
=
0x1000
CUBEB_DEVICE_FMT_F32BE
=
0x2000
}
cubeb_device_fmt
;
#
if
defined
(
WORDS_BIGENDIAN
)
|
|
defined
(
__BIG_ENDIAN__
)
#
define
CUBEB_DEVICE_FMT_S16NE
CUBEB_DEVICE_FMT_S16BE
#
define
CUBEB_DEVICE_FMT_F32NE
CUBEB_DEVICE_FMT_F32BE
#
else
#
define
CUBEB_DEVICE_FMT_S16NE
CUBEB_DEVICE_FMT_S16LE
#
define
CUBEB_DEVICE_FMT_F32NE
CUBEB_DEVICE_FMT_F32LE
#
endif
#
define
CUBEB_DEVICE_FMT_S16_MASK
(
CUBEB_DEVICE_FMT_S16LE
|
CUBEB_DEVICE_FMT_S16BE
)
#
define
CUBEB_DEVICE_FMT_F32_MASK
(
CUBEB_DEVICE_FMT_F32LE
|
CUBEB_DEVICE_FMT_F32BE
)
#
define
CUBEB_DEVICE_FMT_ALL
(
CUBEB_DEVICE_FMT_S16_MASK
|
CUBEB_DEVICE_FMT_F32_MASK
)
typedef
enum
{
CUBEB_DEVICE_PREF_NONE
=
0x00
CUBEB_DEVICE_PREF_MULTIMEDIA
=
0x01
CUBEB_DEVICE_PREF_VOICE
=
0x02
CUBEB_DEVICE_PREF_NOTIFICATION
=
0x04
CUBEB_DEVICE_PREF_ALL
=
0x0F
}
cubeb_device_pref
;
typedef
struct
{
cubeb_devid
devid
;
char
*
device_id
;
char
*
friendly_name
;
char
*
group_id
;
char
*
vendor_name
;
cubeb_device_type
type
;
cubeb_device_state
state
;
cubeb_device_pref
preferred
;
cubeb_device_fmt
format
;
cubeb_device_fmt
default_format
;
unsigned
int
max_channels
;
unsigned
int
default_rate
;
unsigned
int
max_rate
;
unsigned
int
min_rate
;
unsigned
int
latency_lo_ms
;
unsigned
int
latency_hi_ms
;
}
cubeb_device_info
;
typedef
struct
{
uint32_t
count
;
cubeb_device_info
*
device
[
1
]
;
}
cubeb_device_collection
;
typedef
long
(
*
cubeb_data_callback
)
(
cubeb_stream
*
stream
void
*
user_ptr
const
void
*
input_buffer
void
*
output_buffer
long
nframes
)
;
typedef
void
(
*
cubeb_state_callback
)
(
cubeb_stream
*
stream
void
*
user_ptr
cubeb_state
state
)
;
typedef
void
(
*
cubeb_device_changed_callback
)
(
void
*
user_ptr
)
;
typedef
void
(
*
cubeb_device_collection_changed_callback
)
(
cubeb
*
context
void
*
user_ptr
)
;
int
cubeb_init
(
cubeb
*
*
context
char
const
*
context_name
)
;
char
const
*
cubeb_get_backend_id
(
cubeb
*
context
)
;
int
cubeb_get_max_channel_count
(
cubeb
*
context
uint32_t
*
max_channels
)
;
int
cubeb_get_min_latency
(
cubeb
*
context
cubeb_stream_params
params
uint32_t
*
latency_ms
)
;
int
cubeb_get_preferred_sample_rate
(
cubeb
*
context
uint32_t
*
rate
)
;
void
cubeb_destroy
(
cubeb
*
context
)
;
int
cubeb_stream_init
(
cubeb
*
context
cubeb_stream
*
*
stream
char
const
*
stream_name
cubeb_devid
input_device
cubeb_stream_params
*
input_stream_params
cubeb_devid
output_device
cubeb_stream_params
*
output_stream_params
unsigned
int
latency
cubeb_data_callback
data_callback
cubeb_state_callback
state_callback
void
*
user_ptr
)
;
void
cubeb_stream_destroy
(
cubeb_stream
*
stream
)
;
int
cubeb_stream_start
(
cubeb_stream
*
stream
)
;
int
cubeb_stream_stop
(
cubeb_stream
*
stream
)
;
int
cubeb_stream_get_position
(
cubeb_stream
*
stream
uint64_t
*
position
)
;
int
cubeb_stream_get_latency
(
cubeb_stream
*
stream
uint32_t
*
latency
)
;
int
cubeb_stream_set_volume
(
cubeb_stream
*
stream
float
volume
)
;
int
cubeb_stream_set_panning
(
cubeb_stream
*
stream
float
panning
)
;
int
cubeb_stream_get_current_device
(
cubeb_stream
*
stm
cubeb_device
*
*
const
device
)
;
int
cubeb_stream_device_destroy
(
cubeb_stream
*
stream
cubeb_device
*
devices
)
;
int
cubeb_stream_register_device_changed_callback
(
cubeb_stream
*
stream
cubeb_device_changed_callback
device_changed_callback
)
;
int
cubeb_enumerate_devices
(
cubeb
*
context
cubeb_device_type
devtype
cubeb_device_collection
*
*
collection
)
;
int
cubeb_device_collection_destroy
(
cubeb_device_collection
*
collection
)
;
int
cubeb_device_info_destroy
(
cubeb_device_info
*
info
)
;
int
cubeb_register_device_collection_changed
(
cubeb
*
context
cubeb_device_type
devtype
cubeb_device_collection_changed_callback
callback
void
*
user_ptr
)
;
#
if
defined
(
__cplusplus
)
}
#
endif
#
endif
