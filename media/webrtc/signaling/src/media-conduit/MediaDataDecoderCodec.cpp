#
include
"
MediaDataDecoderCodec
.
h
"
#
include
"
WebrtcMediaDataDecoderCodec
.
h
"
#
include
"
mozilla
/
StaticPrefs
.
h
"
namespace
mozilla
{
WebrtcVideoEncoder
*
MediaDataDecoderCodec
:
:
CreateEncoder
(
webrtc
:
:
VideoCodecType
aCodecType
)
{
return
nullptr
;
}
WebrtcVideoDecoder
*
MediaDataDecoderCodec
:
:
CreateDecoder
(
webrtc
:
:
VideoCodecType
aCodecType
)
{
if
(
!
StaticPrefs
:
:
MediaNavigatorMediadatadecoderEnabled
(
)
&
&
!
StaticPrefs
:
:
MediaNavigatorMediadatadecoderH264Enabled
(
)
)
{
return
nullptr
;
}
switch
(
aCodecType
)
{
case
webrtc
:
:
VideoCodecType
:
:
kVideoCodecVP8
:
case
webrtc
:
:
VideoCodecType
:
:
kVideoCodecVP9
:
if
(
!
StaticPrefs
:
:
MediaNavigatorMediadatadecoderEnabled
(
)
)
{
return
nullptr
;
}
MOZ_FALLTHROUGH
;
case
webrtc
:
:
VideoCodecType
:
:
kVideoCodecH264
:
break
;
default
:
return
nullptr
;
}
return
new
WebrtcMediaDataDecoder
(
)
;
}
}
