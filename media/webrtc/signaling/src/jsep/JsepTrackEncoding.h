#
ifndef
_JESPTRACKENCODING_H_
#
define
_JESPTRACKENCODING_H_
#
include
"
signaling
/
src
/
jsep
/
JsepCodecDescription
.
h
"
#
include
"
signaling
/
src
/
common
/
EncodingConstraints
.
h
"
#
include
"
signaling
/
src
/
common
/
PtrVector
.
h
"
namespace
mozilla
{
class
JsepTrackEncoding
{
public
:
const
std
:
:
vector
<
JsepCodecDescription
*
>
&
GetCodecs
(
)
const
{
return
mCodecs
.
values
;
}
void
AddCodec
(
const
JsepCodecDescription
&
codec
)
{
mCodecs
.
values
.
push_back
(
codec
.
Clone
(
)
)
;
}
bool
HasFormat
(
const
std
:
:
string
&
format
)
const
{
for
(
const
JsepCodecDescription
*
codec
:
mCodecs
.
values
)
{
if
(
codec
-
>
mDefaultPt
=
=
format
)
{
return
true
;
}
}
return
false
;
}
void
UpdateMaxBitrate
(
const
SdpMediaSection
&
remote
)
{
uint32_t
tias
=
remote
.
GetBandwidth
(
"
TIAS
"
)
;
mConstraints
.
maxBr
=
std
:
:
min
(
tias
?
tias
:
mConstraints
.
maxBr
mConstraints
.
maxBr
?
mConstraints
.
maxBr
:
tias
)
;
}
EncodingConstraints
mConstraints
;
std
:
:
string
mRid
;
private
:
PtrVector
<
JsepCodecDescription
>
mCodecs
;
}
;
}
#
endif
