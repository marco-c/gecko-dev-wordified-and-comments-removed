"
"
"
Verifies
that
ios
app
bundles
are
built
correctly
.
"
"
"
import
TestGyp
import
TestMac
import
os
.
path
import
sys
if
sys
.
platform
=
=
'
darwin
'
and
TestMac
.
Xcode
.
Version
(
)
>
=
'
0600
'
:
  
test_gyp_path
=
'
test
-
assets
-
catalog
.
gyp
'
  
test_app_path
=
'
Test
App
Assets
Catalog
Gyp
.
app
'
  
test
=
TestGyp
.
TestGyp
(
formats
=
[
'
xcode
'
'
ninja
'
]
)
  
test
.
run_gyp
(
test_gyp_path
chdir
=
'
app
-
bundle
'
)
  
test
.
build
(
test_gyp_path
test
.
ALL
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
Test
App
Assets
Catalog
Gyp
'
)
      
chdir
=
'
app
-
bundle
'
)
  
info_plist
=
test
.
built_file_path
(
      
os
.
path
.
join
(
test_app_path
'
Info
.
plist
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
English
.
lproj
/
InfoPlist
.
strings
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
English
.
lproj
/
MainMenu
.
nib
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
English
.
lproj
/
Main_iPhone
.
storyboardc
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
Assets
.
car
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_exist
(
      
os
.
path
.
join
(
test_app_path
'
PkgInfo
'
)
      
chdir
=
'
app
-
bundle
'
)
  
test
.
built_file_must_match
(
      
os
.
path
.
join
(
test_app_path
'
PkgInfo
'
)
'
APPLause
'
      
chdir
=
'
app
-
bundle
'
)
  
test
.
pass_test
(
)
