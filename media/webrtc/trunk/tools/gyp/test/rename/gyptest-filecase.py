"
"
"
Checks
that
files
whose
file
case
changes
get
rebuilt
correctly
.
"
"
"
import
os
import
TestGyp
test
=
TestGyp
.
TestGyp
(
)
CHDIR
=
'
filecase
'
test
.
run_gyp
(
'
test
.
gyp
'
chdir
=
CHDIR
)
test
.
build
(
'
test
.
gyp
'
test
.
ALL
chdir
=
CHDIR
)
os
.
rename
(
'
filecase
/
file
.
c
'
'
filecase
/
fIlE
.
c
'
)
test
.
write
(
'
filecase
/
test
.
gyp
'
           
test
.
read
(
'
filecase
/
test
.
gyp
'
)
.
replace
(
'
file
.
c
'
'
fIlE
.
c
'
)
)
test
.
run_gyp
(
'
test
.
gyp
'
chdir
=
CHDIR
)
test
.
build
(
'
test
.
gyp
'
test
.
ALL
chdir
=
CHDIR
)
test
.
write
(
'
filecase
/
FiLe
.
c
'
'
int
f
(
)
;
int
main
(
)
{
return
f
(
)
;
}
'
)
test
.
write
(
'
filecase
/
fIlE
.
c
'
'
int
f
(
)
{
return
42
;
}
'
)
is_case_sensitive
=
test
.
read
(
'
filecase
/
FiLe
.
c
'
)
!
=
test
.
read
(
'
filecase
/
fIlE
.
c
'
)
if
is_case_sensitive
:
  
test
.
run_gyp
(
'
test
-
casesensitive
.
gyp
'
chdir
=
CHDIR
)
  
test
.
build
(
'
test
-
casesensitive
.
gyp
'
test
.
ALL
chdir
=
CHDIR
)
test
.
pass_test
(
)
