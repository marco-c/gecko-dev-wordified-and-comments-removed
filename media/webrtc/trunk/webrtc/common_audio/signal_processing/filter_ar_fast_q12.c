#
include
"
rtc_base
/
checks
.
h
"
#
include
"
common_audio
/
signal_processing
/
include
/
signal_processing_library
.
h
"
void
WebRtcSpl_FilterARFastQ12
(
const
int16_t
*
data_in
int16_t
*
data_out
const
int16_t
*
__restrict
coefficients
size_t
coefficients_length
size_t
data_length
)
{
size_t
i
=
0
;
size_t
j
=
0
;
RTC_DCHECK_GT
(
data_length
0
)
;
RTC_DCHECK_GT
(
coefficients_length
1
)
;
for
(
i
=
0
;
i
<
data_length
;
i
+
+
)
{
int32_t
output
=
0
;
int32_t
sum
=
0
;
for
(
j
=
coefficients_length
-
1
;
j
>
0
;
j
-
-
)
{
sum
+
=
coefficients
[
j
]
*
data_out
[
(
ptrdiff_t
)
i
-
(
ptrdiff_t
)
j
]
;
}
output
=
coefficients
[
0
]
*
data_in
[
i
]
;
output
-
=
sum
;
output
=
WEBRTC_SPL_SAT
(
134215679
output
-
134217728
)
;
data_out
[
i
]
=
(
int16_t
)
(
(
output
+
2048
)
>
>
12
)
;
}
}
