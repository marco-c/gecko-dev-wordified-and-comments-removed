#
include
"
webrtc
/
common_audio
/
signal_processing
/
include
/
signal_processing_library
.
h
"
#
include
"
webrtc
/
base
/
sanitizer
.
h
"
void
WebRtcSpl_FilterMAFastQ12
(
const
int16_t
*
in_ptr
int16_t
*
out_ptr
const
int16_t
*
B
size_t
B_length
size_t
length
)
{
size_t
i
j
;
rtc_MsanCheckInitialized
(
B
sizeof
(
B
[
0
]
)
B_length
)
;
rtc_MsanCheckInitialized
(
in_ptr
-
B_length
+
1
sizeof
(
in_ptr
[
0
]
)
B_length
+
length
-
1
)
;
for
(
i
=
0
;
i
<
length
;
i
+
+
)
{
int32_t
o
=
0
;
for
(
j
=
0
;
j
<
B_length
;
j
+
+
)
{
o
+
=
B
[
j
]
*
in_ptr
[
i
-
j
]
;
}
o
=
WEBRTC_SPL_SAT
(
(
int32_t
)
134215679
o
(
int32_t
)
-
134217728
)
;
*
out_ptr
+
+
=
(
int16_t
)
(
(
o
+
(
int32_t
)
2048
)
>
>
12
)
;
}
return
;
}
