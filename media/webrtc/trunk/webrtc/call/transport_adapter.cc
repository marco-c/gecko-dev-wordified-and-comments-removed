#
include
"
webrtc
/
call
/
transport_adapter
.
h
"
#
include
"
webrtc
/
base
/
checks
.
h
"
namespace
webrtc
{
namespace
internal
{
TransportAdapter
:
:
TransportAdapter
(
Transport
*
transport
)
:
transport_
(
transport
)
enabled_
(
0
)
{
RTC_DCHECK
(
nullptr
!
=
transport
)
;
}
bool
TransportAdapter
:
:
SendRtp
(
const
uint8_t
*
packet
size_t
length
const
PacketOptions
&
options
)
{
if
(
enabled_
.
Value
(
)
=
=
0
)
return
false
;
return
transport_
-
>
SendRtp
(
packet
length
options
)
;
}
bool
TransportAdapter
:
:
SendRtcp
(
const
uint8_t
*
packet
size_t
length
)
{
if
(
enabled_
.
Value
(
)
=
=
0
)
return
false
;
return
transport_
-
>
SendRtcp
(
packet
length
)
;
}
void
TransportAdapter
:
:
Enable
(
)
{
enabled_
.
CompareExchange
(
1
0
)
;
}
void
TransportAdapter
:
:
Disable
(
)
{
enabled_
.
CompareExchange
(
0
1
)
;
}
}
}
