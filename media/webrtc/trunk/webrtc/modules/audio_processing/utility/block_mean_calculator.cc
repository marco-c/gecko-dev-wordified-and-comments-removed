#
include
"
modules
/
audio_processing
/
utility
/
block_mean_calculator
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
BlockMeanCalculator
:
:
BlockMeanCalculator
(
size_t
block_length
)
:
block_length_
(
block_length
)
count_
(
0
)
sum_
(
0
.
0
)
mean_
(
0
.
0
)
{
RTC_DCHECK
(
block_length_
!
=
0
)
;
}
void
BlockMeanCalculator
:
:
Reset
(
)
{
Clear
(
)
;
mean_
=
0
.
0
;
}
void
BlockMeanCalculator
:
:
AddValue
(
float
value
)
{
sum_
+
=
value
;
+
+
count_
;
if
(
count_
=
=
block_length_
)
{
mean_
=
sum_
/
block_length_
;
Clear
(
)
;
}
}
bool
BlockMeanCalculator
:
:
EndOfBlock
(
)
const
{
return
count_
=
=
0
;
}
float
BlockMeanCalculator
:
:
GetLatestMean
(
)
const
{
return
mean_
;
}
void
BlockMeanCalculator
:
:
Clear
(
)
{
count_
=
0
;
sum_
=
0
.
0
;
}
}
