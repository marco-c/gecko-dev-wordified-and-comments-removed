#
ifndef
WEBRTC_MODULES_DESKTOP_CAPTURE_DIFFER_H_
#
define
WEBRTC_MODULES_DESKTOP_CAPTURE_DIFFER_H_
#
include
<
vector
>
#
include
"
webrtc
/
base
/
scoped_ptr
.
h
"
#
include
"
webrtc
/
modules
/
desktop_capture
/
desktop_region
.
h
"
namespace
webrtc
{
class
Differ
{
public
:
Differ
(
int
width
int
height
int
bytes_per_pixel
int
stride
)
;
~
Differ
(
)
;
int
width
(
)
{
return
width_
;
}
int
height
(
)
{
return
height_
;
}
int
bytes_per_pixel
(
)
{
return
bytes_per_pixel_
;
}
int
bytes_per_row
(
)
{
return
bytes_per_row_
;
}
void
CalcDirtyRegion
(
const
uint8_t
*
prev_buffer
const
uint8_t
*
curr_buffer
DesktopRegion
*
region
)
;
private
:
friend
class
DifferTest
;
void
MarkDirtyBlocks
(
const
uint8_t
*
prev_buffer
const
uint8_t
*
curr_buffer
)
;
void
MergeBlocks
(
DesktopRegion
*
region
)
;
bool
PartialBlocksEqual
(
const
uint8_t
*
prev_buffer
const
uint8_t
*
curr_buffer
int
stride
int
width
int
height
)
;
int
width_
;
int
height_
;
int
bytes_per_pixel_
;
int
bytes_per_row_
;
rtc
:
:
scoped_ptr
<
bool
[
]
>
diff_info_
;
int
diff_info_width_
;
int
diff_info_height_
;
int
diff_info_size_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
Differ
)
;
}
;
}
#
endif
