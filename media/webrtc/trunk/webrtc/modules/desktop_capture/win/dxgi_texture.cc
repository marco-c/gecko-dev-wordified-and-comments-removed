#
include
"
webrtc
/
modules
/
desktop_capture
/
win
/
dxgi_texture
.
h
"
#
include
"
webrtc
/
modules
/
desktop_capture
/
desktop_region
.
h
"
namespace
webrtc
{
namespace
{
class
DxgiDesktopFrame
:
public
DesktopFrame
{
public
:
explicit
DxgiDesktopFrame
(
const
DxgiTexture
&
texture
)
:
DesktopFrame
(
texture
.
desktop_size
(
)
texture
.
pitch
(
)
texture
.
bits
(
)
nullptr
)
{
}
~
DxgiDesktopFrame
(
)
override
=
default
;
}
;
}
DxgiTexture
:
:
DxgiTexture
(
const
DesktopSize
&
desktop_size
)
:
desktop_size_
(
desktop_size
)
{
}
DxgiTexture
:
:
~
DxgiTexture
(
)
{
}
const
DesktopFrame
&
DxgiTexture
:
:
AsDesktopFrame
(
)
{
if
(
!
frame_
)
{
frame_
.
reset
(
new
DxgiDesktopFrame
(
*
this
)
)
;
}
return
*
frame_
;
}
bool
DxgiTexture
:
:
Release
(
)
{
frame_
.
reset
(
)
;
return
DoRelease
(
)
;
}
}
