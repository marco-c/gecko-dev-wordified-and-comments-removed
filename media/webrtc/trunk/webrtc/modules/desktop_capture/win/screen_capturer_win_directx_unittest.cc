#
include
"
modules
/
desktop_capture
/
win
/
screen_capturer_win_directx
.
h
"
#
include
<
vector
>
#
include
<
string
>
#
include
"
modules
/
desktop_capture
/
desktop_capturer
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
ScreenCaptureUtilsTest
GetScreenListFromDeviceNamesAndGetIndex
)
{
const
std
:
:
vector
<
std
:
:
string
>
device_names
=
{
"
\
\
\
\
.
\
\
DISPLAY0
"
"
\
\
\
\
.
\
\
DISPLAY1
"
"
\
\
\
\
.
\
\
DISPLAY2
"
}
;
DesktopCapturer
:
:
SourceList
screens
;
ASSERT_TRUE
(
ScreenCapturerWinDirectx
:
:
GetScreenListFromDeviceNames
(
device_names
&
screens
)
)
;
ASSERT_EQ
(
device_names
.
size
(
)
screens
.
size
(
)
)
;
for
(
size_t
i
=
0
;
i
<
screens
.
size
(
)
;
i
+
+
)
{
ASSERT_EQ
(
ScreenCapturerWinDirectx
:
:
GetIndexFromScreenId
(
screens
[
i
]
.
id
device_names
)
static_cast
<
int
>
(
i
)
)
;
}
}
}
