#
ifndef
WEBRTC_MODULES_DESKTOP_CAPTURE_DESKTOP_AND_CURSOR_COMPOSER_H_
#
define
WEBRTC_MODULES_DESKTOP_CAPTURE_DESKTOP_AND_CURSOR_COMPOSER_H_
#
include
"
webrtc
/
base
/
scoped_ptr
.
h
"
#
include
"
webrtc
/
modules
/
desktop_capture
/
desktop_capturer
.
h
"
#
include
"
webrtc
/
modules
/
desktop_capture
/
mouse_cursor_monitor
.
h
"
namespace
webrtc
{
class
DesktopAndCursorComposer
:
public
DesktopCapturer
public
DesktopCapturer
:
:
Callback
public
MouseCursorMonitor
:
:
Callback
{
public
:
DesktopAndCursorComposer
(
DesktopCapturer
*
desktop_capturer
MouseCursorMonitor
*
mouse_monitor
)
;
virtual
~
DesktopAndCursorComposer
(
)
;
void
Start
(
DesktopCapturer
:
:
Callback
*
callback
)
override
;
void
Stop
(
)
override
;
void
Capture
(
const
DesktopRegion
&
region
)
override
;
void
SetExcludedWindow
(
WindowId
window
)
override
;
private
:
SharedMemory
*
CreateSharedMemory
(
size_t
size
)
override
;
void
OnCaptureCompleted
(
DesktopFrame
*
frame
)
override
;
void
OnMouseCursor
(
MouseCursor
*
cursor
)
override
;
void
OnMouseCursorPosition
(
MouseCursorMonitor
:
:
CursorState
state
const
DesktopVector
&
position
)
override
;
rtc
:
:
scoped_ptr
<
DesktopCapturer
>
desktop_capturer_
;
rtc
:
:
scoped_ptr
<
MouseCursorMonitor
>
mouse_monitor_
;
DesktopCapturer
:
:
Callback
*
callback_
;
rtc
:
:
scoped_ptr
<
MouseCursor
>
cursor_
;
MouseCursorMonitor
:
:
CursorState
cursor_state_
;
DesktopVector
cursor_position_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
DesktopAndCursorComposer
)
;
}
;
}
#
endif
