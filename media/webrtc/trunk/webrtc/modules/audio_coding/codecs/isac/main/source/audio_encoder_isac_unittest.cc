#
include
<
limits
>
#
include
"
modules
/
audio_coding
/
codecs
/
isac
/
main
/
include
/
audio_encoder_isac
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
namespace
{
void
TestBadConfig
(
const
AudioEncoderIsacFloatImpl
:
:
Config
&
config
)
{
EXPECT_FALSE
(
config
.
IsOk
(
)
)
;
}
void
TestGoodConfig
(
const
AudioEncoderIsacFloatImpl
:
:
Config
&
config
)
{
EXPECT_TRUE
(
config
.
IsOk
(
)
)
;
AudioEncoderIsacFloatImpl
aei
(
config
)
;
}
#
define
S
(
x
)
do
{
SCOPED_TRACE
(
#
x
)
;
x
;
}
while
(
0
)
}
TEST
(
AudioEncoderIsacTest
TestConfigBitrate
)
{
AudioEncoderIsacFloatImpl
:
:
Config
config
;
EXPECT_GT
(
config
.
bit_rate
1
)
;
S
(
TestGoodConfig
(
config
)
)
;
config
.
bit_rate
=
0
;
S
(
TestGoodConfig
(
config
)
)
;
config
.
bit_rate
=
-
1
;
S
(
TestBadConfig
(
config
)
)
;
config
.
bit_rate
=
1
;
S
(
TestBadConfig
(
config
)
)
;
config
.
bit_rate
=
std
:
:
numeric_limits
<
int
>
:
:
max
(
)
;
S
(
TestBadConfig
(
config
)
)
;
}
}
