#
ifndef
RTC_BASE_NETWORKMONITOR_H_
#
define
RTC_BASE_NETWORKMONITOR_H_
#
include
"
rtc_base
/
logging
.
h
"
#
include
"
rtc_base
/
network_constants
.
h
"
#
include
"
rtc_base
/
sigslot
.
h
"
#
include
"
rtc_base
/
thread
.
h
"
namespace
rtc
{
class
IPAddress
;
enum
class
NetworkBindingResult
{
SUCCESS
=
0
FAILURE
=
-
1
NOT_IMPLEMENTED
=
-
2
ADDRESS_NOT_FOUND
=
-
3
NETWORK_CHANGED
=
-
4
}
;
class
NetworkBinderInterface
{
public
:
virtual
NetworkBindingResult
BindSocketToNetwork
(
int
socket_fd
const
IPAddress
&
address
)
=
0
;
virtual
~
NetworkBinderInterface
(
)
{
}
}
;
class
NetworkMonitorInterface
{
public
:
NetworkMonitorInterface
(
)
;
virtual
~
NetworkMonitorInterface
(
)
;
sigslot
:
:
signal0
<
>
SignalNetworksChanged
;
virtual
void
Start
(
)
=
0
;
virtual
void
Stop
(
)
=
0
;
virtual
void
OnNetworksChanged
(
)
=
0
;
virtual
AdapterType
GetAdapterType
(
const
std
:
:
string
&
interface_name
)
=
0
;
}
;
class
NetworkMonitorBase
:
public
NetworkMonitorInterface
public
MessageHandler
public
sigslot
:
:
has_slots
<
>
{
public
:
NetworkMonitorBase
(
)
;
~
NetworkMonitorBase
(
)
override
;
void
OnNetworksChanged
(
)
override
;
void
OnMessage
(
Message
*
msg
)
override
;
protected
:
Thread
*
worker_thread
(
)
{
return
worker_thread_
;
}
private
:
Thread
*
worker_thread_
;
}
;
class
NetworkMonitorFactory
{
public
:
static
void
SetFactory
(
NetworkMonitorFactory
*
factory
)
;
static
void
ReleaseFactory
(
NetworkMonitorFactory
*
factory
)
;
static
NetworkMonitorFactory
*
GetFactory
(
)
;
virtual
NetworkMonitorInterface
*
CreateNetworkMonitor
(
)
=
0
;
virtual
~
NetworkMonitorFactory
(
)
;
protected
:
NetworkMonitorFactory
(
)
;
}
;
}
#
endif
