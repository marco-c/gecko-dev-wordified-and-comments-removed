#
ifndef
RTC_BASE_BUFFERQUEUE_H_
#
define
RTC_BASE_BUFFERQUEUE_H_
#
include
<
deque
>
#
include
<
vector
>
#
include
"
rtc_base
/
buffer
.
h
"
#
include
"
rtc_base
/
constructormagic
.
h
"
#
include
"
rtc_base
/
criticalsection
.
h
"
namespace
rtc
{
class
BufferQueue
{
public
:
BufferQueue
(
size_t
capacity
size_t
default_size
)
;
virtual
~
BufferQueue
(
)
;
size_t
size
(
)
const
;
void
Clear
(
)
;
bool
ReadFront
(
void
*
data
size_t
bytes
size_t
*
bytes_read
)
;
bool
WriteBack
(
const
void
*
data
size_t
bytes
size_t
*
bytes_written
)
;
protected
:
virtual
void
NotifyReadableForTest
(
)
{
}
virtual
void
NotifyWritableForTest
(
)
{
}
private
:
size_t
capacity_
;
size_t
default_size_
;
CriticalSection
crit_
;
std
:
:
deque
<
Buffer
*
>
queue_
RTC_GUARDED_BY
(
crit_
)
;
std
:
:
vector
<
Buffer
*
>
free_list_
RTC_GUARDED_BY
(
crit_
)
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
BufferQueue
)
;
}
;
}
#
endif
