#
ifndef
RTC_BASE_KEEP_REF_UNTIL_DONE_H_
#
define
RTC_BASE_KEEP_REF_UNTIL_DONE_H_
#
include
"
rtc_base
/
bind
.
h
"
#
include
"
rtc_base
/
callback
.
h
"
#
include
"
rtc_base
/
refcount
.
h
"
#
include
"
rtc_base
/
scoped_ref_ptr
.
h
"
namespace
rtc
{
namespace
impl
{
template
<
class
T
>
static
inline
void
DoNothing
(
const
scoped_refptr
<
T
>
&
object
)
{
}
}
template
<
class
ObjectT
>
static
inline
Callback0
<
void
>
KeepRefUntilDone
(
ObjectT
*
object
)
{
return
rtc
:
:
Bind
(
&
impl
:
:
DoNothing
<
ObjectT
>
scoped_refptr
<
ObjectT
>
(
object
)
)
;
}
template
<
class
ObjectT
>
static
inline
Callback0
<
void
>
KeepRefUntilDone
(
const
scoped_refptr
<
ObjectT
>
&
object
)
{
return
rtc
:
:
Bind
(
&
impl
:
:
DoNothing
<
ObjectT
>
object
)
;
}
}
#
endif
