#
include
"
webrtc
/
media
/
engine
/
nullwebrtcvideoengine
.
h
"
#
include
"
webrtc
/
media
/
engine
/
webrtcvoiceengine
.
h
"
#
include
"
webrtc
/
modules
/
audio_coding
/
codecs
/
mock
/
mock_audio_decoder_factory
.
h
"
#
include
"
webrtc
/
test
/
gtest
.
h
"
namespace
cricket
{
class
WebRtcMediaEngineNullVideo
:
public
CompositeMediaEngine
<
WebRtcVoiceEngine
NullWebRtcVideoEngine
>
{
public
:
WebRtcMediaEngineNullVideo
(
webrtc
:
:
AudioDeviceModule
*
adm
const
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioDecoderFactory
>
&
audio_decoder_factory
WebRtcVideoEncoderFactory
*
video_encoder_factory
WebRtcVideoDecoderFactory
*
video_decoder_factory
)
:
CompositeMediaEngine
<
WebRtcVoiceEngine
NullWebRtcVideoEngine
>
(
adm
audio_decoder_factory
nullptr
)
{
video_
.
SetExternalDecoderFactory
(
video_decoder_factory
)
;
video_
.
SetExternalEncoderFactory
(
video_encoder_factory
)
;
}
}
;
TEST
(
NullWebRtcVideoEngineTest
CheckInterface
)
{
WebRtcMediaEngineNullVideo
engine
(
nullptr
webrtc
:
:
MockAudioDecoderFactory
:
:
CreateUnusedFactory
(
)
nullptr
nullptr
)
;
EXPECT_TRUE
(
engine
.
Init
(
)
)
;
}
}
