#
ifndef
WEBRTC_TEST_DRIFTING_CLOCK_H_
#
define
WEBRTC_TEST_DRIFTING_CLOCK_H_
#
include
"
webrtc
/
system_wrappers
/
include
/
clock
.
h
"
namespace
webrtc
{
namespace
test
{
class
DriftingClock
:
public
Clock
{
public
:
static
const
float
kDoubleSpeed
;
static
const
float
kNoDrift
;
static
const
float
kHalfSpeed
;
DriftingClock
(
Clock
*
clock
float
speed
)
;
static
float
PercentsFaster
(
float
percent
)
{
return
1
.
0f
+
percent
/
100
.
0f
;
}
static
float
PercentsSlower
(
float
percent
)
{
return
1
.
0f
-
percent
/
100
.
0f
;
}
int64_t
TimeInMilliseconds
(
)
const
override
;
int64_t
TimeInMicroseconds
(
)
const
override
;
void
CurrentNtp
(
uint32_t
&
seconds
uint32_t
&
fractions
)
const
override
;
int64_t
CurrentNtpInMilliseconds
(
)
const
override
;
private
:
float
Drift
(
)
const
;
Clock
*
const
clock_
;
const
float
drift_
;
const
int64_t
start_time_
;
}
;
}
}
#
endif
