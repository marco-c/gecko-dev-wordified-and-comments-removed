#
ifndef
WEBRTC_API_OBJC_AVFOUNDATION_VIDEO_CAPTURER_H_
#
define
WEBRTC_API_OBJC_AVFOUNDATION_VIDEO_CAPTURER_H_
#
import
<
AVFoundation
/
AVFoundation
.
h
>
#
include
"
webrtc
/
api
/
video
/
video_frame
.
h
"
#
include
"
webrtc
/
common_video
/
include
/
i420_buffer_pool
.
h
"
#
include
"
webrtc
/
media
/
base
/
videocapturer
.
h
"
class
RTCAVFoundationVideoCapturerInternal
;
namespace
rtc
{
class
Thread
;
}
namespace
webrtc
{
class
AVFoundationVideoCapturer
:
public
cricket
:
:
VideoCapturer
{
public
:
AVFoundationVideoCapturer
(
)
;
~
AVFoundationVideoCapturer
(
)
;
cricket
:
:
CaptureState
Start
(
const
cricket
:
:
VideoFormat
&
format
)
override
;
void
Stop
(
)
override
;
bool
IsRunning
(
)
override
;
bool
IsScreencast
(
)
const
override
{
return
false
;
}
bool
GetPreferredFourccs
(
std
:
:
vector
<
uint32_t
>
*
fourccs
)
override
{
fourccs
-
>
push_back
(
cricket
:
:
FOURCC_NV12
)
;
return
true
;
}
AVCaptureSession
*
GetCaptureSession
(
)
;
bool
CanUseBackCamera
(
)
const
;
void
SetUseBackCamera
(
bool
useBackCamera
)
;
bool
GetUseBackCamera
(
)
const
;
void
CaptureSampleBuffer
(
CMSampleBufferRef
sample_buffer
webrtc
:
:
VideoRotation
rotation
)
;
void
AdaptOutputFormat
(
int
width
int
height
int
fps
)
;
private
:
RTCAVFoundationVideoCapturerInternal
*
_capturer
;
webrtc
:
:
I420BufferPool
_buffer_pool
;
}
;
}
#
endif
