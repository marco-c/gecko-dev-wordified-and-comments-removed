#
import
<
Foundation
/
Foundation
.
h
>
#
import
<
WebRTC
/
RTCMacros
.
h
>
class
RTCConfiguration
;
class
RTCDataChannel
;
class
RTCDataChannelConfiguration
;
class
RTCIceCandidate
;
class
RTCMediaConstraints
;
class
RTCMediaStream
;
class
RTCMediaStreamTrack
;
class
RTCPeerConnectionFactory
;
class
RTCRtpReceiver
;
class
RTCRtpSender
;
class
RTCSessionDescription
;
class
RTCLegacyStatsReport
;
NS_ASSUME_NONNULL_BEGIN
extern
NSString
*
const
kRTCPeerConnectionErrorDomain
;
extern
int
const
kRTCSessionDescriptionErrorCode
;
typedef
NS_ENUM
(
NSInteger
RTCSignalingState
)
{
RTCSignalingStateStable
RTCSignalingStateHaveLocalOffer
RTCSignalingStateHaveLocalPrAnswer
RTCSignalingStateHaveRemoteOffer
RTCSignalingStateHaveRemotePrAnswer
RTCSignalingStateClosed
}
;
typedef
NS_ENUM
(
NSInteger
RTCIceConnectionState
)
{
RTCIceConnectionStateNew
RTCIceConnectionStateChecking
RTCIceConnectionStateConnected
RTCIceConnectionStateCompleted
RTCIceConnectionStateFailed
RTCIceConnectionStateDisconnected
RTCIceConnectionStateClosed
RTCIceConnectionStateCount
}
;
typedef
NS_ENUM
(
NSInteger
RTCIceGatheringState
)
{
RTCIceGatheringStateNew
RTCIceGatheringStateGathering
RTCIceGatheringStateComplete
}
;
typedef
NS_ENUM
(
NSInteger
RTCStatsOutputLevel
)
{
RTCStatsOutputLevelStandard
RTCStatsOutputLevelDebug
}
;
class
RTCPeerConnection
;
RTC_EXPORT
protocol
RTCPeerConnectionDelegate
<
NSObject
>
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didChangeSignalingState
:
(
RTCSignalingState
)
stateChanged
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didAddStream
:
(
RTCMediaStream
*
)
stream
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didRemoveStream
:
(
RTCMediaStream
*
)
stream
;
-
(
void
)
peerConnectionShouldNegotiate
:
(
RTCPeerConnection
*
)
peerConnection
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didChangeIceConnectionState
:
(
RTCIceConnectionState
)
newState
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didChangeIceGatheringState
:
(
RTCIceGatheringState
)
newState
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didGenerateIceCandidate
:
(
RTCIceCandidate
*
)
candidate
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didRemoveIceCandidates
:
(
NSArray
<
RTCIceCandidate
*
>
*
)
candidates
;
-
(
void
)
peerConnection
:
(
RTCPeerConnection
*
)
peerConnection
didOpenDataChannel
:
(
RTCDataChannel
*
)
dataChannel
;
end
RTC_EXPORT
interface
RTCPeerConnection
:
NSObject
property
(
nonatomic
weak
nullable
)
id
<
RTCPeerConnectionDelegate
>
delegate
;
property
(
nonatomic
readonly
)
NSArray
<
RTCMediaStream
*
>
*
localStreams
;
property
(
nonatomic
readonly
nullable
)
RTCSessionDescription
*
localDescription
;
property
(
nonatomic
readonly
nullable
)
RTCSessionDescription
*
remoteDescription
;
property
(
nonatomic
readonly
)
RTCSignalingState
signalingState
;
property
(
nonatomic
readonly
)
RTCIceConnectionState
iceConnectionState
;
property
(
nonatomic
readonly
)
RTCIceGatheringState
iceGatheringState
;
property
(
nonatomic
readonly
copy
)
RTCConfiguration
*
configuration
;
property
(
nonatomic
readonly
)
NSArray
<
RTCRtpSender
*
>
*
senders
;
property
(
nonatomic
readonly
)
NSArray
<
RTCRtpReceiver
*
>
*
receivers
;
-
(
instancetype
)
init
NS_UNAVAILABLE
;
-
(
BOOL
)
setConfiguration
:
(
RTCConfiguration
*
)
configuration
;
-
(
void
)
close
;
-
(
void
)
addIceCandidate
:
(
RTCIceCandidate
*
)
candidate
;
-
(
void
)
removeIceCandidates
:
(
NSArray
<
RTCIceCandidate
*
>
*
)
candidates
;
-
(
void
)
addStream
:
(
RTCMediaStream
*
)
stream
;
-
(
void
)
removeStream
:
(
RTCMediaStream
*
)
stream
;
-
(
void
)
offerForConstraints
:
(
RTCMediaConstraints
*
)
constraints
completionHandler
:
(
nullable
void
(
^
)
(
RTCSessionDescription
*
_Nullable
sdp
NSError
*
_Nullable
error
)
)
completionHandler
;
-
(
void
)
answerForConstraints
:
(
RTCMediaConstraints
*
)
constraints
completionHandler
:
(
nullable
void
(
^
)
(
RTCSessionDescription
*
_Nullable
sdp
NSError
*
_Nullable
error
)
)
completionHandler
;
-
(
void
)
setLocalDescription
:
(
RTCSessionDescription
*
)
sdp
completionHandler
:
(
nullable
void
(
^
)
(
NSError
*
_Nullable
error
)
)
completionHandler
;
-
(
void
)
setRemoteDescription
:
(
RTCSessionDescription
*
)
sdp
completionHandler
:
(
nullable
void
(
^
)
(
NSError
*
_Nullable
error
)
)
completionHandler
;
-
(
BOOL
)
setBweMinBitrateBps
:
(
nullable
NSNumber
*
)
minBitrateBps
currentBitrateBps
:
(
nullable
NSNumber
*
)
currentBitrateBps
maxBitrateBps
:
(
nullable
NSNumber
*
)
maxBitrateBps
;
-
(
BOOL
)
startRtcEventLogWithFilePath
:
(
NSString
*
)
filePath
maxSizeInBytes
:
(
int64_t
)
maxSizeInBytes
;
-
(
void
)
stopRtcEventLog
;
end
interface
RTCPeerConnection
(
Media
)
-
(
RTCRtpSender
*
)
senderWithKind
:
(
NSString
*
)
kind
streamId
:
(
NSString
*
)
streamId
;
end
interface
RTCPeerConnection
(
DataChannel
)
-
(
RTCDataChannel
*
)
dataChannelForLabel
:
(
NSString
*
)
label
configuration
:
(
RTCDataChannelConfiguration
*
)
configuration
;
end
interface
RTCPeerConnection
(
Stats
)
-
(
void
)
statsForTrack
:
(
nullable
RTCMediaStreamTrack
*
)
mediaStreamTrack
statsOutputLevel
:
(
RTCStatsOutputLevel
)
statsOutputLevel
completionHandler
:
(
nullable
void
(
^
)
(
NSArray
<
RTCLegacyStatsReport
*
>
*
stats
)
)
completionHandler
;
end
NS_ASSUME_NONNULL_END
