package
org
.
webrtc
;
public
class
RtpReceiver
{
public
static
interface
Observer
{
public
void
onFirstPacketReceived
(
MediaStreamTrack
.
MediaType
media_type
)
;
}
final
long
nativeRtpReceiver
;
private
long
nativeObserver
;
private
MediaStreamTrack
cachedTrack
;
public
RtpReceiver
(
long
nativeRtpReceiver
)
{
this
.
nativeRtpReceiver
=
nativeRtpReceiver
;
long
track
=
nativeGetTrack
(
nativeRtpReceiver
)
;
cachedTrack
=
new
MediaStreamTrack
(
track
)
;
}
public
MediaStreamTrack
track
(
)
{
return
cachedTrack
;
}
public
boolean
setParameters
(
RtpParameters
parameters
)
{
return
nativeSetParameters
(
nativeRtpReceiver
parameters
)
;
}
public
RtpParameters
getParameters
(
)
{
return
nativeGetParameters
(
nativeRtpReceiver
)
;
}
public
String
id
(
)
{
return
nativeId
(
nativeRtpReceiver
)
;
}
public
void
dispose
(
)
{
cachedTrack
.
dispose
(
)
;
if
(
nativeObserver
!
=
0
)
{
nativeUnsetObserver
(
nativeRtpReceiver
nativeObserver
)
;
nativeObserver
=
0
;
}
JniCommon
.
nativeReleaseRef
(
nativeRtpReceiver
)
;
}
public
void
SetObserver
(
Observer
observer
)
{
if
(
nativeObserver
!
=
0
)
{
nativeUnsetObserver
(
nativeRtpReceiver
nativeObserver
)
;
}
nativeObserver
=
nativeSetObserver
(
nativeRtpReceiver
observer
)
;
}
private
static
native
long
nativeGetTrack
(
long
nativeRtpReceiver
)
;
private
static
native
boolean
nativeSetParameters
(
long
nativeRtpReceiver
RtpParameters
parameters
)
;
private
static
native
RtpParameters
nativeGetParameters
(
long
nativeRtpReceiver
)
;
private
static
native
String
nativeId
(
long
nativeRtpReceiver
)
;
private
static
native
long
nativeSetObserver
(
long
nativeRtpReceiver
Observer
observer
)
;
private
static
native
long
nativeUnsetObserver
(
long
nativeRtpReceiver
long
nativeObserver
)
;
}
;
