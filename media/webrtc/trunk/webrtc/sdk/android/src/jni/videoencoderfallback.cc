#
include
<
jni
.
h
>
#
include
"
media
/
engine
/
videoencodersoftwarefallbackwrapper
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
jni_helpers
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
wrappednativecodec
.
h
"
namespace
webrtc
{
namespace
jni
{
JNI_FUNCTION_DECLARATION
(
jlong
VideoEncoderFallback_createNativeEncoder
JNIEnv
*
jni
jclass
jobject
j_fallback_encoder
jobject
j_primary_encoder
)
{
std
:
:
unique_ptr
<
VideoEncoder
>
fallback_encoder
=
JavaToNativeVideoEncoder
(
jni
j_fallback_encoder
)
;
std
:
:
unique_ptr
<
VideoEncoder
>
primary_encoder
=
JavaToNativeVideoEncoder
(
jni
j_primary_encoder
)
;
VideoEncoderSoftwareFallbackWrapper
*
nativeWrapper
=
new
VideoEncoderSoftwareFallbackWrapper
(
std
:
:
move
(
fallback_encoder
)
std
:
:
move
(
primary_encoder
)
)
;
return
jlongFromPointer
(
nativeWrapper
)
;
}
}
}
