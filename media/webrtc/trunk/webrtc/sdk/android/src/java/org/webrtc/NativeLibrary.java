package
org
.
webrtc
;
class
NativeLibrary
{
private
static
String
TAG
=
"
NativeLibrary
"
;
static
class
DefaultLoader
implements
NativeLibraryLoader
{
Override
public
boolean
load
(
String
name
)
{
Logging
.
d
(
TAG
"
Loading
library
:
"
+
name
)
;
try
{
System
.
loadLibrary
(
name
)
;
}
catch
(
UnsatisfiedLinkError
e
)
{
Logging
.
e
(
TAG
"
Failed
to
load
native
library
:
"
+
name
e
)
;
return
false
;
}
return
true
;
}
}
private
static
Object
lock
=
new
Object
(
)
;
private
static
boolean
libraryLoaded
=
false
;
static
void
initialize
(
NativeLibraryLoader
loader
)
{
synchronized
(
lock
)
{
if
(
libraryLoaded
)
{
Logging
.
d
(
TAG
"
Native
library
has
already
been
loaded
.
"
)
;
return
;
}
Logging
.
d
(
TAG
"
Loading
native
library
.
"
)
;
libraryLoaded
=
loader
.
load
(
"
jingle_peerconnection_so
"
)
;
}
}
static
boolean
isLoaded
(
)
{
synchronized
(
lock
)
{
return
libraryLoaded
;
}
}
}
