#
ifndef
WEBRTC_BASE_ARRAY_VIEW_H_
#
define
WEBRTC_BASE_ARRAY_VIEW_H_
#
include
"
webrtc
/
base
/
checks
.
h
"
namespace
rtc
{
template
<
typename
T
>
class
ArrayView
final
{
public
:
ArrayView
(
)
:
ArrayView
(
static_cast
<
T
*
>
(
nullptr
)
0
)
{
}
template
<
typename
U
>
ArrayView
(
U
*
data
size_t
size
)
:
data_
(
size
=
=
0
?
nullptr
:
data
)
size_
(
size
)
{
CheckInvariant
(
)
;
}
template
<
typename
U
size_t
N
>
ArrayView
(
U
(
&
array
)
[
N
]
)
:
ArrayView
(
&
array
[
0
]
N
)
{
}
template
<
typename
U
>
ArrayView
(
U
&
u
)
:
ArrayView
(
u
.
data
(
)
u
.
size
(
)
)
{
}
size_t
size
(
)
const
{
return
size_
;
}
bool
empty
(
)
const
{
return
size_
=
=
0
;
}
T
*
data
(
)
const
{
return
data_
;
}
T
&
operator
[
]
(
size_t
idx
)
const
{
RTC_DCHECK_LT
(
idx
size_
)
;
RTC_DCHECK
(
data_
)
;
return
data_
[
idx
]
;
}
T
*
begin
(
)
const
{
return
data_
;
}
T
*
end
(
)
const
{
return
data_
+
size_
;
}
const
T
*
cbegin
(
)
const
{
return
data_
;
}
const
T
*
cend
(
)
const
{
return
data_
+
size_
;
}
friend
bool
operator
=
=
(
const
ArrayView
&
a
const
ArrayView
&
b
)
{
return
a
.
data_
=
=
b
.
data_
&
&
a
.
size_
=
=
b
.
size_
;
}
friend
bool
operator
!
=
(
const
ArrayView
&
a
const
ArrayView
&
b
)
{
return
!
(
a
=
=
b
)
;
}
private
:
void
CheckInvariant
(
)
const
{
RTC_DCHECK_EQ
(
!
data_
size_
=
=
0
)
;
}
T
*
data_
;
size_t
size_
;
}
;
}
#
endif
