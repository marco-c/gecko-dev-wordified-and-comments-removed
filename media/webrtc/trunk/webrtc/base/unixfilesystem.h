#
ifndef
WEBRTC_BASE_UNIXFILESYSTEM_H_
#
define
WEBRTC_BASE_UNIXFILESYSTEM_H_
#
include
<
sys
/
types
.
h
>
#
include
"
webrtc
/
base
/
fileutils
.
h
"
namespace
rtc
{
class
UnixFilesystem
:
public
FilesystemInterface
{
public
:
UnixFilesystem
(
)
;
~
UnixFilesystem
(
)
override
;
#
if
defined
(
WEBRTC_ANDROID
)
|
|
defined
(
WEBRTC_IOS
)
static
void
SetAppDataFolder
(
const
std
:
:
string
&
folder
)
;
static
void
SetAppTempFolder
(
const
std
:
:
string
&
folder
)
;
#
endif
FileStream
*
OpenFile
(
const
Pathname
&
filename
const
std
:
:
string
&
mode
)
override
;
bool
CreatePrivateFile
(
const
Pathname
&
filename
)
override
;
bool
DeleteFile
(
const
Pathname
&
filename
)
override
;
bool
DeleteEmptyFolder
(
const
Pathname
&
folder
)
override
;
virtual
bool
CreateFolder
(
const
Pathname
&
pathname
mode_t
mode
)
;
bool
CreateFolder
(
const
Pathname
&
pathname
)
override
;
bool
MoveFile
(
const
Pathname
&
old_path
const
Pathname
&
new_path
)
override
;
bool
MoveFolder
(
const
Pathname
&
old_path
const
Pathname
&
new_path
)
override
;
bool
CopyFile
(
const
Pathname
&
old_path
const
Pathname
&
new_path
)
override
;
bool
IsFolder
(
const
Pathname
&
pathname
)
override
;
bool
IsTemporaryPath
(
const
Pathname
&
pathname
)
override
;
bool
IsFile
(
const
Pathname
&
pathname
)
override
;
bool
IsAbsent
(
const
Pathname
&
pathname
)
override
;
std
:
:
string
TempFilename
(
const
Pathname
&
dir
const
std
:
:
string
&
prefix
)
override
;
bool
GetTemporaryFolder
(
Pathname
&
path
bool
create
const
std
:
:
string
*
append
)
override
;
bool
GetFileSize
(
const
Pathname
&
path
size_t
*
size
)
override
;
bool
GetFileTime
(
const
Pathname
&
path
FileTimeType
which
time_t
*
time
)
override
;
bool
GetAppPathname
(
Pathname
*
path
)
override
;
bool
GetAppDataFolder
(
Pathname
*
path
bool
per_user
)
override
;
bool
GetAppTempFolder
(
Pathname
*
path
)
override
;
bool
GetDiskFreeSpace
(
const
Pathname
&
path
int64
*
freebytes
)
override
;
Pathname
GetCurrentDirectory
(
)
override
;
private
:
#
if
defined
(
WEBRTC_ANDROID
)
|
|
defined
(
WEBRTC_IOS
)
static
char
*
provided_app_data_folder_
;
static
char
*
provided_app_temp_folder_
;
#
else
static
char
*
app_temp_path_
;
#
endif
static
char
*
CopyString
(
const
std
:
:
string
&
str
)
;
}
;
}
#
endif
