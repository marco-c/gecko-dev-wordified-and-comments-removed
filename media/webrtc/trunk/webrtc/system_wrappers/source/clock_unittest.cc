#
include
"
webrtc
/
system_wrappers
/
include
/
clock
.
h
"
#
include
"
webrtc
/
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
ClockTest
NtpTime
)
{
Clock
*
clock
=
Clock
:
:
GetRealTimeClock
(
)
;
uint32_t
seconds
;
uint32_t
fractions
;
int64_t
milliseconds_lower_bound
=
clock
-
>
CurrentNtpInMilliseconds
(
)
;
clock
-
>
CurrentNtp
(
seconds
fractions
)
;
int64_t
milliseconds_upper_bound
=
clock
-
>
CurrentNtpInMilliseconds
(
)
;
EXPECT_GT
(
milliseconds_lower_bound
/
1000
kNtpJan1970
)
;
EXPECT_LE
(
milliseconds_lower_bound
-
1
Clock
:
:
NtpToMs
(
seconds
fractions
)
)
;
EXPECT_GE
(
milliseconds_upper_bound
+
1
Clock
:
:
NtpToMs
(
seconds
fractions
)
)
;
}
}
