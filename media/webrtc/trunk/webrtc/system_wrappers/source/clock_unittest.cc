#
include
"
system_wrappers
/
include
/
clock
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
ClockTest
NtpTime
)
{
Clock
*
clock
=
Clock
:
:
GetRealTimeClock
(
)
;
int64_t
milliseconds_lower_bound
=
clock
-
>
CurrentNtpInMilliseconds
(
)
;
NtpTime
ntp_time
=
clock
-
>
CurrentNtpTime
(
)
;
int64_t
milliseconds_upper_bound
=
clock
-
>
CurrentNtpInMilliseconds
(
)
;
EXPECT_GT
(
milliseconds_lower_bound
/
1000
kNtpJan1970
)
;
EXPECT_LE
(
milliseconds_lower_bound
-
1
ntp_time
.
ToMs
(
)
)
;
EXPECT_GE
(
milliseconds_upper_bound
+
1
ntp_time
.
ToMs
(
)
)
;
}
}
