#
ifndef
VIDEO_QUALITY_THRESHOLD_H_
#
define
VIDEO_QUALITY_THRESHOLD_H_
#
include
<
memory
>
#
include
"
api
/
optional
.
h
"
namespace
webrtc
{
class
QualityThreshold
{
public
:
QualityThreshold
(
int
low_threshold
int
high_threshold
float
fraction
int
max_measurements
)
;
void
AddMeasurement
(
int
measurement
)
;
rtc
:
:
Optional
<
bool
>
IsHigh
(
)
const
;
rtc
:
:
Optional
<
double
>
CalculateVariance
(
)
const
;
rtc
:
:
Optional
<
double
>
FractionHigh
(
int
min_required_samples
)
const
;
private
:
const
std
:
:
unique_ptr
<
int
[
]
>
buffer_
;
const
int
max_measurements_
;
const
float
fraction_
;
const
int
low_threshold_
;
const
int
high_threshold_
;
int
until_full_
;
int
next_index_
;
rtc
:
:
Optional
<
bool
>
is_high_
;
int
sum_
;
int
count_low_
;
int
count_high_
;
int
num_high_states_
;
int
num_certain_states_
;
}
;
}
#
endif
