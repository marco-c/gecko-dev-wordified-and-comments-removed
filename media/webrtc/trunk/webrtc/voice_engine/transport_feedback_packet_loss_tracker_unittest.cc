#
include
<
limits
>
#
include
<
memory
>
#
include
<
numeric
>
#
include
<
vector
>
#
include
"
modules
/
rtp_rtcp
/
include
/
rtp_rtcp_defines
.
h
"
#
include
"
modules
/
rtp_rtcp
/
source
/
rtcp_packet
/
transport_feedback
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
test
/
gmock
.
h
"
#
include
"
test
/
gtest
.
h
"
#
include
"
voice_engine
/
transport_feedback_packet_loss_tracker
.
h
"
namespace
webrtc
{
namespace
{
constexpr
int64_t
kDefaultSendIntervalMs
=
10
;
constexpr
int64_t
kDefaultMaxWindowSizeMs
=
500
*
kDefaultSendIntervalMs
;
class
TransportFeedbackPacketLossTrackerTest
:
public
:
:
testing
:
:
TestWithParam
<
uint16_t
>
{
public
:
TransportFeedbackPacketLossTrackerTest
(
)
=
default
;
virtual
~
TransportFeedbackPacketLossTrackerTest
(
)
=
default
;
protected
:
void
SendPackets
(
TransportFeedbackPacketLossTracker
*
tracker
const
std
:
:
vector
<
uint16_t
>
&
sequence_numbers
int64_t
send_time_interval_ms
bool
validate_all
=
true
)
{
RTC_CHECK_GE
(
send_time_interval_ms
0
)
;
for
(
uint16_t
sequence_number
:
sequence_numbers
)
{
tracker
-
>
OnPacketAdded
(
sequence_number
time_ms_
)
;
if
(
validate_all
)
{
tracker
-
>
Validate
(
)
;
}
time_ms_
+
=
send_time_interval_ms
;
}
if
(
!
validate_all
)
{
tracker
-
>
Validate
(
)
;
}
}
void
SendPackets
(
TransportFeedbackPacketLossTracker
*
tracker
uint16_t
first_seq_num
size_t
num_of_packets
int64_t
send_time_interval_ms
bool
validate_all
=
true
)
{
RTC_CHECK_GE
(
send_time_interval_ms
0
)
;
std
:
:
vector
<
uint16_t
>
sequence_numbers
(
num_of_packets
)
;
std
:
:
iota
(
sequence_numbers
.
begin
(
)
sequence_numbers
.
end
(
)
first_seq_num
)
;
SendPackets
(
tracker
sequence_numbers
send_time_interval_ms
validate_all
)
;
}
void
AdvanceClock
(
int64_t
time_delta_ms
)
{
RTC_CHECK_GT
(
time_delta_ms
0
)
;
time_ms_
+
=
time_delta_ms
;
}
void
AddTransportFeedbackAndValidate
(
TransportFeedbackPacketLossTracker
*
tracker
uint16_t
base_sequence_num
const
std
:
:
vector
<
bool
>
&
reception_status_vec
)
{
constexpr
int64_t
kArrivalTimeMs
=
1234
;
std
:
:
vector
<
PacketFeedback
>
packet_feedback_vector
;
uint16_t
seq_num
=
base_sequence_num
;
for
(
bool
received
:
reception_status_vec
)
{
packet_feedback_vector
.
emplace_back
(
PacketFeedback
(
received
?
kArrivalTimeMs
:
PacketFeedback
:
:
kNotReceived
seq_num
)
)
;
+
+
seq_num
;
}
tracker
-
>
OnPacketFeedbackVector
(
packet_feedback_vector
)
;
tracker
-
>
Validate
(
)
;
}
void
ValidatePacketLossStatistics
(
const
TransportFeedbackPacketLossTracker
&
tracker
rtc
:
:
Optional
<
float
>
expected_plr
rtc
:
:
Optional
<
float
>
expected_rplr
)
{
rtc
:
:
Optional
<
float
>
plr
=
tracker
.
GetPacketLossRate
(
)
;
EXPECT_EQ
(
static_cast
<
bool
>
(
expected_plr
)
static_cast
<
bool
>
(
plr
)
)
;
if
(
expected_plr
&
&
plr
)
{
EXPECT_EQ
(
*
expected_plr
*
plr
)
;
}
rtc
:
:
Optional
<
float
>
rplr
=
tracker
.
GetRecoverablePacketLossRate
(
)
;
EXPECT_EQ
(
static_cast
<
bool
>
(
expected_rplr
)
static_cast
<
bool
>
(
rplr
)
)
;
if
(
expected_rplr
&
&
rplr
)
{
EXPECT_EQ
(
*
expected_rplr
*
rplr
)
;
}
}
uint16_t
base_
{
GetParam
(
)
}
;
private
:
int64_t
time_ms_
{
0
}
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
TransportFeedbackPacketLossTrackerTest
)
;
}
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
EmptyWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
5
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
rtc
:
:
nullopt
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
EmptyWindowFeedback
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
3
2
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
rtc
:
:
nullopt
)
;
SendPackets
(
&
tracker
base_
3
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
3
.
0f
0
.
5f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
PartiallyFilledWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
SendPackets
(
&
tracker
base_
3
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
rtc
:
:
nullopt
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
PlrMinimumFilledWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
5
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
rtc
:
:
nullopt
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
RplrMinimumFilledWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
6
4
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
1
.
0f
/
4
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
SameSentTime
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
3
2
)
;
SendPackets
(
&
tracker
base_
3
0
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
3
.
0f
0
.
5f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
ExtendWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
5
)
;
SendPackets
(
&
tracker
base_
25
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
rtc
:
:
nullopt
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
5
{
true
false
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
4
.
0f
/
10
.
0f
3
.
0f
/
9
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
20
{
true
false
false
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
7
.
0f
/
15
.
0f
4
.
0f
/
13
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
DifferentSentIntervals
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
int64_t
frames
[
]
=
{
20
60
120
20
60
}
;
for
(
size_t
i
=
0
;
i
<
sizeof
(
frames
)
/
sizeof
(
frames
[
0
]
)
;
i
+
+
)
{
SendPackets
(
&
tracker
{
static_cast
<
uint16_t
>
(
base_
+
i
)
}
frames
[
i
]
)
;
}
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
MaxWindowSize
)
{
TransportFeedbackPacketLossTracker
tracker
(
4
*
kDefaultSendIntervalMs
5
1
)
;
SendPackets
(
&
tracker
base_
6
kDefaultSendIntervalMs
true
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
false
true
false
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
5
{
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
AllReceived
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
true
true
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
0
.
0f
0
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
AllLost
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
false
false
false
false
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
0
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
ReportRepetition
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
ReportOverlap
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
1
)
;
SendPackets
(
&
tracker
base_
15
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
3
{
true
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
7
.
0f
2
.
0f
/
6
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
ReportConflict
)
{
TransportFeedbackPacketLossTracker
tracker
(
kDefaultMaxWindowSizeMs
5
4
)
;
SendPackets
(
&
tracker
base_
15
10
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
false
true
false
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
SkippedPackets
)
{
TransportFeedbackPacketLossTracker
tracker
(
200
*
kDefaultSendIntervalMs
5
1
)
;
SendPackets
(
&
tracker
base_
200
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
100
{
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
8
.
0f
2
.
0f
/
6
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
MovedWindowRetainsRelevantInfo
)
{
constexpr
int64_t
max_window_size_ms
=
100
;
TransportFeedbackPacketLossTracker
tracker
(
max_window_size_ms
5
1
)
;
SendPackets
(
&
tracker
base_
4
*
max_window_size_ms
1
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
const
int64_t
moved_oldest_acked
=
base_
+
2
*
max_window_size_ms
;
const
std
:
:
vector
<
bool
>
feedback
=
{
true
false
false
false
true
true
}
;
AddTransportFeedbackAndValidate
(
&
tracker
moved_oldest_acked
feedback
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
6
.
0f
1
.
0f
/
5
.
0f
)
;
const
int64_t
moved_newest_acked
=
moved_oldest_acked
+
feedback
.
size
(
)
-
1
;
AddTransportFeedbackAndValidate
(
&
tracker
moved_newest_acked
-
max_window_size_ms
-
1
{
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
6
.
0f
1
.
0f
/
5
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
moved_newest_acked
-
max_window_size_ms
{
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
7
.
0f
1
.
0f
/
5
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
InsertionCompletesTwoPairs
)
{
TransportFeedbackPacketLossTracker
tracker
(
150
*
kDefaultSendIntervalMs
5
1
)
;
SendPackets
(
&
tracker
base_
15
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
7
{
true
false
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
3
.
0f
/
10
.
0f
3
.
0f
/
8
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
5
{
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
4
.
0f
/
12
.
0f
4
.
0f
/
11
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
SanityGapsInSequenceNumbers
)
{
TransportFeedbackPacketLossTracker
tracker
(
50
*
kDefaultSendIntervalMs
5
1
)
;
SendPackets
(
&
tracker
{
static_cast
<
uint16_t
>
(
base_
)
static_cast
<
uint16_t
>
(
base_
+
2
)
static_cast
<
uint16_t
>
(
base_
+
4
)
static_cast
<
uint16_t
>
(
base_
+
6
)
static_cast
<
uint16_t
>
(
base_
+
8
)
}
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
true
false
false
false
true
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
SendPackets
(
&
tracker
{
static_cast
<
uint16_t
>
(
base_
+
10
)
static_cast
<
uint16_t
>
(
base_
+
12
)
static_cast
<
uint16_t
>
(
base_
+
14
)
}
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
+
11
{
false
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
7
.
0f
2
.
0f
/
5
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
MaxUnackedPackets
)
{
TransportFeedbackPacketLossTracker
tracker
(
0x10000
4
1
)
;
SendPackets
(
&
tracker
base_
0x2000
1
false
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
true
false
false
true
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
SendPackets
(
&
tracker
static_cast
<
uint16_t
>
(
base_
+
0x8000
-
0x2000
)
0x2000
1
false
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
1
.
0f
/
4
.
0f
)
;
SendPackets
(
&
tracker
static_cast
<
uint16_t
>
(
base_
+
0x8000
)
1
1
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
4
.
0f
1
.
0f
/
3
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
TimeDifferenceMaximumObserved
)
{
constexpr
int64_t
max_window_size_ms
=
500
;
TransportFeedbackPacketLossTracker
tracker
(
max_window_size_ms
3
1
)
;
const
std
:
:
vector
<
bool
>
feedback
=
{
false
true
true
false
true
}
;
SendPackets
(
&
tracker
base_
feedback
.
size
(
)
1
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
feedback
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
AdvanceClock
(
max_window_size_ms
-
feedback
.
size
(
)
)
;
SendPackets
(
&
tracker
static_cast
<
uint16_t
>
(
base_
+
feedback
.
size
(
)
)
1
1
)
;
AddTransportFeedbackAndValidate
(
&
tracker
static_cast
<
uint16_t
>
(
base_
+
feedback
.
size
(
)
)
{
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
6
.
0f
2
.
0f
/
5
.
0f
)
;
const
uint16_t
new_packet_seq_num
=
static_cast
<
uint16_t
>
(
base_
+
feedback
.
size
(
)
+
1
)
;
SendPackets
(
&
tracker
{
new_packet_seq_num
}
1
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
6
.
0f
2
.
0f
/
5
.
0f
)
;
AddTransportFeedbackAndValidate
(
&
tracker
new_packet_seq_num
{
true
}
)
;
ValidatePacketLossStatistics
(
tracker
1
.
0f
/
6
.
0f
1
.
0f
/
5
.
0f
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
RepeatedSeqNumResetsWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
50
*
kDefaultSendIntervalMs
2
1
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
false
true
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
SendPackets
(
&
tracker
{
static_cast
<
uint16_t
>
(
base_
+
2
)
}
kDefaultSendIntervalMs
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
rtc
:
:
nullopt
)
;
}
TEST_P
(
TransportFeedbackPacketLossTrackerTest
SendAfterLongSuspensionResetsWindow
)
{
TransportFeedbackPacketLossTracker
tracker
(
50
*
kDefaultSendIntervalMs
2
1
)
;
SendPackets
(
&
tracker
base_
5
kDefaultSendIntervalMs
)
;
AddTransportFeedbackAndValidate
(
&
tracker
base_
{
false
true
true
false
true
}
)
;
ValidatePacketLossStatistics
(
tracker
2
.
0f
/
5
.
0f
2
.
0f
/
4
.
0f
)
;
SendPackets
(
&
tracker
{
static_cast
<
uint16_t
>
(
base_
+
5
+
0x8000
)
}
kDefaultSendIntervalMs
)
;
ValidatePacketLossStatistics
(
tracker
rtc
:
:
nullopt
rtc
:
:
nullopt
)
;
}
#
if
RTC_DCHECK_IS_ON
&
&
GTEST_HAS_DEATH_TEST
&
&
!
defined
(
WEBRTC_ANDROID
)
TEST
(
TransportFeedbackPacketLossTrackerTest
InvalidConfigMaxWindowSize
)
{
EXPECT_DEATH
(
TransportFeedbackPacketLossTracker
tracker
(
0
20
10
)
"
"
)
;
}
TEST
(
TransportFeedbackPacketLossTrackerTest
InvalidConfigPlrMinAcked
)
{
EXPECT_DEATH
(
TransportFeedbackPacketLossTracker
tracker
(
5000
0
10
)
"
"
)
;
}
TEST
(
TransportFeedbackPacketLossTrackerTest
InvalidConfigRplrMinPairs
)
{
EXPECT_DEATH
(
TransportFeedbackPacketLossTracker
tracker
(
5000
20
0
)
"
"
)
;
}
TEST
(
TransportFeedbackPacketLossTrackerTest
TimeCantFlowBackwards
)
{
TransportFeedbackPacketLossTracker
tracker
(
5000
2
1
)
;
tracker
.
OnPacketAdded
(
100
0
)
;
tracker
.
OnPacketAdded
(
101
2
)
;
EXPECT_DEATH
(
tracker
.
OnPacketAdded
(
102
1
)
"
"
)
;
}
#
endif
constexpr
uint16_t
kBases
[
]
=
{
0x0000
0x3456
0xc032
0xfffe
}
;
INSTANTIATE_TEST_CASE_P
(
_
TransportFeedbackPacketLossTrackerTest
testing
:
:
ValuesIn
(
kBases
)
)
;
}
