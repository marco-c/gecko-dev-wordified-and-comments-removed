#
ifndef
WEBRTC_COMMON_VIDEO_INCLUDE_COREVIDEO_FRAME_BUFFER_H_
#
define
WEBRTC_COMMON_VIDEO_INCLUDE_COREVIDEO_FRAME_BUFFER_H_
#
include
<
CoreVideo
/
CoreVideo
.
h
>
#
include
<
vector
>
#
include
"
webrtc
/
common_video
/
include
/
video_frame_buffer
.
h
"
namespace
webrtc
{
class
CoreVideoFrameBuffer
:
public
NativeHandleBuffer
{
public
:
explicit
CoreVideoFrameBuffer
(
CVPixelBufferRef
pixel_buffer
)
;
CoreVideoFrameBuffer
(
CVPixelBufferRef
pixel_buffer
int
adapted_width
int
adapted_height
int
crop_width
int
crop_height
int
crop_x
int
crop_y
)
;
~
CoreVideoFrameBuffer
(
)
override
;
rtc
:
:
scoped_refptr
<
VideoFrameBuffer
>
NativeToI420Buffer
(
)
override
;
bool
RequiresCropping
(
)
const
;
bool
CropAndScaleTo
(
std
:
:
vector
<
uint8_t
>
*
tmp_buffer
CVPixelBufferRef
output_pixel_buffer
)
const
;
private
:
CVPixelBufferRef
pixel_buffer_
;
const
int
buffer_width_
;
const
int
buffer_height_
;
const
int
crop_width_
;
const
int
crop_height_
;
const
int
crop_x_
;
const
int
crop_y_
;
}
;
}
#
endif
