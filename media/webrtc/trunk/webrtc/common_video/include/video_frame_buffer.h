#
ifndef
WEBRTC_COMMON_VIDEO_INCLUDE_VIDEO_FRAME_BUFFER_H_
#
define
WEBRTC_COMMON_VIDEO_INCLUDE_VIDEO_FRAME_BUFFER_H_
#
include
<
memory
>
#
include
"
webrtc
/
api
/
video
/
video_frame_buffer
.
h
"
#
include
"
webrtc
/
api
/
video
/
i420_buffer
.
h
"
#
include
"
webrtc
/
base
/
callback
.
h
"
#
include
"
webrtc
/
base
/
scoped_ref_ptr
.
h
"
namespace
webrtc
{
class
NativeHandleBuffer
:
public
VideoFrameBuffer
{
public
:
NativeHandleBuffer
(
void
*
native_handle
int
width
int
height
)
;
int
width
(
)
const
override
;
int
height
(
)
const
override
;
const
uint8_t
*
DataY
(
)
const
override
;
const
uint8_t
*
DataU
(
)
const
override
;
const
uint8_t
*
DataV
(
)
const
override
;
int
StrideY
(
)
const
override
;
int
StrideU
(
)
const
override
;
int
StrideV
(
)
const
override
;
void
*
native_handle
(
)
const
override
;
protected
:
void
*
native_handle_
;
const
int
width_
;
const
int
height_
;
}
;
class
WrappedI420Buffer
:
public
webrtc
:
:
VideoFrameBuffer
{
public
:
WrappedI420Buffer
(
int
width
int
height
const
uint8_t
*
y_plane
int
y_stride
const
uint8_t
*
u_plane
int
u_stride
const
uint8_t
*
v_plane
int
v_stride
const
rtc
:
:
Callback0
<
void
>
&
no_longer_used
)
;
int
width
(
)
const
override
;
int
height
(
)
const
override
;
const
uint8_t
*
DataY
(
)
const
override
;
const
uint8_t
*
DataU
(
)
const
override
;
const
uint8_t
*
DataV
(
)
const
override
;
int
StrideY
(
)
const
override
;
int
StrideU
(
)
const
override
;
int
StrideV
(
)
const
override
;
void
*
native_handle
(
)
const
override
;
rtc
:
:
scoped_refptr
<
VideoFrameBuffer
>
NativeToI420Buffer
(
)
override
;
private
:
friend
class
rtc
:
:
RefCountedObject
<
WrappedI420Buffer
>
;
~
WrappedI420Buffer
(
)
override
;
const
int
width_
;
const
int
height_
;
const
uint8_t
*
const
y_plane_
;
const
uint8_t
*
const
u_plane_
;
const
uint8_t
*
const
v_plane_
;
const
int
y_stride_
;
const
int
u_stride_
;
const
int
v_stride_
;
rtc
:
:
Callback0
<
void
>
no_longer_used_cb_
;
}
;
}
#
endif
