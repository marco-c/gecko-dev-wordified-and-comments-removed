#
include
"
WMFClearKeyTrustedInput
.
h
"
#
include
"
WMFClearKeyCDM
.
h
"
#
include
"
WMFClearKeyInputTrustAuthority
.
h
"
#
include
"
WMFClearKeyUtils
.
h
"
namespace
mozilla
{
using
Microsoft
:
:
WRL
:
:
ComPtr
;
using
Microsoft
:
:
WRL
:
:
MakeAndInitialize
;
HRESULT
WMFClearKeyTrustedInput
:
:
RuntimeClassInitialize
(
SessionManagerWrapper
*
aSessionManager
)
{
ENTRY_LOG
(
)
;
mSessionManager
=
aSessionManager
;
return
S_OK
;
}
STDMETHODIMP
WMFClearKeyTrustedInput
:
:
GetInputTrustAuthority
(
DWORD
aStreamId
REFIID
aRiid
IUnknown
*
*
aAuthority
)
{
ENTRY_LOG
(
)
;
ComPtr
<
IMFInputTrustAuthority
>
ita
;
RETURN_IF_FAILED
(
(
MakeAndInitialize
<
WMFClearKeyInputTrustAuthority
IMFInputTrustAuthority
>
(
&
ita
aStreamId
mSessionManager
)
)
)
;
*
aAuthority
=
ita
.
Detach
(
)
;
return
S_OK
;
}
}
