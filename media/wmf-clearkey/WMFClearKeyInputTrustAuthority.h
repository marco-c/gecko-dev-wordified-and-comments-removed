#
ifndef
DOM_MEDIA_PLATFORM_WMF_CLEARKEY_WMFCLEARKEYINPUTTRUSTAUTHORITY_H
#
define
DOM_MEDIA_PLATFORM_WMF_CLEARKEY_WMFCLEARKEYINPUTTRUSTAUTHORITY_H
#
include
<
wrl
.
h
>
#
include
<
wrl
/
client
.
h
>
#
include
"
MFCDMExtra
.
h
"
#
include
"
RefCounted
.
h
"
namespace
mozilla
{
class
SessionManagerWrapper
;
class
WMFClearKeyInputTrustAuthority
final
:
public
Microsoft
:
:
WRL
:
:
RuntimeClass
<
Microsoft
:
:
WRL
:
:
RuntimeClassFlags
<
Microsoft
:
:
WRL
:
:
ClassicCom
>
IMFInputTrustAuthority
IMFShutdown
Microsoft
:
:
WRL
:
:
FtmBase
>
{
public
:
WMFClearKeyInputTrustAuthority
(
)
=
default
;
~
WMFClearKeyInputTrustAuthority
(
)
=
default
;
WMFClearKeyInputTrustAuthority
(
const
WMFClearKeyInputTrustAuthority
&
)
=
delete
;
WMFClearKeyInputTrustAuthority
&
operator
=
(
const
WMFClearKeyInputTrustAuthority
&
)
=
delete
;
HRESULT
RuntimeClassInitialize
(
UINT32
aStreamId
SessionManagerWrapper
*
aSessionManager
)
;
STDMETHODIMP
GetDecrypter
(
REFIID
aRiid
void
*
*
aPpv
)
override
;
STDMETHODIMP
RequestAccess
(
MFPOLICYMANAGER_ACTION
aAction
IMFActivate
*
*
aContentEnablerActivate
)
override
;
STDMETHODIMP
GetPolicy
(
MFPOLICYMANAGER_ACTION
aAction
IMFOutputPolicy
*
*
aPolicy
)
override
;
STDMETHODIMP
BindAccess
(
MFINPUTTRUSTAUTHORITY_ACCESS_PARAMS
*
aParams
)
override
;
STDMETHODIMP
UpdateAccess
(
MFINPUTTRUSTAUTHORITY_ACCESS_PARAMS
*
aParams
)
override
;
STDMETHODIMP
Reset
(
)
override
;
STDMETHODIMP
GetShutdownStatus
(
MFSHUTDOWN_STATUS
*
aStatus
)
override
;
STDMETHODIMP
Shutdown
(
)
override
;
private
:
RefPtr
<
SessionManagerWrapper
>
mSessionManager
;
}
;
}
#
endif
