"
use
strict
"
;
const
{
DebuggerServer
}
=
require
(
"
devtools
/
server
/
debugger
-
server
"
)
;
const
{
RootActor
}
=
require
(
"
devtools
/
server
/
actors
/
root
"
)
;
const
{
BrowserTabList
}
=
require
(
"
devtools
/
server
/
actors
/
webbrowser
"
)
;
const
{
ProcessActorList
}
=
require
(
"
devtools
/
server
/
actors
/
process
"
)
;
const
Services
=
require
(
"
Services
"
)
;
const
{
ActorRegistry
}
=
require
(
"
devtools
/
server
/
actors
/
utils
/
actor
-
registry
"
)
;
function
createRootActor
(
connection
)
{
let
parameters
=
{
tabList
:
new
XPCSTTabList
(
connection
)
processList
:
new
ProcessActorList
(
)
globalActorFactories
:
ActorRegistry
.
globalActorFactories
onShutdown
(
)
{
Services
.
obs
.
notifyObservers
(
null
"
xpcshell
-
test
-
devtools
-
shutdown
"
)
;
}
}
;
return
new
RootActor
(
connection
parameters
)
;
}
exports
.
createRootActor
=
createRootActor
;
function
XPCSTTabList
(
connection
)
{
BrowserTabList
.
call
(
this
connection
)
;
}
XPCSTTabList
.
prototype
=
Object
.
create
(
BrowserTabList
.
prototype
)
;
XPCSTTabList
.
prototype
.
constructor
=
XPCSTTabList
;
XPCSTTabList
.
prototype
.
getList
=
function
(
)
{
return
Promise
.
resolve
(
[
]
)
;
}
;
