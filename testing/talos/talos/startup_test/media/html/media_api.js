var
httpRequestCb
=
function
(
test
req_status
response
)
{
if
(
req_status
!
=
200
)
{
test
.
failed
=
true
;
}
test
.
http_response
=
response
;
log
(
test
.
http_response
)
;
}
var
sendGetRequest
=
function
(
test
async
)
{
var
request
=
new
XMLHttpRequest
(
)
;
request
.
open
(
'
GET
'
test
.
url
async
)
;
request
.
onreadystatechange
=
function
(
)
{
if
(
request
.
readyState
=
=
4
)
{
httpRequestCb
(
test
request
.
status
request
.
response
)
;
}
}
;
request
.
send
(
)
;
}
;
var
cleanupTests
=
function
(
)
{
var
url
=
baseUrl
+
'
/
server
/
config
/
stop
'
test
.
url
=
url
;
sendGetRequest
(
test
true
)
;
}
;
var
initiateAudioRecording
=
function
(
test
)
{
var
url
=
baseUrl
+
'
/
audio
/
recorder
/
start
/
?
timeout
=
'
+
test
.
timeout
;
test
.
url
=
url
;
test
.
failed
=
false
;
sendGetRequest
(
test
false
)
;
}
;
var
cleanupAudioRecording
=
function
(
test
)
{
var
url
=
baseUrl
+
'
/
audio
/
recorder
/
stop
'
;
test
.
url
=
url
;
test
.
failed
=
false
;
sendGetRequest
(
test
false
)
;
}
;
var
getSNRAndDelay
=
function
(
test
)
{
var
url
=
baseUrl
+
'
/
audio
/
snr
/
compute
'
;
test
.
url
=
url
;
test
.
failed
=
false
;
sendGetRequest
(
test
false
)
;
}
;
