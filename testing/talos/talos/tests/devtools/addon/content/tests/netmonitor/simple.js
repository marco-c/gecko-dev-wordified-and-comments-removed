"
use
strict
"
;
const
{
openToolboxAndLog
closeToolboxAndLog
reloadPageAndLog
testSetup
testTeardown
SIMPLE_URL
}
=
require
(
"
.
.
/
head
"
)
;
const
{
exportHar
waitForNetworkRequests
}
=
require
(
"
.
/
netmonitor
-
helpers
"
)
;
const
EXPECTED_REQUESTS
=
1
;
module
.
exports
=
async
function
(
)
{
await
testSetup
(
SIMPLE_URL
)
;
const
toolbox
=
await
openToolboxAndLog
(
"
simple
.
netmonitor
"
"
netmonitor
"
)
;
const
requestsDone
=
waitForNetworkRequests
(
"
simple
.
netmonitor
"
toolbox
EXPECTED_REQUESTS
)
;
await
reloadPageAndLog
(
"
simple
.
netmonitor
"
toolbox
)
;
await
requestsDone
;
await
exportHar
(
"
simple
.
netmonitor
"
toolbox
)
;
await
closeToolboxAndLog
(
"
simple
.
netmonitor
"
toolbox
)
;
await
testTeardown
(
)
;
}
;
