"
use
strict
"
;
const
{
openToolboxAndLog
closeToolboxAndLog
reloadPageAndLog
testSetup
testTeardown
SIMPLE_URL
}
=
require
(
"
chrome
:
/
/
damp
/
content
/
tests
/
head
"
)
;
const
{
saveHeapSnapshot
readHeapSnapshot
takeCensus
}
=
require
(
"
chrome
:
/
/
damp
/
content
/
tests
/
memory
/
memory
-
helpers
"
)
;
module
.
exports
=
async
function
(
)
{
await
testSetup
(
SIMPLE_URL
)
;
const
toolbox
=
await
openToolboxAndLog
(
"
simple
.
memory
"
"
memory
"
)
;
await
reloadPageAndLog
(
"
simple
.
memory
"
toolbox
)
;
let
heapSnapshotFilePath
=
await
saveHeapSnapshot
(
"
simple
"
)
;
let
snapshot
=
await
readHeapSnapshot
(
"
simple
"
heapSnapshotFilePath
)
;
await
takeCensus
(
"
simple
"
snapshot
)
;
await
closeToolboxAndLog
(
"
simple
.
memory
"
toolbox
)
;
await
testTeardown
(
)
;
}
;
