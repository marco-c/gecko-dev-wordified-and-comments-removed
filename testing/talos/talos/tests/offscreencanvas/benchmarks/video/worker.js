importScripts
(
"
mp4box
.
all
.
min
.
js
"
)
;
importScripts
(
"
demuxer_mp4
.
js
"
)
;
importScripts
(
"
shared
.
js
"
)
;
self
.
onmessage
=
e
=
>
{
const
resolve
=
result
=
>
{
self
.
postMessage
(
result
)
;
}
;
const
reject
=
errorMessage
=
>
{
self
.
postMessage
(
{
errorMessage
}
)
;
}
;
try
{
runTestInternal
(
e
.
data
.
testName
e
.
data
.
canvasType
e
.
data
.
offscreenCanvas
true
e
.
data
.
videoUri
resolve
reject
)
;
}
catch
(
e
)
{
reject
(
e
)
;
}
}
;
