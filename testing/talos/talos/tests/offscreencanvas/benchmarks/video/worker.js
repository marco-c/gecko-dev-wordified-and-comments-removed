importScripts
(
"
mp4box
.
all
.
min
.
js
"
)
;
importScripts
(
"
demuxer_mp4
.
js
"
)
;
importScripts
(
"
shared
.
js
"
)
;
self
.
onmessage
=
event
=
>
{
const
resolve
=
result
=
>
{
self
.
postMessage
(
result
)
;
}
;
const
reject
=
errorMessage
=
>
{
self
.
postMessage
(
{
errorMessage
}
)
;
}
;
try
{
runTestInternal
(
event
.
data
.
testName
event
.
data
.
canvasType
event
.
data
.
offscreenCanvas
true
event
.
data
.
videoUri
resolve
reject
)
;
}
catch
(
ex
)
{
reject
(
ex
)
;
}
}
;
