setExpectedFailuresForSelfTest
(
3
)
;
let
JSMPromise
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Promise
.
jsm
"
{
}
)
.
Promise
;
function
test
(
)
{
Promise
.
reject
(
new
Error
(
"
Promise
rejection
.
"
)
)
;
JSMPromise
.
reject
(
new
Error
(
"
Promise
.
jsm
rejection
.
"
)
)
;
(
async
(
)
=
>
{
throw
"
Synchronous
rejection
from
async
function
.
"
;
}
)
(
)
;
Promise
.
reject
(
new
Error
(
"
Promise
rejection
.
"
)
)
.
catch
(
(
)
=
>
{
}
)
;
JSMPromise
.
reject
(
new
Error
(
"
Promise
.
jsm
rejection
.
"
)
)
.
catch
(
(
)
=
>
{
}
)
;
(
async
(
)
=
>
{
throw
"
Synchronous
rejection
from
async
function
.
"
;
}
)
(
)
.
catch
(
(
)
=
>
{
}
)
;
}
