const
flavor
=
__webDriverArguments
[
0
]
.
flavor
;
const
url
=
__webDriverArguments
[
0
]
.
testUrl
;
let
wm
=
Cc
[
"
mozilla
.
org
/
appshell
/
window
-
mediator
;
1
"
]
.
getService
(
Ci
.
nsIWindowMediator
)
;
let
win
=
wm
.
getMostRecentWindow
(
"
navigator
:
browser
"
)
;
if
(
!
win
)
{
win
=
wm
.
getMostRecentWindow
(
"
mail
:
3pane
"
)
;
}
let
ev
=
new
CustomEvent
(
"
mochitest
-
load
"
{
detail
:
[
flavor
url
]
}
)
;
win
.
dispatchEvent
(
ev
)
;
