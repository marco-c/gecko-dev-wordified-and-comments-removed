from
__future__
import
absolute_import
import
os
import
mozunit
import
pytest
from
mozprofile
import
Profile
def
test_with_profile_should_cleanup
(
)
:
    
with
Profile
(
)
as
profile
:
        
assert
os
.
path
.
exists
(
profile
.
profile
)
    
assert
not
os
.
path
.
exists
(
profile
.
profile
)
def
test_with_profile_should_cleanup_even_on_exception
(
)
:
    
with
pytest
.
raises
(
ZeroDivisionError
)
:
        
with
Profile
(
)
as
profile
:
            
assert
os
.
path
.
exists
(
profile
.
profile
)
            
1
/
0
    
assert
not
os
.
path
.
exists
(
profile
.
profile
)
if
__name__
=
=
'
__main__
'
:
    
mozunit
.
main
(
)
