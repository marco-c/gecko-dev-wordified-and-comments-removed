import
pytest
from
helpers
import
Css
assert_not_element
await_dom_ready
find_element
URL
=
"
https
:
/
/
www
.
edencast
.
fr
/
zoomcastlost
-
in
-
blindness
/
"
AUDIO_CSS
=
Css
(
"
audio
#
podpresshtml5_1
"
)
SCRIPT
=
"
"
"
        
var
done
=
arguments
[
0
]
;
        
if
(
!
window
?
.
podPressShowHidePlayer
)
{
          
done
(
"
none
"
)
;
        
}
        
window
.
podPressenprintHTML5audio
=
function
(
)
{
          
done
(
"
html5
"
)
;
        
}
;
        
window
.
podpress_audioplayer_swfobject
=
{
          
embedSWF
:
function
(
)
{
            
done
(
"
swf
"
)
;
          
}
        
}
;
        
const
d
=
document
.
createElement
(
"
div
"
)
;
        
d
.
id
=
"
podPressPlayerSpace_test
"
;
        
document
.
documentElement
.
appendChild
(
d
)
;
        
const
p
=
document
.
createElement
(
"
div
"
)
;
        
p
.
id
=
"
podPressPlayerSpace_test_PlayLink
"
;
        
document
.
documentElement
.
appendChild
(
p
)
;
        
podPressShowHidePlayer
(
"
test
"
"
https
/
/
x
/
test
.
mp3
"
100
100
"
force
"
)
;
    
"
"
"
pytest
.
mark
.
with_interventions
def
test_enabled
(
session
)
:
    
session
.
get
(
URL
)
    
await_dom_ready
(
session
)
    
assert
"
html5
"
=
=
session
.
execute_async_script
(
SCRIPT
)
    
assert
find_element
(
session
AUDIO_CSS
)
pytest
.
mark
.
without_interventions
def
test_disabled
(
session
)
:
    
session
.
get
(
URL
)
    
await_dom_ready
(
session
)
    
assert
"
swf
"
=
=
session
.
execute_async_script
(
SCRIPT
)
    
assert_not_element
(
session
AUDIO_CSS
)
