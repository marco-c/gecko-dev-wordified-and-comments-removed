import
{
unreachable
}
from
'
.
.
/
.
.
/
common
/
util
/
util
.
js
'
;
export
const
kAllCanvasTypes
=
[
'
onscreen
'
'
offscreen
'
]
;
export
const
kValidCanvasContextIds
=
[
'
2d
'
'
bitmaprenderer
'
'
webgl
'
'
webgl2
'
'
webgpu
'
]
;
export
function
canCopyFromCanvasContext
(
contextName
)
{
switch
(
contextName
)
{
case
'
2d
'
:
case
'
webgl
'
:
case
'
webgl2
'
:
case
'
webgpu
'
:
return
true
;
default
:
return
false
;
}
}
export
function
createCanvas
(
test
canvasType
width
height
)
{
if
(
canvasType
=
=
=
'
onscreen
'
)
{
if
(
typeof
document
!
=
=
'
undefined
'
)
{
return
createOnscreenCanvas
(
test
width
height
)
;
}
else
{
test
.
skip
(
'
Cannot
create
HTMLCanvasElement
'
)
;
}
}
else
if
(
canvasType
=
=
=
'
offscreen
'
)
{
if
(
typeof
OffscreenCanvas
!
=
=
'
undefined
'
)
{
return
createOffscreenCanvas
(
test
width
height
)
;
}
else
{
test
.
skip
(
'
Cannot
create
an
OffscreenCanvas
'
)
;
}
}
else
{
unreachable
(
)
;
}
}
export
function
createOnscreenCanvas
(
test
width
height
)
{
let
canvas
;
if
(
typeof
document
!
=
=
'
undefined
'
)
{
canvas
=
document
.
createElement
(
'
canvas
'
)
;
canvas
.
width
=
width
;
canvas
.
height
=
height
;
}
else
{
test
.
skip
(
'
Cannot
create
HTMLCanvasElement
'
)
;
}
return
canvas
;
}
export
function
createOffscreenCanvas
(
test
width
height
)
{
if
(
typeof
OffscreenCanvas
=
=
=
'
undefined
'
)
{
test
.
skip
(
'
OffscreenCanvas
is
not
supported
'
)
;
}
return
new
OffscreenCanvas
(
width
height
)
;
}
