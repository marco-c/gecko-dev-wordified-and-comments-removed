export
function
extractImportantStackTrace
(
e
)
{
let
stack
=
e
.
stack
;
if
(
!
stack
)
{
return
'
'
;
}
const
redundantMessage
=
'
Error
:
'
+
e
.
message
+
'
\
n
'
;
if
(
stack
.
startsWith
(
redundantMessage
)
)
{
stack
=
stack
.
substring
(
redundantMessage
.
length
)
;
}
const
lines
=
stack
.
split
(
'
\
n
'
)
;
for
(
let
i
=
lines
.
length
-
1
;
i
>
=
0
;
-
-
i
)
{
const
line
=
lines
[
i
]
;
if
(
line
.
indexOf
(
'
.
spec
.
'
)
!
=
=
-
1
)
{
return
lines
.
slice
(
0
i
+
1
)
.
join
(
'
\
n
'
)
;
}
}
return
stack
;
}
