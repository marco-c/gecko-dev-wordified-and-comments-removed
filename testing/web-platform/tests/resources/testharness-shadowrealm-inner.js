globalThis
.
setShadowRealmGlobalProperties
=
function
(
queryString
fetchAdaptor
)
{
globalThis
.
fetch_json
=
(
resource
)
=
>
{
const
executor
=
fetchAdaptor
(
resource
)
;
return
new
Promise
(
executor
)
.
then
(
(
s
)
=
>
JSON
.
parse
(
s
)
)
;
}
;
globalThis
.
location
=
{
search
:
queryString
}
;
}
;
globalThis
.
GLOBAL
=
{
isWindow
:
function
(
)
{
return
false
;
}
isWorker
:
function
(
)
{
return
false
;
}
isShadowRealm
:
function
(
)
{
return
true
;
}
}
;
