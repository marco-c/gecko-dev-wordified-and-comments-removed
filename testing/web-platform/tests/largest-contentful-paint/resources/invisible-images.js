async_test
(
t
=
>
{
assert_precondition
(
window
.
LargestContentfulPaint
"
LargestContentfulPaint
is
not
implemented
"
)
;
const
observer
=
new
PerformanceObserver
(
t
.
step_func
(
entryList
=
>
{
entryList
.
getEntries
(
)
.
forEach
(
entry
=
>
{
if
(
!
entry
.
url
)
{
return
;
}
assert_unreached
(
'
Should
not
have
received
an
entry
!
Received
one
with
id
'
+
entryList
.
getEntries
(
)
[
0
]
.
id
)
;
}
)
;
}
)
)
;
observer
.
observe
(
{
type
:
'
largest
-
contentful
-
paint
'
buffered
:
true
}
)
;
t
.
step_timeout
(
(
)
=
>
{
t
.
done
(
)
;
}
500
)
;
}
'
Images
with
opacity
:
0
visibility
:
hidden
or
display
:
none
are
not
observable
by
LargestContentfulPaint
.
'
)
;
