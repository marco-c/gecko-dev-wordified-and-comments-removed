"
use
strict
"
;
[
true
false
]
.
forEach
(
function
(
allowCors
)
{
function
buildUrl
(
id
)
{
const
baseUrl
=
"
http
:
/
/
{
{
domains
[
www
]
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
"
;
const
additionalQuery
=
allowCors
?
"
&
origin
=
http
:
/
/
{
{
host
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
&
credentials
=
true
"
:
"
"
;
return
{
baseUrl
}
/
beacon
/
resources
/
beacon
.
py
?
cmd
=
store
&
id
=
{
id
}
{
additionalQuery
}
}
runTests
(
sampleTests
allowCors
?
"
-
CORS
-
ALLOW
"
:
"
-
CORS
-
FORBID
"
buildUrl
)
;
}
)
;
{
function
buildUrl
(
id
)
{
const
baseUrl
=
"
http
:
/
/
{
{
domains
[
www
]
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
"
;
const
additionalQuery
=
"
&
origin
=
http
:
/
/
{
{
host
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
&
credentials
=
true
&
preflightExpected
=
true
"
;
return
{
baseUrl
}
/
beacon
/
resources
/
beacon
.
py
?
cmd
=
store
&
id
=
{
id
}
{
additionalQuery
}
}
runTests
(
preflightTests
"
-
PREFLIGHT
-
ALLOW
"
buildUrl
)
;
}
done
(
)
;
