"
use
strict
"
;
[
true
false
]
.
forEach
(
function
(
allowCors
)
{
self
.
buildId
=
function
(
baseId
)
{
return
{
baseId
}
-
{
allowCors
?
"
CORS
-
ALLOW
"
:
"
CORS
-
FORBID
"
}
;
}
;
self
.
buildBaseUrl
=
function
(
baseUrl
)
{
return
"
http
:
/
/
{
{
domains
[
www
]
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
"
;
}
;
self
.
buildTargetUrl
=
function
(
targetUrl
)
{
return
allowCors
?
{
targetUrl
}
&
origin
=
http
:
/
/
{
{
host
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
&
credentials
=
true
:
targetUrl
;
}
runTests
(
sampleTests
)
;
}
)
;
{
self
.
buildId
=
function
(
baseId
)
{
return
{
baseId
}
-
PREFLIGHT
-
ALLOW
;
}
;
self
.
buildBaseUrl
=
function
(
baseUrl
)
{
return
"
http
:
/
/
{
{
domains
[
www
]
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
"
;
}
;
self
.
buildTargetUrl
=
function
(
targetUrl
)
{
return
{
targetUrl
}
&
origin
=
http
:
/
/
{
{
host
}
}
:
{
{
ports
[
http
]
[
0
]
}
}
&
credentials
=
true
&
preflightExpected
=
true
;
}
runTests
(
preflightTests
)
;
}
done
(
)
;
