let
source
=
null
;
function
sendMessageToDocument
(
msg
)
{
source
.
postMessage
(
msg
)
;
}
self
.
addEventListener
(
'
message
'
event
=
>
{
source
=
event
.
source
;
sendMessageToDocument
(
'
ready
'
)
;
}
)
;
self
.
addEventListener
(
'
sync
'
event
=
>
{
sendMessageToDocument
(
'
sync
event
received
!
'
)
;
}
)
;
self
.
addEventListener
(
'
periodicsync
'
event
=
>
{
sendMessageToDocument
(
'
periodicsync
event
received
!
'
)
;
}
)
;
