export
function
getStackTrace
(
e
)
{
if
(
!
e
.
stack
)
{
return
'
'
;
}
const
parts
=
e
.
stack
.
split
(
'
\
n
'
)
;
const
stack
=
[
]
;
const
moreStack
=
[
]
;
let
found
=
false
;
const
commonRegex
=
/
[
\
/
\
\
]
(
webgpu
|
unittests
)
[
\
/
\
\
]
/
;
for
(
let
i
=
0
;
i
<
parts
.
length
;
+
+
i
)
{
const
part
=
parts
[
i
]
.
trim
(
)
;
const
isSuites
=
commonRegex
.
test
(
part
)
;
if
(
found
&
&
!
isSuites
)
{
moreStack
.
push
(
part
)
;
}
if
(
isSuites
)
{
if
(
moreStack
.
length
)
{
stack
.
push
(
.
.
.
moreStack
)
;
moreStack
.
length
=
0
;
}
stack
.
push
(
part
)
;
found
=
true
;
}
}
return
stack
.
join
(
'
\
n
'
)
;
}
