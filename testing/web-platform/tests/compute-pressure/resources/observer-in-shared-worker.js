'
use
strict
'
;
onconnect
=
function
(
e
)
{
const
port
=
e
.
ports
[
0
]
;
let
started
=
false
;
port
.
start
(
)
;
let
observerWorker
=
new
PressureObserver
(
pressureCallback
{
sampleRate
:
0
.
5
}
)
;
port
.
onmessage
=
function
(
e
)
{
if
(
started
=
=
=
false
)
observerWorker
.
observe
(
'
cpu
'
)
;
started
=
true
;
}
;
function
pressureCallback
(
update
)
{
port
.
postMessage
(
update
[
0
]
.
toJSON
(
)
)
;
}
;
}
