'
use
strict
'
;
let
mockPressureService
=
undefined
;
function
pressure_test
(
func
name
properties
)
{
promise_test
(
async
t
=
>
{
if
(
mockPressureService
=
=
=
undefined
)
{
if
(
isChromiumBased
)
{
const
mocks
=
await
import
(
'
/
resources
/
chromium
/
mock
-
pressure
-
service
.
js
'
)
;
mockPressureService
=
mocks
.
mockPressureService
;
}
}
assert_implements
(
mockPressureService
'
missing
mockPressureService
after
initialization
'
)
;
mockPressureService
.
start
(
)
;
t
.
add_cleanup
(
(
)
=
>
{
mockPressureService
.
reset
(
)
;
return
mockPressureService
.
stop
(
)
;
}
)
;
return
func
(
t
mockPressureService
)
;
}
name
properties
)
;
}
