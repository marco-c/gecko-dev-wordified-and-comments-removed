'
use
strict
'
;
promise_test
(
async
t
=
>
{
const
update
=
await
new
Promise
(
(
resolve
reject
)
=
>
{
const
observer
=
new
ComputePressureObserver
(
resolve
{
cpuUtilizationThresholds
:
[
0
.
25
]
}
)
;
t
.
add_cleanup
(
(
)
=
>
observer
.
disconnect
(
)
)
;
observer
.
observe
(
'
cpu
'
)
.
catch
(
reject
)
;
}
)
;
assert_in_array
(
update
.
cpuUtilization
[
0
.
125
0
.
625
]
'
cpuUtilization
quantization
'
)
;
}
'
ComputePressureObserver
quantizes
utilization
and
speed
separately
'
)
;
