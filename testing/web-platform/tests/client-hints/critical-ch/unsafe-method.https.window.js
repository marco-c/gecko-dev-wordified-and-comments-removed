async_test
(
(
t
)
=
>
{
var
form
=
document
.
createElement
(
"
form
"
)
;
form
.
setAttribute
(
"
method
"
"
post
"
)
;
form
.
setAttribute
(
"
action
"
"
resources
/
echo
-
critical
-
hint
.
py
"
)
;
form
.
setAttribute
(
"
target
"
"
popup
"
)
;
document
.
body
.
appendChild
(
form
)
;
var
popup_window
=
window
.
open
(
"
/
common
/
blank
.
html
"
"
popup
"
)
;
assert_not_equals
(
popup_window
null
"
Popup
windows
not
allowed
?
"
)
;
popup_window
.
addEventListener
(
'
message
'
(
e
)
=
>
{
t
.
step
(
(
)
=
>
{
assert_equals
(
e
.
data
"
FAIL
"
)
}
)
;
t
.
done
(
)
;
}
)
;
form
.
submit
(
)
;
}
"
Critical
-
CH
unsafe
method
"
)
async_test
(
(
t
)
=
>
{
var
form
=
document
.
createElement
(
"
form
"
)
;
form
.
setAttribute
(
"
method
"
"
post
"
)
;
form
.
setAttribute
(
"
action
"
"
resources
/
echo
-
critical
-
hint
.
py
?
multiple
=
true
"
)
;
form
.
setAttribute
(
"
target
"
"
popup
"
)
;
document
.
body
.
appendChild
(
form
)
;
var
popup_window
=
window
.
open
(
"
/
common
/
blank
.
html
"
"
popup
"
)
;
assert_not_equals
(
popup_window
null
"
Popup
windows
not
allowed
?
"
)
;
popup_window
.
addEventListener
(
'
message
'
(
e
)
=
>
{
t
.
step
(
(
)
=
>
{
assert_equals
(
e
.
data
"
FAIL
"
)
}
)
;
t
.
done
(
)
;
}
)
;
form
.
submit
(
)
;
}
"
Critical
-
CH
w
/
multiple
headers
and
unsafe
method
"
)
