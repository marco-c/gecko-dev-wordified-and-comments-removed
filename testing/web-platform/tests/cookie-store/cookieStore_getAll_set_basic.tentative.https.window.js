'
use
strict
'
;
async
function
async_cleanup
(
cleanup_function
)
{
try
{
await
cleanup_function
(
)
;
}
catch
(
e
)
{
}
}
promise_test
(
async
testCase
=
>
{
await
cookieStore
.
set
(
'
cookie
-
name
'
'
cookie
-
value
'
)
;
const
cookies
=
await
cookieStore
.
getAll
(
'
cookie
-
name
'
)
;
assert_equals
(
cookies
.
length
1
)
;
assert_equals
(
cookies
[
0
]
.
name
'
cookie
-
name
'
)
;
assert_equals
(
cookies
[
0
]
.
value
'
cookie
-
value
'
)
;
await
async_cleanup
(
(
)
=
>
cookieStore
.
delete
(
'
cookie
-
name
'
)
)
;
}
'
cookieStore
.
getAll
returns
the
cookie
written
by
cookieStore
.
set
'
)
;
