'
use
strict
'
;
const
test_desc
=
'
Multiple
connects
should
return
the
same
gatt
object
.
'
;
bluetooth_test
(
async
(
)
=
>
{
let
{
device
fake_peripheral
}
=
await
getDiscoveredHealthThermometerDevice
(
)
;
await
fake_peripheral
.
setNextGATTConnectionResponse
(
{
code
:
HCI_SUCCESS
}
)
;
let
gatt1
=
await
device
.
gatt
.
connect
(
)
;
let
gatt2
=
await
device
.
gatt
.
connect
(
)
;
assert_equals
(
gatt1
gatt2
)
;
}
test_desc
)
;
