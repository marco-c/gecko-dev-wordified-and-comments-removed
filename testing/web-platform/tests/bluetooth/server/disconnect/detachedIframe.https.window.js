bluetooth_test
(
async
(
)
=
>
{
let
iframe
=
document
.
createElement
(
'
iframe
'
)
;
let
error
;
const
{
device
}
=
await
getHealthThermometerDeviceFromIframe
(
iframe
)
;
await
device
.
gatt
.
connect
(
)
;
iframe
.
remove
(
)
;
iframe
=
null
;
await
runGarbageCollection
(
)
;
try
{
await
device
.
gatt
.
disconnect
(
)
;
}
catch
(
e
)
{
error
=
e
;
}
assert_not_equals
(
error
undefined
)
;
assert_equals
(
error
.
name
'
NetworkError
'
)
;
}
'
disconnect
(
)
rejects
in
a
detached
context
'
)
;
