'
use
strict
'
;
const
swName
=
'
sw
-
update
-
ui
.
js
'
;
backgroundFetchTest
(
async
(
test
backgroundFetch
)
=
>
{
const
registrationId
=
'
update
-
once
'
;
const
registration
=
await
backgroundFetch
.
fetch
(
registrationId
'
resources
/
feature
-
name
.
txt
'
)
;
assert_equals
(
registration
.
id
registrationId
)
;
const
message
=
await
getMessageFromServiceWorker
(
)
;
assert_equals
(
message
.
update
'
update
success
'
)
;
}
'
Background
Fetch
updateUI
resolves
'
swName
)
;
backgroundFetchTest
(
async
(
test
backgroundFetch
)
=
>
{
const
registrationId
=
'
update
-
twice
'
;
const
registration
=
await
backgroundFetch
.
fetch
(
registrationId
'
resources
/
feature
-
name
.
txt
'
)
;
assert_equals
(
registration
.
id
registrationId
)
;
const
message
=
await
getMessageFromServiceWorker
(
)
;
assert_equals
(
message
.
update
'
updateUI
may
only
be
called
once
.
'
)
;
}
'
Background
Fetch
updateUI
called
twice
fails
'
swName
)
;
