promise_test
(
async
testCase
=
>
{
const
iframe
=
document
.
createElement
(
"
iframe
"
)
;
document
.
body
.
appendChild
(
iframe
)
;
const
iframeStorageFoundation
=
iframe
.
contentWindow
.
storageFoundation
;
const
requestPromise
=
iframeStorageFoundation
.
requestCapacity
(
1024
*
1024
)
;
iframe
.
remove
(
)
;
await
storageFoundation
.
getAll
(
)
;
}
'
Detaching
iframe
while
storageFoundation
.
requestCapacity
(
)
settles
'
)
;
