class
MessengerProcessor
extends
AudioWorkletProcessor
{
constructor
(
)
{
super
(
)
;
this
.
port
.
onmessage
=
this
.
startTest
.
bind
(
this
)
;
}
process
(
)
{
}
startTest
(
message
)
{
runRegisterProcessorTest
(
this
.
port
)
;
}
}
function
runRegisterProcessorTest
(
messagePort
)
{
try
{
const
DummyObject
=
{
}
;
registerProcessor
(
'
type
-
error
-
on
-
object
'
DummyObject
)
;
}
catch
(
exception
)
{
messagePort
.
postMessage
(
{
name
:
exception
.
name
message
:
exception
.
message
}
)
;
}
try
{
const
DummyFunction
=
(
)
=
>
{
}
;
registerProcessor
(
'
type
-
error
-
on
-
function
'
DummyFunction
)
;
}
catch
(
exception
)
{
messagePort
.
postMessage
(
{
name
:
exception
.
name
message
:
exception
.
message
}
)
;
}
}
registerProcessor
(
'
messenger
-
processor
'
MessengerProcessor
)
;
