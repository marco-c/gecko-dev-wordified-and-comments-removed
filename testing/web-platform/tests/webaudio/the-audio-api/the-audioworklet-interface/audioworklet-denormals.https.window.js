'
use
strict
'
;
promise_test
(
async
(
)
=
>
{
assert_not_equals
(
Number
.
MIN_VALUE
0
.
0
'
The
denormals
should
be
non
-
zeros
.
'
)
;
const
context
=
new
AudioContext
(
)
;
await
context
.
audioWorklet
.
addModule
(
'
.
/
processors
/
denormal
-
test
-
processor
.
js
'
)
;
const
denormalTestProcessor
=
new
AudioWorkletNode
(
context
'
denormal
-
test
'
)
;
return
new
Promise
(
resolve
=
>
{
denormalTestProcessor
.
port
.
onmessage
=
resolve
;
denormalTestProcessor
.
connect
(
context
.
destination
)
;
}
)
.
then
(
event
=
>
{
assert_true
(
event
.
data
.
result
'
The
denormals
should
be
non
-
zeros
in
AudioWorkletGlobalScope
.
'
)
;
}
)
;
}
'
Test
denormal
behavior
in
AudioWorkletGlobalScope
'
)
;
