(
function
(
global
)
{
let
counter
=
0
;
const
profileBuiltinsInNewTask
=
(
)
=
>
{
return
new
Promise
(
resolve
=
>
{
setTimeout
(
async
(
)
=
>
{
const
profiler
=
new
Profiler
(
{
sampleInterval
:
10
maxBufferSize
:
10000
}
)
;
for
(
const
deadline
=
performance
.
now
(
)
+
500
;
performance
.
now
(
)
<
deadline
;
)
{
counter
+
=
Math
.
random
(
)
;
counter
+
=
performance
.
now
(
)
;
}
const
trace
=
await
profiler
.
stop
(
)
;
resolve
(
trace
)
;
}
)
;
}
)
;
}
global
.
ProfilingScript
=
{
profileBuiltinsInNewTask
}
}
)
(
window
)
;
