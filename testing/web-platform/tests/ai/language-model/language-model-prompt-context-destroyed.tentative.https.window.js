'
use
strict
'
;
promise_test
(
async
t
=
>
{
assert_true
(
!
!
LanguageModel
)
;
const
iframe
=
document
.
createElement
(
'
iframe
'
)
;
document
.
childNodes
[
document
.
childNodes
.
length
-
1
]
.
appendChild
(
iframe
)
;
await
test_driver
.
bless
(
)
;
const
session
=
await
iframe
.
contentWindow
.
LanguageModel
.
create
(
)
;
session
.
prompt
(
kTestPrompt
)
;
iframe
.
remove
(
)
;
}
'
Detaching
iframe
while
running
prompt
(
)
should
not
cause
memory
leak
'
)
;
