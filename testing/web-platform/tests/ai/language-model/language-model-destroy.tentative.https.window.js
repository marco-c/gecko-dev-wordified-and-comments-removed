'
use
strict
'
;
promise_test
(
async
t
=
>
{
await
ensureLanguageModel
(
)
;
const
session
=
await
createLanguageModel
(
)
;
let
result
=
session
.
prompt
(
kTestPrompt
)
;
session
.
destroy
(
)
;
await
promise_rejects_dom
(
t
"
InvalidStateError
"
result
"
The
model
execution
session
has
been
destroyed
.
"
)
;
await
promise_rejects_dom
(
t
"
InvalidStateError
"
session
.
prompt
(
kTestPrompt
)
"
The
model
execution
session
has
been
destroyed
.
"
)
;
assert_equals
(
typeof
session
.
inputQuota
"
number
"
"
inputQuota
must
be
accessible
.
"
)
;
assert_equals
(
typeof
session
.
inputUsage
"
number
"
"
inputUsage
must
be
accessible
.
"
)
;
assert_equals
(
typeof
session
.
temperature
"
number
"
"
temperature
must
be
accessible
.
"
)
;
assert_equals
(
typeof
session
.
topK
"
number
"
"
topK
must
be
accessible
.
"
)
;
}
)
;
