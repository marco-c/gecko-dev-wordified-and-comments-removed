importScripts
(
"
/
resources
/
testharness
.
js
"
)
;
importScripts
(
"
/
2dcontext
/
resources
/
canvas
-
tests
.
js
"
)
;
var
t
=
async_test
(
"
transform
(
)
with
skewy
matrix
transforms
correctly
"
)
;
t
.
step
(
function
(
)
{
var
offscreenCanvas
=
new
OffscreenCanvas
(
100
50
)
;
var
ctx
=
offscreenCanvas
.
getContext
(
'
2d
'
)
;
ctx
.
fillStyle
=
'
#
0f0
'
;
ctx
.
fillRect
(
0
0
100
50
)
;
ctx
.
fillStyle
=
'
#
f00
'
;
ctx
.
fillRect
(
20
10
60
30
)
;
ctx
.
fillStyle
=
'
#
0f0
'
;
ctx
.
fillRect
(
40
20
20
10
)
;
ctx
.
transform
(
1
4
2
3
5
6
)
;
var
pts
=
[
[
-
7
.
4
11
.
2
]
[
-
43
.
4
59
.
2
]
[
-
31
.
4
53
.
2
]
[
4
.
6
5
.
2
]
[
-
7
.
4
11
.
2
]
[
-
15
.
4
25
.
2
]
[
-
11
.
4
23
.
2
]
[
-
23
.
4
39
.
2
]
[
-
27
.
4
41
.
2
]
[
-
15
.
4
25
.
2
]
[
-
7
.
4
11
.
2
]
]
;
ctx
.
beginPath
(
)
;
ctx
.
moveTo
(
pts
[
0
]
[
0
]
pts
[
0
]
[
1
]
)
;
for
(
var
i
=
0
;
i
<
pts
.
length
;
+
+
i
)
ctx
.
lineTo
(
pts
[
i
]
[
0
]
pts
[
i
]
[
1
]
)
;
ctx
.
fill
(
)
;
_assertPixel
(
offscreenCanvas
21
11
0
255
0
255
"
21
11
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
79
11
0
255
0
255
"
79
11
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
21
39
0
255
0
255
"
21
39
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
79
39
0
255
0
255
"
79
39
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
39
19
0
255
0
255
"
39
19
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
61
19
0
255
0
255
"
61
19
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
39
31
0
255
0
255
"
39
31
"
"
0
255
0
255
"
)
;
_assertPixel
(
offscreenCanvas
61
31
0
255
0
255
"
61
31
"
"
0
255
0
255
"
)
;
t
.
done
(
)
;
}
)
;
done
(
)
;
