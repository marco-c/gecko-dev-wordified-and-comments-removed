const
custom_cors_response
=
(
payload
base_url
)
=
>
{
base_url
=
base_url
|
|
new
URL
(
location
.
href
)
;
payload
=
Object
.
assign
(
{
}
payload
)
;
payload
.
headers
=
payload
.
headers
|
|
{
}
;
payload
.
content
=
payload
.
content
|
|
'
/
*
custom
-
cors
-
response
.
js
content
*
/
'
;
payload
.
status_code
=
payload
.
status_code
|
|
200
;
const
acao
=
"
Access
-
Control
-
Allow
-
Origin
"
;
if
(
!
(
acao
in
payload
.
headers
)
)
{
payload
.
headers
[
acao
]
=
'
*
'
;
}
let
ret
=
new
URL
(
"
/
common
/
CustomCorsResponse
.
py
"
base_url
)
;
for
(
const
key
in
payload
)
{
ret
.
searchParams
.
append
(
key
JSON
.
stringify
(
payload
[
key
]
)
)
;
}
return
ret
;
}
;
