function
importPaintWorkletAndTerminateTestAfterAsyncPaint
(
code
)
{
if
(
typeof
CSS
.
paintWorklet
=
=
"
undefined
"
)
{
takeScreenshot
(
)
;
}
else
{
var
blob
=
new
Blob
(
[
code
]
{
type
:
'
text
/
javascript
'
}
)
;
CSS
.
paintWorklet
.
addModule
(
URL
.
createObjectURL
(
blob
)
)
.
then
(
function
(
)
{
requestAnimationFrame
(
function
(
)
{
requestAnimationFrame
(
function
(
)
{
takeScreenshot
(
)
;
}
)
;
}
)
;
}
)
;
}
}
