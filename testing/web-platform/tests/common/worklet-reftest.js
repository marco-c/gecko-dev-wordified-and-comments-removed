function
importWorklet
(
worklet
code
)
{
let
url
;
if
(
typeof
code
=
=
=
'
object
'
)
{
url
=
code
.
url
;
}
else
{
const
blob
=
new
Blob
(
[
code
]
{
type
:
'
text
/
javascript
'
}
)
;
url
=
URL
.
createObjectURL
(
blob
)
;
}
return
worklet
.
addModule
(
url
)
;
}
async
function
importWorkletAndTerminateTestAfterAsyncPaint
(
worklet
code
)
{
if
(
typeof
worklet
=
=
=
'
undefined
'
)
{
takeScreenshot
(
)
;
return
;
}
await
importWorklet
(
worklet
code
)
;
requestAnimationFrame
(
function
(
)
{
requestAnimationFrame
(
function
(
)
{
takeScreenshot
(
)
;
}
)
;
}
)
;
}
