function
importWorkletAndTerminateTestAfterAsyncPaint
(
worklet
code
)
{
if
(
typeof
worklet
=
=
"
undefined
"
)
{
takeScreenshot
(
)
;
}
else
{
var
blob
=
new
Blob
(
[
code
]
{
type
:
'
text
/
javascript
'
}
)
;
worklet
.
addModule
(
URL
.
createObjectURL
(
blob
)
)
.
then
(
function
(
)
{
requestAnimationFrame
(
function
(
)
{
requestAnimationFrame
(
function
(
)
{
takeScreenshot
(
)
;
}
)
;
}
)
;
}
)
;
}
}
