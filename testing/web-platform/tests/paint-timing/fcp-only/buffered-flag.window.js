setup
(
{
"
hide_test_state
"
:
true
}
)
;
async_test
(
t
=
>
{
assert_implements
(
window
.
PerformancePaintTiming
"
Paint
Timing
isn
'
t
supported
.
"
)
;
new
PerformanceObserver
(
entries
=
>
{
const
entry_seen
=
entries
.
getEntriesByName
(
'
first
-
contentful
-
paint
'
)
.
length
>
0
;
if
(
!
entry_seen
)
return
;
new
PerformanceObserver
(
t
.
step_func_done
(
list
=
>
{
const
fcp
=
list
.
getEntriesByName
(
'
first
-
contentful
-
paint
'
)
;
assert_equals
(
fcp
.
length
1
'
Should
have
an
fcp
entry
'
)
;
const
entry
=
fcp
[
0
]
;
assert_equals
(
entry
.
entryType
'
paint
'
)
;
}
)
)
.
observe
(
{
'
type
'
:
'
paint
'
buffered
:
true
}
)
;
}
)
.
observe
(
{
'
entryTypes
'
:
[
'
paint
'
]
}
)
;
const
img
=
document
.
createElement
(
"
img
"
)
;
img
.
src
=
"
.
.
/
resources
/
circles
.
png
"
;
document
.
body
.
appendChild
(
img
)
;
}
"
PerformanceObserver
with
buffered
flag
sees
previous
FCP
entry
.
"
)
;
