const
childWorkerScript
=
self
.
onmessage
=
async
(
e
)
=
>
{
const
response
=
await
fetch
(
e
.
data
)
;
const
text
=
await
response
.
text
(
)
;
self
.
postMessage
(
text
)
;
}
;
;
const
blob
=
new
Blob
(
[
childWorkerScript
]
{
type
:
'
text
/
javascript
'
}
)
;
const
blobUrl
=
URL
.
createObjectURL
(
blob
)
;
const
childWorker
=
new
Worker
(
blobUrl
)
;
self
.
onmessage
=
(
e
)
=
>
{
childWorker
.
postMessage
(
e
.
data
)
;
}
;
childWorker
.
onmessage
=
(
e
)
=
>
{
self
.
postMessage
(
e
.
data
)
;
}
;
