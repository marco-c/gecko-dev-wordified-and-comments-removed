let
name
;
if
(
self
.
registration
.
scope
.
indexOf
(
'
scope1
'
)
!
=
-
1
)
name
=
'
sw1
'
;
if
(
self
.
registration
.
scope
.
indexOf
(
'
scope2
'
)
!
=
-
1
)
name
=
'
sw2
'
;
self
.
addEventListener
(
'
fetch
'
evt
=
>
{
if
(
evt
.
request
.
url
.
indexOf
(
'
redirect
.
py
'
)
!
=
-
1
)
{
return
;
}
if
(
evt
.
request
.
url
.
indexOf
(
'
sw
-
redirect
'
)
!
=
-
1
)
{
const
url
=
new
URL
(
evt
.
request
.
url
)
;
const
redirect_to
=
url
.
searchParams
.
get
(
'
Redirect
'
)
;
evt
.
respondWith
(
Response
.
redirect
(
redirect_to
)
)
;
return
;
}
if
(
evt
.
request
.
url
.
indexOf
(
'
webworker
.
py
'
)
!
=
-
1
)
{
const
greeting
=
encodeURIComponent
(
{
name
}
saw
the
request
for
the
worker
script
)
;
evt
.
respondWith
(
fetch
(
worker_interception_redirect_webworker
.
py
?
greeting
=
{
greeting
}
)
)
;
return
;
}
if
(
evt
.
request
.
url
.
indexOf
(
'
import
-
scripts
-
echo
.
py
'
)
!
=
-
1
)
{
const
msg
=
encodeURIComponent
(
{
name
}
saw
importScripts
from
the
worker
)
;
evt
.
respondWith
(
fetch
(
import
-
scripts
-
echo
.
py
?
msg
=
{
msg
}
)
)
;
return
;
}
if
(
evt
.
request
.
url
.
indexOf
(
'
simple
.
txt
'
)
!
=
-
1
)
{
evt
.
respondWith
(
new
Response
(
{
name
}
saw
the
fetch
from
the
worker
)
)
;
return
;
}
}
)
;
