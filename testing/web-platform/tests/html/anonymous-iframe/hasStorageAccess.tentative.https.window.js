setup
(
(
)
=
>
{
assert_implements
(
document
.
hasStorageAccess
"
requestStorageAccess
is
not
supported
.
"
)
;
}
)
const
hasStorageAccess
=
(
iframe
)
=
>
{
const
reply
=
token
(
)
;
send
(
iframe
send
(
"
{
reply
}
"
await
document
.
hasStorageAccess
(
)
)
;
)
;
return
receive
(
reply
)
;
}
promise_test
(
async
test
=
>
{
const
same_origin
=
window
.
origin
;
const
iframe
=
newIframeCredentialless
(
same_origin
)
;
assert_equals
(
await
hasStorageAccess
(
iframe
)
"
false
"
)
;
}
"
Same
-
origin
credentialless
iframe
can
'
t
request
storage
access
"
)
;
promise_test
(
async
test
=
>
{
const
cross_origin
=
get_host_info
(
)
.
HTTPS_REMOTE_ORIGIN
;
const
iframe
=
newIframeCredentialless
(
cross_origin
)
;
assert_equals
(
await
hasStorageAccess
(
iframe
)
"
false
"
)
;
}
"
Cross
-
origin
credentialless
iframe
can
'
t
request
storage
access
"
)
;
