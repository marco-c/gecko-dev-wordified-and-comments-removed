async_test
(
t
=
>
{
const
frame
=
document
.
body
.
appendChild
(
document
.
createElement
(
"
iframe
"
)
)
;
t
.
add_cleanup
(
(
)
=
>
{
frame
.
remove
(
)
;
}
)
;
frame
.
src
=
"
.
.
/
opening
-
the
-
input
-
stream
/
resources
/
dummy
.
html
"
;
frame
.
onload
=
t
.
step_func_done
(
(
)
=
>
{
const
states
=
[
]
;
frame
.
contentDocument
.
onreadystatechange
=
t
.
step_func
(
(
)
=
>
{
if
(
frame
.
contentDocument
.
readyState
=
=
=
"
interactive
"
)
{
assert_not_equals
(
frame
.
contentDocument
.
textContent
"
"
"
Precondition
check
:
dummy
document
is
not
empty
"
)
;
frame
.
contentDocument
.
write
(
"
Some
text
"
)
;
assert_equals
(
frame
.
contentDocument
.
textContent
"
Some
text
"
)
;
}
}
)
;
}
)
;
}
"
document
.
write
(
)
during
readystatechange
to
interactive
"
)
;
