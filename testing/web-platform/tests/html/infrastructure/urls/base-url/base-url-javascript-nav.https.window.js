onload
=
(
)
=
>
{
async_test
(
(
t
)
=
>
{
const
frame
=
document
.
createElement
(
'
iframe
'
)
;
frame
.
onload
=
(
)
=
>
{
assert_equals
(
document
.
baseURI
frame
.
contentDocument
.
baseURI
)
;
frame
.
onload
=
(
)
=
>
{
assert_equals
(
document
.
baseURI
frame
.
contentDocument
.
baseURI
)
;
assert_equals
(
'
foo
'
frame
.
contentDocument
.
body
.
textContent
)
;
}
;
frame
.
src
=
"
javascript
:
'
foo
'
"
;
t
.
done
(
)
;
}
;
document
.
body
.
appendChild
(
frame
)
;
}
"
javascript
:
url
nav
base
url
test
"
)
;
}
;
