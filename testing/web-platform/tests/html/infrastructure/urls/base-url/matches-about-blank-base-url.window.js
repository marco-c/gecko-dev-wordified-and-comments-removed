onload
=
(
)
=
>
{
async_test
(
t
=
>
{
const
iframe
=
document
.
createElement
(
'
iframe
'
)
;
iframe
.
src
=
'
/
common
/
blank
.
html
'
;
iframe
.
addEventListener
(
'
load
'
e
=
>
{
assert_equals
(
iframe
.
contentWindow
.
location
.
pathname
'
/
common
/
blank
.
html
'
)
;
iframe
.
onload
=
t
.
step_func_done
(
(
)
=
>
{
assert_equals
(
iframe
.
contentDocument
.
URL
'
about
:
blank
?
query
#
fragment
'
)
;
assert_equals
(
iframe
.
contentWindow
.
origin
window
.
origin
)
;
assert_equals
(
iframe
.
contentDocument
.
baseURI
document
.
baseURI
)
;
}
)
;
iframe
.
src
=
'
about
:
blank
?
query
#
fragment
'
;
}
{
once
:
true
}
)
;
document
.
body
.
appendChild
(
iframe
)
;
}
"
about
:
blank
and
about
:
blank
?
foo
#
bar
both
'
match
about
:
blank
'
"
)
;
}
;
