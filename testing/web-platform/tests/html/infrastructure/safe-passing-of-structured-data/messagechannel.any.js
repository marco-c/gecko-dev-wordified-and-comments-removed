runStructuredCloneBatteryOfTests
(
{
structuredClone
(
data
transfer
)
{
return
new
Promise
(
resolve
=
>
{
const
channel
=
new
MessageChannel
(
)
;
channel
.
port2
.
onmessage
=
ev
=
>
resolve
(
ev
.
data
.
data
)
;
channel
.
port1
.
postMessage
(
{
data
transfer
}
transfer
)
;
}
)
;
}
hasDocument
:
self
.
GLOBAL
.
isWindow
(
)
}
)
;
