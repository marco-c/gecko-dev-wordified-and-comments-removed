promise_test
(
async
t
=
>
{
const
iframe
=
await
addSrcdocIframe
(
)
;
iframe
.
contentWindow
.
location
=
"
/
common
/
blank
.
html
"
;
await
waitForIframeLoad
(
iframe
)
;
iframe
.
contentWindow
.
location
=
"
about
:
srcdoc
"
;
await
Promise
.
race
(
[
t
.
step_wait
(
(
)
=
>
iframe
.
contentDocument
=
=
=
null
)
failOnMessage
(
iframe
.
contentWindow
)
]
)
;
}
"
Navigations
to
about
:
srcdoc
via
window
.
location
must
be
blocked
"
)
;
promise_test
(
async
t
=
>
{
const
iframe
=
await
addSrcdocIframe
(
)
;
iframe
.
contentWindow
.
name
=
"
test_frame
"
;
iframe
.
contentWindow
.
location
=
"
/
common
/
blank
.
html
"
;
await
waitForIframeLoad
(
iframe
)
;
window
.
open
(
"
about
:
srcdoc
"
"
test_frame
"
)
;
await
Promise
.
race
(
[
t
.
step_wait
(
(
)
=
>
iframe
.
contentDocument
=
=
=
null
)
failOnMessage
(
iframe
.
contentWindow
)
]
)
;
}
"
Navigations
to
about
:
srcdoc
via
window
.
open
(
)
must
be
blocked
"
)
;
