def
main
(
request
response
)
:
    
response
.
headers
.
set
(
b
"
Cache
-
Control
"
b
"
no
-
store
"
)
    
uuid
=
request
.
GET
.
first
(
b
"
uuid
"
)
    
value
=
request
.
server
.
stash
.
take
(
uuid
)
    
if
value
is
None
:
        
response
.
status
=
302
        
location
=
request
.
GET
.
first
(
b
"
location
"
)
        
response
.
headers
.
set
(
b
"
Location
"
location
)
        
request
.
server
.
stash
.
put
(
uuid
"
sentinel
value
"
)
    
else
:
        
return
(
[
(
b
"
Content
-
Type
"
b
"
text
/
html
"
)
]
b
"
No
redirect
"
)
