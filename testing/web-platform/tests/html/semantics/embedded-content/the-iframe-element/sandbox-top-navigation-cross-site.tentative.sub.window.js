'
use
strict
'
;
promise_test
(
async
t
=
>
{
const
main
=
await
setupTest
(
)
;
const
iframe
=
await
createNestedIframe
(
main
"
HTTP_ORIGIN
"
"
"
"
"
)
;
await
activate
(
iframe
)
;
const
new_iframe
=
await
navigateFrameTo
(
iframe
"
HTTPS_REMOTE_ORIGIN
"
)
;
await
attemptTopNavigation
(
new_iframe
false
)
;
}
"
A
cross
-
site
unsandboxed
iframe
navigation
consumes
user
activation
and
"
+
"
disallows
top
-
level
navigation
.
"
)
;
promise_test
(
async
t
=
>
{
const
main
=
await
setupTest
(
)
;
const
iframe
=
await
createNestedIframe
(
main
"
HTTP_ORIGIN
"
"
"
"
"
)
;
await
activate
(
iframe
)
;
const
new_iframe
=
await
navigateFrameTo
(
iframe
"
HTTP_REMOTE_ORIGIN
"
)
;
await
attemptTopNavigation
(
new_iframe
true
)
;
}
"
A
same
-
site
unsandboxed
iframe
navigation
does
not
consume
user
"
+
"
activation
and
allows
top
-
level
navigation
.
"
)
;
promise_test
(
async
t
=
>
{
const
main
=
await
setupTest
(
)
;
const
iframe
=
await
createNestedIframe
(
main
"
HTTP_ORIGIN
"
"
"
"
"
)
;
const
new_iframe
=
await
navigateFrameTo
(
iframe
"
HTTP_REMOTE_ORIGIN
"
)
;
await
attemptTopNavigation
(
new_iframe
false
)
;
}
"
A
same
-
site
unsandboxed
iframe
navigation
without
sticky
user
activation
"
+
"
does
not
allow
top
-
level
navigation
.
"
)
;
