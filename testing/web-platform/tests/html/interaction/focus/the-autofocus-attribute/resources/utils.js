'
use
strict
'
;
function
waitForEvent
(
target
type
options
)
{
return
new
Promise
(
(
resolve
reject
)
=
>
{
target
.
addEventListener
(
type
resolve
options
)
;
}
)
;
}
function
waitForAnimationFrame
(
w
)
{
let
targetWindow
=
w
|
|
window
;
return
new
Promise
(
(
resolve
reject
)
=
>
{
targetWindow
.
requestAnimationFrame
(
resolve
)
;
}
)
;
}
function
waitForEvent
(
target
type
options
)
{
return
new
Promise
(
(
resolve
reject
)
=
>
{
target
.
addEventListener
(
type
resolve
options
)
;
}
)
;
}
function
waitForLoad
(
target
)
{
return
waitForEvent
(
target
'
load
'
)
;
}
function
timeOut
(
test
ms
)
{
return
new
Promise
(
(
resolve
reject
)
=
>
{
test
.
step_timeout
(
resolve
ms
)
;
}
)
;
}
async
function
waitUntilStableAutofocusState
(
w
)
{
let
targetWindow
=
w
|
|
window
;
await
waitForAnimationFrame
(
targetWindow
)
;
}
