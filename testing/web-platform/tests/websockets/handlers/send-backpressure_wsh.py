import
six
import
time
MESSAGE_SIZE
=
1024
*
1024
MESSAGE_COUNT
=
16
def
web_socket_do_extra_handshake
(
request
)
:
    
request
.
ws_extension_processors
=
[
]
def
web_socket_transfer_data
(
request
)
:
    
request
.
ws_stream
.
send_message
(
b
'
'
binary
=
True
)
    
start_time
=
time
.
time
(
)
    
for
i
in
range
(
MESSAGE_COUNT
)
:
        
request
.
ws_stream
.
send_message
(
b
'
'
*
MESSAGE_SIZE
binary
=
True
)
    
request
.
ws_stream
.
send_message
(
six
.
text_type
(
time
.
time
(
)
-
start_time
)
                                   
binary
=
False
)
