"
use
strict
"
;
let
registration
;
promise_setup
(
async
(
)
=
>
{
registration
=
await
prepareActiveServiceWorker
(
"
noop
-
sw
.
js
"
)
;
await
trySettingPermission
(
"
granted
"
)
;
}
)
;
promise_test
(
async
(
t
)
=
>
{
t
.
add_cleanup
(
closeAllNotifications
)
;
await
registration
.
showNotification
(
"
foo
"
)
;
await
registration
.
unregister
(
)
;
registration
=
await
prepareActiveServiceWorker
(
"
noop
-
sw
.
js
"
)
;
const
notifications
=
await
registration
.
getNotifications
(
)
;
assert_equals
(
notifications
.
length
0
"
Should
return
zero
notification
"
)
;
}
"
A
new
SW
registration
gets
no
previous
notification
"
)
;
promise_test
(
async
(
t
)
=
>
{
await
registration
.
showNotification
(
"
foo
"
)
;
await
registration
.
unregister
(
)
;
const
notifications
=
await
registration
.
getNotifications
(
)
;
assert_equals
(
notifications
.
length
0
"
Should
return
zero
notification
"
)
;
}
"
An
unregistered
SW
registration
gets
no
previous
notification
"
)
;
