window
.
onload
=
async
(
)
=
>
{
let
urlParams
=
new
URLSearchParams
(
window
.
location
.
search
)
;
let
testName
=
urlParams
.
get
(
'
testName
'
)
;
let
testFn
=
window
[
testName
]
;
if
(
!
testFn
)
{
window
.
portalHost
.
postMessage
(
'
Missing
test
:
'
+
testName
)
;
return
;
}
await
new
Promise
(
(
resolve
)
=
>
{
window
.
setTimeout
(
resolve
)
;
}
)
;
try
{
await
testFn
(
)
;
window
.
portalHost
.
postMessage
(
'
Passed
'
)
;
}
catch
(
e
)
{
window
.
portalHost
.
postMessage
(
'
Failed
:
'
+
e
.
name
+
'
:
'
+
e
.
message
)
;
}
}
;
function
assert
(
condition
message
)
{
if
(
!
condition
)
throw
new
Error
(
'
Assertion
failed
:
'
+
message
)
;
}
