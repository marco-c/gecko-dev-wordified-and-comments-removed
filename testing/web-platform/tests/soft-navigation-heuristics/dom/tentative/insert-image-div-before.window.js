function
clickHandler
(
)
{
const
div
=
document
.
createElement
(
"
div
"
)
;
const
img
=
new
Image
(
)
;
img
.
src
=
"
/
images
/
lcp
-
256x256
.
png
"
div
.
appendChild
(
img
)
;
document
.
body
.
insertBefore
(
div
document
.
getElementById
(
"
insert
-
before
"
)
)
;
history
.
pushState
(
{
}
'
'
'
/
test
'
)
;
}
const
div
=
document
.
createElement
(
'
div
'
)
;
div
.
id
=
'
insert
-
before
'
;
document
.
body
.
appendChild
(
div
)
;
const
button
=
document
.
createElement
(
'
div
'
)
;
button
.
textContent
=
'
Click
here
!
'
;
button
.
onclick
=
clickHandler
;
document
.
body
.
appendChild
(
button
)
;
promise_test
(
async
(
t
)
=
>
{
if
(
test_driver
)
{
test_driver
.
click
(
button
)
;
}
const
helper
=
new
SoftNavigationTestHelper
(
t
)
;
const
entries
=
await
helper
.
getBufferedPerformanceEntriesWithTimeout
(
'
soft
-
navigation
'
false
1
3000
)
;
assert_equals
(
entries
.
length
1
'
Expected
exactly
one
soft
navigation
.
'
)
;
assert_equals
(
entries
[
0
]
.
name
.
replace
(
/
.
*
\
/
/
'
'
)
'
test
'
'
URL
ends
with
\
'
test
\
'
.
'
)
;
}
'
DOM
:
Insert
image
div
satisfies
Soft
Navigation
paint
criterion
.
'
)
;
