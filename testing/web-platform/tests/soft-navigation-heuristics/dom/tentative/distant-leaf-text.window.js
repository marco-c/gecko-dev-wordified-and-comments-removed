function
clickHandler
(
)
{
let
div
=
document
.
createElement
(
'
div
'
)
;
div
.
textContent
=
'
Hello
World
.
'
;
for
(
let
i
=
0
;
i
<
10
;
i
+
+
)
{
const
tmp
=
document
.
createElement
(
'
div
'
)
;
tmp
.
appendChild
(
div
)
;
div
=
tmp
;
}
document
.
body
.
appendChild
(
div
)
;
history
.
pushState
(
{
}
'
'
'
/
greeting
'
)
;
}
const
button
=
document
.
createElement
(
'
div
'
)
;
button
.
textContent
=
'
Click
here
!
'
;
button
.
onclick
=
clickHandler
;
document
.
body
.
appendChild
(
button
)
;
promise_test
(
async
(
t
)
=
>
{
if
(
test_driver
)
{
test_driver
.
click
(
button
)
;
}
const
helper
=
new
SoftNavigationTestHelper
(
t
)
;
const
entries
=
await
helper
.
getBufferedPerformanceEntriesWithTimeout
(
'
soft
-
navigation
'
false
1
3000
)
;
assert_equals
(
entries
.
length
1
'
Expected
exactly
one
soft
navigation
.
'
)
;
assert_equals
(
entries
[
0
]
.
name
.
replace
(
/
.
*
\
/
/
'
'
)
'
greeting
'
'
URL
ends
with
\
'
greeting
\
'
.
'
)
;
}
'
DOM
:
Distant
leaf
(
text
)
satisfies
Soft
Navigation
paint
criterion
.
'
)
;
