import
pytest
import
json
def
test_get_status_no_session
(
http
)
:
    
with
http
.
get
(
"
/
status
"
)
as
response
:
        
assert
response
.
status
=
=
200
        
parsed_obj
=
json
.
loads
(
response
.
read
(
)
.
decode
(
'
utf
-
8
'
)
)
        
value
=
parsed_obj
[
"
value
"
]
        
assert
value
[
"
ready
"
]
in
[
True
False
]
        
assert
isinstance
(
value
[
"
message
"
]
basestring
)
def
test_status_with_session_running_on_endpoint_node
(
new_session
add_browser_capabilites
)
:
    
_
session
=
new_session
(
{
"
capabilities
"
:
{
"
alwaysMatch
"
:
add_browser_capabilites
(
{
}
)
}
}
)
    
value
=
session
.
send_command
(
"
GET
"
"
status
"
)
    
assert
value
[
"
ready
"
]
=
=
False
    
assert
"
message
"
in
value
    
session
.
end
(
)
    
value
=
session
.
send_command
(
"
GET
"
"
status
"
)
    
assert
value
[
"
ready
"
]
=
=
True
    
assert
"
message
"
in
value
