"
"
"
Test
the
event
loop
fixture
provides
a
separate
loop
for
each
test
.
These
tests
need
to
be
run
together
.
"
"
"
import
asyncio
import
pytest
loop
:
asyncio
.
AbstractEventLoop
def
test_1
(
)
:
    
global
loop
    
loop
=
asyncio
.
get_event_loop_policy
(
)
.
get_event_loop
(
)
pytest
.
mark
.
asyncio
async
def
test_2
(
)
:
    
global
loop
    
running_loop
=
asyncio
.
get_event_loop_policy
(
)
.
get_event_loop
(
)
    
assert
running_loop
is
not
loop
    
loop
=
running_loop
def
test_3
(
)
:
    
global
loop
    
current_loop
=
asyncio
.
get_event_loop_policy
(
)
.
get_event_loop
(
)
    
assert
loop
is
not
current_loop
def
test_4
(
event_loop
)
:
    
asyncio
.
get_event_loop_policy
(
)
.
set_event_loop
(
None
)
