import
time
def
main
(
request
response
)
:
    
key
=
request
.
GET
.
first
(
"
key
"
)
    
if
request
.
method
=
=
"
POST
"
:
        
request
.
server
.
stash
.
put
(
key
request
.
body
'
/
scroll
-
to
-
text
-
fragment
/
'
)
        
return
"
ok
"
    
else
:
        
value
=
request
.
server
.
stash
.
take
(
key
'
/
scroll
-
to
-
text
-
fragment
/
'
)
        
while
value
is
None
:
          
time
.
sleep
(
.
1
)
          
value
=
request
.
server
.
stash
.
take
(
key
'
/
scroll
-
to
-
text
-
fragment
/
'
)
        
return
value
