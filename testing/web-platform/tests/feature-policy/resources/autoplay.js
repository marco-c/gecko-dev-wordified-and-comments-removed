function
simulateGesture
(
t
callback
)
{
let
target
=
document
.
getElementById
(
'
target
'
)
;
if
(
!
target
)
{
target
=
document
.
createElement
(
'
button
'
)
;
target
.
setAttribute
(
'
id
'
'
target
'
)
;
document
.
body
.
appendChild
(
target
)
;
}
test_driver
.
click
(
target
)
.
then
(
callback
t
.
unreached_func
(
'
click
failed
'
)
)
;
}
function
isAutoplayAllowed
(
)
{
return
new
Promise
(
(
resolve
reject
)
=
>
{
const
video
=
document
.
createElement
(
'
video
'
)
;
video
.
src
=
getVideoURI
(
'
/
media
/
A4
'
)
;
video
.
play
(
)
.
then
(
(
)
=
>
resolve
(
true
)
(
e
)
=
>
{
if
(
e
.
name
=
=
'
NotAllowedError
'
)
resolve
(
false
)
;
else
resolve
(
true
)
;
}
)
;
}
)
;
}
