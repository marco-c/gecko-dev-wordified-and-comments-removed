window
.
createRecordingCloseWatcher
=
(
t
events
name
)
=
>
{
const
prefix
=
name
=
=
=
undefined
?
"
"
:
name
+
"
"
;
;
const
watcher
=
new
CloseWatcher
(
)
;
t
.
add_cleanup
(
(
)
=
>
watcher
.
destroy
(
)
)
;
watcher
.
addEventListener
(
"
cancel
"
(
)
=
>
events
.
push
(
prefix
+
"
cancel
"
)
)
;
watcher
.
addEventListener
(
"
close
"
(
)
=
>
events
.
push
(
prefix
+
"
close
"
)
)
;
return
watcher
;
}
;
window
.
createBlessedRecordingCloseWatcher
=
(
t
events
name
)
=
>
{
return
test_driver
.
bless
(
"
create
"
+
name
(
)
=
>
createRecordingCloseWatcher
(
t
events
name
)
)
;
}
;
window
.
sendEscKey
=
(
)
=
>
{
return
test_driver
.
send_keys
(
document
.
body
'
\
uE00C
'
)
;
}
;
window
.
sendCloseRequest
=
window
.
sendEscKey
;
