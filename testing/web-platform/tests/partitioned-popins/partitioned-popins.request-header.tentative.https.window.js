'
use
strict
'
;
async_test
(
t
=
>
{
window
.
addEventListener
(
"
message
"
t
.
step_func
(
e
=
>
{
switch
(
e
.
data
.
type
)
{
case
'
popin
'
:
assert_equals
(
e
.
data
.
message
"
Initial
(
partitioned
)
-
HTTP
(
partitioned
)
-
JS
(
partitioned
)
-
fetch
(
missing
)
-
iframe
(
missing
)
-
"
)
;
t
.
done
(
)
;
break
;
}
}
)
)
;
window
.
open
(
"
/
partitioned
-
popins
/
resources
/
partitioned
-
popins
.
request
-
header
.
initial
.
py
"
'
_blank
'
'
popin
'
)
;
}
"
Verify
Request
Header
seen
on
all
popin
navigations
/
redirects
"
)
;
