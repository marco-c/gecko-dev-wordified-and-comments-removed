'
use
strict
'
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
'
c
'
}
'
Single
item
get
'
)
;
object_store_get_all_values_test
(
'
generated
'
{
query
:
3
}
'
Single
item
get
(
generated
key
)
'
)
;
object_store_get_all_values_test
(
'
empty
'
undefined
'
getAll
on
empty
object
store
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
undefined
'
Get
all
values
'
)
;
object_store_get_all_values_test
(
'
large
-
values
'
undefined
'
Get
all
with
large
values
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
count
:
10
}
'
Test
maxCount
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
bound
(
'
g
'
'
m
'
)
}
'
Get
bound
range
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
bound
(
'
g
'
'
m
'
)
count
:
3
}
'
Get
bound
range
with
maxCount
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
bound
(
'
g
'
'
k
'
false
true
)
}
'
Get
upper
excluded
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
bound
(
'
g
'
'
k
'
true
false
)
}
'
Get
lower
excluded
'
)
;
object_store_get_all_values_test
(
'
generated
'
{
query
:
IDBKeyRange
.
bound
(
4
15
)
count
:
3
}
'
Get
bound
range
(
generated
)
with
maxCount
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
'
Doesn
\
'
t
exist
'
}
'
Non
existent
key
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
count
:
0
}
'
zero
maxCount
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
count
:
4294967295
}
'
Max
value
count
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
upperBound
(
'
0
'
)
}
'
Query
with
empty
range
where
first
key
<
upperBound
'
)
;
object_store_get_all_values_test
(
'
out
-
of
-
line
'
{
query
:
IDBKeyRange
.
lowerBound
(
'
zz
'
)
}
'
Query
with
empty
range
where
lowerBound
<
last
key
'
)
;
object_store_get_all_test_setup
(
'
out
-
of
-
line
'
(
test
connection
expectedRecords
)
=
>
{
const
transaction
=
connection
.
transaction
(
'
out
-
of
-
line
'
'
readonly
'
)
;
const
store
=
transaction
.
objectStore
(
'
out
-
of
-
line
'
)
;
const
request
=
store
.
getAll
(
)
;
transaction
.
commit
(
)
;
transaction
.
oncomplete
=
test
.
unreached_func
(
'
transaction
completed
before
request
succeeded
'
)
;
request
.
onerror
=
test
.
unreached_func
(
'
getAll
request
should
succeed
'
)
;
request
.
onsuccess
=
test
.
step_func
(
event
=
>
{
const
expectedResults
=
calculateExpectedGetAllResults
(
'
getAll
'
expectedRecords
)
;
const
actualResults
=
event
.
target
.
result
;
verifyGetAllResults
(
'
getAll
'
actualResults
expectedResults
)
;
transaction
.
oncomplete
=
test
.
step_func_done
(
)
;
}
)
;
}
'
Get
all
values
with
transaction
.
commit
(
)
'
)
;
