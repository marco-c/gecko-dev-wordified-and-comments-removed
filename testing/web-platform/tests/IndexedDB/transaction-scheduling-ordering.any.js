indexeddb_test
(
(
t
db
)
=
>
{
const
store
=
db
.
createObjectStore
(
'
store
'
)
;
}
(
t
db
)
=
>
{
const
tx1
=
db
.
transaction
(
'
store
'
'
readwrite
'
{
durability
:
'
relaxed
'
}
)
;
const
tx2
=
db
.
transaction
(
'
store
'
'
readwrite
'
{
durability
:
'
relaxed
'
}
)
;
tx2
.
objectStore
(
'
store
'
)
.
get
(
0
)
;
tx1
.
objectStore
(
'
store
'
)
.
get
(
0
)
;
const
order
=
[
]
;
const
done
=
barrier_func
(
2
t
.
step_func_done
(
(
)
=
>
{
assert_array_equals
(
order
[
1
2
]
)
;
}
)
)
;
tx1
.
oncomplete
=
t
.
step_func
(
e
=
>
{
order
.
push
(
1
)
;
done
(
)
;
}
)
;
tx2
.
oncomplete
=
t
.
step_func
(
e
=
>
{
order
.
push
(
2
)
;
done
(
)
;
}
)
;
}
"
Verify
Indexed
DB
transactions
are
ordered
per
spec
"
)
;
