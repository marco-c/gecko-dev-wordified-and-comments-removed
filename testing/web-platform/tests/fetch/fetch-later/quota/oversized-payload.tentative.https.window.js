'
use
strict
'
;
const
OVERSIZED_REQUEST_BODY_SIZE
=
QUOTA_PER_ORIGIN
+
1
;
for
(
const
dataType
in
BeaconDataType
)
{
test
(
(
)
=
>
assert_throws_dom
(
'
QuotaExceededError
'
(
)
=
>
fetchLater
(
'
/
'
{
activateAfter
:
0
method
:
'
POST
'
body
:
makeBeaconData
(
generatePayload
(
OVERSIZED_REQUEST_BODY_SIZE
)
dataType
)
}
)
)
fetchLater
(
)
does
not
accept
payload
[
size
=
{
OVERSIZED_REQUEST_BODY_SIZE
}
]
exceeding
per
-
origin
quota
in
a
POST
request
body
of
{
dataType
}
.
)
;
}
