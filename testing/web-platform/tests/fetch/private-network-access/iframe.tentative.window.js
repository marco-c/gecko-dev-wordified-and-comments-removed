setup
(
(
)
=
>
{
assert_false
(
window
.
isSecureContext
)
;
}
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
}
target
:
{
server
:
Server
.
HTTP_LOCAL
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
local
to
local
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
}
target
:
{
server
:
Server
.
HTTP_PRIVATE
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
local
to
private
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
}
target
:
{
server
:
Server
.
HTTP_PUBLIC
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
local
to
public
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PRIVATE
}
target
:
{
server
:
Server
.
HTTP_LOCAL
}
expected
:
FrameTestResult
.
FAILURE
}
)
"
private
to
local
:
failure
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PRIVATE
}
target
:
{
server
:
Server
.
HTTP_PRIVATE
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
private
to
private
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PRIVATE
}
target
:
{
server
:
Server
.
HTTP_PUBLIC
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
private
to
public
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PUBLIC
}
target
:
{
server
:
Server
.
HTTP_LOCAL
}
expected
:
FrameTestResult
.
FAILURE
}
)
"
public
to
local
:
failure
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PUBLIC
}
target
:
{
server
:
Server
.
HTTP_PRIVATE
}
expected
:
FrameTestResult
.
FAILURE
}
)
"
public
to
private
:
failure
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_PUBLIC
}
target
:
{
server
:
Server
.
HTTP_PUBLIC
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
public
to
public
:
no
preflight
required
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
treatAsPublic
:
true
}
target
:
{
server
:
Server
.
HTTP_LOCAL
}
expected
:
FrameTestResult
.
FAILURE
}
)
"
treat
-
as
-
public
-
address
to
local
:
failure
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
treatAsPublic
:
true
}
target
:
{
server
:
Server
.
HTTP_PRIVATE
}
expected
:
FrameTestResult
.
FAILURE
}
)
"
treat
-
as
-
public
-
address
to
private
:
failure
.
"
)
;
promise_test_parallel
(
t
=
>
iframeTest
(
t
{
source
:
{
server
:
Server
.
HTTP_LOCAL
treatAsPublic
:
true
}
target
:
{
server
:
Server
.
HTTP_PUBLIC
}
expected
:
FrameTestResult
.
SUCCESS
}
)
"
treat
-
as
-
public
-
address
to
public
:
no
preflight
required
.
"
)
;
iframeGrandparentTest
(
{
name
:
"
local
to
local
grandparent
navigates
:
success
.
"
grandparentServer
:
Server
.
HTTP_LOCAL
child
:
{
server
:
Server
.
HTTP_PUBLIC
}
grandchild
:
{
server
:
Server
.
HTTP_LOCAL
}
expected
:
FrameTestResult
.
SUCCESS
}
)
;
