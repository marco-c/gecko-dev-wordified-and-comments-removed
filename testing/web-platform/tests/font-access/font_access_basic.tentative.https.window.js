'
use
strict
'
;
font_access_test
(
async
t
=
>
{
const
testData
=
getTestData
(
)
;
const
fonts
=
await
navigator
.
fonts
.
query
(
)
;
assert_true
(
Array
.
isArray
(
fonts
)
'
Result
of
query
(
)
should
be
an
Array
'
)
;
assert_greater_than_equal
(
fonts
.
length
1
'
Need
a
least
one
font
'
)
;
fonts
.
forEach
(
font
=
>
{
assert_true
(
font
instanceof
FontData
'
Results
should
be
FontData
instances
'
)
;
assert_equals
(
typeof
font
.
postscriptName
'
string
'
)
;
assert_true
(
font
.
postscriptName
.
split
(
'
'
)
.
every
(
c
=
>
(
'
'
<
=
c
&
&
c
<
'
\
x7f
'
)
)
postscriptName
should
be
printable
ASCII
:
"
{
font
.
postscriptName
}
"
)
;
assert_equals
(
typeof
font
.
fullName
'
string
'
'
fullName
attribute
type
'
)
;
assert_equals
(
typeof
font
.
family
'
string
'
'
family
attribute
type
'
)
;
assert_equals
(
typeof
font
.
style
'
string
'
'
style
attribute
type
'
)
;
const
expectedFont
=
testData
.
get
(
font
.
postscriptName
)
;
if
(
expectedFont
)
{
assert_font_equals
(
font
expectedFont
)
;
}
}
)
;
}
'
query
(
)
:
FontData
property
types
and
values
'
)
;
