function
runTest
(
config
qualifier
)
{
function
checkStatusForMinHdcpVersionPolicy
(
hdcpVersion
)
{
return
navigator
.
requestMediaKeySystemAccess
(
config
.
keysystem
getSimpleConfiguration
(
)
)
.
then
(
function
(
access
)
{
return
access
.
createMediaKeys
(
)
;
}
)
.
then
(
function
(
mediaKeys
)
{
return
mediaKeys
.
getStatusForPolicy
(
{
minHdcpVersion
:
hdcpVersion
}
)
;
}
)
;
}
promise_test
(
(
)
=
>
checkStatusForMinHdcpVersionPolicy
(
'
'
)
testnamePrefix
(
qualifier
config
.
keysystem
)
+
'
support
for
empty
HDCP
version
.
'
)
;
promise_test
(
(
)
=
>
checkStatusForMinHdcpVersionPolicy
(
'
1
.
0
'
)
testnamePrefix
(
qualifier
config
.
keysystem
)
+
'
support
for
HDCP
1
.
0
.
'
)
;
}
