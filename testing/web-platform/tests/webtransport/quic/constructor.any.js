const
HOST
=
get_host_info
(
)
.
ORIGINAL_HOST
;
const
BAD_URLS
=
[
null
'
'
'
no
-
scheme
'
'
https
:
/
/
example
.
com
/
'
'
quic
-
transport
:
/
/
/
'
'
quic
-
transport
:
/
/
example
.
com
/
#
failing
'
quic
-
transport
:
/
/
{
HOST
}
:
999999
/
]
;
for
(
const
url
of
BAD_URLS
)
{
test
(
(
)
=
>
{
assert_throws_dom
(
'
SyntaxError
'
(
)
=
>
new
QuicTransport
(
url
)
'
constructor
should
throw
'
)
;
}
QuicTransport
constructor
should
reject
URL
'
{
url
}
'
)
;
}
promise_test
(
t
=
>
{
const
qt
=
new
QuicTransport
(
quic
-
transport
:
/
/
{
HOST
}
:
0
/
)
;
return
Promise
.
all
(
[
promise_rejects_js
(
t
TypeError
qt
.
ready
'
ready
promise
rejects
'
)
promise_rejects_js
(
t
TypeError
qt
.
closed
'
closed
promise
rejects
'
)
]
)
;
}
'
connection
to
port
0
should
fail
'
)
;
