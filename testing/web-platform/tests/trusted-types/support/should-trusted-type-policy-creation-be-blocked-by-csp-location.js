function
createForbiddenPolicy
(
)
{
return
trusted_type_violation_for
(
TypeError
_
=
>
trustedTypes
.
createPolicy
(
"
tt
-
policy
-
name
"
)
)
;
}
promise_test
(
async
(
)
=
>
{
let
violation
=
await
createForbiddenPolicy
(
)
;
let
baseURL
=
(
new
URL
(
location
.
href
)
)
.
origin
;
let
sourceFile
=
new
URL
(
"
/
trusted
-
types
/
support
/
should
-
trusted
-
type
-
policy
-
creation
-
be
-
blocked
-
by
-
csp
-
location
.
js
"
baseURL
)
.
toString
(
)
;
assert_equals
(
violation
.
sourceFile
sourceFile
"
source
file
"
)
;
assert_equals
(
violation
.
lineNumber
4
"
line
number
"
)
;
assert_greater_than_equal
(
violation
.
columnNumber
7
"
column
number
"
)
;
}
Location
of
trusted
-
types
violations
.
)
;
