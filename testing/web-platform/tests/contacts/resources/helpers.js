'
use
strict
'
;
async
function
loadChromiumResources
(
)
{
await
import
(
'
/
resources
/
chromium
/
contacts_manager_mock
.
js
'
)
;
}
async
function
createWebContactsTest
(
)
{
if
(
typeof
WebContactsTest
=
=
=
'
undefined
'
)
{
if
(
isChromiumBased
)
{
await
loadChromiumResources
(
)
;
}
}
assert_implements
(
WebContactsTest
'
WebContactsTest
is
unavailable
.
'
)
;
return
new
WebContactsTest
(
)
;
}
function
contactsTestWithUserActivation
(
func
description
)
{
promise_test
(
async
test
=
>
{
const
webContactsTest
=
await
createWebContactsTest
(
)
;
await
window
.
test_driver
.
bless
(
'
request
contacts
'
)
;
return
func
(
test
contacts
=
>
webContactsTest
.
setSelectedContacts
(
contacts
)
)
;
}
description
)
;
}
