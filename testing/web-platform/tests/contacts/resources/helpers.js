'
use
strict
'
;
async
function
loadChromiumResources
(
)
{
const
chromiumResources
=
[
'
/
gen
/
third_party
/
blink
/
public
/
mojom
/
contacts
/
contacts_manager
.
mojom
.
js
'
'
/
gen
/
components
/
payments
/
mojom
/
payment_request_data
.
mojom
.
js
'
]
;
await
loadMojoResources
(
chromiumResources
)
;
await
loadScript
(
'
/
resources
/
chromium
/
contacts_manager_mock
.
js
'
)
;
}
async
function
createWebContactsTest
(
)
{
if
(
typeof
WebContactsTest
=
=
=
'
undefined
'
)
{
if
(
isChromiumBased
)
{
await
loadChromiumResources
(
)
;
}
}
assert_implements
(
WebContactsTest
'
WebContactsTest
is
unavailable
.
'
)
;
return
new
WebContactsTest
(
)
;
}
function
contactsTestWithUserActivation
(
func
description
)
{
promise_test
(
async
test
=
>
{
const
webContactsTest
=
await
createWebContactsTest
(
)
;
await
window
.
test_driver
.
bless
(
'
request
contacts
'
)
;
return
func
(
test
contacts
=
>
webContactsTest
.
setSelectedContacts
(
contacts
)
)
;
}
description
)
;
}
