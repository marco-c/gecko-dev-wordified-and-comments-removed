function
maybeNavigateForHistory
(
)
{
const
kNavigationLimit
=
5
const
url
=
new
URL
(
location
.
href
)
;
if
(
url
.
searchParams
.
get
(
"
navigationCount
"
)
=
=
null
)
url
.
searchParams
.
append
(
"
navigationCount
"
1
)
;
let
navigationCount
=
parseInt
(
url
.
searchParams
.
get
(
"
navigationCount
"
)
)
;
if
(
navigationCount
<
=
kNavigationLimit
)
{
url
.
searchParams
.
set
(
'
navigationCount
'
+
+
navigationCount
)
;
location
.
href
=
url
;
history
.
pushState
(
{
}
"
"
)
;
return
;
}
}
