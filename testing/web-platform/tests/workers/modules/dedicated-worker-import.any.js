function
import_test
(
testCase
)
{
promise_test
(
async
(
)
=
>
{
const
worker
=
new
Worker
(
testCase
.
scriptURL
{
type
:
'
module
'
}
)
;
const
msgEvent
=
await
new
Promise
(
resolve
=
>
worker
.
onmessage
=
resolve
)
;
assert_array_equals
(
msgEvent
.
data
testCase
.
expectation
)
;
}
testCase
.
description
)
;
}
testCases
.
forEach
(
import_test
)
;
