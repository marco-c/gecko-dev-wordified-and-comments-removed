'
use
strict
'
;
async_test
(
t
=
>
{
const
cookie_set_window
=
window
.
open
(
"
/
workers
/
same
-
site
-
cookies
/
resources
/
set_cookies
.
py
"
)
;
cookie_set_window
.
onload
=
t
.
step_func
(
_
=
>
{
const
worker
=
new
SharedWorker
(
"
/
workers
/
same
-
site
-
cookies
/
resources
/
worker_redirect
.
py
"
)
;
worker
.
port
.
onmessage
=
t
.
step_func
(
e
=
>
{
getCookieNames
(
)
.
then
(
t
.
step_func
(
(
cookies
)
=
>
{
assert_equals
(
e
.
data
+
cookies
"
ReadOnLoad
:
StrictLaxNone
ReadOnFetch
:
StrictLaxNone
SetOnRedirectLoad
:
StrictLaxNone
SetOnLoad
:
StrictLaxNone
SetOnRedirectFetch
:
StrictLaxNone
SetOnFetch
:
StrictLaxNone
"
"
Worker
should
get
/
set
all
cookies
"
)
;
cookie_set_window
.
close
(
)
;
t
.
done
(
)
;
}
)
)
;
}
)
;
}
)
;
}
"
Check
SharedWorker
sameSiteCookies
option
default
for
first
-
party
"
)
;
