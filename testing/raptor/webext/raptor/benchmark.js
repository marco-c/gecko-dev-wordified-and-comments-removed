function
receiveMessage
(
event
)
{
raptorLog
(
"
raptor
benchmark
received
message
"
)
;
raptorLog
(
event
.
data
)
;
if
(
event
.
data
[
0
]
=
=
"
raptor
-
benchmark
"
)
{
sendResult
(
event
.
data
[
1
]
event
.
data
.
slice
(
2
)
)
;
}
}
function
sendResult
(
_type
_value
)
{
raptorLog
(
sending
result
back
to
runner
:
{
_type
}
{
_value
}
)
;
chrome
.
runtime
.
sendMessage
(
{
type
:
_type
value
:
_value
}
function
(
response
)
{
raptorLog
(
response
.
text
)
;
}
)
;
}
function
raptorLog
(
text
level
=
"
info
"
)
{
let
prefix
=
"
"
;
if
(
level
=
=
"
error
"
)
{
prefix
=
"
ERROR
:
"
;
}
console
[
level
]
(
{
prefix
}
[
raptor
-
benchmarkjs
]
{
text
}
)
;
}
raptorLog
(
"
raptor
benchmark
content
loaded
"
)
;
window
.
addEventListener
(
"
message
"
receiveMessage
)
;
