import
time
from
marionette_driver
import
By
from
marionette_driver
.
errors
import
MarionetteException
from
firefox_ui_harness
.
testcases
import
FirefoxTestCase
class
TestUnknownIssuer
(
FirefoxTestCase
)
:
    
def
setUp
(
self
)
:
        
FirefoxTestCase
.
setUp
(
self
)
        
self
.
url
=
'
https
:
/
/
ssl
-
unknownissuer
.
mozqa
.
com
'
    
def
test_unknown_issuer
(
self
)
:
        
with
self
.
marionette
.
using_context
(
'
content
'
)
:
            
self
.
assertRaises
(
MarionetteException
self
.
marionette
.
navigate
self
.
url
)
            
time
.
sleep
(
1
)
            
link
=
self
.
marionette
.
find_element
(
By
.
ID
'
cert_domain_link
'
)
            
self
.
assertEquals
(
link
.
get_attribute
(
'
textContent
'
)
                              
'
ssl
-
selfsigned
-
unknownissuer
.
mozqa
.
com
'
)
            
self
.
assertIsNotNone
(
self
.
marionette
.
find_element
(
By
.
ID
'
returnButton
'
)
)
            
self
.
assertIsNotNone
(
self
.
marionette
.
find_element
(
By
.
ID
'
advancedButton
'
)
)
            
text
=
self
.
marionette
.
find_element
(
By
.
ID
'
technicalContentText
'
)
            
self
.
assertIn
(
'
SEC_ERROR_UNKNOWN_ISSUER
'
text
.
get_attribute
(
'
textContent
'
)
)
