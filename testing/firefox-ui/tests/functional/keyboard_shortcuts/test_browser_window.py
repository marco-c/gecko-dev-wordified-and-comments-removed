from
__future__
import
absolute_import
from
firefox_puppeteer
import
PuppeteerMixin
from
marionette_driver
import
Wait
from
marionette_harness
import
MarionetteTestCase
class
TestBrowserWindowShortcuts
(
PuppeteerMixin
MarionetteTestCase
)
:
    
def
test_addons_manager
(
self
)
:
        
with
self
.
marionette
.
using_context
(
'
content
'
)
:
            
self
.
marionette
.
navigate
(
'
about
:
about
'
)
        
def
opener
(
tab
)
:
            
tab
.
window
.
send_shortcut
(
tab
.
window
.
localize_entity
(
'
addons
.
commandkey
'
)
                                     
accel
=
True
shift
=
True
)
        
self
.
browser
.
tabbar
.
open_tab
(
opener
)
        
self
.
browser
.
tabbar
.
tabs
[
1
]
.
switch_to
(
)
        
self
.
browser
.
tabbar
.
close_tab
(
)
    
def
test_search_field
(
self
)
:
        
current_name
=
self
.
marionette
.
execute_script
(
"
"
"
            
return
window
.
document
.
activeElement
.
localName
;
        
"
"
"
)
        
self
.
assertNotEqual
(
current_name
"
input
"
)
        
if
self
.
marionette
.
session_capabilities
[
'
platformName
'
]
=
=
'
linux
'
:
            
key
=
'
searchFocusUnix
.
commandkey
'
        
else
:
            
key
=
'
searchFocus
.
commandkey
'
        
self
.
browser
.
send_shortcut
(
self
.
browser
.
localize_entity
(
key
)
                                   
accel
=
True
)
        
def
has_input_selected
(
mn
)
:
            
selection_name
=
mn
.
execute_script
(
"
"
"
                
return
window
.
document
.
activeElement
.
localName
;
            
"
"
"
)
            
return
selection_name
=
=
"
input
"
        
Wait
(
self
.
marionette
)
.
until
(
has_input_selected
)
