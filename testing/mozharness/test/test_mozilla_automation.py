import
gc
import
unittest
import
mozharness
.
base
.
log
as
log
import
mozharness
.
base
.
script
as
script
from
mozharness
.
base
.
log
import
ERROR
from
mozharness
.
mozilla
.
automation
import
AutomationMixin
class
CleanupObj
(
script
.
ScriptMixin
log
.
LogMixin
)
:
    
def
__init__
(
self
)
:
        
super
(
CleanupObj
self
)
.
__init__
(
)
        
self
.
log_obj
=
None
        
self
.
config
=
{
"
log_level
"
:
ERROR
}
def
cleanup
(
)
:
    
gc
.
collect
(
)
    
c
=
CleanupObj
(
)
    
for
f
in
(
"
test_logs
"
"
test_dir
"
"
tmpfile_stdout
"
"
tmpfile_stderr
"
)
:
        
c
.
rmtree
(
f
)
class
AutomationScript
(
AutomationMixin
script
.
BaseScript
)
:
    
def
__init__
(
self
*
*
kwargs
)
:
        
super
(
AutomationScript
self
)
.
__init__
(
*
*
kwargs
)
class
TestAutomationStatus
(
unittest
.
TestCase
)
:
    
def
setUp
(
self
)
:
        
cleanup
(
)
        
self
.
s
=
None
    
def
tearDown
(
self
)
:
        
if
hasattr
(
self
"
s
"
)
and
isinstance
(
self
.
s
object
)
:
            
del
self
.
s
        
cleanup
(
)
if
__name__
=
=
"
__main__
"
:
    
unittest
.
main
(
)
