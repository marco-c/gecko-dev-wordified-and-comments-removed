"
use
strict
"
;
const
{
XPCOMUtils
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyGlobalGetters
(
this
[
"
URL
"
]
)
;
this
.
EXPORTED_SYMBOLS
=
[
"
navigate
"
]
;
this
.
navigate
=
{
}
;
navigate
.
isLoadEventExpected
=
function
(
current
future
=
undefined
)
{
if
(
typeof
current
=
=
"
undefined
"
)
{
throw
new
TypeError
(
"
Expected
at
least
one
URL
"
)
;
}
if
(
typeof
future
=
=
"
undefined
"
)
{
return
true
;
}
let
cur
=
new
URL
(
current
)
;
let
fut
=
new
URL
(
future
)
;
if
(
fut
.
protocol
=
=
"
javascript
:
"
)
{
return
false
;
}
if
(
cur
.
href
.
includes
(
"
#
"
)
&
&
fut
.
href
.
includes
(
"
#
"
)
&
&
cur
.
hash
=
=
=
fut
.
hash
)
{
return
false
;
}
return
true
;
}
;
