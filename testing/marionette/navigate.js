"
use
strict
"
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
results
:
Cr
}
=
Components
;
Cu
.
importGlobalProperties
(
[
"
URL
"
]
)
;
this
.
EXPORTED_SYMBOLS
=
[
"
navigate
"
]
;
this
.
navigate
=
{
}
;
navigate
.
isLoadEventExpected
=
function
(
current
future
=
undefined
)
{
if
(
typeof
current
=
=
"
undefined
"
)
{
throw
TypeError
(
"
Expected
at
least
one
URL
"
)
;
}
if
(
typeof
future
=
=
"
undefined
"
)
{
return
true
;
}
let
cur
=
new
navigate
.
IdempotentURL
(
current
)
;
let
fut
=
new
navigate
.
IdempotentURL
(
future
)
;
if
(
fut
.
protocol
=
=
"
javascript
:
"
)
{
return
false
;
}
if
(
cur
.
origin
=
=
fut
.
origin
&
&
cur
.
pathname
=
=
fut
.
pathname
&
&
fut
.
hash
!
=
"
"
)
{
return
false
;
}
return
true
;
}
;
navigate
.
IdempotentURL
=
function
(
o
)
{
let
url
=
new
URL
(
o
)
;
let
hash
=
url
.
hash
;
if
(
hash
=
=
"
"
&
&
url
.
href
[
url
.
href
.
length
-
1
]
=
=
"
#
"
)
{
hash
=
"
#
"
;
}
let
pathname
=
url
.
pathname
;
if
(
url
.
protocol
=
=
"
data
:
"
&
&
hash
!
=
"
"
)
{
pathname
=
pathname
.
substring
(
0
pathname
.
length
-
hash
.
length
)
;
}
return
{
hash
:
hash
host
:
url
.
host
hostname
:
url
.
hostname
href
:
url
.
href
origin
:
url
.
origin
password
:
url
.
password
pathname
:
pathname
port
:
url
.
port
protocol
:
url
.
protocol
search
:
url
.
search
searchParams
:
url
.
searchParams
username
:
url
.
username
}
;
}
;
