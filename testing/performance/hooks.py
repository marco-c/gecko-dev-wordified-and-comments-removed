import
os
from
mozperftest
.
utils
import
add_options
add_option
sites
=
os
.
path
.
join
(
os
.
path
.
dirname
(
__file__
)
"
sites
.
txt
"
)
with
open
(
sites
)
as
f
:
    
sites
=
[
site
for
site
in
f
.
read
(
)
.
split
(
"
\
n
"
)
if
site
.
strip
(
)
]
def
next_site
(
)
:
    
for
site
in
sites
:
        
yield
site
get_site
=
next_site
(
)
options
=
[
    
(
"
firefox
.
preference
"
"
network
.
http
.
speculative
-
parallel
-
limit
:
6
"
)
    
(
"
firefox
.
preference
"
"
gfx
.
webrender
.
force
-
disabled
:
true
"
)
    
(
"
pageCompleteWaitTime
"
"
10000
"
)
    
(
"
visualMetrics
"
"
true
"
)
    
(
"
video
"
"
true
"
)
    
(
"
firefox
.
windowRecorder
"
"
false
"
)
    
(
"
videoParams
.
addTimer
"
"
false
"
)
    
(
"
videoParams
.
createFilmstrip
"
"
false
"
)
    
(
"
videoParams
.
keepOriginalVideo
"
"
true
"
)
]
def
before_cycles
(
metadata
*
*
kw
)
:
    
metadata
.
set_arg
(
"
cycles
"
len
(
sites
)
)
    
add_options
(
metadata
options
)
def
before_cycle
(
metadata
*
*
kw
)
:
    
url
=
next
(
get_site
)
    
add_option
(
metadata
"
browsertime
.
url
"
url
)
