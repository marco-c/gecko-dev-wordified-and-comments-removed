#
ifndef
mozilla_net_CookieServiceParent_h
#
define
mozilla_net_CookieServiceParent_h
#
include
"
mozilla
/
net
/
PCookieServiceParent
.
h
"
class
nsIArray
;
class
nsICookie
;
namespace
mozilla
{
class
OriginAttributes
;
}
namespace
mozilla
{
namespace
net
{
class
Cookie
;
class
CookieService
;
class
CookieServiceParent
:
public
PCookieServiceParent
{
friend
class
PCookieServiceParent
;
public
:
CookieServiceParent
(
)
;
virtual
~
CookieServiceParent
(
)
=
default
;
void
TrackCookieLoad
(
nsIChannel
*
aChannel
)
;
void
RemoveBatchDeletedCookies
(
nsIArray
*
aCookieList
)
;
void
RemoveAll
(
)
;
void
RemoveCookie
(
nsICookie
*
aCookie
)
;
void
AddCookie
(
nsICookie
*
aCookie
)
;
bool
ProcessingCookie
(
)
{
return
mProcessingCookie
;
}
protected
:
virtual
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvSetCookies
(
const
nsCString
&
aBaseDomain
const
OriginAttributes
&
aOriginAttributes
nsIURI
*
aHost
bool
aFromHttp
const
nsTArray
<
CookieStruct
>
&
aCookies
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPrepareCookieList
(
nsIURI
*
aHost
const
bool
&
aIsForeign
const
bool
&
aIsThirdPartyTrackingResource
const
bool
&
aIsThirdPartySocialTrackingResource
const
bool
&
aStorageAccessPermissionGranted
const
uint32_t
&
aRejectedReason
const
bool
&
aIsSafeTopLevelNav
const
bool
&
aIsSameSiteForeign
const
bool
&
aHadCrossSiteRedirects
const
OriginAttributes
&
aAttrs
)
;
static
void
SerialializeCookieList
(
const
nsTArray
<
Cookie
*
>
&
aFoundCookieList
nsTArray
<
CookieStruct
>
&
aCookiesList
)
;
RefPtr
<
CookieService
>
mCookieService
;
bool
mProcessingCookie
;
}
;
}
}
#
endif
