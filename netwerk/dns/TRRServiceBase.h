#
ifndef
TRRServiceBase_h_
#
define
TRRServiceBase_h_
#
include
"
mozilla
/
Atomics
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsIDNSService
.
h
"
namespace
mozilla
{
namespace
net
{
static
const
char
kRolloutURIPref
[
]
=
"
doh
-
rollout
.
uri
"
;
static
const
char
kRolloutModePref
[
]
=
"
doh
-
rollout
.
mode
"
;
class
TRRServiceBase
{
public
:
TRRServiceBase
(
)
;
nsIDNSService
:
:
ResolverMode
Mode
(
)
{
return
mMode
;
}
protected
:
~
TRRServiceBase
(
)
=
default
;
virtual
bool
MaybeSetPrivateURI
(
const
nsACString
&
aURI
)
=
0
;
void
ProcessURITemplate
(
nsACString
&
aURI
)
;
void
CheckURIPrefs
(
)
;
void
OnTRRModeChange
(
)
;
void
OnTRRURIChange
(
)
;
virtual
void
ReadEtcHostsFile
(
)
{
}
nsCString
mPrivateURI
;
nsCString
mURIPref
;
nsCString
mRolloutURIPref
;
nsCString
mDefaultURIPref
;
Atomic
<
nsIDNSService
:
:
ResolverMode
Relaxed
>
mMode
;
Atomic
<
bool
Relaxed
>
mURISetByDetection
;
}
;
}
}
#
endif
