#
ifndef
ExtensionProtocolHandler_h___
#
define
ExtensionProtocolHandler_h___
#
include
"
SubstitutingProtocolHandler
.
h
"
#
include
"
nsWeakReference
.
h
"
namespace
mozilla
{
namespace
net
{
class
ExtensionProtocolHandler
final
:
public
nsISubstitutingProtocolHandler
public
nsIProtocolHandlerWithDynamicFlags
public
SubstitutingProtocolHandler
public
nsSupportsWeakReference
{
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_NSIPROTOCOLHANDLERWITHDYNAMICFLAGS
NS_FORWARD_NSIPROTOCOLHANDLER
(
SubstitutingProtocolHandler
:
:
)
NS_FORWARD_NSISUBSTITUTINGPROTOCOLHANDLER
(
SubstitutingProtocolHandler
:
:
)
ExtensionProtocolHandler
(
)
:
SubstitutingProtocolHandler
(
"
moz
-
extension
"
)
{
}
protected
:
~
ExtensionProtocolHandler
(
)
{
}
bool
ResolveSpecialCases
(
const
nsACString
&
aHost
const
nsACString
&
aPath
nsACString
&
aResult
)
override
{
if
(
SubstitutingProtocolHandler
:
:
HasSubstitution
(
aHost
)
&
&
aPath
.
EqualsLiteral
(
"
/
_blank
.
html
"
)
)
{
aResult
.
AssignLiteral
(
"
about
:
blank
"
)
;
return
true
;
}
return
false
;
}
virtual
nsresult
SubstituteChannel
(
nsIURI
*
uri
nsILoadInfo
*
aLoadInfo
nsIChannel
*
*
result
)
override
;
}
;
}
}
#
endif
