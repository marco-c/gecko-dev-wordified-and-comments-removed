"
use
strict
"
;
function
WellKnownOpportunisticUtils
(
)
{
this
.
valid
=
false
;
this
.
mixed
=
false
;
this
.
lifetime
=
0
;
}
WellKnownOpportunisticUtils
.
prototype
=
{
QueryInterface
:
ChromeUtils
.
generateQI
(
[
Ci
.
nsIWellKnownOpportunisticUtils
]
)
verify
(
aJSON
aOrigin
aAlternatePort
)
{
try
{
let
obj
=
JSON
.
parse
(
aJSON
.
toLowerCase
(
)
)
;
let
ports
=
obj
[
aOrigin
.
toLowerCase
(
)
]
[
"
tls
-
ports
"
]
;
if
(
!
ports
.
includes
(
aAlternatePort
)
)
{
throw
"
invalid
port
"
;
}
this
.
lifetime
=
obj
[
aOrigin
.
toLowerCase
(
)
]
.
lifetime
;
this
.
mixed
=
obj
[
aOrigin
.
toLowerCase
(
)
]
[
"
mixed
-
scheme
"
]
;
}
catch
(
e
)
{
return
;
}
this
.
valid
=
true
;
}
}
;
var
EXPORTED_SYMBOLS
=
[
"
WellKnownOpportunisticUtils
"
]
;
