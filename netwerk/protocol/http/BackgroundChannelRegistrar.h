#
ifndef
mozilla_net_BackgroundChannelRegistrar_h__
#
define
mozilla_net_BackgroundChannelRegistrar_h__
#
include
"
nsIBackgroundChannelRegistrar
.
h
"
#
include
"
nsRefPtrHashtable
.
h
"
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
namespace
mozilla
{
namespace
net
{
class
HttpBackgroundChannelParent
;
class
HttpChannelParent
;
class
BackgroundChannelRegistrar
final
:
public
nsIBackgroundChannelRegistrar
{
typedef
nsRefPtrHashtable
<
nsUint64HashKey
HttpChannelParent
>
ChannelHashtable
;
typedef
nsRefPtrHashtable
<
nsUint64HashKey
HttpBackgroundChannelParent
>
BackgroundChannelHashtable
;
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIBACKGROUNDCHANNELREGISTRAR
explicit
BackgroundChannelRegistrar
(
)
;
static
already_AddRefed
<
nsIBackgroundChannelRegistrar
>
GetOrCreate
(
)
;
static
void
Shutdown
(
)
;
private
:
virtual
~
BackgroundChannelRegistrar
(
)
;
void
NotifyChannelLinked
(
HttpChannelParent
*
aChannelParent
HttpBackgroundChannelParent
*
aBgParent
)
;
ChannelHashtable
mChannels
;
BackgroundChannelHashtable
mBgChannels
;
}
;
}
}
#
endif
