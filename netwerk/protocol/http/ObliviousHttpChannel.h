#
ifndef
mozilla_net_ObliviousHttpChannel_h
#
define
mozilla_net_ObliviousHttpChannel_h
#
include
"
nsIBinaryHttp
.
h
"
#
include
"
nsIHttpChannel
.
h
"
#
include
"
nsIObliviousHttp
.
h
"
#
include
"
nsIStreamListener
.
h
"
#
include
"
nsIUploadChannel2
.
h
"
#
include
"
nsTHashMap
.
h
"
namespace
mozilla
:
:
net
{
class
ObliviousHttpChannel
final
:
public
nsIHttpChannel
public
nsIStreamListener
public
nsIUploadChannel2
{
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSICHANNEL
NS_DECL_NSIHTTPCHANNEL
NS_DECL_NSIREQUESTOBSERVER
NS_DECL_NSISTREAMLISTENER
NS_DECL_NSIUPLOADCHANNEL2
ObliviousHttpChannel
(
nsIURI
*
targetURI
const
nsTArray
<
uint8_t
>
&
encodedConfig
nsIHttpChannel
*
innerChannel
)
;
NS_FORWARD_NSIREQUEST
(
mInnerChannel
-
>
)
NS_FORWARD_NSIIDENTCHANNEL
(
mInnerChannel
-
>
)
protected
:
~
ObliviousHttpChannel
(
)
;
nsCOMPtr
<
nsIURI
>
mTargetURI
;
nsTArray
<
uint8_t
>
mEncodedConfig
;
nsCString
mMethod
{
"
GET
"
_ns
}
;
nsTHashMap
<
nsCStringHashKey
nsCString
>
mHeaders
;
nsTArray
<
uint8_t
>
mContent
;
nsCOMPtr
<
nsIHttpChannel
>
mInnerChannel
;
nsCOMPtr
<
nsIObliviousHttpClientRequest
>
mEncapsulatedRequest
;
nsTArray
<
uint8_t
>
mRawResponse
;
nsCOMPtr
<
nsIBinaryHttpResponse
>
mBinaryHttpResponse
;
nsCOMPtr
<
nsIStreamListener
>
mStreamListener
;
}
;
}
#
endif
