#
ifndef
nsAboutProtocolHandler_h___
#
define
nsAboutProtocolHandler_h___
#
include
"
nsIProtocolHandler
.
h
"
#
include
"
nsSimpleNestedURI
.
h
"
#
include
"
nsWeakReference
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
nsIURIMutator
.
h
"
class
nsIURI
;
namespace
mozilla
{
namespace
net
{
class
nsAboutProtocolHandler
:
public
nsIProtocolHandlerWithDynamicFlags
public
nsIProtocolHandler
public
nsSupportsWeakReference
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIPROTOCOLHANDLER
NS_DECL_NSIPROTOCOLHANDLERWITHDYNAMICFLAGS
nsAboutProtocolHandler
(
)
{
}
private
:
virtual
~
nsAboutProtocolHandler
(
)
{
}
}
;
class
nsSafeAboutProtocolHandler
final
:
public
nsIProtocolHandler
public
nsSupportsWeakReference
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIPROTOCOLHANDLER
nsSafeAboutProtocolHandler
(
)
{
}
private
:
~
nsSafeAboutProtocolHandler
(
)
{
}
}
;
class
nsNestedAboutURI
:
public
nsSimpleNestedURI
{
public
:
nsNestedAboutURI
(
nsIURI
*
aInnerURI
nsIURI
*
aBaseURI
)
:
nsSimpleNestedURI
(
aInnerURI
)
mBaseURI
(
aBaseURI
)
{
}
nsNestedAboutURI
(
)
:
nsSimpleNestedURI
(
)
{
}
virtual
~
nsNestedAboutURI
(
)
{
}
NS_IMETHOD
QueryInterface
(
REFNSIID
aIID
void
*
*
aInstancePtr
)
override
;
virtual
nsSimpleURI
*
StartClone
(
RefHandlingEnum
aRefHandlingMode
const
nsACString
&
newRef
)
override
;
NS_IMETHOD
Mutate
(
nsIURIMutator
*
*
_retval
)
override
;
NS_IMETHOD
Read
(
nsIObjectInputStream
*
aStream
)
override
;
NS_IMETHOD
Write
(
nsIObjectOutputStream
*
aStream
)
override
;
NS_IMETHOD
GetClassIDNoAlloc
(
nsCID
*
aClassIDNoAlloc
)
override
;
nsIURI
*
GetBaseURI
(
)
const
{
return
mBaseURI
;
}
protected
:
nsCOMPtr
<
nsIURI
>
mBaseURI
;
public
:
class
Mutator
:
public
nsIURIMutator
public
BaseURIMutator
<
nsNestedAboutURI
>
{
NS_DECL_ISUPPORTS
NS_FORWARD_SAFE_NSIURISETTERS_RET
(
mURI
)
NS_DEFINE_NSIMUTATOR_COMMON
explicit
Mutator
(
)
{
}
private
:
virtual
~
Mutator
(
)
{
}
friend
class
nsNestedAboutURI
;
}
;
}
;
}
}
#
endif
