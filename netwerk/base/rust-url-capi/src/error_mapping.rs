use
url
:
:
ParseError
;
pub
trait
ErrorCode
{
fn
error_code
(
&
self
)
-
>
i32
;
}
impl
<
T
:
ErrorCode
>
ErrorCode
for
Result
<
(
)
T
>
{
fn
error_code
(
&
self
)
-
>
i32
{
match
*
self
{
Ok
(
_
)
=
>
0
Err
(
ref
error
)
=
>
error
.
error_code
(
)
}
}
}
impl
ErrorCode
for
(
)
{
fn
error_code
(
&
self
)
-
>
i32
{
return
-
1
;
}
}
impl
ErrorCode
for
ParseError
{
fn
error_code
(
&
self
)
-
>
i32
{
return
-
1
;
}
}
pub
enum
NSError
{
OK
InvalidArg
Failure
}
impl
ErrorCode
for
NSError
{
#
[
allow
(
overflowing_literals
)
]
fn
error_code
(
&
self
)
-
>
i32
{
match
*
self
{
NSError
:
:
OK
=
>
0
NSError
:
:
InvalidArg
=
>
0x80070057
NSError
:
:
Failure
=
>
0x80004005
}
}
}
