#
ifndef
nsStreamListenerWrapper_h__
#
define
nsStreamListenerWrapper_h__
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIStreamListener
.
h
"
#
include
"
nsIRequestObserver
.
h
"
#
include
"
nsIThreadRetargetableStreamListener
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
class
nsStreamListenerWrapper
final
:
public
nsIStreamListener
public
nsIThreadRetargetableStreamListener
{
public
:
explicit
nsStreamListenerWrapper
(
nsIStreamListener
*
listener
)
:
mListener
(
listener
)
{
NS_ASSERTION
(
mListener
"
no
stream
listener
specified
"
)
;
}
NS_DECL_ISUPPORTS
NS_FORWARD_NSISTREAMLISTENER
(
mListener
-
>
)
NS_DECL_NSITHREADRETARGETABLESTREAMLISTENER
NS_IMETHOD
OnStartRequest
(
nsIRequest
*
aRequest
nsISupports
*
aContext
)
override
{
return
mListener
-
>
OnStartRequest
(
aRequest
aContext
)
;
}
NS_IMETHOD
OnStopRequest
(
nsIRequest
*
aRequest
nsISupports
*
aContext
nsresult
aStatusCode
)
override
{
nsresult
rv
=
mListener
-
>
OnStopRequest
(
aRequest
aContext
aStatusCode
)
;
mListener
=
nullptr
;
return
rv
;
}
private
:
~
nsStreamListenerWrapper
(
)
{
}
nsCOMPtr
<
nsIStreamListener
>
mListener
;
}
;
#
endif
