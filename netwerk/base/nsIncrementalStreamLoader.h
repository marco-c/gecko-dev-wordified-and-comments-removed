#
ifndef
nsIncrementalStreamLoader_h__
#
define
nsIncrementalStreamLoader_h__
#
include
"
nsIThreadRetargetableStreamListener
.
h
"
#
include
"
nsIIncrementalStreamLoader
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Vector
.
h
"
class
nsIRequest
;
class
nsIncrementalStreamLoader
final
:
public
nsIIncrementalStreamLoader
public
nsIThreadRetargetableStreamListener
{
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIINCREMENTALSTREAMLOADER
NS_DECL_NSIREQUESTOBSERVER
NS_DECL_NSISTREAMLISTENER
NS_DECL_NSITHREADRETARGETABLESTREAMLISTENER
nsIncrementalStreamLoader
(
)
;
static
nsresult
Create
(
nsISupports
*
aOuter
REFNSIID
aIID
void
*
*
aResult
)
;
protected
:
~
nsIncrementalStreamLoader
(
)
=
default
;
static
nsresult
WriteSegmentFun
(
nsIInputStream
*
void
*
const
char
*
uint32_t
uint32_t
uint32_t
*
)
;
void
ReleaseData
(
)
;
nsCOMPtr
<
nsIIncrementalStreamLoaderObserver
>
mObserver
;
nsCOMPtr
<
nsISupports
>
mContext
;
nsCOMPtr
<
nsIRequest
>
mRequest
;
mozilla
:
:
Vector
<
uint8_t
0
>
mData
;
mozilla
:
:
Atomic
<
uint32_t
mozilla
:
:
MemoryOrdering
:
:
Relaxed
>
mBytesRead
;
}
;
#
endif
