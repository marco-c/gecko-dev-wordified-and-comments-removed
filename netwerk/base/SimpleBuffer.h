#
ifndef
SimpleBuffer_h__
#
define
SimpleBuffer_h__
#
include
"
prtypes
.
h
"
#
include
"
mozilla
/
LinkedList
.
h
"
#
include
"
nsIThreadInternal
.
h
"
namespace
mozilla
{
namespace
net
{
class
SimpleBufferPage
:
public
LinkedListElement
<
SimpleBufferPage
>
{
public
:
SimpleBufferPage
(
)
:
mReadOffset
(
0
)
mWriteOffset
(
0
)
{
}
static
const
size_t
kSimpleBufferPageSize
=
32000
;
private
:
friend
class
SimpleBuffer
;
char
mBuffer
[
kSimpleBufferPageSize
]
;
size_t
mReadOffset
;
size_t
mWriteOffset
;
}
;
class
SimpleBuffer
{
public
:
SimpleBuffer
(
)
;
~
SimpleBuffer
(
)
{
}
nsresult
Write
(
char
*
stc
size_t
len
)
;
size_t
Read
(
char
*
dest
size_t
maxLen
)
;
size_t
Available
(
)
;
void
Clear
(
)
;
private
:
PRThread
*
mOwningThread
;
nsresult
mStatus
;
AutoCleanLinkedList
<
SimpleBufferPage
>
mBufferList
;
size_t
mAvailable
;
}
;
}
}
#
endif
