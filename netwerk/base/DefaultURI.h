#
ifndef
DefaultURI_h__
#
define
DefaultURI_h__
#
include
"
nsIURI
.
h
"
#
include
"
nsISerializable
.
h
"
#
include
"
nsIURIMutator
.
h
"
#
include
"
mozilla
/
net
/
MozURL
.
h
"
namespace
mozilla
{
namespace
net
{
class
DefaultURI
:
public
nsIURI
public
nsISerializable
{
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIURI
NS_DECL_NSISERIALIZABLE
class
Mutator
final
:
public
nsIURIMutator
public
nsISerializable
{
NS_DECL_ISUPPORTS
NS_DECL_NSIURISETSPEC
NS_DECL_NSIURISETTERS
NS_DECL_NSIURIMUTATOR
NS_IMETHOD
Write
(
nsIObjectOutputStream
*
aOutputStream
)
override
{
MOZ_ASSERT_UNREACHABLE
(
"
nsIURIMutator
.
write
(
)
should
never
be
called
"
)
;
return
NS_ERROR_NOT_IMPLEMENTED
;
}
[
[
nodiscard
]
]
NS_IMETHOD
Read
(
nsIObjectInputStream
*
aStream
)
override
;
explicit
Mutator
(
)
=
default
;
private
:
virtual
~
Mutator
(
)
=
default
;
void
Init
(
DefaultURI
*
aFrom
)
{
mMutator
=
Some
(
aFrom
-
>
mURL
-
>
Mutate
(
)
)
;
}
Maybe
<
MozURL
:
:
Mutator
>
mMutator
;
friend
class
DefaultURI
;
}
;
private
:
virtual
~
DefaultURI
(
)
=
default
;
RefPtr
<
MozURL
>
mURL
;
}
;
}
}
#
endif
