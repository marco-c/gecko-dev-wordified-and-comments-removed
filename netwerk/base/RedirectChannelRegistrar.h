#
ifndef
RedirectChannelRegistrar_h__
#
define
RedirectChannelRegistrar_h__
#
include
"
nsIRedirectChannelRegistrar
.
h
"
#
include
"
nsIChannel
.
h
"
#
include
"
nsIParentChannel
.
h
"
#
include
"
nsInterfaceHashtable
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Mutex
.
h
"
namespace
mozilla
{
namespace
net
{
class
RedirectChannelRegistrar
final
:
public
nsIRedirectChannelRegistrar
{
NS_DECL_ISUPPORTS
NS_DECL_NSIREDIRECTCHANNELREGISTRAR
RedirectChannelRegistrar
(
)
;
private
:
~
RedirectChannelRegistrar
(
)
=
default
;
public
:
static
already_AddRefed
<
nsIRedirectChannelRegistrar
>
GetOrCreate
(
)
;
static
void
Shutdown
(
)
;
protected
:
typedef
nsInterfaceHashtable
<
nsUint32HashKey
nsIChannel
>
ChannelHashtable
;
typedef
nsInterfaceHashtable
<
nsUint32HashKey
nsIParentChannel
>
ParentChannelHashtable
;
ChannelHashtable
mRealChannels
;
ParentChannelHashtable
mParentChannels
;
uint32_t
mId
;
Mutex
mLock
;
static
StaticRefPtr
<
RedirectChannelRegistrar
>
gSingleton
;
}
;
}
}
#
endif
