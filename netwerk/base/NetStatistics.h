#
ifndef
NetStatistics_h__
#
define
NetStatistics_h__
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsError
.
h
"
#
include
"
nsINetworkInterface
.
h
"
#
include
"
nsINetworkManager
.
h
"
#
include
"
nsThreadUtils
.
h
"
#
include
"
nsProxyRelease
.
h
"
namespace
mozilla
{
namespace
net
{
const
static
uint64_t
NETWORK_STATS_THRESHOLD
=
65536
;
const
static
char
NETWORK_STATS_NO_SERVICE_TYPE
[
]
=
"
"
;
inline
nsresult
GetActiveNetworkInfo
(
nsCOMPtr
<
nsINetworkInfo
>
&
aNetworkInfo
)
{
MOZ_ASSERT
(
NS_IsMainThread
(
)
)
;
nsresult
rv
;
nsCOMPtr
<
nsINetworkManager
>
networkManager
=
do_GetService
(
"
mozilla
.
org
/
network
/
manager
;
1
"
&
rv
)
;
if
(
NS_FAILED
(
rv
)
|
|
!
networkManager
)
{
aNetworkInfo
=
nullptr
;
return
rv
;
}
networkManager
-
>
GetActiveNetworkInfo
(
getter_AddRefs
(
aNetworkInfo
)
)
;
return
NS_OK
;
}
}
}
#
endif
