#
ifndef
PollableEvent_h__
#
define
PollableEvent_h__
#
include
"
mozilla
/
Mutex
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
prio
.
h
"
namespace
mozilla
{
namespace
net
{
class
PollableEvent
{
public
:
PollableEvent
(
)
;
~
PollableEvent
(
)
;
bool
Signal
(
)
;
bool
Clear
(
)
;
bool
Valid
(
)
{
return
mWriteFD
&
&
mReadFD
;
}
void
MarkFirstSignalTimestamp
(
)
;
void
AdjustFirstSignalTimestamp
(
)
;
bool
IsSignallingAlive
(
TimeDuration
const
&
timeout
)
;
PRFileDesc
*
PollableFD
(
)
{
return
mReadFD
;
}
static
const
PRInt16
sPollFlags
;
private
:
PRFileDesc
*
mWriteFD
;
PRFileDesc
*
mReadFD
;
bool
mSignaled
;
bool
mWriteFailed
;
bool
mSignalTimestampAdjusted
;
TimeStamp
mFirstSignalAfterClear
;
}
;
}
}
#
endif
