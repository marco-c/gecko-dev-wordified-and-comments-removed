#
ifndef
PollableEvent_h__
#
define
PollableEvent_h__
#
include
"
mozilla
/
Mutex
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
struct
PRFileDesc
;
namespace
mozilla
{
namespace
net
{
class
PollableEvent
{
public
:
PollableEvent
(
)
;
~
PollableEvent
(
)
;
bool
Signal
(
)
;
bool
Clear
(
)
;
bool
Valid
(
)
{
return
mWriteFD
&
&
mReadFD
;
}
void
MarkFirstSignalTimestamp
(
)
;
void
AdjustFirstSignalTimestamp
(
)
;
bool
IsSignallingAlive
(
TimeDuration
const
&
timeout
)
;
PRFileDesc
*
PollableFD
(
)
{
return
mReadFD
;
}
private
:
PRFileDesc
*
mWriteFD
{
nullptr
}
;
PRFileDesc
*
mReadFD
{
nullptr
}
;
bool
mSignaled
{
false
}
;
bool
mWriteFailed
{
false
}
;
bool
mSignalTimestampAdjusted
{
false
}
;
TimeStamp
mFirstSignalAfterClear
;
}
;
}
}
#
endif
