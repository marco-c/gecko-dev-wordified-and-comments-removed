#
include
"
mozilla
/
ClearOnShutdown
.
h
"
#
include
"
mozilla
/
StaticPtr
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
SFVService
.
h
"
namespace
{
extern
"
C
"
{
void
new_sfv_service
(
nsISFVService
*
*
result
)
;
}
static
mozilla
:
:
StaticRefPtr
<
nsISFVService
>
sService
;
}
namespace
mozilla
:
:
net
{
already_AddRefed
<
nsISFVService
>
GetSFVService
(
)
{
nsCOMPtr
<
nsISFVService
>
service
;
if
(
sService
)
{
service
=
sService
;
}
else
{
new_sfv_service
(
getter_AddRefs
(
service
)
)
;
sService
=
service
;
mozilla
:
:
ClearOnShutdown
(
&
sService
)
;
}
return
service
.
forget
(
)
;
}
}
