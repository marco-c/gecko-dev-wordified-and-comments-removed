"
use
strict
"
;
Services
.
prefs
.
setBoolPref
(
"
network
.
early
-
hints
.
enabled
"
true
)
;
const
{
lax_request_count_checking
test_hint_preload_internal
test_hint_preload
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
testing
-
common
/
early_hint_preload_test_helper
.
jsm
"
)
;
add_task
(
async
function
test_103_error_400
(
)
{
await
test_hint_preload
(
"
test_103_error_400
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
400
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_401
(
)
{
await
test_hint_preload
(
"
test_103_error_401
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
401
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_403
(
)
{
await
test_hint_preload
(
"
test_103_error_403
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
403
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_404
(
)
{
await
test_hint_preload
(
"
test_103_error_404
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
404
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_408
(
)
{
await
test_hint_preload
(
"
test_103_error_408
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
408
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_410
(
)
{
await
test_hint_preload
(
"
test_103_error_410
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
410
"
{
hinted
:
1
normal
:
0
}
)
;
}
)
;
add_task
(
async
function
test_103_error_429
(
)
{
await
test_hint_preload
(
"
test_103_error_429
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
429
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_500
(
)
{
await
test_hint_preload
(
"
test_103_error_500
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
500
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_502
(
)
{
await
test_hint_preload
(
"
test_103_error_502
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
502
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_503
(
)
{
await
test_hint_preload
(
"
test_103_error_503
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
503
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
add_task
(
async
function
test_103_error_504
(
)
{
await
test_hint_preload
(
"
test_103_error_504
"
"
https
:
/
/
example
.
com
"
"
https
:
/
/
example
.
com
/
browser
/
netwerk
/
test
/
browser
/
early_hint_error
.
sjs
?
504
"
{
hinted
:
1
normal
:
1
}
)
;
}
)
;
