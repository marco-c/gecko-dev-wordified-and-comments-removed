"
use
strict
"
;
var
idnService
;
function
expected_pass
(
inputIDN
)
{
var
isASCII
=
{
}
;
var
displayIDN
=
idnService
.
convertToDisplayIDN
(
inputIDN
isASCII
)
;
Assert
.
equal
(
displayIDN
inputIDN
)
;
}
function
expected_fail
(
inputIDN
)
{
var
isASCII
=
{
}
;
var
displayIDN
=
"
"
;
try
{
displayIDN
=
idnService
.
convertToDisplayIDN
(
inputIDN
isASCII
)
;
}
catch
(
e
)
{
}
Assert
.
notEqual
(
displayIDN
inputIDN
)
;
}
function
run_test
(
)
{
idnService
=
Cc
[
"
mozilla
.
org
/
network
/
idn
-
service
;
1
"
]
.
getService
(
Ci
.
nsIIDNService
)
;
expected_pass
(
"
foo
\
u0101bar
.
com
"
)
;
expected_fail
(
"
xn
-
-
foobar
-
5za
.
com
"
)
;
expected_fail
(
"
foo
\
u3040bar
.
com
"
)
;
expected_pass
(
"
xn
-
-
foobar
-
533e
.
com
"
)
;
expected_fail
(
"
foo
\
u0370bar
.
com
"
)
;
}
