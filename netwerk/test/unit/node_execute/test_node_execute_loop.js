"
use
strict
"
;
const
{
NodeServer
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
testing
-
common
/
NodeServer
.
sys
.
mjs
"
)
;
add_task
(
async
function
killOnEnd
(
)
{
let
id
=
await
NodeServer
.
fork
(
)
;
await
NodeServer
.
execute
(
id
console
.
log
(
"
hello
"
)
;
)
;
await
NodeServer
.
execute
(
id
console
.
error
(
"
hello
"
)
;
)
;
NodeServer
.
execute
(
id
"
while
(
true
)
{
}
"
)
.
catch
(
(
)
=
>
{
}
)
;
await
new
Promise
(
resolve
=
>
do_timeout
(
10
resolve
)
)
;
}
)
;
