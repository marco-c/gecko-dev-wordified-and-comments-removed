async
function
test
(
context
commands
)
{
let
rootUrl
=
"
https
:
/
/
blog
.
cloudflare
.
com
/
"
;
let
waitTime
=
1000
;
if
(
(
typeof
context
.
options
.
browsertime
!
=
=
"
undefined
"
)
&
(
typeof
context
.
options
.
browsertime
.
waitTime
!
=
=
"
undefined
"
)
)
{
waitTime
=
context
.
options
.
browsertime
.
waitTime
;
}
await
commands
.
navigate
(
rootUrl
)
;
let
cycles
=
1
;
for
(
let
cycle
=
0
;
cycle
<
cycles
;
cycle
+
+
)
{
await
commands
.
measure
.
start
(
"
pageload
"
)
;
await
commands
.
navigate
(
rootUrl
)
;
await
commands
.
measure
.
stop
(
)
;
commands
.
measure
.
result
[
0
]
.
browserScripts
.
pageinfo
.
url
=
"
Cloudflare
Blog
-
Main
"
;
await
commands
.
wait
.
byTime
(
waitTime
)
;
await
commands
.
measure
.
start
(
"
pageload
"
)
;
await
commands
.
click
.
byJsAndWait
(
document
.
querySelectorAll
(
"
article
"
)
[
0
]
.
querySelector
(
"
a
"
)
)
;
await
commands
.
measure
.
stop
(
)
;
commands
.
measure
.
result
[
1
]
.
browserScripts
.
pageinfo
.
url
=
"
Cloudflare
Blog
-
Article
"
;
}
}
module
.
exports
=
{
test
owner
:
"
Network
Team
"
name
:
"
cloudflare
"
component
:
"
netwerk
"
description
:
"
User
-
journey
live
site
test
for
cloudflare
blog
.
"
}
;
