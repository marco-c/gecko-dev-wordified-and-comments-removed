#
ifndef
mozilla_net_SocketProcessBackgroundChild_h
#
define
mozilla_net_SocketProcessBackgroundChild_h
#
include
"
mozilla
/
MoveOnlyFunction
.
h
"
#
include
"
mozilla
/
net
/
PSocketProcessBackgroundChild
.
h
"
#
include
"
mozilla
/
StaticMutex
.
h
"
#
include
"
mozilla
/
StaticPtr
.
h
"
namespace
mozilla
{
namespace
net
{
class
SocketProcessBackgroundChild
final
:
public
PSocketProcessBackgroundChild
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
SocketProcessBackgroundChild
final
)
static
void
Create
(
ipc
:
:
Endpoint
<
PSocketProcessBackgroundChild
>
&
&
aEndpoint
)
;
static
void
Shutdown
(
)
;
static
nsresult
WithActor
(
const
char
*
aName
MoveOnlyFunction
<
void
(
SocketProcessBackgroundChild
*
)
>
aCallback
)
;
private
:
SocketProcessBackgroundChild
(
)
;
virtual
~
SocketProcessBackgroundChild
(
)
;
static
RefPtr
<
SocketProcessBackgroundChild
>
GetSingleton
(
)
;
static
already_AddRefed
<
nsISerialEventTarget
>
TaskQueue
(
)
;
static
StaticMutex
sMutex
;
static
StaticRefPtr
<
SocketProcessBackgroundChild
>
sInstance
MOZ_GUARDED_BY
(
sMutex
)
;
static
StaticRefPtr
<
nsISerialEventTarget
>
sTaskQueue
MOZ_GUARDED_BY
(
sMutex
)
;
}
;
}
}
#
endif
