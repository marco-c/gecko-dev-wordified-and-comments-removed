#
include
"
mozilla
/
BasePrincipal
.
h
"
#
include
"
mozilla
/
net
/
PNeckoParent
.
h
"
#
include
"
mozilla
/
net
/
NeckoCommon
.
h
"
#
include
"
nsIAuthPrompt2
.
h
"
#
include
"
nsINetworkPredictor
.
h
"
#
include
"
nsNetUtil
.
h
"
#
ifndef
mozilla_net_NeckoParent_h
#
define
mozilla_net_NeckoParent_h
namespace
mozilla
{
namespace
net
{
enum
PBOverrideStatus
{
kPBOverride_Unset
=
0
kPBOverride_Private
kPBOverride_NotPrivate
}
;
class
NeckoParent
:
public
PNeckoParent
{
friend
class
PNeckoParent
;
public
:
NeckoParent
(
)
;
virtual
~
NeckoParent
(
)
=
default
;
MOZ_MUST_USE
static
const
char
*
GetValidatedOriginAttributes
(
const
SerializedLoadContext
&
aSerialized
PContentParent
*
aBrowser
nsIPrincipal
*
aRequestingPrincipal
mozilla
:
:
OriginAttributes
&
aAttrs
)
;
MOZ_MUST_USE
static
const
char
*
CreateChannelLoadContext
(
const
PBrowserOrId
&
aBrowser
PContentParent
*
aContent
const
SerializedLoadContext
&
aSerialized
nsIPrincipal
*
aRequestingPrincipal
nsCOMPtr
<
nsILoadContext
>
&
aResult
)
;
virtual
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
PCookieServiceParent
*
AllocPCookieServiceParent
(
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPCookieServiceConstructor
(
PCookieServiceParent
*
aActor
)
override
{
return
PNeckoParent
:
:
RecvPCookieServiceConstructor
(
aActor
)
;
}
class
NestedFrameAuthPrompt
final
:
public
nsIAuthPrompt2
{
~
NestedFrameAuthPrompt
(
)
{
}
public
:
NS_DECL_ISUPPORTS
NestedFrameAuthPrompt
(
PNeckoParent
*
aParent
TabId
aNestedFrameId
)
;
NS_IMETHOD
PromptAuth
(
nsIChannel
*
uint32_t
nsIAuthInformation
*
bool
*
)
override
{
return
NS_ERROR_NOT_IMPLEMENTED
;
}
NS_IMETHOD
AsyncPromptAuth
(
nsIChannel
*
aChannel
nsIAuthPromptCallback
*
callback
nsISupports
*
uint32_t
nsIAuthInformation
*
aInfo
nsICancelable
*
*
)
override
;
protected
:
PNeckoParent
*
mNeckoParent
;
TabId
mNestedFrameId
;
}
;
protected
:
bool
mSocketProcessBridgeInited
;
PHttpChannelParent
*
AllocPHttpChannelParent
(
const
PBrowserOrId
&
const
SerializedLoadContext
&
const
HttpChannelCreationArgs
&
aOpenArgs
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPHttpChannelConstructor
(
PHttpChannelParent
*
aActor
const
PBrowserOrId
&
aBrowser
const
SerializedLoadContext
&
aSerialized
const
HttpChannelCreationArgs
&
aOpenArgs
)
override
;
bool
DeallocPHttpChannelParent
(
PHttpChannelParent
*
)
;
PStunAddrsRequestParent
*
AllocPStunAddrsRequestParent
(
)
;
bool
DeallocPStunAddrsRequestParent
(
PStunAddrsRequestParent
*
aActor
)
;
PWebrtcProxyChannelParent
*
AllocPWebrtcProxyChannelParent
(
const
PBrowserOrId
&
aBrowser
)
;
bool
DeallocPWebrtcProxyChannelParent
(
PWebrtcProxyChannelParent
*
aActor
)
;
PAltDataOutputStreamParent
*
AllocPAltDataOutputStreamParent
(
const
nsCString
&
type
const
int64_t
&
predictedSize
PHttpChannelParent
*
channel
)
;
bool
DeallocPAltDataOutputStreamParent
(
PAltDataOutputStreamParent
*
aActor
)
;
bool
DeallocPCookieServiceParent
(
PCookieServiceParent
*
)
;
PWyciwygChannelParent
*
AllocPWyciwygChannelParent
(
)
;
bool
DeallocPWyciwygChannelParent
(
PWyciwygChannelParent
*
)
;
PFTPChannelParent
*
AllocPFTPChannelParent
(
const
PBrowserOrId
&
aBrowser
const
SerializedLoadContext
&
aSerialized
const
FTPChannelCreationArgs
&
aOpenArgs
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPFTPChannelConstructor
(
PFTPChannelParent
*
aActor
const
PBrowserOrId
&
aBrowser
const
SerializedLoadContext
&
aSerialized
const
FTPChannelCreationArgs
&
aOpenArgs
)
override
;
bool
DeallocPFTPChannelParent
(
PFTPChannelParent
*
)
;
PWebSocketParent
*
AllocPWebSocketParent
(
const
PBrowserOrId
&
browser
const
SerializedLoadContext
&
aSerialized
const
uint32_t
&
aSerial
)
;
bool
DeallocPWebSocketParent
(
PWebSocketParent
*
)
;
PTCPSocketParent
*
AllocPTCPSocketParent
(
const
nsString
&
host
const
uint16_t
&
port
)
;
bool
DeallocPTCPSocketParent
(
PTCPSocketParent
*
)
;
PTCPServerSocketParent
*
AllocPTCPServerSocketParent
(
const
uint16_t
&
aLocalPort
const
uint16_t
&
aBacklog
const
bool
&
aUseArrayBuffers
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPTCPServerSocketConstructor
(
PTCPServerSocketParent
*
const
uint16_t
&
aLocalPort
const
uint16_t
&
aBacklog
const
bool
&
aUseArrayBuffers
)
override
;
bool
DeallocPTCPServerSocketParent
(
PTCPServerSocketParent
*
)
;
PUDPSocketParent
*
AllocPUDPSocketParent
(
const
Principal
&
aPrincipal
const
nsCString
&
aFilter
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPUDPSocketConstructor
(
PUDPSocketParent
*
const
Principal
&
aPrincipal
const
nsCString
&
aFilter
)
override
;
bool
DeallocPUDPSocketParent
(
PUDPSocketParent
*
)
;
PDNSRequestParent
*
AllocPDNSRequestParent
(
const
nsCString
&
aHost
const
OriginAttributes
&
aOriginAttributes
const
uint32_t
&
aFlags
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPDNSRequestConstructor
(
PDNSRequestParent
*
actor
const
nsCString
&
hostName
const
OriginAttributes
&
aOriginAttributes
const
uint32_t
&
flags
)
override
;
bool
DeallocPDNSRequestParent
(
PDNSRequestParent
*
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvSpeculativeConnect
(
const
URIParams
&
aURI
const
Principal
&
aPrincipal
const
bool
&
aAnonymous
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvHTMLDNSPrefetch
(
const
nsString
&
hostname
const
bool
&
isHttps
const
OriginAttributes
&
aOriginAttributes
const
uint16_t
&
flags
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvCancelHTMLDNSPrefetch
(
const
nsString
&
hostname
const
bool
&
isHttps
const
OriginAttributes
&
aOriginAttributes
const
uint16_t
&
flags
const
nsresult
&
reason
)
;
PWebSocketEventListenerParent
*
AllocPWebSocketEventListenerParent
(
const
uint64_t
&
aInnerWindowID
)
;
bool
DeallocPWebSocketEventListenerParent
(
PWebSocketEventListenerParent
*
)
;
PDataChannelParent
*
AllocPDataChannelParent
(
const
uint32_t
&
channelId
)
;
bool
DeallocPDataChannelParent
(
PDataChannelParent
*
parent
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPDataChannelConstructor
(
PDataChannelParent
*
aActor
const
uint32_t
&
channelId
)
override
;
PSimpleChannelParent
*
AllocPSimpleChannelParent
(
const
uint32_t
&
channelId
)
;
bool
DeallocPSimpleChannelParent
(
PSimpleChannelParent
*
parent
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPSimpleChannelConstructor
(
PSimpleChannelParent
*
aActor
const
uint32_t
&
channelId
)
override
;
PFileChannelParent
*
AllocPFileChannelParent
(
const
uint32_t
&
channelId
)
;
bool
DeallocPFileChannelParent
(
PFileChannelParent
*
parent
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPFileChannelConstructor
(
PFileChannelParent
*
aActor
const
uint32_t
&
channelId
)
override
;
PChannelDiverterParent
*
AllocPChannelDiverterParent
(
const
ChannelDiverterArgs
&
channel
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPChannelDiverterConstructor
(
PChannelDiverterParent
*
actor
const
ChannelDiverterArgs
&
channel
)
override
;
bool
DeallocPChannelDiverterParent
(
PChannelDiverterParent
*
actor
)
;
PTransportProviderParent
*
AllocPTransportProviderParent
(
)
;
bool
DeallocPTransportProviderParent
(
PTransportProviderParent
*
aActor
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnAuthAvailable
(
const
uint64_t
&
aCallbackId
const
nsString
&
aUser
const
nsString
&
aPassword
const
nsString
&
aDomain
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnAuthCancelled
(
const
uint64_t
&
aCallbackId
const
bool
&
aUserCancel
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPredPredict
(
const
ipc
:
:
OptionalURIParams
&
aTargetURI
const
ipc
:
:
OptionalURIParams
&
aSourceURI
const
PredictorPredictReason
&
aReason
const
OriginAttributes
&
aOriginAttributes
const
bool
&
hasVerifier
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPredLearn
(
const
ipc
:
:
URIParams
&
aTargetURI
const
ipc
:
:
OptionalURIParams
&
aSourceURI
const
PredictorPredictReason
&
aReason
const
OriginAttributes
&
aOriginAttributes
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPredReset
(
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRequestContextLoadBegin
(
const
uint64_t
&
rcid
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRequestContextAfterDOMContentLoaded
(
const
uint64_t
&
rcid
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRemoveRequestContext
(
const
uint64_t
&
rcid
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvGetExtensionStream
(
const
URIParams
&
aURI
GetExtensionStreamResolver
&
&
aResolve
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvGetExtensionFD
(
const
URIParams
&
aURI
GetExtensionFDResolver
&
&
aResolve
)
;
PTrackingDummyChannelParent
*
AllocPTrackingDummyChannelParent
(
nsIURI
*
aURI
nsIURI
*
aTopWindowURI
const
nsresult
&
aTopWindowURIResult
const
OptionalLoadInfoArgs
&
aLoadInfo
)
;
bool
DeallocPTrackingDummyChannelParent
(
PTrackingDummyChannelParent
*
aChild
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPTrackingDummyChannelConstructor
(
PTrackingDummyChannelParent
*
aActor
nsIURI
*
aURI
nsIURI
*
aTopWindowURI
const
nsresult
&
aTopWindowURIResult
const
OptionalLoadInfoArgs
&
aLoadInfo
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvInitSocketProcessBridge
(
InitSocketProcessBridgeResolver
&
&
aResolver
)
;
}
;
}
}
#
endif
