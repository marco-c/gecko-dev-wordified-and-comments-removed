#
include
"
InputChannelThrottleQueueChild
.
h
"
#
include
"
nsThreadUtils
.
h
"
namespace
mozilla
{
namespace
net
{
NS_IMPL_ISUPPORTS_INHERITED0
(
InputChannelThrottleQueueChild
ThrottleQueue
)
NS_IMETHODIMP
InputChannelThrottleQueueChild
:
:
RecordRead
(
uint32_t
aBytesRead
)
{
ThrottleQueue
:
:
RecordRead
(
aBytesRead
)
;
RefPtr
<
InputChannelThrottleQueueChild
>
self
=
this
;
NS_DispatchToMainThread
(
NS_NewRunnableFunction
(
"
InputChannelThrottleQueueChild
:
:
RecordRead
"
[
self
aBytesRead
]
(
)
{
if
(
self
-
>
CanSend
(
)
)
{
Unused
<
<
self
-
>
SendRecordRead
(
aBytesRead
)
;
}
}
)
)
;
return
NS_OK
;
}
}
}
