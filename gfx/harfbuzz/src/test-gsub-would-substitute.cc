#
include
"
hb
.
hh
"
#
include
"
hb
.
h
"
#
include
"
hb
-
ot
.
h
"
#
ifdef
HAVE_FREETYPE
#
include
"
hb
-
ft
.
h
"
#
endif
#
ifdef
HB_NO_OPEN
#
define
hb_blob_create_from_file_or_fail
(
x
)
hb_blob_get_empty
(
)
#
endif
int
main
(
int
argc
char
*
*
argv
)
{
if
(
argc
!
=
4
&
&
argc
!
=
5
)
{
fprintf
(
stderr
"
usage
:
%
s
font
-
file
lookup
-
index
first
-
glyph
[
second
-
glyph
]
\
n
"
argv
[
0
]
)
;
exit
(
1
)
;
}
hb_blob_t
*
blob
=
hb_blob_create_from_file_or_fail
(
argv
[
1
]
)
;
assert
(
blob
)
;
hb_face_t
*
face
=
hb_face_create
(
blob
0
)
;
hb_blob_destroy
(
blob
)
;
blob
=
nullptr
;
hb_font_t
*
font
=
hb_font_create
(
face
)
;
#
ifdef
HAVE_FREETYPE
hb_ft_font_set_funcs
(
font
)
;
#
endif
unsigned
int
len
=
argc
-
3
;
hb_codepoint_t
glyphs
[
2
]
;
if
(
!
hb_font_glyph_from_string
(
font
argv
[
3
]
-
1
&
glyphs
[
0
]
)
|
|
(
argc
>
4
&
&
!
hb_font_glyph_from_string
(
font
argv
[
4
]
-
1
&
glyphs
[
1
]
)
)
)
return
2
;
return
!
hb_ot_layout_lookup_would_substitute
(
face
strtol
(
argv
[
2
]
nullptr
0
)
glyphs
len
false
)
;
}
