#
include
<
stdlib
.
h
>
#
include
<
stdio
.
h
>
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
int
alloc_state
=
0
;
__attribute__
(
(
no_sanitize
(
"
integer
"
)
)
)
static
int
fastrand
(
)
{
if
(
!
alloc_state
)
return
1
;
alloc_state
=
(
214013
*
alloc_state
+
2531011
)
;
return
(
alloc_state
>
>
16
)
&
0x7FFF
;
}
void
*
hb_malloc_impl
(
size_t
size
)
{
return
(
fastrand
(
)
%
16
)
?
malloc
(
size
)
:
NULL
;
}
void
*
hb_calloc_impl
(
size_t
nmemb
size_t
size
)
{
return
(
fastrand
(
)
%
16
)
?
calloc
(
nmemb
size
)
:
NULL
;
}
void
*
hb_realloc_impl
(
void
*
ptr
size_t
size
)
{
return
(
fastrand
(
)
%
16
)
?
realloc
(
ptr
size
)
:
NULL
;
}
void
hb_free_impl
(
void
*
ptr
)
{
return
free
(
ptr
)
;
}
#
ifdef
__cplusplus
}
#
endif
