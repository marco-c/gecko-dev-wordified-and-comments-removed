#
ifndef
HB_WASM_API_SHAPE_HH
#
define
HB_WASM_API_SHAPE_HH
#
include
"
hb
-
wasm
-
api
.
hh
"
namespace
hb
{
namespace
wasm
{
static_assert
(
sizeof
(
feature_t
)
=
=
sizeof
(
hb_feature_t
)
"
"
)
;
HB_WASM_INTERFACE
(
bool_t
shape_with
)
(
HB_WASM_EXEC_ENV
ptr_d
(
font_t
font
)
ptr_d
(
buffer_t
buffer
)
ptr_d
(
const
feature_t
features
)
uint32_t
num_features
const
char
*
shaper
)
{
if
(
unlikely
(
0
=
=
strcmp
(
shaper
"
wasm
"
)
)
)
return
false
;
HB_REF2OBJ
(
font
)
;
HB_REF2OBJ
(
buffer
)
;
if
(
unlikely
(
!
buffer
-
>
ensure_unicode
(
)
)
)
return
false
;
if
(
unlikely
(
!
HB_DIRECTION_IS_VALID
(
buffer
-
>
props
.
direction
)
)
)
return
false
;
HB_ARRAY_PARAM
(
const
feature_t
features
num_features
)
;
if
(
unlikely
(
!
features
&
&
num_features
)
)
return
false
;
const
char
*
shaper_list
[
]
=
{
shaper
nullptr
}
;
return
hb_shape_full
(
font
buffer
(
hb_feature_t
*
)
features
num_features
shaper_list
)
;
}
}
}
#
endif
