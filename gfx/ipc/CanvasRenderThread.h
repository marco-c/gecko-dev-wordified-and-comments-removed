#
ifndef
_include_gfx_ipc_CanvasRenderThread_h__
#
define
_include_gfx_ipc_CanvasRenderThread_h__
#
include
"
mozilla
/
DataMutex
.
h
"
#
include
"
mozilla
/
layers
/
SynchronousTask
.
h
"
#
include
"
mozilla
/
StaticPtr
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsThread
.
h
"
namespace
mozilla
:
:
gfx
{
class
CanvasRenderThread
final
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING_WITH_DELETE_ON_MAIN_THREAD
(
CanvasRenderThread
)
public
:
static
CanvasRenderThread
*
Get
(
)
;
static
void
Start
(
)
;
static
void
ShutDown
(
)
;
static
bool
IsInCanvasRenderThread
(
)
;
static
already_AddRefed
<
nsIThread
>
GetCanvasRenderThread
(
)
;
private
:
explicit
CanvasRenderThread
(
RefPtr
<
nsIThread
>
aThread
)
;
~
CanvasRenderThread
(
)
;
void
ShutDownTask
(
layers
:
:
SynchronousTask
*
aTask
)
;
void
PostRunnable
(
already_AddRefed
<
nsIRunnable
>
aRunnable
)
;
RefPtr
<
nsIThread
>
const
mThread
;
}
;
}
#
endif
