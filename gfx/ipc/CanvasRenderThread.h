#
ifndef
_include_gfx_ipc_CanvasRenderThread_h__
#
define
_include_gfx_ipc_CanvasRenderThread_h__
#
include
"
mozilla
/
DataMutex
.
h
"
#
include
"
mozilla
/
layers
/
SynchronousTask
.
h
"
#
include
"
mozilla
/
StaticPtr
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsThread
.
h
"
class
nsIRunnable
;
namespace
mozilla
:
:
gfx
{
class
CanvasRenderThread
final
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING_WITH_DELETE_ON_MAIN_THREAD
(
CanvasRenderThread
)
public
:
static
void
Start
(
)
;
static
void
Shutdown
(
)
;
static
bool
IsInCanvasRenderThread
(
)
;
static
already_AddRefed
<
nsIThread
>
GetCanvasRenderThread
(
)
;
private
:
CanvasRenderThread
(
nsCOMPtr
<
nsIThread
>
&
&
aThread
bool
aCreatedThread
)
;
~
CanvasRenderThread
(
)
;
void
PostRunnable
(
already_AddRefed
<
nsIRunnable
>
aRunnable
)
;
nsCOMPtr
<
nsIThread
>
const
mThread
;
bool
mCreatedThread
;
}
;
}
#
endif
