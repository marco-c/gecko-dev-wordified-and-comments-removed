#
include
"
fpgm
.
h
"
namespace
ots
{
bool
OpenTypeFPGM
:
:
Parse
(
const
uint8_t
*
data
size_t
length
)
{
Buffer
table
(
data
length
)
;
if
(
length
>
=
128
*
1024u
)
{
return
Error
(
"
length
(
%
ld
)
>
120
"
length
)
;
}
if
(
!
table
.
Skip
(
length
)
)
{
return
Error
(
"
Bad
table
length
"
)
;
}
this
-
>
data
=
data
;
this
-
>
length
=
length
;
return
true
;
}
bool
OpenTypeFPGM
:
:
Serialize
(
OTSStream
*
out
)
{
if
(
!
out
-
>
Write
(
this
-
>
data
this
-
>
length
)
)
{
return
Error
(
"
Failed
to
write
fpgm
table
"
)
;
}
return
true
;
}
bool
OpenTypeFPGM
:
:
ShouldSerialize
(
)
{
return
Table
:
:
ShouldSerialize
(
)
&
&
GetFont
(
)
-
>
GetTable
(
OTS_TAG_GLYF
)
!
=
NULL
;
}
}
