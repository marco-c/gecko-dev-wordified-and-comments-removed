#
include
"
MacIOSurfaceHelpers
.
h
"
#
include
"
MacIOSurfaceImage
.
h
"
#
include
"
gfxPlatform
.
h
"
#
include
"
mozilla
/
layers
/
CompositableClient
.
h
"
#
include
"
mozilla
/
layers
/
CompositableForwarder
.
h
"
#
include
"
mozilla
/
layers
/
MacIOSurfaceTextureClientOGL
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
using
namespace
mozilla
;
using
namespace
mozilla
:
:
layers
;
using
namespace
mozilla
:
:
gfx
;
TextureClient
*
MacIOSurfaceImage
:
:
GetTextureClient
(
KnowsCompositor
*
aKnowsCompositor
)
{
if
(
!
mTextureClient
)
{
BackendType
backend
=
BackendType
:
:
NONE
;
mTextureClient
=
TextureClient
:
:
CreateWithData
(
MacIOSurfaceTextureData
:
:
Create
(
mSurface
backend
)
TextureFlags
:
:
DEFAULT
aKnowsCompositor
-
>
GetTextureForwarder
(
)
)
;
}
return
mTextureClient
;
}
already_AddRefed
<
SourceSurface
>
MacIOSurfaceImage
:
:
GetAsSourceSurface
(
)
{
return
CreateSourceSurfaceFromMacIOSurface
(
mSurface
)
;
}
