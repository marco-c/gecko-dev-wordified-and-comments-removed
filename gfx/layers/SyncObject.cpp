#
include
"
SyncObject
.
h
"
#
ifdef
XP_WIN
#
include
"
mozilla
/
gfx
/
DeviceManagerDx
.
h
"
#
include
"
mozilla
/
layers
/
TextureD3D11
.
h
"
#
endif
#
include
"
nsIXULRuntime
.
h
"
namespace
mozilla
{
namespace
layers
{
#
ifdef
XP_WIN
already_AddRefed
<
SyncObjectHost
>
SyncObjectHost
:
:
CreateSyncObjectHost
(
ID3D11Device
*
aDevice
)
{
return
MakeAndAddRef
<
SyncObjectD3D11Host
>
(
aDevice
)
;
}
already_AddRefed
<
SyncObjectClient
>
SyncObjectClient
:
:
CreateSyncObjectClient
(
SyncHandle
aHandle
ID3D11Device
*
aDevice
)
{
if
(
!
aHandle
)
{
return
nullptr
;
}
return
MakeAndAddRef
<
SyncObjectD3D11Client
>
(
aHandle
aDevice
)
;
}
#
endif
already_AddRefed
<
SyncObjectClient
>
SyncObjectClient
:
:
CreateSyncObjectClientForContentDevice
(
SyncHandle
aHandle
)
{
#
ifndef
XP_WIN
return
nullptr
;
#
else
if
(
!
aHandle
)
{
return
nullptr
;
}
return
MakeAndAddRef
<
SyncObjectD3D11ClientContentDevice
>
(
aHandle
)
;
#
endif
}
}
}
