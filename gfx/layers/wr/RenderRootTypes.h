#
ifndef
GFX_RENDERROOTTYPES_H
#
define
GFX_RENDERROOTTYPES_H
#
include
"
mozilla
/
webrender
/
WebRenderAPI
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderTypes
.
h
"
#
include
"
mozilla
/
layers
/
WebRenderMessages
.
h
"
#
include
"
mozilla
/
layers
/
WebRenderScrollData
.
h
"
namespace
mozilla
{
namespace
layers
{
struct
DisplayListData
{
wr
:
:
IdNamespace
mIdNamespace
;
LayoutDeviceRect
mRect
;
nsTArray
<
WebRenderParentCommand
>
mCommands
;
Maybe
<
mozilla
:
:
ipc
:
:
ByteBuf
>
mDLItems
;
Maybe
<
mozilla
:
:
ipc
:
:
ByteBuf
>
mDLCache
;
Maybe
<
mozilla
:
:
ipc
:
:
ByteBuf
>
mDLSpatialTree
;
wr
:
:
BuiltDisplayListDescriptor
mDLDesc
;
nsTArray
<
wr
:
:
PipelineId
>
mRemotePipelineIds
;
nsTArray
<
OpUpdateResource
>
mResourceUpdates
;
nsTArray
<
RefCountedShmem
>
mSmallShmems
;
nsTArray
<
mozilla
:
:
ipc
:
:
Shmem
>
mLargeShmems
;
Maybe
<
WebRenderScrollData
>
mScrollData
;
}
;
struct
TransactionData
{
wr
:
:
IdNamespace
mIdNamespace
;
nsTArray
<
WebRenderParentCommand
>
mCommands
;
nsTArray
<
OpUpdateResource
>
mResourceUpdates
;
nsTArray
<
RefCountedShmem
>
mSmallShmems
;
nsTArray
<
mozilla
:
:
ipc
:
:
Shmem
>
mLargeShmems
;
ScrollUpdatesMap
mScrollUpdates
;
uint32_t
mPaintSequenceNumber
;
}
;
typedef
Maybe
<
TransactionData
>
MaybeTransactionData
;
}
namespace
ipc
{
template
<
>
struct
IPDLParamTraits
<
mozilla
:
:
layers
:
:
DisplayListData
>
{
typedef
mozilla
:
:
layers
:
:
DisplayListData
paramType
;
static
void
Write
(
IPC
:
:
MessageWriter
*
aWriter
IProtocol
*
aActor
paramType
&
&
aParam
)
;
static
bool
Read
(
IPC
:
:
MessageReader
*
aReader
IProtocol
*
aActor
paramType
*
aResult
)
;
}
;
template
<
>
struct
IPDLParamTraits
<
mozilla
:
:
layers
:
:
TransactionData
>
{
typedef
mozilla
:
:
layers
:
:
TransactionData
paramType
;
static
void
Write
(
IPC
:
:
MessageWriter
*
aWriter
IProtocol
*
aActor
paramType
&
&
aParam
)
;
static
bool
Read
(
IPC
:
:
MessageReader
*
aReader
IProtocol
*
aActor
paramType
*
aResult
)
;
}
;
}
}
#
endif
