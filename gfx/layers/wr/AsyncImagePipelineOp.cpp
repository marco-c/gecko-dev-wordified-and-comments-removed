#
include
"
AsyncImagePipelineOp
.
h
"
#
include
"
mozilla
/
layers
/
AsyncImagePipelineManager
.
h
"
namespace
mozilla
{
namespace
layers
{
void
AsyncImagePipelineOps
:
:
HandleOps
(
wr
:
:
TransactionBuilder
&
aTxn
)
{
MOZ_ASSERT
(
!
mList
.
empty
(
)
)
;
while
(
!
mList
.
empty
(
)
)
{
auto
&
frontOp
=
mList
.
front
(
)
;
switch
(
frontOp
.
mTag
)
{
case
AsyncImagePipelineOp
:
:
Tag
:
:
ApplyAsyncImageForPipeline
:
{
auto
*
manager
=
frontOp
.
mAsyncImageManager
;
const
auto
&
pipelineId
=
frontOp
.
mPipelineId
;
const
auto
&
textureHost
=
frontOp
.
mTextureHost
;
manager
-
>
ApplyAsyncImageForPipeline
(
pipelineId
textureHost
aTxn
)
;
break
;
}
case
AsyncImagePipelineOp
:
:
Tag
:
:
RemoveAsyncImagePipeline
:
{
auto
*
manager
=
frontOp
.
mAsyncImageManager
;
const
auto
&
pipelineId
=
frontOp
.
mPipelineId
;
manager
-
>
RemoveAsyncImagePipeline
(
pipelineId
nullptr
aTxn
)
;
break
;
}
}
mList
.
pop
(
)
;
}
}
}
}
