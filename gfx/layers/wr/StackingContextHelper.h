#
ifndef
GFX_STACKINGCONTEXTHELPER_H
#
define
GFX_STACKINGCONTEXTHELPER_H
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
gfx
/
MatrixFwd
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderAPI
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderTypes
.
h
"
#
include
"
Units
.
h
"
class
nsDisplayListBuilder
;
class
nsDisplayItem
;
class
nsDisplayList
;
namespace
mozilla
{
namespace
layers
{
class
MOZ_RAII
StackingContextHelper
{
public
:
StackingContextHelper
(
const
StackingContextHelper
&
aParentSC
wr
:
:
DisplayListBuilder
&
aBuilder
const
nsTArray
<
wr
:
:
WrFilterOp
>
&
aFilters
=
nsTArray
<
wr
:
:
WrFilterOp
>
(
)
const
LayoutDeviceRect
&
aBounds
=
LayoutDeviceRect
(
)
const
gfx
:
:
Matrix4x4
*
aBoundTransform
=
nullptr
const
wr
:
:
WrAnimationProperty
*
aAnimation
=
nullptr
float
*
aOpacityPtr
=
nullptr
gfx
:
:
Matrix4x4
*
aTransformPtr
=
nullptr
gfx
:
:
Matrix4x4
*
aPerspectivePtr
=
nullptr
const
gfx
:
:
CompositionOp
&
aMixBlendMode
=
gfx
:
:
CompositionOp
:
:
OP_OVER
bool
aBackfaceVisible
=
true
bool
aIsPreserve3D
=
false
)
;
StackingContextHelper
(
)
;
~
StackingContextHelper
(
)
;
wr
:
:
LayoutRect
ToRelativeLayoutRect
(
const
LayoutDeviceRect
&
aRect
)
const
;
wr
:
:
LayoutPoint
ToRelativeLayoutPoint
(
const
LayoutDevicePoint
&
aPoint
)
const
{
return
wr
:
:
ToLayoutPoint
(
aPoint
)
;
}
gfx
:
:
Size
GetInheritedScale
(
)
const
{
return
mScale
;
}
const
gfx
:
:
Matrix
&
GetInheritedTransform
(
)
const
{
return
mInheritedTransform
;
}
bool
IsBackfaceVisible
(
)
const
{
return
mTransform
.
IsBackfaceVisible
(
)
;
}
bool
IsReferenceFrame
(
)
const
{
return
!
mTransform
.
IsIdentity
(
)
;
}
private
:
wr
:
:
DisplayListBuilder
*
mBuilder
;
gfx
:
:
Matrix4x4
mTransform
;
gfx
:
:
Size
mScale
;
gfx
:
:
Matrix
mInheritedTransform
;
}
;
}
}
#
endif
