#
ifndef
GFX_STACKINGCONTEXTHELPER_H
#
define
GFX_STACKINGCONTEXTHELPER_H
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
gfx
/
MatrixFwd
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderAPI
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderTypes
.
h
"
#
include
"
Units
.
h
"
namespace
mozilla
{
namespace
layers
{
class
WebRenderLayer
;
class
MOZ_RAII
StackingContextHelper
{
public
:
StackingContextHelper
(
const
StackingContextHelper
&
aParentSC
wr
:
:
DisplayListBuilder
&
aBuilder
WebRenderLayer
*
aLayer
const
Maybe
<
gfx
:
:
Matrix4x4
>
&
aTransform
=
Nothing
(
)
const
nsTArray
<
WrFilterOp
>
&
aFilters
=
nsTArray
<
WrFilterOp
>
(
)
)
;
StackingContextHelper
(
const
StackingContextHelper
&
aParentSC
wr
:
:
DisplayListBuilder
&
aBuilder
WebRenderLayer
*
aLayer
uint64_t
aAnimationsId
float
*
aOpacityPtr
gfx
:
:
Matrix4x4
*
aTransformPtr
const
nsTArray
<
WrFilterOp
>
&
aFilters
=
nsTArray
<
WrFilterOp
>
(
)
)
;
StackingContextHelper
(
)
;
~
StackingContextHelper
(
)
;
WrRect
ToRelativeWrRect
(
const
LayerRect
&
aRect
)
const
;
WrRect
ToRelativeWrRect
(
const
LayoutDeviceRect
&
aRect
)
const
;
WrPoint
ToRelativeWrPoint
(
const
LayerPoint
&
aPoint
)
const
;
WrRect
ToRelativeWrRectRounded
(
const
LayoutDeviceRect
&
aRect
)
const
;
gfx
:
:
Matrix4x4
TransformToRoot
(
)
const
;
private
:
wr
:
:
DisplayListBuilder
*
mBuilder
;
LayerPoint
mOrigin
;
gfx
:
:
Matrix4x4
mTransform
;
}
;
}
}
#
endif
