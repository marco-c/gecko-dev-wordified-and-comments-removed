#
ifndef
GFX_STACKINGCONTEXTHELPER_H
#
define
GFX_STACKINGCONTEXTHELPER_H
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
gfx
/
MatrixFwd
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderAPI
.
h
"
#
include
"
mozilla
/
webrender
/
WebRenderTypes
.
h
"
#
include
"
Units
.
h
"
class
nsDisplayTransform
;
namespace
mozilla
{
struct
ActiveScrolledRoot
;
namespace
layers
{
class
MOZ_RAII
StackingContextHelper
{
public
:
StackingContextHelper
(
const
StackingContextHelper
&
aParentSC
const
ActiveScrolledRoot
*
aAsr
nsIFrame
*
aContainerFrame
nsDisplayItem
*
aContainerItem
wr
:
:
DisplayListBuilder
&
aBuilder
const
nsTArray
<
wr
:
:
FilterOp
>
&
aFilters
=
nsTArray
<
wr
:
:
FilterOp
>
(
)
const
LayoutDeviceRect
&
aBounds
=
LayoutDeviceRect
(
)
const
gfx
:
:
Matrix4x4
*
aBoundTransform
=
nullptr
const
wr
:
:
WrAnimationProperty
*
aAnimation
=
nullptr
const
float
*
aOpacityPtr
=
nullptr
const
gfx
:
:
Matrix4x4
*
aTransformPtr
=
nullptr
const
gfx
:
:
Matrix4x4
*
aPerspectivePtr
=
nullptr
const
gfx
:
:
CompositionOp
&
aMixBlendMode
=
gfx
:
:
CompositionOp
:
:
OP_OVER
bool
aBackfaceVisible
=
true
bool
aIsPreserve3D
=
false
const
Maybe
<
nsDisplayTransform
*
>
&
aDeferredTransformItem
=
Nothing
(
)
const
wr
:
:
WrStackingContextClip
&
=
wr
:
:
WrStackingContextClip
:
:
None
(
)
bool
aAnimated
=
false
)
;
StackingContextHelper
(
)
;
~
StackingContextHelper
(
)
;
gfx
:
:
Size
GetInheritedScale
(
)
const
{
return
mScale
;
}
const
gfx
:
:
Matrix
&
GetInheritedTransform
(
)
const
{
return
mInheritedTransform
;
}
const
gfx
:
:
Matrix
&
GetSnappingSurfaceTransform
(
)
const
{
return
mSnappingSurfaceTransform
;
}
const
Maybe
<
nsDisplayTransform
*
>
&
GetDeferredTransformItem
(
)
const
;
Maybe
<
gfx
:
:
Matrix4x4
>
GetDeferredTransformMatrix
(
)
const
;
bool
AffectsClipPositioning
(
)
const
{
return
mAffectsClipPositioning
;
}
Maybe
<
wr
:
:
WrSpatialId
>
ReferenceFrameId
(
)
const
{
return
mReferenceFrameId
;
}
private
:
wr
:
:
DisplayListBuilder
*
mBuilder
;
gfx
:
:
Size
mScale
;
gfx
:
:
Matrix
mInheritedTransform
;
gfx
:
:
Matrix
mSnappingSurfaceTransform
;
bool
mAffectsClipPositioning
;
Maybe
<
wr
:
:
WrSpatialId
>
mReferenceFrameId
;
Maybe
<
wr
:
:
SpaceAndClipChainHelper
>
mSpaceAndClipChainHelper
;
Maybe
<
nsDisplayTransform
*
>
mDeferredTransformItem
;
Maybe
<
gfx
:
:
Matrix4x4
>
mDeferredAncestorTransform
;
bool
mIsPreserve3D
;
bool
mRasterizeLocally
;
}
;
}
}
#
endif
