#
ifndef
MOZILLA_LAYERS_ACTIVERESOURCE
#
define
MOZILLA_LAYERS_ACTIVERESOURCE
#
include
"
nsExpirationTracker
.
h
"
namespace
mozilla
:
:
layers
{
class
ActiveResource
{
public
:
virtual
void
NotifyInactive
(
)
=
0
;
nsExpirationState
*
GetExpirationState
(
)
{
return
&
mExpirationState
;
}
bool
IsActivityTracked
(
)
{
return
mExpirationState
.
IsTracked
(
)
;
}
private
:
nsExpirationState
mExpirationState
;
}
;
class
ActiveResourceTracker
final
:
public
nsExpirationTracker
<
ActiveResource
3
>
{
public
:
ActiveResourceTracker
(
uint32_t
aExpirationCycle
const
nsACString
&
aName
nsIEventTarget
*
aEventTarget
)
:
nsExpirationTracker
(
aExpirationCycle
aName
aEventTarget
)
{
}
void
NotifyExpired
(
ActiveResource
*
aResource
)
override
{
RemoveObject
(
aResource
)
;
aResource
-
>
NotifyInactive
(
)
;
}
}
;
}
#
endif
