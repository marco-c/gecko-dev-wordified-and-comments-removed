#
include
"
mozilla
/
layers
/
TextureForwarder
.
h
"
namespace
mozilla
{
namespace
layers
{
TextureForwarder
:
:
TextureForwarder
(
const
char
*
aName
)
:
ClientIPCAllocator
(
aName
)
mSectionAllocator
(
nullptr
)
{
}
TextureForwarder
:
:
~
TextureForwarder
(
)
{
if
(
mSectionAllocator
)
{
delete
mSectionAllocator
;
}
}
FixedSizeSmallShmemSectionAllocator
*
TextureForwarder
:
:
GetTileLockAllocator
(
)
{
MOZ_ASSERT
(
IPCOpen
(
)
)
;
if
(
!
IPCOpen
(
)
)
{
return
nullptr
;
}
if
(
!
mSectionAllocator
)
{
mSectionAllocator
=
new
FixedSizeSmallShmemSectionAllocator
(
this
)
;
}
return
mSectionAllocator
;
}
}
}
