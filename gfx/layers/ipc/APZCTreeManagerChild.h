#
ifndef
mozilla_layers_APZCTreeManagerChild_h
#
define
mozilla_layers_APZCTreeManagerChild_h
#
include
"
mozilla
/
layers
/
IAPZCTreeManager
.
h
"
#
include
"
mozilla
/
layers
/
PAPZCTreeManagerChild
.
h
"
namespace
mozilla
{
namespace
layers
{
class
RemoteCompositorSession
;
class
APZCTreeManagerChild
:
public
IAPZCTreeManager
public
PAPZCTreeManagerChild
{
public
:
APZCTreeManagerChild
(
)
;
void
SetCompositorSession
(
RemoteCompositorSession
*
aSession
)
;
nsEventStatus
ReceiveInputEvent
(
InputData
&
aEvent
ScrollableLayerGuid
*
aOutTargetGuid
uint64_t
*
aOutInputBlockId
)
override
;
void
SetKeyboardMap
(
const
KeyboardMap
&
aKeyboardMap
)
override
;
void
ZoomToRect
(
const
ScrollableLayerGuid
&
aGuid
const
CSSRect
&
aRect
const
uint32_t
aFlags
=
DEFAULT_BEHAVIOR
)
override
;
void
ContentReceivedInputBlock
(
uint64_t
aInputBlockId
bool
aPreventDefault
)
override
;
void
SetTargetAPZC
(
uint64_t
aInputBlockId
const
nsTArray
<
ScrollableLayerGuid
>
&
aTargets
)
override
;
void
UpdateZoomConstraints
(
const
ScrollableLayerGuid
&
aGuid
const
Maybe
<
ZoomConstraints
>
&
aConstraints
)
override
;
void
CancelAnimation
(
const
ScrollableLayerGuid
&
aGuid
)
override
;
void
SetDPI
(
float
aDpiValue
)
override
;
void
SetAllowedTouchBehavior
(
uint64_t
aInputBlockId
const
nsTArray
<
TouchBehaviorFlags
>
&
aValues
)
override
;
void
StartScrollbarDrag
(
const
ScrollableLayerGuid
&
aGuid
const
AsyncDragMetrics
&
aDragMetrics
)
override
;
void
StartAutoscroll
(
const
ScrollableLayerGuid
&
aGuid
const
ScreenPoint
&
aAnchorLocation
)
override
;
void
StopAutoscroll
(
const
ScrollableLayerGuid
&
aGuid
)
override
;
void
SetLongTapEnabled
(
bool
aTapGestureEnabled
)
override
;
void
ProcessTouchVelocity
(
uint32_t
aTimestampMs
float
aSpeedY
)
override
;
void
ProcessUnhandledEvent
(
LayoutDeviceIntPoint
*
aRefPoint
ScrollableLayerGuid
*
aOutTargetGuid
uint64_t
*
aOutFocusSequenceNumber
)
override
;
void
UpdateWheelTransaction
(
LayoutDeviceIntPoint
aRefPoint
EventMessage
aEventMessage
)
override
;
protected
:
mozilla
:
:
ipc
:
:
IPCResult
RecvHandleTap
(
const
TapType
&
aType
const
LayoutDevicePoint
&
aPoint
const
Modifiers
&
aModifiers
const
ScrollableLayerGuid
&
aGuid
const
uint64_t
&
aInputBlockId
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvNotifyPinchGesture
(
const
PinchGestureType
&
aType
const
ScrollableLayerGuid
&
aGuid
const
LayoutDeviceCoord
&
aSpanChange
const
Modifiers
&
aModifiers
)
override
;
virtual
~
APZCTreeManagerChild
(
)
{
}
private
:
MOZ_NON_OWNING_REF
RemoteCompositorSession
*
mCompositorSession
;
}
;
}
}
#
endif
