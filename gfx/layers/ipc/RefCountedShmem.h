#
ifndef
MOZILLA_LAYERS_REFCOUNTED_SHMEM_H
#
define
MOZILLA_LAYERS_REFCOUNTED_SHMEM_H
#
include
"
mozilla
/
ipc
/
Shmem
.
h
"
#
include
"
chrome
/
common
/
ipc_message_utils
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
IProtocol
;
}
namespace
layers
{
class
RefCountedShmem
;
class
RefCountedShm
{
public
:
static
uint8_t
*
GetBytes
(
const
RefCountedShmem
&
aShm
)
;
static
size_t
GetSize
(
const
RefCountedShmem
&
aShm
)
;
static
bool
IsValid
(
const
RefCountedShmem
&
aShm
)
;
static
bool
Alloc
(
mozilla
:
:
ipc
:
:
IProtocol
*
aAllocator
size_t
aSize
RefCountedShmem
&
aShm
)
;
static
void
Dealloc
(
mozilla
:
:
ipc
:
:
IProtocol
*
aAllocator
RefCountedShmem
&
aShm
)
;
static
int32_t
GetReferenceCount
(
const
RefCountedShmem
&
aShm
)
;
static
int32_t
AddRef
(
const
RefCountedShmem
&
aShm
)
;
static
int32_t
Release
(
const
RefCountedShmem
&
aShm
)
;
}
;
}
}
#
endif
