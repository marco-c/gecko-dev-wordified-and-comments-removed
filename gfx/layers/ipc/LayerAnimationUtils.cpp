#
include
"
LayerAnimationUtils
.
h
"
#
include
"
mozilla
/
ComputedTimingFunction
.
h
"
#
include
"
mozilla
/
layers
/
LayersMessages
.
h
"
namespace
mozilla
{
namespace
layers
{
Maybe
<
ComputedTimingFunction
>
AnimationUtils
:
:
TimingFunctionToComputedTimingFunction
(
const
TimingFunction
&
aTimingFunction
)
{
switch
(
aTimingFunction
.
type
(
)
)
{
case
TimingFunction
:
:
Tnull_t
:
return
Nothing
(
)
;
case
TimingFunction
:
:
TCubicBezierFunction
:
{
ComputedTimingFunction
result
;
CubicBezierFunction
cbf
=
aTimingFunction
.
get_CubicBezierFunction
(
)
;
result
.
Init
(
nsTimingFunction
(
cbf
.
x1
(
)
cbf
.
y1
(
)
cbf
.
x2
(
)
cbf
.
y2
(
)
)
)
;
return
Some
(
result
)
;
}
case
TimingFunction
:
:
TStepFunction
:
{
StepFunction
sf
=
aTimingFunction
.
get_StepFunction
(
)
;
nsTimingFunction
:
:
Type
type
=
sf
.
type
(
)
=
=
1
?
nsTimingFunction
:
:
Type
:
:
StepStart
:
nsTimingFunction
:
:
Type
:
:
StepEnd
;
ComputedTimingFunction
result
;
result
.
Init
(
nsTimingFunction
(
type
sf
.
steps
(
)
)
)
;
return
Some
(
result
)
;
}
case
TimingFunction
:
:
TFramesFunction
:
{
FramesFunction
ff
=
aTimingFunction
.
get_FramesFunction
(
)
;
ComputedTimingFunction
result
;
result
.
Init
(
nsTimingFunction
(
nsTimingFunction
:
:
Type
:
:
Frames
ff
.
frames
(
)
)
)
;
return
Some
(
result
)
;
}
default
:
MOZ_ASSERT_UNREACHABLE
(
"
Function
must
be
null
bezier
step
or
frames
"
)
;
break
;
}
return
Nothing
(
)
;
}
}
}
