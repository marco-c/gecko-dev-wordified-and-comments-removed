#
ifndef
mozilla_layers_CompositorThread_h
#
define
mozilla_layers_CompositorThread_h
#
include
"
nsISupportsImpl
.
h
"
#
include
"
ThreadSafeRefcountingWithMainThreadDestruction
.
h
"
class
nsISerialEventTarget
;
class
nsIThread
;
namespace
mozilla
{
class
AbstractThread
;
namespace
layers
{
class
CompositorThreadHolder
final
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING_WITH_MAIN_THREAD_DESTRUCTION
(
CompositorThreadHolder
)
public
:
CompositorThreadHolder
(
)
;
nsISerialEventTarget
*
GetCompositorThread
(
)
const
{
return
mCompositorThread
;
}
static
CompositorThreadHolder
*
GetSingleton
(
)
;
static
bool
IsActive
(
)
{
return
!
!
GetSingleton
(
)
;
}
static
void
Start
(
)
;
static
void
Shutdown
(
)
;
static
bool
IsInCompositorThread
(
)
;
private
:
~
CompositorThreadHolder
(
)
;
const
nsCOMPtr
<
nsIThread
>
mCompositorThread
;
const
RefPtr
<
AbstractThread
>
mCompositorAbstractThread
;
static
already_AddRefed
<
nsIThread
>
CreateCompositorThread
(
)
;
friend
class
CompositorBridgeParent
;
}
;
nsISerialEventTarget
*
CompositorThread
(
)
;
}
}
#
endif
