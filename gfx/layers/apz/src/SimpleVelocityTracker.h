#
ifndef
mozilla_layers_VelocityTracker_h
#
define
mozilla_layers_VelocityTracker_h
#
include
<
utility
>
#
include
<
cstdint
>
#
include
"
Axis
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
layers
{
class
SimpleVelocityTracker
:
public
VelocityTracker
{
public
:
explicit
SimpleVelocityTracker
(
Axis
*
aAxis
)
;
void
StartTracking
(
ParentLayerCoord
aPos
uint32_t
aTimestamp
)
override
;
Maybe
<
float
>
AddPosition
(
ParentLayerCoord
aPos
uint32_t
aTimestampMs
bool
aIsAxisLocked
)
override
;
float
HandleDynamicToolbarMovement
(
uint32_t
aStartTimestampMs
uint32_t
aEndTimestampMs
ParentLayerCoord
aDelta
)
override
;
Maybe
<
float
>
ComputeVelocity
(
uint32_t
aTimestampMs
)
override
;
void
Clear
(
)
override
;
private
:
void
AddVelocityToQueue
(
uint32_t
aTimestampMs
float
aVelocity
)
;
float
ApplyFlingCurveToVelocity
(
float
aVelocity
)
const
;
Axis
*
MOZ_NON_OWNING_REF
mAxis
;
nsTArray
<
std
:
:
pair
<
uint32_t
float
>
>
mVelocityQueue
;
uint32_t
mVelocitySampleTimeMs
;
ParentLayerCoord
mVelocitySamplePos
;
}
;
}
}
#
endif
