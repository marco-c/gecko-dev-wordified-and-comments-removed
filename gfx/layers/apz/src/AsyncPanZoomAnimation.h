#
ifndef
mozilla_layers_AsyncPanZoomAnimation_h_
#
define
mozilla_layers_AsyncPanZoomAnimation_h_
#
include
"
APZUtils
.
h
"
#
include
"
base
/
message_loop
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
FrameMetrics
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
layers
{
class
WheelScrollAnimation
;
class
KeyboardScrollAnimation
;
class
SmoothScrollAnimation
;
class
AsyncPanZoomAnimation
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
AsyncPanZoomAnimation
)
public
:
explicit
AsyncPanZoomAnimation
(
)
=
default
;
virtual
bool
DoSample
(
FrameMetrics
&
aFrameMetrics
const
TimeDuration
&
aDelta
)
=
0
;
bool
Sample
(
FrameMetrics
&
aFrameMetrics
const
TimeDuration
&
aDelta
)
{
if
(
aDelta
.
ToMilliseconds
(
)
<
=
0
)
{
return
true
;
}
return
DoSample
(
aFrameMetrics
aDelta
)
;
}
nsTArray
<
RefPtr
<
Runnable
>
>
TakeDeferredTasks
(
)
{
return
std
:
:
move
(
mDeferredTasks
)
;
}
virtual
KeyboardScrollAnimation
*
AsKeyboardScrollAnimation
(
)
{
return
nullptr
;
}
virtual
WheelScrollAnimation
*
AsWheelScrollAnimation
(
)
{
return
nullptr
;
}
virtual
SmoothScrollAnimation
*
AsSmoothScrollAnimation
(
)
{
return
nullptr
;
}
virtual
bool
WantsRepaints
(
)
{
return
true
;
}
virtual
void
Cancel
(
CancelAnimationFlags
aFlags
)
{
}
protected
:
virtual
~
AsyncPanZoomAnimation
(
)
=
default
;
nsTArray
<
RefPtr
<
Runnable
>
>
mDeferredTasks
;
}
;
}
}
#
endif
