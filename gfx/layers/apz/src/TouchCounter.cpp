#
include
"
TouchCounter
.
h
"
#
include
"
InputData
.
h
"
namespace
mozilla
{
namespace
layers
{
TouchCounter
:
:
TouchCounter
(
)
:
mActiveTouchCount
(
0
)
{
}
void
TouchCounter
:
:
Update
(
const
MultiTouchInput
&
aInput
)
{
switch
(
aInput
.
mType
)
{
case
MultiTouchInput
:
:
MULTITOUCH_START
:
mActiveTouchCount
=
aInput
.
mTouches
.
Length
(
)
;
break
;
case
MultiTouchInput
:
:
MULTITOUCH_END
:
if
(
mActiveTouchCount
>
=
aInput
.
mTouches
.
Length
(
)
)
{
mActiveTouchCount
-
=
aInput
.
mTouches
.
Length
(
)
;
}
else
{
NS_WARNING
(
"
Got
an
unexpected
touchend
/
touchcancel
"
)
;
mActiveTouchCount
=
0
;
}
break
;
case
MultiTouchInput
:
:
MULTITOUCH_CANCEL
:
mActiveTouchCount
=
0
;
break
;
case
MultiTouchInput
:
:
MULTITOUCH_MOVE
:
break
;
}
}
uint32_t
TouchCounter
:
:
GetActiveTouchCount
(
)
const
{
return
mActiveTouchCount
;
}
}
}
