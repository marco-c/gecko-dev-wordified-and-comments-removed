#
include
"
mozilla
/
layers
/
APZUtils
.
h
"
#
include
"
AsyncPanZoomController
.
h
"
namespace
mozilla
{
namespace
layers
{
namespace
apz
{
void
InitializeGlobalState
(
)
{
MOZ_ASSERT
(
NS_IsMainThread
(
)
)
;
AsyncPanZoomController
:
:
InitializeGlobalState
(
)
;
}
const
ScreenMargin
CalculatePendingDisplayPort
(
const
FrameMetrics
&
aFrameMetrics
const
ParentLayerPoint
&
aVelocity
)
{
return
AsyncPanZoomController
:
:
CalculatePendingDisplayPort
(
aFrameMetrics
aVelocity
)
;
}
bool
IsCloseToHorizontal
(
float
aAngle
float
aThreshold
)
{
return
(
aAngle
<
aThreshold
|
|
aAngle
>
(
M_PI
-
aThreshold
)
)
;
}
bool
IsCloseToVertical
(
float
aAngle
float
aThreshold
)
{
return
(
fabs
(
aAngle
-
(
M_PI
/
2
)
)
<
aThreshold
)
;
}
gfxFloat
IntervalOverlap
(
gfxFloat
aTranslation
gfxFloat
aMin
gfxFloat
aMax
)
{
if
(
aTranslation
>
0
)
{
return
std
:
:
max
(
0
.
0
std
:
:
min
(
aMax
aTranslation
)
-
std
:
:
max
(
aMin
0
.
0
)
)
;
}
return
std
:
:
min
(
0
.
0
std
:
:
max
(
aMin
aTranslation
)
-
std
:
:
min
(
aMax
0
.
0
)
)
;
}
bool
IsStuckAtBottom
(
gfxFloat
aTranslation
const
LayerRectAbsolute
&
aInnerRange
const
LayerRectAbsolute
&
aOuterRange
)
{
gfxFloat
diff
=
(
IntervalOverlap
(
aTranslation
aOuterRange
.
Y
(
)
aOuterRange
.
YMost
(
)
)
-
IntervalOverlap
(
aTranslation
aInnerRange
.
Y
(
)
aInnerRange
.
YMost
(
)
)
)
-
aTranslation
;
return
diff
=
=
0
.
0f
&
&
aInnerRange
.
YMost
(
)
>
=
0
;
}
}
}
}
