#
include
"
ClientCanvasRenderer
.
h
"
#
include
"
ClientCanvasLayer
.
h
"
namespace
mozilla
{
namespace
layers
{
CompositableForwarder
*
ClientCanvasRenderer
:
:
GetForwarder
(
)
{
return
mLayer
-
>
Manager
(
)
-
>
AsShadowForwarder
(
)
;
}
bool
ClientCanvasRenderer
:
:
CreateCompositable
(
)
{
if
(
!
mCanvasClient
)
{
auto
compositableFlags
=
TextureFlags
:
:
NO_FLAGS
;
if
(
!
mData
.
mIsAlphaPremult
)
{
compositableFlags
|
=
TextureFlags
:
:
NON_PREMULTIPLIED
;
}
mCanvasClient
=
new
CanvasClient
(
GetForwarder
(
)
compositableFlags
)
;
if
(
mLayer
-
>
HasShadow
(
)
)
{
mCanvasClient
-
>
Connect
(
)
;
GetForwarder
(
)
-
>
AsLayerForwarder
(
)
-
>
Attach
(
mCanvasClient
mLayer
)
;
}
}
return
true
;
}
}
}
