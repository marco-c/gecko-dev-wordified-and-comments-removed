#
include
"
ClientCanvasLayer
.
h
"
#
include
"
GeckoProfiler
.
h
"
#
include
"
ClientLayerManager
.
h
"
#
include
"
nsCOMPtr
.
h
"
namespace
mozilla
{
namespace
layers
{
ClientCanvasLayer
:
:
~
ClientCanvasLayer
(
)
{
MOZ_COUNT_DTOR
(
ClientCanvasLayer
)
;
}
void
ClientCanvasLayer
:
:
RenderLayer
(
)
{
PROFILER_LABEL
(
"
ClientCanvasLayer
"
"
RenderLayer
"
js
:
:
ProfileEntry
:
:
Category
:
:
GRAPHICS
)
;
RenderMaskLayers
(
this
)
;
UpdateCompositableClient
(
)
;
ClientManager
(
)
-
>
Hold
(
this
)
;
}
already_AddRefed
<
CanvasLayer
>
ClientLayerManager
:
:
CreateCanvasLayer
(
)
{
NS_ASSERTION
(
InConstruction
(
)
"
Only
allowed
in
construction
phase
"
)
;
RefPtr
<
ClientCanvasLayer
>
layer
=
new
ClientCanvasLayer
(
this
)
;
CREATE_SHADOW
(
Canvas
)
;
return
layer
.
forget
(
)
;
}
}
}
