#
ifndef
GFX_IMFYCBCRIMAGE_H
#
define
GFX_IMFYCBCRIMAGE_H
#
include
"
mozilla
/
layers
/
TextureD3D11
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
ImageContainer
.
h
"
#
include
"
mfidl
.
h
"
namespace
mozilla
{
namespace
layers
{
class
IMFYCbCrImage
:
public
RecyclingPlanarYCbCrImage
{
public
:
IMFYCbCrImage
(
IMFMediaBuffer
*
aBuffer
IMF2DBuffer
*
a2DBuffer
)
;
virtual
bool
IsValid
(
)
{
return
true
;
}
virtual
TextureClient
*
GetTextureClient
(
KnowsCompositor
*
aForwarder
)
override
;
static
DXGIYCbCrTextureData
*
GetD3D9TextureData
(
Data
aData
gfx
:
:
IntSize
aSize
)
;
static
DXGIYCbCrTextureData
*
GetD3D11TextureData
(
Data
aData
gfx
:
:
IntSize
aSize
)
;
protected
:
TextureClient
*
GetD3D9TextureClient
(
KnowsCompositor
*
aForwarder
)
;
TextureClient
*
GetD3D11TextureClient
(
KnowsCompositor
*
aForwarder
)
;
~
IMFYCbCrImage
(
)
;
RefPtr
<
IMFMediaBuffer
>
mBuffer
;
RefPtr
<
IMF2DBuffer
>
m2DBuffer
;
RefPtr
<
TextureClient
>
mTextureClient
;
}
;
}
}
#
endif
