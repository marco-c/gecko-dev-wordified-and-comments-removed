#
ifndef
mozilla_layers_NativeLayerRootRemoteMacParent_h
#
define
mozilla_layers_NativeLayerRootRemoteMacParent_h
#
include
"
mozilla
/
layers
/
NativeLayerCA
.
h
"
#
include
"
mozilla
/
layers
/
NativeLayerRemoteParent
.
h
"
namespace
mozilla
{
namespace
layers
{
class
NativeLayerRootRemoteMacParent
final
:
public
NativeLayerRemoteParent
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
NativeLayerRootRemoteMacParent
override
)
explicit
NativeLayerRootRemoteMacParent
(
RefPtr
<
NativeLayerRootCA
>
aRealNativeLayerRoot
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvCommitNativeLayerCommands
(
nsTArray
<
NativeLayerCommand
>
&
&
aCommands
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRequestReadback
(
IntSize
aSize
Shmem
*
const
aPixels
)
override
;
protected
:
~
NativeLayerRootRemoteMacParent
(
)
=
default
;
void
HandleCreateLayer
(
uint64_t
aID
IntSize
aSize
bool
aOpaque
)
;
void
HandleCreateLayerForExternalTexture
(
uint64_t
aID
bool
aOpaque
)
;
void
HandleCreateLayerForColor
(
uint64_t
aID
DeviceColor
aColor
)
;
void
HandleLayerDestroyed
(
uint64_t
aID
)
;
void
HandleSetLayers
(
const
nsTArray
<
uint64_t
>
&
aIDs
)
;
void
HandleLayerInfo
(
uint64_t
aID
IntPoint
aPosition
IntRect
aDisplayRect
Maybe
<
IntRect
>
aClipRect
Maybe
<
RoundedRect
>
aRoundedClipRect
Matrix4x4
aTransform
int8_t
aSamplingFilter
bool
aSurfaceIsFlipped
)
;
void
HandleChangedSurface
(
uint64_t
aID
IOSurfacePort
aSurfacePort
bool
aIsDRM
bool
aIsHDR
IntSize
aSize
)
;
RefPtr
<
NativeLayerRootCA
>
mRealNativeLayerRoot
;
UniquePtr
<
NativeLayerRootSnapshotter
>
mSnapshotter
;
nsTHashMap
<
uint64_t
RefPtr
<
NativeLayer
>
>
mKnownLayers
;
}
;
}
}
#
endif
