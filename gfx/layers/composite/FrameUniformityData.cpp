#
include
"
FrameUniformityData
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
mozilla
/
dom
/
APZTestDataBinding
.
h
"
#
include
"
mozilla
/
dom
/
ToJSValue
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
layers
{
using
namespace
gfx
;
bool
FrameUniformityData
:
:
ToJS
(
JS
:
:
MutableHandleValue
aOutValue
JSContext
*
aContext
)
{
dom
:
:
FrameUniformityResults
results
;
dom
:
:
Sequence
<
dom
:
:
FrameUniformity
>
&
layers
=
results
.
mLayerUniformities
.
Construct
(
)
;
for
(
const
auto
&
[
layerAddr
uniformity
]
:
mUniformities
)
{
MOZ_ALWAYS_TRUE
(
layers
.
AppendElement
(
fallible
)
)
;
dom
:
:
FrameUniformity
&
entry
=
layers
.
LastElement
(
)
;
entry
.
mLayerAddress
.
Construct
(
)
=
layerAddr
;
entry
.
mFrameUniformity
.
Construct
(
)
=
uniformity
;
}
return
dom
:
:
ToJSValue
(
aContext
results
aOutValue
)
;
}
}
}
