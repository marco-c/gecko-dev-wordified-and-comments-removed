#
ifndef
SURFACE_DMABUF_H
#
define
SURFACE_DMABUF_H
#
include
"
ImageContainer
.
h
"
class
DMABufSurface
;
namespace
mozilla
{
namespace
layers
{
class
TextureClient
;
class
DMABUFSurfaceImage
:
public
Image
{
public
:
explicit
DMABUFSurfaceImage
(
DMABufSurface
*
aSurface
)
;
~
DMABUFSurfaceImage
(
)
;
DMABufSurface
*
GetSurface
(
)
{
return
mSurface
;
}
gfx
:
:
IntSize
GetSize
(
)
const
override
;
already_AddRefed
<
gfx
:
:
SourceSurface
>
GetAsSourceSurface
(
)
override
;
nsresult
BuildSurfaceDescriptorBuffer
(
SurfaceDescriptorBuffer
&
aSdBuffer
BuildSdbFlags
aFlags
const
std
:
:
function
<
MemoryOrShmem
(
uint32_t
)
>
&
aAllocate
)
override
;
TextureClient
*
GetTextureClient
(
KnowsCompositor
*
aKnowsCompositor
)
override
;
private
:
RefPtr
<
DMABufSurface
>
mSurface
;
RefPtr
<
TextureClient
>
mTextureClient
;
}
;
}
}
#
endif
