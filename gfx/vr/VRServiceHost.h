#
ifndef
GFX_VR_SERVICE_HOST_H
#
define
GFX_VR_SERVICE_HOST_H
namespace
mozilla
{
namespace
gfx
{
class
VRService
;
class
VRServiceHost
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
mozilla
:
:
gfx
:
:
VRServiceHost
)
public
:
static
void
Init
(
bool
aEnableVRProcess
)
;
static
VRServiceHost
*
Get
(
)
;
void
Refresh
(
)
;
void
StartService
(
)
;
void
StopService
(
)
;
void
Shutdown
(
)
;
#
if
!
defined
(
MOZ_WIDGET_ANDROID
)
void
CreateService
(
volatile
VRExternalShmem
*
aShmem
)
;
#
endif
void
PuppetSubmit
(
const
InfallibleTArray
<
uint64_t
>
&
aBuffer
)
;
void
PuppetReset
(
)
;
bool
PuppetHasEnded
(
)
;
protected
:
private
:
explicit
VRServiceHost
(
bool
aEnableVRProcess
)
;
~
VRServiceHost
(
)
;
bool
mPuppetActive
;
#
if
!
defined
(
MOZ_WIDGET_ANDROID
)
void
RefreshVRProcess
(
)
;
bool
NeedVRProcess
(
)
;
void
CreateVRProcess
(
)
;
void
ShutdownVRProcess
(
)
;
RefPtr
<
VRService
>
mVRService
;
bool
mVRProcessEnabled
;
bool
mVRProcessStarted
;
bool
mVRServiceRequested
;
#
endif
}
;
}
}
#
endif
