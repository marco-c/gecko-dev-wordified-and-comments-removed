#
ifndef
GFX_VR_GPU_PARENT_H
#
define
GFX_VR_GPU_PARENT_H
#
include
"
mozilla
/
gfx
/
PVRGPUParent
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
VRGPUParent
final
:
public
PVRGPUParent
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
VRGPUParent
)
public
:
explicit
VRGPUParent
(
ProcessId
aChildProcessId
)
;
virtual
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
static
RefPtr
<
VRGPUParent
>
CreateForGPU
(
Endpoint
<
PVRGPUParent
>
&
&
aEndpoint
)
;
protected
:
~
VRGPUParent
(
)
{
}
void
Bind
(
Endpoint
<
PVRGPUParent
>
&
&
aEndpoint
)
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvInitVRService
(
const
nsCString
&
aId
const
uint64_t
&
aGPUHandle
const
uint64_t
&
aVRHandle
const
uint64_t
&
aShmemFile
)
override
;
private
:
void
DeferredDestroy
(
)
;
RefPtr
<
VRGPUParent
>
mSelfRef
;
#
if
defined
(
XP_WIN
)
|
|
defined
(
XP_MACOSX
)
|
|
(
defined
(
XP_LINUX
)
&
&
!
defined
(
MOZ_WIDGET_ANDROID
)
)
RefPtr
<
VRService
>
mVRService
;
#
endif
}
;
}
}
#
endif
