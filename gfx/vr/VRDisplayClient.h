#
ifndef
GFX_VR_DISPLAY_CLIENT_H
#
define
GFX_VR_DISPLAY_CLIENT_H
#
include
"
nsIScreen
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
dom
/
VRDisplayBinding
.
h
"
#
include
"
gfxVR
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
VRDisplayPresentation
;
class
VRManagerChild
;
class
VRDisplayClient
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
VRDisplayClient
)
explicit
VRDisplayClient
(
const
VRDisplayInfo
&
aDisplayInfo
)
;
void
UpdateDisplayInfo
(
const
VRDisplayInfo
&
aDisplayInfo
)
;
const
VRDisplayInfo
&
GetDisplayInfo
(
)
const
{
return
mDisplayInfo
;
}
virtual
VRHMDSensorState
GetSensorState
(
)
;
virtual
VRHMDSensorState
GetImmediateSensorState
(
)
;
virtual
void
ZeroSensor
(
)
;
already_AddRefed
<
VRDisplayPresentation
>
BeginPresentation
(
const
nsTArray
<
dom
:
:
VRLayer
>
&
aLayers
)
;
void
PresentationDestroyed
(
)
;
void
NotifyVsync
(
)
;
void
NotifyVRVsync
(
)
;
bool
GetIsConnected
(
)
const
;
bool
GetIsPresenting
(
)
const
;
void
NotifyDisconnected
(
)
;
protected
:
virtual
~
VRDisplayClient
(
)
;
VRDisplayInfo
mDisplayInfo
;
bool
bLastEventWasPresenting
;
TimeStamp
mLastVSyncTime
;
int
mPresentationCount
;
}
;
}
}
#
endif
