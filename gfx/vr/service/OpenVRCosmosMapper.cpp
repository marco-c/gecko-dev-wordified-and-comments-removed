#
include
"
OpenVRCosmosMapper
.
h
"
#
include
"
moz_external_vr
.
h
"
#
include
"
VRSession
.
h
"
namespace
mozilla
:
:
gfx
{
void
OpenVRCosmosMapper
:
:
UpdateButtons
(
VRControllerState
&
aControllerState
ControllerInfo
&
aControllerInfo
)
{
mNumButtons
=
mNumAxes
=
0
;
GetTriggerValueFromAction
(
aControllerState
aControllerInfo
.
mActionTrigger_Value
)
;
GetButtonValueFromAction
(
aControllerState
aControllerInfo
.
mActionGrip_Pressed
aControllerInfo
.
mActionGrip_Touched
)
;
+
+
mNumButtons
;
GetButtonValueFromAction
(
aControllerState
aControllerInfo
.
mActionThumbstick_Pressed
aControllerInfo
.
mActionThumbstick_Touched
)
;
GetButtonValueFromAction
(
aControllerState
aControllerInfo
.
mActionA_Pressed
aControllerInfo
.
mActionA_Touched
)
;
GetButtonValueFromAction
(
aControllerState
aControllerInfo
.
mActionB_Pressed
aControllerInfo
.
mActionB_Touched
)
;
GetButtonValueFromAction
(
aControllerState
aControllerInfo
.
mActionBumper_Pressed
aControllerInfo
.
mActionBumper_Pressed
)
;
mNumAxes
+
=
2
;
GetAxisValueFromAction
(
aControllerState
aControllerInfo
.
mActionThumbstick_Analog
)
;
aControllerState
.
numButtons
=
mNumButtons
;
aControllerState
.
numAxes
=
mNumAxes
;
}
}
