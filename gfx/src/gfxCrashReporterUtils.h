#
ifndef
gfxCrashReporterUtils_h__
#
define
gfxCrashReporterUtils_h__
#
include
"
nsString
.
h
"
namespace
mozilla
{
class
ScopedGfxFeatureReporter
{
public
:
explicit
ScopedGfxFeatureReporter
(
const
char
*
aFeature
bool
aForce
=
false
)
:
mFeature
(
aFeature
)
mStatusChar
(
'
-
'
)
mStatusNumber
(
0
)
{
WriteAppNote
(
aForce
?
'
!
'
:
'
?
'
0
)
;
}
~
ScopedGfxFeatureReporter
(
)
{
WriteAppNote
(
mStatusChar
mStatusNumber
)
;
}
void
SetSuccessful
(
)
{
mStatusChar
=
'
+
'
;
}
void
SetSuccessful
(
int32_t
aNumber
)
{
mStatusChar
=
'
+
'
;
mStatusNumber
=
aNumber
;
}
static
void
AppNote
(
const
nsACString
&
aMessage
)
;
class
AppNoteWritingRunnable
;
protected
:
const
char
*
mFeature
;
char
mStatusChar
;
int32_t
mStatusNumber
;
private
:
void
WriteAppNote
(
char
statusChar
int32_t
statusNumber
)
;
}
;
}
#
endif
