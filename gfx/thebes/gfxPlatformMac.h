#
ifndef
GFX_PLATFORM_MAC_H
#
define
GFX_PLATFORM_MAC_H
#
include
"
nsTArrayForwardDeclare
.
h
"
#
include
"
gfxPlatform
.
h
"
#
include
"
mozilla
/
LookAndFeel
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
DrawTarget
;
class
VsyncSource
;
}
}
class
gfxPlatformMac
:
public
gfxPlatform
{
public
:
gfxPlatformMac
(
)
;
virtual
~
gfxPlatformMac
(
)
;
static
gfxPlatformMac
*
GetPlatform
(
)
{
return
(
gfxPlatformMac
*
)
gfxPlatform
:
:
GetPlatform
(
)
;
}
bool
UsesTiling
(
)
const
override
;
bool
ContentUsesTiling
(
)
const
override
;
virtual
already_AddRefed
<
gfxASurface
>
CreateOffscreenSurface
(
const
IntSize
&
aSize
gfxImageFormat
aFormat
)
override
;
gfxFontGroup
*
CreateFontGroup
(
const
mozilla
:
:
FontFamilyList
&
aFontFamilyList
const
gfxFontStyle
*
aStyle
gfxTextPerfMetrics
*
aTextPerf
gfxUserFontSet
*
aUserFontSet
gfxFloat
aDevToCssSize
)
override
;
virtual
gfxPlatformFontList
*
CreatePlatformFontList
(
)
override
;
void
ReadSystemFontList
(
InfallibleTArray
<
mozilla
:
:
dom
:
:
SystemFontListEntry
>
*
aFontList
)
override
;
bool
IsFontFormatSupported
(
uint32_t
aFormatFlags
)
override
;
virtual
void
GetCommonFallbackFonts
(
uint32_t
aCh
uint32_t
aNextCh
Script
aRunScript
nsTArray
<
const
char
*
>
&
aFontList
)
override
;
static
void
LookupSystemFont
(
mozilla
:
:
LookAndFeel
:
:
FontID
aSystemFontID
nsACString
&
aSystemFontName
gfxFontStyle
&
aFontStyle
)
;
virtual
bool
SupportsApzWheelInput
(
)
const
override
{
return
true
;
}
bool
RespectsFontStyleSmoothing
(
)
const
override
{
return
true
;
}
bool
RequiresAcceleratedGLContextForCompositorOGL
(
)
const
override
{
return
true
;
}
virtual
already_AddRefed
<
mozilla
:
:
gfx
:
:
VsyncSource
>
CreateHardwareVsyncSource
(
)
override
;
uint32_t
GetAntiAliasingThreshold
(
)
{
return
mFontAntiAliasingThreshold
;
}
protected
:
bool
AccelerateLayersByDefault
(
)
override
;
BackendPrefsData
GetBackendPrefs
(
)
const
override
;
bool
CheckVariationFontSupport
(
)
override
;
private
:
virtual
void
GetPlatformCMSOutputProfile
(
void
*
&
mem
size_t
&
size
)
override
;
static
uint32_t
ReadAntiAliasingThreshold
(
)
;
uint32_t
mFontAntiAliasingThreshold
;
}
;
#
endif
