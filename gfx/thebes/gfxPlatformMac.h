#
ifndef
GFX_PLATFORM_MAC_H
#
define
GFX_PLATFORM_MAC_H
#
include
"
nsTArrayForwardDeclare
.
h
"
#
include
"
gfxPlatform
.
h
"
#
include
"
mozilla
/
LookAndFeel
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
DrawTarget
;
class
VsyncSource
;
}
}
class
gfxPlatformMac
:
public
gfxPlatform
{
public
:
gfxPlatformMac
(
)
;
virtual
~
gfxPlatformMac
(
)
;
static
gfxPlatformMac
*
GetPlatform
(
)
{
return
(
gfxPlatformMac
*
)
gfxPlatform
:
:
GetPlatform
(
)
;
}
virtual
already_AddRefed
<
gfxASurface
>
CreateOffscreenSurface
(
const
IntSize
&
aSize
gfxImageFormat
aFormat
)
override
;
already_AddRefed
<
mozilla
:
:
gfx
:
:
ScaledFont
>
GetScaledFontForFont
(
mozilla
:
:
gfx
:
:
DrawTarget
*
aTarget
gfxFont
*
aFont
)
override
;
nsresult
GetStandardFamilyName
(
const
nsAString
&
aFontName
nsAString
&
aFamilyName
)
override
;
gfxFontGroup
*
CreateFontGroup
(
const
mozilla
:
:
FontFamilyList
&
aFontFamilyList
const
gfxFontStyle
*
aStyle
gfxTextPerfMetrics
*
aTextPerf
gfxUserFontSet
*
aUserFontSet
gfxFloat
aDevToCssSize
)
override
;
virtual
gfxFontEntry
*
LookupLocalFont
(
const
nsAString
&
aFontName
uint16_t
aWeight
int16_t
aStretch
uint8_t
aStyle
)
override
;
virtual
gfxPlatformFontList
*
CreatePlatformFontList
(
)
override
;
virtual
gfxFontEntry
*
MakePlatformFont
(
const
nsAString
&
aFontName
uint16_t
aWeight
int16_t
aStretch
uint8_t
aStyle
const
uint8_t
*
aFontData
uint32_t
aLength
)
override
;
bool
IsFontFormatSupported
(
nsIURI
*
aFontURI
uint32_t
aFormatFlags
)
override
;
nsresult
GetFontList
(
nsIAtom
*
aLangGroup
const
nsACString
&
aGenericFamily
nsTArray
<
nsString
>
&
aListOfFonts
)
override
;
nsresult
UpdateFontList
(
)
override
;
virtual
void
GetCommonFallbackFonts
(
uint32_t
aCh
uint32_t
aNextCh
int32_t
aRunScript
nsTArray
<
const
char
*
>
&
aFontList
)
override
;
static
void
LookupSystemFont
(
mozilla
:
:
LookAndFeel
:
:
FontID
aSystemFontID
nsAString
&
aSystemFontName
gfxFontStyle
&
aFontStyle
float
aDevPixPerCSSPixel
)
;
virtual
bool
CanRenderContentToDataSurface
(
)
const
override
{
return
true
;
}
virtual
bool
SupportsApzWheelInput
(
)
const
override
{
return
true
;
}
bool
RequiresAcceleratedGLContextForCompositorOGL
(
)
const
override
{
return
true
;
}
virtual
bool
UseAcceleratedSkiaCanvas
(
)
override
;
virtual
bool
UseProgressivePaint
(
)
override
;
virtual
already_AddRefed
<
mozilla
:
:
gfx
:
:
VsyncSource
>
CreateHardwareVsyncSource
(
)
override
;
uint32_t
GetAntiAliasingThreshold
(
)
{
return
mFontAntiAliasingThreshold
;
}
protected
:
bool
AccelerateLayersByDefault
(
)
override
;
private
:
virtual
void
GetPlatformCMSOutputProfile
(
void
*
&
mem
size_t
&
size
)
override
;
static
uint32_t
ReadAntiAliasingThreshold
(
)
;
uint32_t
mFontAntiAliasingThreshold
;
}
;
#
endif
