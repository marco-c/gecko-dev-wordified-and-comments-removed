#
ifndef
GFX_PLATFORM_ANDROID_H
#
define
GFX_PLATFORM_ANDROID_H
#
include
"
gfxFT2Fonts
.
h
"
#
include
"
gfxPlatform
.
h
"
#
include
"
gfxUserFontSet
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
dom
{
class
FontListEntry
;
}
;
}
;
using
mozilla
:
:
dom
:
:
FontListEntry
;
typedef
struct
FT_LibraryRec_
*
FT_Library
;
class
gfxAndroidPlatform
:
public
gfxPlatform
{
public
:
gfxAndroidPlatform
(
)
;
virtual
~
gfxAndroidPlatform
(
)
;
static
gfxAndroidPlatform
*
GetPlatform
(
)
{
return
(
gfxAndroidPlatform
*
)
gfxPlatform
:
:
GetPlatform
(
)
;
}
virtual
already_AddRefed
<
gfxASurface
>
CreateOffscreenSurface
(
const
IntSize
&
aSize
gfxImageFormat
aFormat
)
override
;
virtual
gfxImageFormat
GetOffscreenFormat
(
)
override
{
return
mOffscreenFormat
;
}
already_AddRefed
<
mozilla
:
:
gfx
:
:
ScaledFont
>
GetScaledFontForFont
(
mozilla
:
:
gfx
:
:
DrawTarget
*
aTarget
gfxFont
*
aFont
)
override
;
void
GetSystemFontList
(
InfallibleTArray
<
FontListEntry
>
*
retValue
)
;
virtual
bool
IsFontFormatSupported
(
nsIURI
*
aFontURI
uint32_t
aFormatFlags
)
override
;
virtual
gfxPlatformFontList
*
CreatePlatformFontList
(
)
override
;
virtual
void
GetCommonFallbackFonts
(
uint32_t
aCh
uint32_t
aNextCh
Script
aRunScript
nsTArray
<
const
char
*
>
&
aFontList
)
override
;
gfxFontGroup
*
CreateFontGroup
(
const
mozilla
:
:
FontFamilyList
&
aFontFamilyList
const
gfxFontStyle
*
aStyle
gfxTextPerfMetrics
*
aTextPerf
gfxUserFontSet
*
aUserFontSet
gfxFloat
aDevToCssSize
)
override
;
virtual
bool
FontHintingEnabled
(
)
override
;
virtual
bool
RequiresLinearZoom
(
)
override
;
FT_Library
GetFTLibrary
(
)
;
virtual
bool
CanRenderContentToDataSurface
(
)
const
override
{
return
true
;
}
virtual
already_AddRefed
<
mozilla
:
:
gfx
:
:
VsyncSource
>
CreateHardwareVsyncSource
(
)
override
;
virtual
bool
SupportsApzTouchInput
(
)
const
override
{
return
true
;
}
protected
:
bool
AccelerateLayersByDefault
(
)
override
{
return
true
;
}
private
:
gfxImageFormat
mOffscreenFormat
;
}
;
#
endif
