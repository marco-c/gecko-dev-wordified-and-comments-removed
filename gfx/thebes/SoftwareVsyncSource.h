#
ifndef
GFX_SOFTWARE_VSYNC_SOURCE_H
#
define
GFX_SOFTWARE_VSYNC_SOURCE_H
#
include
"
mozilla
/
Monitor
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
base
/
thread
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
VsyncSource
.
h
"
namespace
mozilla
:
:
gfx
{
class
SoftwareVsyncSource
:
public
VsyncSource
{
public
:
explicit
SoftwareVsyncSource
(
)
;
virtual
~
SoftwareVsyncSource
(
)
;
void
EnableVsync
(
)
override
;
void
DisableVsync
(
)
override
;
bool
IsVsyncEnabled
(
)
override
;
bool
IsInSoftwareVsyncThread
(
)
;
void
NotifyVsync
(
const
TimeStamp
&
aVsyncTimestamp
const
TimeStamp
&
aOutputTimestamp
)
override
;
TimeDuration
GetVsyncRate
(
)
override
;
void
ScheduleNextVsync
(
TimeStamp
aVsyncTimestamp
)
;
void
Shutdown
(
)
override
;
protected
:
TimeDuration
mVsyncRate
;
base
:
:
Thread
*
mVsyncThread
;
RefPtr
<
CancelableRunnable
>
mCurrentVsyncTask
;
bool
mVsyncEnabled
;
}
;
}
#
endif
