#
ifndef
MOZILLA_GFX_PRINTTARGETSKPDF_H
#
define
MOZILLA_GFX_PRINTTARGETSKPDF_H
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
PrintTarget
.
h
"
#
include
"
skia
/
include
/
core
/
SkCanvas
.
h
"
#
include
"
skia
/
include
/
docs
/
SkPDFDocument
.
h
"
#
include
"
skia
/
include
/
core
/
SkStream
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
PrintTargetSkPDF
final
:
public
PrintTarget
{
public
:
static
already_AddRefed
<
PrintTargetSkPDF
>
CreateOrNull
(
UniquePtr
<
SkWStream
>
aStream
const
IntSize
&
aSizeInPoints
)
;
static
already_AddRefed
<
PrintTargetSkPDF
>
CreateOrNull
(
nsIOutputStream
*
aStream
const
IntSize
&
aSizeInPoints
)
;
nsresult
BeginPrinting
(
const
nsAString
&
aTitle
const
nsAString
&
aPrintToFileName
int32_t
aStartPage
int32_t
aEndPage
)
override
;
nsresult
EndPrinting
(
)
override
;
void
Finish
(
)
override
;
nsresult
BeginPage
(
const
IntSize
&
aSizeInPoints
)
override
;
nsresult
EndPage
(
)
override
;
already_AddRefed
<
DrawTarget
>
MakeDrawTarget
(
const
IntSize
&
aSize
DrawEventRecorder
*
aRecorder
=
nullptr
)
final
;
already_AddRefed
<
DrawTarget
>
GetReferenceDrawTarget
(
)
final
;
private
:
PrintTargetSkPDF
(
const
IntSize
&
aSize
UniquePtr
<
SkWStream
>
aStream
)
;
virtual
~
PrintTargetSkPDF
(
)
;
sk_sp
<
SkDocument
>
mPDFDoc
;
UniquePtr
<
SkWStream
>
mOStream
;
SkCanvas
*
mPageCanvas
;
RefPtr
<
DrawTarget
>
mPageDT
;
sk_sp
<
SkDocument
>
mRefPDFDoc
;
SkCanvas
*
mRefCanvas
;
SkDynamicMemoryWStream
mRefOStream
;
}
;
}
}
#
endif
