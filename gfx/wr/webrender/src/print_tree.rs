pub
struct
PrintTree
{
level
:
u32
queued_item
:
Option
<
String
>
}
pub
trait
PrintTreePrinter
{
fn
new_level
(
&
mut
self
title
:
String
)
;
fn
end_level
(
&
mut
self
)
;
fn
add_item
(
&
mut
self
text
:
String
)
;
}
impl
PrintTree
{
pub
fn
new
(
title
:
&
str
)
-
>
PrintTree
{
println
!
(
"
\
u
{
250c
}
{
}
"
title
)
;
PrintTree
{
level
:
1
queued_item
:
None
}
}
fn
print_level_prefix
(
&
self
)
{
for
_
in
0
.
.
self
.
level
{
print
!
(
"
\
u
{
2502
}
"
)
;
}
}
fn
flush_queued_item
(
&
mut
self
prefix
:
&
str
)
{
if
let
Some
(
queued_item
)
=
self
.
queued_item
.
take
(
)
{
self
.
print_level_prefix
(
)
;
println
!
(
"
{
}
{
}
"
prefix
queued_item
)
;
}
}
}
impl
PrintTreePrinter
for
PrintTree
{
fn
new_level
(
&
mut
self
title
:
String
)
{
self
.
flush_queued_item
(
"
\
u
{
251C
}
\
u
{
2500
}
"
)
;
self
.
print_level_prefix
(
)
;
println
!
(
"
\
u
{
251C
}
\
u
{
2500
}
{
}
"
title
)
;
self
.
level
=
self
.
level
+
1
;
}
fn
end_level
(
&
mut
self
)
{
self
.
flush_queued_item
(
"
\
u
{
2514
}
\
u
{
2500
}
"
)
;
self
.
level
=
self
.
level
-
1
;
}
fn
add_item
(
&
mut
self
text
:
String
)
{
self
.
flush_queued_item
(
"
\
u
{
251C
}
\
u
{
2500
}
"
)
;
self
.
queued_item
=
Some
(
text
)
;
}
}
impl
Drop
for
PrintTree
{
fn
drop
(
&
mut
self
)
{
self
.
flush_queued_item
(
"
\
u
{
9492
}
\
u
{
9472
}
"
)
;
}
}
