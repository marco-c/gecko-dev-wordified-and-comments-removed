#
ifndef
SKSL_FIELDACCESS
#
define
SKSL_FIELDACCESS
#
include
"
src
/
sksl
/
SkSLUtil
.
h
"
#
include
"
src
/
sksl
/
ir
/
SkSLExpression
.
h
"
namespace
SkSL
{
struct
FieldAccess
:
public
Expression
{
enum
OwnerKind
{
kDefault_OwnerKind
kAnonymousInterfaceBlock_OwnerKind
}
;
FieldAccess
(
std
:
:
unique_ptr
<
Expression
>
base
int
fieldIndex
OwnerKind
ownerKind
=
kDefault_OwnerKind
)
:
INHERITED
(
base
-
>
fOffset
kFieldAccess_Kind
*
base
-
>
fType
.
fields
(
)
[
fieldIndex
]
.
fType
)
fBase
(
std
:
:
move
(
base
)
)
fFieldIndex
(
fieldIndex
)
fOwnerKind
(
ownerKind
)
{
}
bool
hasSideEffects
(
)
const
override
{
return
fBase
-
>
hasSideEffects
(
)
;
}
std
:
:
unique_ptr
<
Expression
>
clone
(
)
const
override
{
return
std
:
:
unique_ptr
<
Expression
>
(
new
FieldAccess
(
fBase
-
>
clone
(
)
fFieldIndex
fOwnerKind
)
)
;
}
String
description
(
)
const
override
{
return
fBase
-
>
description
(
)
+
"
.
"
+
fBase
-
>
fType
.
fields
(
)
[
fFieldIndex
]
.
fName
;
}
std
:
:
unique_ptr
<
Expression
>
fBase
;
const
int
fFieldIndex
;
const
OwnerKind
fOwnerKind
;
typedef
Expression
INHERITED
;
}
;
}
#
endif
