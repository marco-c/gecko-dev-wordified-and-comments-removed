#
include
"
src
/
sksl
/
codegen
/
SkSLSPIRVtoHLSL
.
h
"
#
if
defined
(
SK_ENABLE_SPIRV_CROSS
)
#
include
<
spirv_hlsl
.
hpp
>
namespace
SkSL
{
bool
SPIRVtoHLSL
(
const
std
:
:
string
&
spirv
std
:
:
string
*
hlsl
)
{
spirv_cross
:
:
CompilerHLSL
hlslCompiler
(
(
const
uint32_t
*
)
spirv
.
c_str
(
)
spirv
.
size
(
)
/
sizeof
(
uint32_t
)
)
;
spirv_cross
:
:
CompilerGLSL
:
:
Options
optionsGLSL
;
optionsGLSL
.
force_zero_initialized_variables
=
true
;
spirv_cross
:
:
CompilerHLSL
:
:
Options
optionsHLSL
;
optionsHLSL
.
shader_model
=
51
;
optionsHLSL
.
point_coord_compat
=
true
;
optionsHLSL
.
point_size_compat
=
true
;
hlslCompiler
.
set_common_options
(
optionsGLSL
)
;
hlslCompiler
.
set_hlsl_options
(
optionsHLSL
)
;
hlsl
-
>
assign
(
hlslCompiler
.
compile
(
)
)
;
return
true
;
}
}
#
else
namespace
SkSL
{
bool
SPIRVtoHLSL
(
const
std
:
:
string
&
std
:
:
string
*
)
{
return
false
;
}
}
#
endif
