#
ifndef
SkColorSpaceXformSteps_DEFINED
#
define
SkColorSpaceXformSteps_DEFINED
#
include
"
include
/
core
/
SkColorSpace
.
h
"
#
include
"
include
/
core
/
SkImageInfo
.
h
"
class
SkRasterPipeline
;
struct
SkColorSpaceXformSteps
{
static
bool
Required
(
SkColorSpace
*
src
SkColorSpace
*
dst
)
;
struct
Flags
{
bool
unpremul
=
false
;
bool
linearize
=
false
;
bool
gamut_transform
=
false
;
bool
encode
=
false
;
bool
premul
=
false
;
uint32_t
mask
(
)
const
{
return
(
unpremul
?
1
:
0
)
|
(
linearize
?
2
:
0
)
|
(
gamut_transform
?
4
:
0
)
|
(
encode
?
8
:
0
)
|
(
premul
?
16
:
0
)
;
}
}
;
SkColorSpaceXformSteps
(
SkColorSpace
*
src
SkAlphaType
srcAT
SkColorSpace
*
dst
SkAlphaType
dstAT
)
;
void
apply
(
float
rgba
[
4
]
)
const
;
void
apply
(
SkRasterPipeline
*
bool
src_is_normalized
)
const
;
void
apply
(
SkRasterPipeline
*
p
SkColorType
srcCT
)
const
{
#
if
0
this
-
>
apply
(
p
srcCT
<
kRGBA_F16_SkColorType
)
;
#
else
this
-
>
apply
(
p
srcCT
<
kRGBA_F16Norm_SkColorType
)
;
#
endif
}
Flags
flags
;
bool
srcTF_is_sRGB
dstTF_is_sRGB
;
skcms_TransferFunction
srcTF
dstTFInv
;
float
src_to_dst_matrix
[
9
]
;
}
;
#
endif
