#
include
"
src
/
core
/
SkWritePixelsRec
.
h
"
#
include
"
include
/
core
/
SkRect
.
h
"
bool
SkWritePixelsRec
:
:
trim
(
int
dstWidth
int
dstHeight
)
{
if
(
nullptr
=
=
fPixels
|
|
fRowBytes
<
fInfo
.
minRowBytes
(
)
)
{
return
false
;
}
if
(
0
>
=
fInfo
.
width
(
)
|
|
0
>
=
fInfo
.
height
(
)
)
{
return
false
;
}
int
x
=
fX
;
int
y
=
fY
;
SkIRect
dstR
=
SkIRect
:
:
MakeXYWH
(
x
y
fInfo
.
width
(
)
fInfo
.
height
(
)
)
;
if
(
!
dstR
.
intersect
(
{
0
0
dstWidth
dstHeight
}
)
)
{
return
false
;
}
if
(
x
>
0
)
{
x
=
0
;
}
if
(
y
>
0
)
{
y
=
0
;
}
fPixels
=
(
(
const
char
*
)
fPixels
+
-
y
*
fRowBytes
+
-
x
*
fInfo
.
bytesPerPixel
(
)
)
;
fInfo
=
fInfo
.
makeDimensions
(
dstR
.
size
(
)
)
;
fX
=
dstR
.
x
(
)
;
fY
=
dstR
.
y
(
)
;
return
true
;
}
