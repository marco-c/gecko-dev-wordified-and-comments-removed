#
ifndef
SkBitmapProcState_utils_DEFINED
#
define
SkBitmapProcState_utils_DEFINED
#
include
"
SkTo
.
h
"
static
inline
unsigned
SK_USHIFT16
(
unsigned
x
)
{
return
x
>
>
16
;
}
static
inline
bool
can_truncate_to_fixed_for_decal
(
SkFixed
fx
SkFixed
dx
int
count
unsigned
max
)
{
SkASSERT
(
count
>
0
)
;
if
(
dx
<
=
SK_Fixed1
/
256
)
{
return
false
;
}
if
(
(
unsigned
)
SkFixedFloorToInt
(
fx
)
>
=
max
)
{
return
false
;
}
const
uint64_t
lastFx
=
fx
+
sk_64_mul
(
dx
count
-
1
)
;
return
SkTFitsIn
<
int32_t
>
(
lastFx
)
&
&
(
unsigned
)
SkFixedFloorToInt
(
SkTo
<
int32_t
>
(
lastFx
)
)
<
max
;
}
#
endif
