#
ifndef
SkAutoPixmapStorage_DEFINED
#
define
SkAutoPixmapStorage_DEFINED
#
include
"
include
/
core
/
SkPixmap
.
h
"
#
include
"
include
/
private
/
base
/
SkMalloc
.
h
"
class
SkData
;
class
SkAutoPixmapStorage
:
public
SkPixmap
{
public
:
SkAutoPixmapStorage
(
)
;
~
SkAutoPixmapStorage
(
)
;
SkAutoPixmapStorage
(
SkAutoPixmapStorage
&
&
other
)
;
SkAutoPixmapStorage
&
operator
=
(
SkAutoPixmapStorage
&
&
other
)
;
bool
tryAlloc
(
const
SkImageInfo
&
)
;
void
alloc
(
const
SkImageInfo
&
)
;
static
size_t
AllocSize
(
const
SkImageInfo
&
info
size_t
*
rowBytes
)
;
void
*
SK_WARN_UNUSED_RESULT
detachPixels
(
)
;
sk_sp
<
SkData
>
SK_WARN_UNUSED_RESULT
detachPixelsAsData
(
)
;
void
reset
(
)
{
this
-
>
freeStorage
(
)
;
this
-
>
INHERITED
:
:
reset
(
)
;
}
void
reset
(
const
SkImageInfo
&
info
const
void
*
addr
size_t
rb
)
{
this
-
>
freeStorage
(
)
;
this
-
>
INHERITED
:
:
reset
(
info
addr
rb
)
;
}
bool
SK_WARN_UNUSED_RESULT
reset
(
const
SkMask
&
mask
)
{
this
-
>
freeStorage
(
)
;
return
this
-
>
INHERITED
:
:
reset
(
mask
)
;
}
private
:
void
*
fStorage
;
void
freeStorage
(
)
{
sk_free
(
fStorage
)
;
fStorage
=
nullptr
;
}
using
INHERITED
=
SkPixmap
;
}
;
#
endif
