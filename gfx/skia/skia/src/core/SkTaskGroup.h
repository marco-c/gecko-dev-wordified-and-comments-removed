#
ifndef
SkTaskGroup_DEFINED
#
define
SkTaskGroup_DEFINED
#
include
<
functional
>
#
include
"
SkTypes
.
h
"
#
include
"
SkAtomics
.
h
"
#
include
"
SkTemplates
.
h
"
class
SkTaskGroup
:
SkNoncopyable
{
public
:
struct
Enabler
:
SkNoncopyable
{
explicit
Enabler
(
int
threads
=
-
1
)
;
~
Enabler
(
)
;
}
;
SkTaskGroup
(
)
;
~
SkTaskGroup
(
)
{
this
-
>
wait
(
)
;
}
void
add
(
std
:
:
function
<
void
(
void
)
>
fn
)
;
void
batch
(
int
N
std
:
:
function
<
void
(
int
)
>
fn
)
;
void
wait
(
)
;
private
:
SkAtomic
<
int32_t
>
fPending
;
}
;
#
endif
