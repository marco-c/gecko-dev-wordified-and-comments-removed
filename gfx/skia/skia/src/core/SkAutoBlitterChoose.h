#
ifndef
SkAutoBlitterChoose_DEFINED
#
define
SkAutoBlitterChoose_DEFINED
#
include
"
include
/
private
/
base
/
SkMacros
.
h
"
#
include
"
src
/
base
/
SkArenaAlloc
.
h
"
#
include
"
src
/
core
/
SkBlitter
.
h
"
#
include
"
src
/
core
/
SkDrawBase
.
h
"
#
include
"
src
/
core
/
SkMatrixProvider
.
h
"
#
include
"
src
/
core
/
SkRasterClip
.
h
"
#
include
"
src
/
core
/
SkSurfacePriv
.
h
"
class
SkMatrix
;
class
SkPaint
;
class
SkPixmap
;
class
SkAutoBlitterChoose
:
SkNoncopyable
{
public
:
SkAutoBlitterChoose
(
)
{
}
SkAutoBlitterChoose
(
const
SkDrawBase
&
draw
const
SkMatrixProvider
*
matrixProvider
const
SkPaint
&
paint
bool
drawCoverage
=
false
)
{
this
-
>
choose
(
draw
matrixProvider
paint
drawCoverage
)
;
}
SkBlitter
*
operator
-
>
(
)
{
return
fBlitter
;
}
SkBlitter
*
get
(
)
const
{
return
fBlitter
;
}
SkBlitter
*
choose
(
const
SkDrawBase
&
draw
const
SkMatrixProvider
*
matrixProvider
const
SkPaint
&
paint
bool
drawCoverage
=
false
)
{
SkASSERT
(
!
fBlitter
)
;
if
(
!
matrixProvider
)
{
matrixProvider
=
draw
.
fMatrixProvider
;
}
fBlitter
=
draw
.
fBlitterChooser
(
draw
.
fDst
matrixProvider
-
>
localToDevice
(
)
paint
&
fAlloc
drawCoverage
draw
.
fRC
-
>
clipShader
(
)
SkSurfacePropsCopyOrDefault
(
draw
.
fProps
)
)
;
return
fBlitter
;
}
private
:
SkBlitter
*
fBlitter
=
nullptr
;
SkSTArenaAlloc
<
kSkBlitterContextSize
>
fAlloc
;
}
;
#
endif
