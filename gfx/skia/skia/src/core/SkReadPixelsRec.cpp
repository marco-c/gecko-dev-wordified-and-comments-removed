#
include
"
src
/
core
/
SkReadPixelsRec
.
h
"
#
include
"
include
/
core
/
SkRect
.
h
"
bool
SkReadPixelsRec
:
:
trim
(
int
srcWidth
int
srcHeight
)
{
if
(
nullptr
=
=
fPixels
|
|
fRowBytes
<
fInfo
.
minRowBytes
(
)
)
{
return
false
;
}
if
(
0
>
=
fInfo
.
width
(
)
|
|
0
>
=
fInfo
.
height
(
)
)
{
return
false
;
}
int
x
=
fX
;
int
y
=
fY
;
SkIRect
srcR
=
SkIRect
:
:
MakeXYWH
(
x
y
fInfo
.
width
(
)
fInfo
.
height
(
)
)
;
if
(
!
srcR
.
intersect
(
{
0
0
srcWidth
srcHeight
}
)
)
{
return
false
;
}
if
(
x
>
0
)
{
x
=
0
;
}
if
(
y
>
0
)
{
y
=
0
;
}
fPixels
=
(
(
char
*
)
fPixels
+
-
y
*
fRowBytes
+
-
x
*
fInfo
.
bytesPerPixel
(
)
)
;
fInfo
=
fInfo
.
makeDimensions
(
srcR
.
size
(
)
)
;
fX
=
srcR
.
x
(
)
;
fY
=
srcR
.
y
(
)
;
return
true
;
}
