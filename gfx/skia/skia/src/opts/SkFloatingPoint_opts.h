#
ifndef
SkFloatingPoint_opts_DEFINED
#
define
SkFloatingPoint_opts_DEFINED
#
include
"
SkFloatingPoint
.
h
"
namespace
SK_OPTS_NS
{
#
if
defined
(
SK_ARM_HAS_NEON
)
static
float
rsqrt
(
float
x
)
{
return
sk_float_rsqrt
(
x
)
;
}
#
else
static
float
rsqrt
(
float
x
)
{
int
i
=
*
SkTCast
<
int
*
>
(
&
x
)
;
i
=
0x5F1FFFF9
-
(
i
>
>
1
)
;
float
estimate
=
*
SkTCast
<
float
*
>
(
&
i
)
;
const
float
estimate_sq
=
estimate
*
estimate
;
estimate
*
=
0
.
703952253f
*
(
2
.
38924456f
-
x
*
estimate_sq
)
;
return
estimate
;
}
#
endif
}
#
endif
