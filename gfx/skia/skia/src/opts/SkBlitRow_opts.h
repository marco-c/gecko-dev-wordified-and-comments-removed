#
ifndef
SkBlitRow_opts_DEFINED
#
define
SkBlitRow_opts_DEFINED
#
include
"
Sk4px
.
h
"
namespace
SK_OPTS_NS
{
static
void
blit_row_color32
(
SkPMColor
*
dst
const
SkPMColor
*
src
int
count
SkPMColor
color
)
{
unsigned
invA
=
255
-
SkGetPackedA32
(
color
)
;
invA
+
=
invA
>
>
7
;
SkASSERT
(
invA
<
256
)
;
Sk16h
colorHighAndRound
=
Sk4px
:
:
DupPMColor
(
color
)
.
widenHi
(
)
+
Sk16h
(
128
)
;
Sk16b
invA_16x
(
invA
)
;
Sk4px
:
:
MapSrc
(
count
dst
src
[
&
]
(
const
Sk4px
&
src4
)
-
>
Sk4px
{
return
(
src4
*
invA_16x
)
.
addNarrowHi
(
colorHighAndRound
)
;
}
)
;
}
}
#
endif
