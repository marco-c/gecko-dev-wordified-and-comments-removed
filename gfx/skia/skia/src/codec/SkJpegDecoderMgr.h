#
ifndef
SkJpegDecoderMgr_DEFINED
#
define
SkJpegDecoderMgr_DEFINED
#
include
"
include
/
codec
/
SkCodec
.
h
"
#
include
"
include
/
private
/
SkEncodedInfo
.
h
"
#
include
"
include
/
private
/
base
/
SkNoncopyable
.
h
"
#
include
"
src
/
codec
/
SkJpegPriv
.
h
"
#
include
"
src
/
codec
/
SkJpegSourceMgr
.
h
"
extern
"
C
"
{
#
include
"
jpeglib
.
h
"
}
#
include
<
memory
>
class
SkStream
;
class
JpegDecoderMgr
:
SkNoncopyable
{
public
:
bool
returnFalse
(
const
char
caller
[
]
)
;
SkCodec
:
:
Result
returnFailure
(
const
char
caller
[
]
SkCodec
:
:
Result
result
)
;
JpegDecoderMgr
(
SkStream
*
stream
)
;
void
init
(
)
;
bool
getEncodedColor
(
SkEncodedInfo
:
:
Color
*
outColor
)
;
~
JpegDecoderMgr
(
)
;
skjpeg_error_mgr
*
errorMgr
(
)
{
return
&
fErrorMgr
;
}
jpeg_decompress_struct
*
dinfo
(
)
{
return
&
fDInfo
;
}
SkJpegSourceMgr
*
getSourceMgr
(
)
;
private
:
struct
SourceMgr
:
jpeg_source_mgr
{
static
void
InitSource
(
j_decompress_ptr
dinfo
)
;
static
void
SkipInputData
(
j_decompress_ptr
dinfo
long
num_bytes_long
)
;
static
boolean
FillInputBuffer
(
j_decompress_ptr
dinfo
)
;
static
void
TermSource
(
j_decompress_ptr
dinfo
)
;
SourceMgr
(
std
:
:
unique_ptr
<
SkJpegSourceMgr
>
mgr
)
;
std
:
:
unique_ptr
<
SkJpegSourceMgr
>
fSourceMgr
;
}
;
jpeg_decompress_struct
fDInfo
;
SourceMgr
fSrcMgr
;
skjpeg_error_mgr
fErrorMgr
;
jpeg_progress_mgr
fProgressMgr
;
bool
fInit
;
}
;
#
endif
