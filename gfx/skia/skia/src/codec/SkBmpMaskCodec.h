#
include
"
SkBmpCodec
.
h
"
#
include
"
SkImageInfo
.
h
"
#
include
"
SkMaskSwizzler
.
h
"
#
include
"
SkTypes
.
h
"
class
SkBmpMaskCodec
:
public
SkBmpCodec
{
public
:
SkBmpMaskCodec
(
const
SkImageInfo
&
srcInfo
SkStream
*
stream
uint16_t
bitsPerPixel
SkMasks
*
masks
SkCodec
:
:
SkScanlineOrder
rowOrder
)
;
protected
:
Result
onGetPixels
(
const
SkImageInfo
&
dstInfo
void
*
dst
size_t
dstRowBytes
const
Options
&
SkPMColor
*
int
*
int
*
)
override
;
SkCodec
:
:
Result
prepareToDecode
(
const
SkImageInfo
&
dstInfo
const
SkCodec
:
:
Options
&
options
SkPMColor
inputColorPtr
[
]
int
*
inputColorCount
)
override
;
private
:
bool
initializeSwizzler
(
const
SkImageInfo
&
dstInfo
const
Options
&
options
)
;
SkSampler
*
getSampler
(
bool
createIfNecessary
)
override
{
SkASSERT
(
fMaskSwizzler
)
;
return
fMaskSwizzler
;
}
int
decodeRows
(
const
SkImageInfo
&
dstInfo
void
*
dst
size_t
dstRowBytes
const
Options
&
opts
)
override
;
SkAutoTDelete
<
SkMasks
>
fMasks
;
SkAutoTDelete
<
SkMaskSwizzler
>
fMaskSwizzler
;
const
size_t
fSrcRowBytes
;
SkAutoTDeleteArray
<
uint8_t
>
fSrcBuffer
;
typedef
SkBmpCodec
INHERITED
;
}
;
