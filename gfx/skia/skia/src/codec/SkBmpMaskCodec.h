#
ifndef
SkBmpMaskCodec_DEFINED
#
define
SkBmpMaskCodec_DEFINED
#
include
"
SkBmpCodec
.
h
"
#
include
"
SkImageInfo
.
h
"
#
include
"
SkMaskSwizzler
.
h
"
#
include
"
SkTypes
.
h
"
class
SkBmpMaskCodec
:
public
SkBmpCodec
{
public
:
SkBmpMaskCodec
(
int
width
int
height
const
SkEncodedInfo
&
info
SkStream
*
stream
uint16_t
bitsPerPixel
SkMasks
*
masks
SkCodec
:
:
SkScanlineOrder
rowOrder
)
;
protected
:
Result
onGetPixels
(
const
SkImageInfo
&
dstInfo
void
*
dst
size_t
dstRowBytes
const
Options
&
SkPMColor
*
int
*
int
*
)
override
;
SkCodec
:
:
Result
onPrepareToDecode
(
const
SkImageInfo
&
dstInfo
const
SkCodec
:
:
Options
&
options
SkPMColor
inputColorPtr
[
]
int
*
inputColorCount
)
override
;
private
:
SkSampler
*
getSampler
(
bool
createIfNecessary
)
override
{
SkASSERT
(
fMaskSwizzler
)
;
return
fMaskSwizzler
.
get
(
)
;
}
int
decodeRows
(
const
SkImageInfo
&
dstInfo
void
*
dst
size_t
dstRowBytes
const
Options
&
opts
)
override
;
std
:
:
unique_ptr
<
SkMasks
>
fMasks
;
std
:
:
unique_ptr
<
SkMaskSwizzler
>
fMaskSwizzler
;
std
:
:
unique_ptr
<
uint8_t
[
]
>
fSrcBuffer
;
typedef
SkBmpCodec
INHERITED
;
}
;
#
endif
