#
ifndef
SkScalingCodec_DEFINED
#
define
SkScalingCodec_DEFINED
#
include
"
include
/
codec
/
SkCodec
.
h
"
class
SkScalingCodec
:
public
SkCodec
{
protected
:
SkScalingCodec
(
SkEncodedInfo
&
&
info
XformFormat
srcFormat
std
:
:
unique_ptr
<
SkStream
>
stream
SkEncodedOrigin
origin
=
kTopLeft_SkEncodedOrigin
)
:
INHERITED
(
std
:
:
move
(
info
)
srcFormat
std
:
:
move
(
stream
)
origin
)
{
}
SkISize
onGetScaledDimensions
(
float
desiredScale
)
const
override
{
SkISize
dim
=
this
-
>
dimensions
(
)
;
dim
.
fWidth
=
SkTMax
(
1
SkScalarRoundToInt
(
desiredScale
*
dim
.
fWidth
)
)
;
dim
.
fHeight
=
SkTMax
(
1
SkScalarRoundToInt
(
desiredScale
*
dim
.
fHeight
)
)
;
return
dim
;
}
bool
onDimensionsSupported
(
const
SkISize
&
requested
)
override
{
SkISize
dim
=
this
-
>
dimensions
(
)
;
int
w
=
requested
.
width
(
)
;
int
h
=
requested
.
height
(
)
;
return
1
<
=
w
&
&
w
<
=
dim
.
width
(
)
&
&
1
<
=
h
&
&
h
<
=
dim
.
height
(
)
;
}
private
:
typedef
SkCodec
INHERITED
;
}
;
#
endif
