#
ifndef
SkTiffUtility_codec_DEFINED
#
define
SkTiffUtility_codec_DEFINED
#
include
"
include
/
core
/
SkData
.
h
"
#
include
"
include
/
core
/
SkRefCnt
.
h
"
#
include
<
cstddef
>
#
include
<
cstdint
>
#
include
<
memory
>
class
SkTiffImageFileDirectory
{
public
:
static
bool
ParseHeader
(
const
SkData
*
data
bool
*
outLittleEndian
uint32_t
*
outIfdOffset
)
;
static
std
:
:
unique_ptr
<
SkTiffImageFileDirectory
>
MakeFromOffset
(
sk_sp
<
SkData
>
data
bool
littleEndian
uint32_t
ifdOffset
)
;
uint16_t
getNumEntries
(
)
const
{
return
fNumEntries
;
}
uint32_t
nextIfdOffset
(
)
const
{
return
fNextIfdOffset
;
}
uint16_t
getEntryTag
(
uint16_t
entryIndex
)
const
;
bool
getEntryUnsignedShort
(
uint16_t
entryIndex
uint32_t
count
uint16_t
*
values
)
const
{
return
getEntryValuesGeneric
(
entryIndex
kTypeUnsignedShort
count
values
)
;
}
bool
getEntryUnsignedLong
(
uint16_t
entryIndex
uint32_t
count
uint32_t
*
values
)
const
{
return
getEntryValuesGeneric
(
entryIndex
kTypeUnsignedLong
count
values
)
;
}
bool
getEntrySignedRational
(
uint16_t
entryIndex
uint32_t
count
float
*
values
)
const
{
return
getEntryValuesGeneric
(
entryIndex
kTypeSignedRational
count
values
)
;
}
bool
getEntryUnsignedRational
(
uint16_t
entryIndex
uint32_t
count
float
*
values
)
const
{
return
getEntryValuesGeneric
(
entryIndex
kTypeUnsignedRational
count
values
)
;
}
sk_sp
<
SkData
>
getEntryUndefinedData
(
uint16_t
entryIndex
)
const
;
private
:
static
constexpr
uint16_t
kTypeUnsignedByte
=
1
;
static
constexpr
uint16_t
kTypeAsciiString
=
2
;
static
constexpr
uint16_t
kTypeUnsignedShort
=
3
;
static
constexpr
uint16_t
kTypeUnsignedLong
=
4
;
static
constexpr
uint16_t
kTypeUnsignedRational
=
5
;
static
constexpr
uint16_t
kTypeSignedByte
=
6
;
static
constexpr
uint16_t
kTypeUndefined
=
7
;
static
constexpr
uint16_t
kTypeSignedShort
=
8
;
static
constexpr
uint16_t
kTypeSignedLong
=
9
;
static
constexpr
uint16_t
kTypeSignedRational
=
10
;
static
constexpr
uint16_t
kTypeSingleFloat
=
11
;
static
constexpr
uint16_t
kTypeDoubleFloat
=
12
;
static
bool
IsValidType
(
uint16_t
type
)
;
static
size_t
BytesForType
(
uint16_t
type
)
;
SkTiffImageFileDirectory
(
sk_sp
<
SkData
>
data
bool
littleEndian
uint32_t
offset
uint16_t
ifdNumEntries
uint32_t
ifdNextOffset
)
;
bool
getEntryRawData
(
uint16_t
entryIndex
uint16_t
*
outTag
uint16_t
*
outType
uint32_t
*
outCount
const
uint8_t
*
*
outData
size_t
*
outDataSize
)
const
;
bool
getEntryValuesGeneric
(
uint16_t
entryIndex
uint16_t
type
uint32_t
count
void
*
values
)
const
;
const
sk_sp
<
SkData
>
fData
;
const
bool
fLittleEndian
;
const
uint32_t
fOffset
;
const
uint16_t
fNumEntries
;
const
uint32_t
fNextIfdOffset
;
}
;
#
endif
