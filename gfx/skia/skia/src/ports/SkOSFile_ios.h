#
ifndef
SkOSFile_ios_DEFINED
#
define
SkOSFile_ios_DEFINED
#
include
"
include
/
core
/
SkString
.
h
"
#
ifdef
SK_BUILD_FOR_IOS
#
import
<
CoreFoundation
/
CoreFoundation
.
h
>
static
bool
ios_get_path_in_bundle
(
const
char
path
[
]
SkString
*
result
)
{
CFBundleRef
mainBundle
=
CFBundleGetMainBundle
(
)
;
CFStringRef
pathRef
=
CFStringCreateWithCString
(
nullptr
path
kCFStringEncodingUTF8
)
;
CFURLRef
imageURL
=
CFBundleCopyResourceURL
(
mainBundle
pathRef
nullptr
CFSTR
(
"
data
"
)
)
;
CFRelease
(
pathRef
)
;
if
(
!
imageURL
)
{
return
false
;
}
if
(
!
result
)
{
return
true
;
}
CFStringRef
imagePath
=
CFURLCopyFileSystemPath
(
imageURL
kCFURLPOSIXPathStyle
)
;
CFRelease
(
imageURL
)
;
CFStringEncoding
encodingMethod
=
CFStringGetSystemEncoding
(
)
;
result
-
>
set
(
CFStringGetCStringPtr
(
imagePath
encodingMethod
)
)
;
CFRelease
(
imagePath
)
;
return
true
;
}
#
endif
#
endif
