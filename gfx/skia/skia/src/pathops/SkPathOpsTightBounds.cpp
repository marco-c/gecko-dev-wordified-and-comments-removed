#
include
"
SkOpEdgeBuilder
.
h
"
#
include
"
SkPathOpsCommon
.
h
"
bool
TightBounds
(
const
SkPath
&
path
SkRect
*
result
)
{
SkChunkAlloc
allocator
(
4096
)
;
SkOpContour
contour
;
SkOpContourHead
*
contourList
=
static_cast
<
SkOpContourHead
*
>
(
&
contour
)
;
SkOpGlobalState
globalState
(
nullptr
contourList
SkDEBUGPARAMS
(
nullptr
)
)
;
SkOpEdgeBuilder
builder
(
path
&
contour
&
allocator
&
globalState
)
;
if
(
!
builder
.
finish
(
&
allocator
)
)
{
return
false
;
}
if
(
!
SortContourList
(
&
contourList
false
false
)
)
{
result
-
>
setEmpty
(
)
;
return
true
;
}
SkOpContour
*
current
=
contourList
;
SkPathOpsBounds
bounds
=
current
-
>
bounds
(
)
;
while
(
(
current
=
current
-
>
next
(
)
)
)
{
bounds
.
add
(
current
-
>
bounds
(
)
)
;
}
*
result
=
bounds
;
return
true
;
}
