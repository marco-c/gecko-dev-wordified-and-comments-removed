#
include
"
src
/
utils
/
SkClipStackUtils
.
h
"
#
include
"
include
/
core
/
SkPath
.
h
"
#
include
"
include
/
core
/
SkPathTypes
.
h
"
#
include
"
include
/
pathops
/
SkPathOps
.
h
"
#
include
"
src
/
core
/
SkClipStack
.
h
"
enum
class
SkClipOp
;
void
SkClipStack_AsPath
(
const
SkClipStack
&
cs
SkPath
*
path
)
{
path
-
>
reset
(
)
;
path
-
>
setFillType
(
SkPathFillType
:
:
kInverseEvenOdd
)
;
SkClipStack
:
:
Iter
iter
(
cs
SkClipStack
:
:
Iter
:
:
kBottom_IterStart
)
;
while
(
const
SkClipStack
:
:
Element
*
element
=
iter
.
next
(
)
)
{
if
(
element
-
>
getDeviceSpaceType
(
)
=
=
SkClipStack
:
:
Element
:
:
DeviceSpaceType
:
:
kShader
)
{
continue
;
}
SkPath
operand
;
if
(
element
-
>
getDeviceSpaceType
(
)
!
=
SkClipStack
:
:
Element
:
:
DeviceSpaceType
:
:
kEmpty
)
{
element
-
>
asDeviceSpacePath
(
&
operand
)
;
}
SkClipOp
elementOp
=
element
-
>
getOp
(
)
;
if
(
element
-
>
isReplaceOp
(
)
)
{
*
path
=
operand
;
}
else
{
Op
(
*
path
operand
(
SkPathOp
)
elementOp
path
)
;
}
}
}
