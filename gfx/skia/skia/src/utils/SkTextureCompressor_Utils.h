#
ifndef
SkTextureCompressorUtils_DEFINED
#
define
SkTextureCompressorUtils_DEFINED
namespace
SkTextureCompressor
{
#
if
1
static
inline
uint32_t
MultibyteDiv3
(
uint32_t
x
)
{
const
uint32_t
a
=
(
x
>
>
2
)
&
0x3F3F3F3F
;
const
uint32_t
ar
=
(
x
&
0x03030303
)
<
<
4
;
const
uint32_t
b
=
(
x
>
>
4
)
&
0x0F0F0F0F
;
const
uint32_t
br
=
(
x
&
0x0F0F0F0F
)
<
<
2
;
const
uint32_t
c
=
(
x
>
>
6
)
&
0x03030303
;
const
uint32_t
cr
=
x
&
0x3F3F3F3F
;
return
a
+
b
+
c
+
(
(
(
ar
+
br
+
cr
)
>
>
6
)
&
0x03030303
)
;
}
static
inline
uint32_t
ConvertToThreeBitIndex
(
uint32_t
x
)
{
x
=
(
x
>
>
1
)
&
0x7F7F7F7F
;
x
=
x
+
0x09090909
;
x
=
(
x
>
>
1
)
&
0x7F7F7F7F
;
x
=
MultibyteDiv3
(
x
)
;
x
=
MultibyteDiv3
(
x
)
;
return
x
;
}
#
else
static
inline
uint32_t
ConvertToThreeBitIndex
(
uint32_t
x
)
{
return
(
x
>
>
5
)
&
0x07070707
;
}
#
endif
}
#
endif
