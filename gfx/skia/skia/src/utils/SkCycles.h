#
ifndef
SkCycles_DEFINED
#
define
SkCycles_DEFINED
#
include
<
cstdint
>
#
include
<
x86intrin
.
h
>
class
SkCycles
{
public
:
static
uint64_t
Now
(
)
{
#
ifndef
SKIA_COMPARE_VM_VS_RP
{
return
0ul
;
}
#
elif
defined
(
SK_BUILD_FOR_WIN
)
{
return
0ul
;
}
#
elif
defined
(
SK_BUILD_FOR_IOS
)
{
return
0ul
;
}
#
elif
defined
(
SK_BUILD_FOR_ANDROID
)
{
return
0ul
;
}
#
elif
defined
(
SK_CPU_X86
)
{
unsigned
aux
;
return
__rdtscp
(
&
aux
)
;
}
#
elif
defined
(
SK_CPU_ARM64
)
{
int64_t
cycles
;
asm
volatile
(
"
mrs
%
0
cntvct_el0
"
:
"
=
r
"
(
cycles
)
)
;
return
cycles
;
}
#
else
{
return
0ul
;
}
#
endif
}
}
;
#
endif
