#
ifndef
SkPngEncoderBase_DEFINED
#
define
SkPngEncoderBase_DEFINED
#
include
<
cstddef
>
#
include
<
cstdint
>
#
include
<
optional
>
#
include
"
include
/
core
/
SkImageInfo
.
h
"
#
include
"
include
/
encode
/
SkEncoder
.
h
"
#
include
"
include
/
private
/
SkEncodedInfo
.
h
"
class
SkPixmap
;
template
<
typename
T
>
class
SkSpan
;
class
SkPngEncoderBase
:
public
SkEncoder
{
public
:
struct
TargetInfo
{
std
:
:
optional
<
SkImageInfo
>
fSrcRowInfo
;
std
:
:
optional
<
SkImageInfo
>
fDstRowInfo
;
SkEncodedInfo
fDstInfo
;
size_t
fDstRowSize
;
}
;
static
std
:
:
optional
<
TargetInfo
>
getTargetInfo
(
const
SkImageInfo
&
srcInfo
)
;
protected
:
SkPngEncoderBase
(
TargetInfo
targetInfo
const
SkPixmap
&
src
)
;
bool
onEncodeRows
(
int
numRows
)
final
;
virtual
bool
onEncodeRow
(
SkSpan
<
const
uint8_t
>
row
)
=
0
;
virtual
bool
onFinishEncoding
(
)
=
0
;
const
TargetInfo
&
targetInfo
(
)
const
{
return
fTargetInfo
;
}
private
:
TargetInfo
fTargetInfo
;
bool
fFinishedEncoding
=
false
;
}
;
#
endif
