#
ifndef
SkPngEncoderBase_DEFINED
#
define
SkPngEncoderBase_DEFINED
#
include
<
cstddef
>
#
include
<
cstdint
>
#
include
<
optional
>
#
include
"
include
/
encode
/
SkEncoder
.
h
"
#
include
"
include
/
private
/
SkEncodedInfo
.
h
"
#
include
"
src
/
encode
/
SkImageEncoderFns
.
h
"
struct
SkImageInfo
;
class
SkPixmap
;
template
<
typename
T
>
class
SkSpan
;
class
SkPngEncoderBase
:
public
SkEncoder
{
public
:
struct
TargetInfo
{
SkEncodedInfo
fDstInfo
;
transform_scanline_proc
fTransformProc
;
size_t
fDstRowSize
;
}
;
static
std
:
:
optional
<
TargetInfo
>
getTargetInfo
(
const
SkImageInfo
&
srcInfo
)
;
protected
:
SkPngEncoderBase
(
TargetInfo
targetInfo
const
SkPixmap
&
src
)
;
bool
onEncodeRows
(
int
numRows
)
final
;
virtual
bool
onEncodeRow
(
SkSpan
<
const
uint8_t
>
row
)
=
0
;
virtual
bool
onFinishEncoding
(
)
=
0
;
private
:
TargetInfo
fTargetInfo
;
bool
fFinishedEncoding
=
false
;
}
;
#
endif
