#
ifndef
VertexChunkPatchAllocator_DEFINED
#
define
VertexChunkPatchAllocator_DEFINED
#
include
"
src
/
gpu
/
ganesh
/
GrVertexChunkArray
.
h
"
#
include
"
src
/
gpu
/
tessellate
/
LinearTolerances
.
h
"
namespace
skgpu
:
:
ganesh
{
class
VertexChunkPatchAllocator
{
public
:
VertexChunkPatchAllocator
(
size_t
stride
tess
:
:
LinearTolerances
*
worstCaseTolerances
GrMeshDrawTarget
*
target
GrVertexChunkArray
*
chunks
int
minVerticesPerChunk
)
:
fWorstCaseTolerances
(
worstCaseTolerances
)
fBuilder
(
target
chunks
stride
minVerticesPerChunk
)
{
}
VertexWriter
append
(
const
tess
:
:
LinearTolerances
&
tolerances
)
{
fWorstCaseTolerances
-
>
accumulate
(
tolerances
)
;
return
fBuilder
.
appendVertices
(
1
)
;
}
private
:
tess
:
:
LinearTolerances
*
fWorstCaseTolerances
;
GrVertexChunkBuilder
fBuilder
;
}
;
}
#
endif
