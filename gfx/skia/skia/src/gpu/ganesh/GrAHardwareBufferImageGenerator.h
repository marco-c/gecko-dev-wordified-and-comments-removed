#
ifndef
GrAHardwareBufferImageGenerator_DEFINED
#
define
GrAHardwareBufferImageGenerator_DEFINED
#
include
"
include
/
core
/
SkImageGenerator
.
h
"
#
include
"
include
/
private
/
gpu
/
ganesh
/
GrTypesPriv
.
h
"
class
GrGpuResource
;
class
GrSurfaceProxyView
;
extern
"
C
"
{
typedef
struct
AHardwareBuffer
AHardwareBuffer
;
}
class
GrAHardwareBufferImageGenerator
:
public
SkImageGenerator
{
public
:
static
std
:
:
unique_ptr
<
SkImageGenerator
>
Make
(
AHardwareBuffer
*
SkAlphaType
sk_sp
<
SkColorSpace
>
GrSurfaceOrigin
)
;
~
GrAHardwareBufferImageGenerator
(
)
override
;
static
void
DeleteGLTexture
(
void
*
ctx
)
;
private
:
GrAHardwareBufferImageGenerator
(
const
SkImageInfo
&
AHardwareBuffer
*
SkAlphaType
bool
isProtectedContent
uint32_t
bufferFormat
GrSurfaceOrigin
surfaceOrigin
)
;
bool
onIsValid
(
GrRecordingContext
*
)
const
override
;
GrSurfaceProxyView
onGenerateTexture
(
GrRecordingContext
*
const
SkImageInfo
&
GrMipmapped
GrImageTexGenPolicy
)
override
;
GrSurfaceOrigin
origin
(
)
const
override
{
return
fSurfaceOrigin
;
}
GrSurfaceProxyView
makeView
(
GrRecordingContext
*
context
)
;
void
releaseTextureRef
(
)
;
static
void
ReleaseRefHelper_TextureReleaseProc
(
void
*
ctx
)
;
AHardwareBuffer
*
fHardwareBuffer
;
uint32_t
fBufferFormat
;
const
bool
fIsProtectedContent
;
GrSurfaceOrigin
fSurfaceOrigin
;
using
INHERITED
=
SkImageGenerator
;
}
;
#
endif
