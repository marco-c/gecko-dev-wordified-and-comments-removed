#
include
"
src
/
gpu
/
ganesh
/
GrWaitRenderTask
.
h
"
#
include
"
src
/
gpu
/
ganesh
/
GrGpu
.
h
"
#
include
"
src
/
gpu
/
ganesh
/
GrOpFlushState
.
h
"
#
include
"
src
/
gpu
/
ganesh
/
GrResourceAllocator
.
h
"
void
GrWaitRenderTask
:
:
gatherProxyIntervals
(
GrResourceAllocator
*
alloc
)
const
{
SkASSERT
(
0
=
=
this
-
>
numTargets
(
)
)
;
auto
fakeOp
=
alloc
-
>
curOp
(
)
;
alloc
-
>
addInterval
(
fWaitedOn
.
proxy
(
)
fakeOp
fakeOp
GrResourceAllocator
:
:
ActualUse
:
:
kYes
)
;
alloc
-
>
incOps
(
)
;
}
bool
GrWaitRenderTask
:
:
onExecute
(
GrOpFlushState
*
flushState
)
{
for
(
int
i
=
0
;
i
<
fNumSemaphores
;
+
+
i
)
{
if
(
fSemaphores
[
i
]
)
{
flushState
-
>
gpu
(
)
-
>
waitSemaphore
(
fSemaphores
[
i
]
.
get
(
)
)
;
}
}
return
true
;
}
