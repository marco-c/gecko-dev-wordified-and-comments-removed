#
include
"
GrColorSpaceInfo
.
h
"
#
include
"
SkColorSpacePriv
.
h
"
GrColorSpaceInfo
:
:
GrColorSpaceInfo
(
sk_sp
<
SkColorSpace
>
colorSpace
GrPixelConfig
config
)
:
fColorSpace
(
std
:
:
move
(
colorSpace
)
)
fConfig
(
config
)
fInitializedColorSpaceXformFromSRGB
(
false
)
{
}
GrColorSpaceXform
*
GrColorSpaceInfo
:
:
colorSpaceXformFromSRGB
(
)
const
{
if
(
!
fInitializedColorSpaceXformFromSRGB
)
{
fColorXformFromSRGB
=
GrColorSpaceXform
:
:
Make
(
sk_srgb_singleton
(
)
kUnpremul_SkAlphaType
fColorSpace
.
get
(
)
kUnpremul_SkAlphaType
)
;
fInitializedColorSpaceXformFromSRGB
=
true
;
}
SkASSERT
(
fColorSpace
|
|
!
fColorXformFromSRGB
)
;
return
fColorXformFromSRGB
.
get
(
)
;
}
