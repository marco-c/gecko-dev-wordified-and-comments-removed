#
include
"
GrColorSpaceInfo
.
h
"
GrColorSpaceInfo
:
:
GrColorSpaceInfo
(
sk_sp
<
SkColorSpace
>
colorSpace
GrPixelConfig
config
)
:
fColorSpace
(
std
:
:
move
(
colorSpace
)
)
fConfig
(
config
)
fInitializedColorSpaceXformFromSRGB
(
false
)
{
}
GrColorSpaceXform
*
GrColorSpaceInfo
:
:
colorSpaceXformFromSRGB
(
)
const
{
if
(
!
fInitializedColorSpaceXformFromSRGB
)
{
auto
srgbColorSpace
=
SkColorSpace
:
:
MakeSRGB
(
)
;
fColorXformFromSRGB
=
GrColorSpaceXform
:
:
MakeGamutXform
(
srgbColorSpace
.
get
(
)
fColorSpace
.
get
(
)
)
;
fInitializedColorSpaceXformFromSRGB
=
true
;
}
SkASSERT
(
fColorSpace
|
|
!
fColorXformFromSRGB
)
;
return
fColorXformFromSRGB
.
get
(
)
;
}
