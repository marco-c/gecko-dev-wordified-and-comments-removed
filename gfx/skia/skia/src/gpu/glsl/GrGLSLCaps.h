#
ifndef
GrGLSLCaps_DEFINED
#
define
GrGLSLCaps_DEFINED
#
include
"
GrCaps
.
h
"
#
include
"
GrGLSL
.
h
"
class
GrGLSLCaps
:
public
GrShaderCaps
{
public
:
enum
AdvBlendEqInteraction
{
kNotSupported_AdvBlendEqInteraction
kAutomatic_AdvBlendEqInteraction
kGeneralEnable_AdvBlendEqInteraction
kSpecificEnables_AdvBlendEqInteraction
kLast_AdvBlendEqInteraction
=
kSpecificEnables_AdvBlendEqInteraction
}
;
GrGLSLCaps
(
const
GrContextOptions
&
)
;
bool
fbFetchSupport
(
)
const
{
return
fFBFetchSupport
;
}
bool
fbFetchNeedsCustomOutput
(
)
const
{
return
fFBFetchNeedsCustomOutput
;
}
bool
bindlessTextureSupport
(
)
const
{
return
fBindlessTextureSupport
;
}
const
char
*
versionDeclString
(
)
const
{
return
fVersionDeclString
;
}
const
char
*
fbFetchColorName
(
)
const
{
return
fFBFetchColorName
;
}
const
char
*
fbFetchExtensionString
(
)
const
{
return
fFBFetchExtensionString
;
}
bool
dropsTileOnZeroDivide
(
)
const
{
return
fDropsTileOnZeroDivide
;
}
AdvBlendEqInteraction
advBlendEqInteraction
(
)
const
{
return
fAdvBlendEqInteraction
;
}
bool
mustEnableAdvBlendEqs
(
)
const
{
return
fAdvBlendEqInteraction
>
=
kGeneralEnable_AdvBlendEqInteraction
;
}
bool
mustEnableSpecificAdvBlendEqs
(
)
const
{
return
fAdvBlendEqInteraction
=
=
kSpecificEnables_AdvBlendEqInteraction
;
}
bool
mustDeclareFragmentShaderOutput
(
)
const
{
return
fGLSLGeneration
>
k110_GrGLSLGeneration
;
}
bool
usesPrecisionModifiers
(
)
const
{
return
fUsesPrecisionModifiers
;
}
bool
canUseAnyFunctionInShader
(
)
const
{
return
fCanUseAnyFunctionInShader
;
}
bool
forceHighPrecisionNDSTransform
(
)
const
{
return
fForceHighPrecisionNDSTransform
;
}
bool
canUseMinAndAbsTogether
(
)
const
{
return
fCanUseMinAndAbsTogether
;
}
bool
mustForceNegatedAtanParamToFloat
(
)
const
{
return
fMustForceNegatedAtanParamToFloat
;
}
const
char
*
shaderDerivativeExtensionString
(
)
const
{
SkASSERT
(
this
-
>
shaderDerivativeSupport
(
)
)
;
return
fShaderDerivativeExtensionString
;
}
const
char
*
fragCoordConventionsExtensionString
(
)
const
{
return
fFragCoordConventionsExtensionString
;
}
const
char
*
secondaryOutputExtensionString
(
)
const
{
return
fSecondaryOutputExtensionString
;
}
const
char
*
externalTextureExtensionString
(
)
const
{
return
fExternalTextureExtensionString
;
}
bool
mustSwizzleInShader
(
)
const
{
return
fMustSwizzleInShader
;
}
const
char
*
getSwizzleMap
(
GrPixelConfig
config
)
const
{
return
fConfigSwizzle
[
config
]
;
}
GrGLSLGeneration
generation
(
)
const
{
return
fGLSLGeneration
;
}
SkString
dump
(
)
const
override
;
private
:
void
onApplyOptionsOverrides
(
const
GrContextOptions
&
options
)
override
;
GrGLSLGeneration
fGLSLGeneration
;
bool
fDropsTileOnZeroDivide
:
1
;
bool
fFBFetchSupport
:
1
;
bool
fFBFetchNeedsCustomOutput
:
1
;
bool
fBindlessTextureSupport
:
1
;
bool
fUsesPrecisionModifiers
:
1
;
bool
fCanUseAnyFunctionInShader
:
1
;
bool
fForceHighPrecisionNDSTransform
:
1
;
bool
fCanUseMinAndAbsTogether
:
1
;
bool
fMustForceNegatedAtanParamToFloat
:
1
;
const
char
*
fVersionDeclString
;
const
char
*
fShaderDerivativeExtensionString
;
const
char
*
fFragCoordConventionsExtensionString
;
const
char
*
fSecondaryOutputExtensionString
;
const
char
*
fExternalTextureExtensionString
;
const
char
*
fFBFetchColorName
;
const
char
*
fFBFetchExtensionString
;
AdvBlendEqInteraction
fAdvBlendEqInteraction
;
bool
fMustSwizzleInShader
;
const
char
*
fConfigSwizzle
[
kGrPixelConfigCnt
]
;
friend
class
GrGLCaps
;
typedef
GrShaderCaps
INHERITED
;
}
;
#
endif
