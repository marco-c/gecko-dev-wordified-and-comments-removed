#
ifndef
gr_instanced_InstanceProcessor_DEFINED
#
define
gr_instanced_InstanceProcessor_DEFINED
#
include
"
GrCaps
.
h
"
#
include
"
GrGeometryProcessor
.
h
"
#
include
"
instanced
/
InstancedRenderingTypes
.
h
"
namespace
gr_instanced
{
class
InstanceProcessor
:
public
GrGeometryProcessor
{
public
:
InstanceProcessor
(
OpInfo
GrBuffer
*
paramsBuffer
)
;
const
char
*
name
(
)
const
override
{
return
"
Instance
Processor
"
;
}
OpInfo
opInfo
(
)
const
{
return
fOpInfo
;
}
void
getGLSLProcessorKey
(
const
GrShaderCaps
&
GrProcessorKeyBuilder
*
b
)
const
override
{
b
-
>
add32
(
fOpInfo
.
fData
)
;
}
GrGLSLPrimitiveProcessor
*
createGLSLInstance
(
const
GrShaderCaps
&
)
const
override
;
static
const
GrBuffer
*
SK_WARN_UNUSED_RESULT
FindOrCreateVertexBuffer
(
GrGpu
*
)
;
static
const
GrBuffer
*
SK_WARN_UNUSED_RESULT
FindOrCreateIndex8Buffer
(
GrGpu
*
)
;
static
IndexRange
GetIndexRangeForRect
(
GrAAType
)
;
static
IndexRange
GetIndexRangeForOval
(
GrAAType
const
SkRect
&
devBounds
)
;
static
IndexRange
GetIndexRangeForRRect
(
GrAAType
)
;
static
const
char
*
GetNameOfIndexRange
(
IndexRange
)
;
private
:
static
GrCaps
:
:
InstancedSupport
CheckSupport
(
const
GrShaderCaps
&
const
GrCaps
&
)
;
OpInfo
fOpInfo
;
BufferAccess
fParamsAccess
;
friend
class
GLInstancedRendering
;
typedef
GrGeometryProcessor
INHERITED
;
}
;
}
#
endif
