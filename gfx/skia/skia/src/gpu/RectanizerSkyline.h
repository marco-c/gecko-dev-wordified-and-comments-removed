#
ifndef
skgpu_RectanizerSkyline_DEFINED
#
define
skgpu_RectanizerSkyline_DEFINED
#
include
"
include
/
private
/
base
/
SkTDArray
.
h
"
#
include
"
src
/
gpu
/
Rectanizer
.
h
"
namespace
skgpu
{
class
RectanizerSkyline
final
:
public
Rectanizer
{
public
:
RectanizerSkyline
(
int
w
int
h
)
:
Rectanizer
(
w
h
)
{
this
-
>
reset
(
)
;
}
~
RectanizerSkyline
(
)
final
{
}
void
reset
(
)
final
{
fAreaSoFar
=
0
;
fSkyline
.
clear
(
)
;
fSkyline
.
push_back
(
SkylineSegment
{
0
0
this
-
>
width
(
)
}
)
;
}
bool
addRect
(
int
w
int
h
SkIPoint16
*
loc
)
final
;
float
percentFull
(
)
const
final
{
return
fAreaSoFar
/
(
(
float
)
this
-
>
width
(
)
*
this
-
>
height
(
)
)
;
}
private
:
struct
SkylineSegment
{
int
fX
;
int
fY
;
int
fWidth
;
}
;
SkTDArray
<
SkylineSegment
>
fSkyline
;
int32_t
fAreaSoFar
;
bool
rectangleFits
(
int
skylineIndex
int
width
int
height
int
*
y
)
const
;
void
addSkylineLevel
(
int
skylineIndex
int
x
int
y
int
width
int
height
)
;
}
;
}
#
endif
