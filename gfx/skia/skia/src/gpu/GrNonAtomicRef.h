#
ifndef
GrNonAtomicRef_DEFINED
#
define
GrNonAtomicRef_DEFINED
#
include
"
SkRefCnt
.
h
"
#
include
"
SkTArray
.
h
"
class
GrNonAtomicRef
:
public
SkNoncopyable
{
public
:
GrNonAtomicRef
(
)
:
fRefCnt
(
1
)
{
}
virtual
~
GrNonAtomicRef
(
)
{
SkASSERT
(
(
0
=
=
fRefCnt
|
|
1
=
=
fRefCnt
)
)
;
SkDEBUGCODE
(
fRefCnt
=
-
10
;
)
}
void
ref
(
)
const
{
SkASSERT
(
fRefCnt
>
0
)
;
+
+
fRefCnt
;
}
void
unref
(
)
const
{
SkASSERT
(
fRefCnt
>
0
)
;
-
-
fRefCnt
;
if
(
0
=
=
fRefCnt
)
{
delete
this
;
return
;
}
}
private
:
mutable
int32_t
fRefCnt
;
typedef
SkNoncopyable
INHERITED
;
}
;
#
endif
