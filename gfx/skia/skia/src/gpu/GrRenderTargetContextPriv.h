#
ifndef
GrRenderTargetContextPriv_DEFINED
#
define
GrRenderTargetContextPriv_DEFINED
#
include
"
GrRenderTargetContext
.
h
"
#
include
"
GrRenderTargetOpList
.
h
"
#
include
"
GrPathRendering
.
h
"
class
GrFixedClip
;
class
GrPath
;
struct
GrUserStencilSettings
;
class
GrRenderTargetContextPriv
{
public
:
gr_instanced
:
:
InstancedRendering
*
accessInstancedRendering
(
)
const
{
return
fRenderTargetContext
-
>
getOpList
(
)
-
>
instancedRendering
(
)
;
}
void
setLastClip
(
int32_t
clipStackGenID
const
SkIRect
&
devClipBounds
)
{
GrRenderTargetOpList
*
opList
=
fRenderTargetContext
-
>
getOpList
(
)
;
opList
-
>
fLastClipStackGenID
=
clipStackGenID
;
opList
-
>
fLastDevClipBounds
=
devClipBounds
;
}
bool
mustRenderClip
(
int32_t
clipStackGenID
const
SkIRect
&
devClipBounds
)
const
{
GrRenderTargetOpList
*
opList
=
fRenderTargetContext
-
>
getOpList
(
)
;
return
opList
-
>
fLastClipStackGenID
!
=
clipStackGenID
|
|
!
opList
-
>
fLastDevClipBounds
.
contains
(
devClipBounds
)
;
}
void
clear
(
const
GrFixedClip
&
const
GrColor
bool
canIgnoreClip
)
;
void
clearStencilClip
(
const
GrFixedClip
&
bool
insideStencilMask
)
;
void
absClear
(
const
SkIRect
*
rect
const
GrColor
color
)
;
void
stencilRect
(
const
GrClip
&
clip
const
GrUserStencilSettings
*
ss
GrAAType
const
SkMatrix
&
viewMatrix
const
SkRect
&
rect
)
;
void
stencilPath
(
const
GrClip
&
GrAAType
const
SkMatrix
&
viewMatrix
const
GrPath
*
)
;
bool
drawAndStencilRect
(
const
GrClip
&
const
GrUserStencilSettings
*
SkRegion
:
:
Op
op
bool
invert
GrAA
const
SkMatrix
&
viewMatrix
const
SkRect
&
)
;
bool
drawAndStencilPath
(
const
GrClip
&
const
GrUserStencilSettings
*
SkRegion
:
:
Op
op
bool
invert
GrAA
const
SkMatrix
&
viewMatrix
const
SkPath
&
)
;
SkBudgeted
isBudgeted
(
)
const
;
int
maxWindowRectangles
(
)
const
;
GrSurfaceProxy
:
:
UniqueID
uniqueID
(
)
const
{
return
fRenderTargetContext
-
>
fRenderTargetProxy
-
>
uniqueID
(
)
;
}
uint32_t
testingOnly_addLegacyMeshDrawOp
(
GrPaint
&
&
GrAAType
std
:
:
unique_ptr
<
GrLegacyMeshDrawOp
>
const
GrUserStencilSettings
*
=
nullptr
bool
snapToCenters
=
false
)
;
bool
refsWrappedObjects
(
)
const
{
return
fRenderTargetContext
-
>
fRenderTargetProxy
-
>
refsWrappedObjects
(
)
;
}
private
:
explicit
GrRenderTargetContextPriv
(
GrRenderTargetContext
*
renderTargetContext
)
:
fRenderTargetContext
(
renderTargetContext
)
{
}
GrRenderTargetContextPriv
(
const
GrRenderTargetPriv
&
)
{
}
GrRenderTargetContextPriv
&
operator
=
(
const
GrRenderTargetPriv
&
)
;
const
GrRenderTargetContextPriv
*
operator
&
(
)
const
;
GrRenderTargetContextPriv
*
operator
&
(
)
;
GrRenderTargetContext
*
fRenderTargetContext
;
friend
class
GrRenderTargetContext
;
}
;
inline
GrRenderTargetContextPriv
GrRenderTargetContext
:
:
priv
(
)
{
return
GrRenderTargetContextPriv
(
this
)
;
}
inline
const
GrRenderTargetContextPriv
GrRenderTargetContext
:
:
priv
(
)
const
{
return
GrRenderTargetContextPriv
(
const_cast
<
GrRenderTargetContext
*
>
(
this
)
)
;
}
#
endif
