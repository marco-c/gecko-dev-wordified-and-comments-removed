#
ifndef
GrTransferBuffer_DEFINED
#
define
GrTransferBuffer_DEFINED
#
include
"
GrGpuResource
.
h
"
class
GrTransferBuffer
:
public
GrGpuResource
{
public
:
void
*
map
(
)
{
return
(
fMapPtr
=
this
-
>
onMap
(
)
)
;
}
void
unmap
(
)
{
SkASSERT
(
fMapPtr
)
;
this
-
>
onUnmap
(
)
;
fMapPtr
=
nullptr
;
}
void
*
mapPtr
(
)
const
{
return
fMapPtr
;
}
bool
isMapped
(
)
const
{
return
SkToBool
(
fMapPtr
)
;
}
protected
:
GrTransferBuffer
(
GrGpu
*
gpu
size_t
gpuMemorySize
)
:
INHERITED
(
gpu
kUncached_LifeCycle
)
fGpuMemorySize
(
gpuMemorySize
)
{
}
private
:
virtual
size_t
onGpuMemorySize
(
)
const
{
return
fGpuMemorySize
;
}
virtual
void
*
onMap
(
)
=
0
;
virtual
void
onUnmap
(
)
=
0
;
void
*
fMapPtr
;
size_t
fGpuMemorySize
;
typedef
GrGpuResource
INHERITED
;
}
;
#
endif
