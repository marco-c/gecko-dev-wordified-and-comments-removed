#
ifndef
GrVkSecondaryCBDrawContext_DEFINED
#
define
GrVkSecondaryCBDrawContext_DEFINED
#
include
"
include
/
core
/
SkRefCnt
.
h
"
#
include
"
include
/
core
/
SkSurfaceProps
.
h
"
#
include
"
include
/
core
/
SkTypes
.
h
"
class
GrBackendSemaphore
;
class
GrContext
;
struct
GrVkDrawableInfo
;
class
SkCanvas
;
class
SkDeferredDisplayList
;
class
SkGpuDevice
;
struct
SkImageInfo
;
class
SkSurfaceCharacterization
;
class
SkSurfaceProps
;
class
SK_API
GrVkSecondaryCBDrawContext
:
public
SkRefCnt
{
public
:
static
sk_sp
<
GrVkSecondaryCBDrawContext
>
Make
(
GrContext
*
const
SkImageInfo
&
const
GrVkDrawableInfo
&
const
SkSurfaceProps
*
props
)
;
~
GrVkSecondaryCBDrawContext
(
)
override
;
SkCanvas
*
getCanvas
(
)
;
void
flush
(
)
;
bool
wait
(
int
numSemaphores
const
GrBackendSemaphore
waitSemaphores
[
]
)
;
void
releaseResources
(
)
;
const
SkSurfaceProps
&
props
(
)
const
{
return
fProps
;
}
bool
characterize
(
SkSurfaceCharacterization
*
characterization
)
const
;
bool
draw
(
SkDeferredDisplayList
*
deferredDisplayList
)
;
private
:
explicit
GrVkSecondaryCBDrawContext
(
sk_sp
<
SkGpuDevice
>
const
SkSurfaceProps
*
)
;
bool
isCompatible
(
const
SkSurfaceCharacterization
&
characterization
)
const
;
sk_sp
<
SkGpuDevice
>
fDevice
;
std
:
:
unique_ptr
<
SkCanvas
>
fCachedCanvas
;
const
SkSurfaceProps
fProps
;
typedef
SkRefCnt
INHERITED
;
}
;
#
endif
