#
ifndef
GrVkUtil_DEFINED
#
define
GrVkUtil_DEFINED
#
include
"
GrColor
.
h
"
#
include
"
GrTypes
.
h
"
#
include
"
GrVkInterface
.
h
"
#
include
"
SkMacros
.
h
"
#
include
"
ir
/
SkSLProgram
.
h
"
#
include
"
vk
/
GrVkTypes
.
h
"
class
GrVkGpu
;
#
define
GR_VK_CALL
(
IFACE
X
)
(
IFACE
)
-
>
fFunctions
.
f
#
#
X
#
ifdef
SK_DEBUG
#
define
GR_VK_CALL_ERRCHECK
(
IFACE
X
)
\
VkResult
SK_MACRO_APPEND_LINE
(
ret
)
=
GR_VK_CALL
(
IFACE
X
)
;
\
SkASSERT
(
VK_SUCCESS
=
=
SK_MACRO_APPEND_LINE
(
ret
)
)
#
else
#
define
GR_VK_CALL_ERRCHECK
(
IFACE
X
)
(
void
)
GR_VK_CALL
(
IFACE
X
)
#
endif
bool
GrPixelConfigToVkFormat
(
GrPixelConfig
config
VkFormat
*
format
)
;
bool
GrVkFormatIsSupported
(
VkFormat
)
;
#
ifdef
SK_DEBUG
bool
GrVkFormatPixelConfigPairIsValid
(
VkFormat
GrPixelConfig
)
;
#
endif
bool
GrSampleCountToVkSampleCount
(
uint32_t
samples
VkSampleCountFlagBits
*
vkSamples
)
;
bool
GrCompileVkShaderModule
(
const
GrVkGpu
*
gpu
const
char
*
shaderString
VkShaderStageFlagBits
stage
VkShaderModule
*
shaderModule
VkPipelineShaderStageCreateInfo
*
stageInfo
const
SkSL
:
:
Program
:
:
Settings
&
settings
SkSL
:
:
String
*
outSPIRV
SkSL
:
:
Program
:
:
Inputs
*
outInputs
)
;
bool
GrInstallVkShaderModule
(
const
GrVkGpu
*
gpu
const
SkSL
:
:
String
&
spirv
VkShaderStageFlagBits
stage
VkShaderModule
*
shaderModule
VkPipelineShaderStageCreateInfo
*
stageInfo
)
;
#
endif
