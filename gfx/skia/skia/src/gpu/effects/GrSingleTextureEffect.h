#
ifndef
GrSingleTextureEffect_DEFINED
#
define
GrSingleTextureEffect_DEFINED
#
include
"
GrFragmentProcessor
.
h
"
#
include
"
GrColorSpaceXform
.
h
"
#
include
"
GrCoordTransform
.
h
"
#
include
"
GrInvariantOutput
.
h
"
#
include
"
SkMatrix
.
h
"
class
GrTexture
;
class
GrSingleTextureEffect
:
public
GrFragmentProcessor
{
public
:
~
GrSingleTextureEffect
(
)
override
;
SkString
dumpInfo
(
)
const
override
{
SkString
str
;
str
.
appendf
(
"
Texture
:
%
d
"
fTextureAccess
.
getTexture
(
)
-
>
uniqueID
(
)
)
;
return
str
;
}
GrColorSpaceXform
*
colorSpaceXform
(
)
const
{
return
fColorSpaceXform
.
get
(
)
;
}
protected
:
GrSingleTextureEffect
(
GrTexture
*
sk_sp
<
GrColorSpaceXform
>
const
SkMatrix
&
)
;
GrSingleTextureEffect
(
GrTexture
*
sk_sp
<
GrColorSpaceXform
>
const
SkMatrix
&
GrTextureParams
:
:
FilterMode
filterMode
)
;
GrSingleTextureEffect
(
GrTexture
*
sk_sp
<
GrColorSpaceXform
>
const
SkMatrix
&
const
GrTextureParams
&
)
;
void
updateInvariantOutputForModulation
(
GrInvariantOutput
*
inout
)
const
{
if
(
GrPixelConfigIsAlphaOnly
(
this
-
>
texture
(
0
)
-
>
config
(
)
)
)
{
inout
-
>
mulByUnknownSingleComponent
(
)
;
}
else
if
(
GrPixelConfigIsOpaque
(
this
-
>
texture
(
0
)
-
>
config
(
)
)
)
{
inout
-
>
mulByUnknownOpaqueFourComponents
(
)
;
}
else
{
inout
-
>
mulByUnknownFourComponents
(
)
;
}
}
private
:
GrCoordTransform
fCoordTransform
;
GrTextureAccess
fTextureAccess
;
sk_sp
<
GrColorSpaceXform
>
fColorSpaceXform
;
typedef
GrFragmentProcessor
INHERITED
;
}
;
#
endif
