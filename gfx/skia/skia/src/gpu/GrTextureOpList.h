#
ifndef
GrTexureOpList_DEFINED
#
define
GrTexureOpList_DEFINED
#
include
"
GrGpuResource
.
h
"
#
include
"
GrOpList
.
h
"
#
include
"
GrSurfaceProxy
.
h
"
#
include
"
SkTArray
.
h
"
class
GrAuditTrail
;
class
GrGpu
;
class
GrOp
;
class
GrTextureProxy
;
struct
SkIPoint
;
struct
SkIRect
;
class
GrTextureOpList
final
:
public
GrOpList
{
public
:
GrTextureOpList
(
GrResourceProvider
*
GrTextureProxy
*
GrAuditTrail
*
)
;
~
GrTextureOpList
(
)
override
;
void
endFlush
(
)
override
;
void
onPrepare
(
GrOpFlushState
*
flushState
)
override
;
bool
onExecute
(
GrOpFlushState
*
flushState
)
override
;
bool
copySurface
(
const
GrCaps
&
caps
GrSurfaceProxy
*
dst
GrSurfaceProxy
*
src
const
SkIRect
&
srcRect
const
SkIPoint
&
dstPoint
)
override
;
GrTextureOpList
*
asTextureOpList
(
)
override
{
return
this
;
}
SkDEBUGCODE
(
void
dump
(
)
const
override
;
)
SkDEBUGCODE
(
int
numOps
(
)
const
override
{
return
fRecordedOps
.
count
(
)
;
}
)
private
:
void
purgeOpsWithUninstantiatedProxies
(
)
override
;
void
gatherProxyIntervals
(
GrResourceAllocator
*
)
const
override
;
void
recordOp
(
std
:
:
unique_ptr
<
GrOp
>
)
;
SkSTArray
<
2
std
:
:
unique_ptr
<
GrOp
>
true
>
fRecordedOps
;
typedef
GrOpList
INHERITED
;
}
;
#
endif
