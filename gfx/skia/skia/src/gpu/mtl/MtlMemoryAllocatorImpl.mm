#
include
"
src
/
gpu
/
mtl
/
MtlMemoryAllocatorImpl
.
h
"
namespace
skgpu
{
sk_sp
<
MtlMemoryAllocator
>
MtlMemoryAllocatorImpl
:
:
Make
(
id
<
MTLDevice
>
device
)
{
return
sk_sp
<
MtlMemoryAllocator
>
(
new
MtlMemoryAllocatorImpl
(
device
)
)
;
}
id
<
MTLBuffer
>
MtlMemoryAllocatorImpl
:
:
newBufferWithLength
(
NSUInteger
length
MTLResourceOptions
options
sk_sp
<
MtlAlloc
>
*
allocation
)
{
allocation
-
>
reset
(
new
Alloc
(
)
)
;
return
[
fDevice
newBufferWithLength
:
length
options
:
options
]
;
}
id
<
MTLTexture
>
MtlMemoryAllocatorImpl
:
:
newTextureWithDescriptor
(
MTLTextureDescriptor
*
texDesc
sk_sp
<
MtlAlloc
>
*
allocation
)
{
allocation
-
>
reset
(
new
Alloc
(
)
)
;
return
[
fDevice
newTextureWithDescriptor
:
texDesc
]
;
}
}
