#
ifndef
GrMtlSampler_DEFINED
#
define
GrMtlSampler_DEFINED
#
import
<
Metal
/
Metal
.
h
>
#
include
"
src
/
core
/
SkOpts
.
h
"
#
include
<
atomic
>
class
GrSamplerState
;
class
GrMtlGpu
;
class
GrMtlSampler
:
public
SkRefCnt
{
public
:
static
GrMtlSampler
*
Create
(
const
GrMtlGpu
*
gpu
const
GrSamplerState
&
)
;
~
GrMtlSampler
(
)
{
fMtlSamplerState
=
nil
;
}
id
<
MTLSamplerState
>
mtlSampler
(
)
const
{
return
fMtlSamplerState
;
}
typedef
uint32_t
Key
;
static
Key
GenerateKey
(
const
GrSamplerState
&
)
;
static
const
Key
&
GetKey
(
const
GrMtlSampler
&
sampler
)
{
return
sampler
.
fKey
;
}
static
uint32_t
Hash
(
const
Key
&
key
)
{
return
SkOpts
:
:
hash
(
reinterpret_cast
<
const
uint32_t
*
>
(
&
key
)
sizeof
(
Key
)
)
;
}
private
:
GrMtlSampler
(
id
<
MTLSamplerState
>
mtlSamplerState
Key
key
)
:
fMtlSamplerState
(
mtlSamplerState
)
fKey
(
key
)
{
}
id
<
MTLSamplerState
>
fMtlSamplerState
;
Key
fKey
;
}
;
#
endif
