#
ifndef
skgpu_MtlMemoryAllocatorImpl_DEFINED
#
define
skgpu_MtlMemoryAllocatorImpl_DEFINED
#
include
"
include
/
core
/
SkRefCnt
.
h
"
#
include
"
include
/
gpu
/
mtl
/
MtlMemoryAllocator
.
h
"
#
import
<
Metal
/
Metal
.
h
>
namespace
skgpu
{
class
MtlMemoryAllocatorImpl
:
public
MtlMemoryAllocator
{
public
:
static
sk_sp
<
MtlMemoryAllocator
>
Make
(
id
<
MTLDevice
>
)
;
~
MtlMemoryAllocatorImpl
(
)
override
{
}
id
<
MTLBuffer
>
newBufferWithLength
(
NSUInteger
length
MTLResourceOptions
options
sk_sp
<
skgpu
:
:
MtlAlloc
>
*
allocation
)
override
;
id
<
MTLTexture
>
newTextureWithDescriptor
(
MTLTextureDescriptor
*
texDesc
sk_sp
<
skgpu
:
:
MtlAlloc
>
*
allocation
)
override
;
class
Alloc
:
public
MtlAlloc
{
public
:
Alloc
(
)
{
}
~
Alloc
(
)
override
{
}
private
:
friend
class
MtlMemoryAllocatorImpl
;
}
;
private
:
MtlMemoryAllocatorImpl
(
id
<
MTLDevice
>
device
)
:
fDevice
(
device
)
{
}
id
<
MTLDevice
>
fDevice
;
}
;
}
#
endif
