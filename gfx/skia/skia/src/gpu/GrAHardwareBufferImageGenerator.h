#
ifndef
GrAHardwareBufferImageGenerator_DEFINED
#
define
GrAHardwareBufferImageGenerator_DEFINED
#
include
"
SkImageGenerator
.
h
"
extern
"
C
"
{
typedef
struct
AHardwareBuffer
AHardwareBuffer
;
}
class
GrAHardwareBufferImageGenerator
:
public
SkImageGenerator
{
public
:
static
std
:
:
unique_ptr
<
SkImageGenerator
>
Make
(
AHardwareBuffer
*
SkAlphaType
sk_sp
<
SkColorSpace
>
)
;
~
GrAHardwareBufferImageGenerator
(
)
override
;
protected
:
bool
onIsValid
(
GrContext
*
)
const
override
;
#
if
SK_SUPPORT_GPU
TexGenType
onCanGenerateTexture
(
)
const
override
{
return
TexGenType
:
:
kCheap
;
}
sk_sp
<
GrTextureProxy
>
onGenerateTexture
(
GrContext
*
const
SkImageInfo
&
const
SkIPoint
&
SkTransferFunctionBehavior
bool
willNeedMipMaps
)
override
;
#
endif
private
:
GrAHardwareBufferImageGenerator
(
const
SkImageInfo
&
AHardwareBuffer
*
SkAlphaType
)
;
sk_sp
<
GrTextureProxy
>
makeProxy
(
GrContext
*
context
)
;
void
clear
(
)
;
static
void
deleteImageTexture
(
void
*
ctx
)
;
AHardwareBuffer
*
fGraphicBuffer
;
GrTexture
*
fOriginalTexture
=
nullptr
;
uint32_t
fOwningContextID
;
typedef
SkImageGenerator
INHERITED
;
}
;
#
endif
