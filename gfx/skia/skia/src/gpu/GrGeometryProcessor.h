#
ifndef
GrGeometryProcessor_DEFINED
#
define
GrGeometryProcessor_DEFINED
#
include
"
GrPrimitiveProcessor
.
h
"
class
GrGeometryProcessor
:
public
GrPrimitiveProcessor
{
public
:
GrGeometryProcessor
(
)
:
INHERITED
(
false
)
fWillUseGeoShader
(
false
)
fLocalCoordsType
(
kUnused_LocalCoordsType
)
{
}
bool
willUseGeoShader
(
)
const
override
{
return
fWillUseGeoShader
;
}
bool
hasTransformedLocalCoords
(
)
const
override
{
return
kHasTransformed_LocalCoordsType
=
=
fLocalCoordsType
;
}
bool
hasExplicitLocalCoords
(
)
const
override
{
return
kHasExplicit_LocalCoordsType
=
=
fLocalCoordsType
;
}
protected
:
const
Attribute
&
addVertexAttrib
(
const
Attribute
&
attribute
)
{
SkASSERT
(
fNumAttribs
<
kMaxVertexAttribs
)
;
fVertexStride
+
=
attribute
.
fOffset
;
fAttribs
[
fNumAttribs
]
=
attribute
;
return
fAttribs
[
fNumAttribs
+
+
]
;
}
void
setWillUseGeoShader
(
)
{
fWillUseGeoShader
=
true
;
}
enum
LocalCoordsType
{
kUnused_LocalCoordsType
kHasExplicit_LocalCoordsType
kHasTransformed_LocalCoordsType
}
;
void
setHasExplicitLocalCoords
(
)
{
SkASSERT
(
kUnused_LocalCoordsType
=
=
fLocalCoordsType
)
;
fLocalCoordsType
=
kHasExplicit_LocalCoordsType
;
}
void
setHasTransformedLocalCoords
(
)
{
SkASSERT
(
kUnused_LocalCoordsType
=
=
fLocalCoordsType
)
;
fLocalCoordsType
=
kHasTransformed_LocalCoordsType
;
}
private
:
bool
fWillUseGeoShader
;
LocalCoordsType
fLocalCoordsType
;
typedef
GrPrimitiveProcessor
INHERITED
;
}
;
#
endif
