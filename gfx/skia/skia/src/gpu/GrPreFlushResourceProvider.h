#
ifndef
GrPreFlushResourceProvider_DEFINED
#
define
GrPreFlushResourceProvider_DEFINED
#
include
"
GrTypes
.
h
"
#
include
"
GrNonAtomicRef
.
h
"
#
include
"
SkRefCnt
.
h
"
#
include
"
SkTDArray
.
h
"
class
GrDrawingManager
;
class
GrOpList
;
class
GrPreFlushResourceProvider
;
class
GrRenderTargetOpList
;
class
GrRenderTargetContext
;
class
GrSurfaceProxy
;
class
SkColorSpace
;
class
SkSurfaceProps
;
class
GrPreFlushCallbackObject
:
public
GrNonAtomicRef
<
GrPreFlushCallbackObject
>
{
public
:
virtual
~
GrPreFlushCallbackObject
(
)
{
}
virtual
void
preFlush
(
GrPreFlushResourceProvider
*
const
uint32_t
*
opListIDs
int
numOpListIDs
SkTArray
<
sk_sp
<
GrRenderTargetContext
>
>
*
results
)
=
0
;
private
:
typedef
SkRefCnt
INHERITED
;
}
;
class
GrPreFlushResourceProvider
{
public
:
sk_sp
<
GrRenderTargetContext
>
makeRenderTargetContext
(
const
GrSurfaceDesc
&
desc
sk_sp
<
SkColorSpace
>
colorSpace
const
SkSurfaceProps
*
props
)
;
sk_sp
<
GrRenderTargetContext
>
makeRenderTargetContext
(
sk_sp
<
GrSurfaceProxy
>
proxy
sk_sp
<
SkColorSpace
>
colorSpace
const
SkSurfaceProps
*
props
)
;
private
:
explicit
GrPreFlushResourceProvider
(
GrDrawingManager
*
drawingMgr
)
:
fDrawingMgr
(
drawingMgr
)
{
}
GrPreFlushResourceProvider
(
const
GrPreFlushResourceProvider
&
)
;
GrPreFlushResourceProvider
&
operator
=
(
const
GrPreFlushResourceProvider
&
)
;
GrDrawingManager
*
fDrawingMgr
;
friend
class
GrDrawingManager
;
}
;
#
endif
