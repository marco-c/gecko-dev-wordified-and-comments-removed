#
ifndef
GrTextureAdjuster_DEFINED
#
define
GrTextureAdjuster_DEFINED
#
include
"
GrTextureProducer
.
h
"
#
include
"
SkTLazy
.
h
"
class
GrTextureAdjuster
:
public
GrTextureProducer
{
public
:
sk_sp
<
GrTextureProxy
>
refTextureProxySafeForParams
(
const
GrSamplerParams
&
SkIPoint
*
outOffset
SkScalar
scaleAdjust
[
2
]
)
;
sk_sp
<
GrFragmentProcessor
>
createFragmentProcessor
(
const
SkMatrix
&
textureMatrix
const
SkRect
&
constraintRect
FilterConstraint
bool
coordsLimitedToConstraintRect
const
GrSamplerParams
:
:
FilterMode
*
filterOrNullForBicubic
SkColorSpace
*
dstColorSpace
)
override
;
GrTextureAdjuster
(
GrContext
*
sk_sp
<
GrTextureProxy
>
SkAlphaType
const
SkIRect
&
area
uint32_t
uniqueID
SkColorSpace
*
)
;
protected
:
SkAlphaType
alphaType
(
)
const
override
{
return
fAlphaType
;
}
void
makeCopyKey
(
const
CopyParams
&
params
GrUniqueKey
*
copyKey
SkColorSpace
*
dstColorSpace
)
override
;
void
didCacheCopy
(
const
GrUniqueKey
&
copyKey
)
override
;
GrTextureProxy
*
originalProxy
(
)
const
{
return
fOriginal
.
get
(
)
;
}
sk_sp
<
GrTextureProxy
>
originalProxyRef
(
)
const
{
return
fOriginal
;
}
const
SkIRect
*
contentAreaOrNull
(
)
{
return
fContentArea
.
getMaybeNull
(
)
;
}
private
:
SkTLazy
<
SkIRect
>
fContentArea
;
GrContext
*
fContext
;
sk_sp
<
GrTextureProxy
>
fOriginal
;
SkAlphaType
fAlphaType
;
SkColorSpace
*
fColorSpace
;
uint32_t
fUniqueID
;
sk_sp
<
GrTextureProxy
>
refTextureProxyCopy
(
const
CopyParams
&
copyParams
)
;
typedef
GrTextureProducer
INHERITED
;
}
;
#
endif
