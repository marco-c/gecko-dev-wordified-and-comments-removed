#
include
"
src
/
gpu
/
GrTransferFromRenderTask
.
h
"
#
include
"
src
/
gpu
/
GrGpu
.
h
"
#
include
"
src
/
gpu
/
GrOpFlushState
.
h
"
#
include
"
src
/
gpu
/
GrResourceAllocator
.
h
"
void
GrTransferFromRenderTask
:
:
gatherProxyIntervals
(
GrResourceAllocator
*
alloc
)
const
{
alloc
-
>
addInterval
(
fSrcProxy
.
get
(
)
alloc
-
>
curOp
(
)
alloc
-
>
curOp
(
)
GrResourceAllocator
:
:
ActualUse
:
:
kYes
)
;
alloc
-
>
incOps
(
)
;
}
bool
GrTransferFromRenderTask
:
:
onExecute
(
GrOpFlushState
*
flushState
)
{
if
(
!
fSrcProxy
-
>
isInstantiated
(
)
)
{
return
false
;
}
return
flushState
-
>
gpu
(
)
-
>
transferPixelsFrom
(
fSrcProxy
-
>
peekSurface
(
)
fSrcRect
.
fLeft
fSrcRect
.
fTop
fSrcRect
.
width
(
)
fSrcRect
.
height
(
)
fSurfaceColorType
fDstColorType
fDstBuffer
.
get
(
)
fDstOffset
)
;
}
