#
include
"
GrContext
.
h
"
#
include
"
GrContextPriv
.
h
"
#
include
"
GrGpu
.
h
"
#
include
"
GrResourceProvider
.
h
"
#
include
"
GrSemaphore
.
h
"
#
include
"
gl
/
GrGLTypes
.
h
"
GrGLExternalTextureData
:
:
GrGLExternalTextureData
(
const
GrGLTextureInfo
&
info
sk_sp
<
GrSemaphore
>
semaphore
GrContext
*
context
)
:
fInfo
(
info
)
fSemaphore
(
std
:
:
move
(
semaphore
)
)
{
SkASSERT
(
fSemaphore
-
>
unique
(
)
)
;
context
-
>
resourceProvider
(
)
-
>
releaseOwnershipOfSemaphore
(
fSemaphore
)
;
}
void
GrGLExternalTextureData
:
:
attachToContext
(
GrContext
*
context
)
{
context
-
>
resourceProvider
(
)
-
>
takeOwnershipOfSemaphore
(
fSemaphore
)
;
context
-
>
getGpu
(
)
-
>
waitSemaphore
(
fSemaphore
)
;
}
