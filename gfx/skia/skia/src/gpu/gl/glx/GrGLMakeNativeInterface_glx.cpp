#
include
"
include
/
gpu
/
gl
/
GrGLAssembleInterface
.
h
"
#
include
"
include
/
gpu
/
gl
/
GrGLInterface
.
h
"
#
include
"
src
/
gpu
/
gl
/
GrGLUtil
.
h
"
#
define
GLX_GLXEXT_PROTOTYPES
1
#
include
<
GL
/
glx
.
h
>
static
GrGLFuncPtr
glx_get
(
void
*
ctx
const
char
name
[
]
)
{
if
(
0
=
=
strncmp
(
name
"
egl
"
3
)
)
{
return
nullptr
;
}
SkASSERT
(
nullptr
=
=
ctx
)
;
SkASSERT
(
glXGetCurrentContext
(
)
)
;
return
glXGetProcAddress
(
reinterpret_cast
<
const
GLubyte
*
>
(
name
)
)
;
}
sk_sp
<
const
GrGLInterface
>
GrGLMakeNativeInterface
(
)
{
if
(
nullptr
=
=
glXGetCurrentContext
(
)
)
{
return
nullptr
;
}
return
GrGLMakeAssembledInterface
(
nullptr
glx_get
)
;
}
const
GrGLInterface
*
GrGLCreateNativeInterface
(
)
{
return
GrGLMakeNativeInterface
(
)
.
release
(
)
;
}
