#
ifndef
SkPngEncoder_DEFINED
#
define
SkPngEncoder_DEFINED
#
include
"
SkEncoder
.
h
"
#
include
"
SkDataTable
.
h
"
class
SkPngEncoderMgr
;
class
SkWStream
;
class
SK_API
SkPngEncoder
:
public
SkEncoder
{
public
:
enum
class
FilterFlag
:
int
{
kZero
=
0x00
kNone
=
0x08
kSub
=
0x10
kUp
=
0x20
kAvg
=
0x40
kPaeth
=
0x80
kAll
=
kNone
|
kSub
|
kUp
|
kAvg
|
kPaeth
}
;
struct
Options
{
FilterFlag
fFilterFlags
=
FilterFlag
:
:
kAll
;
int
fZLibLevel
=
6
;
SkTransferFunctionBehavior
fUnpremulBehavior
=
SkTransferFunctionBehavior
:
:
kRespect
;
sk_sp
<
SkDataTable
>
fComments
;
}
;
static
bool
Encode
(
SkWStream
*
dst
const
SkPixmap
&
src
const
Options
&
options
)
;
static
std
:
:
unique_ptr
<
SkEncoder
>
Make
(
SkWStream
*
dst
const
SkPixmap
&
src
const
Options
&
options
)
;
~
SkPngEncoder
(
)
override
;
protected
:
bool
onEncodeRows
(
int
numRows
)
override
;
SkPngEncoder
(
std
:
:
unique_ptr
<
SkPngEncoderMgr
>
const
SkPixmap
&
src
)
;
std
:
:
unique_ptr
<
SkPngEncoderMgr
>
fEncoderMgr
;
typedef
SkEncoder
INHERITED
;
}
;
static
inline
SkPngEncoder
:
:
FilterFlag
operator
|
(
SkPngEncoder
:
:
FilterFlag
x
SkPngEncoder
:
:
FilterFlag
y
)
{
return
(
SkPngEncoder
:
:
FilterFlag
)
(
(
int
)
x
|
(
int
)
y
)
;
}
#
endif
