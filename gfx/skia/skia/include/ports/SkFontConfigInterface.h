#
ifndef
SkFontConfigInterface_DEFINED
#
define
SkFontConfigInterface_DEFINED
#
include
"
SkDataTable
.
h
"
#
include
"
SkFontStyle
.
h
"
#
include
"
SkRefCnt
.
h
"
#
include
"
SkTypeface
.
h
"
class
SkFontMgr
;
class
SK_API
SkFontConfigInterface
:
public
SkRefCnt
{
public
:
static
SkFontConfigInterface
*
RefGlobal
(
)
;
static
SkFontConfigInterface
*
SetGlobal
(
SkFontConfigInterface
*
)
;
struct
FontIdentity
{
FontIdentity
(
)
:
fID
(
0
)
fTTCIndex
(
0
)
{
}
bool
operator
=
=
(
const
FontIdentity
&
other
)
const
{
return
fID
=
=
other
.
fID
&
&
fTTCIndex
=
=
other
.
fTTCIndex
&
&
fString
=
=
other
.
fString
;
}
bool
operator
!
=
(
const
FontIdentity
&
other
)
const
{
return
!
(
*
this
=
=
other
)
;
}
uint32_t
fID
;
int32_t
fTTCIndex
;
SkString
fString
;
SkFontStyle
fStyle
;
size_t
writeToMemory
(
void
*
buffer
=
NULL
)
const
;
size_t
readFromMemory
(
const
void
*
buffer
size_t
length
)
;
}
;
virtual
bool
matchFamilyName
(
const
char
familyName
[
]
SkFontStyle
requested
FontIdentity
*
outFontIdentifier
SkString
*
outFamilyName
SkFontStyle
*
outStyle
)
=
0
;
virtual
SkStreamAsset
*
openStream
(
const
FontIdentity
&
)
=
0
;
virtual
sk_sp
<
SkTypeface
>
makeTypeface
(
const
FontIdentity
&
identity
)
{
return
SkTypeface
:
:
MakeFromStream
(
this
-
>
openStream
(
identity
)
identity
.
fTTCIndex
)
;
}
static
SkFontConfigInterface
*
GetSingletonDirectInterface
(
)
;
virtual
sk_sp
<
SkDataTable
>
getFamilyNames
(
)
{
return
SkDataTable
:
:
MakeEmpty
(
)
;
}
typedef
SkRefCnt
INHERITED
;
}
;
#
endif
