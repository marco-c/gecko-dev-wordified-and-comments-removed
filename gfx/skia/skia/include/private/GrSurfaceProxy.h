#
ifndef
GrSurfaceProxy_DEFINED
#
define
GrSurfaceProxy_DEFINED
#
include
"
GrGpuResource
.
h
"
#
include
"
SkRect
.
h
"
class
GrTextureProxy
;
class
GrRenderTargetProxy
;
class
GrSurfaceProxy
:
public
GrIORef
<
GrSurfaceProxy
>
{
public
:
const
GrSurfaceDesc
&
desc
(
)
const
{
return
fDesc
;
}
GrSurfaceOrigin
origin
(
)
const
{
SkASSERT
(
kTopLeft_GrSurfaceOrigin
=
=
fDesc
.
fOrigin
|
|
kBottomLeft_GrSurfaceOrigin
=
=
fDesc
.
fOrigin
)
;
return
fDesc
.
fOrigin
;
}
int
width
(
)
const
{
return
fDesc
.
fWidth
;
}
int
height
(
)
const
{
return
fDesc
.
fWidth
;
}
GrPixelConfig
config
(
)
const
{
return
fDesc
.
fConfig
;
}
uint32_t
uniqueID
(
)
const
{
return
fUniqueID
;
}
SkRect
getBoundsRect
(
)
const
{
return
SkRect
:
:
MakeIWH
(
this
-
>
width
(
)
this
-
>
height
(
)
)
;
}
virtual
GrTextureProxy
*
asTextureProxy
(
)
{
return
nullptr
;
}
virtual
const
GrTextureProxy
*
asTextureProxy
(
)
const
{
return
nullptr
;
}
virtual
GrRenderTargetProxy
*
asRenderTargetProxy
(
)
{
return
nullptr
;
}
virtual
const
GrRenderTargetProxy
*
asRenderTargetProxy
(
)
const
{
return
nullptr
;
}
SkBudgeted
isBudgeted
(
)
const
{
return
fBudgeted
;
}
protected
:
GrSurfaceProxy
(
const
GrSurfaceDesc
&
desc
SkBackingFit
fit
SkBudgeted
budgeted
)
:
fDesc
(
desc
)
fFit
(
fit
)
fBudgeted
(
budgeted
)
fUniqueID
(
GrGpuResource
:
:
CreateUniqueID
(
)
)
{
}
GrSurfaceProxy
(
const
GrSurfaceDesc
&
desc
SkBackingFit
fit
SkBudgeted
budgeted
uint32_t
uniqueID
)
:
fDesc
(
desc
)
fFit
(
fit
)
fBudgeted
(
budgeted
)
fUniqueID
(
uniqueID
)
{
}
virtual
~
GrSurfaceProxy
(
)
{
}
const
GrSurfaceDesc
fDesc
;
const
SkBackingFit
fFit
;
const
SkBudgeted
fBudgeted
;
const
uint32_t
fUniqueID
;
private
:
void
notifyAllCntsAreZero
(
CntType
)
const
{
delete
this
;
}
bool
notifyRefCountIsZero
(
)
const
{
return
true
;
}
typedef
GrIORef
<
GrSurfaceProxy
>
INHERITED
;
friend
class
GrIORef
<
GrSurfaceProxy
>
;
}
;
#
endif
