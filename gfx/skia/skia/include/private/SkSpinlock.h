#
ifndef
SkSpinlock_DEFINED
#
define
SkSpinlock_DEFINED
#
include
"
SkTypes
.
h
"
#
include
"
SkAtomics
.
h
"
class
SkSpinlock
{
public
:
void
acquire
(
)
{
if
(
fLocked
.
exchange
(
true
sk_memory_order_acquire
)
)
{
this
-
>
contendedAcquire
(
)
;
}
}
void
release
(
)
{
fLocked
.
store
(
false
sk_memory_order_release
)
;
}
private
:
SK_API
void
contendedAcquire
(
)
;
SkAtomic
<
bool
>
fLocked
{
false
}
;
}
;
#
endif
