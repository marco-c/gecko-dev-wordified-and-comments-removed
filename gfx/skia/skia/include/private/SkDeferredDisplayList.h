#
ifndef
SkDeferredDisplayList_DEFINED
#
define
SkDeferredDisplayList_DEFINED
#
include
"
SkSurfaceCharacterization
.
h
"
#
if
SK_SUPPORT_GPU
#
include
"
GrOpList
.
h
"
#
endif
#
ifdef
SK_RASTER_RECORDER_IMPLEMENTATION
class
SkImage
;
#
endif
class
SkSurface
;
class
SkDeferredDisplayList
{
public
:
#
ifdef
SK_RASTER_RECORDER_IMPLEMENTATION
SkDeferredDisplayList
(
const
SkSurfaceCharacterization
&
characterization
sk_sp
<
SkImage
>
image
)
:
fCharacterization
(
characterization
)
fImage
(
std
:
:
move
(
image
)
)
{
}
bool
draw
(
SkSurface
*
)
const
;
#
endif
#
if
SK_SUPPORT_GPU
class
LazyProxyData
:
public
SkRefCnt
{
public
:
GrRenderTargetProxy
*
fReplayDest
=
nullptr
;
}
;
#
else
class
LazyProxyData
:
public
SkRefCnt
{
}
;
#
endif
SkDeferredDisplayList
(
const
SkSurfaceCharacterization
&
characterization
sk_sp
<
LazyProxyData
>
)
;
const
SkSurfaceCharacterization
&
characterization
(
)
const
{
return
fCharacterization
;
}
private
:
friend
class
GrDrawingManager
;
friend
class
SkDeferredDisplayListRecorder
;
const
SkSurfaceCharacterization
fCharacterization
;
#
ifdef
SK_RASTER_RECORDER_IMPLEMENTATION
sk_sp
<
SkImage
>
fImage
;
#
else
#
if
SK_SUPPORT_GPU
SkTArray
<
sk_sp
<
GrOpList
>
>
fOpLists
;
#
endif
sk_sp
<
LazyProxyData
>
fLazyProxyData
;
#
endif
}
;
#
endif
