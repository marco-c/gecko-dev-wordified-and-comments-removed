#
ifndef
SkDeferredDisplayList_DEFINED
#
define
SkDeferredDisplayList_DEFINED
#
include
"
SkSurfaceCharacterization
.
h
"
#
if
SK_SUPPORT_GPU
#
include
"
GrCCPerOpListPaths
.
h
"
#
include
"
GrOpList
.
h
"
#
include
<
map
>
#
endif
class
SkDeferredDisplayListPriv
;
class
SkSurface
;
class
SK_API
SkDeferredDisplayList
{
public
:
#
if
SK_SUPPORT_GPU
class
LazyProxyData
:
public
SkRefCnt
{
public
:
GrRenderTargetProxy
*
fReplayDest
=
nullptr
;
}
;
#
else
class
LazyProxyData
:
public
SkRefCnt
{
}
;
#
endif
SkDeferredDisplayList
(
const
SkSurfaceCharacterization
&
characterization
sk_sp
<
LazyProxyData
>
)
;
~
SkDeferredDisplayList
(
)
;
const
SkSurfaceCharacterization
&
characterization
(
)
const
{
return
fCharacterization
;
}
SkDeferredDisplayListPriv
priv
(
)
;
const
SkDeferredDisplayListPriv
priv
(
)
const
;
private
:
friend
class
GrDrawingManager
;
friend
class
SkDeferredDisplayListRecorder
;
friend
class
SkDeferredDisplayListPriv
;
const
SkSurfaceCharacterization
fCharacterization
;
#
if
SK_SUPPORT_GPU
using
PendingPathsMap
=
std
:
:
map
<
uint32_t
sk_sp
<
GrCCPerOpListPaths
>
>
;
SkTArray
<
sk_sp
<
GrOpList
>
>
fOpLists
;
PendingPathsMap
fPendingPaths
;
#
endif
sk_sp
<
LazyProxyData
>
fLazyProxyData
;
}
;
#
endif
