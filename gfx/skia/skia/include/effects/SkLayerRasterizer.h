#
ifndef
SkLayerRasterizer_DEFINED
#
define
SkLayerRasterizer_DEFINED
#
include
"
SkRasterizer
.
h
"
#
include
"
SkDeque
.
h
"
#
include
"
SkScalar
.
h
"
class
SkPaint
;
class
SK_API
SkLayerRasterizer
:
public
SkRasterizer
{
public
:
virtual
~
SkLayerRasterizer
(
)
;
class
SK_API
Builder
{
public
:
Builder
(
)
;
~
Builder
(
)
;
void
addLayer
(
const
SkPaint
&
paint
)
{
this
-
>
addLayer
(
paint
0
0
)
;
}
void
addLayer
(
const
SkPaint
&
paint
SkScalar
dx
SkScalar
dy
)
;
sk_sp
<
SkLayerRasterizer
>
detach
(
)
;
sk_sp
<
SkLayerRasterizer
>
snapshot
(
)
const
;
#
ifdef
SK_SUPPORT_LEGACY_MINOR_EFFECT_PTR
SkLayerRasterizer
*
detachRasterizer
(
)
{
return
this
-
>
detach
(
)
.
release
(
)
;
}
SkLayerRasterizer
*
snapshotRasterizer
(
)
const
{
return
this
-
>
snapshot
(
)
.
release
(
)
;
}
#
endif
private
:
SkDeque
*
fLayers
;
}
;
SK_DECLARE_PUBLIC_FLATTENABLE_DESERIALIZATION_PROCS
(
SkLayerRasterizer
)
protected
:
SkLayerRasterizer
(
)
;
SkLayerRasterizer
(
SkDeque
*
layers
)
;
void
flatten
(
SkWriteBuffer
&
)
const
override
;
virtual
bool
onRasterize
(
const
SkPath
&
path
const
SkMatrix
&
matrix
const
SkIRect
*
clipBounds
SkMask
*
mask
SkMask
:
:
CreateMode
mode
)
const
override
;
private
:
const
SkDeque
*
const
fLayers
;
static
SkDeque
*
ReadLayers
(
SkReadBuffer
&
buffer
)
;
friend
class
LayerRasterizerTester
;
typedef
SkRasterizer
INHERITED
;
}
;
#
endif
