#
ifndef
GrBackendSemaphore_DEFINED
#
define
GrBackendSemaphore_DEFINED
#
include
"
GrTypes
.
h
"
#
include
"
gl
/
GrGLTypes
.
h
"
#
include
"
vk
/
GrVkTypes
.
h
"
class
GrBackendSemaphore
{
public
:
GrBackendSemaphore
(
)
:
fBackend
(
GrBackendApi
:
:
kOpenGL
)
fGLSync
(
0
)
fIsInitialized
(
false
)
{
}
void
initGL
(
GrGLsync
sync
)
{
fBackend
=
GrBackendApi
:
:
kOpenGL
;
fGLSync
=
sync
;
fIsInitialized
=
true
;
}
void
initVulkan
(
VkSemaphore
semaphore
)
{
fBackend
=
GrBackendApi
:
:
kVulkan
;
fVkSemaphore
=
semaphore
;
#
ifdef
SK_VULKAN
fIsInitialized
=
true
;
#
else
fIsInitialized
=
false
;
#
endif
}
bool
isInitialized
(
)
const
{
return
fIsInitialized
;
}
GrGLsync
glSync
(
)
const
{
if
(
!
fIsInitialized
|
|
GrBackendApi
:
:
kOpenGL
!
=
fBackend
)
{
return
0
;
}
return
fGLSync
;
}
VkSemaphore
vkSemaphore
(
)
const
{
if
(
!
fIsInitialized
|
|
GrBackendApi
:
:
kVulkan
!
=
fBackend
)
{
return
VK_NULL_HANDLE
;
}
return
fVkSemaphore
;
}
private
:
GrBackendApi
fBackend
;
union
{
GrGLsync
fGLSync
;
VkSemaphore
fVkSemaphore
;
}
;
bool
fIsInitialized
;
}
;
#
endif
