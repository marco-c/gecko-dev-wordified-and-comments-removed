#
ifndef
GrVkTypes_DEFINED
#
define
GrVkTypes_DEFINED
#
include
"
GrExternalTextureData
.
h
"
#
include
"
GrTypes
.
h
"
#
include
"
vk
/
GrVkDefines
.
h
"
struct
GrVkAlloc
{
VkDeviceMemory
fMemory
;
VkDeviceSize
fOffset
;
VkDeviceSize
fSize
;
uint32_t
fFlags
;
enum
Flag
{
kNoncoherent_Flag
=
0x1
}
;
}
;
struct
GrVkImageInfo
{
VkImage
fImage
;
GrVkAlloc
fAlloc
;
VkImageTiling
fImageTiling
;
VkImageLayout
fImageLayout
;
VkFormat
fFormat
;
uint32_t
fLevelCount
;
void
updateImageLayout
(
VkImageLayout
layout
)
{
fImageLayout
=
layout
;
}
}
;
class
GrVkExternalTextureData
:
public
GrExternalTextureData
{
public
:
GrVkExternalTextureData
(
const
GrVkImageInfo
&
info
)
:
fInfo
(
info
)
{
}
GrBackend
getBackend
(
)
const
override
{
return
kVulkan_GrBackend
;
}
protected
:
GrBackendObject
getBackendObject
(
)
const
override
{
return
reinterpret_cast
<
GrBackendObject
>
(
&
fInfo
)
;
}
void
attachToContext
(
GrContext
*
)
override
{
}
GrVkImageInfo
fInfo
;
typedef
GrExternalTextureData
INHERITED
;
}
;
GR_STATIC_ASSERT
(
sizeof
(
GrBackendObject
)
>
=
sizeof
(
const
GrVkImageInfo
*
)
)
;
#
endif
