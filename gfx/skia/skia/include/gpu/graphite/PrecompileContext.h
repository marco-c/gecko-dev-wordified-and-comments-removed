#
ifndef
skgpu_graphite_PrecompileContext_DEFINED
#
define
skgpu_graphite_PrecompileContext_DEFINED
#
include
"
include
/
core
/
SkRefCnt
.
h
"
#
include
"
include
/
private
/
base
/
SingleOwner
.
h
"
#
include
"
include
/
private
/
base
/
SkAPI
.
h
"
#
include
<
chrono
>
#
include
<
memory
>
#
include
<
string
>
class
SkData
;
namespace
skgpu
:
:
graphite
{
class
SharedContext
;
class
PrecompileContextPriv
;
class
ResourceProvider
;
class
SK_API
PrecompileContext
{
public
:
~
PrecompileContext
(
)
;
void
purgePipelinesNotUsedInMs
(
std
:
:
chrono
:
:
milliseconds
msNotUsed
)
;
enum
class
StatOptions
{
kPrecompile
kPipelineCache
}
;
void
reportPipelineStats
(
StatOptions
option
=
StatOptions
:
:
kPrecompile
)
;
bool
precompile
(
sk_sp
<
SkData
>
serializedPipelineKey
)
;
std
:
:
string
getPipelineLabel
(
sk_sp
<
SkData
>
serializedPipelineKey
)
;
PrecompileContextPriv
priv
(
)
;
const
PrecompileContextPriv
priv
(
)
const
;
private
:
friend
class
PrecompileContextPriv
;
friend
class
Context
;
PrecompileContext
(
sk_sp
<
SharedContext
>
)
;
mutable
SingleOwner
fSingleOwner
;
sk_sp
<
SharedContext
>
fSharedContext
;
std
:
:
unique_ptr
<
ResourceProvider
>
fResourceProvider
;
}
;
}
#
endif
