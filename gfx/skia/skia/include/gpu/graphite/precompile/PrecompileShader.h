#
ifndef
skgpu_graphite_precompile_PrecompileShader_DEFINED
#
define
skgpu_graphite_precompile_PrecompileShader_DEFINED
#
include
"
include
/
gpu
/
graphite
/
precompile
/
PrecompileBase
.
h
"
#
include
"
include
/
core
/
SkBlendMode
.
h
"
#
include
"
include
/
core
/
SkImageInfo
.
h
"
#
include
"
include
/
effects
/
SkGradientShader
.
h
"
class
SkColorSpace
;
namespace
skgpu
:
:
graphite
{
class
PrecompileBlender
;
class
PrecompileColorFilter
;
class
PrecompileShaderPriv
;
class
SK_API
PrecompileShader
:
public
PrecompileBase
{
public
:
sk_sp
<
PrecompileShader
>
makeWithLocalMatrix
(
bool
isPerspective
)
const
;
sk_sp
<
PrecompileShader
>
makeWithColorFilter
(
sk_sp
<
PrecompileColorFilter
>
)
const
;
sk_sp
<
PrecompileShader
>
makeWithWorkingColorSpace
(
sk_sp
<
SkColorSpace
>
inputCS
sk_sp
<
SkColorSpace
>
outputCS
=
nullptr
)
const
;
PrecompileShaderPriv
priv
(
)
;
const
PrecompileShaderPriv
priv
(
)
const
;
protected
:
friend
class
PrecompileShaderPriv
;
PrecompileShader
(
)
:
PrecompileBase
(
Type
:
:
kShader
)
{
}
~
PrecompileShader
(
)
override
;
virtual
bool
isConstant
(
int
)
const
{
return
false
;
}
virtual
bool
isALocalMatrixShader
(
)
const
{
return
false
;
}
}
;
namespace
PrecompileShaders
{
SK_API
sk_sp
<
PrecompileShader
>
Empty
(
)
;
SK_API
sk_sp
<
PrecompileShader
>
Color
(
)
;
SK_API
sk_sp
<
PrecompileShader
>
Color
(
sk_sp
<
SkColorSpace
>
)
;
SK_API
sk_sp
<
PrecompileShader
>
Blend
(
SkSpan
<
const
SkBlendMode
>
blendModes
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
dsts
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
srcs
)
;
SK_API
sk_sp
<
PrecompileShader
>
Blend
(
SkSpan
<
const
sk_sp
<
PrecompileBlender
>
>
blenders
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
dsts
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
srcs
)
;
SK_API
sk_sp
<
PrecompileShader
>
CoordClamp
(
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
)
;
enum
class
ImageShaderFlags
:
uint16_t
{
kNone
=
0
kCubicSampling
=
1
<
<
1
kIncludeAlphaOnly
=
1
<
<
2
kAll
=
kCubicSampling
|
kIncludeAlphaOnly
kExcludeCubic
=
kIncludeAlphaOnly
kNoAlphaNoCubic
=
kNone
}
;
static
constexpr
SkTileMode
kAllTileModes
[
]
=
{
SkTileMode
:
:
kClamp
SkTileMode
:
:
kRepeat
SkTileMode
:
:
kMirror
SkTileMode
:
:
kDecal
}
;
SK_API
sk_sp
<
PrecompileShader
>
Image
(
ImageShaderFlags
=
ImageShaderFlags
:
:
kAll
SkSpan
<
const
SkColorInfo
>
=
{
}
SkSpan
<
const
SkTileMode
>
=
{
kAllTileModes
}
)
;
SK_API
sk_sp
<
PrecompileShader
>
Image
(
SkSpan
<
const
SkColorInfo
>
colorInfos
SkSpan
<
const
SkTileMode
>
=
{
kAllTileModes
}
)
;
SK_API
sk_sp
<
PrecompileShader
>
RawImage
(
ImageShaderFlags
=
ImageShaderFlags
:
:
kExcludeCubic
SkSpan
<
const
SkColorInfo
>
=
{
}
SkSpan
<
const
SkTileMode
>
=
{
kAllTileModes
}
)
;
enum
class
YUVImageShaderFlags
:
uint16_t
{
kNone
=
0
kHardwareSamplingNoSwizzle
=
1
<
<
1
kHardwareSampling
=
1
<
<
2
kShaderBasedSampling
=
1
<
<
3
kCubicSampling
=
1
<
<
4
kExcludeCubic
=
kHardwareSamplingNoSwizzle
|
kHardwareSampling
|
kShaderBasedSampling
kNoCubicNoNonSwizzledHW
=
kHardwareSamplingNoSwizzle
|
kShaderBasedSampling
}
;
SK_API
sk_sp
<
PrecompileShader
>
YUVImage
(
YUVImageShaderFlags
=
YUVImageShaderFlags
:
:
kExcludeCubic
SkSpan
<
const
SkColorInfo
>
=
{
}
)
;
SK_API
sk_sp
<
PrecompileShader
>
MakeFractalNoise
(
)
;
SK_API
sk_sp
<
PrecompileShader
>
MakeTurbulence
(
)
;
enum
class
GradientShaderFlags
:
uint16_t
{
kNone
=
0
kSmall
=
1
<
<
1
kMedium
=
1
<
<
2
kLarge
=
1
<
<
3
kAll
=
kSmall
|
kMedium
|
kLarge
kNoLarge
=
kSmall
|
kMedium
}
;
SK_API
sk_sp
<
PrecompileShader
>
LinearGradient
(
GradientShaderFlags
=
GradientShaderFlags
:
:
kAll
SkGradientShader
:
:
Interpolation
=
SkGradientShader
:
:
Interpolation
(
)
)
;
SK_API
sk_sp
<
PrecompileShader
>
RadialGradient
(
GradientShaderFlags
=
GradientShaderFlags
:
:
kAll
SkGradientShader
:
:
Interpolation
=
SkGradientShader
:
:
Interpolation
(
)
)
;
SK_API
sk_sp
<
PrecompileShader
>
TwoPointConicalGradient
(
GradientShaderFlags
=
GradientShaderFlags
:
:
kAll
SkGradientShader
:
:
Interpolation
=
SkGradientShader
:
:
Interpolation
(
)
)
;
SK_API
sk_sp
<
PrecompileShader
>
SweepGradient
(
GradientShaderFlags
=
GradientShaderFlags
:
:
kAll
SkGradientShader
:
:
Interpolation
=
SkGradientShader
:
:
Interpolation
(
)
)
;
SK_API
sk_sp
<
PrecompileShader
>
Picture
(
)
;
SK_API
sk_sp
<
PrecompileShader
>
LocalMatrix
(
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
wrapped
bool
isPerspective
=
false
)
;
SK_API
sk_sp
<
PrecompileShader
>
ColorFilter
(
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
shaders
SkSpan
<
const
sk_sp
<
PrecompileColorFilter
>
>
colorFilters
)
;
SK_API
sk_sp
<
PrecompileShader
>
WorkingColorSpace
(
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
shaders
SkSpan
<
const
sk_sp
<
SkColorSpace
>
>
inputSpaces
SkSpan
<
const
sk_sp
<
SkColorSpace
>
>
outputSpaces
=
{
}
)
;
SK_API
sk_sp
<
PrecompileShader
>
WorkingColorSpaceExplicit
(
SkSpan
<
const
sk_sp
<
PrecompileShader
>
>
shaders
SkSpan
<
const
std
:
:
pair
<
sk_sp
<
SkColorSpace
>
sk_sp
<
SkColorSpace
>
>
>
inputAndOutputSpaces
)
;
}
}
#
endif
