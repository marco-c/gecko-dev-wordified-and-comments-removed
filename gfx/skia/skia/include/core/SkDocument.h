#
ifndef
SkDocument_DEFINED
#
define
SkDocument_DEFINED
#
include
"
SkBitmap
.
h
"
#
include
"
SkPicture
.
h
"
#
include
"
SkPixelSerializer
.
h
"
#
include
"
SkRect
.
h
"
#
include
"
SkRefCnt
.
h
"
#
include
"
SkString
.
h
"
#
include
"
SkTime
.
h
"
class
SkCanvas
;
class
SkWStream
;
#
define
SK_ScalarDefaultRasterDPI
72
.
0f
class
SK_API
SkDocument
:
public
SkRefCnt
{
public
:
struct
OptionalTimestamp
{
SkTime
:
:
DateTime
fDateTime
;
bool
fEnabled
;
OptionalTimestamp
(
)
:
fEnabled
(
false
)
{
}
}
;
struct
PDFMetadata
{
SkString
fTitle
;
SkString
fAuthor
;
SkString
fSubject
;
SkString
fKeywords
;
SkString
fCreator
;
SkString
fProducer
;
OptionalTimestamp
fCreation
;
OptionalTimestamp
fModified
;
}
;
static
sk_sp
<
SkDocument
>
MakePDF
(
SkWStream
*
stream
SkScalar
dpi
const
SkDocument
:
:
PDFMetadata
&
metadata
sk_sp
<
SkPixelSerializer
>
jpegEncoder
bool
pdfa
)
;
static
sk_sp
<
SkDocument
>
MakePDF
(
SkWStream
*
stream
SkScalar
dpi
=
SK_ScalarDefaultRasterDPI
)
{
return
SkDocument
:
:
MakePDF
(
stream
dpi
SkDocument
:
:
PDFMetadata
(
)
nullptr
false
)
;
}
static
sk_sp
<
SkDocument
>
MakePDF
(
const
char
outputFilePath
[
]
SkScalar
dpi
=
SK_ScalarDefaultRasterDPI
)
;
static
sk_sp
<
SkDocument
>
MakeXPS
(
SkWStream
*
stream
SkScalar
dpi
=
SK_ScalarDefaultRasterDPI
)
;
static
sk_sp
<
SkDocument
>
MakeXPS
(
const
char
path
[
]
SkScalar
dpi
=
SK_ScalarDefaultRasterDPI
)
;
SkCanvas
*
beginPage
(
SkScalar
width
SkScalar
height
const
SkRect
*
content
=
NULL
)
;
void
endPage
(
)
;
void
close
(
)
;
void
abort
(
)
;
protected
:
SkDocument
(
SkWStream
*
void
(
*
)
(
SkWStream
*
bool
aborted
)
)
;
virtual
~
SkDocument
(
)
;
virtual
SkCanvas
*
onBeginPage
(
SkScalar
width
SkScalar
height
const
SkRect
&
content
)
=
0
;
virtual
void
onEndPage
(
)
=
0
;
virtual
void
onClose
(
SkWStream
*
)
=
0
;
virtual
void
onAbort
(
)
=
0
;
SkWStream
*
getStream
(
)
{
return
fStream
;
}
enum
State
{
kBetweenPages_State
kInPage_State
kClosed_State
}
;
State
getState
(
)
const
{
return
fState
;
}
private
:
SkWStream
*
fStream
;
void
(
*
fDoneProc
)
(
SkWStream
*
bool
aborted
)
;
State
fState
;
typedef
SkRefCnt
INHERITED
;
}
;
#
endif
