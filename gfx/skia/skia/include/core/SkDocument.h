#
ifndef
SkDocument_DEFINED
#
define
SkDocument_DEFINED
#
include
"
SkBitmap
.
h
"
#
include
"
SkPicture
.
h
"
#
include
"
SkRect
.
h
"
#
include
"
SkRefCnt
.
h
"
#
include
"
SkString
.
h
"
#
include
"
SkTime
.
h
"
class
SkCanvas
;
class
SkWStream
;
#
ifdef
SK_BUILD_FOR_WIN
struct
IXpsOMObjectFactory
;
#
endif
#
define
SK_ScalarDefaultRasterDPI
72
.
0f
class
SK_API
SkDocument
:
public
SkRefCnt
{
public
:
struct
OptionalTimestamp
{
SkTime
:
:
DateTime
fDateTime
;
bool
fEnabled
;
OptionalTimestamp
(
)
:
fEnabled
(
false
)
{
}
}
;
struct
PDFMetadata
{
SkString
fTitle
;
SkString
fAuthor
;
SkString
fSubject
;
SkString
fKeywords
;
SkString
fCreator
;
SkString
fProducer
;
OptionalTimestamp
fCreation
;
OptionalTimestamp
fModified
;
SkScalar
fRasterDPI
=
SK_ScalarDefaultRasterDPI
;
bool
fPDFA
=
false
;
int
fEncodingQuality
=
101
;
}
;
static
sk_sp
<
SkDocument
>
MakePDF
(
SkWStream
*
stream
const
PDFMetadata
&
metadata
)
;
static
sk_sp
<
SkDocument
>
MakePDF
(
SkWStream
*
stream
)
;
#
ifdef
SK_BUILD_FOR_WIN
static
sk_sp
<
SkDocument
>
MakeXPS
(
SkWStream
*
stream
IXpsOMObjectFactory
*
xpsFactory
SkScalar
dpi
=
SK_ScalarDefaultRasterDPI
)
;
#
endif
SkCanvas
*
beginPage
(
SkScalar
width
SkScalar
height
const
SkRect
*
content
=
nullptr
)
;
void
endPage
(
)
;
void
close
(
)
;
void
abort
(
)
;
protected
:
SkDocument
(
SkWStream
*
)
;
virtual
~
SkDocument
(
)
;
virtual
SkCanvas
*
onBeginPage
(
SkScalar
width
SkScalar
height
)
=
0
;
virtual
void
onEndPage
(
)
=
0
;
virtual
void
onClose
(
SkWStream
*
)
=
0
;
virtual
void
onAbort
(
)
=
0
;
SkWStream
*
getStream
(
)
{
return
fStream
;
}
enum
State
{
kBetweenPages_State
kInPage_State
kClosed_State
}
;
State
getState
(
)
const
{
return
fState
;
}
private
:
SkWStream
*
fStream
;
State
fState
;
typedef
SkRefCnt
INHERITED
;
}
;
#
endif
