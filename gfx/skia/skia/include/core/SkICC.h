#
ifndef
SkICC_DEFINED
#
define
SkICC_DEFINED
#
include
"
SkData
.
h
"
#
include
"
SkRefCnt
.
h
"
struct
SkColorSpaceTransferFn
;
class
SkColorSpace
;
class
SkData
;
class
SkMatrix44
;
class
SK_API
SkICC
:
public
SkRefCnt
{
public
:
static
sk_sp
<
SkICC
>
Make
(
const
void
*
size_t
)
;
bool
toXYZD50
(
SkMatrix44
*
toXYZD50
)
const
;
bool
isNumericalTransferFn
(
SkColorSpaceTransferFn
*
fn
)
const
;
struct
Channel
{
size_t
fOffset
;
int
fCount
;
}
;
struct
Tables
{
Channel
fRed
;
Channel
fGreen
;
Channel
fBlue
;
const
float
*
red
(
)
{
return
(
const
float
*
)
(
fStorage
-
>
bytes
(
)
+
fRed
.
fOffset
)
;
}
const
float
*
green
(
)
{
return
(
const
float
*
)
(
fStorage
-
>
bytes
(
)
+
fGreen
.
fOffset
)
;
}
const
float
*
blue
(
)
{
return
(
const
float
*
)
(
fStorage
-
>
bytes
(
)
+
fBlue
.
fOffset
)
;
}
sk_sp
<
SkData
>
fStorage
;
}
;
bool
rawTransferFnData
(
Tables
*
tables
)
const
;
static
sk_sp
<
SkData
>
WriteToICC
(
const
SkColorSpaceTransferFn
&
fn
const
SkMatrix44
&
toXYZD50
)
;
private
:
SkICC
(
sk_sp
<
SkColorSpace
>
colorSpace
)
;
sk_sp
<
SkColorSpace
>
fColorSpace
;
friend
class
ICCTest
;
}
;
#
endif
