#
ifndef
SkPictureRecorder_DEFINED
#
define
SkPictureRecorder_DEFINED
#
include
"
include
/
core
/
SkBBHFactory
.
h
"
#
include
"
include
/
core
/
SkPicture
.
h
"
#
include
"
include
/
core
/
SkRefCnt
.
h
"
#
ifdef
SK_BUILD_FOR_ANDROID_FRAMEWORK
namespace
android
{
class
Picture
;
}
;
#
endif
class
GrContext
;
class
SkCanvas
;
class
SkDrawable
;
class
SkMiniRecorder
;
class
SkPictureRecord
;
class
SkRecord
;
class
SkRecorder
;
class
SK_API
SkPictureRecorder
{
public
:
SkPictureRecorder
(
)
;
~
SkPictureRecorder
(
)
;
enum
RecordFlags
{
kPlaybackDrawPicture_RecordFlag
=
1
<
<
0
}
;
enum
FinishFlags
{
}
;
SkCanvas
*
beginRecording
(
const
SkRect
&
bounds
SkBBHFactory
*
bbhFactory
=
nullptr
uint32_t
recordFlags
=
0
)
;
SkCanvas
*
beginRecording
(
SkScalar
width
SkScalar
height
SkBBHFactory
*
bbhFactory
=
nullptr
uint32_t
recordFlags
=
0
)
{
return
this
-
>
beginRecording
(
SkRect
:
:
MakeWH
(
width
height
)
bbhFactory
recordFlags
)
;
}
SkCanvas
*
getRecordingCanvas
(
)
;
sk_sp
<
SkPicture
>
finishRecordingAsPicture
(
uint32_t
endFlags
=
0
)
;
sk_sp
<
SkPicture
>
finishRecordingAsPictureWithCull
(
const
SkRect
&
cullRect
uint32_t
endFlags
=
0
)
;
sk_sp
<
SkDrawable
>
finishRecordingAsDrawable
(
uint32_t
endFlags
=
0
)
;
private
:
void
reset
(
)
;
#
ifdef
SK_BUILD_FOR_ANDROID_FRAMEWORK
friend
class
android
:
:
Picture
;
#
endif
friend
class
SkPictureRecorderReplayTester
;
void
partialReplay
(
SkCanvas
*
canvas
)
const
;
bool
fActivelyRecording
;
uint32_t
fFlags
;
SkRect
fCullRect
;
sk_sp
<
SkBBoxHierarchy
>
fBBH
;
std
:
:
unique_ptr
<
SkRecorder
>
fRecorder
;
sk_sp
<
SkRecord
>
fRecord
;
std
:
:
unique_ptr
<
SkMiniRecorder
>
fMiniRecorder
;
SkPictureRecorder
(
SkPictureRecorder
&
&
)
=
delete
;
SkPictureRecorder
&
operator
=
(
SkPictureRecorder
&
&
)
=
delete
;
}
;
#
endif
