#
ifndef
SkPictureRecorder_DEFINED
#
define
SkPictureRecorder_DEFINED
#
include
"
.
.
/
private
/
SkMiniRecorder
.
h
"
#
include
"
SkBBHFactory
.
h
"
#
include
"
SkPicture
.
h
"
#
include
"
SkRefCnt
.
h
"
#
ifdef
SK_BUILD_FOR_ANDROID_FRAMEWORK
namespace
android
{
class
Picture
;
}
;
#
endif
class
GrContext
;
class
SkCanvas
;
class
SkDrawable
;
class
SkPictureRecord
;
class
SkRecord
;
class
SkRecorder
;
class
SK_API
SkPictureRecorder
:
SkNoncopyable
{
public
:
SkPictureRecorder
(
)
;
~
SkPictureRecorder
(
)
;
enum
RecordFlags
{
kPlaybackDrawPicture_RecordFlag
=
1
<
<
0
}
;
enum
FinishFlags
{
kReturnNullForEmpty_FinishFlag
=
1
<
<
0
}
;
SkCanvas
*
beginRecording
(
const
SkRect
&
bounds
SkBBHFactory
*
bbhFactory
=
NULL
uint32_t
recordFlags
=
0
)
;
SkCanvas
*
beginRecording
(
SkScalar
width
SkScalar
height
SkBBHFactory
*
bbhFactory
=
NULL
uint32_t
recordFlags
=
0
)
{
return
this
-
>
beginRecording
(
SkRect
:
:
MakeWH
(
width
height
)
bbhFactory
recordFlags
)
;
}
SkCanvas
*
getRecordingCanvas
(
)
;
sk_sp
<
SkPicture
>
finishRecordingAsPicture
(
uint32_t
endFlags
=
0
)
;
sk_sp
<
SkPicture
>
finishRecordingAsPictureWithCull
(
const
SkRect
&
cullRect
uint32_t
endFlags
=
0
)
;
sk_sp
<
SkDrawable
>
finishRecordingAsDrawable
(
uint32_t
endFlags
=
0
)
;
#
ifdef
SK_SUPPORT_LEGACY_PICTURE_PTR
SkPicture
*
SK_WARN_UNUSED_RESULT
endRecordingAsPicture
(
)
{
return
this
-
>
finishRecordingAsPicture
(
)
.
release
(
)
;
}
SkPicture
*
SK_WARN_UNUSED_RESULT
endRecordingAsPicture
(
const
SkRect
&
cullRect
)
{
return
this
-
>
finishRecordingAsPictureWithCull
(
cullRect
)
.
release
(
)
;
}
SkDrawable
*
SK_WARN_UNUSED_RESULT
endRecordingAsDrawable
(
)
{
return
this
-
>
finishRecordingAsDrawable
(
)
.
release
(
)
;
}
SkPicture
*
SK_WARN_UNUSED_RESULT
endRecording
(
)
{
return
this
-
>
endRecordingAsPicture
(
)
;
}
#
endif
private
:
void
reset
(
)
;
#
ifdef
SK_BUILD_FOR_ANDROID_FRAMEWORK
friend
class
android
:
:
Picture
;
#
endif
friend
class
SkPictureRecorderReplayTester
;
void
partialReplay
(
SkCanvas
*
canvas
)
const
;
bool
fActivelyRecording
;
uint32_t
fFlags
;
SkRect
fCullRect
;
SkAutoTUnref
<
SkBBoxHierarchy
>
fBBH
;
SkAutoTUnref
<
SkRecorder
>
fRecorder
;
SkAutoTUnref
<
SkRecord
>
fRecord
;
SkMiniRecorder
fMiniRecorder
;
typedef
SkNoncopyable
INHERITED
;
}
;
#
endif
