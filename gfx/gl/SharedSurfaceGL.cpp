#
include
"
SharedSurfaceGL
.
h
"
#
include
"
GLBlitHelper
.
h
"
#
include
"
GLContext
.
h
"
#
include
"
GLReadTexImageHelper
.
h
"
#
include
"
mozilla
/
gfx
/
2D
.
h
"
#
include
"
mozilla
/
layers
/
TextureForwarder
.
h
"
#
include
"
ScopedGLHelpers
.
h
"
namespace
mozilla
{
namespace
gl
{
UniquePtr
<
SharedSurface_Basic
>
SharedSurface_Basic
:
:
Create
(
const
SharedSurfaceDesc
&
desc
)
{
auto
fb
=
MozFramebuffer
:
:
Create
(
desc
.
gl
desc
.
size
0
false
)
;
if
(
!
fb
)
return
nullptr
;
return
AsUnique
(
new
SharedSurface_Basic
(
desc
std
:
:
move
(
fb
)
)
)
;
}
SharedSurface_Basic
:
:
SharedSurface_Basic
(
const
SharedSurfaceDesc
&
desc
UniquePtr
<
MozFramebuffer
>
&
&
fb
)
:
SharedSurface
(
desc
std
:
:
move
(
fb
)
)
{
}
Maybe
<
layers
:
:
SurfaceDescriptor
>
SharedSurface_Basic
:
:
ToSurfaceDescriptor
(
)
{
return
Nothing
(
)
;
}
SurfaceFactory_Basic
:
:
SurfaceFactory_Basic
(
GLContext
&
gl
)
:
SurfaceFactory
(
{
&
gl
SharedSurfaceType
:
:
Basic
layers
:
:
TextureType
:
:
Unknown
true
}
)
{
}
}
}
