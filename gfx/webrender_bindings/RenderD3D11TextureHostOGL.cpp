#
include
"
RenderD3D11TextureHostOGL
.
h
"
namespace
mozilla
{
namespace
wr
{
RenderDXGITextureHostOGL
:
:
RenderDXGITextureHostOGL
(
WindowsHandle
aHandle
gfx
:
:
SurfaceFormat
aFormat
gfx
:
:
IntSize
aSize
)
:
mTextureHandle
{
0
0
}
mFormat
(
aFormat
)
mSize
(
aSize
)
{
MOZ_COUNT_CTOR_INHERITED
(
RenderDXGITextureHostOGL
RenderTextureHostOGL
)
;
}
RenderDXGITextureHostOGL
:
:
~
RenderDXGITextureHostOGL
(
)
{
MOZ_COUNT_DTOR_INHERITED
(
RenderDXGITextureHostOGL
RenderTextureHostOGL
)
;
}
void
RenderDXGITextureHostOGL
:
:
SetGLContext
(
gl
:
:
GLContext
*
aContext
)
{
MOZ_ASSERT_UNREACHABLE
(
"
No
implementation
for
RenderDXGITextureHostOGL
.
"
)
;
}
bool
RenderDXGITextureHostOGL
:
:
Lock
(
)
{
MOZ_ASSERT_UNREACHABLE
(
"
No
implementation
for
RenderDXGITextureHostOGL
.
"
)
;
return
true
;
}
void
RenderDXGITextureHostOGL
:
:
Unlock
(
)
{
MOZ_ASSERT_UNREACHABLE
(
"
No
implementation
for
RenderDXGITextureHostOGL
.
"
)
;
}
GLuint
RenderDXGITextureHostOGL
:
:
GetGLHandle
(
uint8_t
aChannelIndex
)
const
{
MOZ_ASSERT
(
mFormat
!
=
gfx
:
:
SurfaceFormat
:
:
NV12
|
|
aChannelIndex
<
2
)
;
MOZ_ASSERT
(
mFormat
=
=
gfx
:
:
SurfaceFormat
:
:
NV12
|
|
aChannelIndex
<
1
)
;
MOZ_ASSERT_UNREACHABLE
(
"
No
implementation
for
RenderDXGITextureHostOGL
.
"
)
;
return
0
;
}
gfx
:
:
IntSize
RenderDXGITextureHostOGL
:
:
GetSize
(
uint8_t
aChannelIndex
)
const
{
MOZ_ASSERT
(
mFormat
!
=
gfx
:
:
SurfaceFormat
:
:
NV12
|
|
aChannelIndex
<
2
)
;
MOZ_ASSERT
(
mFormat
=
=
gfx
:
:
SurfaceFormat
:
:
NV12
|
|
aChannelIndex
<
1
)
;
if
(
aChannelIndex
=
=
0
)
{
return
mSize
;
}
else
{
return
mSize
/
2
;
}
}
}
}
