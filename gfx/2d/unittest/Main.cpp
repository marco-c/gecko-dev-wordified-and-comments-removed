#
include
"
SanityChecks
.
h
"
#
include
"
TestPoint
.
h
"
#
include
"
TestScaling
.
h
"
#
include
"
TestBugs
.
h
"
#
include
<
string
>
#
include
<
sstream
>
struct
TestObject
{
TestBase
*
test
;
std
:
:
string
name
;
}
;
int
main
(
)
{
TestObject
tests
[
]
=
{
{
new
SanityChecks
(
)
"
Sanity
Checks
"
}
{
new
TestPoint
(
)
"
Point
Tests
"
}
{
new
TestScaling
(
)
"
Scaling
Tests
"
}
{
new
TestBugs
(
)
"
Bug
Tests
"
}
}
;
int
totalFailures
=
0
;
int
totalTests
=
0
;
std
:
:
stringstream
message
;
printf
(
"
-
-
-
-
-
-
STARTING
RUNNING
TESTS
-
-
-
-
-
-
\
n
"
)
;
for
(
int
i
=
0
;
i
<
sizeof
(
tests
)
/
sizeof
(
TestObject
)
;
i
+
+
)
{
message
<
<
"
-
-
-
RUNNING
TESTS
:
"
<
<
tests
[
i
]
.
name
<
<
"
-
-
-
\
n
"
;
printf
(
message
.
str
(
)
.
c_str
(
)
)
;
message
.
str
(
"
"
)
;
int
failures
=
0
;
totalTests
+
=
tests
[
i
]
.
test
-
>
RunTests
(
&
failures
)
;
totalFailures
+
=
failures
;
delete
tests
[
i
]
.
test
;
}
message
<
<
"
-
-
-
-
-
-
FINISHED
RUNNING
TESTS
-
-
-
-
-
-
\
nTests
run
:
"
<
<
totalTests
<
<
"
-
Passes
:
"
<
<
totalTests
-
totalFailures
<
<
"
-
Failures
:
"
<
<
totalFailures
<
<
"
\
n
"
;
printf
(
message
.
str
(
)
.
c_str
(
)
)
;
return
totalFailures
;
}
