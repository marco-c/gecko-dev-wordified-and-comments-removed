#
ifndef
MOZILLA_GFX_SCALEDFONTWIN_H_
#
define
MOZILLA_GFX_SCALEDFONTWIN_H_
#
include
"
ScaledFontBase
.
h
"
#
include
<
windows
.
h
>
#
include
"
mozilla
/
UniquePtr
.
h
"
namespace
mozilla
{
namespace
gfx
{
class
ScaledFontWin
:
public
ScaledFontBase
{
public
:
MOZ_DECLARE_REFCOUNTED_VIRTUAL_TYPENAME
(
ScaledFontWin
)
ScaledFontWin
(
LOGFONT
*
aFont
Float
aSize
)
;
ScaledFontWin
(
uint8_t
*
aFontData
uint32_t
aFontDataLength
uint32_t
aIndex
Float
aGlyphSize
)
;
virtual
FontType
GetType
(
)
const
{
return
FontType
:
:
GDI
;
}
bool
GetFontFileData
(
FontFileDataOutput
aDataCallback
void
*
aBaton
)
override
;
#
ifdef
USE_SKIA
virtual
SkTypeface
*
GetSkTypeface
(
)
;
#
endif
protected
:
#
ifdef
USE_CAIRO_SCALED_FONT
cairo_font_face_t
*
GetCairoFontFace
(
)
override
;
#
endif
private
:
#
ifdef
USE_SKIA
friend
class
DrawTargetSkia
;
#
endif
LOGFONT
mLogFont
;
struct
MemoryFontRemover
{
HANDLE
memFontHandle
;
MemoryFontRemover
(
HANDLE
aMemFontHandle
)
:
memFontHandle
(
aMemFontHandle
)
{
}
~
MemoryFontRemover
(
)
{
:
:
RemoveFontMemResourceEx
(
memFontHandle
)
;
}
}
;
UniquePtr
<
MemoryFontRemover
>
mMemoryFontRemover
;
}
;
}
}
#
endif
