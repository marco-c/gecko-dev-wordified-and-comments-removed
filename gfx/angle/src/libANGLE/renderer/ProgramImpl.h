#
ifndef
LIBANGLE_RENDERER_PROGRAMIMPL_H_
#
define
LIBANGLE_RENDERER_PROGRAMIMPL_H_
#
include
"
common
/
angleutils
.
h
"
#
include
"
libANGLE
/
BinaryStream
.
h
"
#
include
"
libANGLE
/
Constants
.
h
"
#
include
"
libANGLE
/
Program
.
h
"
#
include
"
libANGLE
/
Shader
.
h
"
#
include
<
map
>
namespace
sh
{
struct
BlockMemberInfo
;
}
namespace
rx
{
struct
LinkResult
{
LinkResult
(
bool
linkSuccess
const
gl
:
:
Error
&
error
)
:
linkSuccess
(
linkSuccess
)
error
(
error
)
{
}
bool
linkSuccess
;
gl
:
:
Error
error
;
}
;
class
ProgramImpl
:
angle
:
:
NonCopyable
{
public
:
ProgramImpl
(
const
gl
:
:
ProgramState
&
state
)
:
mState
(
state
)
{
}
virtual
~
ProgramImpl
(
)
{
}
virtual
LinkResult
load
(
gl
:
:
InfoLog
&
infoLog
gl
:
:
BinaryInputStream
*
stream
)
=
0
;
virtual
gl
:
:
Error
save
(
gl
:
:
BinaryOutputStream
*
stream
)
=
0
;
virtual
void
setBinaryRetrievableHint
(
bool
retrievable
)
=
0
;
virtual
LinkResult
link
(
const
gl
:
:
ContextState
&
data
gl
:
:
InfoLog
&
infoLog
)
=
0
;
virtual
GLboolean
validate
(
const
gl
:
:
Caps
&
caps
gl
:
:
InfoLog
*
infoLog
)
=
0
;
virtual
void
setUniform1fv
(
GLint
location
GLsizei
count
const
GLfloat
*
v
)
=
0
;
virtual
void
setUniform2fv
(
GLint
location
GLsizei
count
const
GLfloat
*
v
)
=
0
;
virtual
void
setUniform3fv
(
GLint
location
GLsizei
count
const
GLfloat
*
v
)
=
0
;
virtual
void
setUniform4fv
(
GLint
location
GLsizei
count
const
GLfloat
*
v
)
=
0
;
virtual
void
setUniform1iv
(
GLint
location
GLsizei
count
const
GLint
*
v
)
=
0
;
virtual
void
setUniform2iv
(
GLint
location
GLsizei
count
const
GLint
*
v
)
=
0
;
virtual
void
setUniform3iv
(
GLint
location
GLsizei
count
const
GLint
*
v
)
=
0
;
virtual
void
setUniform4iv
(
GLint
location
GLsizei
count
const
GLint
*
v
)
=
0
;
virtual
void
setUniform1uiv
(
GLint
location
GLsizei
count
const
GLuint
*
v
)
=
0
;
virtual
void
setUniform2uiv
(
GLint
location
GLsizei
count
const
GLuint
*
v
)
=
0
;
virtual
void
setUniform3uiv
(
GLint
location
GLsizei
count
const
GLuint
*
v
)
=
0
;
virtual
void
setUniform4uiv
(
GLint
location
GLsizei
count
const
GLuint
*
v
)
=
0
;
virtual
void
setUniformMatrix2fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix3fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix4fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix2x3fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix3x2fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix2x4fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix4x2fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix3x4fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformMatrix4x3fv
(
GLint
location
GLsizei
count
GLboolean
transpose
const
GLfloat
*
value
)
=
0
;
virtual
void
setUniformBlockBinding
(
GLuint
uniformBlockIndex
GLuint
uniformBlockBinding
)
=
0
;
virtual
bool
getUniformBlockSize
(
const
std
:
:
string
&
blockName
size_t
*
sizeOut
)
const
=
0
;
virtual
bool
getUniformBlockMemberInfo
(
const
std
:
:
string
&
memberUniformName
sh
:
:
BlockMemberInfo
*
memberInfoOut
)
const
=
0
;
virtual
void
setPathFragmentInputGen
(
const
std
:
:
string
&
inputName
GLenum
genMode
GLint
components
const
GLfloat
*
coeffs
)
=
0
;
protected
:
const
gl
:
:
ProgramState
&
mState
;
}
;
}
#
endif
