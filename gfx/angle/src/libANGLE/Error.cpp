#
include
"
libANGLE
/
Error
.
h
"
#
include
"
common
/
angleutils
.
h
"
#
include
<
cstdarg
>
namespace
gl
{
Error
:
:
Error
(
GLenum
errorCode
const
char
*
msg
.
.
.
)
:
mCode
(
errorCode
)
mID
(
errorCode
)
{
va_list
vararg
;
va_start
(
vararg
msg
)
;
createMessageString
(
)
;
*
mMessage
=
FormatString
(
msg
vararg
)
;
va_end
(
vararg
)
;
}
Error
:
:
Error
(
GLenum
errorCode
GLuint
id
const
char
*
msg
.
.
.
)
:
mCode
(
errorCode
)
mID
(
id
)
{
va_list
vararg
;
va_start
(
vararg
msg
)
;
createMessageString
(
)
;
*
mMessage
=
FormatString
(
msg
vararg
)
;
va_end
(
vararg
)
;
}
void
Error
:
:
createMessageString
(
)
const
{
if
(
!
mMessage
)
{
mMessage
.
reset
(
new
std
:
:
string
)
;
}
}
const
std
:
:
string
&
Error
:
:
getMessage
(
)
const
{
createMessageString
(
)
;
return
*
mMessage
;
}
bool
Error
:
:
operator
=
=
(
const
Error
&
other
)
const
{
if
(
mCode
!
=
other
.
mCode
)
return
false
;
if
(
(
!
mMessage
|
|
!
other
.
mMessage
)
&
&
(
!
mMessage
!
=
!
other
.
mMessage
)
)
return
false
;
return
(
*
mMessage
=
=
*
other
.
mMessage
)
;
}
bool
Error
:
:
operator
!
=
(
const
Error
&
other
)
const
{
return
!
(
*
this
=
=
other
)
;
}
}
namespace
egl
{
Error
:
:
Error
(
EGLint
errorCode
const
char
*
msg
.
.
.
)
:
mCode
(
errorCode
)
mID
(
0
)
{
va_list
vararg
;
va_start
(
vararg
msg
)
;
createMessageString
(
)
;
*
mMessage
=
FormatString
(
msg
vararg
)
;
va_end
(
vararg
)
;
}
Error
:
:
Error
(
EGLint
errorCode
EGLint
id
const
char
*
msg
.
.
.
)
:
mCode
(
errorCode
)
mID
(
id
)
{
va_list
vararg
;
va_start
(
vararg
msg
)
;
createMessageString
(
)
;
*
mMessage
=
FormatString
(
msg
vararg
)
;
va_end
(
vararg
)
;
}
void
Error
:
:
createMessageString
(
)
const
{
if
(
!
mMessage
)
{
mMessage
.
reset
(
new
std
:
:
string
)
;
}
}
const
std
:
:
string
&
Error
:
:
getMessage
(
)
const
{
createMessageString
(
)
;
return
*
mMessage
;
}
}
