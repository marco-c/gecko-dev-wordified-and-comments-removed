#
include
<
gtest
/
gtest
.
h
>
#
include
"
libANGLE
/
signal_utils
.
h
"
using
namespace
angle
;
using
namespace
testing
;
namespace
{
struct
SignalThing
:
public
SignalReceiver
<
>
{
void
signal
(
uint32_t
channelID
)
override
{
wasSignaled
=
true
;
}
bool
wasSignaled
=
false
;
}
;
TEST
(
SignalTest
BroadcastSignals
)
{
BroadcastChannel
<
>
channel
;
SignalThing
thing
;
ChannelBinding
<
>
binding
(
&
thing
0u
)
;
binding
.
bind
(
&
channel
)
;
ASSERT_FALSE
(
thing
.
wasSignaled
)
;
channel
.
signal
(
)
;
ASSERT_TRUE
(
thing
.
wasSignaled
)
;
}
}
