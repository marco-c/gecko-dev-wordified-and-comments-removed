import
subprocess
import
sys
import
os
import
shutil
import
gzip
os_suffix
=
'
.
exe
'
build_dir
=
os
.
path
.
join
(
'
build
'
'
Debug_x64
'
)
def
run_deqp
(
deqp_exe
)
:
    
subprocess
.
call
(
[
deqp_exe
'
-
-
deqp
-
runmode
=
txt
-
caselist
'
'
-
-
deqp
-
gl
-
context
-
type
=
null
'
]
)
script_dir
=
os
.
path
.
dirname
(
sys
.
argv
[
0
]
)
path_to_deqp_exe
=
os
.
path
.
join
(
'
.
.
'
'
.
.
'
build_dir
)
deqp_data_path
=
os
.
path
.
join
(
'
third_party
'
'
deqp
'
'
data
'
)
os
.
chdir
(
os
.
path
.
join
(
script_dir
'
.
.
'
)
)
run_deqp
(
os
.
path
.
join
(
path_to_deqp_exe
'
angle_deqp_gles2_tests
'
+
os_suffix
)
)
run_deqp
(
os
.
path
.
join
(
path_to_deqp_exe
'
angle_deqp_gles3_tests
'
+
os_suffix
)
)
run_deqp
(
os
.
path
.
join
(
path_to_deqp_exe
'
angle_deqp_egl_tests
'
+
os_suffix
)
)
def
compress_case_list
(
case_file
)
:
    
with
open
(
os
.
path
.
join
(
deqp_data_path
case_file
+
'
.
txt
'
)
)
as
in_handle
:
        
data
=
in_handle
.
read
(
)
        
in_handle
.
close
(
)
        
with
gzip
.
open
(
os
.
path
.
join
(
'
deqp_support
'
case_file
+
'
.
txt
.
gz
'
)
'
wb
'
)
as
out_handle
:
            
out_handle
.
write
(
data
)
            
out_handle
.
close
(
)
compress_case_list
(
'
dEQP
-
GLES2
-
cases
'
)
compress_case_list
(
'
dEQP
-
GLES3
-
cases
'
)
compress_case_list
(
'
dEQP
-
EGL
-
cases
'
)
