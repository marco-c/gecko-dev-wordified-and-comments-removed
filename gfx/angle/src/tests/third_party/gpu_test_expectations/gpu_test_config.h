#
ifndef
GPU_CONFIG_GPU_TEST_CONFIG_H_
#
define
GPU_CONFIG_GPU_TEST_CONFIG_H_
#
include
<
string
>
#
include
<
vector
>
#
include
"
angle_config
.
h
"
namespace
gpu
{
struct
GPUInfo
;
class
GPU_EXPORT
GPUTestConfig
{
public
:
enum
OS
{
kOsUnknown
=
0
kOsWinXP
=
1
<
<
0
kOsWinVista
=
1
<
<
1
kOsWin7
=
1
<
<
2
kOsWin8
=
1
<
<
3
kOsMacLeopard
=
1
<
<
4
kOsMacSnowLeopard
=
1
<
<
5
kOsMacLion
=
1
<
<
6
kOsMacMountainLion
=
1
<
<
7
kOsMacMavericks
=
1
<
<
8
kOsMacYosemite
=
1
<
<
9
kOsMacElCapitan
=
1
<
<
10
kOsMac
=
kOsMacLeopard
|
kOsMacSnowLeopard
|
kOsMacLion
|
kOsMacMountainLion
|
kOsMacMavericks
|
kOsMacYosemite
|
kOsMacElCapitan
kOsLinux
=
1
<
<
11
kOsChromeOS
=
1
<
<
12
kOsAndroid
=
1
<
<
13
kOsWin10
=
1
<
<
14
kOsWin
=
kOsWinXP
|
kOsWinVista
|
kOsWin7
|
kOsWin8
|
kOsWin10
}
;
enum
BuildType
{
kBuildTypeUnknown
=
0
kBuildTypeRelease
=
1
<
<
0
kBuildTypeDebug
=
1
<
<
1
}
;
enum
API
{
kAPIUnknown
=
0
kAPID3D9
=
1
<
<
0
kAPID3D11
=
1
<
<
1
kAPIGLDesktop
=
1
<
<
2
kAPIGLES
=
1
<
<
3
}
;
GPUTestConfig
(
)
;
virtual
~
GPUTestConfig
(
)
;
void
set_os
(
int32
os
)
;
void
set_gpu_device_id
(
uint32
id
)
;
void
set_build_type
(
int32
build_type
)
;
void
set_api
(
int32
api
)
;
virtual
void
AddGPUVendor
(
uint32
gpu_vendor
)
;
int32
os
(
)
const
{
return
os_
;
}
const
std
:
:
vector
<
uint32
>
&
gpu_vendor
(
)
const
{
return
gpu_vendor_
;
}
uint32
gpu_device_id
(
)
const
{
return
gpu_device_id_
;
}
int32
build_type
(
)
const
{
return
build_type_
;
}
int32
api
(
)
const
{
return
api_
;
}
virtual
bool
IsValid
(
)
const
;
bool
OverlapsWith
(
const
GPUTestConfig
&
config
)
const
;
void
DisableGPUInfoValidation
(
)
;
protected
:
void
ClearGPUVendor
(
)
;
bool
validate_gpu_info_
;
private
:
int32
os_
;
std
:
:
vector
<
uint32
>
gpu_vendor_
;
uint32
gpu_device_id_
;
int32
build_type_
;
int32
api_
;
}
;
class
GPU_EXPORT
GPUTestBotConfig
:
public
GPUTestConfig
{
public
:
GPUTestBotConfig
(
)
{
}
~
GPUTestBotConfig
(
)
override
;
void
AddGPUVendor
(
uint32
gpu_vendor
)
override
;
bool
SetGPUInfo
(
const
GPUInfo
&
gpu_info
)
;
bool
IsValid
(
)
const
override
;
bool
Matches
(
const
GPUTestConfig
&
config
)
const
;
bool
Matches
(
const
std
:
:
string
&
config_data
)
const
;
bool
LoadCurrentConfig
(
const
GPUInfo
*
gpu_info
)
;
static
bool
CurrentConfigMatches
(
const
std
:
:
string
&
config_data
)
;
static
bool
CurrentConfigMatches
(
const
std
:
:
vector
<
std
:
:
string
>
&
configs
)
;
}
;
}
#
endif
