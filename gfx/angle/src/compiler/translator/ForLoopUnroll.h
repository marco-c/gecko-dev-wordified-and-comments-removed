#
ifndef
COMPILER_TRANSLATOR_FORLOOPUNROLL_H_
#
define
COMPILER_TRANSLATOR_FORLOOPUNROLL_H_
#
include
"
compiler
/
translator
/
LoopInfo
.
h
"
namespace
sh
{
class
ForLoopUnrollMarker
:
public
TIntermTraverser
{
public
:
enum
UnrollCondition
{
kIntegerIndex
kSamplerArrayIndex
}
;
ForLoopUnrollMarker
(
UnrollCondition
condition
bool
hasRunLoopValidation
)
:
TIntermTraverser
(
true
false
false
)
mUnrollCondition
(
condition
)
mSamplerArrayIndexIsFloatLoopIndex
(
false
)
mVisitSamplerArrayIndexNodeInsideLoop
(
false
)
mHasRunLoopValidation
(
hasRunLoopValidation
)
{
}
bool
visitBinary
(
Visit
TIntermBinary
*
node
)
override
;
bool
visitLoop
(
Visit
TIntermLoop
*
node
)
override
;
void
visitSymbol
(
TIntermSymbol
*
node
)
override
;
bool
samplerArrayIndexIsFloatLoopIndex
(
)
const
{
return
mSamplerArrayIndexIsFloatLoopIndex
;
}
private
:
UnrollCondition
mUnrollCondition
;
TLoopStack
mLoopStack
;
bool
mSamplerArrayIndexIsFloatLoopIndex
;
bool
mVisitSamplerArrayIndexNodeInsideLoop
;
bool
mHasRunLoopValidation
;
}
;
}
#
endif
