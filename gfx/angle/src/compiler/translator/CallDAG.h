#
ifndef
COMPILER_TRANSLATOR_CALLDAG_H_
#
define
COMPILER_TRANSLATOR_CALLDAG_H_
#
include
<
map
>
#
include
"
compiler
/
translator
/
IntermNode
.
h
"
#
include
"
compiler
/
translator
/
VariableInfo
.
h
"
namespace
sh
{
class
CallDAG
:
angle
:
:
NonCopyable
{
public
:
CallDAG
(
)
;
~
CallDAG
(
)
;
struct
Record
{
std
:
:
string
name
;
TIntermFunctionDefinition
*
node
;
std
:
:
vector
<
int
>
callees
;
}
;
enum
InitResult
{
INITDAG_SUCCESS
INITDAG_RECURSION
INITDAG_UNDEFINED
}
;
InitResult
init
(
TIntermNode
*
root
TInfoSinkBase
*
info
)
;
size_t
findIndex
(
const
TFunctionSymbolInfo
*
functionInfo
)
const
;
const
Record
&
getRecordFromIndex
(
size_t
index
)
const
;
const
Record
&
getRecord
(
const
TIntermAggregate
*
function
)
const
;
size_t
size
(
)
const
;
void
clear
(
)
;
const
static
size_t
InvalidIndex
;
private
:
std
:
:
vector
<
Record
>
mRecords
;
std
:
:
map
<
int
int
>
mFunctionIdToIndex
;
class
CallDAGCreator
;
}
;
}
#
endif
