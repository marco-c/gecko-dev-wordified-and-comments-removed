#
ifndef
COMPILER_TRANSLATOR_CONSTANTUNION_H_
#
define
COMPILER_TRANSLATOR_CONSTANTUNION_H_
#
include
<
assert
.
h
>
#
include
"
compiler
/
translator
/
Common
.
h
"
#
include
"
compiler
/
translator
/
BaseTypes
.
h
"
class
TDiagnostics
;
class
TConstantUnion
{
public
:
POOL_ALLOCATOR_NEW_DELETE
(
)
;
TConstantUnion
(
)
;
bool
cast
(
TBasicType
newType
const
TConstantUnion
&
constant
)
;
void
setIConst
(
int
i
)
{
iConst
=
i
;
type
=
EbtInt
;
}
void
setUConst
(
unsigned
int
u
)
{
uConst
=
u
;
type
=
EbtUInt
;
}
void
setFConst
(
float
f
)
{
fConst
=
f
;
type
=
EbtFloat
;
}
void
setBConst
(
bool
b
)
{
bConst
=
b
;
type
=
EbtBool
;
}
int
getIConst
(
)
const
{
return
iConst
;
}
unsigned
int
getUConst
(
)
const
{
return
uConst
;
}
float
getFConst
(
)
const
{
return
fConst
;
}
bool
getBConst
(
)
const
{
return
bConst
;
}
bool
operator
=
=
(
const
int
i
)
const
;
bool
operator
=
=
(
const
unsigned
int
u
)
const
;
bool
operator
=
=
(
const
float
f
)
const
;
bool
operator
=
=
(
const
bool
b
)
const
;
bool
operator
=
=
(
const
TConstantUnion
&
constant
)
const
;
bool
operator
!
=
(
const
int
i
)
const
;
bool
operator
!
=
(
const
unsigned
int
u
)
const
;
bool
operator
!
=
(
const
float
f
)
const
;
bool
operator
!
=
(
const
bool
b
)
const
;
bool
operator
!
=
(
const
TConstantUnion
&
constant
)
const
;
bool
operator
>
(
const
TConstantUnion
&
constant
)
const
;
bool
operator
<
(
const
TConstantUnion
&
constant
)
const
;
static
TConstantUnion
add
(
const
TConstantUnion
&
lhs
const
TConstantUnion
&
rhs
TDiagnostics
*
diag
)
;
static
TConstantUnion
sub
(
const
TConstantUnion
&
lhs
const
TConstantUnion
&
rhs
TDiagnostics
*
diag
)
;
static
TConstantUnion
mul
(
const
TConstantUnion
&
lhs
const
TConstantUnion
&
rhs
TDiagnostics
*
diag
)
;
TConstantUnion
operator
%
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
>
>
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
<
<
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
&
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
|
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
^
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
&
&
(
const
TConstantUnion
&
constant
)
const
;
TConstantUnion
operator
|
|
(
const
TConstantUnion
&
constant
)
const
;
TBasicType
getType
(
)
const
{
return
type
;
}
private
:
union
{
int
iConst
;
unsigned
int
uConst
;
bool
bConst
;
float
fConst
;
}
;
TBasicType
type
;
}
;
#
endif
