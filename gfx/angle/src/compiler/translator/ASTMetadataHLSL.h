#
ifndef
COMPILER_TRANSLATOR_ASTMETADATAHLSL_H_
#
define
COMPILER_TRANSLATOR_ASTMETADATAHLSL_H_
#
include
<
set
>
#
include
<
vector
>
namespace
sh
{
class
CallDAG
;
class
TIntermNode
;
class
TIntermIfElse
;
class
TIntermLoop
;
struct
ASTMetadataHLSL
{
ASTMetadataHLSL
(
)
:
mUsesGradient
(
false
)
mCalledInDiscontinuousLoop
(
false
)
mHasGradientLoopInCallGraph
(
false
)
mNeedsLod0
(
false
)
{
}
bool
hasGradientInCallGraph
(
TIntermLoop
*
node
)
;
bool
hasGradientLoop
(
TIntermIfElse
*
node
)
;
bool
mUsesGradient
;
std
:
:
set
<
TIntermNode
*
>
mControlFlowsContainingGradient
;
bool
mCalledInDiscontinuousLoop
;
bool
mHasGradientLoopInCallGraph
;
std
:
:
set
<
TIntermLoop
*
>
mDiscontinuousLoops
;
std
:
:
set
<
TIntermIfElse
*
>
mIfsContainingGradientLoop
;
bool
mNeedsLod0
;
}
;
typedef
std
:
:
vector
<
ASTMetadataHLSL
>
MetadataList
;
MetadataList
CreateASTMetadataHLSL
(
TIntermNode
*
root
const
CallDAG
&
callDag
)
;
}
#
endif
