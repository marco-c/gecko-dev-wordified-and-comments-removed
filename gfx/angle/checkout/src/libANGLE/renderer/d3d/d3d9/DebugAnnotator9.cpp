#
include
"
libANGLE
/
renderer
/
d3d
/
d3d9
/
DebugAnnotator9
.
h
"
#
include
"
common
/
platform
.
h
"
namespace
rx
{
void
DebugAnnotator9
:
:
beginEvent
(
const
char
*
eventName
const
char
*
eventMessage
)
{
angle
:
:
LoggingAnnotator
:
:
beginEvent
(
eventName
eventMessage
)
;
std
:
:
mbstate_t
state
=
std
:
:
mbstate_t
(
)
;
std
:
:
mbsrtowcs
(
mWCharMessage
&
eventMessage
kMaxMessageLength
&
state
)
;
D3DPERF_BeginEvent
(
0
mWCharMessage
)
;
}
void
DebugAnnotator9
:
:
endEvent
(
const
char
*
eventName
)
{
angle
:
:
LoggingAnnotator
:
:
endEvent
(
eventName
)
;
D3DPERF_EndEvent
(
)
;
}
void
DebugAnnotator9
:
:
setMarker
(
const
char
*
markerName
)
{
angle
:
:
LoggingAnnotator
:
:
setMarker
(
markerName
)
;
std
:
:
mbstate_t
state
=
std
:
:
mbstate_t
(
)
;
std
:
:
mbsrtowcs
(
mWCharMessage
&
markerName
kMaxMessageLength
&
state
)
;
D3DPERF_SetMarker
(
0
mWCharMessage
)
;
}
bool
DebugAnnotator9
:
:
getStatus
(
)
{
return
!
!
D3DPERF_GetStatus
(
)
;
}
}
