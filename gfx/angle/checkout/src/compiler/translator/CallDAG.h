#
ifndef
COMPILER_TRANSLATOR_CALLDAG_H_
#
define
COMPILER_TRANSLATOR_CALLDAG_H_
#
include
<
map
>
#
include
"
compiler
/
translator
/
IntermNode
.
h
"
namespace
sh
{
class
CallDAG
:
angle
:
:
NonCopyable
{
public
:
CallDAG
(
)
;
~
CallDAG
(
)
;
struct
Record
{
TIntermFunctionDefinition
*
node
;
std
:
:
vector
<
int
>
callees
;
}
;
enum
InitResult
{
INITDAG_SUCCESS
INITDAG_RECURSION
INITDAG_UNDEFINED
}
;
InitResult
init
(
TIntermNode
*
root
TDiagnostics
*
diagnostics
)
;
size_t
findIndex
(
const
TSymbolUniqueId
&
id
)
const
;
const
Record
&
getRecordFromIndex
(
size_t
index
)
const
;
size_t
size
(
)
const
;
void
clear
(
)
;
const
static
size_t
InvalidIndex
;
private
:
std
:
:
vector
<
Record
>
mRecords
;
std
:
:
map
<
int
int
>
mFunctionIdToIndex
;
class
CallDAGCreator
;
}
;
}
#
endif
