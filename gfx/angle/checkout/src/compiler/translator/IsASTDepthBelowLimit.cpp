#
include
"
compiler
/
translator
/
IsASTDepthBelowLimit
.
h
"
#
include
"
compiler
/
translator
/
tree_util
/
IntermTraverse
.
h
"
namespace
sh
{
namespace
{
class
MaxDepthTraverser
:
public
TIntermTraverser
{
public
:
MaxDepthTraverser
(
int
depthLimit
)
:
TIntermTraverser
(
true
false
false
nullptr
)
{
setMaxAllowedDepth
(
depthLimit
)
;
}
}
;
}
bool
IsASTDepthBelowLimit
(
TIntermNode
*
root
int
maxDepth
)
{
MaxDepthTraverser
traverser
(
maxDepth
+
1
)
;
root
-
>
traverse
(
&
traverser
)
;
return
traverser
.
getMaxDepth
(
)
<
=
maxDepth
;
}
}
