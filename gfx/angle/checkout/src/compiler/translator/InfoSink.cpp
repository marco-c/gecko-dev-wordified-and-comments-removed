#
include
"
compiler
/
translator
/
InfoSink
.
h
"
#
include
"
compiler
/
translator
/
ImmutableString
.
h
"
namespace
sh
{
void
TInfoSinkBase
:
:
prefix
(
Severity
severity
)
{
switch
(
severity
)
{
case
SH_WARNING
:
sink
.
append
(
"
WARNING
:
"
)
;
break
;
case
SH_ERROR
:
sink
.
append
(
"
ERROR
:
"
)
;
break
;
default
:
sink
.
append
(
"
UNKOWN
ERROR
:
"
)
;
break
;
}
}
TInfoSinkBase
&
TInfoSinkBase
:
:
operator
<
<
(
const
ImmutableString
&
str
)
{
sink
.
append
(
str
.
data
(
)
)
;
return
*
this
;
}
void
TInfoSinkBase
:
:
location
(
int
file
int
line
)
{
TPersistStringStream
stream
;
if
(
line
)
stream
<
<
file
<
<
"
:
"
<
<
line
;
else
stream
<
<
file
<
<
"
:
?
"
;
stream
<
<
"
:
"
;
sink
.
append
(
stream
.
str
(
)
)
;
}
}
