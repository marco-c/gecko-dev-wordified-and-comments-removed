#
include
"
compiler
/
translator
/
OutputESSL
.
h
"
namespace
sh
{
TOutputESSL
:
:
TOutputESSL
(
TCompiler
*
compiler
TInfoSinkBase
&
objSink
const
ShCompileOptions
&
compileOptions
)
:
TOutputGLSLBase
(
compiler
objSink
compileOptions
)
{
}
bool
TOutputESSL
:
:
writeVariablePrecision
(
TPrecision
precision
)
{
if
(
precision
=
=
EbpUndefined
)
return
false
;
if
(
precision
=
=
EbpHigh
&
&
!
isHighPrecisionSupported
(
)
)
{
precision
=
EbpMedium
;
}
TInfoSinkBase
&
out
=
objSink
(
)
;
out
<
<
getPrecisionString
(
precision
)
;
return
true
;
}
ImmutableString
TOutputESSL
:
:
translateTextureFunction
(
const
ImmutableString
&
name
const
ShCompileOptions
&
option
)
{
if
(
name
=
=
"
textureVideoWEBGL
"
)
{
if
(
option
.
takeVideoTextureAsExternalOES
)
{
UNIMPLEMENTED
(
)
;
return
ImmutableString
(
"
"
)
;
}
else
{
return
ImmutableString
(
"
texture2D
"
)
;
}
}
return
name
;
}
}
