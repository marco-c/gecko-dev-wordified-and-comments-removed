"
use
strict
"
;
add_task
(
async
function
test_mozicon_file_with_sandbox
(
)
{
assertFileProcess
(
)
;
assertSandboxHeadless
(
)
;
await
createMozIconInFile
(
"
txt
"
)
;
await
createMozIconInFile
(
"
exe
"
)
;
await
createMozIconInFile
(
"
non
-
existent
-
bidule
"
)
;
}
)
;
add_task
(
async
function
test_mozicon_file_with_sandbox_no_remote
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
dom
.
ipc
.
remote
-
mozIcon
"
false
]
]
}
)
;
assertFileProcess
(
)
;
assertSandboxHeadless
(
)
;
assertMozIconIsNotRemote
(
)
;
await
createMozIconInFile
(
"
txt
"
false
)
;
await
createMozIconInFile
(
"
exe
"
false
)
;
await
createMozIconInFile
(
"
non
-
existent
-
bidule
"
false
)
;
}
)
;
