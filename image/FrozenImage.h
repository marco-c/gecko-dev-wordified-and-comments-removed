#
ifndef
mozilla_image_FrozenImage_h
#
define
mozilla_image_FrozenImage_h
#
include
"
ImageWrapper
.
h
"
#
include
"
mozilla
/
gfx
/
2D
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
namespace
mozilla
{
namespace
image
{
class
FrozenImage
:
public
ImageWrapper
{
typedef
gfx
:
:
SourceSurface
SourceSurface
;
public
:
NS_INLINE_DECL_REFCOUNTING_INHERITED
(
FrozenImage
ImageWrapper
)
virtual
void
IncrementAnimationConsumers
(
)
override
;
virtual
void
DecrementAnimationConsumers
(
)
override
;
bool
IsNonAnimated
(
)
const
;
NS_IMETHOD
GetAnimated
(
bool
*
aAnimated
)
override
;
NS_IMETHOD_
(
already_AddRefed
<
SourceSurface
>
)
GetFrame
(
uint32_t
aWhichFrame
uint32_t
aFlags
)
override
;
NS_IMETHOD_
(
already_AddRefed
<
SourceSurface
>
)
GetFrameAtSize
(
const
gfx
:
:
IntSize
&
aSize
uint32_t
aWhichFrame
uint32_t
aFlags
)
override
;
NS_IMETHOD_
(
bool
)
IsImageContainerAvailable
(
layers
:
:
LayerManager
*
aManager
uint32_t
aFlags
)
override
;
NS_IMETHOD_
(
ImgDrawResult
)
GetImageContainerAtSize
(
WindowRenderer
*
aRenderer
const
gfx
:
:
IntSize
&
aSize
const
Maybe
<
SVGImageContext
>
&
aSVGContext
const
Maybe
<
ImageIntRegion
>
&
aRegion
uint32_t
aFlags
layers
:
:
ImageContainer
*
*
aOutContainer
)
override
;
NS_IMETHOD_
(
ImgDrawResult
)
Draw
(
gfxContext
*
aContext
const
nsIntSize
&
aSize
const
ImageRegion
&
aRegion
uint32_t
aWhichFrame
gfx
:
:
SamplingFilter
aSamplingFilter
const
Maybe
<
SVGImageContext
>
&
aSVGContext
uint32_t
aFlags
float
aOpacity
)
override
;
NS_IMETHOD
StartDecoding
(
uint32_t
aFlags
uint32_t
aWhichFrame
)
override
;
NS_IMETHOD_
(
bool
)
StartDecodingWithResult
(
uint32_t
aFlags
uint32_t
aWhichFrame
)
override
;
NS_IMETHOD_
(
DecodeResult
)
RequestDecodeWithResult
(
uint32_t
aFlags
uint32_t
aWhichFrame
)
override
;
NS_IMETHOD
RequestDecodeForSize
(
const
nsIntSize
&
aSize
uint32_t
aFlags
uint32_t
aWhichFrame
)
override
;
NS_IMETHOD_
(
void
)
RequestRefresh
(
const
TimeStamp
&
aTime
)
override
;
NS_IMETHOD
GetAnimationMode
(
uint16_t
*
aAnimationMode
)
override
;
NS_IMETHOD
SetAnimationMode
(
uint16_t
aAnimationMode
)
override
;
NS_IMETHOD
ResetAnimation
(
)
override
;
NS_IMETHOD_
(
float
)
GetFrameIndex
(
uint32_t
aWhichFrame
)
override
;
protected
:
explicit
FrozenImage
(
Image
*
aImage
)
:
ImageWrapper
(
aImage
)
{
}
virtual
~
FrozenImage
(
)
{
}
private
:
friend
class
ImageOps
;
}
;
}
}
#
endif
