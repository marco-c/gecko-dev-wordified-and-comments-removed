#
ifndef
mozilla_image_AutoRestoreSVGState_h
#
define
mozilla_image_AutoRestoreSVGState_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
AutoRestore
.
h
"
#
include
"
mozilla
/
SVGContextPaint
.
h
"
#
include
"
mozilla
/
dom
/
SVGSVGElement
.
h
"
#
include
"
SVGDrawingParameters
.
h
"
#
include
"
SVGDocumentWrapper
.
h
"
namespace
mozilla
{
namespace
image
{
class
MOZ_STACK_CLASS
AutoRestoreSVGState
final
{
public
:
AutoRestoreSVGState
(
const
SVGDrawingParameters
&
aParams
SVGDocumentWrapper
*
aSVGDocumentWrapper
bool
&
aIsDrawing
bool
aContextPaint
)
:
mIsDrawing
(
aIsDrawing
)
mPAR
(
aParams
.
svgContext
aSVGDocumentWrapper
-
>
GetRootSVGElem
(
)
)
mTime
(
aSVGDocumentWrapper
-
>
GetRootSVGElem
(
)
aParams
.
animationTime
)
{
MOZ_ASSERT
(
!
aIsDrawing
)
;
MOZ_ASSERT
(
aSVGDocumentWrapper
-
>
GetDocument
(
)
)
;
aIsDrawing
=
true
;
if
(
aContextPaint
)
{
MOZ_ASSERT
(
aParams
.
svgContext
-
>
GetContextPaint
(
)
)
;
mContextPaint
.
emplace
(
*
aParams
.
svgContext
-
>
GetContextPaint
(
)
*
aSVGDocumentWrapper
-
>
GetDocument
(
)
)
;
}
}
private
:
AutoRestore
<
bool
>
mIsDrawing
;
AutoPreserveAspectRatioOverride
mPAR
;
AutoSVGTimeSetRestore
mTime
;
Maybe
<
AutoSetRestoreSVGContextPaint
>
mContextPaint
;
}
;
}
}
#
endif
