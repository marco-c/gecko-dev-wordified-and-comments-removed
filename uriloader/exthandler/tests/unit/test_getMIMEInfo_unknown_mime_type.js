"
use
strict
"
;
add_task
(
async
function
test_check_unknown_mime_type
(
)
{
const
mimeService
=
Cc
[
"
mozilla
.
org
/
mime
;
1
"
]
.
getService
(
Ci
.
nsIMIMEService
)
;
let
zipType
=
mimeService
.
getTypeFromExtension
(
"
zip
"
)
;
Assert
.
equal
(
zipType
"
application
/
x
-
zip
-
compressed
"
)
;
try
{
let
extension
=
mimeService
.
getPrimaryExtension
(
"
application
/
zip
"
"
"
)
;
Assert
.
ok
(
!
extension
"
Expect
no
known
extension
for
zip
files
.
"
)
;
}
catch
(
ex
)
{
Assert
.
ok
(
ex
"
We
'
ll
take
an
exception
instead
of
an
empty
string
I
guess
.
"
)
;
}
let
found
=
{
}
;
let
mimeInfo
=
mimeService
.
getMIMEInfoFromOS
(
"
application
/
zip
"
"
zip
"
found
)
;
Assert
.
ok
(
found
.
value
"
Should
be
able
to
find
mime
info
even
for
the
unknown
mimetype
.
"
)
;
Assert
.
ok
(
mimeInfo
.
hasDefaultHandler
"
Should
have
a
default
app
"
)
;
}
)
;
