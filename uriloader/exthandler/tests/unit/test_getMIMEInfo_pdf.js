"
use
strict
"
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
gMIMEService
"
"
mozilla
.
org
/
mime
;
1
"
"
nsIMIMEService
"
)
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
gBundleService
"
"
mozilla
.
org
/
intl
/
stringbundle
;
1
"
"
nsIStringBundleService
"
)
;
add_task
(
async
function
test_check_unknown_mime_type
(
)
{
const
mimeService
=
Cc
[
"
mozilla
.
org
/
mime
;
1
"
]
.
getService
(
Ci
.
nsIMIMEService
)
;
let
pdfType
=
mimeService
.
getTypeFromExtension
(
"
pdf
"
)
;
Assert
.
equal
(
pdfType
"
application
/
pdf
"
)
;
let
extension
=
mimeService
.
getPrimaryExtension
(
"
application
/
pdf
"
"
"
)
;
Assert
.
equal
(
extension
"
pdf
"
"
Expect
pdf
extension
when
given
mime
"
)
;
let
mimeInfo
=
gMIMEService
.
getFromTypeAndExtension
(
"
"
"
pdf
"
)
;
let
stringBundle
=
gBundleService
.
createBundle
(
"
chrome
:
/
/
mozapps
/
locale
/
downloads
/
unknownContentType
.
properties
"
)
;
Assert
.
equal
(
mimeInfo
.
description
stringBundle
.
GetStringFromName
(
"
pdfExtHandlerDescription
"
)
"
PDF
has
generic
description
"
)
;
}
)
;
