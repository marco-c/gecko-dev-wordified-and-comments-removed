#
include
"
mozilla
/
java
/
GeckoAppShellWrappers
.
h
"
#
include
"
nsAndroidHandlerApp
.
h
"
using
namespace
mozilla
;
NS_IMPL_ISUPPORTS
(
nsAndroidHandlerApp
nsIHandlerApp
nsISharingHandlerApp
)
nsAndroidHandlerApp
:
:
nsAndroidHandlerApp
(
const
nsAString
&
aName
const
nsAString
&
aDescription
const
nsAString
&
aPackageName
const
nsAString
&
aClassName
const
nsACString
&
aMimeType
const
nsAString
&
aAction
)
:
mName
(
aName
)
mDescription
(
aDescription
)
mPackageName
(
aPackageName
)
mClassName
(
aClassName
)
mMimeType
(
aMimeType
)
mAction
(
aAction
)
{
}
nsAndroidHandlerApp
:
:
~
nsAndroidHandlerApp
(
)
{
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
GetName
(
nsAString
&
aName
)
{
aName
.
Assign
(
mName
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
SetName
(
const
nsAString
&
aName
)
{
mName
.
Assign
(
aName
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
GetDetailedDescription
(
nsAString
&
aDescription
)
{
aDescription
.
Assign
(
mDescription
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
SetDetailedDescription
(
const
nsAString
&
aDescription
)
{
mDescription
.
Assign
(
aDescription
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
Equals
(
nsIHandlerApp
*
aHandlerApp
bool
*
aRetval
)
{
*
aRetval
=
false
;
if
(
!
aHandlerApp
)
{
return
NS_OK
;
}
nsAutoString
name
;
nsAutoString
detailedDescription
;
aHandlerApp
-
>
GetName
(
name
)
;
aHandlerApp
-
>
GetDetailedDescription
(
detailedDescription
)
;
*
aRetval
=
name
.
Equals
(
mName
)
&
&
detailedDescription
.
Equals
(
mDescription
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
LaunchWithURI
(
nsIURI
*
aURI
mozilla
:
:
dom
:
:
BrowsingContext
*
aBrowsingContext
)
{
nsCString
uriSpec
;
aURI
-
>
GetSpec
(
uriSpec
)
;
return
java
:
:
GeckoAppShell
:
:
OpenUriExternal
(
uriSpec
mMimeType
mPackageName
mClassName
mAction
u
"
"
_ns
)
?
NS_OK
:
NS_ERROR_FAILURE
;
}
NS_IMETHODIMP
nsAndroidHandlerApp
:
:
Share
(
const
nsAString
&
data
const
nsAString
&
title
)
{
return
java
:
:
GeckoAppShell
:
:
OpenUriExternal
(
data
mMimeType
mPackageName
mClassName
mAction
u
"
"
_ns
)
?
NS_OK
:
NS_ERROR_FAILURE
;
}
