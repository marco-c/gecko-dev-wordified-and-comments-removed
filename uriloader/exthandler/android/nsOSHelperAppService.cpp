#
include
"
nsOSHelperAppService
.
h
"
#
include
"
nsMIMEInfoAndroid
.
h
"
#
include
"
AndroidBridge
.
h
"
nsOSHelperAppService
:
:
nsOSHelperAppService
(
)
:
nsExternalHelperAppService
(
)
{
}
nsOSHelperAppService
:
:
~
nsOSHelperAppService
(
)
{
}
nsresult
nsOSHelperAppService
:
:
GetMIMEInfoFromOS
(
const
nsACString
&
aMIMEType
const
nsACString
&
aFileExt
bool
*
aFound
nsIMIMEInfo
*
*
aMIMEInfo
)
{
RefPtr
<
nsMIMEInfoAndroid
>
mimeInfo
;
*
aFound
=
false
;
if
(
!
aMIMEType
.
IsEmpty
(
)
)
*
aFound
=
nsMIMEInfoAndroid
:
:
GetMimeInfoForMimeType
(
aMIMEType
getter_AddRefs
(
mimeInfo
)
)
;
if
(
!
*
aFound
)
*
aFound
=
nsMIMEInfoAndroid
:
:
GetMimeInfoForFileExt
(
aFileExt
getter_AddRefs
(
mimeInfo
)
)
;
if
(
!
*
aFound
)
mimeInfo
=
new
nsMIMEInfoAndroid
(
aMIMEType
)
;
mimeInfo
.
forget
(
aMIMEInfo
)
;
return
NS_OK
;
}
nsresult
nsOSHelperAppService
:
:
OSProtocolHandlerExists
(
const
char
*
aScheme
bool
*
aExists
)
{
return
NS_ERROR_NOT_IMPLEMENTED
;
}
NS_IMETHODIMP
nsOSHelperAppService
:
:
GetApplicationDescription
(
const
nsACString
&
aScheme
nsAString
&
_retval
)
{
return
NS_ERROR_NOT_AVAILABLE
;
}
NS_IMETHODIMP
nsOSHelperAppService
:
:
IsCurrentAppOSDefaultForProtocol
(
const
nsACString
&
aScheme
bool
*
_retval
)
{
return
NS_ERROR_NOT_AVAILABLE
;
}
nsresult
nsOSHelperAppService
:
:
GetProtocolHandlerInfoFromOS
(
const
nsACString
&
aScheme
bool
*
found
nsIHandlerInfo
*
*
info
)
{
return
NS_ERROR_NOT_IMPLEMENTED
;
}
nsIHandlerApp
*
nsOSHelperAppService
:
:
CreateAndroidHandlerApp
(
const
nsAString
&
aName
const
nsAString
&
aDescription
const
nsAString
&
aPackageName
const
nsAString
&
aClassName
const
nsACString
&
aMimeType
const
nsAString
&
aAction
)
{
return
new
nsAndroidHandlerApp
(
aName
aDescription
aPackageName
aClassName
aMimeType
aAction
)
;
}
