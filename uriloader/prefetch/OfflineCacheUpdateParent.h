#
ifndef
nsOfflineCacheUpdateParent_h
#
define
nsOfflineCacheUpdateParent_h
#
include
"
mozilla
/
docshell
/
POfflineCacheUpdateParent
.
h
"
#
include
"
mozilla
/
BasePrincipal
.
h
"
#
include
"
nsIOfflineCacheUpdate
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsILoadContext
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
URIParams
;
}
namespace
docshell
{
class
OfflineCacheUpdateParent
:
public
POfflineCacheUpdateParent
public
nsIOfflineCacheUpdateObserver
public
nsILoadContext
{
typedef
mozilla
:
:
ipc
:
:
URIParams
URIParams
;
typedef
mozilla
:
:
ipc
:
:
PrincipalInfo
PrincipalInfo
;
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOFFLINECACHEUPDATEOBSERVER
NS_DECL_NSILOADCONTEXT
nsresult
Schedule
(
const
URIParams
&
manifestURI
const
URIParams
&
documentURI
const
PrincipalInfo
&
loadingPrincipalInfo
const
bool
&
stickDocument
)
;
void
StopSendingMessagesToChild
(
)
{
mIPCClosed
=
true
;
}
OfflineCacheUpdateParent
(
const
mozilla
:
:
OriginAttributes
&
aAttrs
)
;
virtual
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
private
:
~
OfflineCacheUpdateParent
(
)
;
bool
mIPCClosed
;
mozilla
:
:
OriginAttributes
mOriginAttributes
;
}
;
}
}
#
endif
