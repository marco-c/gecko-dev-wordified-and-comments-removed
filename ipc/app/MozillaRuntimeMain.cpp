#
include
"
.
.
/
contentproc
/
plugin
-
container
.
cpp
"
#
include
"
mozilla
/
Bootstrap
.
h
"
#
include
"
mozilla
/
WindowsDllBlocklist
.
h
"
#
ifdef
XP_MACOSX
#
include
"
mozilla
/
Sandbox
.
h
"
#
endif
using
namespace
mozilla
;
int
main
(
int
argc
char
*
argv
[
]
)
{
#
ifdef
XP_MACOSX
std
:
:
string
err
;
if
(
!
mozilla
:
:
EarlyStartMacSandboxIfEnabled
(
argc
argv
err
)
)
{
fprintf
(
stderr
"
Sandbox
error
:
%
s
\
n
"
err
.
c_str
(
)
)
;
MOZ_CRASH
(
"
Sandbox
initialization
failed
"
)
;
}
#
endif
#
ifdef
HAS_DLL_BLOCKLIST
DllBlocklist_Initialize
(
eDllBlocklistInitFlagIsChildProcess
)
;
#
endif
Bootstrap
:
:
UniquePtr
bootstrap
=
GetBootstrap
(
)
;
if
(
!
bootstrap
)
{
return
2
;
}
int
ret
=
content_process_main
(
bootstrap
.
get
(
)
argc
argv
)
;
#
if
defined
(
DEBUG
)
&
&
defined
(
HAS_DLL_BLOCKLIST
)
DllBlocklist_Shutdown
(
)
;
#
endif
return
ret
;
}
