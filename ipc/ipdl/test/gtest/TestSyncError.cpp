#
include
"
gtest
/
gtest
.
h
"
#
include
"
mozilla
/
_ipdltest
/
IPDLUnitTest
.
h
"
#
include
"
mozilla
/
_ipdltest
/
PTestSyncErrorChild
.
h
"
#
include
"
mozilla
/
_ipdltest
/
PTestSyncErrorParent
.
h
"
using
namespace
mozilla
:
:
ipc
;
namespace
mozilla
:
:
_ipdltest
{
class
TestSyncErrorParent
:
public
PTestSyncErrorParent
{
NS_INLINE_DECL_REFCOUNTING
(
TestSyncErrorParent
override
)
private
:
IPCResult
RecvError
(
)
final
override
{
return
IPC_TEST_FAIL
(
this
)
;
}
~
TestSyncErrorParent
(
)
=
default
;
}
;
class
TestSyncErrorChild
:
public
PTestSyncErrorChild
{
NS_INLINE_DECL_REFCOUNTING
(
TestSyncErrorChild
override
)
private
:
IPCResult
RecvStart
(
)
final
override
{
EXPECT_FALSE
(
SendError
(
)
)
<
<
"
Error
(
)
should
have
return
false
"
;
Close
(
)
;
return
IPC_OK
(
)
;
}
~
TestSyncErrorChild
(
)
=
default
;
}
;
IPDL_TEST
(
TestSyncError
)
{
EXPECT_TRUE
(
mActor
-
>
SendStart
(
)
)
;
}
}
