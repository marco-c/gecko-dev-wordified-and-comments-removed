#
ifndef
mozilla__ipdltest_IPDLUnitTestParent_h
#
define
mozilla__ipdltest_IPDLUnitTestParent_h
#
include
"
mozilla
/
_ipdltest
/
PIPDLUnitTestParent
.
h
"
#
include
"
mozilla
/
ipc
/
GeckoChildProcessHost
.
h
"
#
include
"
nsISupportsImpl
.
h
"
namespace
mozilla
:
:
_ipdltest
{
class
IPDLUnitTestParent
:
public
PIPDLUnitTestParent
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
IPDLUnitTestParent
override
)
static
already_AddRefed
<
IPDLUnitTestParent
>
CreateCrossProcess
(
)
;
static
already_AddRefed
<
IPDLUnitTestParent
>
CreateCrossThread
(
)
;
bool
Start
(
const
char
*
aName
IToplevelProtocol
*
aParentActor
)
;
bool
ReportedComplete
(
)
const
{
return
mComplete
;
}
private
:
friend
class
PIPDLUnitTestParent
;
ipc
:
:
IPCResult
RecvReport
(
const
TestPartResult
&
aResult
)
;
ipc
:
:
IPCResult
RecvComplete
(
)
;
void
KillHard
(
)
;
~
IPDLUnitTestParent
(
)
;
nsCOMPtr
<
nsIThread
>
mOtherThread
;
mozilla
:
:
ipc
:
:
GeckoChildProcessHost
*
mSubprocess
=
nullptr
;
bool
mComplete
=
false
;
bool
mCalledKillHard
=
false
;
}
;
}
#
endif
