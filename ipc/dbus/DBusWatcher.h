#
ifndef
mozilla_ipc_DBusWatcher_h
#
define
mozilla_ipc_DBusWatcher_h
#
include
<
dbus
/
dbus
.
h
>
#
include
"
base
/
message_loop
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
DBusWatcher
:
public
MessageLoopForIO
:
:
Watcher
{
public
:
DBusWatcher
(
DBusConnection
*
aConnection
DBusWatch
*
aWatch
)
;
~
DBusWatcher
(
)
;
void
StartWatching
(
)
;
void
StopWatching
(
)
;
static
void
FreeFunction
(
void
*
aData
)
;
static
dbus_bool_t
AddWatchFunction
(
DBusWatch
*
aWatch
void
*
aData
)
;
static
void
RemoveWatchFunction
(
DBusWatch
*
aWatch
void
*
aData
)
;
static
void
ToggleWatchFunction
(
DBusWatch
*
aWatch
void
*
aData
)
;
DBusConnection
*
GetConnection
(
)
;
private
:
void
OnFileCanReadWithoutBlocking
(
int
aFd
)
;
void
OnFileCanWriteWithoutBlocking
(
int
aFd
)
;
MessageLoopForIO
:
:
FileDescriptorWatcher
mReadWatcher
;
MessageLoopForIO
:
:
FileDescriptorWatcher
mWriteWatcher
;
DBusConnection
*
mConnection
;
DBusWatch
*
mWatch
;
}
;
}
}
#
endif
