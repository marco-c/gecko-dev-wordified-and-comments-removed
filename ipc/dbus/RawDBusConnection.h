#
ifndef
mozilla_ipc_dbus_rawdbusconnection_h__
#
define
mozilla_ipc_dbus_rawdbusconnection_h__
#
include
<
dbus
/
dbus
.
h
>
#
include
"
mozilla
/
ipc
/
DBusConnectionRefPtr
.
h
"
namespace
mozilla
{
namespace
ipc
{
typedef
void
(
*
DBusReplyCallback
)
(
DBusMessage
*
void
*
)
;
class
RawDBusConnection
{
public
:
RawDBusConnection
(
)
;
virtual
~
RawDBusConnection
(
)
;
nsresult
EstablishDBusConnection
(
)
;
bool
Watch
(
)
;
DBusConnection
*
GetConnection
(
)
{
return
mConnection
;
}
bool
Send
(
DBusMessage
*
aMessage
)
;
bool
SendWithReply
(
DBusReplyCallback
aCallback
void
*
aData
int
aTimeout
DBusMessage
*
aMessage
)
;
bool
SendWithReply
(
DBusReplyCallback
aCallback
void
*
aData
int
aTimeout
const
char
*
aDestination
const
char
*
aPath
const
char
*
aIntf
const
char
*
aFunc
int
aFirstArgType
.
.
.
)
;
protected
:
RefPtr
<
DBusConnection
>
mConnection
;
private
:
static
bool
sDBusIsInit
;
}
;
}
}
#
endif
