#
ifndef
BASE_FILE_PATH_H_
#
define
BASE_FILE_PATH_H_
#
include
<
string
>
#
include
"
base
/
basictypes
.
h
"
#
if
defined
(
XP_WIN
)
#
define
FILE_PATH_USES_DRIVE_LETTERS
#
define
FILE_PATH_USES_WIN_SEPARATORS
#
endif
class
FilePath
{
public
:
#
if
defined
(
XP_UNIX
)
typedef
std
:
:
string
StringType
;
#
else
typedef
std
:
:
wstring
StringType
;
#
endif
typedef
StringType
:
:
value_type
CharType
;
static
const
CharType
kSeparators
[
]
;
static
const
CharType
kCurrentDirectory
[
]
;
static
const
CharType
kParentDirectory
[
]
;
static
const
CharType
kExtensionSeparator
;
FilePath
(
)
{
}
FilePath
(
const
FilePath
&
that
)
:
path_
(
that
.
path_
)
{
}
explicit
FilePath
(
const
StringType
&
path
)
:
path_
(
path
)
{
}
#
if
defined
(
XP_WIN
)
explicit
FilePath
(
const
wchar_t
*
path
)
:
path_
(
path
)
{
}
#
endif
FilePath
&
operator
=
(
const
FilePath
&
that
)
{
path_
=
that
.
path_
;
return
*
this
;
}
bool
operator
=
=
(
const
FilePath
&
that
)
const
{
return
path_
=
=
that
.
path_
;
}
bool
operator
!
=
(
const
FilePath
&
that
)
const
{
return
path_
!
=
that
.
path_
;
}
bool
operator
<
(
const
FilePath
&
that
)
const
{
return
path_
<
that
.
path_
;
}
const
StringType
&
value
(
)
const
{
return
path_
;
}
bool
empty
(
)
const
{
return
path_
.
empty
(
)
;
}
static
bool
IsSeparator
(
CharType
character
)
;
FilePath
DirName
(
)
const
;
FilePath
BaseName
(
)
const
;
StringType
Extension
(
)
const
;
FilePath
RemoveExtension
(
)
const
;
FilePath
InsertBeforeExtension
(
const
StringType
&
suffix
)
const
;
FilePath
ReplaceExtension
(
const
StringType
&
extension
)
const
;
[
[
nodiscard
]
]
FilePath
Append
(
const
StringType
&
component
)
const
;
[
[
nodiscard
]
]
FilePath
Append
(
const
FilePath
&
component
)
const
;
[
[
nodiscard
]
]
FilePath
AppendASCII
(
const
std
:
:
string
&
component
)
const
;
bool
IsAbsolute
(
)
const
;
FilePath
StripTrailingSeparators
(
)
const
;
void
OpenInputStream
(
std
:
:
ifstream
&
stream
)
const
;
static
FilePath
FromWStringHack
(
const
std
:
:
wstring
&
wstring
)
;
std
:
:
wstring
ToWStringHack
(
)
const
;
private
:
void
StripTrailingSeparatorsInternal
(
)
;
StringType
path_
;
}
;
#
if
defined
(
XP_UNIX
)
#
define
FILE_PATH_LITERAL
(
x
)
x
#
else
#
define
FILE_PATH_LITERAL
(
x
)
L
#
#
x
#
endif
#
endif
