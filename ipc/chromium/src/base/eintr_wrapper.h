#
ifndef
BASE_EINTR_WRAPPER_H_
#
define
BASE_EINTR_WRAPPER_H_
#
include
"
build
/
build_config
.
h
"
#
if
defined
(
OS_POSIX
)
#
include
<
errno
.
h
>
#
define
HANDLE_EINTR
(
x
)
(
{
\
decltype
(
x
)
eintr_wrapper_result
;
\
do
{
\
eintr_wrapper_result
=
(
x
)
;
\
}
while
(
eintr_wrapper_result
=
=
-
1
&
&
errno
=
=
EINTR
)
;
\
eintr_wrapper_result
;
\
}
)
#
define
IGNORE_EINTR
(
x
)
(
{
\
decltype
(
x
)
eintr_wrapper_result
;
\
do
{
\
eintr_wrapper_result
=
(
x
)
;
\
if
(
eintr_wrapper_result
=
=
-
1
&
&
errno
=
=
EINTR
)
{
\
eintr_wrapper_result
=
0
;
\
}
\
}
while
(
0
)
;
\
eintr_wrapper_result
;
\
}
)
#
else
#
define
HANDLE_EINTR
(
x
)
(
x
)
#
define
IGNORE_EINTR
(
x
)
(
x
)
#
endif
#
endif
