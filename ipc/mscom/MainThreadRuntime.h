#
ifndef
mozilla_mscom_MainThreadRuntime_h
#
define
mozilla_mscom_MainThreadRuntime_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
mscom
/
COMApartmentRegion
.
h
"
#
include
"
mozilla
/
mscom
/
MainThreadClientInfo
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
namespace
mozilla
{
namespace
mscom
{
class
MOZ_NON_TEMPORARY_CLASS
MainThreadRuntime
{
public
:
MainThreadRuntime
(
)
;
~
MainThreadRuntime
(
)
;
explicit
operator
bool
(
)
const
{
return
mStaRegion
.
IsValidOutermost
(
)
&
&
SUCCEEDED
(
mInitResult
)
;
}
MainThreadRuntime
(
MainThreadRuntime
&
)
=
delete
;
MainThreadRuntime
(
MainThreadRuntime
&
&
)
=
delete
;
MainThreadRuntime
&
operator
=
(
MainThreadRuntime
&
)
=
delete
;
MainThreadRuntime
&
operator
=
(
MainThreadRuntime
&
&
)
=
delete
;
static
DWORD
GetClientThreadId
(
)
;
private
:
HRESULT
InitializeSecurity
(
)
;
STARegion
mStaRegion
;
HRESULT
mInitResult
;
RefPtr
<
MainThreadClientInfo
>
mClientInfo
;
static
MainThreadRuntime
*
sInstance
;
}
;
}
}
#
endif
