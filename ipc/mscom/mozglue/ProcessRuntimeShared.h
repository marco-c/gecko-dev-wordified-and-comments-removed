#
ifndef
mozilla_mscom_ProcessRuntimeShared_h
#
define
mozilla_mscom_ProcessRuntimeShared_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Types
.
h
"
namespace
mozilla
{
namespace
mscom
{
namespace
detail
{
MFBT_API
bool
&
BeginProcessRuntimeInit
(
)
;
MFBT_API
void
EndProcessRuntimeInit
(
)
;
}
class
MOZ_RAII
ProcessInitLock
final
{
public
:
ProcessInitLock
(
)
:
mIsProcessInitialized
(
detail
:
:
BeginProcessRuntimeInit
(
)
)
{
}
~
ProcessInitLock
(
)
{
detail
:
:
EndProcessRuntimeInit
(
)
;
}
bool
IsInitialized
(
)
const
{
return
mIsProcessInitialized
;
}
void
SetInitialized
(
)
{
MOZ_ASSERT
(
!
mIsProcessInitialized
)
;
mIsProcessInitialized
=
true
;
}
ProcessInitLock
(
const
ProcessInitLock
&
)
=
delete
;
ProcessInitLock
(
ProcessInitLock
&
&
)
=
delete
;
ProcessInitLock
operator
=
(
const
ProcessInitLock
&
)
=
delete
;
ProcessInitLock
operator
=
(
ProcessInitLock
&
&
)
=
delete
;
private
:
bool
&
mIsProcessInitialized
;
}
;
}
}
#
endif
