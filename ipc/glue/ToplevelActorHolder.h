#
ifndef
MOZILLA_IPC_TOPLEVELACTORHOLDER_H
#
define
MOZILLA_IPC_TOPLEVELACTORHOLDER_H
#
include
"
nsISupports
.
h
"
namespace
mozilla
:
:
ipc
{
template
<
typename
T
>
class
ToplevelActorHolder
final
{
public
:
NS_INLINE_DECL_REFCOUNTING_ONEVENTTARGET
(
ToplevelActorHolder
)
explicit
ToplevelActorHolder
(
T
*
aActor
)
:
mActor
(
aActor
)
{
}
constexpr
T
*
Actor
(
)
const
{
return
mActor
;
}
inline
void
RemoveActor
(
)
{
mActor
=
nullptr
;
}
private
:
inline
~
ToplevelActorHolder
(
)
{
if
(
mActor
)
{
mActor
-
>
Close
(
)
;
}
}
RefPtr
<
T
>
mActor
;
}
;
}
#
endif
