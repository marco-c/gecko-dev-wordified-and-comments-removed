#
ifndef
mozilla_ipc_BrowserProcessSubThread_h
#
define
mozilla_ipc_BrowserProcessSubThread_h
#
include
"
base
/
thread
.
h
"
#
include
"
mozilla
/
StaticMutex
.
h
"
#
include
"
nsDebug
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
BrowserProcessSubThread
:
public
base
:
:
Thread
{
public
:
enum
ID
{
IO
ID_COUNT
}
;
explicit
BrowserProcessSubThread
(
ID
aId
)
;
~
BrowserProcessSubThread
(
)
;
static
MessageLoop
*
GetMessageLoop
(
ID
identifier
)
;
protected
:
virtual
void
Init
(
)
override
;
virtual
void
CleanUp
(
)
override
;
private
:
ID
mIdentifier
;
static
StaticMutex
sLock
;
static
BrowserProcessSubThread
*
sBrowserThreads
[
ID_COUNT
]
MOZ_GUARDED_BY
(
sLock
)
;
}
;
inline
void
AssertIOThread
(
)
{
NS_ASSERTION
(
MessageLoop
:
:
TYPE_IO
=
=
MessageLoop
:
:
current
(
)
-
>
type
(
)
"
should
be
on
the
IO
thread
!
"
)
;
}
}
}
#
endif
