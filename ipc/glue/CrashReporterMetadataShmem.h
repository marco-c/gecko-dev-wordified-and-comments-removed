#
ifndef
mozilla_ipc_CrashReporterMetadataShmem_h
#
define
mozilla_ipc_CrashReporterMetadataShmem_h
#
include
<
stdint
.
h
>
#
include
"
mozilla
/
ipc
/
Shmem
.
h
"
#
include
"
nsExceptionHandler
.
h
"
#
include
"
nsString
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
CrashReporterMetadataShmem
{
typedef
mozilla
:
:
ipc
:
:
Shmem
Shmem
;
typedef
CrashReporter
:
:
AnnotationTable
AnnotationTable
;
public
:
explicit
CrashReporterMetadataShmem
(
const
Shmem
&
aShmem
)
;
~
CrashReporterMetadataShmem
(
)
;
void
AnnotateCrashReport
(
const
nsCString
&
aKey
const
nsCString
&
aData
)
;
void
AppendAppNotes
(
const
nsCString
&
aData
)
;
#
ifdef
MOZ_CRASHREPORTER
static
void
ReadAppNotes
(
const
Shmem
&
aShmem
CrashReporter
:
:
AnnotationTable
*
aNotes
)
;
#
endif
private
:
void
SyncNotesToShmem
(
)
;
private
:
Shmem
mShmem
;
AnnotationTable
mNotes
;
nsCString
mAppNotes
;
}
;
}
}
#
endif
