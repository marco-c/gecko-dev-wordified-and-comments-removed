#
ifndef
_include_ipc_glue_UtilityProcessParent_h__
#
define
_include_ipc_glue_UtilityProcessParent_h__
#
include
"
mozilla
/
ipc
/
PUtilityProcessParent
.
h
"
#
include
"
mozilla
/
ipc
/
CrashReporterHelper
.
h
"
#
include
"
mozilla
/
ipc
/
UtilityProcessHost
.
h
"
#
include
"
mozilla
/
dom
/
MemoryReportRequest
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
UtilityProcessHost
;
class
UtilityProcessParent
final
:
public
PUtilityProcessParent
public
ipc
:
:
CrashReporterHelper
<
UtilityProcessParent
>
{
typedef
mozilla
:
:
dom
:
:
MemoryReportRequestHost
MemoryReportRequestHost
;
public
:
static
constexpr
GeckoProcessType
PROCESS_TYPE
=
GeckoProcessType_Utility
;
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
UtilityProcessParent
override
)
;
friend
class
UtilityProcessHost
;
explicit
UtilityProcessParent
(
UtilityProcessHost
*
aHost
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvAddMemoryReport
(
const
MemoryReport
&
aReport
)
;
bool
SendRequestMemoryReport
(
const
uint32_t
&
aGeneration
const
bool
&
aAnonymize
const
bool
&
aMinimizeMemoryUsage
const
Maybe
<
ipc
:
:
FileDescriptor
>
&
aDMDFile
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvFOGData
(
ByteBuf
&
&
aBuf
)
;
#
if
defined
(
XP_WIN
)
mozilla
:
:
ipc
:
:
IPCResult
RecvGetModulesTrust
(
ModulePaths
&
&
aModPaths
bool
aRunAtNormalPriority
GetModulesTrustResolver
&
&
aResolver
)
;
#
endif
mozilla
:
:
ipc
:
:
IPCResult
RecvAccumulateChildHistograms
(
nsTArray
<
HistogramAccumulation
>
&
&
aAccumulations
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvAccumulateChildKeyedHistograms
(
nsTArray
<
KeyedHistogramAccumulation
>
&
&
aAccumulations
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvUpdateChildScalars
(
nsTArray
<
ScalarAction
>
&
&
aScalarActions
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvUpdateChildKeyedScalars
(
nsTArray
<
KeyedScalarAction
>
&
&
aScalarActions
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRecordChildEvents
(
nsTArray
<
ChildEventData
>
&
&
events
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRecordDiscardedData
(
const
DiscardedData
&
aDiscardedData
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvInitCompleted
(
)
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
private
:
UtilityProcessHost
*
mHost
;
UniquePtr
<
MemoryReportRequestHost
>
mMemoryReportRequest
{
}
;
~
UtilityProcessParent
(
)
;
static
void
Destroy
(
RefPtr
<
UtilityProcessParent
>
aParent
)
;
}
;
}
}
#
endif
