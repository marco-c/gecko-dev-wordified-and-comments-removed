#
ifndef
mozilla_ipc_InputStreamUtils_h
#
define
mozilla_ipc_InputStreamUtils_h
#
include
"
mozilla
/
ipc
/
InputStreamParams
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIInputStream
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
FileDescriptor
;
class
InputStreamHelper
{
public
:
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
mozilla
:
:
dom
:
:
nsIContentChild
*
aManager
)
;
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
PBackgroundChild
*
aManager
)
;
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
mozilla
:
:
dom
:
:
nsIContentParent
*
aManager
)
;
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
PBackgroundParent
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
mozilla
:
:
dom
:
:
nsIContentChild
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
PBackgroundChild
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
mozilla
:
:
dom
:
:
nsIContentParent
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
PBackgroundParent
*
aManager
)
;
static
void
PostSerializationActivation
(
InputStreamParams
&
aParams
bool
aConsumedByIPC
bool
aDelayedStart
)
;
static
void
PostSerializationActivation
(
OptionalInputStreamParams
&
aParams
bool
aConsumedByIPC
bool
aDelayedStart
)
;
static
already_AddRefed
<
nsIInputStream
>
DeserializeInputStream
(
const
InputStreamParams
&
aParams
const
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
)
;
}
;
}
}
#
endif
