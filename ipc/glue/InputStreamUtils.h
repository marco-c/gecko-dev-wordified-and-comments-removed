#
ifndef
mozilla_ipc_InputStreamUtils_h
#
define
mozilla_ipc_InputStreamUtils_h
#
include
"
mozilla
/
ipc
/
InputStreamParams
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIInputStream
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
ipc
{
class
FileDescriptor
;
class
ParentToChildStreamActorManager
{
}
;
class
ChildToParentStreamActorManager
{
}
;
class
InputStreamHelper
{
public
:
static
void
SerializedComplexity
(
nsIInputStream
*
aInputStream
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
uint32_t
*
aPipes
uint32_t
*
aTransferables
)
;
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
ParentToChildStreamActorManager
*
aManager
)
;
static
void
SerializeInputStream
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
bool
aDelayedStart
uint32_t
aMaxSize
uint32_t
*
aSizeUsed
ChildToParentStreamActorManager
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
ParentToChildStreamActorManager
*
aManager
)
;
static
void
SerializeInputStreamAsPipe
(
nsIInputStream
*
aInputStream
InputStreamParams
&
aParams
bool
aDelayedStart
ChildToParentStreamActorManager
*
aManager
)
;
static
already_AddRefed
<
nsIInputStream
>
DeserializeInputStream
(
const
InputStreamParams
&
aParams
const
nsTArray
<
FileDescriptor
>
&
aFileDescriptors
)
;
}
;
}
}
#
endif
