#
ifndef
__PROFILER_BACKTRACE_H
#
define
__PROFILER_BACKTRACE_H
#
include
"
mozilla
/
UniquePtrExtensions
.
h
"
class
ProfileBuffer
;
class
ProfilerCodeAddressService
;
class
SpliceableJSONWriter
;
class
ThreadInfo
;
class
UniqueStacks
;
namespace
mozilla
{
class
BlocksRingBuffer
;
class
TimeStamp
;
}
class
ProfilerBacktrace
{
public
:
ProfilerBacktrace
(
const
char
*
aName
int
aThreadId
UniquePtr
<
mozilla
:
:
BlocksRingBuffer
>
aBlocksRingBuffer
mozilla
:
:
UniquePtr
<
ProfileBuffer
>
aProfileBuffer
)
;
~
ProfilerBacktrace
(
)
;
void
StreamJSON
(
SpliceableJSONWriter
&
aWriter
const
mozilla
:
:
TimeStamp
&
aProcessStartTime
UniqueStacks
&
aUniqueStacks
)
;
private
:
ProfilerBacktrace
(
const
ProfilerBacktrace
&
)
;
ProfilerBacktrace
&
operator
=
(
const
ProfilerBacktrace
&
)
;
mozilla
:
:
UniqueFreePtr
<
char
>
mName
;
int
mThreadId
;
UniquePtr
<
mozilla
:
:
BlocksRingBuffer
>
mBlocksRingBuffer
;
mozilla
:
:
UniquePtr
<
ProfileBuffer
>
mProfileBuffer
;
}
;
#
endif
