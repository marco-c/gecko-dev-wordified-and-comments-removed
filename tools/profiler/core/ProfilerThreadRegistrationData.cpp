#
include
"
mozilla
/
ProfilerThreadRegistrationData
.
h
"
#
if
defined
(
XP_WIN
)
#
include
<
windows
.
h
>
#
elif
defined
(
XP_DARWIN
)
#
include
<
pthread
.
h
>
#
endif
namespace
mozilla
:
:
profiler
{
ThreadRegistrationData
:
:
ThreadRegistrationData
(
const
char
*
aName
const
void
*
aStackTop
)
:
mInfo
(
aName
)
mPlatformData
(
mInfo
.
ThreadId
(
)
)
mStackTop
(
#
if
defined
(
XP_WIN
)
reinterpret_cast
<
const
void
*
>
(
reinterpret_cast
<
PNT_TIB
>
(
NtCurrentTeb
(
)
)
-
>
StackBase
)
#
elif
defined
(
XP_DARWIN
)
reinterpret_cast
<
const
void
*
>
(
pthread_get_stackaddr_np
(
pthread_self
(
)
)
)
#
else
aStackTop
#
endif
)
{
}
}
