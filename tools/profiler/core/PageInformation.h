#
ifndef
PageInformation_h
#
define
PageInformation_h
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
MemoryReporting
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsString
.
h
"
class
SpliceableJSONWriter
;
class
PageInformation
final
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
PageInformation
)
PageInformation
(
uint64_t
aBrowsingContextID
uint64_t
aInnerWindowID
const
nsCString
&
aUrl
bool
aIsSubFrame
)
;
size_t
SizeOfIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
const
;
bool
Equals
(
PageInformation
*
aOtherPageInfo
)
const
;
void
StreamJSON
(
SpliceableJSONWriter
&
aWriter
)
const
;
uint64_t
InnerWindowID
(
)
const
{
return
mInnerWindowID
;
}
uint64_t
BrowsingContextID
(
)
const
{
return
mBrowsingContextID
;
}
const
nsCString
&
Url
(
)
const
{
return
mUrl
;
}
bool
IsSubFrame
(
)
const
{
return
mIsSubFrame
;
}
mozilla
:
:
Maybe
<
uint64_t
>
BufferPositionWhenUnregistered
(
)
const
{
return
mBufferPositionWhenUnregistered
;
}
void
NotifyUnregistered
(
uint64_t
aBufferPosition
)
{
mBufferPositionWhenUnregistered
=
mozilla
:
:
Some
(
aBufferPosition
)
;
}
private
:
const
uint64_t
mBrowsingContextID
;
const
uint64_t
mInnerWindowID
;
const
nsCString
mUrl
;
const
bool
mIsSubFrame
;
mozilla
:
:
Maybe
<
uint64_t
>
mBufferPositionWhenUnregistered
;
virtual
~
PageInformation
(
)
=
default
;
}
;
#
endif
