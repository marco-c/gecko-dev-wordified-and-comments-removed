add_task
(
async
(
)
=
>
{
Assert
.
ok
(
!
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
let
startPromise
=
Services
.
profiler
.
StartProfiler
(
1000
10
[
]
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
startPromise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
pausePromise
=
Services
.
profiler
.
Pause
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
pausePromise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
pauseSamplingPromise
=
Services
.
profiler
.
PauseSampling
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
pauseSamplingPromise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
resumeSamplingPromise
=
Services
.
profiler
.
ResumeSampling
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
resumeSamplingPromise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
resumePromise
=
Services
.
profiler
.
Resume
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
resumePromise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
pauseSampling2Promise
=
Services
.
profiler
.
PauseSampling
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
pauseSampling2Promise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
pause2Promise
=
Services
.
profiler
.
Pause
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
pause2Promise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
resume2promise
=
Services
.
profiler
.
Resume
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
resume2promise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
resumeSampling2Promise
=
Services
.
profiler
.
ResumeSampling
(
)
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
resumeSampling2Promise
;
Assert
.
ok
(
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
let
stopPromise
=
Services
.
profiler
.
StopProfiler
(
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
await
stopPromise
;
Assert
.
ok
(
!
Services
.
profiler
.
IsActive
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsPaused
(
)
)
;
Assert
.
ok
(
!
Services
.
profiler
.
IsSamplingPaused
(
)
)
;
}
)
;
