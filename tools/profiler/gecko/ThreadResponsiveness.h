#
ifndef
ThreadResponsiveness_h
#
define
ThreadResponsiveness_h
#
include
"
nsISupports
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
class
CheckResponsivenessTask
;
class
nsIEventTarget
;
class
ThreadResponsiveness
{
public
:
explicit
ThreadResponsiveness
(
nsIEventTarget
*
aThread
bool
aIsMainThread
)
;
~
ThreadResponsiveness
(
)
;
void
Update
(
)
;
double
GetUnresponsiveDuration
(
double
aStartToNow_ms
)
const
{
return
aStartToNow_ms
-
*
mStartToPrevTracer_ms
;
}
bool
HasData
(
)
const
{
return
mStartToPrevTracer_ms
.
isSome
(
)
;
}
private
:
RefPtr
<
CheckResponsivenessTask
>
mActiveTracerEvent
;
mozilla
:
:
Maybe
<
double
>
mStartToPrevTracer_ms
;
}
;
#
endif
