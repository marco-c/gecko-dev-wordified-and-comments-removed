#
ifndef
_NSPROFILER_H_
#
define
_NSPROFILER_H_
#
include
"
nsIProfiler
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
namespace
mozilla
{
class
ProfileGatherer
;
}
class
nsProfiler
final
:
public
nsIProfiler
public
nsIObserver
{
public
:
nsProfiler
(
)
;
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
NS_DECL_NSIPROFILER
nsresult
Init
(
)
;
static
nsProfiler
*
GetOrCreate
(
)
{
nsCOMPtr
<
nsIProfiler
>
iprofiler
=
do_GetService
(
"
mozilla
.
org
/
tools
/
profiler
;
1
"
)
;
return
static_cast
<
nsProfiler
*
>
(
iprofiler
.
get
(
)
)
;
}
void
WillGatherOOPProfile
(
)
;
void
GatheredOOPProfile
(
)
;
void
OOPExitProfile
(
const
nsACString
&
aProfile
)
;
private
:
~
nsProfiler
(
)
;
RefPtr
<
ProfileGatherer
>
mGatherer
;
bool
mLockedForPrivateBrowsing
;
}
;
#
endif
