#
ifndef
ProfilerThreadState_h
#
define
ProfilerThreadState_h
#
include
"
mozilla
/
ProfilerState
.
h
"
#
include
"
mozilla
/
ProfilerThreadRegistration
.
h
"
#
include
"
mozilla
/
ProfilerThreadRegistry
.
h
"
[
[
nodiscard
]
]
inline
bool
profiler_is_active_and_thread_is_registered
(
)
{
return
profiler_is_active
(
)
&
&
mozilla
:
:
profiler
:
:
ThreadRegistration
:
:
IsRegistered
(
)
;
}
[
[
nodiscard
]
]
inline
bool
profiler_thread_is_being_profiled
(
)
{
return
profiler_is_active
(
)
&
&
mozilla
:
:
profiler
:
:
ThreadRegistration
:
:
WithOnThreadRefOr
(
[
]
(
mozilla
:
:
profiler
:
:
ThreadRegistration
:
:
OnThreadRef
aTR
)
{
return
aTR
.
UnlockedConstReaderAndAtomicRWCRef
(
)
.
IsBeingProfiled
(
)
;
}
false
)
;
;
}
[
[
nodiscard
]
]
inline
bool
profiler_thread_is_sleeping
(
)
{
return
profiler_is_active
(
)
&
&
mozilla
:
:
profiler
:
:
ThreadRegistration
:
:
WithOnThreadRefOr
(
[
]
(
mozilla
:
:
profiler
:
:
ThreadRegistration
:
:
OnThreadRef
aTR
)
{
return
aTR
.
UnlockedConstReaderAndAtomicRWCRef
(
)
.
IsSleeping
(
)
;
}
false
)
;
}
#
endif
