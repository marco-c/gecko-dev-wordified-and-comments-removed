"
use
strict
"
;
const
fs
=
require
(
"
fs
"
)
;
const
libs
=
[
"
dom
"
"
nsresult
"
"
services
"
"
xpcom
"
]
;
function
main
(
index_dts
lib_dir
)
{
let
index
=
fs
.
readFileSync
(
index_dts
"
utf8
"
)
;
for
(
let
lib
of
libs
)
{
let
file
=
lib
.
gecko
.
{
lib
}
.
d
.
ts
;
let
path
=
{
lib_dir
}
/
{
file
}
;
let
found
=
fs
.
existsSync
(
path
)
;
console
.
log
(
[
INFO
]
{
path
}
(
found
:
{
found
}
)
)
;
if
(
found
)
{
let
re
=
RegExp
(
types
=
"
.
+
/
{
file
}
"
/
>
)
;
index
=
index
.
replace
(
re
types
=
"
{
path
}
"
/
>
)
;
}
}
console
.
log
(
[
INFO
]
{
index_dts
}
(
{
index
.
length
.
toLocaleString
(
)
}
bytes
)
)
;
fs
.
writeFileSync
(
index_dts
index
)
;
}
main
(
.
.
.
process
.
argv
.
slice
(
2
)
)
;
