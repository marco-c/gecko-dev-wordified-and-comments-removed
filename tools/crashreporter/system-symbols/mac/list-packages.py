from
__future__
import
absolute_import
print_function
import
os
import
sys
from
reposadolib
import
reposadocommon
reposadocommon
.
get_main_dir
=
lambda
:
"
/
usr
/
local
/
bin
/
"
products
=
reposadocommon
.
get_product_info
(
)
args
=
[
]
for
product_id
product
in
products
.
items
(
)
:
    
try
:
        
title
=
product
[
"
title
"
]
    
except
KeyError
:
        
print
(
"
Missing
title
in
{
}
skipping
"
.
format
(
product
)
file
=
sys
.
stderr
)
        
continue
    
try
:
        
major_version
=
int
(
product
[
"
version
"
]
.
split
(
"
.
"
)
[
0
]
)
    
except
Exception
:
        
print
(
            
"
Cannot
extract
the
major
version
number
in
{
}
skipping
"
.
format
(
product
)
            
file
=
sys
.
stderr
        
)
        
continue
    
if
(
        
title
.
startswith
(
"
OS
X
"
)
        
or
title
.
startswith
(
"
Mac
OS
X
"
)
        
or
title
.
startswith
(
"
macOS
"
)
    
)
and
major_version
<
=
10
:
        
args
.
append
(
product_id
)
    
else
:
        
print
(
"
Skipping
%
r
for
repo_sync
"
%
title
file
=
sys
.
stderr
)
if
"
JUST_ONE_PACKAGE
"
in
os
.
environ
:
    
args
=
args
[
:
1
]
print
(
"
\
n
"
.
join
(
args
)
)
