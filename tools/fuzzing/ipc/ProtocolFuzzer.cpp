#
include
"
mozilla
/
layers
/
CompositorBridgeParent
.
h
"
#
include
"
ProtocolFuzzer
.
h
"
namespace
mozilla
{
namespace
ipc
{
nsTArray
<
nsCString
>
LoadIPCMessageBlacklist
(
const
char
*
aPath
)
{
nsTArray
<
nsCString
>
blacklist
;
if
(
aPath
)
{
nsresult
result
=
Faulty
:
:
ReadFile
(
aPath
blacklist
)
;
MOZ_RELEASE_ASSERT
(
result
=
=
NS_OK
)
;
}
return
blacklist
;
}
mozilla
:
:
dom
:
:
ContentParent
*
ProtocolFuzzerHelper
:
:
CreateContentParent
(
mozilla
:
:
dom
:
:
ContentParent
*
aOpener
const
nsAString
&
aRemoteType
)
{
auto
*
cp
=
new
mozilla
:
:
dom
:
:
ContentParent
(
aOpener
aRemoteType
)
;
cp
-
>
GetIPCChannel
(
)
-
>
mWorkerThread
=
GetCurrentVirtualThread
(
)
;
cp
-
>
GetIPCChannel
(
)
-
>
mMonitor
=
new
RefCountedMonitor
(
)
;
return
cp
;
}
void
ProtocolFuzzerHelper
:
:
CompositorBridgeParentSetup
(
)
{
mozilla
:
:
layers
:
:
CompositorBridgeParent
:
:
Setup
(
)
;
}
}
}
