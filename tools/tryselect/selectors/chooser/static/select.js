const
labels
=
(
"
label
.
multiselect
"
)
;
const
boxes
=
(
"
label
.
multiselect
input
:
checkbox
"
)
;
var
lastChecked
=
{
}
;
labels
.
click
(
function
(
e
)
{
if
(
e
.
target
.
tagName
=
=
=
"
INPUT
"
)
{
return
;
}
let
box
=
(
"
#
"
+
this
.
htmlFor
)
[
0
]
;
let
activeSection
=
(
"
div
.
tab
-
pane
.
active
"
)
[
0
]
.
id
;
if
(
activeSection
in
lastChecked
)
{
let
isFirefox
=
navigator
.
userAgent
.
toLowerCase
(
)
.
indexOf
(
"
firefox
"
)
>
-
1
;
if
(
e
.
shiftKey
)
{
if
(
isFirefox
)
{
box
.
checked
=
!
box
.
checked
;
}
let
start
=
boxes
.
index
(
box
)
;
let
end
=
boxes
.
index
(
lastChecked
[
activeSection
]
)
;
boxes
.
slice
(
Math
.
min
(
start
end
)
Math
.
max
(
start
end
)
+
1
)
.
prop
(
"
checked
"
box
.
checked
)
;
apply
(
)
;
}
}
lastChecked
[
activeSection
]
=
box
;
}
)
;
function
selectAll
(
btn
)
{
let
checked
=
!
!
btn
.
value
;
(
"
div
.
active
label
.
filter
-
label
"
)
.
each
(
function
(
index
)
{
(
this
)
.
find
(
"
input
:
checkbox
"
)
[
0
]
.
checked
=
checked
;
}
)
;
apply
(
)
;
}
