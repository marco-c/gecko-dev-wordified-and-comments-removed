import
mozunit
LINTER
=
"
glean
-
parser
"
def
test_lint_glean_parser_good
(
lint
paths
)
:
    
"
"
"
Test
that
good
metrics
.
yaml
files
pass
validation
.
"
"
"
    
results
=
lint
(
paths
(
"
good
/
"
)
)
    
assert
len
(
results
)
=
=
0
def
test_lint_glean_parser_bad
(
lint
paths
)
:
    
"
"
"
Test
that
bad
metrics
.
yaml
files
are
caught
by
the
linter
.
"
"
"
    
results
=
lint
(
paths
(
"
bad
/
"
)
)
    
assert
len
(
results
)
=
=
2
    
for
r
in
results
:
        
assert
r
.
level
=
=
"
error
"
        
assert
"
bad
/
metrics
.
yaml
"
in
r
.
relpath
    
messages
=
[
r
.
message
for
r
in
results
]
    
empty_data_review_errors
=
[
msg
for
msg
in
messages
if
"
EMPTY_DATAREVIEW
"
in
msg
]
    
assert
len
(
empty_data_review_errors
)
=
=
2
    
assert
any
(
"
empty_data_review
"
in
msg
for
msg
in
messages
)
    
assert
any
(
"
todo_data_review
"
in
msg
for
msg
in
messages
)
if
__name__
=
=
"
__main__
"
:
    
mozunit
.
main
(
)
