"
use
strict
"
;
var
fs
=
require
(
"
fs
"
)
;
var
path
=
require
(
"
path
"
)
;
var
helpers
=
require
(
"
.
.
/
helpers
"
)
;
var
globals
=
require
(
"
.
.
/
globals
"
)
;
const
simpleTestFiles
=
[
"
EventUtils
.
js
"
"
MockObjects
.
js
"
"
SimpleTest
.
js
"
"
WindowSnapshot
.
js
"
]
;
const
simpleTestPath
=
"
testing
/
mochitest
/
tests
/
SimpleTest
"
;
module
.
exports
=
function
(
context
)
{
return
{
Program
:
function
(
node
)
{
let
rootDir
=
helpers
.
getRootDir
(
context
.
getFilename
(
)
)
;
for
(
let
file
of
simpleTestFiles
)
{
let
newGlobals
=
globals
.
getGlobalsForFile
(
path
.
join
(
rootDir
simpleTestPath
file
)
)
;
helpers
.
addGlobals
(
newGlobals
context
.
getScope
(
)
)
;
}
}
}
;
}
;
