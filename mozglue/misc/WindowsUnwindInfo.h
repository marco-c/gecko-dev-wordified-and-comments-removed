#
ifndef
mozilla_WindowsUnwindInfo_h
#
define
mozilla_WindowsUnwindInfo_h
#
ifdef
_M_X64
#
include
<
cstdint
>
namespace
mozilla
{
union
UnwindCode
{
struct
{
uint8_t
offset_in_prolog
;
uint8_t
unwind_operation_code
:
4
;
uint8_t
operation_info
:
4
;
}
;
uint16_t
frame_offset
;
}
;
enum
UnwindOperationCodes
{
UWOP_PUSH_NONVOL
=
0
UWOP_ALLOC_LARGE
=
1
UWOP_ALLOC_SMALL
=
2
UWOP_SET_FPREG
=
3
UWOP_SAVE_NONVOL
=
4
UWOP_SAVE_NONVOL_FAR
=
5
UWOP_SAVE_XMM
=
6
UWOP_EPILOG
=
6
UWOP_SAVE_XMM_FAR
=
7
UWOP_SPARE
=
7
UWOP_SAVE_XMM128
=
8
UWOP_SAVE_XMM128_FAR
=
9
UWOP_PUSH_MACHFRAME
=
10
}
;
struct
UnwindInfo
{
uint8_t
version
:
3
;
uint8_t
flags
:
5
;
uint8_t
size_of_prolog
;
uint8_t
count_of_codes
;
uint8_t
frame_register
:
4
;
uint8_t
frame_offset
:
4
;
UnwindCode
unwind_code
[
1
]
;
}
;
}
#
endif
#
endif
