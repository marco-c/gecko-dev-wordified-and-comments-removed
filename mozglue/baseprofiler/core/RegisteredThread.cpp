#
include
"
BaseProfiler
.
h
"
#
ifdef
MOZ_BASE_PROFILER
#
include
"
RegisteredThread
.
h
"
namespace
mozilla
{
namespace
baseprofiler
{
RegisteredThread
:
:
RegisteredThread
(
ThreadInfo
*
aInfo
void
*
aStackTop
)
:
mRacyRegisteredThread
(
aInfo
-
>
ThreadId
(
)
)
mPlatformData
(
AllocPlatformData
(
aInfo
-
>
ThreadId
(
)
)
)
mStackTop
(
aStackTop
)
mThreadInfo
(
aInfo
)
{
#
if
defined
(
GP_OS_darwin
)
pthread_t
self
=
pthread_self
(
)
;
mStackTop
=
pthread_get_stackaddr_np
(
self
)
;
#
endif
}
RegisteredThread
:
:
~
RegisteredThread
(
)
{
}
size_t
RegisteredThread
:
:
SizeOfIncludingThis
(
MallocSizeOf
aMallocSizeOf
)
const
{
size_t
n
=
aMallocSizeOf
(
this
)
;
return
n
;
}
}
}
#
endif
