#
include
"
BaseProfiler
.
h
"
#
ifdef
MOZ_BASE_PROFILER
#
include
"
BaseProfilingCategory
.
h
"
#
include
"
mozilla
/
ArrayUtils
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
namespace
mozilla
{
namespace
baseprofiler
{
#
define
SUBCATEGORY_ENUMS_BEGIN_CATEGORY
(
name
labelAsString
color
)
\
enum
class
ProfilingSubcategory_
#
#
name
:
uint32_t
{
#
define
SUBCATEGORY_ENUMS_SUBCATEGORY
(
category
name
labelAsString
)
\
name
#
define
SUBCATEGORY_ENUMS_END_CATEGORY
\
}
;
BASE_PROFILING_CATEGORY_LIST
(
SUBCATEGORY_ENUMS_BEGIN_CATEGORY
SUBCATEGORY_ENUMS_SUBCATEGORY
SUBCATEGORY_ENUMS_END_CATEGORY
)
#
undef
SUBCATEGORY_ENUMS_BEGIN_CATEGORY
#
undef
SUBCATEGORY_ENUMS_SUBCATEGORY
#
undef
SUBCATEGORY_ENUMS_END_CATEGORY
#
define
CATEGORY_INFO_BEGIN_CATEGORY
(
name
labelAsString
color
)
#
define
CATEGORY_INFO_SUBCATEGORY
(
category
name
labelAsString
)
\
{
ProfilingCategory
:
:
category
\
uint32_t
(
ProfilingSubcategory_
#
#
category
:
:
name
)
labelAsString
}
#
define
CATEGORY_INFO_END_CATEGORY
const
ProfilingCategoryPairInfo
sProfilingCategoryPairInfo
[
]
=
{
BASE_PROFILING_CATEGORY_LIST
(
CATEGORY_INFO_BEGIN_CATEGORY
CATEGORY_INFO_SUBCATEGORY
CATEGORY_INFO_END_CATEGORY
)
}
;
#
undef
CATEGORY_INFO_BEGIN_CATEGORY
#
undef
CATEGORY_INFO_SUBCATEGORY
#
undef
CATEGORY_INFO_END_CATEGORY
const
ProfilingCategoryPairInfo
&
GetProfilingCategoryPairInfo
(
ProfilingCategoryPair
aCategoryPair
)
{
static_assert
(
MOZ_ARRAY_LENGTH
(
sProfilingCategoryPairInfo
)
=
=
uint32_t
(
ProfilingCategoryPair
:
:
COUNT
)
"
sProfilingCategoryPairInfo
and
ProfilingCategory
need
to
have
the
"
"
same
order
and
the
same
length
"
)
;
uint32_t
categoryPairIndex
=
uint32_t
(
aCategoryPair
)
;
MOZ_RELEASE_ASSERT
(
categoryPairIndex
<
=
uint32_t
(
ProfilingCategoryPair
:
:
LAST
)
)
;
return
sProfilingCategoryPairInfo
[
categoryPairIndex
]
;
}
}
}
#
endif
