#
ifndef
ProfilerBufferSize_h
#
define
ProfilerBufferSize_h
#
include
"
mozilla
/
ProfileBufferChunkManager
.
h
"
constexpr
static
uint32_t
scBytesPerEntry
=
8
;
constexpr
static
uint32_t
scMinimumChunkSize
=
2
*
mozilla
:
:
ProfileBufferChunkManager
:
:
scExpectedMaximumStackSize
;
constexpr
static
uint32_t
scMinimumNumberOfChunks
=
4
;
constexpr
static
uint32_t
scMaximumChunkSize
=
1024
*
1024
;
constexpr
static
uint32_t
scMinimumBufferSize
=
128u
*
1024u
*
1024u
;
constexpr
static
uint32_t
scMinimumBufferEntries
=
scMinimumBufferSize
/
scBytesPerEntry
;
constexpr
static
uint32_t
scMaximumBufferSize
=
2u
*
1024u
*
1024u
*
1024u
;
constexpr
static
uint32_t
scMaximumBufferEntries
=
scMaximumBufferSize
/
scBytesPerEntry
;
constexpr
static
uint32_t
ClampToAllowedEntries
(
uint32_t
aEntries
)
{
if
(
aEntries
<
=
scMinimumBufferEntries
)
{
return
scMinimumBufferEntries
;
}
if
(
aEntries
>
=
scMaximumBufferEntries
)
{
return
scMaximumBufferEntries
;
}
return
aEntries
;
}
#
endif
