#
ifndef
mozilla_WindowsFallbackLoaderAPI_h
#
define
mozilla_WindowsFallbackLoaderAPI_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
NtLoaderAPI
.
h
"
namespace
mozilla
{
class
MOZ_ONLY_USED_TO_AVOID_STATIC_CONSTRUCTORS
FallbackLoaderAPI
final
:
public
nt
:
:
LoaderAPI
{
public
:
constexpr
FallbackLoaderAPI
(
)
:
mLoaderObserver
(
nullptr
)
{
}
ModuleLoadInfo
ConstructAndNotifyBeginDllLoad
(
void
*
*
aContext
PCUNICODE_STRING
aRequestedDllName
)
final
;
bool
SubstituteForLSP
(
PCUNICODE_STRING
aLSPLeafName
PHANDLE
aOutHandle
)
final
;
void
NotifyEndDllLoad
(
void
*
aContext
NTSTATUS
aLoadNtStatus
ModuleLoadInfo
&
&
aModuleLoadInfo
)
final
;
nt
:
:
AllocatedUnicodeString
GetSectionName
(
void
*
aSectionAddr
)
final
;
nt
:
:
LoaderAPI
:
:
InitDllBlocklistOOPFnPtr
GetDllBlocklistInitFn
(
)
final
;
nt
:
:
LoaderAPI
:
:
HandleLauncherErrorFnPtr
GetHandleLauncherErrorFn
(
)
final
;
void
SetObserver
(
nt
:
:
LoaderObserver
*
aLoaderObserver
)
;
private
:
nt
:
:
LoaderObserver
*
mLoaderObserver
;
}
;
}
#
endif
