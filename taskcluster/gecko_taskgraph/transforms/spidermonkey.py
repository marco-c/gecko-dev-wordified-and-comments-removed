from
gecko_taskgraph
.
transforms
.
base
import
TransformSequence
from
gecko_taskgraph
.
util
.
schema
import
resolve_keyed_by
import
copy
transforms
=
TransformSequence
(
)
transforms
.
add
def
handle_keyed_by
(
config
jobs
)
:
    
"
"
"
Resolve
fields
that
can
be
keyed
by
platform
etc
.
"
"
"
    
fields
=
[
"
fetches
.
toolchain
"
]
    
for
job
in
jobs
:
        
job
=
copy
.
deepcopy
(
job
)
        
for
field
in
fields
:
            
resolve_keyed_by
(
item
=
job
field
=
field
item_name
=
job
[
"
name
"
]
)
        
yield
job
