"
"
"
Transform
the
snap
beetmover
kind
into
an
actual
task
description
.
"
"
"
from
gecko_taskgraph
.
transforms
.
base
import
TransformSequence
transforms
=
TransformSequence
(
)
transforms
.
add
def
leave_snap_repackage_dependencies_only
(
config
jobs
)
:
    
for
job
in
jobs
:
        
job
[
"
dependencies
"
]
=
{
            
key
:
value
            
for
key
value
in
job
[
"
dependencies
"
]
.
items
(
)
            
if
key
=
=
"
release
-
snap
-
repackage
"
        
}
        
job
[
"
worker
"
]
[
"
upstream
-
artifacts
"
]
=
[
            
upstream_artifact
            
for
upstream_artifact
in
job
[
"
worker
"
]
[
"
upstream
-
artifacts
"
]
            
if
upstream_artifact
[
"
taskId
"
]
[
"
task
-
reference
"
]
            
=
=
"
<
release
-
snap
-
repackage
>
"
        
]
        
yield
job
transforms
.
add
def
set_custom_treeherder_job_name
(
config
jobs
)
:
    
for
job
in
jobs
:
        
job
.
get
(
"
treeherder
"
{
}
)
[
"
symbol
"
]
=
"
Snap
(
BM
)
"
        
yield
job
