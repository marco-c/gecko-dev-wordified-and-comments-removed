import
os
from
android_taskgraph
import
register
as
register_android_taskgraph
from
mozilla_taskgraph
import
register
as
register_mozilla_taskgraph
from
taskgraph
import
config
as
taskgraph_config
from
taskgraph
import
generator
from
taskgraph
import
morph
as
taskgraph_morph
from
taskgraph
.
transforms
.
task
import
payload_builders
from
taskgraph
.
util
import
schema
from
taskgraph
.
util
import
taskcluster
as
tc_util
from
gecko_taskgraph
.
config
import
graph_config_schema
GECKO
=
os
.
path
.
normpath
(
os
.
path
.
realpath
(
os
.
path
.
join
(
__file__
"
.
.
"
"
.
.
"
"
.
.
"
)
)
)
taskgraph_config
.
graph_config_schema
=
graph_config_schema
taskgraph_morph
.
registered_morphs
=
[
]
tc_util
.
PRODUCTION_TASKCLUSTER_ROOT_URL
=
"
https
:
/
/
firefox
-
ci
-
tc
.
services
.
mozilla
.
com
"
schema
.
EXCEPTED_SCHEMA_IDENTIFIERS
.
extend
(
    
[
        
"
test_name
"
        
"
json_location
"
        
"
video_location
"
        
"
profile_name
"
        
"
target_path
"
        
"
try_task_config
"
    
]
)
del
payload_builders
[
"
beetmover
"
]
del
payload_builders
[
"
docker
-
worker
"
]
del
payload_builders
[
"
generic
-
worker
"
]
def
register
(
graph_config
)
:
    
"
"
"
Used
to
register
Gecko
specific
extensions
.
    
Args
:
        
graph_config
:
The
graph
configuration
object
.
    
"
"
"
    
from
taskgraph
.
optimize
.
base
import
registry
    
from
gecko_taskgraph
import
(
        
filter_tasks
        
morph
        
target_tasks
    
)
    
from
gecko_taskgraph
.
parameters
import
register_parameters
    
from
gecko_taskgraph
.
util
import
(
        
dependencies
    
)
    
from
gecko_taskgraph
.
util
.
verify
import
verifications
    
del
registry
[
"
skip
-
unless
-
changed
"
]
    
register_mozilla_taskgraph
(
graph_config
)
    
register_android_taskgraph
(
graph_config
)
    
generator
.
verifications
=
verifications
    
register_parameters
(
)
