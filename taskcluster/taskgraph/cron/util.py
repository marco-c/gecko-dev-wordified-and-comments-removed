#
-
*
-
coding
:
utf
-
8
-
*
-
from
__future__
import
absolute_import
print_function
unicode_literals
import
subprocess
def
match_utc
(
params
hour
=
None
minute
=
None
)
:
    
"
"
"
Return
True
if
params
[
'
time
'
]
matches
the
given
hour
and
minute
.
    
If
hour
is
not
specified
any
hour
will
match
.
If
minute
is
not
    
specified
then
every
multiple
of
fifteen
minutes
will
match
.
Times
    
not
an
even
multiple
of
fifteen
minutes
will
result
in
an
exception
    
(
since
they
would
never
run
)
.
"
"
"
    
if
minute
is
not
None
and
minute
%
15
!
=
0
:
        
raise
Exception
(
"
cron
jobs
only
run
on
multiples
of
15
minutes
past
the
hour
"
)
    
if
hour
is
not
None
and
params
[
'
time
'
]
.
hour
!
=
hour
:
        
return
False
    
if
minute
is
not
None
and
params
[
'
time
'
]
.
minute
!
=
minute
:
        
return
False
    
return
True
def
calculate_head_rev
(
root
)
:
    
return
subprocess
.
check_output
(
[
'
hg
'
'
log
'
'
-
r
'
'
.
'
'
-
T
'
'
{
node
}
'
]
cwd
=
root
)
