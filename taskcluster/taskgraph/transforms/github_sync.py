from
__future__
import
absolute_import
print_function
unicode_literals
from
taskgraph
.
transforms
.
base
import
TransformSequence
transforms
=
TransformSequence
(
)
transforms
.
add
def
sync_github
(
config
tasks
)
:
    
"
"
"
Do
transforms
specific
to
github
-
sync
tasks
.
    
"
"
"
    
for
task
in
tasks
:
        
secret
=
task
[
'
secret
'
]
        
if
config
.
params
[
'
project
'
]
=
=
'
mozilla
-
central
'
:
            
task
.
setdefault
(
'
scopes
'
[
]
)
            
task
[
'
scopes
'
]
.
append
(
'
secrets
:
get
:
'
+
secret
)
            
task
[
'
worker
'
]
.
setdefault
(
'
env
'
{
}
)
[
'
GITHUB_SECRET
'
]
=
secret
        
del
task
[
'
secret
'
]
        
yield
task
