"
"
"
Transform
the
upload
-
symbols
task
description
template
  
taskcluster
/
ci
/
upload
-
symbols
/
job
-
template
.
yml
into
an
actual
task
description
.
"
"
"
from
__future__
import
absolute_import
print_function
unicode_literals
from
taskgraph
.
transforms
.
base
import
TransformSequence
transforms
=
TransformSequence
(
)
transforms
.
add
def
fill_template
(
config
tasks
)
:
    
for
task
in
tasks
:
        
task
[
'
label
'
]
=
task
[
'
build
-
label
'
]
+
'
-
upload
-
symbols
'
        
task
[
'
dependencies
'
]
=
{
'
build
'
:
task
[
'
build
-
label
'
]
}
        
task
[
'
worker
'
]
[
'
env
'
]
[
'
GECKO_HEAD_REPOSITORY
'
]
=
config
.
params
[
'
head_repository
'
]
        
task
[
'
worker
'
]
[
'
env
'
]
[
'
GECKO_HEAD_REV
'
]
=
config
.
params
[
'
head_rev
'
]
        
build_platform
build_type
=
task
[
'
build
-
platform
'
]
.
split
(
'
/
'
)
        
attributes
=
task
.
setdefault
(
'
attributes
'
{
}
)
        
attributes
[
'
build_platform
'
]
=
build_platform
        
attributes
[
'
build_type
'
]
=
build_type
        
del
task
[
'
build
-
label
'
]
        
del
task
[
'
build
-
platform
'
]
        
yield
task
