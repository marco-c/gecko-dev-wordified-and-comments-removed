"
"
"
These
transforms
are
specific
to
the
android
-
test
kind
and
apply
defaults
to
the
test
descriptions
appropriate
to
that
kind
.
Both
the
input
to
and
output
from
these
transforms
must
conform
to
taskgraph
.
transforms
.
tests
.
test
:
test_schema
.
"
"
"
from
__future__
import
absolute_import
print_function
unicode_literals
from
taskgraph
.
transforms
.
base
import
TransformSequence
transforms
=
TransformSequence
(
)
transforms
.
add
def
set_defaults
(
config
tests
)
:
    
for
test
in
tests
:
        
test
[
'
mozharness
'
]
[
'
tooltool
-
downloads
'
]
=
True
        
test
[
'
mozharness
'
]
[
'
build
-
artifact
-
name
'
]
=
'
public
/
build
/
target
.
apk
'
        
test
[
'
mozharness
'
]
[
'
actions
'
]
=
[
'
get
-
secrets
'
]
        
yield
test
transforms
.
add
def
set_tier
(
config
tests
)
:
    
for
test
in
tests
:
        
if
'
tier
'
not
in
test
:
            
if
test
[
'
test
-
platform
'
]
=
=
'
android
-
4
.
3
-
arm7
-
api
-
15
/
debug
'
:
                
test
[
'
tier
'
]
=
1
            
else
:
                
test
[
'
tier
'
]
=
2
        
yield
test
transforms
.
add
def
set_treeherder_machine_platform
(
config
tests
)
:
    
"
"
"
Set
the
appropriate
task
.
extra
.
treeherder
.
machine
.
platform
"
"
"
    
translation
=
{
        
'
android
-
api
-
15
/
debug
'
:
'
android
-
4
-
3
-
armv7
-
api15
/
debug
'
        
'
android
-
api
-
15
/
opt
'
:
'
android
-
4
-
3
-
armv7
-
api15
/
opt
'
    
}
    
for
test
in
tests
:
        
build_platform
=
test
[
'
build
-
platform
'
]
        
test
[
'
treeherder
-
machine
-
platform
'
]
=
translation
.
get
(
build_platform
build_platform
)
        
yield
test
