"
"
"
Add
from
parameters
.
yml
into
Balrog
publishing
tasks
.
"
"
"
from
__future__
import
absolute_import
print_function
unicode_literals
from
taskgraph
.
transforms
.
base
import
TransformSequence
from
taskgraph
.
util
.
schema
import
resolve_keyed_by
from
taskgraph
.
util
.
scriptworker
import
get_release_config
transforms
=
TransformSequence
(
)
transforms
.
add
def
make_task_description
(
config
jobs
)
:
    
release_config
=
get_release_config
(
config
)
    
for
job
in
jobs
:
        
resolve_keyed_by
(
            
job
'
worker
-
type
'
item_name
=
job
[
'
name
'
]
project
=
config
.
params
[
'
project
'
]
        
)
        
resolve_keyed_by
(
            
job
'
scopes
'
item_name
=
job
[
'
name
'
]
project
=
config
.
params
[
'
project
'
]
        
)
        
job
[
'
worker
'
]
[
'
release
-
name
'
]
=
'
{
product
}
-
{
version
}
-
build
{
build_number
}
'
.
format
(
            
product
=
job
[
'
shipping
-
product
'
]
.
capitalize
(
)
            
version
=
release_config
[
'
version
'
]
            
build_number
=
release_config
[
'
build_number
'
]
        
)
        
yield
job
