"
"
"
Transform
the
repackage
task
into
an
actual
task
description
.
"
"
"
from
__future__
import
absolute_import
print_function
unicode_literals
from
taskgraph
.
transforms
.
base
import
TransformSequence
transforms
=
TransformSequence
(
)
transforms
.
add
def
split_locales
(
config
jobs
)
:
    
for
job
in
jobs
:
        
dep_job
=
job
[
'
dependent
-
task
'
]
        
for
locale
in
dep_job
.
attributes
.
get
(
'
chunk_locales
'
[
]
)
:
            
job
[
'
locale
'
]
=
locale
            
label
=
dep_job
.
label
.
replace
(
"
signing
-
"
"
repackage
-
{
}
-
"
.
format
(
locale
)
)
            
label
=
"
repackage
-
{
}
-
{
}
/
{
}
"
.
format
(
locale
                                                
dep_job
.
attributes
[
'
build_platform
'
]
                                                
dep_job
.
attributes
[
'
build_type
'
]
)
            
job
[
'
label
'
]
=
label
            
treeherder
=
job
.
get
(
'
treeherder
'
{
}
)
            
treeherder
[
'
symbol
'
]
=
'
tc
-
L10n
-
Rpk
(
{
}
)
'
.
format
(
locale
)
            
job
[
'
treeherder
'
]
=
treeherder
            
yield
job
