function
minimizeMemory
(
)
{
Services
.
storage
.
QueryInterface
(
Ci
.
nsIObserver
)
.
observe
(
null
"
memory
-
pressure
"
null
)
;
}
add_task
(
async
function
test_minimizeMemory_async_connection
(
)
{
let
db
=
await
openAsyncDatabase
(
getTestDB
(
)
)
;
minimizeMemory
(
)
;
await
asyncClose
(
db
)
;
}
)
;
add_task
(
async
function
test_minimizeMemory_sync_connection
(
)
{
let
db
=
getOpenedDatabase
(
)
;
minimizeMemory
(
)
;
db
.
close
(
)
;
}
)
;
