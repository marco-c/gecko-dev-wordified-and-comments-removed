#
ifndef
__NS_SVGGRADIENTFRAME_H__
#
define
__NS_SVGGRADIENTFRAME_H__
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
gfxMatrix
.
h
"
#
include
"
gfxRect
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsFrame
.
h
"
#
include
"
nsLiteralString
.
h
"
#
include
"
nsSVGPaintServerFrame
.
h
"
class
gfxPattern
;
class
nsAtom
;
class
nsIContent
;
namespace
mozilla
{
class
PresShell
;
class
SVGAnimatedTransformList
;
namespace
dom
{
class
SVGLinearGradientElement
;
class
SVGRadialGradientElement
;
}
}
class
nsSVGGradientFrame
:
public
nsSVGPaintServerFrame
{
typedef
mozilla
:
:
gfx
:
:
ExtendMode
ExtendMode
;
protected
:
nsSVGGradientFrame
(
ComputedStyle
*
aStyle
nsPresContext
*
aPresContext
ClassID
aID
)
;
public
:
NS_DECL_ABSTRACT_FRAME
(
nsSVGGradientFrame
)
virtual
already_AddRefed
<
gfxPattern
>
GetPaintServerPattern
(
nsIFrame
*
aSource
const
DrawTarget
*
aDrawTarget
const
gfxMatrix
&
aContextMatrix
nsStyleSVGPaint
nsStyleSVG
:
:
*
aFillOrStroke
float
aGraphicOpacity
imgDrawingParams
&
aImgParams
const
gfxRect
*
aOverrideBounds
)
override
;
virtual
nsresult
AttributeChanged
(
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
)
override
;
#
ifdef
DEBUG_FRAME_DUMP
virtual
nsresult
GetFrameName
(
nsAString
&
aResult
)
const
override
{
return
MakeFrameName
(
NS_LITERAL_STRING
(
"
SVGGradient
"
)
aResult
)
;
}
#
endif
private
:
nsSVGGradientFrame
*
GetReferencedGradient
(
)
;
void
GetStopFrames
(
nsTArray
<
nsIFrame
*
>
*
aStopFrames
)
;
const
mozilla
:
:
SVGAnimatedTransformList
*
GetGradientTransformList
(
nsIContent
*
aDefault
)
;
gfxMatrix
GetGradientTransform
(
nsIFrame
*
aSource
const
gfxRect
*
aOverrideBounds
)
;
protected
:
virtual
bool
GradientVectorLengthIsZero
(
)
=
0
;
virtual
already_AddRefed
<
gfxPattern
>
CreateGradient
(
)
=
0
;
uint16_t
GetEnumValue
(
uint32_t
aIndex
nsIContent
*
aDefault
)
;
uint16_t
GetEnumValue
(
uint32_t
aIndex
)
{
return
GetEnumValue
(
aIndex
mContent
)
;
}
uint16_t
GetGradientUnits
(
)
;
uint16_t
GetSpreadMethod
(
)
;
virtual
mozilla
:
:
dom
:
:
SVGLinearGradientElement
*
GetLinearGradientWithLength
(
uint32_t
aIndex
mozilla
:
:
dom
:
:
SVGLinearGradientElement
*
aDefault
)
;
virtual
mozilla
:
:
dom
:
:
SVGRadialGradientElement
*
GetRadialGradientWithLength
(
uint32_t
aIndex
mozilla
:
:
dom
:
:
SVGRadialGradientElement
*
aDefault
)
;
nsIFrame
*
mSource
;
private
:
bool
mLoopFlag
;
bool
mNoHRefURI
;
}
;
class
nsSVGLinearGradientFrame
final
:
public
nsSVGGradientFrame
{
friend
nsIFrame
*
NS_NewSVGLinearGradientFrame
(
mozilla
:
:
PresShell
*
aPresShell
ComputedStyle
*
aStyle
)
;
protected
:
explicit
nsSVGLinearGradientFrame
(
ComputedStyle
*
aStyle
nsPresContext
*
aPresContext
)
:
nsSVGGradientFrame
(
aStyle
aPresContext
kClassID
)
{
}
public
:
NS_DECL_FRAMEARENA_HELPERS
(
nsSVGLinearGradientFrame
)
#
ifdef
DEBUG
virtual
void
Init
(
nsIContent
*
aContent
nsContainerFrame
*
aParent
nsIFrame
*
aPrevInFlow
)
override
;
#
endif
virtual
nsresult
AttributeChanged
(
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
)
override
;
#
ifdef
DEBUG_FRAME_DUMP
virtual
nsresult
GetFrameName
(
nsAString
&
aResult
)
const
override
{
return
MakeFrameName
(
NS_LITERAL_STRING
(
"
SVGLinearGradient
"
)
aResult
)
;
}
#
endif
protected
:
float
GetLengthValue
(
uint32_t
aIndex
)
;
virtual
mozilla
:
:
dom
:
:
SVGLinearGradientElement
*
GetLinearGradientWithLength
(
uint32_t
aIndex
mozilla
:
:
dom
:
:
SVGLinearGradientElement
*
aDefault
)
override
;
virtual
bool
GradientVectorLengthIsZero
(
)
override
;
virtual
already_AddRefed
<
gfxPattern
>
CreateGradient
(
)
override
;
}
;
class
nsSVGRadialGradientFrame
final
:
public
nsSVGGradientFrame
{
friend
nsIFrame
*
NS_NewSVGRadialGradientFrame
(
mozilla
:
:
PresShell
*
aPresShell
ComputedStyle
*
aStyle
)
;
protected
:
explicit
nsSVGRadialGradientFrame
(
ComputedStyle
*
aStyle
nsPresContext
*
aPresContext
)
:
nsSVGGradientFrame
(
aStyle
aPresContext
kClassID
)
{
}
public
:
NS_DECL_FRAMEARENA_HELPERS
(
nsSVGRadialGradientFrame
)
#
ifdef
DEBUG
virtual
void
Init
(
nsIContent
*
aContent
nsContainerFrame
*
aParent
nsIFrame
*
aPrevInFlow
)
override
;
#
endif
virtual
nsresult
AttributeChanged
(
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
)
override
;
#
ifdef
DEBUG_FRAME_DUMP
virtual
nsresult
GetFrameName
(
nsAString
&
aResult
)
const
override
{
return
MakeFrameName
(
NS_LITERAL_STRING
(
"
SVGRadialGradient
"
)
aResult
)
;
}
#
endif
protected
:
float
GetLengthValue
(
uint32_t
aIndex
)
;
float
GetLengthValue
(
uint32_t
aIndex
float
aDefaultValue
)
;
float
GetLengthValueFromElement
(
uint32_t
aIndex
mozilla
:
:
dom
:
:
SVGRadialGradientElement
&
aElement
)
;
virtual
mozilla
:
:
dom
:
:
SVGRadialGradientElement
*
GetRadialGradientWithLength
(
uint32_t
aIndex
mozilla
:
:
dom
:
:
SVGRadialGradientElement
*
aDefault
)
override
;
virtual
bool
GradientVectorLengthIsZero
(
)
override
;
virtual
already_AddRefed
<
gfxPattern
>
CreateGradient
(
)
override
;
}
;
#
endif
