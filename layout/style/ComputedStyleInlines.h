#
ifndef
ComputedStyleInlines_h
#
define
ComputedStyleInlines_h
#
include
"
mozilla
/
ComputedStyle
.
h
"
#
include
"
mozilla
/
ServoComputedDataInlines
.
h
"
#
include
"
mozilla
/
ServoUtils
.
h
"
#
include
"
nsPresContext
.
h
"
namespace
mozilla
{
namespace
detail
{
template
<
typename
T
const
T
*
(
ComputedStyle
:
:
*
Method
)
(
)
const
>
void
TriggerImageLoads
(
dom
:
:
Document
&
aDocument
const
ComputedStyle
*
aOldStyle
ComputedStyle
*
aStyle
)
{
if
constexpr
(
T
:
:
kHasTriggerImageLoads
)
{
auto
*
old
=
aOldStyle
?
(
aOldStyle
-
>
*
Method
)
(
)
:
nullptr
;
auto
*
current
=
const_cast
<
T
*
>
(
(
aStyle
-
>
*
Method
)
(
)
)
;
current
-
>
TriggerImageLoads
(
aDocument
old
)
;
}
else
{
Unused
<
<
aOldStyle
;
Unused
<
<
aStyle
;
}
}
}
void
ComputedStyle
:
:
StartImageLoads
(
dom
:
:
Document
&
aDocument
const
ComputedStyle
*
aOldStyle
)
{
MOZ_ASSERT
(
NS_IsMainThread
(
)
)
;
#
define
STYLE_STRUCT
(
name_
)
\
detail
:
:
TriggerImageLoads
<
nsStyle
#
#
name_
&
ComputedStyle
:
:
Style
#
#
name_
>
(
\
aDocument
aOldStyle
this
)
;
#
include
"
nsStyleStructList
.
h
"
#
undef
STYLE_STRUCT
}
}
#
endif
