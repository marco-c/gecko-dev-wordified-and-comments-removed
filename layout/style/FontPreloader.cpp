#
include
"
FontPreloader
.
h
"
#
include
"
mozilla
/
FontLoaderUtils
.
h
"
#
include
"
gfxPlatform
.
h
"
namespace
mozilla
{
FontPreloader
:
:
FontPreloader
(
)
:
FetchPreloader
(
nsIContentPolicy
:
:
TYPE_INTERNAL_FONT_PRELOAD
)
{
}
nsresult
FontPreloader
:
:
CreateChannel
(
nsIChannel
*
*
aChannel
nsIURI
*
aURI
const
CORSMode
aCORSMode
const
dom
:
:
ReferrerPolicy
&
aReferrerPolicy
dom
:
:
Document
*
aDocument
nsILoadGroup
*
aLoadGroup
nsIInterfaceRequestor
*
aCallbacks
uint64_t
aEarlyHintPreloaderId
int32_t
aSupportsPriorityValue
)
{
if
(
!
gfxPlatform
:
:
GetPlatform
(
)
-
>
DownloadableFontsEnabled
(
)
)
{
return
NS_ERROR_NOT_AVAILABLE
;
}
return
FontLoaderUtils
:
:
BuildChannel
(
aChannel
aURI
aCORSMode
aReferrerPolicy
nullptr
nullptr
aDocument
aLoadGroup
aCallbacks
true
aSupportsPriorityValue
)
;
}
}
