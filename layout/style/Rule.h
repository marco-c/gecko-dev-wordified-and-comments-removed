#
ifndef
mozilla_css_Rule_h___
#
define
mozilla_css_Rule_h___
#
include
"
mozilla
/
StyleSheetInlines
.
h
"
#
include
"
mozilla
/
MemoryReporting
.
h
"
#
include
"
nsISupports
.
h
"
#
include
"
nsIDOMCSSRule
.
h
"
class
nsIDocument
;
struct
nsRuleData
;
template
<
class
T
>
struct
already_AddRefed
;
class
nsHTMLCSSStyleSheet
;
namespace
mozilla
{
namespace
css
{
class
GroupRule
;
#
define
DECL_STYLE_RULE_INHERIT_NO_DOMRULE
#
define
DECL_STYLE_RULE_INHERIT
\
DECL_STYLE_RULE_INHERIT_NO_DOMRULE
\
virtual
nsIDOMCSSRule
*
GetDOMRule
(
)
override
;
\
virtual
nsIDOMCSSRule
*
GetExistingDOMRule
(
)
override
;
class
Rule
:
public
nsISupports
{
protected
:
Rule
(
uint32_t
aLineNumber
uint32_t
aColumnNumber
)
:
mSheet
(
nullptr
)
mParentRule
(
nullptr
)
mLineNumber
(
aLineNumber
)
mColumnNumber
(
aColumnNumber
)
{
}
Rule
(
const
Rule
&
aCopy
)
:
mSheet
(
aCopy
.
mSheet
)
mParentRule
(
aCopy
.
mParentRule
)
mLineNumber
(
aCopy
.
mLineNumber
)
mColumnNumber
(
aCopy
.
mColumnNumber
)
{
}
virtual
~
Rule
(
)
{
}
public
:
#
ifdef
DEBUG
virtual
void
List
(
FILE
*
out
=
stdout
int32_t
aIndent
=
0
)
const
=
0
;
#
endif
enum
{
UNKNOWN_RULE
=
0
CHARSET_RULE
IMPORT_RULE
NAMESPACE_RULE
STYLE_RULE
MEDIA_RULE
FONT_FACE_RULE
PAGE_RULE
KEYFRAME_RULE
KEYFRAMES_RULE
DOCUMENT_RULE
SUPPORTS_RULE
FONT_FEATURE_VALUES_RULE
COUNTER_STYLE_RULE
}
;
virtual
int32_t
GetType
(
)
const
=
0
;
CSSStyleSheet
*
GetStyleSheet
(
)
const
{
return
mSheet
;
}
nsIDocument
*
GetDocument
(
)
const
{
CSSStyleSheet
*
sheet
=
GetStyleSheet
(
)
;
return
sheet
?
sheet
-
>
GetDocument
(
)
:
nullptr
;
}
virtual
void
SetStyleSheet
(
CSSStyleSheet
*
aSheet
)
;
void
SetParentRule
(
GroupRule
*
aRule
)
{
mParentRule
=
aRule
;
}
uint32_t
GetLineNumber
(
)
const
{
return
mLineNumber
;
}
uint32_t
GetColumnNumber
(
)
const
{
return
mColumnNumber
;
}
virtual
already_AddRefed
<
Rule
>
Clone
(
)
const
=
0
;
virtual
nsIDOMCSSRule
*
GetDOMRule
(
)
=
0
;
virtual
nsIDOMCSSRule
*
GetExistingDOMRule
(
)
=
0
;
nsresult
GetParentRule
(
nsIDOMCSSRule
*
*
aParentRule
)
;
nsresult
GetParentStyleSheet
(
nsIDOMCSSStyleSheet
*
*
aSheet
)
;
Rule
*
GetCSSRule
(
)
;
virtual
size_t
SizeOfIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
const
MOZ_MUST_OVERRIDE
=
0
;
protected
:
CSSStyleSheet
*
mSheet
;
GroupRule
*
MOZ_NON_OWNING_REF
mParentRule
;
uint32_t
mLineNumber
;
uint32_t
mColumnNumber
;
}
;
}
}
#
endif
