#
include
"
mozilla
/
URLExtraData
.
h
"
#
include
"
mozilla
/
NullPrincipalURI
.
h
"
#
include
"
nsProxyRelease
.
h
"
#
include
"
ReferrerInfo
.
h
"
namespace
mozilla
{
StaticRefPtr
<
URLExtraData
>
URLExtraData
:
:
sDummy
;
void
URLExtraData
:
:
InitDummy
(
)
{
RefPtr
<
nsIURI
>
baseURI
=
new
NullPrincipalURI
(
)
;
nsCOMPtr
<
nsIReferrerInfo
>
referrerInfo
=
new
dom
:
:
ReferrerInfo
(
nullptr
)
;
sDummy
=
new
URLExtraData
(
baseURI
.
forget
(
)
referrerInfo
.
forget
(
)
NullPrincipal
:
:
CreateWithoutOriginAttributes
(
)
)
;
}
void
URLExtraData
:
:
ReleaseDummy
(
)
{
sDummy
=
nullptr
;
}
URLExtraData
:
:
~
URLExtraData
(
)
{
if
(
!
NS_IsMainThread
(
)
)
{
NS_ReleaseOnMainThreadSystemGroup
(
"
URLExtraData
:
:
mPrincipal
"
mPrincipal
.
forget
(
)
)
;
}
}
StaticRefPtr
<
URLExtraData
>
URLExtraData
:
:
sShared
[
size_t
(
UserAgentStyleSheetID
:
:
Count
)
]
;
}
