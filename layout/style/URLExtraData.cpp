#
include
"
mozilla
/
URLExtraData
.
h
"
#
include
"
mozilla
/
NullPrincipalURI
.
h
"
#
include
"
nsProxyRelease
.
h
"
namespace
mozilla
{
StaticRefPtr
<
URLExtraData
>
URLExtraData
:
:
sDummy
;
void
URLExtraData
:
:
InitDummy
(
)
{
RefPtr
<
nsIURI
>
baseURI
=
NullPrincipalURI
:
:
Create
(
)
;
RefPtr
<
nsIURI
>
referrer
=
baseURI
;
sDummy
=
new
URLExtraData
(
baseURI
.
forget
(
)
referrer
.
forget
(
)
NullPrincipal
:
:
CreateWithoutOriginAttributes
(
)
)
;
}
void
URLExtraData
:
:
ReleaseDummy
(
)
{
sDummy
=
nullptr
;
}
URLExtraData
:
:
~
URLExtraData
(
)
{
if
(
!
NS_IsMainThread
(
)
)
{
NS_ReleaseOnMainThreadSystemGroup
(
"
URLExtraData
:
:
mBaseURI
"
mBaseURI
.
forget
(
)
)
;
NS_ReleaseOnMainThreadSystemGroup
(
"
URLExtraData
:
:
mReferrer
"
mReferrer
.
forget
(
)
)
;
NS_ReleaseOnMainThreadSystemGroup
(
"
URLExtraData
:
:
mPrincipal
"
mPrincipal
.
forget
(
)
)
;
}
}
}
