#
include
"
CSSUnsupportedValue
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
DeclarationBlock
.
h
"
namespace
mozilla
:
:
dom
{
CSSUnsupportedValue
:
:
CSSUnsupportedValue
(
nsCOMPtr
<
nsISupports
>
aParent
const
CSSPropertyId
&
aPropertyId
RefPtr
<
DeclarationBlock
>
aDeclarations
)
:
CSSStyleValue
(
std
:
:
move
(
aParent
)
ValueType
:
:
Unsupported
)
mPropertyId
(
aPropertyId
)
mDeclarations
(
std
:
:
move
(
aDeclarations
)
)
{
}
void
CSSUnsupportedValue
:
:
ToCssTextWithProperty
(
const
CSSPropertyId
&
aPropertyId
nsACString
&
aDest
)
const
{
MOZ_ASSERT
(
aPropertyId
=
=
mPropertyId
)
;
if
(
aDest
.
IsEmpty
(
)
)
{
mDeclarations
-
>
GetPropertyValueById
(
mPropertyId
aDest
)
;
return
;
}
nsAutoCString
value
;
mDeclarations
-
>
GetPropertyValueById
(
mPropertyId
value
)
;
aDest
.
Append
(
value
)
;
}
CSSUnsupportedValue
&
CSSStyleValue
:
:
GetAsCSSUnsupportedValue
(
)
{
MOZ_DIAGNOSTIC_ASSERT
(
mValueType
=
=
ValueType
:
:
Unsupported
)
;
return
*
static_cast
<
CSSUnsupportedValue
*
>
(
this
)
;
}
const
CSSPropertyId
*
CSSStyleValue
:
:
GetPropertyId
(
)
{
if
(
!
IsCSSUnsupportedValue
(
)
)
{
return
nullptr
;
}
CSSUnsupportedValue
&
unsupportedValue
=
GetAsCSSUnsupportedValue
(
)
;
return
&
unsupportedValue
.
GetPropertyId
(
)
;
}
}
