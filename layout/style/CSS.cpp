#
include
"
CSS
.
h
"
#
include
"
mozilla
/
dom
/
BindingDeclarations
.
h
"
#
include
"
mozilla
/
dom
/
HighlightRegistry
.
h
"
#
include
"
mozilla
/
ServoBindings
.
h
"
#
include
"
nsGlobalWindow
.
h
"
#
include
"
mozilla
/
dom
/
Document
.
h
"
#
include
"
nsStyleUtil
.
h
"
#
include
"
xpcpublic
.
h
"
namespace
mozilla
{
namespace
dom
{
bool
CSS
:
:
Supports
(
const
GlobalObject
&
const
nsACString
&
aProperty
const
nsACString
&
aValue
)
{
return
Servo_CSSSupports2
(
&
aProperty
&
aValue
)
;
}
bool
CSS
:
:
Supports
(
const
GlobalObject
&
const
nsACString
&
aCondition
)
{
return
Servo_CSSSupports
(
&
aCondition
false
false
false
)
;
}
void
CSS
:
:
Escape
(
const
GlobalObject
&
const
nsAString
&
aIdent
nsAString
&
aReturn
)
{
nsStyleUtil
:
:
AppendEscapedCSSIdent
(
aIdent
aReturn
)
;
}
HighlightRegistry
*
CSS
:
:
GetHighlights
(
const
GlobalObject
&
aGlobal
ErrorResult
&
aRv
)
{
nsCOMPtr
<
nsPIDOMWindowInner
>
window
=
do_QueryInterface
(
aGlobal
.
GetAsSupports
(
)
)
;
if
(
!
window
)
{
aRv
.
ThrowUnknownError
(
"
There
is
no
window
associated
to
"
"
this
highlight
registry
object
!
"
)
;
return
nullptr
;
}
Document
*
doc
=
window
-
>
GetExtantDoc
(
)
;
if
(
!
doc
)
{
aRv
.
ThrowUnknownError
(
"
There
is
no
document
associated
to
"
"
this
highlight
registry
object
!
"
)
;
return
nullptr
;
}
return
&
doc
-
>
HighlightRegistry
(
)
;
}
}
}
