#
include
"
mozilla
/
ServoStyleContext
.
h
"
#
include
"
nsCSSAnonBoxes
.
h
"
#
include
"
nsStyleConsts
.
h
"
#
include
"
nsStyleStruct
.
h
"
#
include
"
nsPresContext
.
h
"
#
include
"
nsCSSRuleProcessor
.
h
"
#
include
"
mozilla
/
dom
/
HTMLBodyElement
.
h
"
#
include
"
mozilla
/
ServoBindings
.
h
"
namespace
mozilla
{
ServoStyleContext
:
:
ServoStyleContext
(
nsPresContext
*
aPresContext
nsIAtom
*
aPseudoTag
CSSPseudoElementType
aPseudoType
ServoComputedDataForgotten
aComputedValues
)
:
nsStyleContext
(
aPseudoTag
aPseudoType
)
mPresContext
(
aPresContext
)
mSource
(
aComputedValues
)
{
AddStyleBit
(
Servo_ComputedValues_GetStyleBits
(
this
)
)
;
MOZ_ASSERT
(
ComputedData
(
)
)
;
}
ServoStyleContext
*
ServoStyleContext
:
:
GetCachedInheritingAnonBoxStyle
(
nsIAtom
*
aAnonBox
)
const
{
MOZ_ASSERT
(
nsCSSAnonBoxes
:
:
IsInheritingAnonBox
(
aAnonBox
)
)
;
if
(
IsInheritingAnonBox
(
)
)
{
return
nullptr
;
}
auto
*
current
=
mNextInheritingAnonBoxStyle
.
get
(
)
;
while
(
current
&
&
current
-
>
GetPseudo
(
)
!
=
aAnonBox
)
{
current
=
current
-
>
mNextInheritingAnonBoxStyle
.
get
(
)
;
}
return
current
;
}
}
