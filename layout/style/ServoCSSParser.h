#
ifndef
mozilla_ServoCSSParser_h
#
define
mozilla_ServoCSSParser_h
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
mozilla
/
gfx
/
Matrix
.
h
"
#
include
"
nsCSSPropertyID
.
h
"
#
include
"
nsColor
.
h
"
#
include
"
nsDOMCSSDeclaration
.
h
"
#
include
"
nsStringFwd
.
h
"
struct
nsCSSRect
;
template
<
class
T
>
class
RefPtr
;
namespace
mozilla
{
struct
AnimatedPropertyID
;
class
ServoStyleSet
;
struct
URLExtraData
;
struct
StyleAbsoluteColor
;
struct
StyleFontFamilyList
;
struct
StyleFontStretch
;
struct
StyleFontWeight
;
struct
StyleFontStyle
;
struct
StyleLockedDeclarationBlock
;
struct
StyleParsingMode
;
struct
StylePerDocumentStyleData
;
union
StyleComputedFontStyleDescriptor
;
enum
class
StyleColorSpace
:
uint8_t
;
template
<
typename
Integer
typename
Number
typename
LinearStops
>
struct
StyleTimingFunction
;
struct
StylePiecewiseLinearFunction
;
using
StyleComputedTimingFunction
=
StyleTimingFunction
<
int32_t
float
StylePiecewiseLinearFunction
>
;
namespace
css
{
class
Loader
;
}
namespace
dom
{
class
Document
;
}
class
ServoCSSParser
{
public
:
using
ParsingEnvironment
=
nsDOMCSSDeclaration
:
:
ParsingEnvironment
;
static
bool
IsValidCSSColor
(
const
nsACString
&
aValue
)
;
static
bool
ComputeColor
(
const
StylePerDocumentStyleData
*
aStyleData
nscolor
aCurrentColor
const
nsACString
&
aValue
nscolor
*
aResultColor
bool
*
aWasCurrentColor
=
nullptr
css
:
:
Loader
*
aLoader
=
nullptr
)
;
static
StyleAbsoluteColor
ComputeColorWellControlColor
(
const
StylePerDocumentStyleData
*
aStyleData
const
nsACString
&
aValue
StyleColorSpace
aToColorSpace
)
;
static
bool
ColorTo
(
const
nsACString
&
aFromColor
const
nsACString
&
aToColorSpace
nsACString
*
aResultColor
nsTArray
<
float
>
*
aResultComponents
bool
*
aResultAdjusted
css
:
:
Loader
*
aLoader
=
nullptr
)
;
static
already_AddRefed
<
StyleLockedDeclarationBlock
>
ParseProperty
(
nsCSSPropertyID
aProperty
const
nsACString
&
aValue
const
ParsingEnvironment
&
aParsingEnvironment
const
StyleParsingMode
&
aParsingMode
)
;
static
already_AddRefed
<
StyleLockedDeclarationBlock
>
ParseProperty
(
const
AnimatedPropertyID
&
aProperty
const
nsACString
&
aValue
const
ParsingEnvironment
&
aParsingEnvironment
const
StyleParsingMode
&
aParsingMode
)
;
static
bool
ParseEasing
(
const
nsACString
&
aValue
StyleComputedTimingFunction
&
aResult
)
;
static
bool
ParseTransformIntoMatrix
(
const
nsACString
&
aValue
bool
&
aContains3DTransform
gfx
:
:
Matrix4x4
&
aResult
)
;
static
bool
ParseFontShorthandForMatching
(
const
nsACString
&
aValue
URLExtraData
*
aUrl
StyleFontFamilyList
&
aList
StyleFontStyle
&
aStyle
StyleFontStretch
&
aStretch
StyleFontWeight
&
aWeight
float
*
aSize
=
nullptr
bool
*
aSmallCaps
=
nullptr
)
;
static
already_AddRefed
<
URLExtraData
>
GetURLExtraData
(
dom
:
:
Document
*
)
;
static
ParsingEnvironment
GetParsingEnvironment
(
dom
:
:
Document
*
)
;
}
;
}
#
endif
