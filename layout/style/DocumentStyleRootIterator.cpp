#
include
"
DocumentStyleRootIterator
.
h
"
#
include
"
mozilla
/
dom
/
Element
.
h
"
#
include
"
nsContentUtils
.
h
"
namespace
mozilla
{
DocumentStyleRootIterator
:
:
DocumentStyleRootIterator
(
nsINode
*
aStyleRoot
)
:
mPosition
(
0
)
{
MOZ_COUNT_CTOR
(
DocumentStyleRootIterator
)
;
MOZ_ASSERT
(
aStyleRoot
)
;
if
(
aStyleRoot
-
>
IsElement
(
)
)
{
mStyleRoots
.
AppendElement
(
aStyleRoot
-
>
AsElement
(
)
)
;
return
;
}
nsIDocument
*
doc
=
aStyleRoot
-
>
OwnerDoc
(
)
;
MOZ_ASSERT
(
doc
=
=
aStyleRoot
)
;
if
(
Element
*
root
=
doc
-
>
GetRootElement
(
)
)
{
mStyleRoots
.
AppendElement
(
root
)
;
}
nsContentUtils
:
:
AppendDocumentLevelNativeAnonymousContentTo
(
doc
mStyleRoots
)
;
}
Element
*
DocumentStyleRootIterator
:
:
GetNextStyleRoot
(
)
{
for
(
;
;
)
{
if
(
mPosition
>
=
mStyleRoots
.
Length
(
)
)
{
return
nullptr
;
}
nsIContent
*
next
=
mStyleRoots
[
mPosition
]
;
+
+
mPosition
;
if
(
next
-
>
IsElement
(
)
)
{
return
next
-
>
AsElement
(
)
;
}
}
}
}
