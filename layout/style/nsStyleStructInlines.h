#
ifndef
nsStyleStructInlines_h_
#
define
nsStyleStructInlines_h_
#
include
"
nsIFrame
.
h
"
#
include
"
nsStyleStruct
.
h
"
#
include
"
nsIContent
.
h
"
#
include
"
nsTextFrame
.
h
"
#
include
"
mozilla
/
SVGUtils
.
h
"
bool
nsStyleText
:
:
NewlineIsSignificant
(
const
nsTextFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleText
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
NewlineIsSignificantStyle
(
)
&
&
!
aContextFrame
-
>
ShouldSuppressLineBreak
(
)
&
&
!
aContextFrame
-
>
Style
(
)
-
>
IsTextCombined
(
)
;
}
bool
nsStyleText
:
:
WhiteSpaceCanWrap
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleText
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
WhiteSpaceCanWrapStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
&
&
!
aContextFrame
-
>
Style
(
)
-
>
IsTextCombined
(
)
;
}
bool
nsStyleText
:
:
WordCanWrap
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleText
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
WordCanWrapStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
bool
nsStyleDisplay
:
:
IsBlockOutside
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
if
(
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
)
{
return
aContextFrame
-
>
IsBlockFrame
(
)
;
}
return
IsBlockOutsideStyle
(
)
;
}
bool
nsStyleDisplay
:
:
IsInlineOutside
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
if
(
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
)
{
return
!
aContextFrame
-
>
IsBlockFrame
(
)
;
}
return
IsInlineOutsideStyle
(
)
;
}
mozilla
:
:
StyleDisplay
nsStyleDisplay
:
:
GetDisplay
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
if
(
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
&
&
mDisplay
!
=
mozilla
:
:
StyleDisplay
:
:
None
)
{
return
aContextFrame
-
>
IsBlockFrame
(
)
?
mozilla
:
:
StyleDisplay
:
:
Block
:
mozilla
:
:
StyleDisplay
:
:
Inline
;
}
return
mDisplay
;
}
bool
nsStyleDisplay
:
:
IsFloating
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
IsFloatingStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
bool
nsStyleDisplay
:
:
HasTransform
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
HasTransformStyle
(
)
&
&
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsCSSTransforms
)
;
}
bool
nsStyleDisplay
:
:
HasPerspective
(
const
nsIFrame
*
aContextFrame
)
const
{
MOZ_ASSERT
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
HasPerspectiveStyle
(
)
&
&
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsCSSTransforms
)
;
}
bool
nsStyleDisplay
:
:
IsFixedPosContainingBlockForNonSVGTextFrames
(
const
mozilla
:
:
ComputedStyle
&
aStyle
)
const
{
NS_ASSERTION
(
aStyle
.
StyleDisplay
(
)
=
=
this
"
unexpected
aStyle
"
)
;
if
(
mWillChange
.
bits
&
mozilla
:
:
StyleWillChangeBits
:
:
FIXPOS_CB
)
{
return
true
;
}
return
aStyle
.
StyleEffects
(
)
-
>
HasFilters
(
)
|
|
aStyle
.
StyleEffects
(
)
-
>
HasBackdropFilters
(
)
;
}
bool
nsStyleDisplay
:
:
IsFixedPosContainingBlockForContainLayoutAndPaintSupportingFrames
(
)
const
{
return
IsContainPaint
(
)
|
|
IsContainLayout
(
)
;
}
bool
nsStyleDisplay
:
:
IsFixedPosContainingBlockForTransformSupportingFrames
(
)
const
{
return
HasTransformStyle
(
)
|
|
HasPerspectiveStyle
(
)
;
}
bool
nsStyleDisplay
:
:
IsFixedPosContainingBlock
(
const
nsIFrame
*
aContextFrame
)
const
{
mozilla
:
:
ComputedStyle
*
style
=
aContextFrame
-
>
Style
(
)
;
NS_ASSERTION
(
style
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
if
(
!
IsFixedPosContainingBlockForNonSVGTextFrames
(
*
style
)
&
&
(
!
IsFixedPosContainingBlockForContainLayoutAndPaintSupportingFrames
(
)
|
|
!
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsContainLayoutAndPaint
)
)
&
&
(
!
IsFixedPosContainingBlockForTransformSupportingFrames
(
)
|
|
!
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsCSSTransforms
)
)
)
{
return
false
;
}
if
(
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
)
{
return
false
;
}
MOZ_ASSERT
(
IsAbsPosContainingBlock
(
aContextFrame
)
"
Any
fixed
-
pos
CB
should
also
be
an
abs
-
pos
CB
"
)
;
return
true
;
}
bool
nsStyleDisplay
:
:
IsAbsPosContainingBlock
(
const
nsIFrame
*
aContextFrame
)
const
{
mozilla
:
:
ComputedStyle
*
style
=
aContextFrame
-
>
Style
(
)
;
NS_ASSERTION
(
style
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
if
(
!
IsPositionedStyle
(
)
&
&
!
IsFixedPosContainingBlockForNonSVGTextFrames
(
*
style
)
&
&
(
!
IsFixedPosContainingBlockForContainLayoutAndPaintSupportingFrames
(
)
|
|
!
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsContainLayoutAndPaint
)
)
&
&
(
!
IsFixedPosContainingBlockForTransformSupportingFrames
(
)
|
|
!
aContextFrame
-
>
IsFrameOfType
(
nsIFrame
:
:
eSupportsCSSTransforms
)
)
)
{
return
false
;
}
return
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
bool
nsStyleDisplay
:
:
IsRelativelyPositioned
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
IsRelativelyPositionedStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
bool
nsStyleDisplay
:
:
IsStickyPositioned
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
IsStickyPositionedStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
bool
nsStyleDisplay
:
:
IsAbsolutelyPositioned
(
const
nsIFrame
*
aContextFrame
)
const
{
NS_ASSERTION
(
aContextFrame
-
>
StyleDisplay
(
)
=
=
this
"
unexpected
aContextFrame
"
)
;
return
IsAbsolutelyPositionedStyle
(
)
&
&
!
mozilla
:
:
SVGUtils
:
:
IsInSVGTextSubtree
(
aContextFrame
)
;
}
mozilla
:
:
StylePointerEvents
nsStyleUI
:
:
GetEffectivePointerEvents
(
nsIFrame
*
aFrame
)
const
{
if
(
aFrame
-
>
GetContent
(
)
&
&
!
aFrame
-
>
GetContent
(
)
-
>
GetParent
(
)
)
{
return
mozilla
:
:
StylePointerEvents
:
:
Auto
;
}
return
mPointerEvents
;
}
bool
nsStyleBackground
:
:
HasLocalBackground
(
)
const
{
NS_FOR_VISIBLE_IMAGE_LAYERS_BACK_TO_FRONT
(
i
mImage
)
{
const
nsStyleImageLayers
:
:
Layer
&
layer
=
mImage
.
mLayers
[
i
]
;
if
(
!
layer
.
mImage
.
IsNone
(
)
&
&
layer
.
mAttachment
=
=
mozilla
:
:
StyleImageLayerAttachment
:
:
Local
)
{
return
true
;
}
}
return
false
;
}
#
endif
