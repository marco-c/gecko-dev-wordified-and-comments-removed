#
ifndef
nsStyleSheetService_h_
#
define
nsStyleSheetService_h_
#
include
"
mozilla
/
Array
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
MemoryReporting
.
h
"
#
include
"
mozilla
/
StyleSheet
.
h
"
#
include
"
nsIMemoryReporter
.
h
"
#
include
"
nsIStyleSheetService
.
h
"
class
nsISimpleEnumerator
;
namespace
mozilla
{
class
PresShell
;
}
#
define
NS_STYLESHEETSERVICE_CID
\
{
0x3b55e72e
0xab7e
0x431b
{
0x89
0xc0
0x3b
0x06
0xa8
0xb1
0x40
0x16
}
}
#
define
NS_STYLESHEETSERVICE_CONTRACTID
\
"
mozilla
.
org
/
content
/
style
-
sheet
-
service
;
1
"
class
nsStyleSheetService
final
:
public
nsIStyleSheetService
public
nsIMemoryReporter
{
public
:
typedef
nsTArray
<
RefPtr
<
mozilla
:
:
StyleSheet
>
>
SheetArray
;
nsStyleSheetService
(
)
;
NS_DECL_ISUPPORTS
NS_DECL_NSISTYLESHEETSERVICE
NS_DECL_NSIMEMORYREPORTER
nsresult
Init
(
)
;
SheetArray
*
AgentStyleSheets
(
)
{
return
&
mSheets
[
AGENT_SHEET
]
;
}
SheetArray
*
UserStyleSheets
(
)
{
return
&
mSheets
[
USER_SHEET
]
;
}
SheetArray
*
AuthorStyleSheets
(
)
{
return
&
mSheets
[
AUTHOR_SHEET
]
;
}
void
RegisterPresShell
(
mozilla
:
:
PresShell
*
aPresShell
)
;
void
UnregisterPresShell
(
mozilla
:
:
PresShell
*
aPresShell
)
;
size_t
SizeOfIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
const
;
static
nsStyleSheetService
*
GetInstance
(
)
;
static
nsStyleSheetService
*
gInstance
;
private
:
~
nsStyleSheetService
(
)
;
int32_t
FindSheetByURI
(
uint32_t
aSheetType
nsIURI
*
aSheetURI
)
;
nsresult
LoadAndRegisterSheetInternal
(
nsIURI
*
aSheetURI
uint32_t
aSheetType
)
;
mozilla
:
:
Array
<
SheetArray
3
>
mSheets
;
nsTArray
<
RefPtr
<
mozilla
:
:
PresShell
>
>
mPresShells
;
}
;
#
endif
