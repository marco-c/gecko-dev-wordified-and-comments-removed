#
ifndef
mozilla_dom_MediaQueryList_h
#
define
mozilla_dom_MediaQueryList_h
#
include
"
nsISupports
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
mozilla
/
LinkedList
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
nsWrapperCache
.
h
"
#
include
"
mozilla
/
DOMEventTargetHelper
.
h
"
#
include
"
mozilla
/
dom
/
MediaQueryListBinding
.
h
"
namespace
mozilla
:
:
dom
{
class
MediaList
;
class
MediaQueryList
final
:
public
DOMEventTargetHelper
public
LinkedListElement
<
MediaQueryList
>
{
public
:
MediaQueryList
(
Document
*
aDocument
const
nsACString
&
aMediaQueryList
CallerType
)
;
private
:
~
MediaQueryList
(
)
;
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
MediaQueryList
DOMEventTargetHelper
)
nsISupports
*
GetParentObject
(
)
const
;
[
[
nodiscard
]
]
bool
MediaFeatureValuesChanged
(
)
;
void
FireChangeEvent
(
)
;
JSObject
*
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
override
;
void
GetMedia
(
nsACString
&
aMedia
)
const
;
bool
Matches
(
)
;
void
AddListener
(
EventListener
*
aListener
ErrorResult
&
aRv
)
;
void
RemoveListener
(
EventListener
*
aListener
ErrorResult
&
aRv
)
;
using
DOMEventTargetHelper
:
:
EventListenerAdded
;
void
EventListenerAdded
(
nsAtom
*
aType
)
override
;
IMPL_EVENT_HANDLER
(
change
)
bool
HasListeners
(
)
const
;
void
Disconnect
(
)
;
size_t
SizeOfExcludingThis
(
MallocSizeOf
aMallocSizeOf
)
const
;
private
:
void
LastRelease
(
)
final
{
auto
*
listElement
=
static_cast
<
LinkedListElement
<
MediaQueryList
>
*
>
(
this
)
;
if
(
listElement
-
>
isInList
(
)
)
{
listElement
-
>
remove
(
)
;
}
}
void
RecomputeMatches
(
)
;
RefPtr
<
Document
>
mDocument
;
const
RefPtr
<
const
MediaList
>
mMediaList
;
bool
mMatches
=
false
;
bool
mMatchesValid
=
false
;
const
bool
mViewportDependent
;
}
;
}
#
endif
