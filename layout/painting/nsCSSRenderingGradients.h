#
ifndef
nsCSSRenderingGradients_h__
#
define
nsCSSRenderingGradients_h__
#
include
"
nsLayoutUtils
.
h
"
#
include
"
nsStyleStruct
.
h
"
#
include
"
Units
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
gfx
/
2D
.
h
"
namespace
mozilla
{
namespace
layers
{
class
WebRenderDisplayItemLayer
;
}
namespace
wr
{
class
DisplayListBuilder
;
}
struct
ColorStop
{
ColorStop
(
)
:
mPosition
(
0
)
mIsMidpoint
(
false
)
{
}
ColorStop
(
double
aPosition
bool
aIsMidPoint
const
gfx
:
:
Color
&
aColor
)
:
mPosition
(
aPosition
)
mIsMidpoint
(
aIsMidPoint
)
mColor
(
aColor
)
{
}
double
mPosition
;
bool
mIsMidpoint
;
gfx
:
:
Color
mColor
;
}
;
class
nsCSSGradientRenderer
final
{
public
:
static
Maybe
<
nsCSSGradientRenderer
>
Create
(
nsPresContext
*
aPresContext
nsStyleGradient
*
aGradient
const
nsRect
&
aDest
const
nsRect
&
aFill
const
nsSize
&
aRepeatSize
const
mozilla
:
:
CSSIntRect
&
aSrc
const
nsSize
&
aIntrinsiceSize
)
;
void
Paint
(
gfxContext
&
aContext
const
nsRect
&
aDirtyRect
float
aOpacity
=
1
.
0
)
;
void
BuildWebRenderDisplayItems
(
wr
:
:
DisplayListBuilder
&
aBuilder
layers
:
:
WebRenderDisplayItemLayer
*
aLayer
float
aOpacity
=
1
.
0
)
;
private
:
nsCSSGradientRenderer
(
)
{
}
nsPresContext
*
mPresContext
;
nsStyleGradient
*
mGradient
;
CSSIntRect
mSrc
;
nsRect
mDest
;
nsRect
mDirtyRect
;
nsRect
mFillArea
;
nsSize
mRepeatSize
;
nsTArray
<
ColorStop
>
mStops
;
gfxPoint
mLineStart
mLineEnd
;
double
mRadiusX
mRadiusY
;
bool
mForceRepeatToCoverTiles
;
bool
mForceRepeatToCoverTilesFlip
;
}
;
}
#
endif
