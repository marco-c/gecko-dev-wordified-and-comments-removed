#
ifndef
DISPLAYITEMSCROLLCLIP_H_
#
define
DISPLAYITEMSCROLLCLIP_H_
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
nsString
.
h
"
class
nsIScrollableFrame
;
namespace
mozilla
{
class
DisplayItemClip
;
class
DisplayItemScrollClip
{
public
:
DisplayItemScrollClip
(
const
DisplayItemScrollClip
*
aParent
const
DisplayItemScrollClip
*
aCrossStackingContextParent
nsIScrollableFrame
*
aScrollableFrame
const
DisplayItemClip
*
aClip
bool
aIsAsyncScrollable
)
:
mParent
(
aParent
)
mScrollableFrame
(
aScrollableFrame
)
mClip
(
aClip
)
mIsAsyncScrollable
(
aIsAsyncScrollable
)
mCrossStackingContextParent
(
aCrossStackingContextParent
)
mCrossStackingContextDepth
(
aCrossStackingContextParent
?
aCrossStackingContextParent
-
>
mCrossStackingContextDepth
+
1
:
1
)
{
MOZ_ASSERT
(
mScrollableFrame
)
;
}
static
const
DisplayItemScrollClip
*
PickInnermost
(
const
DisplayItemScrollClip
*
aClip1
const
DisplayItemScrollClip
*
aClip2
)
{
MOZ_ASSERT
(
IsAncestor
(
aClip1
aClip2
)
|
|
IsAncestor
(
aClip2
aClip1
)
"
one
of
the
scroll
clips
must
be
an
ancestor
of
the
other
"
)
;
return
Depth
(
aClip1
)
>
Depth
(
aClip2
)
?
aClip1
:
aClip2
;
}
static
bool
IsAncestor
(
const
DisplayItemScrollClip
*
aAncestor
const
DisplayItemScrollClip
*
aDescendant
)
;
static
nsCString
ToString
(
const
DisplayItemScrollClip
*
aScrollClip
)
;
const
DisplayItemScrollClip
*
mParent
;
nsIScrollableFrame
*
mScrollableFrame
;
const
DisplayItemClip
*
mClip
;
bool
mIsAsyncScrollable
;
private
:
static
uint32_t
Depth
(
const
DisplayItemScrollClip
*
aSC
)
{
return
aSC
?
aSC
-
>
mCrossStackingContextDepth
:
0
;
}
const
DisplayItemScrollClip
*
mCrossStackingContextParent
;
const
uint32_t
mCrossStackingContextDepth
;
}
;
}
#
endif
