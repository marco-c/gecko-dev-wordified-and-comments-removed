#
ifndef
LAYOUT_BASE_NSREFRESHOBSERVERS_H_
#
define
LAYOUT_BASE_NSREFRESHOBSERVERS_H_
#
include
<
functional
>
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
nsISupports
.
h
"
namespace
mozilla
{
class
AnimationEventDispatcher
;
class
PendingFullscreenEvent
;
class
PresShell
;
class
RefreshDriverTimer
;
}
class
nsARefreshObserver
{
public
:
NS_INLINE_DECL_PURE_VIRTUAL_REFCOUNTING
MOZ_CAN_RUN_SCRIPT
virtual
void
WillRefresh
(
mozilla
:
:
TimeStamp
aTime
)
=
0
;
}
;
class
nsATimerAdjustmentObserver
{
public
:
virtual
void
NotifyTimerAdjusted
(
mozilla
:
:
TimeStamp
aTime
)
=
0
;
}
;
class
nsAPostRefreshObserver
{
public
:
virtual
void
DidRefresh
(
)
=
0
;
}
;
namespace
mozilla
{
class
ManagedPostRefreshObserver
:
public
nsAPostRefreshObserver
{
public
:
enum
class
Unregister
:
bool
{
No
Yes
}
;
using
Action
=
std
:
:
function
<
Unregister
(
bool
aWasCanceled
)
>
;
NS_INLINE_DECL_REFCOUNTING
(
ManagedPostRefreshObserver
)
ManagedPostRefreshObserver
(
mozilla
:
:
PresShell
*
Action
&
&
)
;
explicit
ManagedPostRefreshObserver
(
mozilla
:
:
PresShell
*
)
;
void
DidRefresh
(
)
override
;
void
Cancel
(
)
;
protected
:
virtual
~
ManagedPostRefreshObserver
(
)
;
RefPtr
<
mozilla
:
:
PresShell
>
mPresShell
;
Action
mAction
;
}
;
}
#
endif
