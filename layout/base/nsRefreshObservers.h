#
ifndef
LAYOUT_BASE_NSREFRESHOBSERVERS_H_
#
define
LAYOUT_BASE_NSREFRESHOBSERVERS_H_
#
include
<
functional
>
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
nsISupports
.
h
"
namespace
mozilla
{
class
AnimationEventDispatcher
;
class
PendingFullscreenEvent
;
class
PresShell
;
class
RefreshDriverTimer
;
namespace
layout
{
class
VsyncChild
;
}
}
class
nsARefreshObserver
{
public
:
NS_INLINE_DECL_PURE_VIRTUAL_REFCOUNTING
MOZ_CAN_RUN_SCRIPT
virtual
void
WillRefresh
(
mozilla
:
:
TimeStamp
aTime
)
=
0
;
}
;
class
nsATimerAdjustmentObserver
{
public
:
virtual
void
NotifyTimerAdjusted
(
mozilla
:
:
TimeStamp
aTime
)
=
0
;
}
;
class
nsAPostRefreshObserver
{
public
:
virtual
void
DidRefresh
(
)
=
0
;
}
;
namespace
mozilla
{
class
OneShotPostRefreshObserver
:
public
nsAPostRefreshObserver
{
public
:
using
Action
=
std
:
:
function
<
void
(
mozilla
:
:
PresShell
*
)
>
;
OneShotPostRefreshObserver
(
mozilla
:
:
PresShell
*
aPresShell
Action
&
&
aAction
)
;
virtual
~
OneShotPostRefreshObserver
(
)
;
void
DidRefresh
(
)
override
;
protected
:
RefPtr
<
mozilla
:
:
PresShell
>
mPresShell
;
Action
mAction
;
}
;
}
#
endif
