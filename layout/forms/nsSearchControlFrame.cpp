#
include
"
nsSearchControlFrame
.
h
"
#
include
"
HTMLInputElement
.
h
"
#
include
"
mozilla
/
PresShell
.
h
"
#
include
"
nsGkAtoms
.
h
"
#
include
"
nsNameSpaceManager
.
h
"
#
include
"
nsStyleConsts
.
h
"
#
include
"
nsContentUtils
.
h
"
#
include
"
nsContentCreatorFunctions
.
h
"
#
include
"
nsCSSPseudoElements
.
h
"
#
include
"
nsICSSDeclaration
.
h
"
#
ifdef
ACCESSIBILITY
#
include
"
mozilla
/
a11y
/
AccTypes
.
h
"
#
endif
using
namespace
mozilla
;
using
namespace
mozilla
:
:
dom
;
nsIFrame
*
NS_NewSearchControlFrame
(
PresShell
*
aPresShell
ComputedStyle
*
aStyle
)
{
return
new
(
aPresShell
)
nsSearchControlFrame
(
aStyle
aPresShell
-
>
GetPresContext
(
)
)
;
}
NS_IMPL_FRAMEARENA_HELPERS
(
nsSearchControlFrame
)
NS_QUERYFRAME_HEAD
(
nsSearchControlFrame
)
NS_QUERYFRAME_ENTRY
(
nsSearchControlFrame
)
NS_QUERYFRAME_TAIL_INHERITING
(
nsTextControlFrame
)
nsSearchControlFrame
:
:
nsSearchControlFrame
(
ComputedStyle
*
aStyle
nsPresContext
*
aPresContext
)
:
nsTextControlFrame
(
aStyle
aPresContext
kClassID
)
{
}
void
nsSearchControlFrame
:
:
DestroyFrom
(
nsIFrame
*
aDestructRoot
PostDestroyData
&
aPostDestroyData
)
{
aPostDestroyData
.
AddAnonymousContent
(
mClearButton
.
forget
(
)
)
;
nsTextControlFrame
:
:
DestroyFrom
(
aDestructRoot
aPostDestroyData
)
;
}
nsresult
nsSearchControlFrame
:
:
CreateAnonymousContent
(
nsTArray
<
ContentInfo
>
&
aElements
)
{
nsTextControlFrame
:
:
CreateAnonymousContent
(
aElements
)
;
mClearButton
=
MakeAnonElement
(
PseudoStyleType
:
:
mozSearchClearButton
nullptr
nsGkAtoms
:
:
button
)
;
aElements
.
AppendElement
(
mClearButton
)
;
return
NS_OK
;
}
void
nsSearchControlFrame
:
:
AppendAnonymousContentTo
(
nsTArray
<
nsIContent
*
>
&
aElements
uint32_t
aFilter
)
{
nsTextControlFrame
:
:
AppendAnonymousContentTo
(
aElements
aFilter
)
;
if
(
mClearButton
)
{
aElements
.
AppendElement
(
mClearButton
)
;
}
}
