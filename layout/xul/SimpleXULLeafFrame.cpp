#
include
"
SimpleXULLeafFrame
.
h
"
#
include
"
mozilla
/
PresShell
.
h
"
nsIFrame
*
NS_NewSimpleXULLeafFrame
(
mozilla
:
:
PresShell
*
aPresShell
mozilla
:
:
ComputedStyle
*
aStyle
)
{
return
new
(
aPresShell
)
mozilla
:
:
SimpleXULLeafFrame
(
aStyle
aPresShell
-
>
GetPresContext
(
)
)
;
}
namespace
mozilla
{
NS_IMPL_FRAMEARENA_HELPERS
(
SimpleXULLeafFrame
)
void
SimpleXULLeafFrame
:
:
Reflow
(
nsPresContext
*
aPresContext
ReflowOutput
&
aDesiredSize
const
ReflowInput
&
aReflowInput
nsReflowStatus
&
aStatus
)
{
MarkInReflow
(
)
;
MOZ_ASSERT
(
aStatus
.
IsEmpty
(
)
"
Caller
should
pass
a
fresh
reflow
status
!
"
)
;
const
auto
wm
=
GetWritingMode
(
)
;
const
auto
&
bp
=
aReflowInput
.
ComputedLogicalBorderPadding
(
wm
)
;
aDesiredSize
.
ISize
(
wm
)
=
bp
.
IStartEnd
(
wm
)
+
aReflowInput
.
ComputedISize
(
)
;
aDesiredSize
.
BSize
(
wm
)
=
bp
.
BStartEnd
(
wm
)
+
(
aReflowInput
.
ComputedBSize
(
)
=
=
NS_UNCONSTRAINEDSIZE
?
aReflowInput
.
ComputedMinBSize
(
)
:
aReflowInput
.
ComputedBSize
(
)
)
;
aDesiredSize
.
SetOverflowAreasToDesiredBounds
(
)
;
}
}
