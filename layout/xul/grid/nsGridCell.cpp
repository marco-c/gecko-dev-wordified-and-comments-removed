#
include
"
nsGridCell
.
h
"
#
include
"
nsFrame
.
h
"
#
include
"
nsBox
.
h
"
#
include
"
nsGridLayout2
.
h
"
nsGridCell
:
:
nsGridCell
(
)
:
mBoxInColumn
(
nullptr
)
mBoxInRow
(
nullptr
)
{
MOZ_COUNT_CTOR
(
nsGridCell
)
;
}
nsGridCell
:
:
~
nsGridCell
(
)
{
MOZ_COUNT_DTOR
(
nsGridCell
)
;
}
nsSize
nsGridCell
:
:
GetXULPrefSize
(
nsBoxLayoutState
&
aState
)
{
nsSize
sum
(
0
0
)
;
if
(
mBoxInColumn
)
{
nsSize
pref
=
mBoxInColumn
-
>
GetXULPrefSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInColumn
pref
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInColumn
pref
)
;
nsBoxLayout
:
:
AddLargestSize
(
sum
pref
)
;
}
if
(
mBoxInRow
)
{
nsSize
pref
=
mBoxInRow
-
>
GetXULPrefSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInRow
pref
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInRow
pref
)
;
nsBoxLayout
:
:
AddLargestSize
(
sum
pref
)
;
}
return
sum
;
}
nsSize
nsGridCell
:
:
GetXULMinSize
(
nsBoxLayoutState
&
aState
)
{
nsSize
sum
(
0
0
)
;
if
(
mBoxInColumn
)
{
nsSize
min
=
mBoxInColumn
-
>
GetXULMinSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInColumn
min
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInColumn
min
)
;
nsBoxLayout
:
:
AddLargestSize
(
sum
min
)
;
}
if
(
mBoxInRow
)
{
nsSize
min
=
mBoxInRow
-
>
GetXULMinSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInRow
min
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInRow
min
)
;
nsBoxLayout
:
:
AddLargestSize
(
sum
min
)
;
}
return
sum
;
}
nsSize
nsGridCell
:
:
GetXULMaxSize
(
nsBoxLayoutState
&
aState
)
{
nsSize
sum
(
NS_UNCONSTRAINEDSIZE
NS_UNCONSTRAINEDSIZE
)
;
if
(
mBoxInColumn
)
{
nsSize
max
=
mBoxInColumn
-
>
GetXULMaxSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInColumn
max
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInColumn
max
)
;
nsBoxLayout
:
:
AddSmallestSize
(
sum
max
)
;
}
if
(
mBoxInRow
)
{
nsSize
max
=
mBoxInRow
-
>
GetXULMaxSize
(
aState
)
;
nsBox
:
:
AddMargin
(
mBoxInRow
max
)
;
nsGridLayout2
:
:
AddOffset
(
mBoxInRow
max
)
;
nsBoxLayout
:
:
AddSmallestSize
(
sum
max
)
;
}
return
sum
;
}
bool
nsGridCell
:
:
IsXULCollapsed
(
)
{
return
(
(
mBoxInColumn
&
&
mBoxInColumn
-
>
IsXULCollapsed
(
)
)
|
|
(
mBoxInRow
&
&
mBoxInRow
-
>
IsXULCollapsed
(
)
)
)
;
}
