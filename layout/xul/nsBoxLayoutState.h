#
ifndef
nsBoxLayoutState_h___
#
define
nsBoxLayoutState_h___
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsPresContext
.
h
"
#
include
"
nsIPresShell
.
h
"
class
nsRenderingContext
;
namespace
mozilla
{
struct
ReflowInput
;
}
class
MOZ_STACK_CLASS
nsBoxLayoutState
{
using
ReflowInput
=
mozilla
:
:
ReflowInput
;
public
:
explicit
nsBoxLayoutState
(
nsPresContext
*
aPresContext
nsRenderingContext
*
aRenderingContext
=
nullptr
const
ReflowInput
*
aOuterReflowState
=
nullptr
uint16_t
aReflowDepth
=
0
)
;
nsBoxLayoutState
(
const
nsBoxLayoutState
&
aState
)
;
nsPresContext
*
PresContext
(
)
const
{
return
mPresContext
;
}
nsIPresShell
*
PresShell
(
)
const
{
return
mPresContext
-
>
PresShell
(
)
;
}
uint32_t
LayoutFlags
(
)
const
{
return
mLayoutFlags
;
}
void
SetLayoutFlags
(
uint32_t
aFlags
)
{
mLayoutFlags
=
aFlags
;
}
void
SetPaintingDisabled
(
bool
aDisable
)
{
mPaintingDisabled
=
aDisable
;
}
bool
PaintingDisabled
(
)
const
{
return
mPaintingDisabled
;
}
nsRenderingContext
*
GetRenderingContext
(
)
const
{
return
mRenderingContext
;
}
struct
AutoReflowDepth
{
explicit
AutoReflowDepth
(
nsBoxLayoutState
&
aState
)
:
mState
(
aState
)
{
+
+
mState
.
mReflowDepth
;
}
~
AutoReflowDepth
(
)
{
-
-
mState
.
mReflowDepth
;
}
nsBoxLayoutState
&
mState
;
}
;
const
ReflowInput
*
OuterReflowState
(
)
{
return
mOuterReflowState
;
}
uint16_t
GetReflowDepth
(
)
{
return
mReflowDepth
;
}
private
:
RefPtr
<
nsPresContext
>
mPresContext
;
nsRenderingContext
*
mRenderingContext
;
const
ReflowInput
*
mOuterReflowState
;
uint32_t
mLayoutFlags
;
uint16_t
mReflowDepth
;
bool
mPaintingDisabled
;
}
;
#
endif
