#
include
"
AspectRatio
.
h
"
#
include
"
mozilla
/
WritingModes
.
h
"
namespace
mozilla
{
nscoord
AspectRatio
:
:
ComputeRatioDependentSize
(
LogicalAxis
aRatioDependentAxis
const
WritingMode
&
aWM
nscoord
aRatioDeterminingSize
const
LogicalSize
&
aContentBoxSizeToBoxSizingAdjust
)
const
{
MOZ_ASSERT
(
*
this
"
Infinite
or
zero
ratio
may
have
undefined
behavior
when
"
"
computing
the
size
"
)
;
const
LogicalSize
&
boxSizingAdjust
=
mUseBoxSizing
=
=
UseBoxSizing
:
:
No
?
LogicalSize
(
aWM
)
:
aContentBoxSizeToBoxSizingAdjust
;
return
aRatioDependentAxis
=
=
LogicalAxis
:
:
Inline
?
ConvertToWritingMode
(
aWM
)
.
ApplyTo
(
aRatioDeterminingSize
+
boxSizingAdjust
.
BSize
(
aWM
)
)
-
boxSizingAdjust
.
ISize
(
aWM
)
:
ConvertToWritingMode
(
aWM
)
.
Inverted
(
)
.
ApplyTo
(
aRatioDeterminingSize
+
boxSizingAdjust
.
ISize
(
aWM
)
)
-
boxSizingAdjust
.
BSize
(
aWM
)
;
}
}
