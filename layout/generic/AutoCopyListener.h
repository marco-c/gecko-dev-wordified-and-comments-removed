#
ifndef
mozilla_AutoCopyListener_h
#
define
mozilla_AutoCopyListener_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
dom
/
Selection
.
h
"
#
include
"
mozilla
/
StaticPrefs_clipboard
.
h
"
#
include
"
nsIClipboard
.
h
"
namespace
mozilla
{
class
AutoCopyListener
final
{
public
:
static
void
OnSelectionChange
(
dom
:
:
Document
*
aDocument
dom
:
:
Selection
&
aSelection
int16_t
aReason
)
;
static
void
Init
(
int16_t
aClipboardID
)
{
MOZ_ASSERT
(
IsValidClipboardID
(
aClipboardID
)
)
;
static
bool
sInitialized
=
false
;
if
(
!
sInitialized
&
&
IsValidClipboardID
(
aClipboardID
)
)
{
sClipboardID
=
aClipboardID
;
sInitialized
=
true
;
}
}
static
bool
IsPrefEnabled
(
)
{
return
StaticPrefs
:
:
clipboard_autocopy
(
)
;
}
private
:
static
bool
IsValidClipboardID
(
int16_t
aClipboardID
)
{
return
aClipboardID
>
=
nsIClipboard
:
:
kSelectionClipboard
&
&
aClipboardID
<
=
nsIClipboard
:
:
kSelectionCache
;
}
static
int16_t
sClipboardID
;
}
;
}
#
endif
