#
include
"
nsLeafFrame
.
h
"
#
include
"
nsPresContext
.
h
"
using
namespace
mozilla
;
nsLeafFrame
:
:
~
nsLeafFrame
(
)
{
}
nscoord
nsLeafFrame
:
:
GetMinISize
(
gfxContext
*
aRenderingContext
)
{
nscoord
result
;
DISPLAY_MIN_WIDTH
(
this
result
)
;
result
=
GetIntrinsicISize
(
)
;
return
result
;
}
nscoord
nsLeafFrame
:
:
GetPrefISize
(
gfxContext
*
aRenderingContext
)
{
nscoord
result
;
DISPLAY_PREF_WIDTH
(
this
result
)
;
result
=
GetIntrinsicISize
(
)
;
return
result
;
}
LogicalSize
nsLeafFrame
:
:
ComputeAutoSize
(
gfxContext
*
aRenderingContext
WritingMode
aWM
const
LogicalSize
&
aCBSize
nscoord
aAvailableISize
const
LogicalSize
&
aMargin
const
LogicalSize
&
aBorder
const
LogicalSize
&
aPadding
ComputeSizeFlags
aFlags
)
{
const
WritingMode
wm
=
GetWritingMode
(
)
;
LogicalSize
result
(
wm
GetIntrinsicISize
(
)
GetIntrinsicBSize
(
)
)
;
return
result
.
ConvertTo
(
aWM
wm
)
;
}
nscoord
nsLeafFrame
:
:
GetIntrinsicBSize
(
)
{
MOZ_ASSERT_UNREACHABLE
(
"
Someone
didn
'
t
override
Reflow
or
ComputeAutoSize
"
)
;
return
0
;
}
void
nsLeafFrame
:
:
SizeToAvailSize
(
const
ReflowInput
&
aReflowInput
ReflowOutput
&
aDesiredSize
)
{
WritingMode
wm
=
aReflowInput
.
GetWritingMode
(
)
;
LogicalSize
size
(
wm
aReflowInput
.
AvailableISize
(
)
aReflowInput
.
AvailableBSize
(
)
)
;
aDesiredSize
.
SetSize
(
wm
size
)
;
aDesiredSize
.
SetOverflowAreasToDesiredBounds
(
)
;
FinishAndStoreOverflow
(
&
aDesiredSize
aReflowInput
.
mStyleDisplay
)
;
}
