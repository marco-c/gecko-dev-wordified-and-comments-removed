#
ifndef
nsBlockReflowContext_h___
#
define
nsBlockReflowContext_h___
#
include
"
nsIFrame
.
h
"
#
include
"
nsHTMLReflowMetrics
.
h
"
class
nsLineBox
;
class
nsPresContext
;
namespace
mozilla
{
class
BlockReflowInput
;
}
class
nsBlockReflowContext
{
using
BlockReflowInput
=
mozilla
:
:
BlockReflowInput
;
using
ReflowInput
=
mozilla
:
:
ReflowInput
;
using
nsHTMLReflowMetrics
=
mozilla
:
:
nsHTMLReflowMetrics
;
public
:
nsBlockReflowContext
(
nsPresContext
*
aPresContext
const
ReflowInput
&
aParentRS
)
;
~
nsBlockReflowContext
(
)
{
}
void
ReflowBlock
(
const
mozilla
:
:
LogicalRect
&
aSpace
bool
aApplyBStartMargin
nsCollapsingMargin
&
aPrevMargin
nscoord
aClearance
bool
aIsAdjacentWithBStart
nsLineBox
*
aLine
ReflowInput
&
aReflowState
nsReflowStatus
&
aReflowStatus
BlockReflowInput
&
aState
)
;
bool
PlaceBlock
(
const
ReflowInput
&
aReflowState
bool
aForceFit
nsLineBox
*
aLine
nsCollapsingMargin
&
aBEndMarginResult
nsOverflowAreas
&
aOverflowAreas
nsReflowStatus
aReflowStatus
)
;
nsCollapsingMargin
&
GetCarriedOutBEndMargin
(
)
{
return
mMetrics
.
mCarriedOutBEndMargin
;
}
const
nsHTMLReflowMetrics
&
GetMetrics
(
)
const
{
return
mMetrics
;
}
bool
ComputeCollapsedBStartMargin
(
const
ReflowInput
&
aRS
nsCollapsingMargin
*
aMargin
nsIFrame
*
aClearanceFrame
bool
*
aMayNeedRetry
bool
*
aIsEmpty
=
nullptr
)
;
protected
:
nsPresContext
*
mPresContext
;
const
ReflowInput
&
mOuterReflowState
;
nsIFrame
*
mFrame
;
mozilla
:
:
LogicalRect
mSpace
;
nscoord
mICoord
mBCoord
;
nsSize
mContainerSize
;
mozilla
:
:
WritingMode
mWritingMode
;
nsHTMLReflowMetrics
mMetrics
;
nsCollapsingMargin
mBStartMargin
;
}
;
#
endif
