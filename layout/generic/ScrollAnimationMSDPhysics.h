#
ifndef
mozilla_layout_ScrollAnimationMSDPhysics_h_
#
define
mozilla_layout_ScrollAnimationMSDPhysics_h_
#
include
"
ScrollAnimationPhysics
.
h
"
#
include
"
mozilla
/
layers
/
AxisPhysicsMSDModel
.
h
"
namespace
mozilla
{
class
ScrollAnimationMSDPhysics
final
:
public
ScrollAnimationPhysics
{
public
:
typedef
mozilla
:
:
layers
:
:
AxisPhysicsMSDModel
AxisPhysicsMSDModel
;
explicit
ScrollAnimationMSDPhysics
(
const
nsPoint
&
aStartPos
)
;
void
Update
(
const
TimeStamp
&
aTime
const
nsPoint
&
aDestination
const
nsSize
&
aCurrentVelocity
)
override
;
void
ApplyContentShift
(
const
CSSPoint
&
aShiftDelta
)
override
;
nsSize
VelocityAt
(
const
TimeStamp
&
aTime
)
override
;
nsPoint
PositionAt
(
const
TimeStamp
&
aTime
)
override
;
bool
IsFinished
(
const
TimeStamp
&
aTime
)
override
{
SimulateUntil
(
aTime
)
;
return
mModelX
.
IsFinished
(
1
)
&
&
mModelY
.
IsFinished
(
1
)
;
}
protected
:
double
ComputeSpringConstant
(
const
TimeStamp
&
aTime
)
;
void
SimulateUntil
(
const
TimeStamp
&
aTime
)
;
TimeStamp
mPreviousEventTime
;
TimeDuration
mPreviousDelta
;
TimeStamp
mStartTime
;
nsPoint
mStartPos
;
nsPoint
mDestination
;
nsPoint
mContentShift
;
TimeStamp
mLastSimulatedTime
;
AxisPhysicsMSDModel
mModelX
;
AxisPhysicsMSDModel
mModelY
;
bool
mIsFirstIteration
;
}
;
}
#
endif
