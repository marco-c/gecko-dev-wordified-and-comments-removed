#
include
"
ScrollAnchorContainer
.
h
"
#
include
"
nsGfxScrollFrame
.
h
"
#
include
"
nsLayoutUtils
.
h
"
#
define
ANCHOR_LOG
(
.
.
.
)
namespace
mozilla
{
namespace
layout
{
ScrollAnchorContainer
:
:
ScrollAnchorContainer
(
ScrollFrameHelper
*
aScrollFrame
)
:
mScrollFrame
(
aScrollFrame
)
{
}
ScrollAnchorContainer
:
:
~
ScrollAnchorContainer
(
)
{
}
ScrollAnchorContainer
*
ScrollAnchorContainer
:
:
FindFor
(
nsIFrame
*
aFrame
)
{
aFrame
=
aFrame
-
>
GetParent
(
)
;
if
(
!
aFrame
)
{
return
nullptr
;
}
nsIScrollableFrame
*
nearest
=
nsLayoutUtils
:
:
GetNearestScrollableFrame
(
aFrame
nsLayoutUtils
:
:
SCROLLABLE_SAME_DOC
|
nsLayoutUtils
:
:
SCROLLABLE_INCLUDE_HIDDEN
)
;
if
(
nearest
)
{
return
nearest
-
>
GetAnchor
(
)
;
}
return
nullptr
;
}
nsIFrame
*
ScrollAnchorContainer
:
:
Frame
(
)
const
{
return
mScrollFrame
-
>
mOuter
;
}
nsIScrollableFrame
*
ScrollAnchorContainer
:
:
ScrollableFrame
(
)
const
{
return
Frame
(
)
-
>
GetScrollTargetFrame
(
)
;
}
}
}
