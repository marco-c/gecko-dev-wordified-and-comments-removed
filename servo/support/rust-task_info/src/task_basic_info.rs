use
std
:
:
os
:
:
raw
:
:
c_int
;
#
[
allow
(
non_camel_case_types
)
]
type
size_t
=
usize
;
pub
fn
virtual_size
(
)
-
>
Option
<
usize
>
{
let
mut
virtual_size
:
size_t
=
0
;
let
rv
=
unsafe
{
TaskBasicInfoVirtualSize
(
&
mut
virtual_size
)
}
;
if
rv
=
=
0
{
Some
(
virtual_size
as
usize
)
}
else
{
None
}
}
pub
fn
resident_size
(
)
-
>
Option
<
usize
>
{
let
mut
resident_size
:
size_t
=
0
;
let
rv
=
unsafe
{
TaskBasicInfoResidentSize
(
&
mut
resident_size
)
}
;
if
rv
=
=
0
{
Some
(
resident_size
as
usize
)
}
else
{
None
}
}
extern
{
fn
TaskBasicInfoVirtualSize
(
virtual_size
:
*
mut
size_t
)
-
>
c_int
;
fn
TaskBasicInfoResidentSize
(
resident_size
:
*
mut
size_t
)
-
>
c_int
;
}
#
[
cfg
(
test
)
]
mod
test
{
use
super
:
:
*
;
#
[
test
]
fn
test_stuff
(
)
{
assert
!
(
virtual_size
(
)
.
unwrap
(
)
>
0
)
;
assert
!
(
resident_size
(
)
.
unwrap
(
)
>
0
)
;
}
}
