#
!
[
allow
(
unused_imports
)
]
use
std
:
:
mem
;
macro_rules
!
check_enum_value
{
(
a
:
expr
b
:
expr
)
=
>
{
unsafe
{
mem
:
:
transmute
:
:
<
[
u32
;
a
as
usize
]
[
u32
;
b
as
usize
]
>
(
[
0
;
a
as
usize
]
)
;
}
}
}
macro_rules
!
check_enum_value_non_static
{
(
a
:
expr
b
:
expr
)
=
>
{
assert_eq
!
(
a
as
usize
b
as
usize
)
;
}
}
#
[
test
]
fn
assert_restyle_hints_match
(
)
{
use
style
:
:
restyle_hints
:
:
*
;
use
style
:
:
gecko_bindings
:
:
structs
:
:
nsRestyleHint
;
check_enum_value_non_static
!
(
nsRestyleHint
:
:
eRestyle_Self
RESTYLE_SELF
.
bits
(
)
)
;
check_enum_value_non_static
!
(
nsRestyleHint
:
:
eRestyle_SomeDescendants
RESTYLE_DESCENDANTS
.
bits
(
)
)
;
check_enum_value_non_static
!
(
nsRestyleHint
:
:
eRestyle_LaterSiblings
RESTYLE_LATER_SIBLINGS
.
bits
(
)
)
;
}
#
[
test
]
fn
assert_basic_pseudo_elements
(
)
{
let
mut
saw_before
=
false
;
let
mut
saw_after
=
false
;
macro_rules
!
pseudo_element
{
(
"
:
before
"
atom
:
expr
false
)
=
>
{
saw_before
=
true
;
}
;
(
"
:
after
"
atom
:
expr
false
)
=
>
{
saw_after
=
true
;
}
;
(
pseudo_str_with_colon
:
expr
atom
:
expr
is_anon_box
:
expr
)
=
>
{
/
/
Do
nothing
}
;
}
include
!
(
"
.
.
/
.
.
/
.
.
/
components
/
style
/
gecko
/
generated
/
gecko_pseudo_element_helper
.
rs
"
)
;
assert
!
(
saw_before
)
;
assert
!
(
saw_after
)
;
}
