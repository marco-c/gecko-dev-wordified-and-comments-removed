use
gfx
:
:
font_cache_thread
:
:
FontCacheThread
;
use
ipc_channel
:
:
ipc
;
use
style
:
:
computed_values
:
:
font_family
:
:
FontFamily
;
use
style
:
:
font_face
:
:
Source
;
#
[
test
]
fn
test_local_web_font
(
)
{
let
(
inp_chan
_
)
=
ipc
:
:
channel
(
)
.
unwrap
(
)
;
let
(
out_chan
out_receiver
)
=
ipc
:
:
channel
(
)
.
unwrap
(
)
;
let
font_cache_thread
=
FontCacheThread
:
:
new
(
inp_chan
None
)
;
let
family_name
=
FontFamily
:
:
FamilyName
(
From
:
:
from
(
"
test
family
"
)
)
;
let
variant_name
=
FontFamily
:
:
FamilyName
(
From
:
:
from
(
"
test
font
face
"
)
)
;
font_cache_thread
.
add_web_font
(
family_name
Source
:
:
Local
(
variant_name
)
out_chan
)
;
assert_eq
!
(
out_receiver
.
recv
(
)
.
unwrap
(
)
(
)
)
;
}
