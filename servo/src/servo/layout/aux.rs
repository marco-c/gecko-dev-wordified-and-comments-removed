use
dom
:
:
node
:
:
{
Node
LayoutData
}
;
use
core
:
:
dvec
:
:
DVec
;
pub
trait
LayoutAuxMethods
{
fn
initialize_layout_data
(
)
-
>
Option
<
LayoutData
>
;
fn
initialize_style_for_subtree
(
refs
:
&
DVec
<
LayoutData
>
)
;
}
impl
Node
:
LayoutAuxMethods
{
fn
initialize_layout_data
(
)
-
>
Option
<
LayoutData
>
{
match
self
.
has_aux
(
)
{
false
=
>
{
let
data
=
LayoutData
(
{
mut
style
:
None
mut
flow
:
None
}
)
;
self
.
set_aux
(
data
)
;
Some
(
data
)
}
true
=
>
None
}
}
fn
initialize_style_for_subtree
(
refs
:
&
DVec
<
LayoutData
>
)
{
do
self
.
traverse_preorder
|
n
|
{
match
n
.
initialize_layout_data
(
)
{
Some
(
r
)
=
>
refs
.
push
(
r
)
None
=
>
{
}
}
}
}
}
