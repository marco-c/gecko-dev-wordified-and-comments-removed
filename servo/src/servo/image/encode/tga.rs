import
gfx
:
:
surface
;
import
io
:
:
WriterUtil
;
fn
encode
(
writer
:
io
:
:
Writer
surface
:
surface
:
:
image_surface
)
{
assert
surface
.
format
=
=
gfx
:
:
surface
:
:
fo_rgba_8888
;
writer
.
write_u8
(
0u8
)
;
writer
.
write_u8
(
0u8
)
;
writer
.
write_u8
(
2u8
)
;
writer
.
write_le_u16
(
0u16
)
;
writer
.
write_le_u16
(
0u16
)
;
writer
.
write_u8
(
16u8
)
;
writer
.
write_le_u16
(
0u16
)
;
writer
.
write_le_u16
(
0u16
)
;
writer
.
write_le_u16
(
surface
.
size
.
width
as
u16
)
;
writer
.
write_le_u16
(
surface
.
size
.
height
as
u16
)
;
writer
.
write_u8
(
32u8
)
;
writer
.
write_u8
(
0x30u8
)
;
writer
.
write
(
surface
.
buffer
)
;
}
