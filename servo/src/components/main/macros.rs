#
[
macro_escape
]
;
macro_rules
!
special_stream
(
(
Chan
:
ident
)
=
>
(
{
let
(
port
chan
)
=
stream
:
:
(
)
;
(
port
Chan
:
:
new
(
chan
)
)
}
)
;
)
macro_rules
!
spawn_with
(
(
task
:
expr
[
(
var
:
ident
)
+
]
body
:
block
)
=
>
(
do
(
task
)
.
spawn_with
(
(
(
var
)
+
(
)
)
)
|
(
(
var
)
+
(
)
)
|
body
)
)
