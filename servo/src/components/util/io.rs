use
std
:
:
rt
:
:
io
:
:
{
io_error
IoError
}
;
pub
fn
result
<
T
>
(
cb
:
&
fn
(
)
-
>
T
)
-
>
Result
<
T
IoError
>
{
let
mut
err
=
None
;
let
ret
=
io_error
:
:
cond
.
trap
(
|
e
|
err
=
Some
(
e
)
)
.
inside
(
cb
)
;
match
err
{
Some
(
e
)
=
>
Err
(
e
)
None
=
>
Ok
(
ret
)
}
}
