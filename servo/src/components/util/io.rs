use
std
:
:
rt
:
:
io
:
:
{
io_error
EndOfFile
}
;
pub
fn
ignoring_eof
<
U
>
(
cb
:
&
fn
(
)
-
>
U
)
-
>
U
{
io_error
:
:
cond
.
trap
(
|
e
|
match
e
.
kind
{
EndOfFile
=
>
(
)
_
=
>
io_error
:
:
cond
.
raise
(
e
)
}
)
.
inside
(
cb
)
}
