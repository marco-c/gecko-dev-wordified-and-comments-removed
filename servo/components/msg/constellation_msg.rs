use
compositor_msg
:
:
Epoch
;
use
geom
:
:
rect
:
:
Rect
;
use
geom
:
:
size
:
:
TypedSize2D
;
use
geom
:
:
scale_factor
:
:
ScaleFactor
;
use
hyper
:
:
header
:
:
Headers
;
use
hyper
:
:
method
:
:
Method
;
use
layers
:
:
geometry
:
:
DevicePixel
;
use
png
;
use
util
:
:
cursor
:
:
Cursor
;
use
util
:
:
geometry
:
:
{
PagePx
ViewportPx
}
;
use
std
:
:
collections
:
:
HashMap
;
use
std
:
:
sync
:
:
mpsc
:
:
{
channel
Sender
Receiver
}
;
use
style
:
:
viewport
:
:
ViewportConstraints
;
use
webdriver_traits
:
:
{
WebDriverScriptCommand
LoadComplete
}
;
use
url
:
:
Url
;
#
[
derive
(
Clone
)
]
pub
struct
ConstellationChan
(
pub
Sender
<
Msg
>
)
;
impl
ConstellationChan
{
pub
fn
new
(
)
-
>
(
Receiver
<
Msg
>
ConstellationChan
)
{
let
(
chan
port
)
=
channel
(
)
;
(
port
ConstellationChan
(
chan
)
)
}
}
#
[
derive
(
PartialEq
Eq
Copy
Clone
Debug
)
]
pub
enum
IFrameSandboxState
{
IFrameSandboxed
IFrameUnsandboxed
}
#
[
derive
(
Clone
Copy
)
]
pub
struct
Failure
{
pub
pipeline_id
:
PipelineId
pub
parent_info
:
Option
<
(
PipelineId
SubpageId
)
>
}
#
[
derive
(
Copy
Clone
)
]
pub
struct
WindowSizeData
{
pub
initial_viewport
:
TypedSize2D
<
ViewportPx
f32
>
pub
visible_viewport
:
TypedSize2D
<
PagePx
f32
>
pub
device_pixel_ratio
:
ScaleFactor
<
ViewportPx
DevicePixel
f32
>
}
#
[
derive
(
PartialEq
Eq
Copy
Clone
)
]
pub
enum
KeyState
{
Pressed
Released
Repeated
}
#
[
derive
(
Debug
PartialEq
Eq
Copy
Clone
)
]
pub
enum
Key
{
Space
Apostrophe
Comma
Minus
Period
Slash
Num0
Num1
Num2
Num3
Num4
Num5
Num6
Num7
Num8
Num9
Semicolon
Equal
A
B
C
D
E
F
G
H
I
J
K
L
M
N
O
P
Q
R
S
T
U
V
W
X
Y
Z
LeftBracket
Backslash
RightBracket
GraveAccent
World1
World2
Escape
Enter
Tab
Backspace
Insert
Delete
Right
Left
Down
Up
PageUp
PageDown
Home
End
CapsLock
ScrollLock
NumLock
PrintScreen
Pause
F1
F2
F3
F4
F5
F6
F7
F8
F9
F10
F11
F12
F13
F14
F15
F16
F17
F18
F19
F20
F21
F22
F23
F24
F25
Kp0
Kp1
Kp2
Kp3
Kp4
Kp5
Kp6
Kp7
Kp8
Kp9
KpDecimal
KpDivide
KpMultiply
KpSubtract
KpAdd
KpEnter
KpEqual
LeftShift
LeftControl
LeftAlt
LeftSuper
RightShift
RightControl
RightAlt
RightSuper
Menu
}
bitflags
!
{
flags
KeyModifiers
:
u8
{
const
SHIFT
=
0x01
const
CONTROL
=
0x02
const
ALT
=
0x04
const
SUPER
=
0x08
}
}
#
[
derive
(
Copy
Clone
PartialEq
)
]
pub
enum
FocusType
{
Element
Parent
}
pub
enum
Msg
{
Exit
Failure
(
Failure
)
InitLoadUrl
(
Url
)
LoadComplete
(
PipelineId
)
FrameRect
(
PipelineId
SubpageId
Rect
<
f32
>
)
LoadUrl
(
PipelineId
LoadData
)
ScriptLoadedURLInIFrame
(
Url
PipelineId
SubpageId
Option
<
SubpageId
>
IFrameSandboxState
)
Navigate
(
Option
<
(
PipelineId
SubpageId
)
>
NavigationDirection
)
PainterReady
(
PipelineId
)
ResizedWindow
(
WindowSizeData
)
KeyEvent
(
Key
KeyState
KeyModifiers
)
GetPipelineTitle
(
PipelineId
)
SetCursor
(
Cursor
)
MozBrowserEvent
(
PipelineId
SubpageId
MozBrowserEvent
)
ChangeRunningAnimationsState
(
PipelineId
AnimationState
)
TickAnimation
(
PipelineId
)
GetRootPipeline
(
Sender
<
Option
<
PipelineId
>
>
)
Focus
(
PipelineId
)
GetClipboardContents
(
Sender
<
String
>
)
WebDriverCommand
(
WebDriverCommandMsg
)
ViewportConstrained
(
PipelineId
ViewportConstraints
)
IsReadyToSaveImage
(
HashMap
<
PipelineId
Epoch
>
)
RemoveIFrame
(
PipelineId
SubpageId
)
}
#
[
derive
(
Clone
Eq
PartialEq
)
]
pub
enum
AnimationState
{
AnimationsPresent
AnimationCallbacksPresent
NoAnimationsPresent
NoAnimationCallbacksPresent
}
pub
enum
MozBrowserEvent
{
AsyncScroll
Close
ContextMenu
Error
IconChange
LoadEnd
LoadStart
LocationChange
(
String
)
OpenWindow
SecurityChange
ShowModalPrompt
TitleChange
(
String
)
UsernameAndPasswordRequired
OpenSearch
}
impl
MozBrowserEvent
{
pub
fn
name
(
&
self
)
-
>
&
'
static
str
{
match
*
self
{
MozBrowserEvent
:
:
AsyncScroll
=
>
"
mozbrowserasyncscroll
"
MozBrowserEvent
:
:
Close
=
>
"
mozbrowserclose
"
MozBrowserEvent
:
:
ContextMenu
=
>
"
mozbrowsercontextmenu
"
MozBrowserEvent
:
:
Error
=
>
"
mozbrowsererror
"
MozBrowserEvent
:
:
IconChange
=
>
"
mozbrowsericonchange
"
MozBrowserEvent
:
:
LoadEnd
=
>
"
mozbrowserloadend
"
MozBrowserEvent
:
:
LoadStart
=
>
"
mozbrowserloadstart
"
MozBrowserEvent
:
:
LocationChange
(
_
)
=
>
"
mozbrowserlocationchange
"
MozBrowserEvent
:
:
OpenWindow
=
>
"
mozbrowseropenwindow
"
MozBrowserEvent
:
:
SecurityChange
=
>
"
mozbrowsersecuritychange
"
MozBrowserEvent
:
:
ShowModalPrompt
=
>
"
mozbrowsershowmodalprompt
"
MozBrowserEvent
:
:
TitleChange
(
_
)
=
>
"
mozbrowsertitlechange
"
MozBrowserEvent
:
:
UsernameAndPasswordRequired
=
>
"
mozbrowserusernameandpasswordrequired
"
MozBrowserEvent
:
:
OpenSearch
=
>
"
mozbrowseropensearch
"
}
}
pub
fn
detail
(
&
self
)
-
>
Option
<
String
>
{
match
*
self
{
MozBrowserEvent
:
:
AsyncScroll
|
MozBrowserEvent
:
:
Close
|
MozBrowserEvent
:
:
ContextMenu
|
MozBrowserEvent
:
:
Error
|
MozBrowserEvent
:
:
IconChange
|
MozBrowserEvent
:
:
LoadEnd
|
MozBrowserEvent
:
:
LoadStart
|
MozBrowserEvent
:
:
OpenWindow
|
MozBrowserEvent
:
:
SecurityChange
|
MozBrowserEvent
:
:
ShowModalPrompt
|
MozBrowserEvent
:
:
UsernameAndPasswordRequired
|
MozBrowserEvent
:
:
OpenSearch
=
>
None
MozBrowserEvent
:
:
LocationChange
(
ref
new_location
)
=
>
Some
(
new_location
.
clone
(
)
)
MozBrowserEvent
:
:
TitleChange
(
ref
new_title
)
=
>
Some
(
new_title
.
clone
(
)
)
}
}
}
pub
enum
WebDriverCommandMsg
{
LoadUrl
(
PipelineId
LoadData
Sender
<
LoadComplete
>
)
ScriptCommand
(
PipelineId
WebDriverScriptCommand
)
TakeScreenshot
(
Sender
<
Option
<
png
:
:
Image
>
>
)
}
#
[
derive
(
Clone
)
]
pub
struct
LoadData
{
pub
url
:
Url
pub
method
:
Method
pub
headers
:
Headers
pub
data
:
Option
<
Vec
<
u8
>
>
}
impl
LoadData
{
pub
fn
new
(
url
:
Url
)
-
>
LoadData
{
LoadData
{
url
:
url
method
:
Method
:
:
Get
headers
:
Headers
:
:
new
(
)
data
:
None
}
}
}
#
[
derive
(
Clone
PartialEq
Eq
Copy
Hash
Debug
)
]
pub
enum
NavigationDirection
{
Forward
Back
}
#
[
derive
(
Clone
PartialEq
Eq
Copy
Hash
Debug
)
]
pub
struct
FrameId
(
pub
u32
)
;
#
[
derive
(
Clone
PartialEq
Eq
Copy
Hash
Debug
)
]
pub
struct
WorkerId
(
pub
u32
)
;
#
[
derive
(
Clone
PartialEq
Eq
Copy
Hash
Debug
)
]
pub
struct
PipelineId
(
pub
u32
)
;
#
[
derive
(
Clone
PartialEq
Eq
Copy
Hash
Debug
)
]
pub
struct
SubpageId
(
pub
u32
)
;
#
[
derive
(
Copy
Clone
Debug
)
]
pub
enum
PipelineExitType
{
PipelineOnly
Complete
}
