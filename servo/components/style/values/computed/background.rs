use
std
:
:
fmt
:
:
{
self
Write
}
;
use
style_traits
:
:
{
CssWriter
ToCss
}
;
use
values
:
:
computed
:
:
length
:
:
NonNegativeLengthOrPercentageOrAuto
;
use
values
:
:
computed
:
:
{
Context
ToComputedValue
}
;
use
values
:
:
generics
:
:
background
:
:
BackgroundSize
as
GenericBackgroundSize
;
use
values
:
:
specified
:
:
background
:
:
BackgroundRepeat
as
SpecifiedBackgroundRepeat
;
use
values
:
:
specified
:
:
background
:
:
BackgroundRepeatKeyword
;
pub
type
BackgroundSize
=
GenericBackgroundSize
<
NonNegativeLengthOrPercentageOrAuto
>
;
impl
BackgroundSize
{
pub
fn
auto
(
)
-
>
Self
{
GenericBackgroundSize
:
:
Explicit
{
width
:
NonNegativeLengthOrPercentageOrAuto
:
:
auto
(
)
height
:
NonNegativeLengthOrPercentageOrAuto
:
:
auto
(
)
}
}
}
#
[
derive
(
Clone
Debug
MallocSizeOf
PartialEq
)
]
pub
struct
BackgroundRepeat
(
pub
BackgroundRepeatKeyword
pub
BackgroundRepeatKeyword
)
;
impl
BackgroundRepeat
{
pub
fn
repeat
(
)
-
>
Self
{
BackgroundRepeat
(
BackgroundRepeatKeyword
:
:
Repeat
BackgroundRepeatKeyword
:
:
Repeat
)
}
}
impl
ToCss
for
BackgroundRepeat
{
fn
to_css
<
W
>
(
&
self
dest
:
&
mut
CssWriter
<
W
>
)
-
>
fmt
:
:
Result
where
W
:
Write
{
match
(
self
.
0
self
.
1
)
{
(
BackgroundRepeatKeyword
:
:
Repeat
BackgroundRepeatKeyword
:
:
NoRepeat
)
=
>
{
dest
.
write_str
(
"
repeat
-
x
"
)
}
(
BackgroundRepeatKeyword
:
:
NoRepeat
BackgroundRepeatKeyword
:
:
Repeat
)
=
>
{
dest
.
write_str
(
"
repeat
-
y
"
)
}
(
horizontal
vertical
)
=
>
{
horizontal
.
to_css
(
dest
)
?
;
if
horizontal
!
=
vertical
{
dest
.
write_str
(
"
"
)
?
;
vertical
.
to_css
(
dest
)
?
;
}
Ok
(
(
)
)
}
}
}
}
impl
ToComputedValue
for
SpecifiedBackgroundRepeat
{
type
ComputedValue
=
BackgroundRepeat
;
#
[
inline
]
fn
to_computed_value
(
&
self
_
:
&
Context
)
-
>
Self
:
:
ComputedValue
{
match
*
self
{
SpecifiedBackgroundRepeat
:
:
RepeatX
=
>
BackgroundRepeat
(
BackgroundRepeatKeyword
:
:
Repeat
BackgroundRepeatKeyword
:
:
NoRepeat
)
SpecifiedBackgroundRepeat
:
:
RepeatY
=
>
BackgroundRepeat
(
BackgroundRepeatKeyword
:
:
NoRepeat
BackgroundRepeatKeyword
:
:
Repeat
)
SpecifiedBackgroundRepeat
:
:
Keywords
(
horizontal
vertical
)
=
>
{
BackgroundRepeat
(
horizontal
vertical
.
unwrap_or
(
horizontal
)
)
}
}
}
#
[
inline
]
fn
from_computed_value
(
computed
:
&
Self
:
:
ComputedValue
)
-
>
Self
{
match
(
computed
.
0
computed
.
1
)
{
(
BackgroundRepeatKeyword
:
:
Repeat
BackgroundRepeatKeyword
:
:
NoRepeat
)
=
>
{
SpecifiedBackgroundRepeat
:
:
RepeatX
}
(
BackgroundRepeatKeyword
:
:
NoRepeat
BackgroundRepeatKeyword
:
:
Repeat
)
=
>
{
SpecifiedBackgroundRepeat
:
:
RepeatY
}
(
horizontal
vertical
)
=
>
{
SpecifiedBackgroundRepeat
:
:
Keywords
(
horizontal
Some
(
vertical
)
)
}
}
}
}
