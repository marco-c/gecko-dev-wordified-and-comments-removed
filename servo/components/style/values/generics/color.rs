#
[
derive
(
Clone
Copy
Debug
MallocSizeOf
PartialEq
ToAnimatedValue
ToShmem
)
]
#
[
repr
(
C
)
]
pub
struct
ComplexColorRatios
{
pub
bg
:
f32
pub
fg
:
f32
}
impl
ComplexColorRatios
{
pub
const
NUMERIC
:
ComplexColorRatios
=
ComplexColorRatios
{
bg
:
1
.
fg
:
0
.
}
;
pub
const
CURRENT_COLOR
:
ComplexColorRatios
=
ComplexColorRatios
{
bg
:
0
.
fg
:
1
.
}
;
}
#
[
derive
(
Clone
Copy
Debug
MallocSizeOf
PartialEq
ToAnimatedValue
ToShmem
)
]
#
[
repr
(
C
u8
)
]
pub
enum
GenericColor
<
RGBA
>
{
Numeric
(
RGBA
)
CurrentColor
Complex
{
color
:
RGBA
ratios
:
ComplexColorRatios
}
}
pub
use
self
:
:
GenericColor
as
Color
;
impl
<
RGBA
>
Color
<
RGBA
>
{
pub
fn
with_ratios
(
color
:
RGBA
ratios
:
ComplexColorRatios
)
-
>
Self
{
if
ratios
=
=
ComplexColorRatios
:
:
NUMERIC
{
Color
:
:
Numeric
(
color
)
}
else
if
ratios
=
=
ComplexColorRatios
:
:
CURRENT_COLOR
{
Color
:
:
CurrentColor
}
else
{
Color
:
:
Complex
{
color
ratios
}
}
}
pub
fn
rgba
(
color
:
RGBA
)
-
>
Self
{
Color
:
:
Numeric
(
color
)
}
pub
fn
currentcolor
(
)
-
>
Self
{
Color
:
:
CurrentColor
}
pub
fn
is_numeric
(
&
self
)
-
>
bool
{
matches
!
(
*
self
Color
:
:
Numeric
(
.
.
)
)
}
pub
fn
is_currentcolor
(
&
self
)
-
>
bool
{
matches
!
(
*
self
Color
:
:
CurrentColor
)
}
}
impl
<
RGBA
>
From
<
RGBA
>
for
Color
<
RGBA
>
{
fn
from
(
color
:
RGBA
)
-
>
Self
{
Self
:
:
rgba
(
color
)
}
}
#
[
derive
(
Animate
Clone
ComputeSquaredDistance
Copy
Debug
MallocSizeOf
PartialEq
Parse
SpecifiedValueInfo
ToAnimatedValue
ToAnimatedZero
ToComputedValue
ToCss
ToShmem
)
]
#
[
repr
(
C
u8
)
]
pub
enum
GenericColorOrAuto
<
C
>
{
Color
(
C
)
Auto
}
pub
use
self
:
:
GenericColorOrAuto
as
ColorOrAuto
;
