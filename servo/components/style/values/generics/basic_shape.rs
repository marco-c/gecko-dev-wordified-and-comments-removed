use
std
:
:
fmt
;
use
style_traits
:
:
{
HasViewportPercentage
ToCss
}
;
use
values
:
:
computed
:
:
ComputedValueAsSpecified
;
use
values
:
:
generics
:
:
border
:
:
BorderRadius
;
use
values
:
:
generics
:
:
position
:
:
Position
;
use
values
:
:
generics
:
:
rect
:
:
Rect
;
pub
type
ClippingShape
<
BasicShape
UrlShapeSource
>
=
ShapeSource
<
BasicShape
GeometryBox
UrlShapeSource
>
;
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Copy
Debug
PartialEq
ToCss
)
]
pub
enum
GeometryBox
{
FillBox
StrokeBox
ViewBox
ShapeBox
(
ShapeBox
)
}
impl
ComputedValueAsSpecified
for
GeometryBox
{
}
pub
type
FloatAreaShape
<
BasicShape
UrlShapeSource
>
=
ShapeSource
<
BasicShape
ShapeBox
UrlShapeSource
>
;
define_css_keyword_enum
!
(
ShapeBox
:
"
margin
-
box
"
=
>
MarginBox
"
border
-
box
"
=
>
BorderBox
"
padding
-
box
"
=
>
PaddingBox
"
content
-
box
"
=
>
ContentBox
)
;
add_impls_for_keyword_enum
!
(
ShapeBox
)
;
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Debug
PartialEq
ToComputedValue
ToCss
)
]
pub
enum
ShapeSource
<
BasicShape
ReferenceBox
UrlShapeSource
>
{
Url
(
UrlShapeSource
)
Shape
(
BasicShape
Option
<
ReferenceBox
>
)
Box
(
ReferenceBox
)
None
}
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Debug
PartialEq
ToComputedValue
ToCss
)
]
pub
enum
BasicShape
<
H
V
LengthOrPercentage
>
{
Inset
(
InsetRect
<
LengthOrPercentage
>
)
Circle
(
Circle
<
H
V
LengthOrPercentage
>
)
Ellipse
(
Ellipse
<
H
V
LengthOrPercentage
>
)
Polygon
(
Polygon
<
LengthOrPercentage
>
)
}
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Debug
PartialEq
ToComputedValue
)
]
pub
struct
InsetRect
<
LengthOrPercentage
>
{
pub
rect
:
Rect
<
LengthOrPercentage
>
pub
round
:
Option
<
BorderRadius
<
LengthOrPercentage
>
>
}
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Copy
Debug
PartialEq
ToComputedValue
)
]
pub
struct
Circle
<
H
V
LengthOrPercentage
>
{
pub
position
:
Position
<
H
V
>
pub
radius
:
ShapeRadius
<
LengthOrPercentage
>
}
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Copy
Debug
PartialEq
ToComputedValue
)
]
pub
struct
Ellipse
<
H
V
LengthOrPercentage
>
{
pub
position
:
Position
<
H
V
>
pub
semiaxis_x
:
ShapeRadius
<
LengthOrPercentage
>
pub
semiaxis_y
:
ShapeRadius
<
LengthOrPercentage
>
}
#
[
allow
(
missing_docs
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Copy
Debug
PartialEq
ToComputedValue
ToCss
)
]
pub
enum
ShapeRadius
<
LengthOrPercentage
>
{
Length
(
LengthOrPercentage
)
ClosestSide
FarthestSide
}
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
HeapSizeOf
)
)
]
#
[
derive
(
Clone
Debug
PartialEq
ToComputedValue
)
]
pub
struct
Polygon
<
LengthOrPercentage
>
{
pub
fill
:
FillRule
pub
coordinates
:
Vec
<
(
LengthOrPercentage
LengthOrPercentage
)
>
}
define_css_keyword_enum
!
(
FillRule
:
"
nonzero
"
=
>
NonZero
"
evenodd
"
=
>
EvenOdd
)
;
add_impls_for_keyword_enum
!
(
FillRule
)
;
impl
<
B
T
U
>
HasViewportPercentage
for
ShapeSource
<
B
T
U
>
{
#
[
inline
]
fn
has_viewport_percentage
(
&
self
)
-
>
bool
{
false
}
}
impl
<
L
>
ToCss
for
InsetRect
<
L
>
where
L
:
ToCss
+
PartialEq
{
fn
to_css
<
W
>
(
&
self
dest
:
&
mut
W
)
-
>
fmt
:
:
Result
where
W
:
fmt
:
:
Write
{
dest
.
write_str
(
"
inset
(
"
)
?
;
self
.
rect
.
to_css
(
dest
)
?
;
if
let
Some
(
ref
radius
)
=
self
.
round
{
dest
.
write_str
(
"
round
"
)
?
;
radius
.
to_css
(
dest
)
?
;
}
dest
.
write_str
(
"
)
"
)
}
}
impl
<
L
>
Default
for
ShapeRadius
<
L
>
{
#
[
inline
]
fn
default
(
)
-
>
Self
{
ShapeRadius
:
:
ClosestSide
}
}
impl
<
L
:
ToCss
>
ToCss
for
Polygon
<
L
>
{
fn
to_css
<
W
>
(
&
self
dest
:
&
mut
W
)
-
>
fmt
:
:
Result
where
W
:
fmt
:
:
Write
{
dest
.
write_str
(
"
polygon
(
"
)
?
;
if
self
.
fill
!
=
FillRule
:
:
default
(
)
{
self
.
fill
.
to_css
(
dest
)
?
;
dest
.
write_str
(
"
"
)
?
;
}
for
(
i
coord
)
in
self
.
coordinates
.
iter
(
)
.
enumerate
(
)
{
if
i
>
0
{
dest
.
write_str
(
"
"
)
?
;
}
coord
.
0
.
to_css
(
dest
)
?
;
dest
.
write_str
(
"
"
)
?
;
coord
.
1
.
to_css
(
dest
)
?
;
}
dest
.
write_str
(
"
)
"
)
}
}
impl
Default
for
FillRule
{
#
[
inline
]
fn
default
(
)
-
>
Self
{
FillRule
:
:
NonZero
}
}
