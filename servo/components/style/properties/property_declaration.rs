use
super
:
:
{
LonghandId
PropertyId
ShorthandId
}
;
use
crate
:
:
custom_properties
:
:
Name
;
use
crate
:
:
values
:
:
serialize_atom_name
;
use
std
:
:
{
borrow
:
:
Cow
fmt
:
:
{
self
Write
}
}
;
use
style_traits
:
:
{
CssWriter
ToCss
}
;
#
[
derive
(
Clone
Copy
Debug
PartialEq
)
]
#
[
cfg_attr
(
feature
=
"
servo
"
derive
(
MallocSizeOf
)
)
]
pub
enum
PropertyDeclarationId
<
'
a
>
{
Longhand
(
LonghandId
)
Custom
(
&
'
a
Name
)
}
impl
<
'
a
>
ToCss
for
PropertyDeclarationId
<
'
a
>
{
fn
to_css
<
W
>
(
&
self
dest
:
&
mut
CssWriter
<
W
>
)
-
>
fmt
:
:
Result
where
W
:
Write
{
match
*
self
{
PropertyDeclarationId
:
:
Longhand
(
id
)
=
>
dest
.
write_str
(
id
.
name
(
)
)
PropertyDeclarationId
:
:
Custom
(
ref
name
)
=
>
{
dest
.
write_str
(
"
-
-
"
)
?
;
serialize_atom_name
(
name
dest
)
}
}
}
}
impl
<
'
a
>
PropertyDeclarationId
<
'
a
>
{
pub
fn
is_or_is_longhand_of
(
&
self
other
:
&
PropertyId
)
-
>
bool
{
match
*
self
{
PropertyDeclarationId
:
:
Longhand
(
id
)
=
>
match
*
other
{
PropertyId
:
:
NonCustom
(
non_custom_id
)
=
>
id
.
is_or_is_longhand_of
(
non_custom_id
)
PropertyId
:
:
Custom
(
_
)
=
>
false
}
PropertyDeclarationId
:
:
Custom
(
name
)
=
>
{
matches
!
(
*
other
PropertyId
:
:
Custom
(
ref
other_name
)
if
name
=
=
other_name
)
}
}
}
pub
fn
is_longhand_of
(
&
self
shorthand
:
ShorthandId
)
-
>
bool
{
match
*
self
{
PropertyDeclarationId
:
:
Longhand
(
ref
id
)
=
>
id
.
is_longhand_of
(
shorthand
)
_
=
>
false
}
}
pub
fn
name
(
&
self
)
-
>
Cow
<
'
static
str
>
{
match
*
self
{
PropertyDeclarationId
:
:
Longhand
(
id
)
=
>
id
.
name
(
)
.
into
(
)
PropertyDeclarationId
:
:
Custom
(
name
)
=
>
{
let
mut
s
=
String
:
:
new
(
)
;
write
!
(
&
mut
s
"
-
-
{
}
"
name
)
.
unwrap
(
)
;
s
.
into
(
)
}
}
}
#
[
inline
]
pub
fn
as_longhand
(
&
self
)
-
>
Option
<
LonghandId
>
{
match
*
self
{
PropertyDeclarationId
:
:
Longhand
(
id
)
=
>
Some
(
id
)
_
=
>
None
}
}
}
