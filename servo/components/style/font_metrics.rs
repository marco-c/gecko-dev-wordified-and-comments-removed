#
!
[
deny
(
missing_docs
)
]
use
crate
:
:
values
:
:
computed
:
:
{
FontSize
Length
}
;
#
[
derive
(
Clone
Debug
PartialEq
)
]
pub
struct
FontMetrics
{
pub
x_height
:
Option
<
Length
>
pub
zero_advance_measure
:
Option
<
Length
>
pub
cap_height
:
Option
<
Length
>
pub
ic_width
:
Option
<
Length
>
pub
ascent
:
Length
pub
script_percent_scale_down
:
Option
<
f32
>
pub
script_script_percent_scale_down
:
Option
<
f32
>
}
impl
Default
for
FontMetrics
{
fn
default
(
)
-
>
Self
{
FontMetrics
{
x_height
:
None
zero_advance_measure
:
None
cap_height
:
None
ic_width
:
None
ascent
:
Length
:
:
new
(
0
.
0
)
script_percent_scale_down
:
None
script_script_percent_scale_down
:
None
}
}
}
impl
FontMetrics
{
pub
fn
x_height_or_default
(
&
self
reference_font_size
:
&
FontSize
)
-
>
Length
{
self
.
x_height
.
unwrap_or_else
(
|
|
reference_font_size
.
used_size
(
)
*
0
.
5
)
}
pub
fn
zero_advance_measure_or_default
(
&
self
reference_font_size
:
&
FontSize
upright
:
bool
)
-
>
Length
{
self
.
zero_advance_measure
.
unwrap_or_else
(
|
|
{
if
upright
{
reference_font_size
.
used_size
(
)
}
else
{
reference_font_size
.
used_size
(
)
*
0
.
5
}
}
)
}
pub
fn
cap_height_or_default
(
&
self
)
-
>
Length
{
self
.
cap_height
.
unwrap_or_else
(
|
|
self
.
ascent
)
}
pub
fn
ic_width_or_default
(
&
self
reference_font_size
:
&
FontSize
)
-
>
Length
{
self
.
ic_width
.
unwrap_or_else
(
|
|
reference_font_size
.
used_size
(
)
)
}
}
#
[
derive
(
Clone
Debug
PartialEq
)
]
pub
enum
FontMetricsOrientation
{
MatchContextPreferHorizontal
MatchContextPreferVertical
Horizontal
}
