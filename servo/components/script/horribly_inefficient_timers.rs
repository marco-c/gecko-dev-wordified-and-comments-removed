use
std
:
:
sync
:
:
mpsc
:
:
{
channel
Receiver
}
;
use
std
:
:
thread
:
:
{
spawn
sleep_ms
}
;
pub
fn
oneshot
(
duration_ms
:
u32
)
-
>
Receiver
<
(
)
>
{
let
(
tx
rx
)
=
channel
(
)
;
spawn
(
move
|
|
{
sleep_ms
(
duration_ms
)
;
let
_
=
tx
.
send
(
(
)
)
;
}
)
;
rx
}
pub
fn
periodic
(
duration_ms
:
u32
)
-
>
Receiver
<
(
)
>
{
let
(
tx
rx
)
=
channel
(
)
;
spawn
(
move
|
|
{
loop
{
sleep_ms
(
duration_ms
)
;
if
tx
.
send
(
(
)
)
.
is_err
(
)
{
break
}
}
}
)
;
rx
}
