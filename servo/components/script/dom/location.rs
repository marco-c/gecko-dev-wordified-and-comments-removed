use
dom
:
:
bindings
:
:
codegen
:
:
Bindings
:
:
LocationBinding
;
use
dom
:
:
bindings
:
:
codegen
:
:
Bindings
:
:
LocationBinding
:
:
LocationMethods
;
use
dom
:
:
bindings
:
:
global
:
:
GlobalRef
;
use
dom
:
:
bindings
:
:
js
:
:
{
JS
Root
}
;
use
dom
:
:
bindings
:
:
str
:
:
USVString
;
use
dom
:
:
bindings
:
:
utils
:
:
{
Reflector
reflect_dom_object
}
;
use
dom
:
:
urlhelper
:
:
UrlHelper
;
use
dom
:
:
window
:
:
Window
;
use
url
:
:
{
Url
UrlParser
}
;
use
util
:
:
str
:
:
DOMString
;
#
[
dom_struct
]
pub
struct
Location
{
reflector_
:
Reflector
window
:
JS
<
Window
>
}
impl
Location
{
fn
new_inherited
(
window
:
&
Window
)
-
>
Location
{
Location
{
reflector_
:
Reflector
:
:
new
(
)
window
:
JS
:
:
from_ref
(
window
)
}
}
pub
fn
new
(
window
:
&
Window
)
-
>
Root
<
Location
>
{
reflect_dom_object
(
box
Location
:
:
new_inherited
(
window
)
GlobalRef
:
:
Window
(
window
)
LocationBinding
:
:
Wrap
)
}
fn
get_url
(
&
self
)
-
>
Url
{
self
.
window
.
get_url
(
)
}
fn
set_url_component
(
&
self
value
:
USVString
setter
:
fn
(
&
mut
Url
USVString
)
)
{
let
mut
url
=
self
.
window
.
get_url
(
)
;
setter
(
&
mut
url
value
)
;
self
.
window
.
load_url
(
url
)
;
}
}
impl
LocationMethods
for
Location
{
fn
Assign
(
&
self
url
:
USVString
)
{
let
base_url
=
self
.
window
.
get_url
(
)
;
if
let
Ok
(
url
)
=
UrlParser
:
:
new
(
)
.
base_url
(
&
base_url
)
.
parse
(
&
url
.
0
)
{
self
.
window
.
load_url
(
url
)
;
}
}
fn
Reload
(
&
self
)
{
self
.
window
.
load_url
(
self
.
get_url
(
)
)
;
}
fn
Hash
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Hash
(
&
self
.
get_url
(
)
)
}
fn
SetHash
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetHash
)
;
}
fn
Host
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Host
(
&
self
.
get_url
(
)
)
}
fn
SetHost
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetHost
)
;
}
fn
Hostname
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Hostname
(
&
self
.
get_url
(
)
)
}
fn
SetHostname
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetHostname
)
;
}
fn
Href
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Href
(
&
self
.
get_url
(
)
)
}
fn
SetHref
(
&
self
value
:
USVString
)
{
if
let
Ok
(
url
)
=
UrlParser
:
:
new
(
)
.
base_url
(
&
self
.
window
.
get_url
(
)
)
.
parse
(
&
value
.
0
)
{
self
.
window
.
load_url
(
url
)
;
}
}
fn
Pathname
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Pathname
(
&
self
.
get_url
(
)
)
}
fn
SetPathname
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetPathname
)
;
}
fn
Port
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Port
(
&
self
.
get_url
(
)
)
}
fn
SetPort
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetPort
)
;
}
fn
Protocol
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Protocol
(
&
self
.
get_url
(
)
)
}
fn
SetProtocol
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetProtocol
)
;
}
fn
Stringifier
(
&
self
)
-
>
DOMString
{
self
.
Href
(
)
.
0
}
fn
Search
(
&
self
)
-
>
USVString
{
UrlHelper
:
:
Search
(
&
self
.
get_url
(
)
)
}
fn
SetSearch
(
&
self
value
:
USVString
)
{
self
.
set_url_component
(
value
UrlHelper
:
:
SetSearch
)
;
}
}
