use
dom
:
:
bindings
:
:
str
:
:
USVString
;
use
url
:
:
{
Url
SchemeData
}
;
use
std
:
:
borrow
:
:
ToOwned
;
use
std
:
:
fmt
:
:
Write
;
pub
struct
UrlHelper
;
impl
UrlHelper
{
pub
fn
Hash
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
match
url
.
fragment
{
None
=
>
"
"
.
to_owned
(
)
Some
(
ref
hash
)
if
hash
.
is_empty
(
)
=
>
"
"
.
to_owned
(
)
Some
(
ref
hash
)
=
>
format
!
(
"
#
{
}
"
hash
)
}
)
}
pub
fn
Host
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
match
url
.
scheme_data
{
SchemeData
:
:
NonRelative
(
.
.
)
=
>
"
"
.
to_owned
(
)
SchemeData
:
:
Relative
(
ref
scheme_data
)
=
>
{
let
mut
host
=
scheme_data
.
host
.
serialize
(
)
;
if
let
Some
(
port
)
=
scheme_data
.
port
{
write
!
(
host
"
:
{
}
"
port
)
.
unwrap
(
)
;
}
host
}
}
)
}
pub
fn
Hostname
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
url
.
serialize_host
(
)
.
unwrap_or_else
(
|
|
"
"
.
to_owned
(
)
)
)
}
pub
fn
Href
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
url
.
serialize
(
)
)
}
pub
fn
Password
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
url
.
password
(
)
.
unwrap_or
(
"
"
)
.
to_owned
(
)
)
}
pub
fn
Pathname
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
match
url
.
scheme_data
{
SchemeData
:
:
NonRelative
(
ref
scheme_data
)
=
>
scheme_data
.
clone
(
)
SchemeData
:
:
Relative
(
.
.
)
=
>
url
.
serialize_path
(
)
.
unwrap
(
)
}
)
}
pub
fn
Port
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
match
url
.
port
(
)
{
None
=
>
"
"
.
to_owned
(
)
Some
(
port
)
=
>
port
.
to_string
(
)
}
)
}
pub
fn
Protocol
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
format
!
(
"
{
}
:
"
url
.
scheme
.
clone
(
)
)
)
}
pub
fn
SameOrigin
(
urlA
:
&
Url
urlB
:
&
Url
)
-
>
bool
{
if
urlA
.
host
(
)
!
=
urlB
.
host
(
)
{
return
false
}
if
urlA
.
scheme
!
=
urlB
.
scheme
{
return
false
}
if
urlA
.
port
(
)
!
=
urlB
.
port
(
)
{
return
false
}
return
true
}
pub
fn
Search
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
match
url
.
query
{
None
=
>
"
"
.
to_owned
(
)
Some
(
ref
query
)
if
query
.
is_empty
(
)
=
>
"
"
.
to_owned
(
)
Some
(
ref
query
)
=
>
format
!
(
"
?
{
}
"
query
)
}
)
}
pub
fn
Username
(
url
:
&
Url
)
-
>
USVString
{
USVString
(
url
.
username
(
)
.
unwrap_or
(
"
"
)
.
to_owned
(
)
)
}
}
