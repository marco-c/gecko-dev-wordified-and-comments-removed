use
script_thread
:
:
{
CommonScriptMsg
MainThreadScriptMsg
ScriptChan
}
;
use
std
:
:
sync
:
:
mpsc
:
:
Sender
;
#
[
derive
(
JSTraceable
)
]
pub
struct
UserInteractionTaskSource
(
pub
Sender
<
MainThreadScriptMsg
>
)
;
impl
ScriptChan
for
UserInteractionTaskSource
{
fn
send
(
&
self
msg
:
CommonScriptMsg
)
-
>
Result
<
(
)
(
)
>
{
let
UserInteractionTaskSource
(
ref
chan
)
=
*
self
;
chan
.
send
(
MainThreadScriptMsg
:
:
Common
(
msg
)
)
.
map_err
(
|
_
|
(
)
)
}
fn
clone
(
&
self
)
-
>
Box
<
ScriptChan
+
Send
>
{
let
UserInteractionTaskSource
(
ref
chan
)
=
*
self
;
box
UserInteractionTaskSource
(
(
*
chan
)
.
clone
(
)
)
}
}
