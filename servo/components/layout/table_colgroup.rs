#
!
[
deny
(
unsafe_block
)
]
use
context
:
:
LayoutContext
;
use
flow
:
:
{
BaseFlow
TableColGroupFlowClass
FlowClass
Flow
}
;
use
fragment
:
:
{
Fragment
TableColumnFragment
}
;
use
layout_debug
;
use
model
:
:
{
MaybeAuto
}
;
use
wrapper
:
:
ThreadSafeLayoutNode
;
use
servo_util
:
:
geometry
:
:
Au
;
use
std
:
:
fmt
;
pub
struct
TableColGroupFlow
{
pub
base
:
BaseFlow
pub
fragment
:
Option
<
Fragment
>
pub
cols
:
Vec
<
Fragment
>
pub
inline_sizes
:
Vec
<
Au
>
}
impl
TableColGroupFlow
{
pub
fn
from_node_and_fragments
(
node
:
&
ThreadSafeLayoutNode
fragment
:
Fragment
fragments
:
Vec
<
Fragment
>
)
-
>
TableColGroupFlow
{
TableColGroupFlow
{
base
:
BaseFlow
:
:
new
(
(
*
node
)
.
clone
(
)
)
fragment
:
Some
(
fragment
)
cols
:
fragments
inline_sizes
:
vec
!
(
)
}
}
}
impl
Flow
for
TableColGroupFlow
{
fn
class
(
&
self
)
-
>
FlowClass
{
TableColGroupFlowClass
}
fn
as_table_colgroup
<
'
a
>
(
&
'
a
mut
self
)
-
>
&
'
a
mut
TableColGroupFlow
{
self
}
fn
bubble_inline_sizes
(
&
mut
self
_
:
&
LayoutContext
)
{
let
_scope
=
layout_debug_scope
!
(
"
table_colgroup
:
:
bubble_inline_sizes
{
:
s
}
"
self
.
base
.
debug_id
(
)
)
;
for
fragment
in
self
.
cols
.
iter
(
)
{
let
inline_size
=
MaybeAuto
:
:
from_style
(
fragment
.
style
(
)
.
content_inline_size
(
)
Au
:
:
new
(
0
)
)
.
specified_or_zero
(
)
;
let
span
:
int
=
match
fragment
.
specific
{
TableColumnFragment
(
col_fragment
)
=
>
col_fragment
.
span
.
unwrap_or
(
1
)
_
=
>
fail
!
(
"
Other
fragment
come
out
in
TableColGroupFlow
.
{
:
?
}
"
fragment
.
specific
)
}
;
for
_
in
range
(
0
span
)
{
self
.
inline_sizes
.
push
(
inline_size
)
;
}
}
}
fn
assign_inline_sizes
(
&
mut
self
_ctx
:
&
LayoutContext
)
{
}
fn
assign_block_size
(
&
mut
self
_ctx
:
&
LayoutContext
)
{
}
fn
update_late_computed_inline_position_if_necessary
(
&
mut
self
_
:
Au
)
{
}
fn
update_late_computed_block_position_if_necessary
(
&
mut
self
_
:
Au
)
{
}
}
impl
fmt
:
:
Show
for
TableColGroupFlow
{
fn
fmt
(
&
self
f
:
&
mut
fmt
:
:
Formatter
)
-
>
fmt
:
:
Result
{
match
self
.
fragment
{
Some
(
ref
rb
)
=
>
write
!
(
f
"
TableColGroupFlow
:
{
}
"
rb
)
None
=
>
write
!
(
f
"
TableColGroupFlow
"
)
}
}
}
