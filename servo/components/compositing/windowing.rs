use
compositor_thread
:
:
{
CompositorProxy
CompositorReceiver
}
;
use
euclid
:
:
{
Point2D
Size2D
}
;
use
euclid
:
:
point
:
:
TypedPoint2D
;
use
euclid
:
:
scale_factor
:
:
ScaleFactor
;
use
euclid
:
:
size
:
:
TypedSize2D
;
use
msg
:
:
constellation_msg
:
:
{
Key
KeyModifiers
KeyState
}
;
use
net_traits
:
:
net_error_list
:
:
NetError
;
use
script_traits
:
:
{
DevicePixel
MouseButton
TouchEventType
TouchId
TouchpadPressurePhase
}
;
use
servo_geometry
:
:
ScreenPx
;
use
servo_url
:
:
ServoUrl
;
use
std
:
:
fmt
:
:
{
Debug
Error
Formatter
}
;
use
style_traits
:
:
cursor
:
:
Cursor
;
use
webrender_traits
:
:
ScrollLocation
;
#
[
derive
(
Clone
)
]
pub
enum
MouseWindowEvent
{
Click
(
MouseButton
TypedPoint2D
<
f32
DevicePixel
>
)
MouseDown
(
MouseButton
TypedPoint2D
<
f32
DevicePixel
>
)
MouseUp
(
MouseButton
TypedPoint2D
<
f32
DevicePixel
>
)
}
#
[
derive
(
Clone
)
]
pub
enum
WindowNavigateMsg
{
Forward
Back
}
#
[
derive
(
Clone
)
]
pub
enum
WindowEvent
{
Idle
Refresh
InitializeCompositing
Resize
(
TypedSize2D
<
u32
DevicePixel
>
)
TouchpadPressure
(
TypedPoint2D
<
f32
DevicePixel
>
f32
TouchpadPressurePhase
)
Viewport
(
TypedPoint2D
<
u32
DevicePixel
>
TypedSize2D
<
u32
DevicePixel
>
)
LoadUrl
(
String
)
MouseWindowEventClass
(
MouseWindowEvent
)
MouseWindowMoveEventClass
(
TypedPoint2D
<
f32
DevicePixel
>
)
Touch
(
TouchEventType
TouchId
TypedPoint2D
<
f32
DevicePixel
>
)
Scroll
(
ScrollLocation
TypedPoint2D
<
i32
DevicePixel
>
TouchEventType
)
Zoom
(
f32
)
PinchZoom
(
f32
)
ResetZoom
Navigation
(
WindowNavigateMsg
)
Quit
KeyEvent
(
Option
<
char
>
Key
KeyState
KeyModifiers
)
Reload
}
impl
Debug
for
WindowEvent
{
fn
fmt
(
&
self
f
:
&
mut
Formatter
)
-
>
Result
<
(
)
Error
>
{
match
*
self
{
WindowEvent
:
:
Idle
=
>
write
!
(
f
"
Idle
"
)
WindowEvent
:
:
Refresh
=
>
write
!
(
f
"
Refresh
"
)
WindowEvent
:
:
InitializeCompositing
=
>
write
!
(
f
"
InitializeCompositing
"
)
WindowEvent
:
:
Resize
(
.
.
)
=
>
write
!
(
f
"
Resize
"
)
WindowEvent
:
:
TouchpadPressure
(
.
.
)
=
>
write
!
(
f
"
TouchpadPressure
"
)
WindowEvent
:
:
Viewport
(
.
.
)
=
>
write
!
(
f
"
Viewport
"
)
WindowEvent
:
:
KeyEvent
(
.
.
)
=
>
write
!
(
f
"
Key
"
)
WindowEvent
:
:
LoadUrl
(
.
.
)
=
>
write
!
(
f
"
LoadUrl
"
)
WindowEvent
:
:
MouseWindowEventClass
(
.
.
)
=
>
write
!
(
f
"
Mouse
"
)
WindowEvent
:
:
MouseWindowMoveEventClass
(
.
.
)
=
>
write
!
(
f
"
MouseMove
"
)
WindowEvent
:
:
Touch
(
.
.
)
=
>
write
!
(
f
"
Touch
"
)
WindowEvent
:
:
Scroll
(
.
.
)
=
>
write
!
(
f
"
Scroll
"
)
WindowEvent
:
:
Zoom
(
.
.
)
=
>
write
!
(
f
"
Zoom
"
)
WindowEvent
:
:
PinchZoom
(
.
.
)
=
>
write
!
(
f
"
PinchZoom
"
)
WindowEvent
:
:
ResetZoom
=
>
write
!
(
f
"
ResetZoom
"
)
WindowEvent
:
:
Navigation
(
.
.
)
=
>
write
!
(
f
"
Navigation
"
)
WindowEvent
:
:
Quit
=
>
write
!
(
f
"
Quit
"
)
WindowEvent
:
:
Reload
=
>
write
!
(
f
"
Reload
"
)
}
}
}
pub
trait
WindowMethods
{
fn
framebuffer_size
(
&
self
)
-
>
TypedSize2D
<
u32
DevicePixel
>
;
fn
size
(
&
self
)
-
>
TypedSize2D
<
f32
ScreenPx
>
;
fn
present
(
&
self
)
;
fn
client_window
(
&
self
)
-
>
(
Size2D
<
u32
>
Point2D
<
i32
>
)
;
fn
set_inner_size
(
&
self
size
:
Size2D
<
u32
>
)
;
fn
set_position
(
&
self
point
:
Point2D
<
i32
>
)
;
fn
set_fullscreen_state
(
&
self
state
:
bool
)
;
fn
set_page_title
(
&
self
title
:
Option
<
String
>
)
;
fn
set_page_url
(
&
self
url
:
ServoUrl
)
;
fn
status
(
&
self
Option
<
String
>
)
;
fn
load_start
(
&
self
back
:
bool
forward
:
bool
)
;
fn
load_end
(
&
self
back
:
bool
forward
:
bool
root
:
bool
)
;
fn
load_error
(
&
self
code
:
NetError
url
:
String
)
;
fn
head_parsed
(
&
self
)
;
fn
scale_factor
(
&
self
)
-
>
ScaleFactor
<
f32
ScreenPx
DevicePixel
>
;
fn
create_compositor_channel
(
&
self
)
-
>
(
Box
<
CompositorProxy
+
Send
>
Box
<
CompositorReceiver
>
)
;
fn
prepare_for_composite
(
&
self
width
:
usize
height
:
usize
)
-
>
bool
;
fn
set_cursor
(
&
self
cursor
:
Cursor
)
;
fn
handle_key
(
&
self
ch
:
Option
<
char
>
key
:
Key
mods
:
KeyModifiers
)
;
fn
supports_clipboard
(
&
self
)
-
>
bool
;
fn
set_favicon
(
&
self
url
:
ServoUrl
)
;
}
