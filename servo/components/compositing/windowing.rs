use
compositor_task
:
:
{
CompositorProxy
CompositorReceiver
}
;
use
geom
:
:
point
:
:
TypedPoint2D
;
use
geom
:
:
scale_factor
:
:
ScaleFactor
;
use
geom
:
:
size
:
:
TypedSize2D
;
use
layers
:
:
geometry
:
:
DevicePixel
;
use
layers
:
:
platform
:
:
surface
:
:
NativeGraphicsMetadata
;
use
servo_msg
:
:
compositor_msg
:
:
{
PaintState
ReadyState
}
;
use
servo_msg
:
:
constellation_msg
:
:
{
Key
KeyState
KeyModifiers
LoadData
}
;
use
servo_util
:
:
geometry
:
:
ScreenPx
;
use
std
:
:
fmt
:
:
{
FormatError
Formatter
Show
}
;
use
std
:
:
rc
:
:
Rc
;
pub
enum
MouseWindowEvent
{
MouseWindowClickEvent
(
uint
TypedPoint2D
<
DevicePixel
f32
>
)
MouseWindowMouseDownEvent
(
uint
TypedPoint2D
<
DevicePixel
f32
>
)
MouseWindowMouseUpEvent
(
uint
TypedPoint2D
<
DevicePixel
f32
>
)
}
pub
enum
WindowNavigateMsg
{
Forward
Back
}
pub
enum
WindowEvent
{
IdleWindowEvent
RefreshWindowEvent
InitializeCompositingWindowEvent
ResizeWindowEvent
(
TypedSize2D
<
DevicePixel
uint
>
)
LoadUrlWindowEvent
(
String
)
MouseWindowEventClass
(
MouseWindowEvent
)
MouseWindowMoveEventClass
(
TypedPoint2D
<
DevicePixel
f32
>
)
ScrollWindowEvent
(
TypedPoint2D
<
DevicePixel
f32
>
TypedPoint2D
<
DevicePixel
i32
>
)
ZoomWindowEvent
(
f32
)
PinchZoomWindowEvent
(
f32
)
NavigationWindowEvent
(
WindowNavigateMsg
)
QuitWindowEvent
KeyEvent
(
Key
KeyState
KeyModifiers
)
}
impl
Show
for
WindowEvent
{
fn
fmt
(
&
self
f
:
&
mut
Formatter
)
-
>
Result
<
(
)
FormatError
>
{
match
*
self
{
IdleWindowEvent
=
>
write
!
(
f
"
Idle
"
)
RefreshWindowEvent
=
>
write
!
(
f
"
Refresh
"
)
InitializeCompositingWindowEvent
=
>
write
!
(
f
"
InitializeCompositing
"
)
ResizeWindowEvent
(
.
.
)
=
>
write
!
(
f
"
Resize
"
)
KeyEvent
(
.
.
)
=
>
write
!
(
f
"
Key
"
)
LoadUrlWindowEvent
(
.
.
)
=
>
write
!
(
f
"
LoadUrl
"
)
MouseWindowEventClass
(
.
.
)
=
>
write
!
(
f
"
Mouse
"
)
MouseWindowMoveEventClass
(
.
.
)
=
>
write
!
(
f
"
MouseMove
"
)
ScrollWindowEvent
(
.
.
)
=
>
write
!
(
f
"
Scroll
"
)
ZoomWindowEvent
(
.
.
)
=
>
write
!
(
f
"
Zoom
"
)
PinchZoomWindowEvent
(
.
.
)
=
>
write
!
(
f
"
PinchZoom
"
)
NavigationWindowEvent
(
.
.
)
=
>
write
!
(
f
"
Navigation
"
)
QuitWindowEvent
=
>
write
!
(
f
"
Quit
"
)
}
}
}
pub
trait
WindowMethods
{
fn
framebuffer_size
(
&
self
)
-
>
TypedSize2D
<
DevicePixel
uint
>
;
fn
size
(
&
self
)
-
>
TypedSize2D
<
ScreenPx
f32
>
;
fn
present
(
&
self
)
;
fn
set_ready_state
(
&
self
ready_state
:
ReadyState
)
;
fn
set_paint_state
(
&
self
paint_state
:
PaintState
)
;
fn
set_page_title
(
&
self
title
:
Option
<
String
>
)
;
fn
set_page_load_data
(
&
self
load_data
:
LoadData
)
;
fn
load_end
(
&
self
)
;
fn
hidpi_factor
(
&
self
)
-
>
ScaleFactor
<
ScreenPx
DevicePixel
f32
>
;
fn
native_metadata
(
&
self
)
-
>
NativeGraphicsMetadata
;
fn
create_compositor_channel
(
_
:
&
Option
<
Rc
<
Self
>
>
)
-
>
(
Box
<
CompositorProxy
+
Send
>
Box
<
CompositorReceiver
>
)
;
fn
prepare_for_composite
(
&
self
)
-
>
bool
;
fn
handle_key
(
&
self
key
:
Key
mods
:
KeyModifiers
)
;
}
