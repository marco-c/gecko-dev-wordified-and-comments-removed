use
AnimationState
;
use
CompositorEvent
;
use
DocumentState
;
use
IFrameLoadInfo
;
use
IFrameLoadInfoWithData
;
use
LayoutControlMsg
;
use
LoadData
;
use
WorkerGlobalScopeInit
;
use
WorkerScriptLoadOrigin
;
use
canvas_traits
:
:
canvas
:
:
CanvasMsg
;
use
devtools_traits
:
:
{
ScriptToDevtoolsControlMsg
WorkerId
}
;
use
euclid
:
:
{
Point2D
Size2D
TypedSize2D
}
;
use
gfx_traits
:
:
Epoch
;
use
ipc_channel
:
:
ipc
:
:
{
IpcReceiver
IpcSender
}
;
use
msg
:
:
constellation_msg
:
:
{
BrowsingContextId
PipelineId
TraversalDirection
}
;
use
msg
:
:
constellation_msg
:
:
{
Key
KeyModifiers
KeyState
}
;
use
net_traits
:
:
CoreResourceMsg
;
use
net_traits
:
:
request
:
:
RequestInit
;
use
net_traits
:
:
storage_thread
:
:
StorageType
;
use
servo_url
:
:
ImmutableOrigin
;
use
servo_url
:
:
ServoUrl
;
use
style_traits
:
:
CSSPixel
;
use
style_traits
:
:
cursor
:
:
CursorKind
;
use
style_traits
:
:
viewport
:
:
ViewportConstraints
;
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
LayoutMsg
{
ChangeRunningAnimationsState
(
PipelineId
AnimationState
)
IFrameSizes
(
Vec
<
(
BrowsingContextId
TypedSize2D
<
f32
CSSPixel
>
)
>
)
PendingPaintMetric
(
PipelineId
Epoch
)
SetCursor
(
CursorKind
)
ViewportConstrained
(
PipelineId
ViewportConstraints
)
}
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
EventResult
{
DefaultAllowed
DefaultPrevented
}
#
[
derive
(
Clone
Debug
Deserialize
Serialize
)
]
pub
enum
LogEntry
{
Panic
(
String
String
)
Error
(
String
)
Warn
(
String
)
}
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
ScriptMsg
{
InitiateNavigateRequest
(
RequestInit
IpcReceiver
<
(
)
>
)
BroadcastStorageEvent
(
StorageType
ServoUrl
Option
<
String
>
Option
<
String
>
Option
<
String
>
)
ChangeRunningAnimationsState
(
AnimationState
)
CreateCanvasPaintThread
(
Size2D
<
i32
>
IpcSender
<
IpcSender
<
CanvasMsg
>
>
)
Focus
ForwardEvent
(
PipelineId
CompositorEvent
)
GetClipboardContents
(
IpcSender
<
String
>
)
GetBrowsingContextId
(
PipelineId
IpcSender
<
Option
<
BrowsingContextId
>
>
)
GetParentInfo
(
PipelineId
IpcSender
<
Option
<
PipelineId
>
>
)
HeadParsed
LoadComplete
LoadUrl
(
LoadData
bool
)
AbortLoadUrl
PostMessage
(
BrowsingContextId
Option
<
ImmutableOrigin
>
Vec
<
u8
>
)
TraverseHistory
(
TraversalDirection
)
JointSessionHistoryLength
(
IpcSender
<
u32
>
)
NewFavicon
(
ServoUrl
)
NodeStatus
(
Option
<
String
>
)
RemoveIFrame
(
BrowsingContextId
IpcSender
<
Vec
<
PipelineId
>
>
)
SetVisible
(
bool
)
VisibilityChangeComplete
(
bool
)
ScriptLoadedURLInIFrame
(
IFrameLoadInfoWithData
)
ScriptNewIFrame
(
IFrameLoadInfo
IpcSender
<
LayoutControlMsg
>
)
SetClipboardContents
(
String
)
ActivateDocument
SetDocumentState
(
DocumentState
)
SetFinalUrl
(
ServoUrl
)
Alert
(
String
IpcSender
<
bool
>
)
SetTitle
(
Option
<
String
>
)
SendKeyEvent
(
Option
<
char
>
Key
KeyState
KeyModifiers
)
GetClientWindow
(
IpcSender
<
(
Size2D
<
u32
>
Point2D
<
i32
>
)
>
)
MoveTo
(
Point2D
<
i32
>
)
ResizeTo
(
Size2D
<
u32
>
)
TouchEventProcessed
(
EventResult
)
LogEntry
(
Option
<
String
>
LogEntry
)
PipelineExited
ForwardDOMMessage
(
DOMMessage
ServoUrl
)
RegisterServiceWorker
(
ScopeThings
ServoUrl
)
SetFullscreenState
(
bool
)
GetScreenSize
(
IpcSender
<
(
Size2D
<
u32
>
)
>
)
GetScreenAvailSize
(
IpcSender
<
(
Size2D
<
u32
>
)
>
)
Exit
}
#
[
derive
(
Clone
Deserialize
Serialize
)
]
pub
struct
ScopeThings
{
pub
script_url
:
ServoUrl
pub
worker_load_origin
:
WorkerScriptLoadOrigin
pub
init
:
WorkerGlobalScopeInit
pub
devtools_chan
:
Option
<
IpcSender
<
ScriptToDevtoolsControlMsg
>
>
pub
worker_id
:
WorkerId
}
#
[
derive
(
Clone
Debug
Deserialize
Serialize
)
]
pub
struct
DOMMessage
(
pub
Vec
<
u8
>
)
;
pub
struct
SWManagerSenders
{
pub
swmanager_sender
:
IpcSender
<
SWManagerMsg
>
pub
resource_sender
:
IpcSender
<
CoreResourceMsg
>
}
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
ServiceWorkerMsg
{
RegisterServiceWorker
(
ScopeThings
ServoUrl
)
Timeout
(
ServoUrl
)
ForwardDOMMessage
(
DOMMessage
ServoUrl
)
Exit
}
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
SWManagerMsg
{
OwnSender
(
IpcSender
<
ServiceWorkerMsg
>
)
}
