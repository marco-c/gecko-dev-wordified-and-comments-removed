#
!
[
deny
(
missing_docs
)
]
extern
crate
devtools_traits
;
extern
crate
euclid
;
extern
crate
libc
;
extern
crate
msg
;
extern
crate
net_traits
;
extern
crate
util
;
extern
crate
url
;
use
devtools_traits
:
:
DevtoolsControlChan
;
use
libc
:
:
c_void
;
use
msg
:
:
constellation_msg
:
:
{
ConstellationChan
PipelineId
Failure
WindowSizeData
}
;
use
msg
:
:
constellation_msg
:
:
{
LoadData
SubpageId
Key
KeyState
KeyModifiers
}
;
use
msg
:
:
constellation_msg
:
:
{
MozBrowserEvent
PipelineExitType
}
;
use
msg
:
:
compositor_msg
:
:
ScriptListener
;
use
msg
:
:
webdriver_msg
:
:
WebDriverScriptCommand
;
use
net_traits
:
:
ResourceTask
;
use
net_traits
:
:
image_cache_task
:
:
ImageCacheTask
;
use
net_traits
:
:
storage_task
:
:
StorageTask
;
use
std
:
:
any
:
:
Any
;
use
std
:
:
sync
:
:
mpsc
:
:
{
Sender
Receiver
}
;
use
url
:
:
Url
;
use
euclid
:
:
point
:
:
Point2D
;
use
euclid
:
:
rect
:
:
Rect
;
#
[
allow
(
raw_pointer_derive
)
]
#
[
derive
(
Copy
Clone
)
]
pub
struct
UntrustedNodeAddress
(
pub
*
const
c_void
)
;
unsafe
impl
Send
for
UntrustedNodeAddress
{
}
pub
struct
NewLayoutInfo
{
pub
containing_pipeline_id
:
PipelineId
pub
new_pipeline_id
:
PipelineId
pub
subpage_id
:
SubpageId
pub
layout_chan
:
Box
<
Any
+
Send
>
pub
load_data
:
LoadData
}
pub
trait
StylesheetLoadResponder
{
fn
respond
(
self
:
Box
<
Self
>
)
;
}
#
[
derive
(
Copy
Clone
Debug
PartialEq
)
]
pub
enum
ScriptState
{
DocumentLoaded
DocumentLoading
}
pub
enum
ConstellationControlMsg
{
AttachLayout
(
NewLayoutInfo
)
Resize
(
PipelineId
WindowSizeData
)
ResizeInactive
(
PipelineId
WindowSizeData
)
ExitPipeline
(
PipelineId
PipelineExitType
)
SendEvent
(
PipelineId
CompositorEvent
)
ReflowComplete
(
PipelineId
u32
)
Viewport
(
PipelineId
Rect
<
f32
>
)
GetTitle
(
PipelineId
)
Freeze
(
PipelineId
)
Thaw
(
PipelineId
)
Navigate
(
PipelineId
SubpageId
LoadData
)
MozBrowserEvent
(
PipelineId
SubpageId
MozBrowserEvent
)
UpdateSubpageId
(
PipelineId
SubpageId
SubpageId
)
FocusIFrame
(
PipelineId
SubpageId
)
WebDriverScriptCommand
(
PipelineId
WebDriverScriptCommand
)
TickAllAnimations
(
PipelineId
)
StylesheetLoadComplete
(
PipelineId
Url
Box
<
StylesheetLoadResponder
+
Send
>
)
GetCurrentState
(
Sender
<
ScriptState
>
PipelineId
)
}
#
[
derive
(
Clone
Debug
)
]
pub
enum
MouseButton
{
Left
Middle
Right
}
pub
enum
CompositorEvent
{
ResizeEvent
(
WindowSizeData
)
ClickEvent
(
MouseButton
Point2D
<
f32
>
)
MouseDownEvent
(
MouseButton
Point2D
<
f32
>
)
MouseUpEvent
(
MouseButton
Point2D
<
f32
>
)
MouseMoveEvent
(
Point2D
<
f32
>
)
KeyEvent
(
Key
KeyState
KeyModifiers
)
}
pub
struct
OpaqueScriptLayoutChannel
(
pub
(
Box
<
Any
+
Send
>
Box
<
Any
+
Send
>
)
)
;
#
[
derive
(
Clone
)
]
pub
struct
ScriptControlChan
(
pub
Sender
<
ConstellationControlMsg
>
)
;
pub
trait
ScriptTaskFactory
{
fn
create
<
C
>
(
_phantom
:
Option
<
&
mut
Self
>
id
:
PipelineId
parent_info
:
Option
<
(
PipelineId
SubpageId
)
>
compositor
:
C
layout_chan
:
&
OpaqueScriptLayoutChannel
control_chan
:
ScriptControlChan
control_port
:
Receiver
<
ConstellationControlMsg
>
constellation_msg
:
ConstellationChan
failure_msg
:
Failure
resource_task
:
ResourceTask
storage_task
:
StorageTask
image_cache_task
:
ImageCacheTask
devtools_chan
:
Option
<
DevtoolsControlChan
>
window_size
:
Option
<
WindowSizeData
>
load_data
:
LoadData
)
where
C
:
ScriptListener
+
Send
;
fn
create_layout_channel
(
_phantom
:
Option
<
&
mut
Self
>
)
-
>
OpaqueScriptLayoutChannel
;
fn
clone_layout_channel
(
_phantom
:
Option
<
&
mut
Self
>
pair
:
&
OpaqueScriptLayoutChannel
)
-
>
Box
<
Any
+
Send
>
;
}
