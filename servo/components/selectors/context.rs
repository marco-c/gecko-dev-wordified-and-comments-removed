use
attr
:
:
CaseSensitivity
;
use
bloom
:
:
BloomFilter
;
#
[
derive
(
Debug
PartialEq
Copy
Clone
)
]
pub
enum
MatchingMode
{
Normal
ForStatelessPseudoElement
}
#
[
derive
(
PartialEq
Eq
Copy
Clone
Debug
)
]
pub
enum
VisitedHandlingMode
{
AllLinksUnvisited
AllLinksVisitedAndUnvisited
RelevantLinkVisited
}
#
[
derive
(
PartialEq
Eq
Copy
Clone
Hash
Debug
HeapSizeOf
)
]
pub
enum
QuirksMode
{
Quirks
LimitedQuirks
NoQuirks
}
impl
QuirksMode
{
#
[
inline
]
pub
fn
classes_and_ids_case_sensitivity
(
self
)
-
>
CaseSensitivity
{
match
self
{
QuirksMode
:
:
NoQuirks
|
QuirksMode
:
:
LimitedQuirks
=
>
CaseSensitivity
:
:
CaseSensitive
QuirksMode
:
:
Quirks
=
>
CaseSensitivity
:
:
AsciiCaseInsensitive
}
}
}
#
[
derive
(
Clone
)
]
pub
struct
MatchingContext
<
'
a
>
{
pub
matching_mode
:
MatchingMode
pub
bloom_filter
:
Option
<
&
'
a
BloomFilter
>
pub
visited_handling
:
VisitedHandlingMode
pub
relevant_link_found
:
bool
quirks_mode
:
QuirksMode
classes_and_ids_case_sensitivity
:
CaseSensitivity
}
impl
<
'
a
>
MatchingContext
<
'
a
>
{
pub
fn
new
(
matching_mode
:
MatchingMode
bloom_filter
:
Option
<
&
'
a
BloomFilter
>
quirks_mode
:
QuirksMode
)
-
>
Self
{
Self
{
matching_mode
:
matching_mode
bloom_filter
:
bloom_filter
visited_handling
:
VisitedHandlingMode
:
:
AllLinksUnvisited
relevant_link_found
:
false
quirks_mode
:
quirks_mode
classes_and_ids_case_sensitivity
:
quirks_mode
.
classes_and_ids_case_sensitivity
(
)
}
}
pub
fn
new_for_visited
(
matching_mode
:
MatchingMode
bloom_filter
:
Option
<
&
'
a
BloomFilter
>
visited_handling
:
VisitedHandlingMode
quirks_mode
:
QuirksMode
)
-
>
Self
{
Self
{
matching_mode
:
matching_mode
bloom_filter
:
bloom_filter
visited_handling
:
visited_handling
relevant_link_found
:
false
quirks_mode
:
quirks_mode
classes_and_ids_case_sensitivity
:
quirks_mode
.
classes_and_ids_case_sensitivity
(
)
}
}
#
[
inline
]
pub
fn
quirks_mode
(
&
self
)
-
>
QuirksMode
{
self
.
quirks_mode
}
#
[
inline
]
pub
fn
classes_and_ids_case_sensitivity
(
&
self
)
-
>
CaseSensitivity
{
self
.
classes_and_ids_case_sensitivity
}
}
