#
!
[
feature
(
custom_derive
plugin
)
]
#
!
[
plugin
(
serde_macros
)
]
extern
crate
euclid
;
extern
crate
gfx
;
extern
crate
ipc_channel
;
extern
crate
script_traits
;
extern
crate
msg
;
extern
crate
profile_traits
;
extern
crate
net_traits
;
extern
crate
serde
;
extern
crate
url
;
extern
crate
util
;
use
euclid
:
:
rect
:
:
Rect
;
use
gfx
:
:
font_cache_task
:
:
FontCacheTask
;
use
gfx
:
:
paint_task
:
:
PaintChan
;
use
ipc_channel
:
:
ipc
:
:
{
IpcReceiver
IpcSender
}
;
use
msg
:
:
compositor_msg
:
:
{
Epoch
LayerId
}
;
use
msg
:
:
constellation_msg
:
:
{
ConstellationChan
Failure
PipelineId
PipelineExitType
}
;
use
profile_traits
:
:
mem
;
use
profile_traits
:
:
time
;
use
net_traits
:
:
image_cache_task
:
:
ImageCacheTask
;
use
script_traits
:
:
{
ScriptControlChan
OpaqueScriptLayoutChannel
}
;
use
std
:
:
sync
:
:
mpsc
:
:
Sender
;
use
util
:
:
geometry
:
:
Au
;
use
url
:
:
Url
;
#
[
derive
(
Deserialize
Serialize
)
]
pub
enum
LayoutControlMsg
{
ExitNow
(
PipelineExitType
)
GetCurrentEpoch
(
IpcSender
<
Epoch
>
)
TickAnimations
SetVisibleRects
(
Vec
<
(
LayerId
Rect
<
Au
>
)
>
)
}
#
[
derive
(
Clone
Deserialize
Serialize
)
]
pub
struct
LayoutControlChan
(
pub
IpcSender
<
LayoutControlMsg
>
)
;
pub
trait
LayoutTaskFactory
{
fn
create
(
_phantom
:
Option
<
&
mut
Self
>
id
:
PipelineId
url
:
Url
is_iframe
:
bool
chan
:
OpaqueScriptLayoutChannel
pipeline_port
:
IpcReceiver
<
LayoutControlMsg
>
constellation_chan
:
ConstellationChan
failure_msg
:
Failure
script_chan
:
ScriptControlChan
paint_chan
:
PaintChan
image_cache_task
:
ImageCacheTask
font_cache_task
:
FontCacheTask
time_profiler_chan
:
time
:
:
ProfilerChan
mem_profiler_chan
:
mem
:
:
ProfilerChan
shutdown_chan
:
Sender
<
(
)
>
)
;
}
