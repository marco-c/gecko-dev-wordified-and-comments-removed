use
std
:
:
io
:
:
process
:
:
{
Command
ProcessExit
StdioContainer
}
;
use
std
:
:
os
;
fn
main
(
)
{
let
out_dir
=
os
:
:
getenv
(
"
OUT_DIR
"
)
.
unwrap
(
)
;
let
result
=
Command
:
:
new
(
"
make
"
)
.
args
(
&
[
"
-
f
"
"
makefile
.
cargo
"
]
)
.
stdout
(
StdioContainer
:
:
InheritFd
(
1
)
)
.
stderr
(
StdioContainer
:
:
InheritFd
(
2
)
)
.
status
(
)
.
unwrap
(
)
;
assert_eq
!
(
result
ProcessExit
:
:
ExitStatus
(
0
)
)
;
println
!
(
"
cargo
:
rustc
-
flags
=
-
L
native
=
{
}
"
out_dir
)
;
}
