#
ifndef
AOM_AOM_AOM_DECODER_H_
#
define
AOM_AOM_AOM_DECODER_H_
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
include
"
aom
/
aom_codec
.
h
"
#
include
"
aom
/
aom_frame_buffer
.
h
"
#
define
AOM_DECODER_ABI_VERSION
\
(
6
+
AOM_CODEC_ABI_VERSION
)
/
*
*
<
\
hideinitializer
*
/
#
define
AOM_CODEC_CAP_EXTERNAL_FRAME_BUFFER
0x200000
typedef
struct
aom_codec_stream_info
{
unsigned
int
w
;
unsigned
int
h
;
unsigned
int
is_kf
;
unsigned
int
number_spatial_layers
;
unsigned
int
number_temporal_layers
;
unsigned
int
is_annexb
;
}
aom_codec_stream_info_t
;
typedef
struct
aom_codec_dec_cfg
{
unsigned
int
threads
;
unsigned
int
w
;
unsigned
int
h
;
unsigned
int
allow_lowbitdepth
;
}
aom_codec_dec_cfg_t
;
aom_codec_err_t
aom_codec_dec_init_ver
(
aom_codec_ctx_t
*
ctx
aom_codec_iface_t
*
iface
const
aom_codec_dec_cfg_t
*
cfg
aom_codec_flags_t
flags
int
ver
)
;
#
define
aom_codec_dec_init
(
ctx
iface
cfg
flags
)
\
aom_codec_dec_init_ver
(
ctx
iface
cfg
flags
AOM_DECODER_ABI_VERSION
)
aom_codec_err_t
aom_codec_peek_stream_info
(
aom_codec_iface_t
*
iface
const
uint8_t
*
data
size_t
data_sz
aom_codec_stream_info_t
*
si
)
;
aom_codec_err_t
aom_codec_get_stream_info
(
aom_codec_ctx_t
*
ctx
aom_codec_stream_info_t
*
si
)
;
aom_codec_err_t
aom_codec_decode
(
aom_codec_ctx_t
*
ctx
const
uint8_t
*
data
size_t
data_sz
void
*
user_priv
)
;
aom_image_t
*
aom_codec_get_frame
(
aom_codec_ctx_t
*
ctx
aom_codec_iter_t
*
iter
)
;
aom_codec_err_t
aom_codec_set_frame_buffer_functions
(
aom_codec_ctx_t
*
ctx
aom_get_frame_buffer_cb_fn_t
cb_get
aom_release_frame_buffer_cb_fn_t
cb_release
void
*
cb_priv
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
