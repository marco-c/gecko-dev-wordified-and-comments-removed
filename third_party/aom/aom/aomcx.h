#
ifndef
AOM_AOMCX_H_
#
define
AOM_AOMCX_H_
#
include
"
.
/
aom
.
h
"
#
include
"
.
/
aom_encoder
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
extern
aom_codec_iface_t
aom_codec_av1_cx_algo
;
extern
aom_codec_iface_t
*
aom_codec_av1_cx
(
void
)
;
#
define
AOM_EFLAG_NO_REF_LAST
(
1
<
<
16
)
#
define
AOM_EFLAG_NO_REF_GF
(
1
<
<
17
)
#
define
AOM_EFLAG_NO_REF_ARF
(
1
<
<
21
)
#
define
AOM_EFLAG_NO_UPD_LAST
(
1
<
<
18
)
#
define
AOM_EFLAG_NO_UPD_GF
(
1
<
<
22
)
#
define
AOM_EFLAG_NO_UPD_ARF
(
1
<
<
23
)
#
define
AOM_EFLAG_FORCE_GF
(
1
<
<
19
)
#
define
AOM_EFLAG_FORCE_ARF
(
1
<
<
24
)
#
define
AOM_EFLAG_NO_UPD_ENTROPY
(
1
<
<
20
)
enum
aome_enc_control_id
{
AOME_USE_REFERENCE
=
7
AOME_SET_ROI_MAP
=
8
AOME_SET_ACTIVEMAP
AOME_SET_SCALEMODE
=
11
AOME_SET_CPUUSED
=
13
AOME_SET_ENABLEAUTOALTREF
AOME_SET_SHARPNESS
=
AOME_SET_ENABLEAUTOALTREF
+
2
AOME_SET_STATIC_THRESHOLD
AOME_GET_LAST_QUANTIZER
=
AOME_SET_STATIC_THRESHOLD
+
2
AOME_GET_LAST_QUANTIZER_64
AOME_SET_ARNR_MAXFRAMES
AOME_SET_ARNR_STRENGTH
AOME_SET_TUNING
=
AOME_SET_ARNR_STRENGTH
+
2
AOME_SET_CQ_LEVEL
AOME_SET_MAX_INTRA_BITRATE_PCT
AV1E_SET_MAX_INTER_BITRATE_PCT
=
AOME_SET_MAX_INTRA_BITRATE_PCT
+
2
AV1E_SET_GF_CBR_BOOST_PCT
AV1E_SET_LOSSLESS
=
AV1E_SET_GF_CBR_BOOST_PCT
+
2
AV1E_SET_TILE_COLUMNS
AV1E_SET_TILE_ROWS
AV1E_SET_FRAME_PARALLEL_DECODING
AV1E_SET_AQ_MODE
AV1E_SET_FRAME_PERIODIC_BOOST
AV1E_SET_NOISE_SENSITIVITY
AV1E_SET_TUNE_CONTENT
AV1E_SET_COLOR_SPACE
AV1E_SET_TRANSFER_FUNCTION
AV1E_SET_CHROMA_SAMPLE_POSITION
AV1E_SET_MIN_GF_INTERVAL
AV1E_SET_MAX_GF_INTERVAL
AV1E_GET_ACTIVEMAP
AV1E_SET_COLOR_RANGE
AV1E_SET_RENDER_SIZE
AV1E_SET_TARGET_LEVEL
AV1E_GET_LEVEL
AV1E_SET_SUPERBLOCK_SIZE
AOME_SET_ENABLEAUTOBWDREF
AV1E_SET_ENABLE_QM
AV1E_SET_QM_MIN
AV1E_SET_QM_MAX
AV1E_SET_ENABLE_DIST_8X8
AV1E_SET_NUM_TG
AV1E_SET_MTU
AV1E_SET_TILE_DEPENDENT_ROWS
AV1E_SET_ANS_WINDOW_SIZE_LOG2
AV1E_SET_DISABLE_TEMPMV
AV1E_SET_TILE_LOOPFILTER
AV1E_SET_DELTAQ_MODE
AV1E_SET_SINGLE_TILE_DECODING
AV1E_ENABLE_MOTION_VECTOR_UNIT_TEST
}
;
typedef
enum
aom_scaling_mode_1d
{
AOME_NORMAL
=
0
AOME_FOURFIVE
=
1
AOME_THREEFIVE
=
2
AOME_ONETWO
=
3
}
AOM_SCALING_MODE
;
#
define
AOM_MAX_SEGMENTS
8
typedef
struct
aom_roi_map
{
unsigned
char
*
roi_map
;
unsigned
int
rows
;
unsigned
int
cols
;
int
delta_q
[
AOM_MAX_SEGMENTS
]
;
int
delta_lf
[
AOM_MAX_SEGMENTS
]
;
unsigned
int
static_threshold
[
AOM_MAX_SEGMENTS
]
;
}
aom_roi_map_t
;
typedef
struct
aom_active_map
{
unsigned
char
*
active_map
;
unsigned
int
rows
;
unsigned
int
cols
;
}
aom_active_map_t
;
typedef
struct
aom_scaling_mode
{
AOM_SCALING_MODE
h_scaling_mode
;
AOM_SCALING_MODE
v_scaling_mode
;
}
aom_scaling_mode_t
;
typedef
enum
{
AOM_CONTENT_DEFAULT
AOM_CONTENT_SCREEN
AOM_CONTENT_INVALID
}
aom_tune_content
;
typedef
enum
{
AOM_TUNE_PSNR
AOM_TUNE_SSIM
#
ifdef
CONFIG_DIST_8X8
AOM_TUNE_CDEF_DIST
AOM_TUNE_DAALA_DIST
#
endif
}
aom_tune_metric
;
AOM_CTRL_USE_TYPE
(
AOME_USE_REFERENCE
int
)
#
define
AOM_CTRL_AOME_USE_REFERENCE
AOM_CTRL_USE_TYPE
(
AOME_SET_ROI_MAP
aom_roi_map_t
*
)
#
define
AOM_CTRL_AOME_SET_ROI_MAP
AOM_CTRL_USE_TYPE
(
AOME_SET_ACTIVEMAP
aom_active_map_t
*
)
#
define
AOM_CTRL_AOME_SET_ACTIVEMAP
AOM_CTRL_USE_TYPE
(
AOME_SET_SCALEMODE
aom_scaling_mode_t
*
)
#
define
AOM_CTRL_AOME_SET_SCALEMODE
AOM_CTRL_USE_TYPE
(
AOME_SET_CPUUSED
int
)
#
define
AOM_CTRL_AOME_SET_CPUUSED
AOM_CTRL_USE_TYPE
(
AOME_SET_ENABLEAUTOALTREF
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_ENABLEAUTOALTREF
AOM_CTRL_USE_TYPE
(
AOME_SET_ENABLEAUTOBWDREF
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_ENABLEAUTOBWDREF
AOM_CTRL_USE_TYPE
(
AOME_SET_SHARPNESS
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_SHARPNESS
AOM_CTRL_USE_TYPE
(
AOME_SET_STATIC_THRESHOLD
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_STATIC_THRESHOLD
AOM_CTRL_USE_TYPE
(
AOME_SET_ARNR_MAXFRAMES
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_ARNR_MAXFRAMES
AOM_CTRL_USE_TYPE
(
AOME_SET_ARNR_STRENGTH
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_ARNR_STRENGTH
AOM_CTRL_USE_TYPE
(
AOME_SET_TUNING
int
)
#
define
AOM_CTRL_AOME_SET_TUNING
AOM_CTRL_USE_TYPE
(
AOME_SET_CQ_LEVEL
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_CQ_LEVEL
AOM_CTRL_USE_TYPE
(
AV1E_SET_TILE_COLUMNS
int
)
#
define
AOM_CTRL_AV1E_SET_TILE_COLUMNS
AOM_CTRL_USE_TYPE
(
AV1E_SET_TILE_ROWS
int
)
#
define
AOM_CTRL_AV1E_SET_TILE_ROWS
AOM_CTRL_USE_TYPE
(
AV1E_SET_TILE_DEPENDENT_ROWS
int
)
#
define
AOM_CTRL_AV1E_SET_TILE_DEPENDENT_ROWS
AOM_CTRL_USE_TYPE
(
AV1E_SET_TILE_LOOPFILTER
int
)
#
define
AOM_CTRL_AV1E_SET_TILE_LOOPFILTER
AOM_CTRL_USE_TYPE
(
AOME_GET_LAST_QUANTIZER
int
*
)
#
define
AOM_CTRL_AOME_GET_LAST_QUANTIZER
AOM_CTRL_USE_TYPE
(
AOME_GET_LAST_QUANTIZER_64
int
*
)
#
define
AOM_CTRL_AOME_GET_LAST_QUANTIZER_64
AOM_CTRL_USE_TYPE
(
AOME_SET_MAX_INTRA_BITRATE_PCT
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_MAX_INTRA_BITRATE_PCT
AOM_CTRL_USE_TYPE
(
AOME_SET_MAX_INTER_BITRATE_PCT
unsigned
int
)
#
define
AOM_CTRL_AOME_SET_MAX_INTER_BITRATE_PCT
AOM_CTRL_USE_TYPE
(
AV1E_SET_GF_CBR_BOOST_PCT
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_GF_CBR_BOOST_PCT
AOM_CTRL_USE_TYPE
(
AV1E_SET_LOSSLESS
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_LOSSLESS
AOM_CTRL_USE_TYPE
(
AV1E_SET_ENABLE_QM
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_ENABLE_QM
AOM_CTRL_USE_TYPE
(
AV1E_SET_ENABLE_DIST_8X8
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_ENABLE_DIST_8X8
AOM_CTRL_USE_TYPE
(
AV1E_SET_QM_MIN
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_QM_MIN
AOM_CTRL_USE_TYPE
(
AV1E_SET_QM_MAX
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_QM_MAX
AOM_CTRL_USE_TYPE
(
AV1E_SET_NUM_TG
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_NUM_TG
AOM_CTRL_USE_TYPE
(
AV1E_SET_MTU
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_MTU
AOM_CTRL_USE_TYPE
(
AV1E_SET_DISABLE_TEMPMV
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_DISABLE_TEMPMV
AOM_CTRL_USE_TYPE
(
AV1E_SET_FRAME_PARALLEL_DECODING
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_FRAME_PARALLEL_DECODING
AOM_CTRL_USE_TYPE
(
AV1E_SET_AQ_MODE
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_AQ_MODE
AOM_CTRL_USE_TYPE
(
AV1E_SET_DELTAQ_MODE
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_DELTAQ_MODE
AOM_CTRL_USE_TYPE
(
AV1E_SET_FRAME_PERIODIC_BOOST
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_FRAME_PERIODIC_BOOST
AOM_CTRL_USE_TYPE
(
AV1E_SET_NOISE_SENSITIVITY
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_NOISE_SENSITIVITY
AOM_CTRL_USE_TYPE
(
AV1E_SET_TUNE_CONTENT
int
)
#
define
AOM_CTRL_AV1E_SET_TUNE_CONTENT
AOM_CTRL_USE_TYPE
(
AV1E_SET_COLOR_SPACE
int
)
#
define
AOM_CTRL_AV1E_SET_COLOR_SPACE
AOM_CTRL_USE_TYPE
(
AV1E_SET_TRANSFER_FUNCTION
int
)
#
define
AOM_CTRL_AV1E_SET_TRANSFER_FUNCTION
AOM_CTRL_USE_TYPE
(
AV1E_SET_CHROMA_SAMPLE_POSITION
int
)
#
define
AOM_CTRL_AV1E_SET_CHROMA_SAMPLE_POSITION
AOM_CTRL_USE_TYPE
(
AV1E_SET_MIN_GF_INTERVAL
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_MIN_GF_INTERVAL
AOM_CTRL_USE_TYPE
(
AV1E_SET_MAX_GF_INTERVAL
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_MAX_GF_INTERVAL
AOM_CTRL_USE_TYPE
(
AV1E_GET_ACTIVEMAP
aom_active_map_t
*
)
#
define
AOM_CTRL_AV1E_GET_ACTIVEMAP
AOM_CTRL_USE_TYPE
(
AV1E_SET_COLOR_RANGE
int
)
#
define
AOM_CTRL_AV1E_SET_COLOR_RANGE
#
define
AOM_CTRL_AV1E_SET_RENDER_SIZE
AOM_CTRL_USE_TYPE
(
AV1E_SET_RENDER_SIZE
int
*
)
AOM_CTRL_USE_TYPE
(
AV1E_SET_SUPERBLOCK_SIZE
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_SUPERBLOCK_SIZE
AOM_CTRL_USE_TYPE
(
AV1E_SET_TARGET_LEVEL
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_TARGET_LEVEL
AOM_CTRL_USE_TYPE
(
AV1E_GET_LEVEL
int
*
)
#
define
AOM_CTRL_AV1E_GET_LEVEL
AOM_CTRL_USE_TYPE
(
AV1E_SET_ANS_WINDOW_SIZE_LOG2
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_ANS_WINDOW_SIZE_LOG2
AOM_CTRL_USE_TYPE
(
AV1E_SET_SINGLE_TILE_DECODING
unsigned
int
)
#
define
AOM_CTRL_AV1E_SET_SINGLE_TILE_DECODING
AOM_CTRL_USE_TYPE
(
AV1E_ENABLE_MOTION_VECTOR_UNIT_TEST
unsigned
int
)
#
define
AOM_CTRL_AV1E_ENABLE_MOTION_VECTOR_UNIT_TEST
#
ifdef
__cplusplus
}
#
endif
#
endif
