#
ifndef
AOM_AOM_DSP_SSIM_H_
#
define
AOM_AOM_DSP_SSIM_H_
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
include
"
config
/
aom_config
.
h
"
#
if
CONFIG_INTERNAL_STATS
#
include
"
aom_scale
/
yv12config
.
h
"
typedef
struct
{
uint32_t
sum_s
;
uint32_t
sum_r
;
uint32_t
sum_sq_s
;
uint32_t
sum_sq_r
;
uint32_t
sum_sxr
;
double
ssim
;
}
Ssimv
;
typedef
struct
{
double
ssimc
;
double
ssim
;
double
ssim2
;
double
dssim
;
double
dssimd
;
double
ssimcd
;
}
Metrics
;
double
aom_get_ssim_metrics
(
uint8_t
*
img1
int
img1_pitch
uint8_t
*
img2
int
img2_pitch
int
width
int
height
Ssimv
*
sv2
Metrics
*
m
int
do_inconsistency
)
;
void
aom_lowbd_calc_ssim
(
const
YV12_BUFFER_CONFIG
*
source
const
YV12_BUFFER_CONFIG
*
dest
double
*
weight
double
*
fast_ssim
)
;
double
aom_calc_fastssim
(
const
YV12_BUFFER_CONFIG
*
source
const
YV12_BUFFER_CONFIG
*
dest
double
*
ssim_y
double
*
ssim_u
double
*
ssim_v
uint32_t
bd
uint32_t
in_bd
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
void
aom_highbd_calc_ssim
(
const
YV12_BUFFER_CONFIG
*
source
const
YV12_BUFFER_CONFIG
*
dest
double
*
weight
uint32_t
bd
uint32_t
in_bd
double
*
fast_ssim
)
;
#
endif
void
aom_calc_ssim
(
const
YV12_BUFFER_CONFIG
*
orig
const
YV12_BUFFER_CONFIG
*
recon
const
uint32_t
bit_depth
const
uint32_t
in_bit_depth
int
is_hbd
double
*
weight
double
*
frame_ssim2
)
;
#
endif
double
aom_ssim2
(
const
uint8_t
*
img1
const
uint8_t
*
img2
int
stride_img1
int
stride_img2
int
width
int
height
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
double
aom_highbd_ssim2
(
const
uint8_t
*
img1
const
uint8_t
*
img2
int
stride_img1
int
stride_img2
int
width
int
height
uint32_t
bd
uint32_t
shift
)
;
#
endif
#
ifdef
__cplusplus
}
#
endif
#
endif
