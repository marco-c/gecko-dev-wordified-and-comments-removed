#
ifndef
AOM_AOM_DSP_FLOW_ESTIMATION_DISFLOW_H_
#
define
AOM_AOM_DSP_FLOW_ESTIMATION_DISFLOW_H_
#
include
<
stdbool
.
h
>
#
include
"
aom_dsp
/
flow_estimation
/
flow_estimation
.
h
"
#
include
"
aom_scale
/
yv12config
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
define
DISFLOW_PYRAMID_LEVELS
12
#
define
DISFLOW_PATCH_SIZE_LOG2
3
#
define
DISFLOW_PATCH_SIZE
(
1
<
<
DISFLOW_PATCH_SIZE_LOG2
)
#
define
DISFLOW_PATCH_CENTER
(
(
DISFLOW_PATCH_SIZE
/
2
)
-
1
)
#
define
DISFLOW_DERIV_SCALE_LOG2
3
#
define
DISFLOW_DERIV_SCALE
(
1
<
<
DISFLOW_DERIV_SCALE_LOG2
)
#
define
DISFLOW_STEP_SIZE
1
.
0
#
define
DISFLOW_STEP_SIZE_THRESOLD
(
1
.
/
8
.
)
#
define
DISFLOW_MAX_ITR
4
#
define
DISFLOW_INTERP_BITS
14
typedef
struct
{
double
*
buf0
;
double
*
u
;
double
*
v
;
int
width
;
int
height
;
int
stride
;
}
FlowField
;
bool
av1_compute_global_motion_disflow
(
TransformationType
type
YV12_BUFFER_CONFIG
*
src
YV12_BUFFER_CONFIG
*
ref
int
bit_depth
int
downsample_level
MotionModel
*
motion_models
int
num_motion_models
bool
*
mem_alloc_failed
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
