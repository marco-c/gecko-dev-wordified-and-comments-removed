#
include
"
aom_mem
/
aom_mem
.
h
"
#
include
<
cstdio
>
#
include
<
cstddef
>
#
include
"
third_party
/
googletest
/
src
/
googletest
/
include
/
gtest
/
gtest
.
h
"
TEST
(
AomMemTest
Overflow
)
{
ASSERT_EQ
(
aom_malloc
(
SIZE_MAX
)
nullptr
)
;
ASSERT_EQ
(
aom_calloc
(
1
SIZE_MAX
)
nullptr
)
;
ASSERT_EQ
(
aom_calloc
(
32
SIZE_MAX
/
32
)
nullptr
)
;
ASSERT_EQ
(
aom_calloc
(
SIZE_MAX
SIZE_MAX
)
nullptr
)
;
ASSERT_EQ
(
aom_memalign
(
1
SIZE_MAX
)
nullptr
)
;
ASSERT_EQ
(
aom_memalign
(
64
SIZE_MAX
)
nullptr
)
;
ASSERT_EQ
(
aom_memalign
(
64
SIZE_MAX
-
64
)
nullptr
)
;
ASSERT_EQ
(
aom_memalign
(
64
SIZE_MAX
-
64
-
sizeof
(
size_t
)
+
2
)
nullptr
)
;
}
TEST
(
AomMemTest
NullParams
)
{
ASSERT_EQ
(
aom_memset16
(
nullptr
0
0
)
nullptr
)
;
aom_free
(
nullptr
)
;
}
