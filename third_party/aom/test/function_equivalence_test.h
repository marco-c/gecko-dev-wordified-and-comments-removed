#
ifndef
TEST_FUNCTION_EQUIVALENCE_TEST_H_
#
define
TEST_FUNCTION_EQUIVALENCE_TEST_H_
#
include
"
third_party
/
googletest
/
src
/
googletest
/
include
/
gtest
/
gtest
.
h
"
#
include
"
test
/
acm_random
.
h
"
#
include
"
test
/
clear_system_state
.
h
"
#
include
"
test
/
util
.
h
"
using
libaom_test
:
:
ACMRandom
;
namespace
libaom_test
{
template
<
typename
T
>
struct
FuncParam
{
FuncParam
(
T
ref
=
NULL
T
tst
=
NULL
int
bit_depth
=
0
)
:
ref_func
(
ref
)
tst_func
(
tst
)
bit_depth
(
bit_depth
)
{
}
T
ref_func
;
T
tst_func
;
int
bit_depth
;
}
;
template
<
typename
T
>
std
:
:
ostream
&
operator
<
<
(
std
:
:
ostream
&
os
const
FuncParam
<
T
>
&
p
)
{
return
os
<
<
"
bit_depth
:
"
<
<
p
.
bit_depth
<
<
"
function
:
"
<
<
reinterpret_cast
<
const
void
*
>
(
p
.
ref_func
)
<
<
"
function
:
"
<
<
reinterpret_cast
<
const
void
*
>
(
p
.
tst_func
)
;
}
template
<
typename
T
>
class
FunctionEquivalenceTest
:
public
:
:
testing
:
:
TestWithParam
<
FuncParam
<
T
>
>
{
public
:
FunctionEquivalenceTest
(
)
:
rng_
(
ACMRandom
:
:
DeterministicSeed
(
)
)
{
}
virtual
~
FunctionEquivalenceTest
(
)
{
}
virtual
void
SetUp
(
)
{
params_
=
this
-
>
GetParam
(
)
;
}
virtual
void
TearDown
(
)
{
libaom_test
:
:
ClearSystemState
(
)
;
}
protected
:
ACMRandom
rng_
;
FuncParam
<
T
>
params_
;
}
;
}
#
endif
