#
include
<
tuple
>
#
include
"
gtest
/
gtest
.
h
"
#
include
"
test
/
warp_filter_test_util
.
h
"
using
libaom_test
:
:
ACMRandom
;
#
if
CONFIG_AV1_HIGHBITDEPTH
using
libaom_test
:
:
AV1HighbdWarpFilter
:
:
AV1HighbdWarpFilterTest
;
#
endif
using
libaom_test
:
:
AV1WarpFilter
:
:
AV1WarpFilterTest
;
using
std
:
:
make_tuple
;
using
std
:
:
tuple
;
namespace
{
TEST_P
(
AV1WarpFilterTest
CheckOutput
)
{
RunCheckOutput
(
std
:
:
get
<
3
>
(
GET_PARAM
(
0
)
)
)
;
}
TEST_P
(
AV1WarpFilterTest
DISABLED_Speed
)
{
RunSpeedTest
(
std
:
:
get
<
3
>
(
GET_PARAM
(
0
)
)
)
;
}
INSTANTIATE_TEST_SUITE_P
(
C
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_c
)
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
&
&
(
HAVE_SSE4_1
|
|
HAVE_NEON
)
TEST_P
(
AV1HighbdWarpFilterTest
CheckOutput
)
{
RunCheckOutput
(
std
:
:
get
<
4
>
(
GET_PARAM
(
0
)
)
)
;
}
TEST_P
(
AV1HighbdWarpFilterTest
DISABLED_Speed
)
{
RunSpeedTest
(
std
:
:
get
<
4
>
(
GET_PARAM
(
0
)
)
)
;
}
#
endif
#
if
HAVE_SSE4_1
INSTANTIATE_TEST_SUITE_P
(
SSE4_1
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_sse4_1
)
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
INSTANTIATE_TEST_SUITE_P
(
SSE4_1
AV1HighbdWarpFilterTest
libaom_test
:
:
AV1HighbdWarpFilter
:
:
BuildParams
(
av1_highbd_warp_affine_sse4_1
)
)
;
#
endif
#
endif
#
if
HAVE_AVX2
INSTANTIATE_TEST_SUITE_P
(
AVX2
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_avx2
)
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
INSTANTIATE_TEST_SUITE_P
(
AVX2
AV1HighbdWarpFilterTest
libaom_test
:
:
AV1HighbdWarpFilter
:
:
BuildParams
(
av1_highbd_warp_affine_avx2
)
)
;
#
endif
#
endif
#
if
CONFIG_HIGHWAY
&
&
HAVE_AVX512
INSTANTIATE_TEST_SUITE_P
(
AVX512
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_avx512
)
)
;
#
endif
#
if
HAVE_NEON
INSTANTIATE_TEST_SUITE_P
(
NEON
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_neon
)
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
INSTANTIATE_TEST_SUITE_P
(
NEON
AV1HighbdWarpFilterTest
libaom_test
:
:
AV1HighbdWarpFilter
:
:
BuildParams
(
av1_highbd_warp_affine_neon
)
)
;
#
endif
#
endif
#
if
HAVE_NEON_I8MM
INSTANTIATE_TEST_SUITE_P
(
NEON_I8MM
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_neon_i8mm
)
)
;
#
endif
#
if
HAVE_SVE
INSTANTIATE_TEST_SUITE_P
(
SVE
AV1WarpFilterTest
libaom_test
:
:
AV1WarpFilter
:
:
BuildParams
(
av1_warp_affine_sve
)
)
;
#
if
CONFIG_AV1_HIGHBITDEPTH
INSTANTIATE_TEST_SUITE_P
(
SVE
AV1HighbdWarpFilterTest
libaom_test
:
:
AV1HighbdWarpFilter
:
:
BuildParams
(
av1_highbd_warp_affine_sve
)
)
;
#
endif
#
endif
}
