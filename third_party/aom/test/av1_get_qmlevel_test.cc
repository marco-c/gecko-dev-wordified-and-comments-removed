#
include
"
gtest
/
gtest
.
h
"
#
include
"
av1
/
common
/
quant_common
.
h
"
namespace
{
TEST
(
GetQmLevelTest
Regular
)
{
int
qindex_1_qmlevel
=
aom_get_qmlevel
(
1
DEFAULT_QM_FIRST
DEFAULT_QM_LAST
)
;
int
qindex_60_qmlevel
=
aom_get_qmlevel
(
60
DEFAULT_QM_FIRST
DEFAULT_QM_LAST
)
;
int
qindex_120_qmlevel
=
aom_get_qmlevel
(
120
DEFAULT_QM_FIRST
DEFAULT_QM_LAST
)
;
int
qindex_180_qmlevel
=
aom_get_qmlevel
(
180
DEFAULT_QM_FIRST
DEFAULT_QM_LAST
)
;
int
qindex_255_qmlevel
=
aom_get_qmlevel
(
255
DEFAULT_QM_FIRST
DEFAULT_QM_LAST
)
;
EXPECT_EQ
(
qindex_1_qmlevel
DEFAULT_QM_FIRST
)
;
EXPECT_EQ
(
qindex_255_qmlevel
DEFAULT_QM_LAST
)
;
EXPECT_GE
(
qindex_255_qmlevel
qindex_180_qmlevel
)
;
EXPECT_GE
(
qindex_180_qmlevel
qindex_120_qmlevel
)
;
EXPECT_GE
(
qindex_120_qmlevel
qindex_60_qmlevel
)
;
EXPECT_GE
(
qindex_60_qmlevel
qindex_1_qmlevel
)
;
EXPECT_GT
(
qindex_255_qmlevel
qindex_1_qmlevel
)
;
int
qindex_1_qmlevel_belowfirst
=
aom_get_qmlevel
(
1
1
DEFAULT_QM_FIRST
-
1
)
;
int
qindex_255_qmlevel_belowfirst
=
aom_get_qmlevel
(
255
1
DEFAULT_QM_FIRST
-
1
)
;
EXPECT_LT
(
qindex_1_qmlevel_belowfirst
DEFAULT_QM_FIRST
)
;
EXPECT_LT
(
qindex_255_qmlevel_belowfirst
DEFAULT_QM_FIRST
)
;
int
qindex_1_qmlevel_abovelast
=
aom_get_qmlevel
(
1
DEFAULT_QM_LAST
+
1
15
)
;
int
qindex_255_qmlevel_abovelast
=
aom_get_qmlevel
(
255
DEFAULT_QM_LAST
+
1
15
)
;
EXPECT_GT
(
qindex_1_qmlevel_abovelast
DEFAULT_QM_LAST
)
;
EXPECT_GT
(
qindex_255_qmlevel_abovelast
DEFAULT_QM_LAST
)
;
}
TEST
(
GetQmLevelTest
AllIntra
)
{
int
qindex_1_qmlevel
=
aom_get_qmlevel_allintra
(
1
DEFAULT_QM_FIRST_ALLINTRA
DEFAULT_QM_LAST_ALLINTRA
)
;
int
qindex_60_qmlevel
=
aom_get_qmlevel_allintra
(
60
DEFAULT_QM_FIRST_ALLINTRA
DEFAULT_QM_LAST_ALLINTRA
)
;
int
qindex_120_qmlevel
=
aom_get_qmlevel_allintra
(
120
DEFAULT_QM_FIRST_ALLINTRA
DEFAULT_QM_LAST_ALLINTRA
)
;
int
qindex_180_qmlevel
=
aom_get_qmlevel_allintra
(
180
DEFAULT_QM_FIRST_ALLINTRA
DEFAULT_QM_LAST_ALLINTRA
)
;
int
qindex_255_qmlevel
=
aom_get_qmlevel_allintra
(
255
DEFAULT_QM_FIRST_ALLINTRA
DEFAULT_QM_LAST_ALLINTRA
)
;
EXPECT_EQ
(
qindex_1_qmlevel
DEFAULT_QM_LAST_ALLINTRA
)
;
EXPECT_EQ
(
qindex_255_qmlevel
DEFAULT_QM_FIRST_ALLINTRA
)
;
EXPECT_LE
(
qindex_255_qmlevel
qindex_180_qmlevel
)
;
EXPECT_LE
(
qindex_180_qmlevel
qindex_120_qmlevel
)
;
EXPECT_LE
(
qindex_120_qmlevel
qindex_60_qmlevel
)
;
EXPECT_LE
(
qindex_60_qmlevel
qindex_1_qmlevel
)
;
EXPECT_LT
(
qindex_255_qmlevel
qindex_1_qmlevel
)
;
int
qindex_1_qmlevel_belowfirst
=
aom_get_qmlevel_allintra
(
1
1
DEFAULT_QM_FIRST_ALLINTRA
-
1
)
;
int
qindex_255_qmlevel_belowfirst
=
aom_get_qmlevel_allintra
(
255
1
DEFAULT_QM_FIRST_ALLINTRA
-
1
)
;
EXPECT_EQ
(
qindex_1_qmlevel_belowfirst
DEFAULT_QM_FIRST_ALLINTRA
-
1
)
;
EXPECT_EQ
(
qindex_255_qmlevel_belowfirst
DEFAULT_QM_FIRST_ALLINTRA
-
1
)
;
int
qindex_1_qmlevel_abovelast
=
aom_get_qmlevel_allintra
(
1
DEFAULT_QM_LAST_ALLINTRA
+
1
15
)
;
int
qindex_255_qmlevel_abovelast
=
aom_get_qmlevel_allintra
(
255
DEFAULT_QM_LAST_ALLINTRA
+
1
15
)
;
EXPECT_EQ
(
qindex_1_qmlevel_abovelast
DEFAULT_QM_LAST_ALLINTRA
+
1
)
;
EXPECT_EQ
(
qindex_255_qmlevel_abovelast
DEFAULT_QM_LAST_ALLINTRA
+
1
)
;
}
}
