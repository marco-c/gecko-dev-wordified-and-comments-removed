#
ifndef
AOM_AOM_PORTS_MEM_H_
#
define
AOM_AOM_PORTS_MEM_H_
#
include
"
aom
/
aom_integer
.
h
"
#
include
"
config
/
aom_config
.
h
"
#
if
(
defined
(
__GNUC__
)
&
&
__GNUC__
)
|
|
defined
(
__SUNPRO_C
)
#
define
DECLARE_ALIGNED
(
n
typ
val
)
typ
val
__attribute__
(
(
aligned
(
n
)
)
)
#
elif
defined
(
_MSC_VER
)
#
define
DECLARE_ALIGNED
(
n
typ
val
)
__declspec
(
align
(
n
)
)
typ
val
#
else
#
warning
No
alignment
directives
known
for
this
compiler
.
#
define
DECLARE_ALIGNED
(
n
typ
val
)
typ
val
#
endif
#
if
defined
(
__has_builtin
)
#
define
AOM_HAS_BUILTIN
(
x
)
__has_builtin
(
x
)
#
else
#
define
AOM_HAS_BUILTIN
(
x
)
0
#
endif
#
if
!
AOM_HAS_BUILTIN
(
__builtin_prefetch
)
&
&
!
defined
(
__GNUC__
)
#
define
__builtin_prefetch
(
x
)
#
endif
#
define
ROUND_POWER_OF_TWO
(
value
n
)
(
(
(
value
)
+
(
(
(
1
<
<
(
n
)
)
>
>
1
)
)
)
>
>
(
n
)
)
#
define
ROUND_POWER_OF_TWO_SIGNED
(
value
n
)
\
(
(
(
value
)
<
0
)
?
-
ROUND_POWER_OF_TWO
(
-
(
value
)
(
n
)
)
\
:
ROUND_POWER_OF_TWO
(
(
value
)
(
n
)
)
)
#
define
ROUND_POWER_OF_TWO_64
(
value
n
)
\
(
(
(
value
)
+
(
(
(
(
int64_t
)
1
<
<
(
n
)
)
>
>
1
)
)
)
>
>
(
n
)
)
#
define
ROUND_POWER_OF_TWO_SIGNED_64
(
value
n
)
\
(
(
(
value
)
<
0
)
?
-
ROUND_POWER_OF_TWO_64
(
-
(
value
)
(
n
)
)
\
:
ROUND_POWER_OF_TWO_64
(
(
value
)
(
n
)
)
)
#
define
CEIL_POWER_OF_TWO
(
value
n
)
(
(
(
value
)
+
(
1
<
<
(
n
)
)
-
1
)
>
>
(
n
)
)
#
define
RIGHT_SIGNED_SHIFT
(
value
n
)
\
(
(
n
)
<
0
?
(
(
value
)
<
<
(
-
(
n
)
)
)
:
(
(
value
)
>
>
(
n
)
)
)
#
define
ALIGN_POWER_OF_TWO
(
value
n
)
\
(
(
(
value
)
+
(
(
1
<
<
(
n
)
)
-
1
)
)
&
~
(
(
1
<
<
(
n
)
)
-
1
)
)
#
define
ALIGN_POWER_OF_TWO_UNSIGNED
(
value
n
)
\
(
(
(
value
)
+
(
(
1u
<
<
(
n
)
)
-
1
)
)
&
~
(
(
1u
<
<
(
n
)
)
-
1
)
)
#
define
DIVIDE_AND_ROUND
(
x
y
)
(
(
(
x
)
+
(
(
y
)
>
>
1
)
)
/
(
y
)
)
#
define
CONVERT_TO_SHORTPTR
(
x
)
(
(
uint16_t
*
)
(
(
(
uintptr_t
)
(
x
)
)
<
<
1
)
)
#
define
CONVERT_TO_BYTEPTR
(
x
)
(
(
uint8_t
*
)
(
(
(
uintptr_t
)
(
x
)
)
>
>
1
)
)
#
define
UENUM1BYTE
(
enumvar
)
\
;
\
typedef
uint8_t
enumvar
#
define
SENUM1BYTE
(
enumvar
)
\
;
\
typedef
int8_t
enumvar
#
define
UENUM2BYTE
(
enumvar
)
\
;
\
typedef
uint16_t
enumvar
#
define
SENUM2BYTE
(
enumvar
)
\
;
\
typedef
int16_t
enumvar
#
define
UENUM4BYTE
(
enumvar
)
\
;
\
typedef
uint32_t
enumvar
#
define
SENUM4BYTE
(
enumvar
)
\
;
\
typedef
int32_t
enumvar
#
endif
