#
include
<
fcntl
.
h
>
#
include
<
unistd
.
h
>
#
include
<
stdint
.
h
>
#
include
"
config
/
aom_config
.
h
"
#
include
"
aom_ports
/
riscv
.
h
"
#
if
CONFIG_RUNTIME_CPU_DETECT
#
include
<
sys
/
auxv
.
h
>
#
define
HWCAP_RVV
(
1
<
<
(
'
v
'
-
'
a
'
)
)
int
riscv_simd_caps
(
void
)
{
int
flags
=
0
;
#
if
HAVE_RVV
unsigned
long
hwcap
=
getauxval
(
AT_HWCAP
)
;
if
(
hwcap
&
HWCAP_RVV
)
flags
|
=
HAS_RVV
;
#
endif
return
flags
;
}
#
else
int
riscv_simd_caps
(
void
)
{
return
0
;
}
#
endif
