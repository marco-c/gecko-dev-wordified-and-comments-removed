#
ifndef
AV1_ENCODER_BITSTREAM_H_
#
define
AV1_ENCODER_BITSTREAM_H_
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
include
"
av1
/
encoder
/
encoder
.
h
"
struct
aom_write_bit_buffer
;
#
if
CONFIG_REFERENCE_BUFFER
void
write_sequence_header
(
AV1_COMMON
*
const
cm
struct
aom_write_bit_buffer
*
wb
)
;
#
endif
void
av1_pack_bitstream
(
AV1_COMP
*
const
cpi
uint8_t
*
dest
size_t
*
size
)
;
void
av1_encode_token_init
(
void
)
;
static
INLINE
int
av1_preserve_existing_gf
(
AV1_COMP
*
cpi
)
{
#
if
CONFIG_EXT_REFS
return
!
cpi
-
>
multi_arf_allowed
&
&
cpi
-
>
rc
.
is_src_frame_alt_ref
&
&
!
cpi
-
>
rc
.
is_src_frame_ext_arf
;
#
else
return
!
cpi
-
>
multi_arf_allowed
&
&
cpi
-
>
refresh_golden_frame
&
&
cpi
-
>
rc
.
is_src_frame_alt_ref
;
#
endif
}
void
av1_write_tx_type
(
const
AV1_COMMON
*
const
cm
const
MACROBLOCKD
*
xd
#
if
CONFIG_SUPERTX
const
int
supertx_enabled
#
endif
#
if
CONFIG_TXK_SEL
int
blk_row
int
blk_col
int
block
int
plane
TX_SIZE
tx_size
#
endif
aom_writer
*
w
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
