#
ifndef
AV1_COMMON_RECONINTRA_H_
#
define
AV1_COMMON_RECONINTRA_H_
#
include
"
aom
/
aom_integer
.
h
"
#
include
"
av1
/
common
/
blockd
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
if
CONFIG_DPCM_INTRA
static
INLINE
int
av1_use_dpcm_intra
(
int
plane
PREDICTION_MODE
mode
TX_TYPE
tx_type
const
MB_MODE_INFO
*
const
mbmi
)
{
(
void
)
mbmi
;
(
void
)
plane
;
#
if
CONFIG_EXT_INTRA
if
(
mbmi
-
>
sb_type
>
=
BLOCK_8X8
&
&
mbmi
-
>
angle_delta
[
plane
!
=
0
]
)
return
0
;
#
endif
return
(
mode
=
=
V_PRED
&
&
(
tx_type
=
=
IDTX
|
|
tx_type
=
=
H_DCT
)
)
|
|
(
mode
=
=
H_PRED
&
&
(
tx_type
=
=
IDTX
|
|
tx_type
=
=
V_DCT
)
)
;
}
#
endif
void
av1_init_intra_predictors
(
void
)
;
void
av1_predict_intra_block_facade
(
MACROBLOCKD
*
xd
int
plane
int
block_idx
int
blk_col
int
blk_row
TX_SIZE
tx_size
)
;
void
av1_predict_intra_block
(
const
MACROBLOCKD
*
xd
int
bw
int
bh
BLOCK_SIZE
bsize
PREDICTION_MODE
mode
const
uint8_t
*
ref
int
ref_stride
uint8_t
*
dst
int
dst_stride
int
aoff
int
loff
int
plane
)
;
#
if
CONFIG_EXT_INTER
&
&
CONFIG_INTERINTRA
static
const
PREDICTION_MODE
interintra_to_intra_mode
[
INTERINTRA_MODES
]
=
{
DC_PRED
V_PRED
H_PRED
#
if
CONFIG_ALT_INTRA
SMOOTH_PRED
#
else
TM_PRED
#
endif
}
;
static
const
INTERINTRA_MODE
intra_to_interintra_mode
[
INTRA_MODES
]
=
{
II_DC_PRED
II_V_PRED
II_H_PRED
II_V_PRED
#
if
CONFIG_ALT_INTRA
II_SMOOTH_PRED
#
else
II_TM_PRED
#
endif
II_V_PRED
II_H_PRED
II_H_PRED
II_V_PRED
#
if
CONFIG_ALT_INTRA
II_SMOOTH_PRED
II_SMOOTH_PRED
#
else
II_TM_PRED
#
endif
}
;
#
endif
#
if
CONFIG_FILTER_INTRA
#
define
FILTER_INTRA_PREC_BITS
10
#
endif
#
define
CONFIG_INTRA_EDGE_UPSAMPLE
CONFIG_INTRA_EDGE
#
define
CONFIG_USE_ANGLE_DELTA_SUB8X8
0
#
if
CONFIG_EXT_INTRA
static
INLINE
int
av1_is_directional_mode
(
PREDICTION_MODE
mode
BLOCK_SIZE
bsize
)
{
#
if
CONFIG_INTRA_EDGE_UPSAMPLE
(
void
)
bsize
;
return
mode
>
=
V_PRED
&
&
mode
<
=
D63_PRED
;
#
else
return
mode
>
=
V_PRED
&
&
mode
<
=
D63_PRED
&
&
bsize
>
=
BLOCK_8X8
;
#
endif
}
static
INLINE
int
av1_use_angle_delta
(
BLOCK_SIZE
bsize
)
{
(
void
)
bsize
;
#
if
CONFIG_USE_ANGLE_DELTA_SUB8X8
return
1
;
#
else
return
bsize
>
=
BLOCK_8X8
;
#
endif
}
#
endif
#
ifdef
__cplusplus
}
#
endif
#
endif
