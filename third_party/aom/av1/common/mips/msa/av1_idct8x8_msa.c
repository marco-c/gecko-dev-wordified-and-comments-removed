#
include
<
assert
.
h
>
#
include
"
av1
/
common
/
enums
.
h
"
#
include
"
aom_dsp
/
mips
/
inv_txfm_msa
.
h
"
void
av1_iht8x8_64_add_msa
(
const
int16_t
*
input
uint8_t
*
dst
int32_t
dst_stride
TxfmParam
*
txfm_param
)
{
v8i16
in0
in1
in2
in3
in4
in5
in6
in7
;
const
TX_TYPE
tx_type
=
txfm_param
-
>
tx_type
;
LD_SH8
(
input
8
in0
in1
in2
in3
in4
in5
in6
in7
)
;
TRANSPOSE8x8_SH_SH
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
switch
(
tx_type
)
{
case
DCT_DCT
:
AOM_IDCT8x8_1D
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
TRANSPOSE8x8_SH_SH
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
AOM_IDCT8x8_1D
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
break
;
case
ADST_DCT
:
AOM_IDCT8x8_1D
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
TRANSPOSE8x8_SH_SH
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
AOM_ADST8
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
break
;
case
DCT_ADST
:
AOM_ADST8
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
TRANSPOSE8x8_SH_SH
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
AOM_IDCT8x8_1D
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
break
;
case
ADST_ADST
:
AOM_ADST8
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
TRANSPOSE8x8_SH_SH
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
AOM_ADST8
(
in0
in1
in2
in3
in4
in5
in6
in7
in0
in1
in2
in3
in4
in5
in6
in7
)
;
break
;
default
:
assert
(
0
)
;
break
;
}
SRARI_H4_SH
(
in0
in1
in2
in3
5
)
;
SRARI_H4_SH
(
in4
in5
in6
in7
5
)
;
AOM_ADDBLK_ST8x4_UB
(
dst
dst_stride
in0
in1
in2
in3
)
;
dst
+
=
(
4
*
dst_stride
)
;
AOM_ADDBLK_ST8x4_UB
(
dst
dst_stride
in4
in5
in6
in7
)
;
}
