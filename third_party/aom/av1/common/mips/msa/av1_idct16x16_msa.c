#
include
<
assert
.
h
>
#
include
"
av1
/
common
/
enums
.
h
"
#
include
"
aom_dsp
/
mips
/
inv_txfm_msa
.
h
"
void
av1_iht16x16_256_add_msa
(
const
int16_t
*
input
uint8_t
*
dst
int32_t
dst_stride
TxfmParam
*
txfm_param
)
{
int32_t
i
;
DECLARE_ALIGNED
(
32
int16_t
out
[
16
*
16
]
)
;
int16_t
*
out_ptr
=
&
out
[
0
]
;
int32_t
tx_type
=
txfm_param
-
>
tx_type
;
switch
(
tx_type
)
{
case
DCT_DCT
:
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_idct16_1d_rows_msa
(
(
input
+
(
i
<
<
7
)
)
(
out_ptr
+
(
i
<
<
7
)
)
)
;
}
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_idct16_1d_columns_addblk_msa
(
(
out_ptr
+
(
i
<
<
3
)
)
(
dst
+
(
i
<
<
3
)
)
dst_stride
)
;
}
break
;
case
ADST_DCT
:
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_idct16_1d_rows_msa
(
(
input
+
(
i
<
<
7
)
)
(
out_ptr
+
(
i
<
<
7
)
)
)
;
}
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_iadst16_1d_columns_addblk_msa
(
(
out_ptr
+
(
i
<
<
3
)
)
(
dst
+
(
i
<
<
3
)
)
dst_stride
)
;
}
break
;
case
DCT_ADST
:
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_iadst16_1d_rows_msa
(
(
input
+
(
i
<
<
7
)
)
(
out_ptr
+
(
i
<
<
7
)
)
)
;
}
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_idct16_1d_columns_addblk_msa
(
(
out_ptr
+
(
i
<
<
3
)
)
(
dst
+
(
i
<
<
3
)
)
dst_stride
)
;
}
break
;
case
ADST_ADST
:
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_iadst16_1d_rows_msa
(
(
input
+
(
i
<
<
7
)
)
(
out_ptr
+
(
i
<
<
7
)
)
)
;
}
for
(
i
=
0
;
i
<
2
;
+
+
i
)
{
aom_iadst16_1d_columns_addblk_msa
(
(
out_ptr
+
(
i
<
<
3
)
)
(
dst
+
(
i
<
<
3
)
)
dst_stride
)
;
}
break
;
default
:
assert
(
0
)
;
break
;
}
}
