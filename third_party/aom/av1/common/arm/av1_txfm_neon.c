#
include
<
arm_neon
.
h
>
#
include
<
assert
.
h
>
#
include
"
aom_ports
/
mem
.
h
"
#
include
"
av1
/
common
/
arm
/
mem_neon
.
h
"
void
av1_round_shift_array_neon
(
int32_t
*
arr
int
size
int
bit
)
{
assert
(
!
(
size
%
4
)
)
;
if
(
!
bit
)
return
;
const
int32x4_t
dup_bits_n_32x4
=
vdupq_n_s32
(
(
int32_t
)
(
-
bit
)
)
;
for
(
int
i
=
0
;
i
<
size
;
i
+
=
4
)
{
int32x4_t
tmp_q_s32
=
vld1q_s32
(
arr
)
;
tmp_q_s32
=
vrshlq_s32
(
tmp_q_s32
dup_bits_n_32x4
)
;
vst1q_s32
(
arr
tmp_q_s32
)
;
arr
+
=
4
;
}
}
