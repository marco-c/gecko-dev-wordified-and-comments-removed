#
ifndef
ZSTD_TRACE_H
#
define
ZSTD_TRACE_H
#
include
<
stddef
.
h
>
#
if
!
defined
(
ZSTD_HAVE_WEAK_SYMBOLS
)
&
&
\
defined
(
__GNUC__
)
&
&
defined
(
__ELF__
)
&
&
\
(
defined
(
__x86_64__
)
|
|
defined
(
_M_X64
)
|
|
defined
(
__i386__
)
|
|
\
defined
(
_M_IX86
)
|
|
defined
(
__aarch64__
)
|
|
defined
(
__riscv
)
)
&
&
\
!
defined
(
__APPLE__
)
&
&
!
defined
(
_WIN32
)
&
&
!
defined
(
__MINGW32__
)
&
&
\
!
defined
(
__CYGWIN__
)
&
&
!
defined
(
_AIX
)
#
define
ZSTD_HAVE_WEAK_SYMBOLS
1
#
else
#
define
ZSTD_HAVE_WEAK_SYMBOLS
0
#
endif
#
if
ZSTD_HAVE_WEAK_SYMBOLS
#
define
ZSTD_WEAK_ATTR
__attribute__
(
(
__weak__
)
)
#
else
#
define
ZSTD_WEAK_ATTR
#
endif
#
ifndef
ZSTD_TRACE
#
define
ZSTD_TRACE
ZSTD_HAVE_WEAK_SYMBOLS
#
endif
#
if
ZSTD_TRACE
struct
ZSTD_CCtx_s
;
struct
ZSTD_DCtx_s
;
struct
ZSTD_CCtx_params_s
;
typedef
struct
{
unsigned
version
;
int
streaming
;
unsigned
dictionaryID
;
int
dictionaryIsCold
;
size_t
dictionarySize
;
size_t
uncompressedSize
;
size_t
compressedSize
;
struct
ZSTD_CCtx_params_s
const
*
params
;
struct
ZSTD_CCtx_s
const
*
cctx
;
struct
ZSTD_DCtx_s
const
*
dctx
;
}
ZSTD_Trace
;
typedef
unsigned
long
long
ZSTD_TraceCtx
;
ZSTD_WEAK_ATTR
ZSTD_TraceCtx
ZSTD_trace_compress_begin
(
struct
ZSTD_CCtx_s
const
*
cctx
)
;
ZSTD_WEAK_ATTR
void
ZSTD_trace_compress_end
(
ZSTD_TraceCtx
ctx
ZSTD_Trace
const
*
trace
)
;
ZSTD_WEAK_ATTR
ZSTD_TraceCtx
ZSTD_trace_decompress_begin
(
struct
ZSTD_DCtx_s
const
*
dctx
)
;
ZSTD_WEAK_ATTR
void
ZSTD_trace_decompress_end
(
ZSTD_TraceCtx
ctx
ZSTD_Trace
const
*
trace
)
;
#
endif
#
endif
