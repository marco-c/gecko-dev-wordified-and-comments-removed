#
include
"
src
/
filenames
.
h
"
namespace
wabt
{
const
char
*
kWasmExtension
=
"
.
wasm
"
;
const
char
*
kWatExtension
=
"
.
wat
"
;
string_view
StripExtension
(
string_view
filename
)
{
return
filename
.
substr
(
0
filename
.
find_last_of
(
'
.
'
)
)
;
}
string_view
GetBasename
(
string_view
filename
)
{
size_t
last_slash
=
filename
.
find_last_of
(
'
/
'
)
;
size_t
last_backslash
=
filename
.
find_last_of
(
'
\
\
'
)
;
if
(
last_slash
=
=
string_view
:
:
npos
&
&
last_backslash
=
=
string_view
:
:
npos
)
{
return
filename
;
}
if
(
last_slash
=
=
string_view
:
:
npos
)
{
if
(
last_backslash
=
=
string_view
:
:
npos
)
{
return
filename
;
}
last_slash
=
last_backslash
;
}
else
if
(
last_backslash
!
=
string_view
:
:
npos
)
{
last_slash
=
std
:
:
max
(
last_slash
last_backslash
)
;
}
return
filename
.
substr
(
last_slash
+
1
)
;
}
string_view
GetExtension
(
string_view
filename
)
{
size_t
pos
=
filename
.
find_last_of
(
'
.
'
)
;
if
(
pos
=
=
string_view
:
:
npos
)
{
return
"
"
;
}
return
filename
.
substr
(
pos
)
;
}
}
