#
ifndef
WASM_RT_IMPL_H_
#
define
WASM_RT_IMPL_H_
#
include
"
wasm
-
rt
.
h
"
#
ifdef
_WIN32
#
include
<
windows
.
h
>
#
endif
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
ifndef
WASM_RT_TRAP_HANDLER
extern
WASM_RT_THREAD_LOCAL
wasm_rt_jmp_buf
g_wasm_rt_jmp_buf
;
#
endif
#
if
WASM_RT_STACK_DEPTH_COUNT
extern
WASM_RT_THREAD_LOCAL
uint32_t
wasm_rt_saved_call_stack_depth
;
#
define
WASM_RT_SAVE_STACK_DEPTH
(
)
\
wasm_rt_saved_call_stack_depth
=
wasm_rt_call_stack_depth
#
else
#
define
WASM_RT_SAVE_STACK_DEPTH
(
)
(
void
)
0
#
endif
#
define
wasm_rt_impl_try
(
)
\
(
WASM_RT_SAVE_STACK_DEPTH
(
)
wasm_rt_set_unwind_target
(
&
g_wasm_rt_jmp_buf
)
\
WASM_RT_SETJMP
(
g_wasm_rt_jmp_buf
)
)
#
ifdef
__cplusplus
}
#
endif
#
endif
