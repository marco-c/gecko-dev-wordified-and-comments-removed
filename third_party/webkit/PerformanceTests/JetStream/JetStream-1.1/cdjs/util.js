function
compareNumbers
(
a
b
)
{
if
(
a
=
=
b
)
return
0
;
if
(
a
<
b
)
return
-
1
;
if
(
a
>
b
)
return
1
;
if
(
a
=
=
a
)
return
1
;
return
-
1
;
}
function
averageAbovePercentile
(
numbers
percentile
)
{
numbers
=
numbers
.
slice
(
)
;
numbers
.
sort
(
function
(
a
b
)
{
return
a
-
b
;
}
)
;
var
numbersWeWant
=
[
]
;
var
originalLength
=
numbers
.
length
;
while
(
numbers
.
length
/
originalLength
>
percentile
/
100
)
numbersWeWant
.
push
(
numbers
.
pop
(
)
)
;
var
sum
=
0
;
for
(
var
i
=
0
;
i
<
numbersWeWant
.
length
;
+
+
i
)
sum
+
=
numbersWeWant
[
i
]
;
var
result
=
sum
/
numbersWeWant
.
length
;
if
(
numbers
.
length
&
&
result
<
numbers
[
numbers
.
length
-
1
]
)
{
throw
"
Sanity
check
fail
:
the
worst
case
result
is
"
+
result
+
"
but
we
didn
'
t
take
into
account
"
+
numbers
;
}
return
result
;
}
var
currentTime
;
if
(
this
.
performance
&
&
performance
.
now
)
currentTime
=
function
(
)
{
return
performance
.
now
(
)
}
;
else
if
(
preciseTime
)
currentTime
=
function
(
)
{
return
preciseTime
(
)
*
1000
;
}
;
else
currentTime
=
function
(
)
{
return
0
+
new
Date
(
)
;
}
;
