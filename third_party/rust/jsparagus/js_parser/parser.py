"
"
"
parser
.
py
-
A
JavaScript
parser
currently
with
many
bugs
.
See
README
.
md
for
instructions
.
"
"
"
import
jsparagus
from
.
import
parser_tables
from
.
lexer
import
JSLexer
class
JSParser
(
parser_tables
.
Parser
)
:
    
def
__init__
(
self
goal
=
'
Script
'
builder
=
None
)
:
        
super
(
)
.
__init__
(
goal
builder
)
        
self
.
_goal
=
goal
    
def
clone
(
self
)
:
        
return
JSParser
(
self
.
_goal
self
.
methods
)
    
def
on_recover
(
self
error_code
lexer
stv
)
:
        
"
"
"
Check
that
ASI
error
recovery
is
really
acceptable
.
"
"
"
        
if
error_code
=
=
'
asi
'
:
            
if
not
self
.
closed
and
stv
.
term
!
=
'
}
'
and
not
lexer
.
saw_line_terminator
(
)
:
                
lexer
.
throw
(
"
missing
semicolon
"
)
        
else
:
            
assert
error_code
=
=
'
do_while_asi
'
def
parse_Script
(
text
)
:
    
lexer
=
JSLexer
(
JSParser
(
'
Script
'
)
)
    
lexer
.
write
(
text
)
    
return
lexer
.
close
(
)
