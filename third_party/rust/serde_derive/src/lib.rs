#
!
[
doc
(
html_root_url
=
"
https
:
/
/
docs
.
rs
/
serde_derive
/
1
.
0
.
37
"
)
]
#
!
[
cfg_attr
(
feature
=
"
cargo
-
clippy
"
allow
(
enum_variant_names
redundant_field_names
too_many_arguments
used_underscore_binding
)
)
]
#
!
[
recursion_limit
=
"
512
"
]
#
[
macro_use
]
extern
crate
quote
;
#
[
macro_use
]
extern
crate
syn
;
extern
crate
serde_derive_internals
as
internals
;
extern
crate
proc_macro
;
extern
crate
proc_macro2
;
use
proc_macro
:
:
TokenStream
;
use
syn
:
:
DeriveInput
;
macro_rules
!
quote
{
(
(
tt
:
tt
)
*
)
=
>
{
quote_spanned
!
(
crate
:
:
proc_macro2
:
:
Span
:
:
call_site
(
)
=
>
(
tt
)
*
)
}
}
#
[
macro_use
]
mod
bound
;
#
[
macro_use
]
mod
fragment
;
mod
ser
;
mod
de
;
#
[
proc_macro_derive
(
Serialize
attributes
(
serde
)
)
]
pub
fn
derive_serialize
(
input
:
TokenStream
)
-
>
TokenStream
{
let
input
:
DeriveInput
=
syn
:
:
parse
(
input
)
.
unwrap
(
)
;
match
ser
:
:
expand_derive_serialize
(
&
input
)
{
Ok
(
expanded
)
=
>
expanded
.
into
(
)
Err
(
msg
)
=
>
panic
!
(
msg
)
}
}
#
[
proc_macro_derive
(
Deserialize
attributes
(
serde
)
)
]
pub
fn
derive_deserialize
(
input
:
TokenStream
)
-
>
TokenStream
{
let
input
:
DeriveInput
=
syn
:
:
parse
(
input
)
.
unwrap
(
)
;
match
de
:
:
expand_derive_deserialize
(
&
input
)
{
Ok
(
expanded
)
=
>
expanded
.
into
(
)
Err
(
msg
)
=
>
panic
!
(
msg
)
}
}
