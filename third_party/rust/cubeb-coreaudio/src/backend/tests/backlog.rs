use
super
:
:
utils
:
:
test_get_default_raw_stream
;
use
super
:
:
*
;
#
[
test
]
fn
test_stream_register_device_changed_callback
(
)
{
extern
"
C
"
fn
callback
(
_
:
*
mut
c_void
)
{
}
test_get_default_raw_stream
(
|
stream
|
{
assert
!
(
stream
.
register_device_changed_callback
(
Some
(
callback
)
)
.
is_ok
(
)
)
;
assert
!
(
stream
.
register_device_changed_callback
(
None
)
.
is_ok
(
)
)
;
}
)
;
}
#
[
test
]
fn
test_stream_register_device_changed_callback_twice
(
)
{
extern
"
C
"
fn
callback1
(
_
:
*
mut
c_void
)
{
}
extern
"
C
"
fn
callback2
(
_
:
*
mut
c_void
)
{
}
test_get_default_raw_stream
(
|
stream
|
{
assert
!
(
stream
.
register_device_changed_callback
(
Some
(
callback1
)
)
.
is_ok
(
)
)
;
assert
!
(
stream
.
register_device_changed_callback
(
Some
(
callback2
)
)
.
is_err
(
)
)
;
}
)
;
}
