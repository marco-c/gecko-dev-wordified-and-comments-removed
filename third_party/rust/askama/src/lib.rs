#
!
[
forbid
(
unsafe_code
)
]
#
!
[
deny
(
elided_lifetimes_in_paths
)
]
#
!
[
deny
(
unreachable_pub
)
]
pub
use
askama_shared
as
shared
;
pub
use
askama_escape
:
:
{
Html
Text
}
;
pub
trait
Template
{
fn
render
(
&
self
)
-
>
Result
<
String
>
{
let
mut
buf
=
String
:
:
with_capacity
(
Self
:
:
SIZE_HINT
)
;
self
.
render_into
(
&
mut
buf
)
?
;
Ok
(
buf
)
}
fn
render_into
(
&
self
writer
:
&
mut
(
impl
std
:
:
fmt
:
:
Write
+
?
Sized
)
)
-
>
Result
<
(
)
>
;
const
EXTENSION
:
Option
<
&
'
static
str
>
;
const
SIZE_HINT
:
usize
;
const
MIME_TYPE
:
&
'
static
str
;
}
pub
trait
DynTemplate
{
fn
dyn_render
(
&
self
)
-
>
Result
<
String
>
;
fn
dyn_render_into
(
&
self
writer
:
&
mut
dyn
std
:
:
fmt
:
:
Write
)
-
>
Result
<
(
)
>
;
fn
extension
(
&
self
)
-
>
Option
<
&
'
static
str
>
;
fn
size_hint
(
&
self
)
-
>
usize
;
fn
mime_type
(
&
self
)
-
>
&
'
static
str
;
}
impl
<
T
:
Template
>
DynTemplate
for
T
{
fn
dyn_render
(
&
self
)
-
>
Result
<
String
>
{
<
Self
as
Template
>
:
:
render
(
self
)
}
fn
dyn_render_into
(
&
self
writer
:
&
mut
dyn
std
:
:
fmt
:
:
Write
)
-
>
Result
<
(
)
>
{
<
Self
as
Template
>
:
:
render_into
(
self
writer
)
}
fn
extension
(
&
self
)
-
>
Option
<
&
'
static
str
>
{
Self
:
:
EXTENSION
}
fn
size_hint
(
&
self
)
-
>
usize
{
Self
:
:
SIZE_HINT
}
fn
mime_type
(
&
self
)
-
>
&
'
static
str
{
Self
:
:
MIME_TYPE
}
}
pub
use
crate
:
:
shared
:
:
filters
;
pub
use
crate
:
:
shared
:
:
helpers
;
pub
use
crate
:
:
shared
:
:
{
read_config_file
Error
MarkupDisplay
Result
}
;
pub
use
askama_derive
:
:
*
;
#
[
deprecated
(
since
=
"
0
.
11
.
1
"
note
=
"
The
only
function
in
this
mod
is
deprecated
"
)
]
pub
mod
mime
{
#
[
cfg
(
all
(
feature
=
"
mime_guess
"
feature
=
"
mime
"
)
)
]
#
[
deprecated
(
since
=
"
0
.
11
.
1
"
note
=
"
Use
Template
:
:
MIME_TYPE
instead
"
)
]
pub
use
crate
:
:
shared
:
:
extension_to_mime_type
;
}
#
[
deprecated
(
since
=
"
0
.
8
.
1
"
note
=
"
file
-
level
dependency
tracking
is
handled
automatically
without
build
script
"
)
]
pub
fn
rerun_if_templates_changed
(
)
{
}
#
[
cfg
(
test
)
]
mod
tests
{
use
super
:
:
{
DynTemplate
Template
}
;
#
[
test
]
fn
dyn_template
(
)
{
struct
Test
;
impl
Template
for
Test
{
fn
render_into
(
&
self
writer
:
&
mut
(
impl
std
:
:
fmt
:
:
Write
+
?
Sized
)
)
-
>
askama_shared
:
:
Result
<
(
)
>
{
Ok
(
writer
.
write_str
(
"
test
"
)
?
)
}
const
EXTENSION
:
Option
<
&
'
static
str
>
=
Some
(
"
txt
"
)
;
const
SIZE_HINT
:
usize
=
4
;
const
MIME_TYPE
:
&
'
static
str
=
"
text
/
plain
;
charset
=
utf
-
8
"
;
}
fn
render
(
t
:
&
dyn
DynTemplate
)
-
>
String
{
t
.
dyn_render
(
)
.
unwrap
(
)
}
assert_eq
!
(
render
(
&
Test
)
"
test
"
)
;
}
}
