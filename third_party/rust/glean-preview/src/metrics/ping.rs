use
ffi_support
:
:
FfiStr
;
use
std
:
:
ffi
:
:
CString
;
#
[
derive
(
Clone
Debug
)
]
pub
struct
PingType
{
pub
(
crate
)
name
:
String
pub
(
crate
)
handle
:
u64
}
impl
PingType
{
pub
fn
new
<
A
:
Into
<
String
>
>
(
name
:
A
include_client_id
:
bool
send_if_empty
:
bool
)
-
>
Self
{
let
name
=
name
.
into
(
)
;
let
ffi_name
=
CString
:
:
new
(
name
.
clone
(
)
)
.
unwrap
(
)
;
let
handle
=
glean_ffi
:
:
ping_type
:
:
glean_new_ping_type
(
FfiStr
:
:
from_cstr
(
&
ffi_name
)
include_client_id
as
u8
send_if_empty
as
u8
)
;
Self
{
name
handle
}
}
pub
fn
send
(
&
self
)
-
>
bool
{
crate
:
:
send_ping
(
self
)
}
}
