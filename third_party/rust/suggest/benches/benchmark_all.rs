use
criterion
:
:
{
criterion_group
criterion_main
BatchSize
Criterion
}
;
use
suggest
:
:
benchmarks
:
:
{
ingest
BenchmarkWithInput
}
;
pub
fn
ingest_single_provider
(
c
:
&
mut
Criterion
)
{
let
mut
group
=
c
.
benchmark_group
(
"
ingest
"
)
;
viaduct_reqwest
:
:
use_reqwest_backend
(
)
;
group
.
sample_size
(
10
)
;
for
(
name
benchmark
)
in
ingest
:
:
all_benchmarks
(
)
{
group
.
bench_function
(
name
.
to_string
(
)
|
b
|
{
b
.
iter_batched
(
|
|
benchmark
.
generate_input
(
)
|
input
|
benchmark
.
benchmarked_code
(
input
)
BatchSize
:
:
PerIteration
)
;
}
)
;
}
}
criterion_group
!
(
benches
ingest_single_provider
)
;
criterion_main
!
(
benches
)
;
