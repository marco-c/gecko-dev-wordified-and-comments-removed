use
super
:
:
Error
;
use
bytes
:
:
Bytes
;
pub
fn
strip_padding
(
payload
:
&
mut
Bytes
)
-
>
Result
<
u8
Error
>
{
if
payload
.
len
(
)
=
=
0
{
return
Err
(
Error
:
:
TooMuchPadding
)
;
}
let
pad_len
=
payload
[
0
]
as
usize
;
if
pad_len
>
=
payload
.
len
(
)
{
return
Err
(
Error
:
:
TooMuchPadding
)
;
}
let
_
=
payload
.
split_to
(
1
)
;
let
_
=
payload
.
split_off
(
pad_len
)
;
Ok
(
pad_len
as
u8
)
}
