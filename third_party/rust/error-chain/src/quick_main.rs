#
[
macro_export
]
macro_rules
!
quick_main
{
(
main
:
expr
)
=
>
{
fn
main
(
)
{
use
std
:
:
io
:
:
Write
;
:
:
std
:
:
process
:
:
exit
(
match
main
(
)
{
Ok
(
ret
)
=
>
crate
:
:
ExitCode
:
:
code
(
ret
)
Err
(
ref
e
)
=
>
{
write
!
(
&
mut
:
:
std
:
:
io
:
:
stderr
(
)
"
{
}
"
crate
:
:
ChainedError
:
:
display_chain
(
e
)
)
.
expect
(
"
Error
writing
to
stderr
"
)
;
1
}
}
)
;
}
}
;
}
pub
trait
ExitCode
{
fn
code
(
self
)
-
>
i32
;
}
impl
ExitCode
for
i32
{
fn
code
(
self
)
-
>
i32
{
self
}
}
impl
ExitCode
for
(
)
{
fn
code
(
self
)
-
>
i32
{
0
}
}
