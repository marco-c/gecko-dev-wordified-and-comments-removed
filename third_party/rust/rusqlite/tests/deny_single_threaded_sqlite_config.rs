#
[
cfg
(
not
(
feature
=
"
loadable_extension
"
)
)
]
#
[
test
]
fn
test_error_when_singlethread_mode
(
)
{
use
rusqlite
:
:
ffi
;
use
rusqlite
:
:
Connection
;
unsafe
{
if
ffi
:
:
sqlite3_config
(
ffi
:
:
SQLITE_CONFIG_SINGLETHREAD
)
!
=
ffi
:
:
SQLITE_OK
{
return
;
}
assert_eq
!
(
ffi
:
:
sqlite3_initialize
(
)
ffi
:
:
SQLITE_OK
)
;
}
let
res
=
Connection
:
:
open_in_memory
(
)
;
res
.
unwrap_err
(
)
;
}
