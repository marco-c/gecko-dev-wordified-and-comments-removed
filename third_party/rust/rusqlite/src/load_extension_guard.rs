use
crate
:
:
{
Connection
Result
}
;
pub
struct
LoadExtensionGuard
<
'
conn
>
{
conn
:
&
'
conn
Connection
}
impl
LoadExtensionGuard
<
'
_
>
{
pub
fn
new
(
conn
:
&
Connection
)
-
>
Result
<
LoadExtensionGuard
<
'
_
>
>
{
conn
.
load_extension_enable
(
)
.
map
(
|
_
|
LoadExtensionGuard
{
conn
}
)
}
}
#
[
allow
(
unused_must_use
)
]
impl
Drop
for
LoadExtensionGuard
<
'
_
>
{
fn
drop
(
&
mut
self
)
{
self
.
conn
.
load_extension_disable
(
)
;
}
}
