use
std
:
:
sync
:
:
{
Arc
Mutex
Condvar
}
;
struct
LockState
{
readers
:
u32
upgradeable_reader
:
bool
writer
:
bool
}
struct
Locks
(
Arc
<
(
Mutex
<
LockState
>
Condvar
)
>
)
;
impl
Locks
{
pub
fn
new
(
)
-
>
Locks
{
Locks
(
Arc
:
:
new
(
(
Mutex
:
:
new
(
LockState
{
readers
:
0
upgradeable_reader
:
false
writer
:
false
}
)
Condvar
:
:
new
(
)
)
)
)
}
pub
fn
read
(
)
-
>
}
