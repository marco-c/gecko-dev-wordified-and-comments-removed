use
std
:
:
env
;
fn
main
(
)
{
println
!
(
"
cargo
:
rerun
-
if
-
changed
=
build
.
rs
"
)
;
let
target
=
env
:
:
var
(
"
TARGET
"
)
.
unwrap
(
)
;
let
target_abi
=
env
:
:
var
(
"
CARGO_CFG_TARGET_ABI
"
)
;
println
!
(
"
cargo
:
rustc
-
check
-
cfg
=
cfg
(
target_abi_macabi
)
"
)
;
if
target_abi
.
as_deref
(
)
=
=
Ok
(
"
macabi
"
)
|
|
target
.
ends_with
(
"
macabi
"
)
{
println
!
(
"
cargo
:
rustc
-
cfg
=
target_abi_macabi
"
)
;
}
println
!
(
"
cargo
:
rustc
-
check
-
cfg
=
cfg
(
target_simulator
)
"
)
;
if
target_abi
.
as_deref
(
)
=
=
Ok
(
"
sim
"
)
|
|
target
.
ends_with
(
"
sim
"
)
|
|
target
=
=
"
i386
-
apple
-
ios
"
|
|
target
=
=
"
x86_64
-
apple
-
ios
"
{
println
!
(
"
cargo
:
rustc
-
cfg
=
target_simulator
"
)
;
}
}
