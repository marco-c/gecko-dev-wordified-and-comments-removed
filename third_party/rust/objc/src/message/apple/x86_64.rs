use
std
:
:
mem
;
use
runtime
:
:
Imp
;
extern
{
fn
objc_msgSend
(
)
;
fn
objc_msgSend_stret
(
)
;
fn
objc_msgSendSuper
(
)
;
fn
objc_msgSendSuper_stret
(
)
;
}
pub
fn
msg_send_fn
<
R
>
(
)
-
>
Imp
{
if
mem
:
:
size_of
:
:
<
R
>
(
)
<
=
16
{
objc_msgSend
}
else
{
objc_msgSend_stret
}
}
pub
fn
msg_send_super_fn
<
R
>
(
)
-
>
Imp
{
if
mem
:
:
size_of
:
:
<
R
>
(
)
<
=
16
{
objc_msgSendSuper
}
else
{
objc_msgSendSuper_stret
}
}
