use
std
:
:
result
;
use
winapi
:
:
shared
:
:
minwindef
:
:
DWORD
;
use
winapi
:
:
um
:
:
errhandlingapi
:
:
GetLastError
;
#
[
derive
(
Clone
Copy
Debug
)
]
pub
struct
Error
(
DWORD
)
;
impl
Error
{
pub
fn
code
(
&
self
)
-
>
u32
{
self
.
0
}
pub
fn
last
<
T
>
(
)
-
>
Result
<
T
>
{
Err
(
Error
(
unsafe
{
GetLastError
(
)
}
)
)
}
}
pub
type
Result
<
T
>
=
result
:
:
Result
<
T
Error
>
;
