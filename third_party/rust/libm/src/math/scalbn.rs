#
[
cfg_attr
(
all
(
test
assert_no_panic
)
no_panic
:
:
no_panic
)
]
pub
fn
scalbn
(
x
:
f64
mut
n
:
i32
)
-
>
f64
{
let
x1p1023
=
f64
:
:
from_bits
(
0x7fe0000000000000
)
;
let
x1p53
=
f64
:
:
from_bits
(
0x4340000000000000
)
;
let
x1p_1022
=
f64
:
:
from_bits
(
0x0010000000000000
)
;
let
mut
y
=
x
;
if
n
>
1023
{
y
*
=
x1p1023
;
n
-
=
1023
;
if
n
>
1023
{
y
*
=
x1p1023
;
n
-
=
1023
;
if
n
>
1023
{
n
=
1023
;
}
}
}
else
if
n
<
-
1022
{
y
*
=
x1p_1022
*
x1p53
;
n
+
=
1022
-
53
;
if
n
<
-
1022
{
y
*
=
x1p_1022
*
x1p53
;
n
+
=
1022
-
53
;
if
n
<
-
1022
{
n
=
-
1022
;
}
}
}
y
*
f64
:
:
from_bits
(
(
(
0x3ff
+
n
)
as
u64
)
<
<
52
)
}
