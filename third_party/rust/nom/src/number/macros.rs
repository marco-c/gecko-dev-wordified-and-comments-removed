#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
u16
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_u16
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_u16
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
u32
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_u32
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_u32
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
u64
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_u64
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_u64
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
#
[
cfg
(
stable_i128
)
]
macro_rules
!
u128
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_u128
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_u128
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
i16
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_i16
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_i16
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
i32
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_i32
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_i32
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
macro_rules
!
i64
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_i64
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_i64
(
i
)
}
}
)
;
)
;
#
[
macro_export
(
local_inner_macros
)
]
#
[
cfg
(
stable_i128
)
]
macro_rules
!
i128
(
(
i
:
expr
e
:
expr
)
=
>
(
{
if
crate
:
:
number
:
:
Endianness
:
:
Big
=
=
e
{
crate
:
:
number
:
:
streaming
:
:
be_i128
(
i
)
}
else
{
crate
:
:
number
:
:
streaming
:
:
le_i128
(
i
)
}
}
)
;
)
;
#
[
cfg
(
test
)
]
mod
tests
{
use
crate
:
:
number
:
:
Endianness
;
#
[
test
]
fn
configurable_endianness
(
)
{
named
!
(
be_tst16
<
u16
>
u16
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tst16
<
u16
>
u16
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tst16
(
&
[
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
32_768_u16
)
)
)
;
assert_eq
!
(
le_tst16
(
&
[
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
128_u16
)
)
)
;
named
!
(
be_tst32
<
u32
>
u32
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tst32
<
u32
>
u32
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tst32
(
&
[
0x12
0x00
0x60
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
302_014_464_u32
)
)
)
;
assert_eq
!
(
le_tst32
(
&
[
0x12
0x00
0x60
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
6_291_474_u32
)
)
)
;
named
!
(
be_tst64
<
u64
>
u64
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tst64
<
u64
>
u64
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tst64
(
&
[
0x12
0x00
0x60
0x00
0x12
0x00
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
1_297_142_246_100_992_000_u64
)
)
)
;
assert_eq
!
(
le_tst64
(
&
[
0x12
0x00
0x60
0x00
0x12
0x00
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
36_028_874_334_666_770_u64
)
)
)
;
named
!
(
be_tsti16
<
i16
>
i16
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tsti16
<
i16
>
i16
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tsti16
(
&
[
0x00
0x80
]
)
Ok
(
(
&
b
"
"
[
.
.
]
128_i16
)
)
)
;
assert_eq
!
(
le_tsti16
(
&
[
0x00
0x80
]
)
Ok
(
(
&
b
"
"
[
.
.
]
-
32_768_i16
)
)
)
;
named
!
(
be_tsti32
<
i32
>
i32
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tsti32
<
i32
>
i32
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tsti32
(
&
[
0x00
0x12
0x60
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
1_204_224_i32
)
)
)
;
assert_eq
!
(
le_tsti32
(
&
[
0x00
0x12
0x60
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
6_296_064_i32
)
)
)
;
named
!
(
be_tsti64
<
i64
>
i64
!
(
Endianness
:
:
Big
)
)
;
named
!
(
le_tsti64
<
i64
>
i64
!
(
Endianness
:
:
Little
)
)
;
assert_eq
!
(
be_tsti64
(
&
[
0x00
0xFF
0x60
0x00
0x12
0x00
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
71_881_672_479_506_432_i64
)
)
)
;
assert_eq
!
(
le_tsti64
(
&
[
0x00
0xFF
0x60
0x00
0x12
0x00
0x80
0x00
]
)
Ok
(
(
&
b
"
"
[
.
.
]
36_028_874_334_732_032_i64
)
)
)
;
}
}
