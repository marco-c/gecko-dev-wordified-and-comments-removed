#
!
[
no_std
]
use
icu_normalizer
:
:
properties
:
:
CanonicalCombiningClassMapBorrowed
;
use
icu_normalizer
:
:
uts46
:
:
Uts46MapperBorrowed
;
use
icu_properties
:
:
props
:
:
GeneralCategory
;
use
icu_properties
:
:
CodePointMapDataBorrowed
;
const
fn
joining_type_to_mask
(
jt
:
icu_properties
:
:
props
:
:
JoiningType
)
-
>
u32
{
1u32
<
<
jt
.
to_icu4c_value
(
)
}
pub
const
LEFT_OR_DUAL_JOINING_MASK
:
JoiningTypeMask
=
JoiningTypeMask
(
joining_type_to_mask
(
icu_properties
:
:
props
:
:
JoiningType
:
:
LeftJoining
)
|
joining_type_to_mask
(
icu_properties
:
:
props
:
:
JoiningType
:
:
DualJoining
)
)
;
pub
const
RIGHT_OR_DUAL_JOINING_MASK
:
JoiningTypeMask
=
JoiningTypeMask
(
joining_type_to_mask
(
icu_properties
:
:
props
:
:
JoiningType
:
:
RightJoining
)
|
joining_type_to_mask
(
icu_properties
:
:
props
:
:
JoiningType
:
:
DualJoining
)
)
;
const
fn
bidi_class_to_mask
(
bc
:
icu_properties
:
:
props
:
:
BidiClass
)
-
>
u32
{
1u32
<
<
bc
.
to_icu4c_value
(
)
}
pub
const
RTL_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
RightToLeft
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicLetter
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicNumber
)
)
;
pub
const
FIRST_BC_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
LeftToRight
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
RightToLeft
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicLetter
)
)
;
pub
const
LAST_LTR_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
LeftToRight
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanNumber
)
)
;
pub
const
LAST_RTL_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
RightToLeft
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicLetter
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanNumber
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicNumber
)
)
;
pub
const
MIDDLE_LTR_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
LeftToRight
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanNumber
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanSeparator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
CommonSeparator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanTerminator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
OtherNeutral
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
BoundaryNeutral
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
NonspacingMark
)
)
;
pub
const
MIDDLE_RTL_MASK
:
BidiClassMask
=
BidiClassMask
(
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
RightToLeft
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicLetter
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicNumber
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanNumber
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanSeparator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
CommonSeparator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanTerminator
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
OtherNeutral
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
BoundaryNeutral
)
|
bidi_class_to_mask
(
icu_properties
:
:
props
:
:
BidiClass
:
:
NonspacingMark
)
)
;
const
fn
general_category_to_mask
(
gc
:
GeneralCategory
)
-
>
u32
{
1
<
<
(
gc
as
u32
)
}
const
MARK_MASK
:
u32
=
general_category_to_mask
(
GeneralCategory
:
:
NonspacingMark
)
|
general_category_to_mask
(
GeneralCategory
:
:
SpacingMark
)
|
general_category_to_mask
(
GeneralCategory
:
:
EnclosingMark
)
;
#
[
repr
(
transparent
)
]
#
[
derive
(
Clone
Copy
)
]
pub
struct
JoiningType
(
icu_properties
:
:
props
:
:
JoiningType
)
;
impl
JoiningType
{
#
[
inline
(
always
)
]
pub
fn
to_mask
(
self
)
-
>
JoiningTypeMask
{
JoiningTypeMask
(
joining_type_to_mask
(
self
.
0
)
)
}
#
[
inline
(
always
)
]
pub
fn
is_transparent
(
self
)
-
>
bool
{
self
.
0
=
=
icu_properties
:
:
props
:
:
JoiningType
:
:
Transparent
}
}
#
[
repr
(
transparent
)
]
#
[
derive
(
Clone
Copy
)
]
pub
struct
JoiningTypeMask
(
u32
)
;
impl
JoiningTypeMask
{
#
[
inline
(
always
)
]
pub
fn
intersects
(
self
other
:
JoiningTypeMask
)
-
>
bool
{
self
.
0
&
other
.
0
!
=
0
}
}
#
[
repr
(
transparent
)
]
#
[
derive
(
Clone
Copy
)
]
pub
struct
BidiClass
(
icu_properties
:
:
props
:
:
BidiClass
)
;
impl
BidiClass
{
#
[
inline
(
always
)
]
pub
fn
to_mask
(
self
)
-
>
BidiClassMask
{
BidiClassMask
(
bidi_class_to_mask
(
self
.
0
)
)
}
#
[
inline
(
always
)
]
pub
fn
is_ltr
(
self
)
-
>
bool
{
self
.
0
=
=
icu_properties
:
:
props
:
:
BidiClass
:
:
LeftToRight
}
#
[
inline
(
always
)
]
pub
fn
is_nonspacing_mark
(
self
)
-
>
bool
{
self
.
0
=
=
icu_properties
:
:
props
:
:
BidiClass
:
:
NonspacingMark
}
#
[
inline
(
always
)
]
pub
fn
is_european_number
(
self
)
-
>
bool
{
self
.
0
=
=
icu_properties
:
:
props
:
:
BidiClass
:
:
EuropeanNumber
}
#
[
inline
(
always
)
]
pub
fn
is_arabic_number
(
self
)
-
>
bool
{
self
.
0
=
=
icu_properties
:
:
props
:
:
BidiClass
:
:
ArabicNumber
}
}
#
[
repr
(
transparent
)
]
#
[
derive
(
Clone
Copy
)
]
pub
struct
BidiClassMask
(
u32
)
;
impl
BidiClassMask
{
#
[
inline
(
always
)
]
pub
fn
intersects
(
self
other
:
BidiClassMask
)
-
>
bool
{
self
.
0
&
other
.
0
!
=
0
}
}
pub
struct
Adapter
{
mapper
:
Uts46MapperBorrowed
<
'
static
>
canonical_combining_class
:
CanonicalCombiningClassMapBorrowed
<
'
static
>
general_category
:
CodePointMapDataBorrowed
<
'
static
GeneralCategory
>
bidi_class
:
CodePointMapDataBorrowed
<
'
static
icu_properties
:
:
props
:
:
BidiClass
>
joining_type
:
CodePointMapDataBorrowed
<
'
static
icu_properties
:
:
props
:
:
JoiningType
>
}
#
[
cfg
(
feature
=
"
compiled_data
"
)
]
impl
Default
for
Adapter
{
fn
default
(
)
-
>
Self
{
Self
:
:
new
(
)
}
}
impl
Adapter
{
#
[
cfg
(
feature
=
"
compiled_data
"
)
]
#
[
inline
(
always
)
]
pub
const
fn
new
(
)
-
>
Self
{
Self
{
mapper
:
Uts46MapperBorrowed
:
:
new
(
)
canonical_combining_class
:
CanonicalCombiningClassMapBorrowed
:
:
new
(
)
general_category
:
icu_properties
:
:
CodePointMapData
:
:
<
GeneralCategory
>
:
:
new
(
)
bidi_class
:
icu_properties
:
:
CodePointMapData
:
:
<
icu_properties
:
:
props
:
:
BidiClass
>
:
:
new
(
)
joining_type
:
icu_properties
:
:
CodePointMapData
:
:
<
icu_properties
:
:
props
:
:
JoiningType
>
:
:
new
(
)
}
}
#
[
inline
(
always
)
]
pub
fn
is_virama
(
&
self
c
:
char
)
-
>
bool
{
self
.
canonical_combining_class
.
get_u8
(
c
)
=
=
9
}
#
[
inline
(
always
)
]
pub
fn
is_mark
(
&
self
c
:
char
)
-
>
bool
{
(
general_category_to_mask
(
self
.
general_category
.
get
(
c
)
)
&
MARK_MASK
)
!
=
0
}
#
[
inline
(
always
)
]
pub
fn
bidi_class
(
&
self
c
:
char
)
-
>
BidiClass
{
BidiClass
(
self
.
bidi_class
.
get
(
c
)
)
}
#
[
inline
(
always
)
]
pub
fn
joining_type
(
&
self
c
:
char
)
-
>
JoiningType
{
JoiningType
(
self
.
joining_type
.
get
(
c
)
)
}
#
[
inline
(
always
)
]
pub
fn
map_normalize
<
'
delegate
I
:
Iterator
<
Item
=
char
>
+
'
delegate
>
(
&
'
delegate
self
iter
:
I
)
-
>
impl
Iterator
<
Item
=
char
>
+
'
delegate
{
self
.
mapper
.
map_normalize
(
iter
)
}
#
[
inline
(
always
)
]
pub
fn
normalize_validate
<
'
delegate
I
:
Iterator
<
Item
=
char
>
+
'
delegate
>
(
&
'
delegate
self
iter
:
I
)
-
>
impl
Iterator
<
Item
=
char
>
+
'
delegate
{
self
.
mapper
.
normalize_validate
(
iter
)
}
}
