mod
common
;
use
glean
:
:
{
Configuration
ConfigurationBuilder
}
;
use
std
:
:
path
:
:
PathBuf
;
fn
cfg_new
(
tmpname
:
PathBuf
)
-
>
Configuration
{
ConfigurationBuilder
:
:
new
(
true
tmpname
"
firefox
-
desktop
"
)
.
with_server_endpoint
(
"
invalid
-
test
-
host
"
)
.
with_delay_ping_lifetime_io
(
true
)
.
build
(
)
}
#
[
test
]
fn
delayed_ping_data
(
)
{
common
:
:
enable_test_logging
(
)
;
let
dir
=
tempfile
:
:
tempdir
(
)
.
unwrap
(
)
;
let
tmpname
=
dir
.
path
(
)
.
to_path_buf
(
)
;
common
:
:
initialize
(
cfg_new
(
tmpname
)
)
;
glean
:
:
persist_ping_lifetime_data
(
)
;
glean
:
:
shutdown
(
)
;
glean
:
:
persist_ping_lifetime_data
(
)
;
}
