#
!
[
allow
(
dead_code
)
]
use
std
:
:
{
panic
process
}
;
use
glean
:
:
{
private
:
:
PingType
ClientInfoMetrics
Configuration
}
;
pub
fn
enable_test_logging
(
)
{
let
_
=
env_logger
:
:
builder
(
)
.
is_test
(
true
)
.
try_init
(
)
;
}
fn
install_panic_handler
(
)
{
let
orig_hook
=
panic
:
:
take_hook
(
)
;
panic
:
:
set_hook
(
Box
:
:
new
(
move
|
panic_info
|
{
orig_hook
(
panic_info
)
;
process
:
:
exit
(
1
)
;
}
)
)
;
}
pub
fn
initialize
(
cfg
:
Configuration
)
{
install_panic_handler
(
)
;
let
client_info
=
ClientInfoMetrics
{
app_build
:
"
1
.
0
.
0
"
.
to_string
(
)
app_display_version
:
"
1
.
0
.
0
"
.
to_string
(
)
channel
:
Some
(
"
testing
"
.
to_string
(
)
)
locale
:
Some
(
"
xx
-
XX
"
.
to_string
(
)
)
}
;
_
=
PingType
:
:
new
(
"
store1
"
true
true
true
true
true
vec
!
[
]
vec
!
[
]
true
)
;
glean
:
:
initialize
(
cfg
client_info
)
;
}
