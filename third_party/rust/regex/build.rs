use
std
:
:
env
;
use
std
:
:
ffi
:
:
OsString
;
use
std
:
:
process
:
:
Command
;
fn
main
(
)
{
let
rustc
=
env
:
:
var_os
(
"
RUSTC
"
)
.
unwrap_or
(
OsString
:
:
from
(
"
rustc
"
)
)
;
let
output
=
Command
:
:
new
(
&
rustc
)
.
arg
(
"
-
-
version
"
)
.
output
(
)
.
unwrap
(
)
.
stdout
;
let
version
=
String
:
:
from_utf8
(
output
)
.
unwrap
(
)
;
if
env
:
:
var_os
(
"
CARGO_CFG_REGEX_DISABLE_AUTO_OPTIMIZATIONS
"
)
.
is_none
(
)
{
if
version
.
contains
(
"
nightly
"
)
{
println
!
(
"
cargo
:
rustc
-
cfg
=
regex_runtime_teddy_ssse3
"
)
;
println
!
(
"
cargo
:
rustc
-
cfg
=
regex_runtime_teddy_avx2
"
)
;
}
}
}
