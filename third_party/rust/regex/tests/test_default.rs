#
!
[
cfg_attr
(
feature
=
"
pattern
"
feature
(
pattern
)
)
]
extern
crate
rand
;
extern
crate
regex
;
macro_rules
!
regex_new
{
(
re
:
expr
)
=
>
{
{
use
regex
:
:
Regex
;
Regex
:
:
new
(
re
)
}
}
}
macro_rules
!
regex
{
(
re
:
expr
)
=
>
{
regex_new
!
(
re
)
.
unwrap
(
)
}
}
macro_rules
!
regex_set_new
{
(
re
:
expr
)
=
>
{
{
use
regex
:
:
RegexSet
;
RegexSet
:
:
new
(
re
)
}
}
}
macro_rules
!
regex_set
{
(
res
:
expr
)
=
>
{
regex_set_new
!
(
res
)
.
unwrap
(
)
}
}
include
!
(
"
macros_str
.
rs
"
)
;
include
!
(
"
macros
.
rs
"
)
;
mod
api
;
mod
api_str
;
mod
crazy
;
mod
flags
;
mod
fowler
;
mod
misc
;
mod
multiline
;
mod
noparse
;
mod
regression
;
mod
replace
;
mod
searcher
;
mod
set
;
mod
shortest_match
;
mod
suffix_reverse
;
mod
unicode
;
mod
word_boundary
;
mod
word_boundary_unicode
;
#
[
test
]
fn
disallow_non_utf8
(
)
{
assert
!
(
regex
:
:
Regex
:
:
new
(
r
"
(
?
-
u
)
\
xFF
"
)
.
is_err
(
)
)
;
assert
!
(
regex
:
:
Regex
:
:
new
(
r
"
(
?
-
u
)
.
"
)
.
is_err
(
)
)
;
assert
!
(
regex
:
:
Regex
:
:
new
(
r
"
(
?
-
u
)
[
\
xFF
]
"
)
.
is_err
(
)
)
;
assert
!
(
regex
:
:
Regex
:
:
new
(
r
"
(
?
-
u
)
"
)
.
is_err
(
)
)
;
}
#
[
test
]
fn
disallow_octal
(
)
{
assert
!
(
regex
:
:
Regex
:
:
new
(
r
"
\
0
"
)
.
is_err
(
)
)
;
}
#
[
test
]
fn
allow_octal
(
)
{
assert
!
(
regex
:
:
RegexBuilder
:
:
new
(
r
"
\
0
"
)
.
octal
(
true
)
.
build
(
)
.
is_ok
(
)
)
;
}
