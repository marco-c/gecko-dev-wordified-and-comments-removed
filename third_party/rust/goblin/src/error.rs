use
scroll
;
use
core
:
:
result
;
use
core
:
:
fmt
:
:
{
self
Display
}
;
use
alloc
:
:
string
:
:
String
;
#
[
cfg
(
feature
=
"
std
"
)
]
use
std
:
:
{
error
io
}
;
#
[
derive
(
Debug
)
]
pub
enum
Error
{
Malformed
(
String
)
BadMagic
(
u64
)
Scroll
(
scroll
:
:
Error
)
#
[
cfg
(
feature
=
"
std
"
)
]
IO
(
io
:
:
Error
)
}
impl
Error
{
pub
fn
description
(
&
self
)
-
>
&
str
{
match
*
self
{
#
[
cfg
(
feature
=
"
std
"
)
]
Error
:
:
IO
(
_
)
=
>
{
"
IO
error
"
}
Error
:
:
Scroll
(
_
)
=
>
{
"
Scroll
error
"
}
Error
:
:
BadMagic
(
_
)
=
>
{
"
Invalid
magic
number
"
}
Error
:
:
Malformed
(
_
)
=
>
{
"
Entity
is
malformed
in
some
way
"
}
}
}
}
#
[
cfg
(
feature
=
"
std
"
)
]
impl
error
:
:
Error
for
Error
{
fn
description
(
&
self
)
-
>
&
str
{
Error
:
:
description
(
self
)
}
fn
cause
(
&
self
)
-
>
Option
<
&
error
:
:
Error
>
{
match
*
self
{
Error
:
:
IO
(
ref
io
)
=
>
{
io
.
cause
(
)
}
Error
:
:
Scroll
(
ref
scroll
)
=
>
{
scroll
.
cause
(
)
}
Error
:
:
BadMagic
(
_
)
=
>
{
None
}
Error
:
:
Malformed
(
_
)
=
>
{
None
}
}
}
}
#
[
cfg
(
feature
=
"
std
"
)
]
impl
From
<
io
:
:
Error
>
for
Error
{
fn
from
(
err
:
io
:
:
Error
)
-
>
Error
{
Error
:
:
IO
(
err
)
}
}
impl
From
<
scroll
:
:
Error
>
for
Error
{
fn
from
(
err
:
scroll
:
:
Error
)
-
>
Error
{
Error
:
:
Scroll
(
err
)
}
}
impl
Display
for
Error
{
fn
fmt
(
&
self
fmt
:
&
mut
fmt
:
:
Formatter
)
-
>
fmt
:
:
Result
{
match
*
self
{
#
[
cfg
(
feature
=
"
std
"
)
]
Error
:
:
IO
(
ref
err
)
=
>
{
write
!
(
fmt
"
{
}
"
err
)
}
Error
:
:
Scroll
(
ref
err
)
=
>
{
write
!
(
fmt
"
{
}
"
err
)
}
Error
:
:
BadMagic
(
magic
)
=
>
{
write
!
(
fmt
"
Invalid
magic
number
:
0x
{
:
x
}
"
magic
)
}
Error
:
:
Malformed
(
ref
msg
)
=
>
{
write
!
(
fmt
"
Malformed
entity
:
{
}
"
msg
)
}
}
}
}
pub
type
Result
<
T
>
=
result
:
:
Result
<
T
Error
>
;
