use
std
:
:
os
:
:
unix
:
:
io
:
:
{
FromRawFd
AsRawFd
}
;
use
libc
:
:
c_int
;
use
{
TcpBuilder
UdpBuilder
FromInner
AsInner
}
;
use
socket
:
:
Socket
;
use
sys
;
impl
FromRawFd
for
TcpBuilder
{
unsafe
fn
from_raw_fd
(
fd
:
c_int
)
-
>
TcpBuilder
{
let
sock
=
sys
:
:
Socket
:
:
from_inner
(
fd
)
;
TcpBuilder
:
:
from_inner
(
Socket
:
:
from_inner
(
sock
)
)
}
}
impl
AsRawFd
for
TcpBuilder
{
fn
as_raw_fd
(
&
self
)
-
>
c_int
{
self
.
as_inner
(
)
.
borrow
(
)
.
as_ref
(
)
.
unwrap
(
)
.
as_inner
(
)
.
raw
(
)
}
}
impl
FromRawFd
for
UdpBuilder
{
unsafe
fn
from_raw_fd
(
fd
:
c_int
)
-
>
UdpBuilder
{
let
sock
=
sys
:
:
Socket
:
:
from_inner
(
fd
)
;
UdpBuilder
:
:
from_inner
(
Socket
:
:
from_inner
(
sock
)
)
}
}
impl
AsRawFd
for
UdpBuilder
{
fn
as_raw_fd
(
&
self
)
-
>
c_int
{
self
.
as_inner
(
)
.
borrow
(
)
.
as_ref
(
)
.
unwrap
(
)
.
as_inner
(
)
.
raw
(
)
}
}
