#
[
macro_export
]
macro_rules
!
unsafe_pinned
{
(
f
:
tt
:
t
:
ty
)
=
>
(
#
[
allow
(
unsafe_code
)
]
fn
f
<
'
__a
>
(
self
:
crate
:
:
core_reexport
:
:
pin
:
:
Pin
<
&
'
__a
mut
Self
>
)
-
>
crate
:
:
core_reexport
:
:
pin
:
:
Pin
<
&
'
__a
mut
t
>
{
unsafe
{
crate
:
:
core_reexport
:
:
pin
:
:
Pin
:
:
map_unchecked_mut
(
self
|
x
|
&
mut
x
.
f
)
}
}
)
}
#
[
macro_export
]
macro_rules
!
unsafe_unpinned
{
(
f
:
tt
:
t
:
ty
)
=
>
(
#
[
allow
(
unsafe_code
)
]
fn
f
<
'
__a
>
(
self
:
crate
:
:
core_reexport
:
:
pin
:
:
Pin
<
&
'
__a
mut
Self
>
)
-
>
&
'
__a
mut
t
{
unsafe
{
&
mut
crate
:
:
core_reexport
:
:
pin
:
:
Pin
:
:
get_unchecked_mut
(
self
)
.
f
}
}
)
}
