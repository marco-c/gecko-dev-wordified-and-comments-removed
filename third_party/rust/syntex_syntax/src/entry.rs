use
attr
;
use
ast
:
:
{
Item
ItemKind
}
;
pub
enum
EntryPointType
{
None
MainNamed
MainAttr
Start
OtherMain
}
pub
fn
entry_point_type
(
item
:
&
Item
depth
:
usize
)
-
>
EntryPointType
{
match
item
.
node
{
ItemKind
:
:
Fn
(
.
.
)
=
>
{
if
attr
:
:
contains_name
(
&
item
.
attrs
"
start
"
)
{
EntryPointType
:
:
Start
}
else
if
attr
:
:
contains_name
(
&
item
.
attrs
"
main
"
)
{
EntryPointType
:
:
MainAttr
}
else
if
item
.
ident
.
name
.
as_str
(
)
=
=
"
main
"
{
if
depth
=
=
1
{
EntryPointType
:
:
MainNamed
}
else
{
EntryPointType
:
:
OtherMain
}
}
else
{
EntryPointType
:
:
None
}
}
_
=
>
EntryPointType
:
:
None
}
}
