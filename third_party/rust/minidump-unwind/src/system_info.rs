use
std
:
:
borrow
:
:
Cow
;
use
minidump
:
:
system_info
:
:
{
Cpu
Os
}
;
#
[
derive
(
Debug
Clone
)
]
pub
struct
SystemInfo
{
pub
os
:
Os
pub
os_version
:
Option
<
String
>
pub
os_build
:
Option
<
String
>
pub
cpu
:
Cpu
pub
cpu_info
:
Option
<
String
>
pub
cpu_microcode_version
:
Option
<
u64
>
pub
cpu_count
:
usize
}
impl
SystemInfo
{
pub
fn
format_os_version
(
&
self
)
-
>
Option
<
Cow
<
'
_
str
>
>
{
match
(
&
self
.
os_version
&
self
.
os_build
)
{
(
Some
(
v
)
Some
(
b
)
)
=
>
Some
(
format
!
(
"
{
v
}
{
b
}
"
)
.
into
(
)
)
(
Some
(
v
)
None
)
=
>
Some
(
Cow
:
:
Borrowed
(
v
)
)
(
None
Some
(
b
)
)
=
>
Some
(
Cow
:
:
Borrowed
(
b
)
)
(
None
None
)
=
>
None
}
}
}
