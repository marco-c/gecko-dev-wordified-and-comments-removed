use
super
:
:
{
Everywhere
IdentBuf
Method
OutputOnly
TyPosition
Type
}
;
use
crate
:
:
ast
:
:
Docs
;
pub
enum
ReturnableStructDef
<
'
tcx
>
{
Struct
(
&
'
tcx
StructDef
)
OutStruct
(
&
'
tcx
OutStructDef
)
}
#
[
derive
(
Copy
Clone
Debug
)
]
pub
enum
TypeDef
<
'
tcx
>
{
Struct
(
&
'
tcx
StructDef
)
OutStruct
(
&
'
tcx
OutStructDef
)
Opaque
(
&
'
tcx
OpaqueDef
)
Enum
(
&
'
tcx
EnumDef
)
}
pub
type
OutStructDef
=
StructDef
<
OutputOnly
>
;
#
[
derive
(
Debug
)
]
pub
struct
StructDef
<
P
:
TyPosition
=
Everywhere
>
{
pub
docs
:
Docs
pub
name
:
IdentBuf
pub
fields
:
Vec
<
StructField
<
P
>
>
pub
methods
:
Vec
<
Method
>
}
#
[
derive
(
Debug
)
]
pub
struct
OpaqueDef
{
pub
docs
:
Docs
pub
name
:
IdentBuf
pub
methods
:
Vec
<
Method
>
}
#
[
derive
(
Debug
)
]
pub
struct
EnumDef
{
pub
docs
:
Docs
pub
name
:
IdentBuf
pub
variants
:
Vec
<
EnumVariant
>
pub
methods
:
Vec
<
Method
>
}
pub
type
OutStructField
=
StructField
<
OutputOnly
>
;
#
[
derive
(
Debug
)
]
pub
struct
StructField
<
P
:
TyPosition
=
Everywhere
>
{
pub
docs
:
Docs
pub
name
:
IdentBuf
pub
ty
:
Type
<
P
>
}
#
[
derive
(
Debug
)
]
pub
struct
EnumVariant
{
pub
docs
:
Docs
pub
name
:
IdentBuf
pub
discriminant
:
isize
}
impl
<
P
:
TyPosition
>
StructDef
<
P
>
{
pub
(
super
)
fn
new
(
docs
:
Docs
name
:
IdentBuf
fields
:
Vec
<
StructField
<
P
>
>
methods
:
Vec
<
Method
>
)
-
>
Self
{
Self
{
docs
name
fields
methods
}
}
}
impl
OpaqueDef
{
pub
(
super
)
fn
new
(
docs
:
Docs
name
:
IdentBuf
methods
:
Vec
<
Method
>
)
-
>
Self
{
Self
{
docs
name
methods
}
}
}
impl
EnumDef
{
pub
(
super
)
fn
new
(
docs
:
Docs
name
:
IdentBuf
variants
:
Vec
<
EnumVariant
>
methods
:
Vec
<
Method
>
)
-
>
Self
{
Self
{
docs
name
variants
methods
}
}
}
impl
<
'
a
>
From
<
&
'
a
StructDef
>
for
TypeDef
<
'
a
>
{
fn
from
(
x
:
&
'
a
StructDef
)
-
>
Self
{
TypeDef
:
:
Struct
(
x
)
}
}
impl
<
'
a
>
From
<
&
'
a
OutStructDef
>
for
TypeDef
<
'
a
>
{
fn
from
(
x
:
&
'
a
OutStructDef
)
-
>
Self
{
TypeDef
:
:
OutStruct
(
x
)
}
}
impl
<
'
a
>
From
<
&
'
a
OpaqueDef
>
for
TypeDef
<
'
a
>
{
fn
from
(
x
:
&
'
a
OpaqueDef
)
-
>
Self
{
TypeDef
:
:
Opaque
(
x
)
}
}
impl
<
'
a
>
From
<
&
'
a
EnumDef
>
for
TypeDef
<
'
a
>
{
fn
from
(
x
:
&
'
a
EnumDef
)
-
>
Self
{
TypeDef
:
:
Enum
(
x
)
}
}
impl
<
'
tcx
>
TypeDef
<
'
tcx
>
{
pub
fn
name
(
&
self
)
-
>
&
'
tcx
IdentBuf
{
match
*
self
{
Self
:
:
Struct
(
ty
)
=
>
&
ty
.
name
Self
:
:
OutStruct
(
ty
)
=
>
&
ty
.
name
Self
:
:
Opaque
(
ty
)
=
>
&
ty
.
name
Self
:
:
Enum
(
ty
)
=
>
&
ty
.
name
}
}
pub
fn
docs
(
&
self
)
-
>
&
'
tcx
Docs
{
match
*
self
{
Self
:
:
Struct
(
ty
)
=
>
&
ty
.
docs
Self
:
:
OutStruct
(
ty
)
=
>
&
ty
.
docs
Self
:
:
Opaque
(
ty
)
=
>
&
ty
.
docs
Self
:
:
Enum
(
ty
)
=
>
&
ty
.
docs
}
}
pub
fn
methods
(
&
self
)
-
>
&
'
tcx
[
Method
]
{
match
*
self
{
Self
:
:
Struct
(
ty
)
=
>
&
ty
.
methods
Self
:
:
OutStruct
(
ty
)
=
>
&
ty
.
methods
Self
:
:
Opaque
(
ty
)
=
>
&
ty
.
methods
Self
:
:
Enum
(
ty
)
=
>
&
ty
.
methods
}
}
}
