pub
(
super
)
struct
SetLenOnDrop
<
'
a
>
{
len
:
&
'
a
mut
usize
local_len
:
usize
}
impl
<
'
a
>
SetLenOnDrop
<
'
a
>
{
#
[
inline
(
always
)
]
pub
(
super
)
fn
new
(
len
:
&
'
a
mut
usize
)
-
>
Self
{
SetLenOnDrop
{
local_len
:
*
len
len
}
}
#
[
inline
(
always
)
]
pub
(
super
)
fn
increment_len
(
&
mut
self
increment
:
usize
)
{
self
.
local_len
+
=
increment
;
}
}
impl
Drop
for
SetLenOnDrop
<
'
_
>
{
#
[
inline
(
always
)
]
fn
drop
(
&
mut
self
)
{
*
self
.
len
=
self
.
local_len
;
}
}
