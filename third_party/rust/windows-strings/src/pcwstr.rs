use
super
:
:
*
;
#
[
repr
(
transparent
)
]
#
[
derive
(
Clone
Copy
PartialEq
Eq
Debug
)
]
pub
struct
PCWSTR
(
pub
*
const
u16
)
;
impl
PCWSTR
{
pub
const
fn
from_raw
(
ptr
:
*
const
u16
)
-
>
Self
{
Self
(
ptr
)
}
pub
const
fn
null
(
)
-
>
Self
{
Self
(
core
:
:
ptr
:
:
null
(
)
)
}
pub
const
fn
as_ptr
(
&
self
)
-
>
*
const
u16
{
self
.
0
}
pub
fn
is_null
(
&
self
)
-
>
bool
{
self
.
0
.
is_null
(
)
}
pub
unsafe
fn
len
(
&
self
)
-
>
usize
{
unsafe
extern
"
C
"
{
fn
wcslen
(
s
:
*
const
u16
)
-
>
usize
;
}
unsafe
{
wcslen
(
self
.
0
)
}
}
pub
unsafe
fn
is_empty
(
&
self
)
-
>
bool
{
unsafe
{
self
.
len
(
)
=
=
0
}
}
pub
unsafe
fn
as_wide
(
&
self
)
-
>
&
[
u16
]
{
unsafe
{
core
:
:
slice
:
:
from_raw_parts
(
self
.
0
self
.
len
(
)
)
}
}
pub
unsafe
fn
to_string
(
&
self
)
-
>
core
:
:
result
:
:
Result
<
String
alloc
:
:
string
:
:
FromUtf16Error
>
{
unsafe
{
String
:
:
from_utf16
(
self
.
as_wide
(
)
)
}
}
pub
unsafe
fn
to_hstring
(
&
self
)
-
>
HSTRING
{
unsafe
{
HSTRING
:
:
from_wide
(
self
.
as_wide
(
)
)
}
}
pub
unsafe
fn
display
(
&
self
)
-
>
impl
core
:
:
fmt
:
:
Display
+
'
_
{
unsafe
{
Decode
(
move
|
|
core
:
:
char
:
:
decode_utf16
(
self
.
as_wide
(
)
.
iter
(
)
.
cloned
(
)
)
)
}
}
}
impl
Default
for
PCWSTR
{
fn
default
(
)
-
>
Self
{
Self
:
:
null
(
)
}
}
impl
AsRef
<
Self
>
for
PCWSTR
{
fn
as_ref
(
&
self
)
-
>
&
Self
{
self
}
}
