extern
crate
flate2
;
use
std
:
:
io
:
:
prelude
:
:
*
;
use
std
:
:
io
;
use
flate2
:
:
Compression
;
use
flate2
:
:
write
:
:
DeflateEncoder
;
use
flate2
:
:
bufread
:
:
DeflateDecoder
;
fn
main
(
)
{
let
mut
e
=
DeflateEncoder
:
:
new
(
Vec
:
:
new
(
)
Compression
:
:
default
(
)
)
;
e
.
write
(
b
"
Hello
World
"
)
.
unwrap
(
)
;
let
bytes
=
e
.
finish
(
)
.
unwrap
(
)
;
println
!
(
"
{
}
"
decode_reader
(
bytes
)
.
unwrap
(
)
)
;
}
fn
decode_reader
(
bytes
:
Vec
<
u8
>
)
-
>
io
:
:
Result
<
String
>
{
let
mut
deflater
=
DeflateDecoder
:
:
new
(
&
bytes
[
.
.
]
)
;
let
mut
s
=
String
:
:
new
(
)
;
deflater
.
read_to_string
(
&
mut
s
)
?
;
Ok
(
s
)
}
