use
neqo_crypto
:
:
{
assert_initialized
init_db
}
;
#
[
expect
(
non_upper_case_globals
dead_code
reason
=
"
Code
is
bindgen
-
generated
.
"
)
]
mod
nss
{
include
!
(
concat
!
(
env
!
(
"
OUT_DIR
"
)
"
/
nss_init
.
rs
"
)
)
;
}
#
[
cfg
(
nss_nodb
)
]
#
[
test
]
fn
init_nodb
(
)
{
neqo_crypto
:
:
init
(
)
.
unwrap
(
)
;
assert_initialized
(
)
;
unsafe
{
assert_ne
!
(
nss
:
:
NSS_IsInitialized
(
)
0
)
;
}
}
#
[
cfg
(
not
(
nss_nodb
)
)
]
#
[
test
]
fn
init_withdb
(
)
{
init_db
(
:
:
test_fixture
:
:
NSS_DB_PATH
)
.
unwrap
(
)
;
assert_initialized
(
)
;
unsafe
{
assert_ne
!
(
nss
:
:
NSS_IsInitialized
(
)
0
)
;
}
}
