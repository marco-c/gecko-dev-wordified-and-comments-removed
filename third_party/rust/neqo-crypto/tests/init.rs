#
!
[
cfg_attr
(
feature
=
"
deny
-
warnings
"
deny
(
warnings
)
)
]
#
!
[
warn
(
clippy
:
:
pedantic
)
]
use
neqo_crypto
:
:
{
assert_initialized
init_db
}
;
#
[
allow
(
dead_code
non_upper_case_globals
clippy
:
:
redundant_static_lifetimes
clippy
:
:
unseparated_literal_suffix
clippy
:
:
upper_case_acronyms
)
]
mod
nss
{
include
!
(
concat
!
(
env
!
(
"
OUT_DIR
"
)
"
/
nss_init
.
rs
"
)
)
;
}
#
[
cfg
(
nss_nodb
)
]
#
[
test
]
fn
init_nodb
(
)
{
init
(
)
;
assert_initialized
(
)
;
unsafe
{
assert
!
(
nss
:
:
NSS_IsInitialized
(
)
!
=
0
)
;
}
}
#
[
cfg
(
not
(
nss_nodb
)
)
]
#
[
test
]
fn
init_withdb
(
)
{
init_db
(
:
:
test_fixture
:
:
NSS_DB_PATH
)
;
assert_initialized
(
)
;
unsafe
{
assert
!
(
nss
:
:
NSS_IsInitialized
(
)
!
=
0
)
;
}
}
