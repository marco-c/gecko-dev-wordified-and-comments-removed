use
crate
:
:
common
:
:
{
DebugInfoOffset
SectionId
}
;
use
crate
:
:
endianity
:
:
Endianity
;
use
crate
:
:
read
:
:
lookup
:
:
{
DebugLookup
LookupEntryIter
PubStuffEntry
PubStuffParser
}
;
use
crate
:
:
read
:
:
{
EndianSlice
Reader
Result
Section
UnitOffset
}
;
#
[
derive
(
Debug
Clone
)
]
pub
struct
PubTypesEntry
<
R
:
Reader
>
{
unit_header_offset
:
DebugInfoOffset
<
R
:
:
Offset
>
die_offset
:
UnitOffset
<
R
:
:
Offset
>
name
:
R
}
impl
<
R
:
Reader
>
PubTypesEntry
<
R
>
{
pub
fn
name
(
&
self
)
-
>
&
R
{
&
self
.
name
}
pub
fn
unit_header_offset
(
&
self
)
-
>
DebugInfoOffset
<
R
:
:
Offset
>
{
self
.
unit_header_offset
}
pub
fn
die_offset
(
&
self
)
-
>
UnitOffset
<
R
:
:
Offset
>
{
self
.
die_offset
}
}
impl
<
R
:
Reader
>
PubStuffEntry
<
R
>
for
PubTypesEntry
<
R
>
{
fn
new
(
die_offset
:
UnitOffset
<
R
:
:
Offset
>
name
:
R
unit_header_offset
:
DebugInfoOffset
<
R
:
:
Offset
>
)
-
>
Self
{
PubTypesEntry
{
unit_header_offset
die_offset
name
}
}
}
#
[
derive
(
Debug
Clone
)
]
pub
struct
DebugPubTypes
<
R
:
Reader
>
(
DebugLookup
<
R
PubStuffParser
<
R
PubTypesEntry
<
R
>
>
>
)
;
impl
<
'
input
Endian
>
DebugPubTypes
<
EndianSlice
<
'
input
Endian
>
>
where
Endian
:
Endianity
{
pub
fn
new
(
debug_pubtypes_section
:
&
'
input
[
u8
]
endian
:
Endian
)
-
>
Self
{
Self
:
:
from
(
EndianSlice
:
:
new
(
debug_pubtypes_section
endian
)
)
}
}
impl
<
R
:
Reader
>
DebugPubTypes
<
R
>
{
pub
fn
items
(
&
self
)
-
>
PubTypesEntryIter
<
R
>
{
PubTypesEntryIter
(
self
.
0
.
items
(
)
)
}
}
impl
<
R
:
Reader
>
Section
<
R
>
for
DebugPubTypes
<
R
>
{
fn
id
(
)
-
>
SectionId
{
SectionId
:
:
DebugPubTypes
}
fn
reader
(
&
self
)
-
>
&
R
{
self
.
0
.
reader
(
)
}
}
impl
<
R
:
Reader
>
From
<
R
>
for
DebugPubTypes
<
R
>
{
fn
from
(
debug_pubtypes_section
:
R
)
-
>
Self
{
DebugPubTypes
(
DebugLookup
:
:
from
(
debug_pubtypes_section
)
)
}
}
#
[
derive
(
Debug
Clone
)
]
pub
struct
PubTypesEntryIter
<
R
:
Reader
>
(
LookupEntryIter
<
R
PubStuffParser
<
R
PubTypesEntry
<
R
>
>
>
)
;
impl
<
R
:
Reader
>
PubTypesEntryIter
<
R
>
{
pub
fn
next
(
&
mut
self
)
-
>
Result
<
Option
<
PubTypesEntry
<
R
>
>
>
{
self
.
0
.
next
(
)
}
}
#
[
cfg
(
feature
=
"
fallible
-
iterator
"
)
]
impl
<
R
:
Reader
>
fallible_iterator
:
:
FallibleIterator
for
PubTypesEntryIter
<
R
>
{
type
Item
=
PubTypesEntry
<
R
>
;
type
Error
=
crate
:
:
read
:
:
Error
;
fn
next
(
&
mut
self
)
-
>
:
:
core
:
:
result
:
:
Result
<
Option
<
Self
:
:
Item
>
Self
:
:
Error
>
{
self
.
0
.
next
(
)
}
}
