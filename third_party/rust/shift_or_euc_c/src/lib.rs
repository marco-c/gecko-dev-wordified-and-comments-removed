#
!
[
doc
(
html_root_url
=
"
https
:
/
/
docs
.
rs
/
shift_or_euc_c
/
0
.
1
.
0
"
)
]
use
encoding_rs
:
:
Encoding
;
use
shift_or_euc
:
:
*
;
#
[
no_mangle
]
pub
unsafe
extern
"
C
"
fn
shift_or_euc_detector_new
(
allow_2022
:
bool
)
-
>
*
mut
Detector
{
Box
:
:
into_raw
(
Box
:
:
new
(
Detector
:
:
new
(
allow_2022
)
)
)
}
#
[
no_mangle
]
pub
unsafe
extern
"
C
"
fn
shift_or_euc_detector_free
(
detector
:
*
mut
Detector
)
{
let
_
=
Box
:
:
from_raw
(
detector
)
;
}
#
[
no_mangle
]
pub
unsafe
extern
"
C
"
fn
shift_or_euc_detector_feed
(
detector
:
*
mut
Detector
buffer
:
*
const
u8
buffer_len
:
usize
last
:
bool
)
-
>
*
const
Encoding
{
if
let
Some
(
encoding
)
=
(
*
detector
)
.
feed
(
:
:
std
:
:
slice
:
:
from_raw_parts
(
buffer
buffer_len
)
last
)
{
encoding
}
else
{
:
:
std
:
:
ptr
:
:
null
(
)
}
}
