use
tokio_io
:
:
AsyncWrite
;
use
futures
:
:
Poll
;
use
std
:
:
io
:
:
{
self
Stderr
as
StdStderr
Write
}
;
#
[
derive
(
Debug
)
]
pub
struct
Stderr
{
std
:
StdStderr
}
pub
fn
stderr
(
)
-
>
Stderr
{
let
std
=
io
:
:
stderr
(
)
;
Stderr
{
std
}
}
impl
Write
for
Stderr
{
fn
write
(
&
mut
self
buf
:
&
[
u8
]
)
-
>
io
:
:
Result
<
usize
>
{
:
:
would_block
(
|
|
self
.
std
.
write
(
buf
)
)
}
fn
flush
(
&
mut
self
)
-
>
io
:
:
Result
<
(
)
>
{
:
:
would_block
(
|
|
self
.
std
.
flush
(
)
)
}
}
impl
AsyncWrite
for
Stderr
{
fn
shutdown
(
&
mut
self
)
-
>
Poll
<
(
)
io
:
:
Error
>
{
Ok
(
(
)
.
into
(
)
)
}
}
