use
std
:
:
sync
:
:
Mutex
;
#
[
derive
(
PartialEq
Eq
PartialOrd
Ord
Hash
Clone
Debug
)
]
pub
enum
Event
{
Intern
(
u64
)
Insert
(
u64
String
)
Remove
(
u64
)
}
lazy_static
!
{
pub
static
ref
LOG
:
Mutex
<
Vec
<
Event
>
>
=
Mutex
:
:
new
(
Vec
:
:
with_capacity
(
50_000
)
)
;
}
pub
fn
log
(
e
:
Event
)
{
LOG
.
lock
(
)
.
unwrap
(
)
.
push
(
e
)
;
}
macro_rules
!
log
(
(
e
:
expr
)
=
>
(
:
:
event
:
:
log
(
e
)
)
)
;
