use
alloc
:
:
vec
:
:
Vec
;
use
crate
:
:
{
Features
TextureAspect
TextureSampleType
TextureUsages
}
;
#
[
cfg
(
any
(
feature
=
"
serde
"
test
)
)
]
use
serde
:
:
{
Deserialize
Serialize
}
;
#
[
repr
(
C
)
]
#
[
derive
(
Copy
Clone
Debug
Hash
Eq
PartialEq
)
]
#
[
cfg_attr
(
feature
=
"
serde
"
derive
(
serde
:
:
Serialize
serde
:
:
Deserialize
)
)
]
pub
enum
AstcBlock
{
B4x4
B5x4
B5x5
B6x5
B6x6
B8x5
B8x6
B8x8
B10x5
B10x6
B10x8
B10x10
B12x10
B12x12
}
#
[
repr
(
C
)
]
#
[
derive
(
Copy
Clone
Debug
Hash
Eq
PartialEq
)
]
#
[
cfg_attr
(
feature
=
"
serde
"
derive
(
serde
:
:
Serialize
serde
:
:
Deserialize
)
)
]
pub
enum
AstcChannel
{
Unorm
UnormSrgb
Hdr
}
#
[
repr
(
C
)
]
#
[
derive
(
Copy
Clone
Debug
Hash
Eq
PartialEq
)
]
pub
enum
TextureFormat
{
R8Unorm
R8Snorm
R8Uint
R8Sint
R16Uint
R16Sint
R16Unorm
R16Snorm
R16Float
Rg8Unorm
Rg8Snorm
Rg8Uint
Rg8Sint
R32Uint
R32Sint
R32Float
Rg16Uint
Rg16Sint
Rg16Unorm
Rg16Snorm
Rg16Float
Rgba8Unorm
Rgba8UnormSrgb
Rgba8Snorm
Rgba8Uint
Rgba8Sint
Bgra8Unorm
Bgra8UnormSrgb
Rgb9e5Ufloat
Rgb10a2Uint
Rgb10a2Unorm
Rg11b10Ufloat
R64Uint
Rg32Uint
Rg32Sint
Rg32Float
Rgba16Uint
Rgba16Sint
Rgba16Unorm
Rgba16Snorm
Rgba16Float
Rgba32Uint
Rgba32Sint
Rgba32Float
Stencil8
Depth16Unorm
Depth24Plus
Depth24PlusStencil8
Depth32Float
Depth32FloatStencil8
NV12
P010
Bc1RgbaUnorm
Bc1RgbaUnormSrgb
Bc2RgbaUnorm
Bc2RgbaUnormSrgb
Bc3RgbaUnorm
Bc3RgbaUnormSrgb
Bc4RUnorm
Bc4RSnorm
Bc5RgUnorm
Bc5RgSnorm
Bc6hRgbUfloat
Bc6hRgbFloat
Bc7RgbaUnorm
Bc7RgbaUnormSrgb
Etc2Rgb8Unorm
Etc2Rgb8UnormSrgb
Etc2Rgb8A1Unorm
Etc2Rgb8A1UnormSrgb
Etc2Rgba8Unorm
Etc2Rgba8UnormSrgb
EacR11Unorm
EacR11Snorm
EacRg11Unorm
EacRg11Snorm
Astc
{
block
:
AstcBlock
channel
:
AstcChannel
}
}
impl
TextureFormat
{
#
[
must_use
]
pub
fn
aspect_specific_format
(
&
self
aspect
:
TextureAspect
)
-
>
Option
<
Self
>
{
match
(
*
self
aspect
)
{
(
Self
:
:
Stencil8
TextureAspect
:
:
StencilOnly
)
=
>
Some
(
*
self
)
(
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth32Float
TextureAspect
:
:
DepthOnly
)
=
>
Some
(
*
self
)
(
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32FloatStencil8
TextureAspect
:
:
StencilOnly
)
=
>
Some
(
Self
:
:
Stencil8
)
(
Self
:
:
Depth24PlusStencil8
TextureAspect
:
:
DepthOnly
)
=
>
Some
(
Self
:
:
Depth24Plus
)
(
Self
:
:
Depth32FloatStencil8
TextureAspect
:
:
DepthOnly
)
=
>
Some
(
Self
:
:
Depth32Float
)
(
Self
:
:
NV12
TextureAspect
:
:
Plane0
)
=
>
Some
(
Self
:
:
R8Unorm
)
(
Self
:
:
NV12
TextureAspect
:
:
Plane1
)
=
>
Some
(
Self
:
:
Rg8Unorm
)
(
Self
:
:
P010
TextureAspect
:
:
Plane0
)
=
>
Some
(
Self
:
:
R16Unorm
)
(
Self
:
:
P010
TextureAspect
:
:
Plane1
)
=
>
Some
(
Self
:
:
Rg16Unorm
)
(
format
TextureAspect
:
:
All
)
if
!
format
.
is_multi_planar_format
(
)
=
>
Some
(
format
)
_
=
>
None
}
}
#
[
must_use
]
pub
fn
is_depth_stencil_component
(
&
self
combined_format
:
Self
)
-
>
bool
{
match
(
combined_format
*
self
)
{
(
Self
:
:
Depth24PlusStencil8
Self
:
:
Depth24Plus
|
Self
:
:
Stencil8
)
|
(
Self
:
:
Depth32FloatStencil8
Self
:
:
Depth32Float
|
Self
:
:
Stencil8
)
=
>
true
_
=
>
false
}
}
#
[
must_use
]
pub
fn
is_depth_stencil_format
(
&
self
)
-
>
bool
{
match
*
self
{
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
|
Self
:
:
Depth32FloatStencil8
=
>
true
_
=
>
false
}
}
#
[
must_use
]
pub
fn
is_combined_depth_stencil_format
(
&
self
)
-
>
bool
{
match
*
self
{
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32FloatStencil8
=
>
true
_
=
>
false
}
}
#
[
must_use
]
pub
fn
is_multi_planar_format
(
&
self
)
-
>
bool
{
self
.
planes
(
)
.
is_some
(
)
}
#
[
must_use
]
pub
fn
planes
(
&
self
)
-
>
Option
<
u32
>
{
match
*
self
{
Self
:
:
NV12
=
>
Some
(
2
)
Self
:
:
P010
=
>
Some
(
2
)
_
=
>
None
}
}
#
[
must_use
]
pub
fn
subsampling_factors
(
&
self
plane
:
Option
<
u32
>
)
-
>
(
u32
u32
)
{
match
*
self
{
Self
:
:
NV12
|
Self
:
:
P010
=
>
match
plane
{
Some
(
0
)
=
>
(
1
1
)
Some
(
1
)
=
>
(
2
2
)
Some
(
plane
)
=
>
unreachable
!
(
"
plane
{
plane
}
is
not
valid
for
{
self
:
?
}
"
)
None
=
>
unreachable
!
(
"
the
plane
must
be
specified
for
multi
-
planar
formats
"
)
}
_
=
>
(
1
1
)
}
}
#
[
must_use
]
pub
fn
has_color_aspect
(
&
self
)
-
>
bool
{
!
self
.
is_depth_stencil_format
(
)
}
#
[
must_use
]
pub
fn
has_depth_aspect
(
&
self
)
-
>
bool
{
match
*
self
{
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
|
Self
:
:
Depth32FloatStencil8
=
>
true
_
=
>
false
}
}
#
[
must_use
]
pub
fn
has_stencil_aspect
(
&
self
)
-
>
bool
{
match
*
self
{
Self
:
:
Stencil8
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32FloatStencil8
=
>
true
_
=
>
false
}
}
#
[
must_use
]
pub
fn
size_multiple_requirement
(
&
self
)
-
>
(
u32
u32
)
{
match
*
self
{
Self
:
:
NV12
=
>
(
2
2
)
Self
:
:
P010
=
>
(
2
2
)
_
=
>
self
.
block_dimensions
(
)
}
}
#
[
must_use
]
pub
fn
block_dimensions
(
&
self
)
-
>
(
u32
u32
)
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
|
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
R16Float
|
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
|
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rg16Float
|
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
|
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
|
Self
:
:
R64Uint
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
|
Self
:
:
Rgba16Float
|
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
|
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
|
Self
:
:
Depth32FloatStencil8
|
Self
:
:
NV12
|
Self
:
:
P010
=
>
(
1
1
)
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
=
>
(
4
4
)
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
=
>
(
4
4
)
Self
:
:
Astc
{
block
.
.
}
=
>
match
block
{
AstcBlock
:
:
B4x4
=
>
(
4
4
)
AstcBlock
:
:
B5x4
=
>
(
5
4
)
AstcBlock
:
:
B5x5
=
>
(
5
5
)
AstcBlock
:
:
B6x5
=
>
(
6
5
)
AstcBlock
:
:
B6x6
=
>
(
6
6
)
AstcBlock
:
:
B8x5
=
>
(
8
5
)
AstcBlock
:
:
B8x6
=
>
(
8
6
)
AstcBlock
:
:
B8x8
=
>
(
8
8
)
AstcBlock
:
:
B10x5
=
>
(
10
5
)
AstcBlock
:
:
B10x6
=
>
(
10
6
)
AstcBlock
:
:
B10x8
=
>
(
10
8
)
AstcBlock
:
:
B10x10
=
>
(
10
10
)
AstcBlock
:
:
B12x10
=
>
(
12
10
)
AstcBlock
:
:
B12x12
=
>
(
12
12
)
}
}
}
#
[
must_use
]
pub
fn
is_compressed
(
&
self
)
-
>
bool
{
self
.
block_dimensions
(
)
!
=
(
1
1
)
}
#
[
must_use
]
pub
fn
is_bcn
(
&
self
)
-
>
bool
{
self
.
required_features
(
)
=
=
Features
:
:
TEXTURE_COMPRESSION_BC
}
#
[
must_use
]
pub
fn
is_astc
(
&
self
)
-
>
bool
{
self
.
required_features
(
)
=
=
Features
:
:
TEXTURE_COMPRESSION_ASTC
|
|
self
.
required_features
(
)
=
=
Features
:
:
TEXTURE_COMPRESSION_ASTC_HDR
}
#
[
must_use
]
pub
fn
required_features
(
&
self
)
-
>
Features
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
|
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Float
|
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
|
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Float
|
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
|
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Float
|
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
|
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
=
>
Features
:
:
empty
(
)
Self
:
:
R64Uint
=
>
Features
:
:
TEXTURE_INT64_ATOMIC
Self
:
:
Depth32FloatStencil8
=
>
Features
:
:
DEPTH32FLOAT_STENCIL8
Self
:
:
NV12
=
>
Features
:
:
TEXTURE_FORMAT_NV12
Self
:
:
P010
=
>
Features
:
:
TEXTURE_FORMAT_P010
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
=
>
Features
:
:
TEXTURE_FORMAT_16BIT_NORM
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
=
>
Features
:
:
TEXTURE_COMPRESSION_BC
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
=
>
Features
:
:
TEXTURE_COMPRESSION_ETC2
Self
:
:
Astc
{
channel
.
.
}
=
>
match
channel
{
AstcChannel
:
:
Hdr
=
>
Features
:
:
TEXTURE_COMPRESSION_ASTC_HDR
AstcChannel
:
:
Unorm
|
AstcChannel
:
:
UnormSrgb
=
>
Features
:
:
TEXTURE_COMPRESSION_ASTC
}
}
}
#
[
must_use
]
pub
fn
guaranteed_format_features
(
&
self
device_features
:
Features
)
-
>
TextureFormatFeatures
{
let
none
=
TextureFormatFeatureFlags
:
:
empty
(
)
;
let
msaa
=
TextureFormatFeatureFlags
:
:
MULTISAMPLE_X4
;
let
msaa_resolve
=
msaa
|
TextureFormatFeatureFlags
:
:
MULTISAMPLE_RESOLVE
;
let
s_ro_wo
=
TextureFormatFeatureFlags
:
:
STORAGE_READ_ONLY
|
TextureFormatFeatureFlags
:
:
STORAGE_WRITE_ONLY
;
let
s_all
=
s_ro_wo
|
TextureFormatFeatureFlags
:
:
STORAGE_READ_WRITE
;
let
basic
=
TextureUsages
:
:
COPY_SRC
|
TextureUsages
:
:
COPY_DST
|
TextureUsages
:
:
TEXTURE_BINDING
;
let
attachment
=
basic
|
TextureUsages
:
:
RENDER_ATTACHMENT
|
TextureUsages
:
:
TRANSIENT
;
let
storage
=
basic
|
TextureUsages
:
:
STORAGE_BINDING
;
let
binding
=
TextureUsages
:
:
TEXTURE_BINDING
;
let
all_flags
=
attachment
|
storage
|
binding
;
let
atomic_64
=
if
device_features
.
contains
(
Features
:
:
TEXTURE_ATOMIC
)
{
storage
|
binding
|
TextureUsages
:
:
STORAGE_ATOMIC
}
else
{
storage
|
binding
}
;
let
atomic
=
attachment
|
atomic_64
;
let
(
rg11b10f_f
rg11b10f_u
)
=
if
device_features
.
contains
(
Features
:
:
RG11B10UFLOAT_RENDERABLE
)
{
(
msaa_resolve
attachment
)
}
else
{
(
msaa
basic
)
}
;
let
(
bgra8unorm_f
bgra8unorm
)
=
if
device_features
.
contains
(
Features
:
:
BGRA8UNORM_STORAGE
)
{
(
msaa_resolve
|
TextureFormatFeatureFlags
:
:
STORAGE_WRITE_ONLY
attachment
|
TextureUsages
:
:
STORAGE_BINDING
)
}
else
{
(
msaa_resolve
attachment
)
}
;
#
[
rustfmt
:
:
skip
]
let
(
mut
flags
allowed_usages
)
=
match
*
self
{
Self
:
:
R8Unorm
=
>
(
msaa_resolve
attachment
)
Self
:
:
R8Snorm
=
>
(
none
basic
)
Self
:
:
R8Uint
=
>
(
msaa
attachment
)
Self
:
:
R8Sint
=
>
(
msaa
attachment
)
Self
:
:
R16Uint
=
>
(
msaa
attachment
)
Self
:
:
R16Sint
=
>
(
msaa
attachment
)
Self
:
:
R16Float
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rg8Unorm
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rg8Snorm
=
>
(
none
basic
)
Self
:
:
Rg8Uint
=
>
(
msaa
attachment
)
Self
:
:
Rg8Sint
=
>
(
msaa
attachment
)
Self
:
:
R32Uint
=
>
(
s_all
atomic
)
Self
:
:
R32Sint
=
>
(
s_all
atomic
)
Self
:
:
R32Float
=
>
(
msaa
|
s_all
all_flags
)
Self
:
:
Rg16Uint
=
>
(
msaa
attachment
)
Self
:
:
Rg16Sint
=
>
(
msaa
attachment
)
Self
:
:
Rg16Float
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rgba8Unorm
=
>
(
msaa_resolve
|
s_ro_wo
all_flags
)
Self
:
:
Rgba8UnormSrgb
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rgba8Snorm
=
>
(
s_ro_wo
storage
)
Self
:
:
Rgba8Uint
=
>
(
msaa
|
s_ro_wo
all_flags
)
Self
:
:
Rgba8Sint
=
>
(
msaa
|
s_ro_wo
all_flags
)
Self
:
:
Bgra8Unorm
=
>
(
bgra8unorm_f
bgra8unorm
)
Self
:
:
Bgra8UnormSrgb
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rgb10a2Uint
=
>
(
msaa
attachment
)
Self
:
:
Rgb10a2Unorm
=
>
(
msaa_resolve
attachment
)
Self
:
:
Rg11b10Ufloat
=
>
(
rg11b10f_f
rg11b10f_u
)
Self
:
:
R64Uint
=
>
(
s_ro_wo
atomic_64
)
Self
:
:
Rg32Uint
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Rg32Sint
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Rg32Float
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Rgba16Uint
=
>
(
msaa
|
s_ro_wo
all_flags
)
Self
:
:
Rgba16Sint
=
>
(
msaa
|
s_ro_wo
all_flags
)
Self
:
:
Rgba16Float
=
>
(
msaa_resolve
|
s_ro_wo
all_flags
)
Self
:
:
Rgba32Uint
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Rgba32Sint
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Rgba32Float
=
>
(
s_ro_wo
all_flags
)
Self
:
:
Stencil8
=
>
(
msaa
attachment
)
Self
:
:
Depth16Unorm
=
>
(
msaa
attachment
)
Self
:
:
Depth24Plus
=
>
(
msaa
attachment
)
Self
:
:
Depth24PlusStencil8
=
>
(
msaa
attachment
)
Self
:
:
Depth32Float
=
>
(
msaa
attachment
)
Self
:
:
Depth32FloatStencil8
=
>
(
msaa
attachment
)
Self
:
:
NV12
=
>
(
none
binding
)
Self
:
:
P010
=
>
(
none
binding
)
Self
:
:
R16Unorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
R16Snorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
Rg16Unorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
Rg16Snorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
Rgba16Unorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
Rgba16Snorm
=
>
(
msaa
|
s_ro_wo
storage
)
Self
:
:
Rgb9e5Ufloat
=
>
(
none
basic
)
Self
:
:
Bc1RgbaUnorm
=
>
(
none
basic
)
Self
:
:
Bc1RgbaUnormSrgb
=
>
(
none
basic
)
Self
:
:
Bc2RgbaUnorm
=
>
(
none
basic
)
Self
:
:
Bc2RgbaUnormSrgb
=
>
(
none
basic
)
Self
:
:
Bc3RgbaUnorm
=
>
(
none
basic
)
Self
:
:
Bc3RgbaUnormSrgb
=
>
(
none
basic
)
Self
:
:
Bc4RUnorm
=
>
(
none
basic
)
Self
:
:
Bc4RSnorm
=
>
(
none
basic
)
Self
:
:
Bc5RgUnorm
=
>
(
none
basic
)
Self
:
:
Bc5RgSnorm
=
>
(
none
basic
)
Self
:
:
Bc6hRgbUfloat
=
>
(
none
basic
)
Self
:
:
Bc6hRgbFloat
=
>
(
none
basic
)
Self
:
:
Bc7RgbaUnorm
=
>
(
none
basic
)
Self
:
:
Bc7RgbaUnormSrgb
=
>
(
none
basic
)
Self
:
:
Etc2Rgb8Unorm
=
>
(
none
basic
)
Self
:
:
Etc2Rgb8UnormSrgb
=
>
(
none
basic
)
Self
:
:
Etc2Rgb8A1Unorm
=
>
(
none
basic
)
Self
:
:
Etc2Rgb8A1UnormSrgb
=
>
(
none
basic
)
Self
:
:
Etc2Rgba8Unorm
=
>
(
none
basic
)
Self
:
:
Etc2Rgba8UnormSrgb
=
>
(
none
basic
)
Self
:
:
EacR11Unorm
=
>
(
none
basic
)
Self
:
:
EacR11Snorm
=
>
(
none
basic
)
Self
:
:
EacRg11Unorm
=
>
(
none
basic
)
Self
:
:
EacRg11Snorm
=
>
(
none
basic
)
Self
:
:
Astc
{
.
.
}
=
>
(
none
basic
)
}
;
let
sample_type1
=
self
.
sample_type
(
None
Some
(
device_features
)
)
;
let
is_filterable
=
sample_type1
=
=
Some
(
TextureSampleType
:
:
Float
{
filterable
:
true
}
)
;
let
sample_type2
=
self
.
sample_type
(
None
None
)
;
let
is_blendable
=
sample_type2
=
=
Some
(
TextureSampleType
:
:
Float
{
filterable
:
true
}
)
;
flags
.
set
(
TextureFormatFeatureFlags
:
:
FILTERABLE
is_filterable
)
;
flags
.
set
(
TextureFormatFeatureFlags
:
:
BLENDABLE
is_blendable
)
;
flags
.
set
(
TextureFormatFeatureFlags
:
:
STORAGE_ATOMIC
allowed_usages
.
contains
(
TextureUsages
:
:
STORAGE_ATOMIC
)
)
;
TextureFormatFeatures
{
allowed_usages
flags
}
}
#
[
must_use
]
pub
fn
sample_type
(
&
self
aspect
:
Option
<
TextureAspect
>
device_features
:
Option
<
Features
>
)
-
>
Option
<
TextureSampleType
>
{
let
float
=
TextureSampleType
:
:
Float
{
filterable
:
true
}
;
let
unfilterable_float
=
TextureSampleType
:
:
Float
{
filterable
:
false
}
;
let
float32_sample_type
=
TextureSampleType
:
:
Float
{
filterable
:
device_features
.
unwrap_or
(
Features
:
:
empty
(
)
)
.
contains
(
Features
:
:
FLOAT32_FILTERABLE
)
}
;
let
depth
=
TextureSampleType
:
:
Depth
;
let
uint
=
TextureSampleType
:
:
Uint
;
let
sint
=
TextureSampleType
:
:
Sint
;
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
|
Self
:
:
R16Float
|
Self
:
:
Rg16Float
|
Self
:
:
Rgba16Float
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
=
>
Some
(
float
)
Self
:
:
R32Float
|
Self
:
:
Rg32Float
|
Self
:
:
Rgba32Float
=
>
Some
(
float32_sample_type
)
Self
:
:
R8Uint
|
Self
:
:
Rg8Uint
|
Self
:
:
Rgba8Uint
|
Self
:
:
R16Uint
|
Self
:
:
Rg16Uint
|
Self
:
:
Rgba16Uint
|
Self
:
:
R32Uint
|
Self
:
:
R64Uint
|
Self
:
:
Rg32Uint
|
Self
:
:
Rgba32Uint
|
Self
:
:
Rgb10a2Uint
=
>
Some
(
uint
)
Self
:
:
R8Sint
|
Self
:
:
Rg8Sint
|
Self
:
:
Rgba8Sint
|
Self
:
:
R16Sint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rgba16Sint
|
Self
:
:
R32Sint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rgba32Sint
=
>
Some
(
sint
)
Self
:
:
Stencil8
=
>
Some
(
uint
)
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth32Float
=
>
Some
(
depth
)
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32FloatStencil8
=
>
match
aspect
{
Some
(
TextureAspect
:
:
DepthOnly
)
=
>
Some
(
depth
)
Some
(
TextureAspect
:
:
StencilOnly
)
=
>
Some
(
uint
)
_
=
>
None
}
Self
:
:
NV12
|
Self
:
:
P010
=
>
match
aspect
{
Some
(
TextureAspect
:
:
Plane0
)
|
Some
(
TextureAspect
:
:
Plane1
)
=
>
{
Some
(
unfilterable_float
)
}
_
=
>
None
}
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
=
>
Some
(
float
)
Self
:
:
Rgb9e5Ufloat
=
>
Some
(
float
)
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
=
>
Some
(
float
)
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
=
>
Some
(
float
)
Self
:
:
Astc
{
.
.
}
=
>
Some
(
float
)
}
}
#
[
deprecated
(
since
=
"
0
.
19
.
0
"
note
=
"
Use
block_copy_size
instead
.
"
)
]
#
[
must_use
]
pub
fn
block_size
(
&
self
aspect
:
Option
<
TextureAspect
>
)
-
>
Option
<
u32
>
{
self
.
block_copy_size
(
aspect
)
}
#
[
must_use
]
pub
fn
block_copy_size
(
&
self
aspect
:
Option
<
TextureAspect
>
)
-
>
Option
<
u32
>
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
=
>
Some
(
1
)
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
=
>
Some
(
2
)
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Float
=
>
{
Some
(
2
)
}
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
=
>
Some
(
4
)
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Float
=
>
Some
(
4
)
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
=
>
Some
(
4
)
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
=
>
{
Some
(
4
)
}
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Float
=
>
Some
(
8
)
Self
:
:
R64Uint
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
=
>
Some
(
8
)
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
=
>
Some
(
16
)
Self
:
:
Stencil8
=
>
Some
(
1
)
Self
:
:
Depth16Unorm
=
>
Some
(
2
)
Self
:
:
Depth32Float
=
>
Some
(
4
)
Self
:
:
Depth24Plus
=
>
None
Self
:
:
Depth24PlusStencil8
=
>
match
aspect
{
Some
(
TextureAspect
:
:
DepthOnly
)
=
>
None
Some
(
TextureAspect
:
:
StencilOnly
)
=
>
Some
(
1
)
_
=
>
None
}
Self
:
:
Depth32FloatStencil8
=
>
match
aspect
{
Some
(
TextureAspect
:
:
DepthOnly
)
=
>
Some
(
4
)
Some
(
TextureAspect
:
:
StencilOnly
)
=
>
Some
(
1
)
_
=
>
None
}
Self
:
:
NV12
=
>
match
aspect
{
Some
(
TextureAspect
:
:
Plane0
)
=
>
Some
(
1
)
Some
(
TextureAspect
:
:
Plane1
)
=
>
Some
(
2
)
_
=
>
None
}
Self
:
:
P010
=
>
match
aspect
{
Some
(
TextureAspect
:
:
Plane0
)
=
>
Some
(
2
)
Some
(
TextureAspect
:
:
Plane1
)
=
>
Some
(
4
)
_
=
>
None
}
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
=
>
{
Some
(
8
)
}
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
=
>
Some
(
16
)
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
=
>
Some
(
8
)
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
=
>
Some
(
16
)
Self
:
:
Astc
{
.
.
}
=
>
Some
(
16
)
}
}
pub
const
MAX_TARGET_PIXEL_BYTE_COST
:
u32
=
16
;
#
[
must_use
]
pub
fn
target_pixel_byte_cost
(
&
self
)
-
>
Option
<
u32
>
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
=
>
Some
(
1
)
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
|
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
R16Float
=
>
Some
(
2
)
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rg16Float
|
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
=
>
Some
(
4
)
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
|
Self
:
:
Rgba16Float
|
Self
:
:
R64Uint
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
|
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
=
>
Some
(
8
)
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
=
>
Some
(
16
)
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
|
Self
:
:
Depth32FloatStencil8
|
Self
:
:
NV12
|
Self
:
:
P010
|
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
|
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
|
Self
:
:
Astc
{
.
.
}
=
>
None
}
}
#
[
must_use
]
pub
fn
target_component_alignment
(
&
self
)
-
>
Option
<
u32
>
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
|
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
|
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
=
>
Some
(
1
)
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
R16Float
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rg16Float
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
|
Self
:
:
Rgba16Float
=
>
Some
(
2
)
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
|
Self
:
:
R64Uint
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
|
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
|
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
|
Self
:
:
Rg11b10Ufloat
=
>
Some
(
4
)
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32Float
|
Self
:
:
Depth32FloatStencil8
|
Self
:
:
NV12
|
Self
:
:
P010
|
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
|
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
|
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
|
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
|
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
|
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
|
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
|
Self
:
:
Astc
{
.
.
}
=
>
None
}
}
#
[
must_use
]
pub
fn
components
(
&
self
)
-
>
u8
{
self
.
components_with_aspect
(
TextureAspect
:
:
All
)
}
#
[
must_use
]
pub
fn
components_with_aspect
(
&
self
aspect
:
TextureAspect
)
-
>
u8
{
match
*
self
{
Self
:
:
R8Unorm
|
Self
:
:
R8Snorm
|
Self
:
:
R8Uint
|
Self
:
:
R8Sint
|
Self
:
:
R16Unorm
|
Self
:
:
R16Snorm
|
Self
:
:
R16Uint
|
Self
:
:
R16Sint
|
Self
:
:
R16Float
|
Self
:
:
R32Uint
|
Self
:
:
R32Sint
|
Self
:
:
R32Float
|
Self
:
:
R64Uint
=
>
1
Self
:
:
Rg8Unorm
|
Self
:
:
Rg8Snorm
|
Self
:
:
Rg8Uint
|
Self
:
:
Rg8Sint
|
Self
:
:
Rg16Unorm
|
Self
:
:
Rg16Snorm
|
Self
:
:
Rg16Uint
|
Self
:
:
Rg16Sint
|
Self
:
:
Rg16Float
|
Self
:
:
Rg32Uint
|
Self
:
:
Rg32Sint
|
Self
:
:
Rg32Float
=
>
2
Self
:
:
Rgba8Unorm
|
Self
:
:
Rgba8UnormSrgb
|
Self
:
:
Rgba8Snorm
|
Self
:
:
Rgba8Uint
|
Self
:
:
Rgba8Sint
|
Self
:
:
Bgra8Unorm
|
Self
:
:
Bgra8UnormSrgb
|
Self
:
:
Rgba16Unorm
|
Self
:
:
Rgba16Snorm
|
Self
:
:
Rgba16Uint
|
Self
:
:
Rgba16Sint
|
Self
:
:
Rgba16Float
|
Self
:
:
Rgba32Uint
|
Self
:
:
Rgba32Sint
|
Self
:
:
Rgba32Float
=
>
4
Self
:
:
Rgb9e5Ufloat
|
Self
:
:
Rg11b10Ufloat
=
>
3
Self
:
:
Rgb10a2Uint
|
Self
:
:
Rgb10a2Unorm
=
>
4
Self
:
:
Stencil8
|
Self
:
:
Depth16Unorm
|
Self
:
:
Depth24Plus
|
Self
:
:
Depth32Float
=
>
1
Self
:
:
Depth24PlusStencil8
|
Self
:
:
Depth32FloatStencil8
=
>
match
aspect
{
TextureAspect
:
:
DepthOnly
|
TextureAspect
:
:
StencilOnly
=
>
1
_
=
>
2
}
Self
:
:
NV12
|
Self
:
:
P010
=
>
match
aspect
{
TextureAspect
:
:
Plane0
=
>
1
TextureAspect
:
:
Plane1
=
>
2
_
=
>
3
}
Self
:
:
Bc4RUnorm
|
Self
:
:
Bc4RSnorm
=
>
1
Self
:
:
Bc5RgUnorm
|
Self
:
:
Bc5RgSnorm
=
>
2
Self
:
:
Bc6hRgbUfloat
|
Self
:
:
Bc6hRgbFloat
=
>
3
Self
:
:
Bc1RgbaUnorm
|
Self
:
:
Bc1RgbaUnormSrgb
|
Self
:
:
Bc2RgbaUnorm
|
Self
:
:
Bc2RgbaUnormSrgb
|
Self
:
:
Bc3RgbaUnorm
|
Self
:
:
Bc3RgbaUnormSrgb
|
Self
:
:
Bc7RgbaUnorm
|
Self
:
:
Bc7RgbaUnormSrgb
=
>
4
Self
:
:
EacR11Unorm
|
Self
:
:
EacR11Snorm
=
>
1
Self
:
:
EacRg11Unorm
|
Self
:
:
EacRg11Snorm
=
>
2
Self
:
:
Etc2Rgb8Unorm
|
Self
:
:
Etc2Rgb8UnormSrgb
=
>
3
Self
:
:
Etc2Rgb8A1Unorm
|
Self
:
:
Etc2Rgb8A1UnormSrgb
|
Self
:
:
Etc2Rgba8Unorm
|
Self
:
:
Etc2Rgba8UnormSrgb
=
>
4
Self
:
:
Astc
{
.
.
}
=
>
4
}
}
#
[
must_use
]
pub
fn
remove_srgb_suffix
(
&
self
)
-
>
TextureFormat
{
match
*
self
{
Self
:
:
Rgba8UnormSrgb
=
>
Self
:
:
Rgba8Unorm
Self
:
:
Bgra8UnormSrgb
=
>
Self
:
:
Bgra8Unorm
Self
:
:
Bc1RgbaUnormSrgb
=
>
Self
:
:
Bc1RgbaUnorm
Self
:
:
Bc2RgbaUnormSrgb
=
>
Self
:
:
Bc2RgbaUnorm
Self
:
:
Bc3RgbaUnormSrgb
=
>
Self
:
:
Bc3RgbaUnorm
Self
:
:
Bc7RgbaUnormSrgb
=
>
Self
:
:
Bc7RgbaUnorm
Self
:
:
Etc2Rgb8UnormSrgb
=
>
Self
:
:
Etc2Rgb8Unorm
Self
:
:
Etc2Rgb8A1UnormSrgb
=
>
Self
:
:
Etc2Rgb8A1Unorm
Self
:
:
Etc2Rgba8UnormSrgb
=
>
Self
:
:
Etc2Rgba8Unorm
Self
:
:
Astc
{
block
channel
:
AstcChannel
:
:
UnormSrgb
}
=
>
Self
:
:
Astc
{
block
channel
:
AstcChannel
:
:
Unorm
}
_
=
>
*
self
}
}
#
[
must_use
]
pub
fn
add_srgb_suffix
(
&
self
)
-
>
TextureFormat
{
match
*
self
{
Self
:
:
Rgba8Unorm
=
>
Self
:
:
Rgba8UnormSrgb
Self
:
:
Bgra8Unorm
=
>
Self
:
:
Bgra8UnormSrgb
Self
:
:
Bc1RgbaUnorm
=
>
Self
:
:
Bc1RgbaUnormSrgb
Self
:
:
Bc2RgbaUnorm
=
>
Self
:
:
Bc2RgbaUnormSrgb
Self
:
:
Bc3RgbaUnorm
=
>
Self
:
:
Bc3RgbaUnormSrgb
Self
:
:
Bc7RgbaUnorm
=
>
Self
:
:
Bc7RgbaUnormSrgb
Self
:
:
Etc2Rgb8Unorm
=
>
Self
:
:
Etc2Rgb8UnormSrgb
Self
:
:
Etc2Rgb8A1Unorm
=
>
Self
:
:
Etc2Rgb8A1UnormSrgb
Self
:
:
Etc2Rgba8Unorm
=
>
Self
:
:
Etc2Rgba8UnormSrgb
Self
:
:
Astc
{
block
channel
:
AstcChannel
:
:
Unorm
}
=
>
Self
:
:
Astc
{
block
channel
:
AstcChannel
:
:
UnormSrgb
}
_
=
>
*
self
}
}
#
[
must_use
]
pub
fn
is_srgb
(
&
self
)
-
>
bool
{
*
self
!
=
self
.
remove_srgb_suffix
(
)
}
#
[
must_use
]
pub
fn
theoretical_memory_footprint
(
&
self
size
:
crate
:
:
Extent3d
)
-
>
u64
{
let
(
block_width
block_height
)
=
self
.
block_dimensions
(
)
;
let
block_size
=
self
.
block_copy_size
(
None
)
;
let
approximate_block_size
=
match
block_size
{
Some
(
size
)
=
>
size
None
=
>
match
self
{
Self
:
:
Depth16Unorm
=
>
2
Self
:
:
Depth24Plus
=
>
4
Self
:
:
Depth24PlusStencil8
=
>
4
Self
:
:
Depth32Float
=
>
4
Self
:
:
Depth32FloatStencil8
=
>
8
Self
:
:
Stencil8
=
>
1
Self
:
:
NV12
=
>
3
Self
:
:
P010
=
>
6
f
=
>
{
unimplemented
!
(
"
Memory
footprint
for
format
{
f
:
?
}
is
not
implemented
"
)
;
}
}
}
;
let
width_blocks
=
size
.
width
.
div_ceil
(
block_width
)
as
u64
;
let
height_blocks
=
size
.
height
.
div_ceil
(
block_height
)
as
u64
;
let
total_blocks
=
width_blocks
*
height_blocks
*
size
.
depth_or_array_layers
as
u64
;
total_blocks
*
approximate_block_size
as
u64
}
}
#
[
cfg
(
any
(
feature
=
"
serde
"
test
)
)
]
impl
<
'
de
>
Deserialize
<
'
de
>
for
TextureFormat
{
fn
deserialize
<
D
>
(
deserializer
:
D
)
-
>
Result
<
Self
D
:
:
Error
>
where
D
:
serde
:
:
Deserializer
<
'
de
>
{
use
serde
:
:
de
:
:
{
self
Error
Unexpected
}
;
struct
TextureFormatVisitor
;
impl
de
:
:
Visitor
<
'
_
>
for
TextureFormatVisitor
{
type
Value
=
TextureFormat
;
fn
expecting
(
&
self
formatter
:
&
mut
core
:
:
fmt
:
:
Formatter
)
-
>
core
:
:
fmt
:
:
Result
{
formatter
.
write_str
(
"
a
valid
texture
format
"
)
}
fn
visit_str
<
E
:
Error
>
(
self
s
:
&
str
)
-
>
Result
<
Self
:
:
Value
E
>
{
let
format
=
match
s
{
"
r8unorm
"
=
>
TextureFormat
:
:
R8Unorm
"
r8snorm
"
=
>
TextureFormat
:
:
R8Snorm
"
r8uint
"
=
>
TextureFormat
:
:
R8Uint
"
r8sint
"
=
>
TextureFormat
:
:
R8Sint
"
r16uint
"
=
>
TextureFormat
:
:
R16Uint
"
r16sint
"
=
>
TextureFormat
:
:
R16Sint
"
r16unorm
"
=
>
TextureFormat
:
:
R16Unorm
"
r16snorm
"
=
>
TextureFormat
:
:
R16Snorm
"
r16float
"
=
>
TextureFormat
:
:
R16Float
"
rg8unorm
"
=
>
TextureFormat
:
:
Rg8Unorm
"
rg8snorm
"
=
>
TextureFormat
:
:
Rg8Snorm
"
rg8uint
"
=
>
TextureFormat
:
:
Rg8Uint
"
rg8sint
"
=
>
TextureFormat
:
:
Rg8Sint
"
r32uint
"
=
>
TextureFormat
:
:
R32Uint
"
r32sint
"
=
>
TextureFormat
:
:
R32Sint
"
r32float
"
=
>
TextureFormat
:
:
R32Float
"
rg16uint
"
=
>
TextureFormat
:
:
Rg16Uint
"
rg16sint
"
=
>
TextureFormat
:
:
Rg16Sint
"
rg16unorm
"
=
>
TextureFormat
:
:
Rg16Unorm
"
rg16snorm
"
=
>
TextureFormat
:
:
Rg16Snorm
"
rg16float
"
=
>
TextureFormat
:
:
Rg16Float
"
rgba8unorm
"
=
>
TextureFormat
:
:
Rgba8Unorm
"
rgba8unorm
-
srgb
"
=
>
TextureFormat
:
:
Rgba8UnormSrgb
"
rgba8snorm
"
=
>
TextureFormat
:
:
Rgba8Snorm
"
rgba8uint
"
=
>
TextureFormat
:
:
Rgba8Uint
"
rgba8sint
"
=
>
TextureFormat
:
:
Rgba8Sint
"
bgra8unorm
"
=
>
TextureFormat
:
:
Bgra8Unorm
"
bgra8unorm
-
srgb
"
=
>
TextureFormat
:
:
Bgra8UnormSrgb
"
rgb10a2uint
"
=
>
TextureFormat
:
:
Rgb10a2Uint
"
rgb10a2unorm
"
=
>
TextureFormat
:
:
Rgb10a2Unorm
"
rg11b10ufloat
"
=
>
TextureFormat
:
:
Rg11b10Ufloat
"
r64uint
"
=
>
TextureFormat
:
:
R64Uint
"
rg32uint
"
=
>
TextureFormat
:
:
Rg32Uint
"
rg32sint
"
=
>
TextureFormat
:
:
Rg32Sint
"
rg32float
"
=
>
TextureFormat
:
:
Rg32Float
"
rgba16uint
"
=
>
TextureFormat
:
:
Rgba16Uint
"
rgba16sint
"
=
>
TextureFormat
:
:
Rgba16Sint
"
rgba16unorm
"
=
>
TextureFormat
:
:
Rgba16Unorm
"
rgba16snorm
"
=
>
TextureFormat
:
:
Rgba16Snorm
"
rgba16float
"
=
>
TextureFormat
:
:
Rgba16Float
"
rgba32uint
"
=
>
TextureFormat
:
:
Rgba32Uint
"
rgba32sint
"
=
>
TextureFormat
:
:
Rgba32Sint
"
rgba32float
"
=
>
TextureFormat
:
:
Rgba32Float
"
stencil8
"
=
>
TextureFormat
:
:
Stencil8
"
depth32float
"
=
>
TextureFormat
:
:
Depth32Float
"
depth32float
-
stencil8
"
=
>
TextureFormat
:
:
Depth32FloatStencil8
"
depth16unorm
"
=
>
TextureFormat
:
:
Depth16Unorm
"
depth24plus
"
=
>
TextureFormat
:
:
Depth24Plus
"
depth24plus
-
stencil8
"
=
>
TextureFormat
:
:
Depth24PlusStencil8
"
nv12
"
=
>
TextureFormat
:
:
NV12
"
p010
"
=
>
TextureFormat
:
:
P010
"
rgb9e5ufloat
"
=
>
TextureFormat
:
:
Rgb9e5Ufloat
"
bc1
-
rgba
-
unorm
"
=
>
TextureFormat
:
:
Bc1RgbaUnorm
"
bc1
-
rgba
-
unorm
-
srgb
"
=
>
TextureFormat
:
:
Bc1RgbaUnormSrgb
"
bc2
-
rgba
-
unorm
"
=
>
TextureFormat
:
:
Bc2RgbaUnorm
"
bc2
-
rgba
-
unorm
-
srgb
"
=
>
TextureFormat
:
:
Bc2RgbaUnormSrgb
"
bc3
-
rgba
-
unorm
"
=
>
TextureFormat
:
:
Bc3RgbaUnorm
"
bc3
-
rgba
-
unorm
-
srgb
"
=
>
TextureFormat
:
:
Bc3RgbaUnormSrgb
"
bc4
-
r
-
unorm
"
=
>
TextureFormat
:
:
Bc4RUnorm
"
bc4
-
r
-
snorm
"
=
>
TextureFormat
:
:
Bc4RSnorm
"
bc5
-
rg
-
unorm
"
=
>
TextureFormat
:
:
Bc5RgUnorm
"
bc5
-
rg
-
snorm
"
=
>
TextureFormat
:
:
Bc5RgSnorm
"
bc6h
-
rgb
-
ufloat
"
=
>
TextureFormat
:
:
Bc6hRgbUfloat
"
bc6h
-
rgb
-
float
"
=
>
TextureFormat
:
:
Bc6hRgbFloat
"
bc7
-
rgba
-
unorm
"
=
>
TextureFormat
:
:
Bc7RgbaUnorm
"
bc7
-
rgba
-
unorm
-
srgb
"
=
>
TextureFormat
:
:
Bc7RgbaUnormSrgb
"
etc2
-
rgb8unorm
"
=
>
TextureFormat
:
:
Etc2Rgb8Unorm
"
etc2
-
rgb8unorm
-
srgb
"
=
>
TextureFormat
:
:
Etc2Rgb8UnormSrgb
"
etc2
-
rgb8a1unorm
"
=
>
TextureFormat
:
:
Etc2Rgb8A1Unorm
"
etc2
-
rgb8a1unorm
-
srgb
"
=
>
TextureFormat
:
:
Etc2Rgb8A1UnormSrgb
"
etc2
-
rgba8unorm
"
=
>
TextureFormat
:
:
Etc2Rgba8Unorm
"
etc2
-
rgba8unorm
-
srgb
"
=
>
TextureFormat
:
:
Etc2Rgba8UnormSrgb
"
eac
-
r11unorm
"
=
>
TextureFormat
:
:
EacR11Unorm
"
eac
-
r11snorm
"
=
>
TextureFormat
:
:
EacR11Snorm
"
eac
-
rg11unorm
"
=
>
TextureFormat
:
:
EacRg11Unorm
"
eac
-
rg11snorm
"
=
>
TextureFormat
:
:
EacRg11Snorm
other
=
>
{
if
let
Some
(
parts
)
=
other
.
strip_prefix
(
"
astc
-
"
)
{
let
(
block
channel
)
=
parts
.
split_once
(
'
-
'
)
.
ok_or_else
(
|
|
E
:
:
invalid_value
(
Unexpected
:
:
Str
(
s
)
&
self
)
)
?
;
let
block
=
match
block
{
"
4x4
"
=
>
AstcBlock
:
:
B4x4
"
5x4
"
=
>
AstcBlock
:
:
B5x4
"
5x5
"
=
>
AstcBlock
:
:
B5x5
"
6x5
"
=
>
AstcBlock
:
:
B6x5
"
6x6
"
=
>
AstcBlock
:
:
B6x6
"
8x5
"
=
>
AstcBlock
:
:
B8x5
"
8x6
"
=
>
AstcBlock
:
:
B8x6
"
8x8
"
=
>
AstcBlock
:
:
B8x8
"
10x5
"
=
>
AstcBlock
:
:
B10x5
"
10x6
"
=
>
AstcBlock
:
:
B10x6
"
10x8
"
=
>
AstcBlock
:
:
B10x8
"
10x10
"
=
>
AstcBlock
:
:
B10x10
"
12x10
"
=
>
AstcBlock
:
:
B12x10
"
12x12
"
=
>
AstcBlock
:
:
B12x12
_
=
>
return
Err
(
E
:
:
invalid_value
(
Unexpected
:
:
Str
(
s
)
&
self
)
)
}
;
let
channel
=
match
channel
{
"
unorm
"
=
>
AstcChannel
:
:
Unorm
"
unorm
-
srgb
"
=
>
AstcChannel
:
:
UnormSrgb
"
hdr
"
=
>
AstcChannel
:
:
Hdr
_
=
>
return
Err
(
E
:
:
invalid_value
(
Unexpected
:
:
Str
(
s
)
&
self
)
)
}
;
TextureFormat
:
:
Astc
{
block
channel
}
}
else
{
return
Err
(
E
:
:
invalid_value
(
Unexpected
:
:
Str
(
s
)
&
self
)
)
;
}
}
}
;
Ok
(
format
)
}
}
deserializer
.
deserialize_str
(
TextureFormatVisitor
)
}
}
#
[
cfg
(
any
(
feature
=
"
serde
"
test
)
)
]
impl
Serialize
for
TextureFormat
{
fn
serialize
<
S
>
(
&
self
serializer
:
S
)
-
>
Result
<
S
:
:
Ok
S
:
:
Error
>
where
S
:
serde
:
:
Serializer
{
let
s
:
alloc
:
:
string
:
:
String
;
let
name
=
match
*
self
{
TextureFormat
:
:
R8Unorm
=
>
"
r8unorm
"
TextureFormat
:
:
R8Snorm
=
>
"
r8snorm
"
TextureFormat
:
:
R8Uint
=
>
"
r8uint
"
TextureFormat
:
:
R8Sint
=
>
"
r8sint
"
TextureFormat
:
:
R16Uint
=
>
"
r16uint
"
TextureFormat
:
:
R16Sint
=
>
"
r16sint
"
TextureFormat
:
:
R16Unorm
=
>
"
r16unorm
"
TextureFormat
:
:
R16Snorm
=
>
"
r16snorm
"
TextureFormat
:
:
R16Float
=
>
"
r16float
"
TextureFormat
:
:
Rg8Unorm
=
>
"
rg8unorm
"
TextureFormat
:
:
Rg8Snorm
=
>
"
rg8snorm
"
TextureFormat
:
:
Rg8Uint
=
>
"
rg8uint
"
TextureFormat
:
:
Rg8Sint
=
>
"
rg8sint
"
TextureFormat
:
:
R32Uint
=
>
"
r32uint
"
TextureFormat
:
:
R32Sint
=
>
"
r32sint
"
TextureFormat
:
:
R32Float
=
>
"
r32float
"
TextureFormat
:
:
Rg16Uint
=
>
"
rg16uint
"
TextureFormat
:
:
Rg16Sint
=
>
"
rg16sint
"
TextureFormat
:
:
Rg16Unorm
=
>
"
rg16unorm
"
TextureFormat
:
:
Rg16Snorm
=
>
"
rg16snorm
"
TextureFormat
:
:
Rg16Float
=
>
"
rg16float
"
TextureFormat
:
:
Rgba8Unorm
=
>
"
rgba8unorm
"
TextureFormat
:
:
Rgba8UnormSrgb
=
>
"
rgba8unorm
-
srgb
"
TextureFormat
:
:
Rgba8Snorm
=
>
"
rgba8snorm
"
TextureFormat
:
:
Rgba8Uint
=
>
"
rgba8uint
"
TextureFormat
:
:
Rgba8Sint
=
>
"
rgba8sint
"
TextureFormat
:
:
Bgra8Unorm
=
>
"
bgra8unorm
"
TextureFormat
:
:
Bgra8UnormSrgb
=
>
"
bgra8unorm
-
srgb
"
TextureFormat
:
:
Rgb10a2Uint
=
>
"
rgb10a2uint
"
TextureFormat
:
:
Rgb10a2Unorm
=
>
"
rgb10a2unorm
"
TextureFormat
:
:
Rg11b10Ufloat
=
>
"
rg11b10ufloat
"
TextureFormat
:
:
R64Uint
=
>
"
r64uint
"
TextureFormat
:
:
Rg32Uint
=
>
"
rg32uint
"
TextureFormat
:
:
Rg32Sint
=
>
"
rg32sint
"
TextureFormat
:
:
Rg32Float
=
>
"
rg32float
"
TextureFormat
:
:
Rgba16Uint
=
>
"
rgba16uint
"
TextureFormat
:
:
Rgba16Sint
=
>
"
rgba16sint
"
TextureFormat
:
:
Rgba16Unorm
=
>
"
rgba16unorm
"
TextureFormat
:
:
Rgba16Snorm
=
>
"
rgba16snorm
"
TextureFormat
:
:
Rgba16Float
=
>
"
rgba16float
"
TextureFormat
:
:
Rgba32Uint
=
>
"
rgba32uint
"
TextureFormat
:
:
Rgba32Sint
=
>
"
rgba32sint
"
TextureFormat
:
:
Rgba32Float
=
>
"
rgba32float
"
TextureFormat
:
:
Stencil8
=
>
"
stencil8
"
TextureFormat
:
:
Depth32Float
=
>
"
depth32float
"
TextureFormat
:
:
Depth16Unorm
=
>
"
depth16unorm
"
TextureFormat
:
:
Depth32FloatStencil8
=
>
"
depth32float
-
stencil8
"
TextureFormat
:
:
Depth24Plus
=
>
"
depth24plus
"
TextureFormat
:
:
Depth24PlusStencil8
=
>
"
depth24plus
-
stencil8
"
TextureFormat
:
:
NV12
=
>
"
nv12
"
TextureFormat
:
:
P010
=
>
"
p010
"
TextureFormat
:
:
Rgb9e5Ufloat
=
>
"
rgb9e5ufloat
"
TextureFormat
:
:
Bc1RgbaUnorm
=
>
"
bc1
-
rgba
-
unorm
"
TextureFormat
:
:
Bc1RgbaUnormSrgb
=
>
"
bc1
-
rgba
-
unorm
-
srgb
"
TextureFormat
:
:
Bc2RgbaUnorm
=
>
"
bc2
-
rgba
-
unorm
"
TextureFormat
:
:
Bc2RgbaUnormSrgb
=
>
"
bc2
-
rgba
-
unorm
-
srgb
"
TextureFormat
:
:
Bc3RgbaUnorm
=
>
"
bc3
-
rgba
-
unorm
"
TextureFormat
:
:
Bc3RgbaUnormSrgb
=
>
"
bc3
-
rgba
-
unorm
-
srgb
"
TextureFormat
:
:
Bc4RUnorm
=
>
"
bc4
-
r
-
unorm
"
TextureFormat
:
:
Bc4RSnorm
=
>
"
bc4
-
r
-
snorm
"
TextureFormat
:
:
Bc5RgUnorm
=
>
"
bc5
-
rg
-
unorm
"
TextureFormat
:
:
Bc5RgSnorm
=
>
"
bc5
-
rg
-
snorm
"
TextureFormat
:
:
Bc6hRgbUfloat
=
>
"
bc6h
-
rgb
-
ufloat
"
TextureFormat
:
:
Bc6hRgbFloat
=
>
"
bc6h
-
rgb
-
float
"
TextureFormat
:
:
Bc7RgbaUnorm
=
>
"
bc7
-
rgba
-
unorm
"
TextureFormat
:
:
Bc7RgbaUnormSrgb
=
>
"
bc7
-
rgba
-
unorm
-
srgb
"
TextureFormat
:
:
Etc2Rgb8Unorm
=
>
"
etc2
-
rgb8unorm
"
TextureFormat
:
:
Etc2Rgb8UnormSrgb
=
>
"
etc2
-
rgb8unorm
-
srgb
"
TextureFormat
:
:
Etc2Rgb8A1Unorm
=
>
"
etc2
-
rgb8a1unorm
"
TextureFormat
:
:
Etc2Rgb8A1UnormSrgb
=
>
"
etc2
-
rgb8a1unorm
-
srgb
"
TextureFormat
:
:
Etc2Rgba8Unorm
=
>
"
etc2
-
rgba8unorm
"
TextureFormat
:
:
Etc2Rgba8UnormSrgb
=
>
"
etc2
-
rgba8unorm
-
srgb
"
TextureFormat
:
:
EacR11Unorm
=
>
"
eac
-
r11unorm
"
TextureFormat
:
:
EacR11Snorm
=
>
"
eac
-
r11snorm
"
TextureFormat
:
:
EacRg11Unorm
=
>
"
eac
-
rg11unorm
"
TextureFormat
:
:
EacRg11Snorm
=
>
"
eac
-
rg11snorm
"
TextureFormat
:
:
Astc
{
block
channel
}
=
>
{
let
block
=
match
block
{
AstcBlock
:
:
B4x4
=
>
"
4x4
"
AstcBlock
:
:
B5x4
=
>
"
5x4
"
AstcBlock
:
:
B5x5
=
>
"
5x5
"
AstcBlock
:
:
B6x5
=
>
"
6x5
"
AstcBlock
:
:
B6x6
=
>
"
6x6
"
AstcBlock
:
:
B8x5
=
>
"
8x5
"
AstcBlock
:
:
B8x6
=
>
"
8x6
"
AstcBlock
:
:
B8x8
=
>
"
8x8
"
AstcBlock
:
:
B10x5
=
>
"
10x5
"
AstcBlock
:
:
B10x6
=
>
"
10x6
"
AstcBlock
:
:
B10x8
=
>
"
10x8
"
AstcBlock
:
:
B10x10
=
>
"
10x10
"
AstcBlock
:
:
B12x10
=
>
"
12x10
"
AstcBlock
:
:
B12x12
=
>
"
12x12
"
}
;
let
channel
=
match
channel
{
AstcChannel
:
:
Unorm
=
>
"
unorm
"
AstcChannel
:
:
UnormSrgb
=
>
"
unorm
-
srgb
"
AstcChannel
:
:
Hdr
=
>
"
hdr
"
}
;
s
=
alloc
:
:
format
!
(
"
astc
-
{
block
}
-
{
channel
}
"
)
;
&
s
}
}
;
serializer
.
serialize_str
(
name
)
}
}
bitflags
:
:
bitflags
!
{
/
/
/
Feature
flags
for
a
texture
format
.
#
[
repr
(
transparent
)
]
#
[
cfg_attr
(
feature
=
"
serde
"
derive
(
Serialize
Deserialize
)
)
]
#
[
cfg_attr
(
feature
=
"
serde
"
serde
(
transparent
)
)
]
#
[
derive
(
Debug
Copy
Clone
PartialEq
Eq
Hash
)
]
pub
struct
TextureFormatFeatureFlags
:
u32
{
/
/
/
If
not
present
the
texture
can
'
t
be
sampled
with
a
filtering
sampler
.
/
/
/
This
may
overwrite
TextureSampleType
:
:
Float
.
filterable
const
FILTERABLE
=
1
<
<
0
;
/
/
/
Allows
[
TextureDescriptor
:
:
sample_count
]
to
be
2
.
const
MULTISAMPLE_X2
=
1
<
<
1
;
/
/
/
Allows
[
TextureDescriptor
:
:
sample_count
]
to
be
4
.
const
MULTISAMPLE_X4
=
1
<
<
2
;
/
/
/
Allows
[
TextureDescriptor
:
:
sample_count
]
to
be
8
.
const
MULTISAMPLE_X8
=
1
<
<
3
;
/
/
/
Allows
[
TextureDescriptor
:
:
sample_count
]
to
be
16
.
const
MULTISAMPLE_X16
=
1
<
<
4
;
/
/
/
Allows
a
texture
of
this
format
to
back
a
view
passed
as
resolve_target
/
/
/
to
a
render
pass
for
an
automatic
driver
-
implemented
resolve
.
const
MULTISAMPLE_RESOLVE
=
1
<
<
5
;
/
/
/
When
used
as
a
STORAGE
texture
then
a
texture
with
this
format
can
be
bound
with
/
/
/
[
StorageTextureAccess
:
:
ReadOnly
]
.
const
STORAGE_READ_ONLY
=
1
<
<
6
;
/
/
/
When
used
as
a
STORAGE
texture
then
a
texture
with
this
format
can
be
bound
with
/
/
/
[
StorageTextureAccess
:
:
WriteOnly
]
.
const
STORAGE_WRITE_ONLY
=
1
<
<
7
;
/
/
/
When
used
as
a
STORAGE
texture
then
a
texture
with
this
format
can
be
bound
with
/
/
/
[
StorageTextureAccess
:
:
ReadWrite
]
.
const
STORAGE_READ_WRITE
=
1
<
<
8
;
/
/
/
When
used
as
a
STORAGE
texture
then
a
texture
with
this
format
can
be
bound
with
/
/
/
[
StorageTextureAccess
:
:
Atomic
]
.
const
STORAGE_ATOMIC
=
1
<
<
9
;
/
/
/
If
not
present
the
texture
can
'
t
be
blended
into
the
render
target
.
const
BLENDABLE
=
1
<
<
10
;
}
}
impl
TextureFormatFeatureFlags
{
#
[
must_use
]
pub
fn
sample_count_supported
(
&
self
count
:
u32
)
-
>
bool
{
use
TextureFormatFeatureFlags
as
tfsc
;
match
count
{
1
=
>
true
2
=
>
self
.
contains
(
tfsc
:
:
MULTISAMPLE_X2
)
4
=
>
self
.
contains
(
tfsc
:
:
MULTISAMPLE_X4
)
8
=
>
self
.
contains
(
tfsc
:
:
MULTISAMPLE_X8
)
16
=
>
self
.
contains
(
tfsc
:
:
MULTISAMPLE_X16
)
_
=
>
false
}
}
#
[
must_use
]
pub
fn
supported_sample_counts
(
&
self
)
-
>
Vec
<
u32
>
{
let
all_possible_sample_counts
:
[
u32
;
5
]
=
[
1
2
4
8
16
]
;
all_possible_sample_counts
.
into_iter
(
)
.
filter
(
|
&
sc
|
self
.
sample_count_supported
(
sc
)
)
.
collect
(
)
}
}
#
[
derive
(
Copy
Clone
Debug
Hash
Eq
PartialEq
)
]
#
[
cfg_attr
(
feature
=
"
serde
"
derive
(
serde
:
:
Serialize
serde
:
:
Deserialize
)
)
]
pub
struct
TextureFormatFeatures
{
pub
allowed_usages
:
TextureUsages
pub
flags
:
TextureFormatFeatureFlags
}
#
[
cfg
(
test
)
]
mod
tests
{
use
super
:
:
*
;
#
[
test
]
fn
texture_format_serialize
(
)
{
use
alloc
:
:
string
:
:
ToString
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R8Unorm
)
.
unwrap
(
)
"
\
"
r8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R8Snorm
)
.
unwrap
(
)
"
\
"
r8snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R8Uint
)
.
unwrap
(
)
"
\
"
r8uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R8Sint
)
.
unwrap
(
)
"
\
"
r8sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R16Uint
)
.
unwrap
(
)
"
\
"
r16uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R16Sint
)
.
unwrap
(
)
"
\
"
r16sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R16Unorm
)
.
unwrap
(
)
"
\
"
r16unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R16Snorm
)
.
unwrap
(
)
"
\
"
r16snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R16Float
)
.
unwrap
(
)
"
\
"
r16float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg8Unorm
)
.
unwrap
(
)
"
\
"
rg8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg8Snorm
)
.
unwrap
(
)
"
\
"
rg8snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg8Uint
)
.
unwrap
(
)
"
\
"
rg8uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg8Sint
)
.
unwrap
(
)
"
\
"
rg8sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R32Uint
)
.
unwrap
(
)
"
\
"
r32uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R32Sint
)
.
unwrap
(
)
"
\
"
r32sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R32Float
)
.
unwrap
(
)
"
\
"
r32float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg16Uint
)
.
unwrap
(
)
"
\
"
rg16uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg16Sint
)
.
unwrap
(
)
"
\
"
rg16sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg16Unorm
)
.
unwrap
(
)
"
\
"
rg16unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg16Snorm
)
.
unwrap
(
)
"
\
"
rg16snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg16Float
)
.
unwrap
(
)
"
\
"
rg16float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba8Unorm
)
.
unwrap
(
)
"
\
"
rgba8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba8UnormSrgb
)
.
unwrap
(
)
"
\
"
rgba8unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba8Snorm
)
.
unwrap
(
)
"
\
"
rgba8snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba8Uint
)
.
unwrap
(
)
"
\
"
rgba8uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba8Sint
)
.
unwrap
(
)
"
\
"
rgba8sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bgra8Unorm
)
.
unwrap
(
)
"
\
"
bgra8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bgra8UnormSrgb
)
.
unwrap
(
)
"
\
"
bgra8unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgb10a2Uint
)
.
unwrap
(
)
"
\
"
rgb10a2uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgb10a2Unorm
)
.
unwrap
(
)
"
\
"
rgb10a2unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg11b10Ufloat
)
.
unwrap
(
)
"
\
"
rg11b10ufloat
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
R64Uint
)
.
unwrap
(
)
"
\
"
r64uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg32Uint
)
.
unwrap
(
)
"
\
"
rg32uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg32Sint
)
.
unwrap
(
)
"
\
"
rg32sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rg32Float
)
.
unwrap
(
)
"
\
"
rg32float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba16Uint
)
.
unwrap
(
)
"
\
"
rgba16uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba16Sint
)
.
unwrap
(
)
"
\
"
rgba16sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba16Unorm
)
.
unwrap
(
)
"
\
"
rgba16unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba16Snorm
)
.
unwrap
(
)
"
\
"
rgba16snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba16Float
)
.
unwrap
(
)
"
\
"
rgba16float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba32Uint
)
.
unwrap
(
)
"
\
"
rgba32uint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba32Sint
)
.
unwrap
(
)
"
\
"
rgba32sint
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgba32Float
)
.
unwrap
(
)
"
\
"
rgba32float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Stencil8
)
.
unwrap
(
)
"
\
"
stencil8
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Depth32Float
)
.
unwrap
(
)
"
\
"
depth32float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Depth16Unorm
)
.
unwrap
(
)
"
\
"
depth16unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Depth32FloatStencil8
)
.
unwrap
(
)
"
\
"
depth32float
-
stencil8
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Depth24Plus
)
.
unwrap
(
)
"
\
"
depth24plus
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Depth24PlusStencil8
)
.
unwrap
(
)
"
\
"
depth24plus
-
stencil8
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Rgb9e5Ufloat
)
.
unwrap
(
)
"
\
"
rgb9e5ufloat
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc1RgbaUnorm
)
.
unwrap
(
)
"
\
"
bc1
-
rgba
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc1RgbaUnormSrgb
)
.
unwrap
(
)
"
\
"
bc1
-
rgba
-
unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc2RgbaUnorm
)
.
unwrap
(
)
"
\
"
bc2
-
rgba
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc2RgbaUnormSrgb
)
.
unwrap
(
)
"
\
"
bc2
-
rgba
-
unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc3RgbaUnorm
)
.
unwrap
(
)
"
\
"
bc3
-
rgba
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc3RgbaUnormSrgb
)
.
unwrap
(
)
"
\
"
bc3
-
rgba
-
unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc4RUnorm
)
.
unwrap
(
)
"
\
"
bc4
-
r
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc4RSnorm
)
.
unwrap
(
)
"
\
"
bc4
-
r
-
snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc5RgUnorm
)
.
unwrap
(
)
"
\
"
bc5
-
rg
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc5RgSnorm
)
.
unwrap
(
)
"
\
"
bc5
-
rg
-
snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc6hRgbUfloat
)
.
unwrap
(
)
"
\
"
bc6h
-
rgb
-
ufloat
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc6hRgbFloat
)
.
unwrap
(
)
"
\
"
bc6h
-
rgb
-
float
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc7RgbaUnorm
)
.
unwrap
(
)
"
\
"
bc7
-
rgba
-
unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Bc7RgbaUnormSrgb
)
.
unwrap
(
)
"
\
"
bc7
-
rgba
-
unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgb8Unorm
)
.
unwrap
(
)
"
\
"
etc2
-
rgb8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgb8UnormSrgb
)
.
unwrap
(
)
"
\
"
etc2
-
rgb8unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgb8A1Unorm
)
.
unwrap
(
)
"
\
"
etc2
-
rgb8a1unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgb8A1UnormSrgb
)
.
unwrap
(
)
"
\
"
etc2
-
rgb8a1unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgba8Unorm
)
.
unwrap
(
)
"
\
"
etc2
-
rgba8unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
Etc2Rgba8UnormSrgb
)
.
unwrap
(
)
"
\
"
etc2
-
rgba8unorm
-
srgb
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
EacR11Unorm
)
.
unwrap
(
)
"
\
"
eac
-
r11unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
EacR11Snorm
)
.
unwrap
(
)
"
\
"
eac
-
r11snorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
EacRg11Unorm
)
.
unwrap
(
)
"
\
"
eac
-
rg11unorm
\
"
"
.
to_string
(
)
)
;
assert_eq
!
(
serde_json
:
:
to_string
(
&
TextureFormat
:
:
EacRg11Snorm
)
.
unwrap
(
)
"
\
"
eac
-
rg11snorm
\
"
"
.
to_string
(
)
)
;
}
#
[
test
]
fn
texture_format_deserialize
(
)
{
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r8snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R8Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r8uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R8Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r8sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R8Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r16uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R16Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r16sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R16Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r16unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R16Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r16snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R16Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r16float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R16Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg8snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg8Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg8uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg8Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg8sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg8Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r32uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R32Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r32sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R32Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r32float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R32Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg16uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg16Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg16sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg16Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg16unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg16Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg16snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg16Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg16float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg16Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba8unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba8UnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba8snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba8Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba8uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba8Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba8sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba8Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bgra8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bgra8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bgra8unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bgra8UnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgb10a2uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgb10a2Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgb10a2unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgb10a2Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg11b10ufloat
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg11b10Ufloat
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
r64uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
R64Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg32uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg32Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg32sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg32Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rg32float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rg32Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba16uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba16Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba16sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba16Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba16unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba16Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba16snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba16Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba16float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba16Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba32uint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba32Uint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba32sint
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba32Sint
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgba32float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgba32Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
stencil8
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Stencil8
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
depth32float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Depth32Float
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
depth16unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Depth16Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
depth32float
-
stencil8
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Depth32FloatStencil8
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
depth24plus
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Depth24Plus
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
depth24plus
-
stencil8
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Depth24PlusStencil8
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
rgb9e5ufloat
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Rgb9e5Ufloat
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc1
-
rgba
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc1RgbaUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc1
-
rgba
-
unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc1RgbaUnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc2
-
rgba
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc2RgbaUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc2
-
rgba
-
unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc2RgbaUnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc3
-
rgba
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc3RgbaUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc3
-
rgba
-
unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc3RgbaUnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc4
-
r
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc4RUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc4
-
r
-
snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc4RSnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc5
-
rg
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc5RgUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc5
-
rg
-
snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc5RgSnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc6h
-
rgb
-
ufloat
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc6hRgbUfloat
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc6h
-
rgb
-
float
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc6hRgbFloat
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc7
-
rgba
-
unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc7RgbaUnorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
bc7
-
rgba
-
unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Bc7RgbaUnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgb8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgb8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgb8unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgb8UnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgb8a1unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgb8A1Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgb8a1unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgb8A1UnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgba8unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgba8Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
etc2
-
rgba8unorm
-
srgb
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
Etc2Rgba8UnormSrgb
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
eac
-
r11unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
EacR11Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
eac
-
r11snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
EacR11Snorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
eac
-
rg11unorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
EacRg11Unorm
)
;
assert_eq
!
(
serde_json
:
:
from_str
:
:
<
TextureFormat
>
(
"
\
"
eac
-
rg11snorm
\
"
"
)
.
unwrap
(
)
TextureFormat
:
:
EacRg11Snorm
)
;
}
}
