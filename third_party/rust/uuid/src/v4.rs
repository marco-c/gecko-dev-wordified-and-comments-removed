use
crate
:
:
prelude
:
:
*
;
impl
Uuid
{
pub
fn
new_v4
(
)
-
>
Uuid
{
let
mut
bytes
=
[
0u8
;
16
]
;
getrandom
:
:
getrandom
(
&
mut
bytes
)
.
unwrap_or_else
(
|
err
|
{
panic
!
(
"
could
not
retreive
random
bytes
for
uuid
:
{
}
"
err
)
}
)
;
crate
:
:
Builder
:
:
from_bytes
(
bytes
)
.
set_variant
(
Variant
:
:
RFC4122
)
.
set_version
(
Version
:
:
Random
)
.
build
(
)
}
}
#
[
cfg
(
test
)
]
mod
tests
{
use
crate
:
:
prelude
:
:
*
;
#
[
test
]
fn
test_new
(
)
{
let
uuid
=
Uuid
:
:
new_v4
(
)
;
assert_eq
!
(
uuid
.
get_version
(
)
Some
(
Version
:
:
Random
)
)
;
assert_eq
!
(
uuid
.
get_variant
(
)
Some
(
Variant
:
:
RFC4122
)
)
;
}
#
[
test
]
fn
test_get_version
(
)
{
let
uuid
=
Uuid
:
:
new_v4
(
)
;
assert_eq
!
(
uuid
.
get_version
(
)
Some
(
Version
:
:
Random
)
)
;
assert_eq
!
(
uuid
.
get_version_num
(
)
4
)
}
}
