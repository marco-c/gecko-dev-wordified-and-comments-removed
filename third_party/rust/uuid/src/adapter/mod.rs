use
core
:
:
str
;
use
prelude
:
:
*
;
mod
core_support
;
#
[
derive
(
Clone
Copy
Debug
Default
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
Hyphenated
(
Uuid
)
;
#
[
derive
(
Clone
Copy
Debug
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
HyphenatedRef
<
'
a
>
(
&
'
a
Uuid
)
;
#
[
derive
(
Clone
Copy
Debug
Default
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
Simple
(
Uuid
)
;
#
[
derive
(
Clone
Copy
Debug
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
SimpleRef
<
'
a
>
(
&
'
a
Uuid
)
;
#
[
derive
(
Clone
Copy
Debug
Default
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
Urn
(
Uuid
)
;
#
[
derive
(
Clone
Copy
Debug
Eq
Hash
Ord
PartialEq
PartialOrd
)
]
pub
struct
UrnRef
<
'
a
>
(
&
'
a
Uuid
)
;
impl
Uuid
{
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_hyphenated
(
self
)
-
>
Hyphenated
{
Hyphenated
:
:
from_uuid
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_hyphenated
(
self
)
-
>
Hyphenated
{
Hyphenated
:
:
from_uuid
(
self
)
}
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_hyphenated_ref
(
&
self
)
-
>
HyphenatedRef
{
HyphenatedRef
:
:
from_uuid_ref
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_hyphenated_ref
(
&
self
)
-
>
HyphenatedRef
{
HyphenatedRef
:
:
from_uuid_ref
(
self
)
}
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_simple
(
self
)
-
>
Simple
{
Simple
:
:
from_uuid
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_simple
(
self
)
-
>
Simple
{
Simple
:
:
from_uuid
(
self
)
}
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_simple_ref
(
&
self
)
-
>
SimpleRef
{
SimpleRef
:
:
from_uuid_ref
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_simple_ref
(
&
self
)
-
>
SimpleRef
{
SimpleRef
:
:
from_uuid_ref
(
self
)
}
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_urn
(
self
)
-
>
Urn
{
Urn
:
:
from_uuid
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_urn
(
self
)
-
>
Urn
{
Urn
:
:
from_uuid
(
self
)
}
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
#
[
inline
]
pub
fn
to_urn_ref
(
&
self
)
-
>
UrnRef
{
UrnRef
:
:
from_uuid_ref
(
self
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
#
[
inline
]
pub
const
fn
to_urn_ref
(
&
self
)
-
>
UrnRef
{
UrnRef
:
:
from_uuid_ref
(
self
)
}
}
const
UPPER
:
[
u8
;
16
]
=
[
b
'
0
'
b
'
1
'
b
'
2
'
b
'
3
'
b
'
4
'
b
'
5
'
b
'
6
'
b
'
7
'
b
'
8
'
b
'
9
'
b
'
A
'
b
'
B
'
b
'
C
'
b
'
D
'
b
'
E
'
b
'
F
'
]
;
const
LOWER
:
[
u8
;
16
]
=
[
b
'
0
'
b
'
1
'
b
'
2
'
b
'
3
'
b
'
4
'
b
'
5
'
b
'
6
'
b
'
7
'
b
'
8
'
b
'
9
'
b
'
a
'
b
'
b
'
b
'
c
'
b
'
d
'
b
'
e
'
b
'
f
'
]
;
const
BYTE_POSITIONS
:
[
usize
;
6
]
=
[
0
4
6
8
10
16
]
;
const
HYPHEN_POSITIONS
:
[
usize
;
4
]
=
[
8
13
18
23
]
;
fn
encode
<
'
a
>
(
full_buffer
:
&
'
a
mut
[
u8
]
start
:
usize
uuid
:
&
Uuid
hyphens
:
bool
upper
:
bool
)
-
>
&
'
a
mut
str
{
let
len
=
if
hyphens
{
36
}
else
{
32
}
;
{
let
buffer
=
&
mut
full_buffer
[
start
.
.
start
+
len
]
;
let
bytes
=
uuid
.
as_bytes
(
)
;
let
hex
=
if
upper
{
&
UPPER
}
else
{
&
LOWER
}
;
for
group
in
0
.
.
5
{
let
hyphens_before
=
if
hyphens
{
group
}
else
{
0
}
;
for
idx
in
BYTE_POSITIONS
[
group
]
.
.
BYTE_POSITIONS
[
group
+
1
]
{
let
b
=
bytes
[
idx
]
;
let
out_idx
=
hyphens_before
+
2
*
idx
;
buffer
[
out_idx
+
0
]
=
hex
[
(
b
>
>
4
)
as
usize
]
;
buffer
[
out_idx
+
1
]
=
hex
[
(
b
&
0b1111
)
as
usize
]
;
}
if
group
!
=
4
&
&
hyphens
{
buffer
[
HYPHEN_POSITIONS
[
group
]
]
=
b
'
-
'
;
}
}
}
str
:
:
from_utf8_mut
(
&
mut
full_buffer
[
.
.
start
+
len
]
)
.
expect
(
"
found
non
-
ASCII
output
characters
while
encoding
a
UUID
"
)
}
impl
Hyphenated
{
pub
const
LENGTH
:
usize
=
36
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Hyphenated
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Hyphenated
(
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
&
self
.
0
true
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
&
self
.
0
true
true
)
}
}
impl
<
'
a
>
HyphenatedRef
<
'
a
>
{
pub
const
LENGTH
:
usize
=
36
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
HyphenatedRef
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
HyphenatedRef
(
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
self
.
0
true
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
self
.
0
true
true
)
}
}
impl
Simple
{
pub
const
LENGTH
:
usize
=
32
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Simple
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Simple
(
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
&
self
.
0
false
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
&
self
.
0
false
true
)
}
}
impl
<
'
a
>
SimpleRef
<
'
a
>
{
pub
const
LENGTH
:
usize
=
32
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
SimpleRef
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
SimpleRef
(
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
self
.
0
false
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
encode
(
buffer
0
self
.
0
false
true
)
}
}
impl
Urn
{
pub
const
LENGTH
:
usize
=
45
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Urn
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid
(
uuid
:
Uuid
)
-
>
Self
{
Urn
(
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
buffer
[
.
.
9
]
.
copy_from_slice
(
b
"
urn
:
uuid
:
"
)
;
encode
(
buffer
9
&
self
.
0
true
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
buffer
[
.
.
9
]
.
copy_from_slice
(
b
"
urn
:
uuid
:
"
)
;
encode
(
buffer
9
&
self
.
0
true
true
)
}
}
impl
<
'
a
>
UrnRef
<
'
a
>
{
pub
const
LENGTH
:
usize
=
45
;
#
[
cfg
(
not
(
feature
=
"
const_fn
"
)
)
]
pub
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
UrnRef
(
uuid
)
}
#
[
cfg
(
feature
=
"
const_fn
"
)
]
pub
const
fn
from_uuid_ref
(
uuid
:
&
'
a
Uuid
)
-
>
Self
{
UrnRef
(
&
uuid
)
}
pub
(
crate
)
fn
encode_lower
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
buffer
[
.
.
9
]
.
copy_from_slice
(
b
"
urn
:
uuid
:
"
)
;
encode
(
buffer
9
self
.
0
true
false
)
}
pub
(
crate
)
fn
encode_upper
<
'
buf
>
(
&
self
buffer
:
&
'
buf
mut
[
u8
]
)
-
>
&
'
buf
mut
str
{
buffer
[
.
.
9
]
.
copy_from_slice
(
b
"
urn
:
uuid
:
"
)
;
encode
(
buffer
9
self
.
0
true
true
)
}
}
