use
clap
:
:
{
app_from_crate
arg
ArgGroup
}
;
fn
main
(
)
{
let
matches
=
app_from_crate
!
(
)
.
arg
(
arg
!
(
-
-
"
set
-
ver
"
<
VER
>
"
set
version
manually
"
)
.
required
(
false
)
)
.
arg
(
arg
!
(
-
-
major
"
auto
inc
major
"
)
)
.
arg
(
arg
!
(
-
-
minor
"
auto
inc
minor
"
)
)
.
arg
(
arg
!
(
-
-
patch
"
auto
inc
patch
"
)
)
.
group
(
ArgGroup
:
:
new
(
"
vers
"
)
.
required
(
true
)
.
args
(
&
[
"
set
-
ver
"
"
major
"
"
minor
"
"
patch
"
]
)
)
.
arg
(
arg
!
(
[
INPUT_FILE
]
"
some
regular
input
"
)
.
group
(
"
input
"
)
)
.
arg
(
arg
!
(
-
-
"
spec
-
in
"
<
SPEC_IN
>
"
some
special
input
argument
"
)
.
required
(
false
)
.
group
(
"
input
"
)
)
.
arg
(
arg
!
(
config
:
-
c
<
CONFIG
>
)
.
required
(
false
)
.
requires
(
"
input
"
)
)
.
get_matches
(
)
;
let
mut
major
=
1
;
let
mut
minor
=
2
;
let
mut
patch
=
3
;
let
version
=
if
let
Some
(
ver
)
=
matches
.
value_of
(
"
set
-
ver
"
)
{
ver
.
to_string
(
)
}
else
{
let
(
maj
min
pat
)
=
(
matches
.
is_present
(
"
major
"
)
matches
.
is_present
(
"
minor
"
)
matches
.
is_present
(
"
patch
"
)
)
;
match
(
maj
min
pat
)
{
(
true
_
_
)
=
>
major
+
=
1
(
_
true
_
)
=
>
minor
+
=
1
(
_
_
true
)
=
>
patch
+
=
1
_
=
>
unreachable
!
(
)
}
;
format
!
(
"
{
}
.
{
}
.
{
}
"
major
minor
patch
)
}
;
println
!
(
"
Version
:
{
}
"
version
)
;
if
matches
.
is_present
(
"
config
"
)
{
let
input
=
matches
.
value_of
(
"
INPUT_FILE
"
)
.
unwrap_or_else
(
|
|
matches
.
value_of
(
"
spec
-
in
"
)
.
unwrap
(
)
)
;
println
!
(
"
Doing
work
using
input
{
}
and
config
{
}
"
input
matches
.
value_of
(
"
config
"
)
.
unwrap
(
)
)
;
}
}
