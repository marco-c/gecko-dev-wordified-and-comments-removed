use
super
:
:
*
;
pub
trait
Speculative
{
fn
advance_to
(
&
self
fork
:
&
Self
)
;
}
impl
<
'
a
>
Speculative
for
ParseBuffer
<
'
a
>
{
fn
advance_to
(
&
self
fork
:
&
Self
)
{
if
!
crate
:
:
buffer
:
:
same_scope
(
self
.
cursor
(
)
fork
.
cursor
(
)
)
{
panic
!
(
"
Fork
was
not
derived
from
the
advancing
parse
stream
"
)
;
}
self
.
cell
.
set
(
unsafe
{
mem
:
:
transmute
:
:
<
Cursor
Cursor
<
'
static
>
>
(
fork
.
cursor
(
)
)
}
)
}
}
