use
crate
:
:
ir
:
:
{
self
Inst
as
IRInst
}
;
#
[
derive
(
Clone
Copy
Debug
PartialEq
Eq
)
]
pub
(
crate
)
struct
InsnInput
{
pub
(
crate
)
insn
:
IRInst
pub
(
crate
)
input
:
usize
}
#
[
derive
(
Clone
Copy
Debug
PartialEq
Eq
)
]
pub
(
crate
)
struct
InsnOutput
{
pub
(
crate
)
insn
:
IRInst
pub
(
crate
)
output
:
usize
}
#
[
derive
(
Clone
Copy
Debug
PartialEq
Eq
)
]
#
[
repr
(
u8
)
]
pub
enum
AtomicRmwOp
{
Add
Sub
And
Or
Xor
Xchg
}
impl
AtomicRmwOp
{
pub
fn
from
(
ir_op
:
ir
:
:
AtomicRmwOp
)
-
>
Self
{
match
ir_op
{
ir
:
:
AtomicRmwOp
:
:
Add
=
>
AtomicRmwOp
:
:
Add
ir
:
:
AtomicRmwOp
:
:
Sub
=
>
AtomicRmwOp
:
:
Sub
ir
:
:
AtomicRmwOp
:
:
And
=
>
AtomicRmwOp
:
:
And
ir
:
:
AtomicRmwOp
:
:
Or
=
>
AtomicRmwOp
:
:
Or
ir
:
:
AtomicRmwOp
:
:
Xor
=
>
AtomicRmwOp
:
:
Xor
ir
:
:
AtomicRmwOp
:
:
Xchg
=
>
AtomicRmwOp
:
:
Xchg
}
}
}
