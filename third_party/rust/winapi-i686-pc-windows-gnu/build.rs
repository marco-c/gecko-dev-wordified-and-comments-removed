fn
main
(
)
{
use
std
:
:
env
:
:
var
;
use
std
:
:
path
:
:
Path
;
println
!
(
"
cargo
:
rerun
-
if
-
env
-
changed
=
WINAPI_NO_BUNDLED_LIBRARIES
"
)
;
if
var
(
"
WINAPI_NO_BUNDLED_LIBRARIES
"
)
.
is_ok
(
)
{
return
;
}
if
var
(
"
TARGET
"
)
.
map
(
|
target
|
target
=
=
"
i686
-
pc
-
windows
-
gnu
"
)
.
unwrap_or
(
false
)
{
let
dir
=
var
(
"
CARGO_MANIFEST_DIR
"
)
.
unwrap
(
)
;
println
!
(
"
cargo
:
rustc
-
link
-
search
=
native
=
{
}
"
Path
:
:
new
(
&
dir
)
.
join
(
"
lib
"
)
.
display
(
)
)
;
}
}
