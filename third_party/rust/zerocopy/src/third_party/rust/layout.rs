use
core
:
:
num
:
:
NonZeroUsize
;
#
[
allow
(
unused
)
]
#
[
inline
(
always
)
]
pub
(
crate
)
const
fn
padding_needed_for
(
len
:
usize
align
:
NonZeroUsize
)
-
>
usize
{
let
align
=
align
.
get
(
)
;
debug_assert
!
(
align
.
is_power_of_two
(
)
)
;
let
len_rounded_up
=
len
.
wrapping_add
(
align
)
.
wrapping_sub
(
1
)
&
!
align
.
wrapping_sub
(
1
)
;
len_rounded_up
.
wrapping_sub
(
len
)
}
