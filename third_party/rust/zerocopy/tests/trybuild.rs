use
testutil
:
:
ToolchainVersion
;
#
[
test
]
#
[
cfg_attr
(
miri
ignore
)
]
fn
ui
(
)
{
let
version
=
ToolchainVersion
:
:
extract_from_pwd
(
)
.
unwrap
(
)
;
let
source_files_dirname
=
version
.
get_ui_source_files_dirname_and_maybe_print_warning
(
)
;
let
t
=
trybuild
:
:
TestCases
:
:
new
(
)
;
t
.
compile_fail
(
format
!
(
"
tests
/
{
source_files_dirname
}
/
*
.
rs
"
)
)
;
}
#
[
cfg
(
feature
=
"
derive
"
)
]
#
[
test
]
#
[
cfg_attr
(
miri
ignore
)
]
fn
ui_invalid_impls
(
)
{
let
version
=
ToolchainVersion
:
:
extract_from_pwd
(
)
.
unwrap
(
)
;
let
source_files_dirname
=
version
.
get_ui_source_files_dirname_and_maybe_print_warning
(
)
;
let
t
=
trybuild
:
:
TestCases
:
:
new
(
)
;
t
.
compile_fail
(
format
!
(
"
tests
/
{
source_files_dirname
}
/
invalid
-
impls
/
*
.
rs
"
)
)
;
}
