use
proc_macro2
:
:
Span
;
use
super
:
:
ExportItem
;
pub
(
crate
)
mod
convert
;
mod
function
;
mod
impl_
;
use
self
:
:
{
function
:
:
gen_fn_metadata
impl_
:
:
gen_impl_metadata
}
;
pub
fn
gen_metadata
(
item
:
syn
:
:
Item
mod_path
:
&
[
String
]
)
-
>
syn
:
:
Result
<
ExportItem
>
{
match
item
{
syn
:
:
Item
:
:
Fn
(
item
)
=
>
gen_fn_metadata
(
item
.
sig
mod_path
)
syn
:
:
Item
:
:
Impl
(
item
)
=
>
gen_impl_metadata
(
item
mod_path
)
_
=
>
Err
(
syn
:
:
Error
:
:
new
(
Span
:
:
call_site
(
)
"
unsupported
item
:
only
functions
and
impl
\
blocks
may
be
annotated
with
this
attribute
"
)
)
}
}
