#
ifndef
DAV1D_PICTURE_H
#
define
DAV1D_PICTURE_H
#
include
<
stddef
.
h
>
#
include
<
stdint
.
h
>
#
include
"
common
.
h
"
#
include
"
headers
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
define
DAV1D_PICTURE_ALIGNMENT
64
typedef
struct
Dav1dPictureParameters
{
int
w
;
int
h
;
enum
Dav1dPixelLayout
layout
;
int
bpc
;
}
Dav1dPictureParameters
;
typedef
struct
Dav1dPicture
{
Dav1dSequenceHeader
*
seq_hdr
;
Dav1dFrameHeader
*
frame_hdr
;
void
*
data
[
3
]
;
ptrdiff_t
stride
[
2
]
;
Dav1dPictureParameters
p
;
Dav1dDataProps
m
;
Dav1dContentLightLevel
*
content_light
;
Dav1dMasteringDisplay
*
mastering_display
;
Dav1dITUTT35
*
itut_t35
;
size_t
n_itut_t35
;
uintptr_t
reserved
[
4
]
;
struct
Dav1dRef
*
frame_hdr_ref
;
struct
Dav1dRef
*
seq_hdr_ref
;
struct
Dav1dRef
*
content_light_ref
;
struct
Dav1dRef
*
mastering_display_ref
;
struct
Dav1dRef
*
itut_t35_ref
;
uintptr_t
reserved_ref
[
4
]
;
struct
Dav1dRef
*
ref
;
void
*
allocator_data
;
}
Dav1dPicture
;
typedef
struct
Dav1dPicAllocator
{
void
*
cookie
;
int
(
*
alloc_picture_callback
)
(
Dav1dPicture
*
pic
void
*
cookie
)
;
void
(
*
release_picture_callback
)
(
Dav1dPicture
*
pic
void
*
cookie
)
;
}
Dav1dPicAllocator
;
DAV1D_API
void
dav1d_picture_unref
(
Dav1dPicture
*
p
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
