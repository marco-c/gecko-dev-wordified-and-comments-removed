#
ifndef
DAV1D_COMMON_VALIDATE_H
#
define
DAV1D_COMMON_VALIDATE_H
#
include
<
stdio
.
h
>
#
include
<
stdlib
.
h
>
#
if
defined
(
NDEBUG
)
#
define
debug_print
(
.
.
.
)
do
{
}
while
(
0
)
#
define
debug_abort
(
)
do
{
}
while
(
0
)
#
else
#
define
debug_print
(
.
.
.
)
fprintf
(
stderr
__VA_ARGS__
)
#
define
debug_abort
abort
#
endif
#
define
validate_input_or_ret_with_msg
(
x
r
.
.
.
)
\
if
(
!
(
x
)
)
{
\
debug_print
(
"
Input
validation
check
\
'
%
s
\
'
failed
in
%
s
!
\
n
"
\
#
x
__func__
)
;
\
debug_print
(
__VA_ARGS__
)
;
\
debug_abort
(
)
;
\
return
r
;
\
}
#
define
validate_input_or_ret
(
x
r
)
\
if
(
!
(
x
)
)
{
\
debug_print
(
"
Input
validation
check
\
'
%
s
\
'
failed
in
%
s
!
\
n
"
\
#
x
__func__
)
;
\
debug_abort
(
)
;
\
return
r
;
\
}
#
define
validate_input
(
x
)
validate_input_or_ret
(
x
)
#
endif
