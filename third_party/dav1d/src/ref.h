#
ifndef
__DAV1D_SRC_REF_H__
#
define
__DAV1D_SRC_REF_H__
#
include
"
dav1d
/
dav1d
.
h
"
#
include
<
stdatomic
.
h
>
#
include
<
stddef
.
h
>
struct
Dav1dRef
{
void
*
data
;
atomic_int
ref_cnt
;
void
(
*
free_callback
)
(
uint8_t
*
data
void
*
user_data
)
;
void
*
user_data
;
}
;
Dav1dRef
*
dav1d_ref_create
(
size_t
size
)
;
Dav1dRef
*
dav1d_ref_wrap
(
uint8_t
*
ptr
void
(
*
free_callback
)
(
uint8_t
*
data
void
*
user_data
)
void
*
user_data
)
;
void
dav1d_ref_inc
(
Dav1dRef
*
ref
)
;
void
dav1d_ref_dec
(
Dav1dRef
*
ref
)
;
#
endif
