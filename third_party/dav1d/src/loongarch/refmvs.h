#
ifndef
DAV1D_SRC_LOONGARCH_REFMVS_H
#
define
DAV1D_SRC_LOONGARCH_REFMVS_H
#
include
"
src
/
cpu
.
h
"
#
include
"
src
/
refmvs
.
h
"
decl_splat_mv_fn
(
dav1d_splat_mv_lsx
)
;
decl_load_tmvs_fn
(
dav1d_load_tmvs_lsx
)
;
decl_save_tmvs_fn
(
dav1d_save_tmvs_lsx
)
;
static
ALWAYS_INLINE
void
refmvs_dsp_init_loongarch
(
Dav1dRefmvsDSPContext
*
const
c
)
{
const
unsigned
flags
=
dav1d_get_cpu_flags
(
)
;
if
(
!
(
flags
&
DAV1D_LOONGARCH_CPU_FLAG_LSX
)
)
return
;
c
-
>
splat_mv
=
dav1d_splat_mv_lsx
;
c
-
>
load_tmvs
=
dav1d_load_tmvs_lsx
;
c
-
>
save_tmvs
=
dav1d_save_tmvs_lsx
;
}
#
endif
