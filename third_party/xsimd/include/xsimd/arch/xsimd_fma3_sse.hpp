#
ifndef
XSIMD_FMA3_SSE_HPP
#
define
XSIMD_FMA3_SSE_HPP
#
include
"
.
.
/
types
/
xsimd_fma3_sse_register
.
hpp
"
namespace
xsimd
{
namespace
kernel
{
using
namespace
types
;
template
<
class
A
>
XSIMD_INLINE
batch
<
float
A
>
fnma
(
batch
<
float
A
>
const
&
x
batch
<
float
A
>
const
&
y
batch
<
float
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fnmadd_ps
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
double
A
>
fnma
(
batch
<
double
A
>
const
&
x
batch
<
double
A
>
const
&
y
batch
<
double
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fnmadd_pd
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
float
A
>
fnms
(
batch
<
float
A
>
const
&
x
batch
<
float
A
>
const
&
y
batch
<
float
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fnmsub_ps
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
double
A
>
fnms
(
batch
<
double
A
>
const
&
x
batch
<
double
A
>
const
&
y
batch
<
double
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fnmsub_pd
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
float
A
>
fma
(
batch
<
float
A
>
const
&
x
batch
<
float
A
>
const
&
y
batch
<
float
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fmadd_ps
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
double
A
>
fma
(
batch
<
double
A
>
const
&
x
batch
<
double
A
>
const
&
y
batch
<
double
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fmadd_pd
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
float
A
>
fms
(
batch
<
float
A
>
const
&
x
batch
<
float
A
>
const
&
y
batch
<
float
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fmsub_ps
(
x
y
z
)
;
}
template
<
class
A
>
XSIMD_INLINE
batch
<
double
A
>
fms
(
batch
<
double
A
>
const
&
x
batch
<
double
A
>
const
&
y
batch
<
double
A
>
const
&
z
requires_arch
<
fma3
<
sse4_2
>
>
)
noexcept
{
return
_mm_fmsub_pd
(
x
y
z
)
;
}
}
}
#
endif
