#
ifndef
XSIMD_CONFIG_HPP
#
define
XSIMD_CONFIG_HPP
#
define
XSIMD_VERSION_MAJOR
13
#
define
XSIMD_VERSION_MINOR
1
#
define
XSIMD_VERSION_PATCH
0
#
ifdef
__SSE2__
#
define
XSIMD_WITH_SSE2
1
#
else
#
define
XSIMD_WITH_SSE2
0
#
endif
#
ifdef
__SSE3__
#
define
XSIMD_WITH_SSE3
1
#
else
#
define
XSIMD_WITH_SSE3
0
#
endif
#
ifdef
__SSSE3__
#
define
XSIMD_WITH_SSSE3
1
#
else
#
define
XSIMD_WITH_SSSE3
0
#
endif
#
ifdef
__SSE4_1__
#
define
XSIMD_WITH_SSE4_1
1
#
else
#
define
XSIMD_WITH_SSE4_1
0
#
endif
#
ifdef
__SSE4_2__
#
define
XSIMD_WITH_SSE4_2
1
#
else
#
define
XSIMD_WITH_SSE4_2
0
#
endif
#
ifdef
__AVX__
#
define
XSIMD_WITH_AVX
1
#
else
#
define
XSIMD_WITH_AVX
0
#
endif
#
ifdef
__AVX2__
#
define
XSIMD_WITH_AVX2
1
#
else
#
define
XSIMD_WITH_AVX2
0
#
endif
#
ifdef
__AVXVNNI__
#
define
XSIMD_WITH_AVXVNNI
1
#
else
#
define
XSIMD_WITH_AVXVNNI
0
#
endif
#
ifdef
__FMA__
#
if
defined
(
__SSE__
)
#
ifndef
XSIMD_WITH_FMA3_SSE
#
define
XSIMD_WITH_FMA3_SSE
1
#
endif
#
else
#
if
XSIMD_WITH_FMA3_SSE
#
error
"
Manually
set
XSIMD_WITH_FMA3_SSE
is
incompatible
with
current
compiler
flags
"
#
endif
#
define
XSIMD_WITH_FMA3_SSE
0
#
endif
#
else
#
if
XSIMD_WITH_FMA3_SSE
#
error
"
Manually
set
XSIMD_WITH_FMA3_SSE
is
incompatible
with
current
compiler
flags
"
#
endif
#
define
XSIMD_WITH_FMA3_SSE
0
#
endif
#
ifdef
__FMA__
#
if
defined
(
__AVX__
)
#
ifndef
XSIMD_WITH_FMA3_AVX
#
define
XSIMD_WITH_FMA3_AVX
1
#
endif
#
else
#
if
XSIMD_WITH_FMA3_AVX
#
error
"
Manually
set
XSIMD_WITH_FMA3_AVX
is
incompatible
with
current
compiler
flags
"
#
endif
#
define
XSIMD_WITH_FMA3_AVX
0
#
endif
#
if
defined
(
__AVX2__
)
#
ifndef
XSIMD_WITH_FMA3_AVX2
#
define
XSIMD_WITH_FMA3_AVX2
1
#
endif
#
else
#
if
XSIMD_WITH_FMA3_AVX2
#
error
"
Manually
set
XSIMD_WITH_FMA3_AVX2
is
incompatible
with
current
compiler
flags
"
#
endif
#
define
XSIMD_WITH_FMA3_AVX2
0
#
endif
#
else
#
if
XSIMD_WITH_FMA3_AVX
#
error
"
Manually
set
XSIMD_WITH_FMA3_AVX
is
incompatible
with
current
compiler
flags
"
#
endif
#
if
XSIMD_WITH_FMA3_AVX2
#
error
"
Manually
set
XSIMD_WITH_FMA3_AVX2
is
incompatible
with
current
compiler
flags
"
#
endif
#
define
XSIMD_WITH_FMA3_AVX
0
#
define
XSIMD_WITH_FMA3_AVX2
0
#
endif
#
ifdef
__FMA4__
#
define
XSIMD_WITH_FMA4
1
#
else
#
define
XSIMD_WITH_FMA4
0
#
endif
#
ifdef
__AVX512F__
#
if
defined
(
__clang__
)
&
&
__clang_major__
>
=
6
#
define
XSIMD_WITH_AVX512F
1
#
elif
defined
(
__GNUC__
)
&
&
__GNUC__
<
6
#
define
XSIMD_WITH_AVX512F
0
#
else
#
define
XSIMD_WITH_AVX512F
1
#
if
__GNUC__
=
=
6
#
define
XSIMD_AVX512_SHIFT_INTRINSICS_IMM_ONLY
1
#
endif
#
endif
#
else
#
define
XSIMD_WITH_AVX512F
0
#
endif
#
ifdef
__AVX512CD__
#
define
XSIMD_WITH_AVX512CD
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512CD
0
#
endif
#
ifdef
__AVX512DQ__
#
define
XSIMD_WITH_AVX512DQ
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512DQ
0
#
endif
#
ifdef
__AVX512BW__
#
define
XSIMD_WITH_AVX512BW
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512BW
0
#
endif
#
ifdef
__AVX512ER__
#
define
XSIMD_WITH_AVX512ER
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512ER
0
#
endif
#
ifdef
__AVX512PF__
#
define
XSIMD_WITH_AVX512PF
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512PF
0
#
endif
#
ifdef
__AVX512IFMA__
#
define
XSIMD_WITH_AVX512IFMA
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512IFMA
0
#
endif
#
ifdef
__AVX512VBMI__
#
define
XSIMD_WITH_AVX512VBMI
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512VBMI
0
#
endif
#
ifdef
__AVX512VNNI__
#
if
XSIMD_WITH_AVX512VBMI
#
define
XSIMD_WITH_AVX512VNNI_AVX512VBMI
XSIMD_WITH_AVX512F
#
define
XSIMD_WITH_AVX512VNNI_AVX512BW
XSIMD_WITH_AVX512F
#
else
#
define
XSIMD_WITH_AVX512VNNI_AVX512VBMI
0
#
define
XSIMD_WITH_AVX512VNNI_AVX512BW
XSIMD_WITH_AVX512F
#
endif
#
else
#
define
XSIMD_WITH_AVX512VNNI_AVX512VBMI
0
#
define
XSIMD_WITH_AVX512VNNI_AVX512BW
0
#
endif
#
ifdef
__ARM_NEON
#
if
__ARM_ARCH
>
=
7
#
define
XSIMD_WITH_NEON
1
#
else
#
define
XSIMD_WITH_NEON
0
#
endif
#
ifdef
__aarch64__
#
define
XSIMD_WITH_NEON64
1
#
else
#
define
XSIMD_WITH_NEON64
0
#
endif
#
else
#
define
XSIMD_WITH_NEON
0
#
define
XSIMD_WITH_NEON64
0
#
endif
#
if
defined
(
__ARM_FEATURE_MATMUL_INT8
)
#
define
XSIMD_WITH_I8MM_NEON64
1
#
else
#
define
XSIMD_WITH_I8MM_NEON64
0
#
endif
#
if
defined
(
__ARM_FEATURE_SVE
)
&
&
defined
(
__ARM_FEATURE_SVE_BITS
)
&
&
__ARM_FEATURE_SVE_BITS
>
0
#
define
XSIMD_WITH_SVE
1
#
define
XSIMD_SVE_BITS
__ARM_FEATURE_SVE_BITS
#
else
#
define
XSIMD_WITH_SVE
0
#
define
XSIMD_SVE_BITS
0
#
endif
#
if
defined
(
__riscv_vector
)
&
&
defined
(
__riscv_v_fixed_vlen
)
&
&
__riscv_v_fixed_vlen
>
0
#
define
XSIMD_WITH_RVV
1
#
define
XSIMD_RVV_BITS
__riscv_v_fixed_vlen
#
else
#
define
XSIMD_WITH_RVV
0
#
define
XSIMD_RVV_BITS
0
#
endif
#
ifdef
__EMSCRIPTEN__
#
define
XSIMD_WITH_WASM
1
#
else
#
define
XSIMD_WITH_WASM
0
#
endif
#
ifdef
_MSC_VER
#
if
XSIMD_WITH_AVX512
#
undef
XSIMD_WITH_AVX2
#
define
XSIMD_WITH_AVX2
1
#
endif
#
if
XSIMD_WITH_AVX2
#
undef
XSIMD_WITH_AVX
#
define
XSIMD_WITH_AVX
1
#
undef
XSIMD_WITH_FMA3_AVX
#
define
XSIMD_WITH_FMA3_AVX
1
#
undef
XSIMD_WITH_FMA3_AVX2
#
define
XSIMD_WITH_FMA3_AVX2
1
#
endif
#
if
XSIMD_WITH_AVX
#
undef
XSIMD_WITH_SSE4_2
#
define
XSIMD_WITH_SSE4_2
1
#
endif
#
if
XSIMD_WITH_SSE4_2
#
undef
XSIMD_WITH_SSE4_1
#
define
XSIMD_WITH_SSE4_1
1
#
endif
#
if
XSIMD_WITH_SSE4_1
#
undef
XSIMD_WITH_SSSE3
#
define
XSIMD_WITH_SSSE3
1
#
endif
#
if
XSIMD_WITH_SSSE3
#
undef
XSIMD_WITH_SSE3
#
define
XSIMD_WITH_SSE3
1
#
endif
#
if
XSIMD_WITH_SSE3
|
|
defined
(
_M_AMD64
)
|
|
defined
(
_M_X64
)
|
|
(
defined
(
_M_IX86_FP
)
&
&
_M_IX86_FP
>
=
2
)
#
undef
XSIMD_WITH_SSE2
#
define
XSIMD_WITH_SSE2
1
#
endif
#
endif
#
if
!
XSIMD_WITH_SSE2
&
&
!
XSIMD_WITH_SSE3
&
&
!
XSIMD_WITH_SSSE3
&
&
!
XSIMD_WITH_SSE4_1
&
&
!
XSIMD_WITH_SSE4_2
&
&
!
XSIMD_WITH_AVX
&
&
!
XSIMD_WITH_AVX2
&
&
!
XSIMD_WITH_AVXVNNI
&
&
!
XSIMD_WITH_FMA3_SSE
&
&
!
XSIMD_WITH_FMA4
&
&
!
XSIMD_WITH_FMA3_AVX
&
&
!
XSIMD_WITH_FMA3_AVX2
&
&
!
XSIMD_WITH_AVX512F
&
&
!
XSIMD_WITH_AVX512CD
&
&
!
XSIMD_WITH_AVX512DQ
&
&
!
XSIMD_WITH_AVX512BW
&
&
!
XSIMD_WITH_AVX512ER
&
&
!
XSIMD_WITH_AVX512PF
&
&
!
XSIMD_WITH_AVX512IFMA
&
&
!
XSIMD_WITH_AVX512VBMI
&
&
!
XSIMD_WITH_NEON
&
&
!
XSIMD_WITH_NEON64
&
&
!
XSIMD_WITH_SVE
&
&
!
XSIMD_WITH_RVV
&
&
!
XSIMD_WITH_WASM
#
define
XSIMD_NO_SUPPORTED_ARCHITECTURE
#
endif
#
endif
