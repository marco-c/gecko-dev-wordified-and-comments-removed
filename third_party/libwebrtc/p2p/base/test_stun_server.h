#
ifndef
P2P_BASE_TEST_STUN_SERVER_H_
#
define
P2P_BASE_TEST_STUN_SERVER_H_
#
include
"
api
/
transport
/
stun
.
h
"
#
include
"
p2p
/
base
/
stun_server
.
h
"
#
include
"
rtc_base
/
async_udp_socket
.
h
"
#
include
"
rtc_base
/
socket_address
.
h
"
#
include
"
rtc_base
/
thread
.
h
"
namespace
cricket
{
class
TestStunServer
:
StunServer
{
public
:
static
TestStunServer
*
Create
(
rtc
:
:
Thread
*
thread
const
rtc
:
:
SocketAddress
&
addr
)
;
void
set_fake_stun_addr
(
const
rtc
:
:
SocketAddress
&
addr
)
{
fake_stun_addr_
=
addr
;
}
private
:
explicit
TestStunServer
(
rtc
:
:
AsyncUDPSocket
*
socket
)
:
StunServer
(
socket
)
{
}
void
OnBindingRequest
(
StunMessage
*
msg
const
rtc
:
:
SocketAddress
&
remote_addr
)
override
;
private
:
rtc
:
:
SocketAddress
fake_stun_addr_
;
}
;
}
#
endif
