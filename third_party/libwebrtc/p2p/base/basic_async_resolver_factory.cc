#
include
"
p2p
/
base
/
basic_async_resolver_factory
.
h
"
#
include
<
memory
>
#
include
<
utility
>
#
include
"
absl
/
memory
/
memory
.
h
"
#
include
"
api
/
async_dns_resolver
.
h
"
#
include
"
api
/
wrapping_async_dns_resolver
.
h
"
#
include
"
rtc_base
/
async_resolver
.
h
"
#
include
"
rtc_base
/
logging
.
h
"
namespace
webrtc
{
rtc
:
:
AsyncResolverInterface
*
BasicAsyncResolverFactory
:
:
Create
(
)
{
return
new
rtc
:
:
AsyncResolver
(
)
;
}
std
:
:
unique_ptr
<
webrtc
:
:
AsyncDnsResolverInterface
>
WrappingAsyncDnsResolverFactory
:
:
Create
(
)
{
return
std
:
:
make_unique
<
WrappingAsyncDnsResolver
>
(
wrapped_factory_
-
>
Create
(
)
)
;
}
std
:
:
unique_ptr
<
webrtc
:
:
AsyncDnsResolverInterface
>
WrappingAsyncDnsResolverFactory
:
:
CreateAndResolve
(
const
rtc
:
:
SocketAddress
&
addr
std
:
:
function
<
void
(
)
>
callback
)
{
std
:
:
unique_ptr
<
webrtc
:
:
AsyncDnsResolverInterface
>
resolver
=
Create
(
)
;
resolver
-
>
Start
(
addr
callback
)
;
return
resolver
;
}
}
