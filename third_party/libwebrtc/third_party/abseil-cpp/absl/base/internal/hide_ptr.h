#
ifndef
ABSL_BASE_INTERNAL_HIDE_PTR_H_
#
define
ABSL_BASE_INTERNAL_HIDE_PTR_H_
#
include
<
cstdint
>
#
include
"
absl
/
base
/
config
.
h
"
namespace
absl
{
ABSL_NAMESPACE_BEGIN
namespace
base_internal
{
constexpr
uintptr_t
HideMask
(
)
{
return
(
uintptr_t
{
0xF03A5F7BU
}
<
<
(
sizeof
(
uintptr_t
)
-
4
)
*
8
)
|
0xF03A5F7BU
;
}
template
<
class
T
>
inline
uintptr_t
HidePtr
(
T
*
ptr
)
{
return
reinterpret_cast
<
uintptr_t
>
(
ptr
)
^
HideMask
(
)
;
}
template
<
class
T
>
inline
T
*
UnhidePtr
(
uintptr_t
hidden
)
{
return
reinterpret_cast
<
T
*
>
(
hidden
^
HideMask
(
)
)
;
}
}
ABSL_NAMESPACE_END
}
#
endif
