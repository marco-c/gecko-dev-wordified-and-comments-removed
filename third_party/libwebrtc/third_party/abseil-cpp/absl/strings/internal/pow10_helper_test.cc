#
include
"
absl
/
strings
/
internal
/
pow10_helper
.
h
"
#
include
<
cmath
>
#
include
"
gtest
/
gtest
.
h
"
#
include
"
absl
/
strings
/
str_format
.
h
"
namespace
absl
{
ABSL_NAMESPACE_BEGIN
namespace
strings_internal
{
namespace
{
struct
TestCase
{
int
power
;
uint64_t
significand
;
int
radix
;
}
;
TEST
(
Pow10HelperTest
Works
)
{
constexpr
TestCase
kTestCases
[
]
=
{
{
-
323
0x2
-
1074
}
{
-
322
0x14
-
1074
}
{
-
321
0xca
-
1074
}
{
-
320
0x7e8
-
1074
}
{
-
319
0x4f10
-
1074
}
{
-
318
0x316a2
-
1074
}
{
-
317
0x1ee257
-
1074
}
{
-
316
0x134d761
-
1074
}
{
-
315
0xc1069cd
-
1074
}
{
-
314
0x78a42205
-
1074
}
{
-
313
0x4b6695433
-
1074
}
{
-
312
0x2f201d49fb
-
1074
}
{
-
311
0x1d74124e3d1
-
1074
}
{
-
310
0x12688b70e62b
-
1074
}
{
-
309
0xb8157268fdaf
-
1074
}
{
-
308
0x730d67819e8d2
-
1074
}
{
-
307
0x11fa182c40c60d
-
1072
}
{
-
290
0x18f2b061aea072
-
1016
}
{
-
276
0x11BA03F5B21000
-
969
}
{
-
259
0x1899C2F6732210
-
913
}
{
-
252
0x1D53844EE47DD1
-
890
}
{
-
227
0x1E5297287C2F45
-
807
}
{
-
198
0x1322E220A5B17E
-
710
}
{
-
195
0x12B010D3E1CF56
-
700
}
{
-
192
0x123FF06EEA847A
-
690
}
{
-
163
0x1708D0F84D3DE7
-
594
}
{
-
145
0x13FAAC3E3FA1F3
-
534
}
{
-
111
0x133D4032C2C7F5
-
421
}
{
-
106
0x1D5B561574765B
-
405
}
{
-
104
0x16EF5B40C2FC77
-
398
}
{
-
88
0x197683DF2F268D
-
345
}
{
-
86
0x13E497065CD61F
-
338
}
{
-
76
0x17288E1271F513
-
305
}
{
-
63
0x1A53FC9631D10D
-
262
}
{
-
30
0x14484BFEEBC2A0
-
152
}
{
-
21
0x12E3B40A0E9B4F
-
122
}
{
-
5
0x14F8B588E368F1
-
69
}
{
23
0x152D02C7E14AF6
24
}
{
29
0x1431E0FAE6D721
44
}
{
34
0x1ED09BEAD87C03
60
}
{
70
0x172EBAD6DDC73D
180
}
{
105
0x1BE7ABD3781ECA
296
}
{
126
0x17A2ECC414A03F
366
}
{
130
0x1CDA62055B2D9E
379
}
{
165
0x115D847AD00087
496
}
{
172
0x14B378469B6732
519
}
{
187
0x1262DFEEBBB0F9
569
}
{
210
0x18557F31326BBB
645
}
{
212
0x1302CB5E6F642A
652
}
{
215
0x1290BA9A38C7D1
662
}
{
236
0x1F736F9B3494E9
731
}
{
244
0x176EC98994F489
758
}
{
250
0x1658E3AB795204
778
}
{
252
0x117571DDF6C814
785
}
{
254
0x1B4781EAD1989E
791
}
{
260
0x1A03FDE214CAF1
811
}
{
284
0x1585041B2C477F
891
}
{
304
0x1D2A1BE4048F90
957
}
{
-
324
0x0
0
}
{
-
325
0x0
0
}
{
-
326
0x0
0
}
{
309
1
2000
}
{
310
1
2000
}
{
311
1
2000
}
}
;
for
(
const
TestCase
&
test_case
:
kTestCases
)
{
EXPECT_EQ
(
Pow10
(
test_case
.
power
)
std
:
:
ldexp
(
test_case
.
significand
test_case
.
radix
)
)
<
<
absl
:
:
StrFormat
(
"
Failure
for
Pow10
(
%
d
)
:
%
a
vs
%
a
"
test_case
.
power
Pow10
(
test_case
.
power
)
std
:
:
ldexp
(
test_case
.
significand
test_case
.
radix
)
)
;
}
}
}
}
ABSL_NAMESPACE_END
}
