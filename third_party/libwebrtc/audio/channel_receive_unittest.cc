#
include
"
audio
/
channel_receive
.
h
"
#
include
"
api
/
crypto
/
frame_decryptor_interface
.
h
"
#
include
"
api
/
task_queue
/
default_task_queue_factory
.
h
"
#
include
"
modules
/
audio_device
/
include
/
audio_device
.
h
"
#
include
"
modules
/
audio_device
/
include
/
mock_audio_device
.
h
"
#
include
"
rtc_base
/
thread
.
h
"
#
include
"
test
/
gmock
.
h
"
#
include
"
test
/
gtest
.
h
"
#
include
"
test
/
mock_transport
.
h
"
#
include
"
test
/
time_controller
/
simulated_time_controller
.
h
"
namespace
webrtc
{
namespace
voe
{
TEST
(
ChannelReceiveTest
CreateAndDestroy
)
{
GlobalSimulatedTimeController
time_controller
(
Timestamp
:
:
Seconds
(
5555
)
)
;
uint32_t
local_ssrc
=
1111
;
uint32_t
remote_ssrc
=
2222
;
webrtc
:
:
CryptoOptions
crypto_options
;
rtc
:
:
scoped_refptr
<
test
:
:
MockAudioDeviceModule
>
audio_device_module
=
test
:
:
MockAudioDeviceModule
:
:
CreateNice
(
)
;
MockTransport
transport
;
auto
channel
=
CreateChannelReceive
(
time_controller
.
GetClock
(
)
nullptr
audio_device_module
.
get
(
)
&
transport
nullptr
local_ssrc
remote_ssrc
0
false
0
false
nullptr
absl
:
:
nullopt
nullptr
crypto_options
nullptr
)
;
EXPECT_TRUE
(
!
!
channel
)
;
}
}
}
