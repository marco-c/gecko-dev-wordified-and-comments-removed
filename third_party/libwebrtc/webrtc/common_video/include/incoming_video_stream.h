#
ifndef
COMMON_VIDEO_INCLUDE_INCOMING_VIDEO_STREAM_H_
#
define
COMMON_VIDEO_INCLUDE_INCOMING_VIDEO_STREAM_H_
#
include
"
common_video
/
video_render_frames
.
h
"
#
include
"
media
/
base
/
videosinkinterface
.
h
"
#
include
"
rtc_base
/
race_checker
.
h
"
#
include
"
rtc_base
/
task_queue
.
h
"
namespace
webrtc
{
class
IncomingVideoStream
:
public
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
{
public
:
IncomingVideoStream
(
int32_t
delay_ms
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
callback
)
;
~
IncomingVideoStream
(
)
override
;
private
:
void
OnFrame
(
const
VideoFrame
&
video_frame
)
override
;
void
Dequeue
(
)
;
class
NewFrameTask
;
rtc
:
:
ThreadChecker
main_thread_checker_
;
rtc
:
:
RaceChecker
decoder_race_checker_
;
VideoRenderFrames
render_buffers_
;
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
const
callback_
;
rtc
:
:
TaskQueue
incoming_render_queue_
;
}
;
}
#
endif
