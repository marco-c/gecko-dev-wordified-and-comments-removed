#
include
"
modules
/
congestion_controller
/
congestion_controller_unittests_helper
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
void
ComparePacketFeedbackVectors
(
const
std
:
:
vector
<
PacketFeedback
>
&
truth
const
std
:
:
vector
<
PacketFeedback
>
&
input
)
{
ASSERT_EQ
(
truth
.
size
(
)
input
.
size
(
)
)
;
size_t
len
=
truth
.
size
(
)
;
int64_t
arrival_time_delta
=
truth
[
0
]
.
arrival_time_ms
-
input
[
0
]
.
arrival_time_ms
;
for
(
size_t
i
=
0
;
i
<
len
;
+
+
i
)
{
RTC_CHECK
(
truth
[
i
]
.
arrival_time_ms
!
=
PacketFeedback
:
:
kNotReceived
)
;
if
(
input
[
i
]
.
arrival_time_ms
!
=
PacketFeedback
:
:
kNotReceived
)
{
EXPECT_EQ
(
truth
[
i
]
.
arrival_time_ms
input
[
i
]
.
arrival_time_ms
+
arrival_time_delta
)
;
}
EXPECT_EQ
(
truth
[
i
]
.
send_time_ms
input
[
i
]
.
send_time_ms
)
;
EXPECT_EQ
(
truth
[
i
]
.
sequence_number
input
[
i
]
.
sequence_number
)
;
EXPECT_EQ
(
truth
[
i
]
.
payload_size
input
[
i
]
.
payload_size
)
;
EXPECT_EQ
(
truth
[
i
]
.
pacing_info
input
[
i
]
.
pacing_info
)
;
}
}
}
