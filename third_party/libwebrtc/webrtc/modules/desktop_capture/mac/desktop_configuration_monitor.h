#
ifndef
MODULES_DESKTOP_CAPTURE_MAC_DESKTOP_CONFIGURATION_MONITOR_H_
#
define
MODULES_DESKTOP_CAPTURE_MAC_DESKTOP_CONFIGURATION_MONITOR_H_
#
include
<
ApplicationServices
/
ApplicationServices
.
h
>
#
include
<
memory
>
#
include
<
set
>
#
include
"
api
/
refcountedbase
.
h
"
#
include
"
modules
/
desktop_capture
/
mac
/
desktop_configuration
.
h
"
#
include
"
rtc_base
/
constructormagic
.
h
"
namespace
webrtc
{
class
EventWrapper
;
class
DesktopConfigurationMonitor
:
public
rtc
:
:
RefCountedBase
{
public
:
DesktopConfigurationMonitor
(
)
;
void
Lock
(
)
;
void
Unlock
(
)
;
const
MacDesktopConfiguration
&
desktop_configuration
(
)
{
return
desktop_configuration_
;
}
protected
:
~
DesktopConfigurationMonitor
(
)
override
;
private
:
static
void
DisplaysReconfiguredCallback
(
CGDirectDisplayID
display
CGDisplayChangeSummaryFlags
flags
void
*
user_parameter
)
;
void
DisplaysReconfigured
(
CGDirectDisplayID
display
CGDisplayChangeSummaryFlags
flags
)
;
std
:
:
set
<
CGDirectDisplayID
>
reconfiguring_displays_
;
MacDesktopConfiguration
desktop_configuration_
;
std
:
:
unique_ptr
<
EventWrapper
>
display_configuration_capture_event_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
DesktopConfigurationMonitor
)
;
}
;
}
#
endif
