#
ifndef
MODULES_AUDIO_DEVICE_ANDROID_OPENSLES_COMMON_H_
#
define
MODULES_AUDIO_DEVICE_ANDROID_OPENSLES_COMMON_H_
#
include
<
stddef
.
h
>
#
include
<
SLES
/
OpenSLES
.
h
>
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
const
char
*
GetSLErrorString
(
size_t
code
)
;
SLDataFormat_PCM
CreatePCMConfiguration
(
size_t
channels
int
sample_rate
size_t
bits_per_sample
)
;
template
<
typename
SLType
typename
SLDerefType
>
class
ScopedSLObject
{
public
:
ScopedSLObject
(
)
:
obj_
(
nullptr
)
{
}
~
ScopedSLObject
(
)
{
Reset
(
)
;
}
SLType
*
Receive
(
)
{
RTC_DCHECK
(
!
obj_
)
;
return
&
obj_
;
}
SLDerefType
operator
-
>
(
)
{
return
*
obj_
;
}
SLType
Get
(
)
const
{
return
obj_
;
}
void
Reset
(
)
{
if
(
obj_
)
{
(
*
obj_
)
-
>
Destroy
(
obj_
)
;
obj_
=
nullptr
;
}
}
private
:
SLType
obj_
;
}
;
typedef
ScopedSLObject
<
SLObjectItf
const
SLObjectItf_
*
>
ScopedSLObjectItf
;
}
#
endif
