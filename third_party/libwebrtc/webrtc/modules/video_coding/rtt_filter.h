#
ifndef
MODULES_VIDEO_CODING_RTT_FILTER_H_
#
define
MODULES_VIDEO_CODING_RTT_FILTER_H_
#
include
"
typedefs
.
h
"
namespace
webrtc
{
class
VCMRttFilter
{
public
:
VCMRttFilter
(
)
;
VCMRttFilter
&
operator
=
(
const
VCMRttFilter
&
rhs
)
;
void
Reset
(
)
;
void
Update
(
int64_t
rttMs
)
;
int64_t
RttMs
(
)
const
;
private
:
enum
{
kMaxDriftJumpCount
=
5
}
;
bool
JumpDetection
(
int64_t
rttMs
)
;
bool
DriftDetection
(
int64_t
rttMs
)
;
void
ShortRttFilter
(
int64_t
*
buf
uint32_t
length
)
;
bool
_gotNonZeroUpdate
;
double
_avgRtt
;
double
_varRtt
;
int64_t
_maxRtt
;
uint32_t
_filtFactCount
;
const
uint32_t
_filtFactMax
;
const
double
_jumpStdDevs
;
const
double
_driftStdDevs
;
int32_t
_jumpCount
;
int32_t
_driftCount
;
const
int32_t
_detectThreshold
;
int64_t
_jumpBuf
[
kMaxDriftJumpCount
]
;
int64_t
_driftBuf
[
kMaxDriftJumpCount
]
;
}
;
}
#
endif
