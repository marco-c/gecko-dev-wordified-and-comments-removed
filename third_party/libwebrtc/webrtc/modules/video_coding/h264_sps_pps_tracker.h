#
ifndef
MODULES_VIDEO_CODING_H264_SPS_PPS_TRACKER_H_
#
define
MODULES_VIDEO_CODING_H264_SPS_PPS_TRACKER_H_
#
include
<
cstdint
>
#
include
<
map
>
#
include
<
memory
>
#
include
<
vector
>
#
include
"
modules
/
include
/
module_common_types
.
h
"
namespace
webrtc
{
class
VCMPacket
;
namespace
video_coding
{
class
H264SpsPpsTracker
{
public
:
enum
PacketAction
{
kInsert
kDrop
kRequestKeyframe
}
;
PacketAction
CopyAndFixBitstream
(
VCMPacket
*
packet
)
;
void
InsertSpsPpsNalus
(
const
std
:
:
vector
<
uint8_t
>
&
sps
const
std
:
:
vector
<
uint8_t
>
&
pps
)
;
private
:
struct
PpsInfo
{
int
sps_id
=
-
1
;
size_t
size
=
0
;
std
:
:
unique_ptr
<
uint8_t
[
]
>
data
;
}
;
struct
SpsInfo
{
size_t
size
=
0
;
int
width
=
-
1
;
int
height
=
-
1
;
std
:
:
unique_ptr
<
uint8_t
[
]
>
data
;
}
;
std
:
:
map
<
uint32_t
PpsInfo
>
pps_data_
;
std
:
:
map
<
uint32_t
SpsInfo
>
sps_data_
;
}
;
}
}
#
endif
