#
include
<
stdio
.
h
>
#
include
<
string
>
#
include
<
vector
>
#
include
"
modules
/
audio_coding
/
include
/
audio_coding_module
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
APITest
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
EncodeDecodeTest
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
PacketLossTest
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
TestAllCodecs
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
TestRedFec
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
TestStereo
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
TestVADDTX
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
TwoWayCommunication
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
iSACTest
.
h
"
#
include
"
modules
/
audio_coding
/
test
/
opus_test
.
h
"
#
include
"
test
/
gtest
.
h
"
#
include
"
test
/
testsupport
/
fileutils
.
h
"
#
define
ACM_TEST_MODE
0
TEST
(
AudioCodingModuleTest
TestAllCodecs
)
{
webrtc
:
:
TestAllCodecs
(
ACM_TEST_MODE
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_ANDROID
)
TEST
(
AudioCodingModuleTest
DISABLED_TestEncodeDecode
)
{
#
else
TEST
(
AudioCodingModuleTest
TestEncodeDecode
)
{
#
endif
webrtc
:
:
EncodeDecodeTest
(
ACM_TEST_MODE
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_CODEC_RED
)
#
if
defined
(
WEBRTC_ANDROID
)
TEST
(
AudioCodingModuleTest
DISABLED_TestRedFec
)
{
#
else
TEST
(
AudioCodingModuleTest
TestRedFec
)
{
#
endif
webrtc
:
:
TestRedFec
(
)
.
Perform
(
)
;
}
#
endif
#
if
defined
(
WEBRTC_CODEC_ISAC
)
|
|
defined
(
WEBRTC_CODEC_ISACFX
)
#
if
defined
(
WEBRTC_ANDROID
)
TEST
(
AudioCodingModuleTest
DISABLED_TestIsac
)
{
#
else
TEST
(
AudioCodingModuleTest
TestIsac
)
{
#
endif
webrtc
:
:
ISACTest
(
ACM_TEST_MODE
)
.
Perform
(
)
;
}
#
endif
#
if
(
defined
(
WEBRTC_CODEC_ISAC
)
|
|
defined
(
WEBRTC_CODEC_ISACFX
)
)
&
&
\
defined
(
WEBRTC_CODEC_ILBC
)
#
if
defined
(
WEBRTC_ANDROID
)
TEST
(
AudioCodingModuleTest
DISABLED_TwoWayCommunication
)
{
#
else
TEST
(
AudioCodingModuleTest
TwoWayCommunication
)
{
#
endif
webrtc
:
:
TwoWayCommunication
(
ACM_TEST_MODE
)
.
Perform
(
)
;
}
#
endif
#
if
defined
(
WEBRTC_ANDROID
)
|
|
defined
(
WEBRTC_IOS
)
TEST
(
AudioCodingModuleTest
DISABLED_TestStereo
)
{
#
else
TEST
(
AudioCodingModuleTest
TestStereo
)
{
#
endif
webrtc
:
:
TestStereo
(
ACM_TEST_MODE
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_ANDROID
)
|
|
defined
(
WEBRTC_IOS
)
TEST
(
AudioCodingModuleTest
DISABLED_TestWebRtcVadDtx
)
{
#
else
TEST
(
AudioCodingModuleTest
TestWebRtcVadDtx
)
{
#
endif
webrtc
:
:
TestWebRtcVadDtx
(
)
.
Perform
(
)
;
}
TEST
(
AudioCodingModuleTest
TestOpusDtx
)
{
webrtc
:
:
TestOpusDtx
(
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_IOS
)
TEST
(
AudioCodingModuleTest
DISABLED_TestOpus
)
{
#
else
TEST
(
AudioCodingModuleTest
TestOpus
)
{
#
endif
webrtc
:
:
OpusTest
(
)
.
Perform
(
)
;
}
TEST
(
AudioCodingModuleTest
TestPacketLoss
)
{
webrtc
:
:
PacketLossTest
(
1
10
10
1
)
.
Perform
(
)
;
}
TEST
(
AudioCodingModuleTest
TestPacketLossBurst
)
{
webrtc
:
:
PacketLossTest
(
1
10
10
2
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_IOS
)
TEST
(
AudioCodingModuleTest
DISABLED_TestPacketLossStereo
)
{
#
else
TEST
(
AudioCodingModuleTest
TestPacketLossStereo
)
{
#
endif
webrtc
:
:
PacketLossTest
(
2
10
10
1
)
.
Perform
(
)
;
}
#
if
defined
(
WEBRTC_IOS
)
TEST
(
AudioCodingModuleTest
DISABLED_TestPacketLossStereoBurst
)
{
#
else
TEST
(
AudioCodingModuleTest
TestPacketLossStereoBurst
)
{
#
endif
webrtc
:
:
PacketLossTest
(
2
10
10
2
)
.
Perform
(
)
;
}
#
ifdef
ACM_TEST_FULL_API
TEST
(
AudioCodingModuleTest
TestAPI
)
{
webrtc
:
:
APITest
(
)
.
Perform
(
)
;
}
#
endif
