#
include
"
modules
/
audio_coding
/
neteq
/
tools
/
neteq_performance_test
.
h
"
#
include
"
test
/
gtest
.
h
"
#
include
"
test
/
testsupport
/
perf_test
.
h
"
#
include
"
typedefs
.
h
"
#
include
"
system_wrappers
/
include
/
field_trial
.
h
"
TEST
(
NetEqPerformanceTest
Run
)
{
const
int
kSimulationTimeMs
=
10000000
;
const
int
kQuickSimulationTimeMs
=
100000
;
const
int
kLossPeriod
=
10
;
const
double
kDriftFactor
=
0
.
1
;
int64_t
runtime
=
webrtc
:
:
test
:
:
NetEqPerformanceTest
:
:
Run
(
webrtc
:
:
field_trial
:
:
IsEnabled
(
"
WebRTC
-
QuickPerfTest
"
)
?
kQuickSimulationTimeMs
:
kSimulationTimeMs
kLossPeriod
kDriftFactor
)
;
ASSERT_GT
(
runtime
0
)
;
webrtc
:
:
test
:
:
PrintResult
(
"
neteq_performance
"
"
"
"
10_pl_10_drift
"
runtime
"
ms
"
true
)
;
}
TEST
(
NetEqPerformanceTest
RunClean
)
{
const
int
kSimulationTimeMs
=
10000000
;
const
int
kQuickSimulationTimeMs
=
100000
;
const
int
kLossPeriod
=
0
;
const
double
kDriftFactor
=
0
.
0
;
int64_t
runtime
=
webrtc
:
:
test
:
:
NetEqPerformanceTest
:
:
Run
(
webrtc
:
:
field_trial
:
:
IsEnabled
(
"
WebRTC
-
QuickPerfTest
"
)
?
kQuickSimulationTimeMs
:
kSimulationTimeMs
kLossPeriod
kDriftFactor
)
;
ASSERT_GT
(
runtime
0
)
;
webrtc
:
:
test
:
:
PrintResult
(
"
neteq_performance
"
"
"
"
0_pl_0_drift
"
runtime
"
ms
"
true
)
;
}
