#
ifndef
MODULES_AUDIO_CODING_NETEQ_SYNC_BUFFER_H_
#
define
MODULES_AUDIO_CODING_NETEQ_SYNC_BUFFER_H_
#
include
"
modules
/
audio_coding
/
neteq
/
audio_multi_vector
.
h
"
#
include
"
modules
/
include
/
module_common_types
.
h
"
#
include
"
rtc_base
/
constructormagic
.
h
"
#
include
"
typedefs
.
h
"
namespace
webrtc
{
class
SyncBuffer
:
public
AudioMultiVector
{
public
:
SyncBuffer
(
size_t
channels
size_t
length
)
:
AudioMultiVector
(
channels
length
)
next_index_
(
length
)
end_timestamp_
(
0
)
dtmf_index_
(
0
)
{
}
size_t
FutureLength
(
)
const
;
void
PushBack
(
const
AudioMultiVector
&
append_this
)
override
;
void
PushFrontZeros
(
size_t
length
)
;
virtual
void
InsertZerosAtIndex
(
size_t
length
size_t
position
)
;
virtual
void
ReplaceAtIndex
(
const
AudioMultiVector
&
insert_this
size_t
length
size_t
position
)
;
virtual
void
ReplaceAtIndex
(
const
AudioMultiVector
&
insert_this
size_t
position
)
;
void
GetNextAudioInterleaved
(
size_t
requested_len
AudioFrame
*
output
)
;
void
IncreaseEndTimestamp
(
uint32_t
increment
)
;
void
Flush
(
)
;
const
AudioVector
&
Channel
(
size_t
n
)
const
{
return
*
channels_
[
n
]
;
}
AudioVector
&
Channel
(
size_t
n
)
{
return
*
channels_
[
n
]
;
}
size_t
next_index
(
)
const
{
return
next_index_
;
}
void
set_next_index
(
size_t
value
)
;
uint32_t
end_timestamp
(
)
const
{
return
end_timestamp_
;
}
void
set_end_timestamp
(
uint32_t
value
)
{
end_timestamp_
=
value
;
}
size_t
dtmf_index
(
)
const
{
return
dtmf_index_
;
}
void
set_dtmf_index
(
size_t
value
)
;
private
:
size_t
next_index_
;
uint32_t
end_timestamp_
;
size_t
dtmf_index_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
SyncBuffer
)
;
}
;
}
#
endif
