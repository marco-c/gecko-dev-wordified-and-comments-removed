#
ifndef
MEDIA_ENGINE_WEBRTCMEDIAENGINE_H_
#
define
MEDIA_ENGINE_WEBRTCMEDIAENGINE_H_
#
include
<
memory
>
#
include
<
string
>
#
include
<
vector
>
#
include
"
call
/
call
.
h
"
#
include
"
media
/
base
/
mediaengine
.
h
"
namespace
webrtc
{
class
AudioDecoderFactory
;
class
AudioDeviceModule
;
class
AudioMixer
;
class
AudioProcessing
;
class
VideoDecoderFactory
;
class
VideoEncoderFactory
;
}
namespace
cricket
{
class
WebRtcVideoDecoderFactory
;
class
WebRtcVideoEncoderFactory
;
}
namespace
cricket
{
class
WebRtcMediaEngineFactory
{
public
:
static
MediaEngineInterface
*
Create
(
webrtc
:
:
AudioDeviceModule
*
adm
const
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioEncoderFactory
>
&
audio_encoder_factory
const
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioDecoderFactory
>
&
audio_decoder_factory
WebRtcVideoEncoderFactory
*
video_encoder_factory
WebRtcVideoDecoderFactory
*
video_decoder_factory
)
;
static
MediaEngineInterface
*
Create
(
webrtc
:
:
AudioDeviceModule
*
adm
const
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioEncoderFactory
>
&
audio_encoder_factory
const
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioDecoderFactory
>
&
audio_decoder_factory
WebRtcVideoEncoderFactory
*
video_encoder_factory
WebRtcVideoDecoderFactory
*
video_decoder_factory
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioMixer
>
audio_mixer
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioProcessing
>
apm
)
;
static
std
:
:
unique_ptr
<
MediaEngineInterface
>
Create
(
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioDeviceModule
>
adm
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioEncoderFactory
>
audio_encoder_factory
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioDecoderFactory
>
audio_decoder_factory
std
:
:
unique_ptr
<
webrtc
:
:
VideoEncoderFactory
>
video_encoder_factory
std
:
:
unique_ptr
<
webrtc
:
:
VideoDecoderFactory
>
video_decoder_factory
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioMixer
>
audio_mixer
rtc
:
:
scoped_refptr
<
webrtc
:
:
AudioProcessing
>
audio_processing
)
;
}
;
bool
ValidateRtpExtensions
(
const
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
&
extensions
)
;
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
FilterRtpExtensions
(
const
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
&
extensions
bool
(
*
supported
)
(
const
std
:
:
string
&
)
bool
filter_redundant_extensions
)
;
webrtc
:
:
Call
:
:
Config
:
:
BitrateConfig
GetBitrateConfigForCodec
(
const
Codec
&
codec
)
;
}
#
endif
