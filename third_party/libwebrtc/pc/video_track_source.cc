#
include
"
pc
/
video_track_source
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
VideoTrackSource
:
:
VideoTrackSource
(
bool
remote
)
:
state_
(
kInitializing
)
remote_
(
remote
)
{
worker_thread_checker_
.
Detach
(
)
;
}
void
VideoTrackSource
:
:
SetState
(
SourceState
new_state
)
{
if
(
state_
!
=
new_state
)
{
state_
=
new_state
;
FireOnChanged
(
)
;
}
}
void
VideoTrackSource
:
:
AddOrUpdateSink
(
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
sink
const
rtc
:
:
VideoSinkWants
&
wants
)
{
RTC_DCHECK
(
worker_thread_checker_
.
IsCurrent
(
)
)
;
source
(
)
-
>
AddOrUpdateSink
(
sink
wants
)
;
}
void
VideoTrackSource
:
:
RemoveSink
(
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
sink
)
{
RTC_DCHECK
(
worker_thread_checker_
.
IsCurrent
(
)
)
;
source
(
)
-
>
RemoveSink
(
sink
)
;
}
}
