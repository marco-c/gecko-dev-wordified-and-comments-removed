#
include
"
api
/
jsep_ice_candidate
.
h
"
#
include
<
cstddef
>
#
include
<
memory
>
#
include
<
string
>
#
include
"
absl
/
base
/
nullability
.
h
"
#
include
"
absl
/
strings
/
string_view
.
h
"
#
include
"
api
/
candidate
.
h
"
#
include
"
api
/
jsep
.
h
"
#
include
"
pc
/
webrtc_sdp
.
h
"
namespace
webrtc
{
IceCandidate
*
CreateIceCandidate
(
const
std
:
:
string
&
sdp_mid
int
sdp_mline_index
const
std
:
:
string
&
sdp
SdpParseError
*
error
)
{
std
:
:
unique_ptr
<
IceCandidate
>
candidate
=
IceCandidate
:
:
Create
(
sdp_mid
sdp_mline_index
sdp
error
)
;
if
(
!
candidate
)
{
return
nullptr
;
}
return
candidate
.
release
(
)
;
}
std
:
:
unique_ptr
<
IceCandidate
>
CreateIceCandidate
(
const
std
:
:
string
&
sdp_mid
int
sdp_mline_index
const
Candidate
&
candidate
)
{
return
std
:
:
make_unique
<
IceCandidate
>
(
sdp_mid
sdp_mline_index
candidate
)
;
}
std
:
:
unique_ptr
<
IceCandidate
>
IceCandidate
:
:
Create
(
absl
:
:
string_view
mid
int
sdp_mline_index
absl
:
:
string_view
sdp
SdpParseError
*
absl_nullable
error
)
{
Candidate
candidate
;
if
(
!
ParseCandidate
(
sdp
&
candidate
error
true
)
)
{
return
nullptr
;
}
return
std
:
:
make_unique
<
IceCandidate
>
(
mid
sdp_mline_index
candidate
)
;
}
IceCandidateCollection
IceCandidateCollection
:
:
Clone
(
)
const
{
IceCandidateCollection
new_collection
;
new_collection
.
candidates_
.
reserve
(
candidates_
.
size
(
)
)
;
for
(
const
auto
&
candidate
:
candidates_
)
{
new_collection
.
candidates_
.
push_back
(
std
:
:
make_unique
<
IceCandidate
>
(
candidate
-
>
sdp_mid
(
)
candidate
-
>
sdp_mline_index
(
)
candidate
-
>
candidate
(
)
)
)
;
}
return
new_collection
;
}
std
:
:
string
IceCandidate
:
:
ToString
(
)
const
{
return
SdpSerializeCandidate
(
*
this
)
;
}
}
