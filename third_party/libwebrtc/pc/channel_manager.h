#
ifndef
PC_CHANNEL_MANAGER_H_
#
define
PC_CHANNEL_MANAGER_H_
#
include
<
stdint
.
h
>
#
include
<
memory
>
#
include
<
string
>
#
include
<
vector
>
#
include
"
api
/
audio_options
.
h
"
#
include
"
api
/
crypto
/
crypto_options
.
h
"
#
include
"
api
/
rtp_parameters
.
h
"
#
include
"
api
/
video
/
video_bitrate_allocator_factory
.
h
"
#
include
"
call
/
call
.
h
"
#
include
"
media
/
base
/
codec
.
h
"
#
include
"
media
/
base
/
media_channel
.
h
"
#
include
"
media
/
base
/
media_config
.
h
"
#
include
"
media
/
base
/
media_engine
.
h
"
#
include
"
pc
/
channel_factory_interface
.
h
"
#
include
"
pc
/
channel_interface
.
h
"
#
include
"
pc
/
session_description
.
h
"
#
include
"
rtc_base
/
system
/
file_wrapper
.
h
"
#
include
"
rtc_base
/
thread
.
h
"
#
include
"
rtc_base
/
thread_annotations
.
h
"
#
include
"
rtc_base
/
unique_id_generator
.
h
"
namespace
cricket
{
class
ChannelManager
:
public
ChannelFactoryInterface
{
public
:
static
std
:
:
unique_ptr
<
ChannelManager
>
Create
(
std
:
:
unique_ptr
<
MediaEngineInterface
>
media_engine
bool
enable_rtx
rtc
:
:
Thread
*
worker_thread
rtc
:
:
Thread
*
network_thread
)
;
ChannelManager
(
)
=
delete
;
~
ChannelManager
(
)
override
;
rtc
:
:
Thread
*
worker_thread
(
)
const
{
return
worker_thread_
;
}
rtc
:
:
Thread
*
network_thread
(
)
const
{
return
network_thread_
;
}
MediaEngineInterface
*
media_engine
(
)
{
return
media_engine_
.
get
(
)
;
}
rtc
:
:
UniqueRandomIdGenerator
&
ssrc_generator
(
)
{
return
ssrc_generator_
;
}
void
GetSupportedAudioSendCodecs
(
std
:
:
vector
<
AudioCodec
>
*
codecs
)
const
;
void
GetSupportedAudioReceiveCodecs
(
std
:
:
vector
<
AudioCodec
>
*
codecs
)
const
;
void
GetSupportedVideoSendCodecs
(
std
:
:
vector
<
VideoCodec
>
*
codecs
)
const
;
void
GetSupportedVideoReceiveCodecs
(
std
:
:
vector
<
VideoCodec
>
*
codecs
)
const
;
std
:
:
unique_ptr
<
VoiceChannel
>
CreateVoiceChannel
(
webrtc
:
:
Call
*
call
const
MediaConfig
&
media_config
absl
:
:
string_view
mid
bool
srtp_required
const
webrtc
:
:
CryptoOptions
&
crypto_options
const
AudioOptions
&
options
)
override
;
std
:
:
unique_ptr
<
VideoChannel
>
CreateVideoChannel
(
webrtc
:
:
Call
*
call
const
MediaConfig
&
media_config
absl
:
:
string_view
mid
bool
srtp_required
const
webrtc
:
:
CryptoOptions
&
crypto_options
const
VideoOptions
&
options
webrtc
:
:
VideoBitrateAllocatorFactory
*
video_bitrate_allocator_factory
)
override
;
protected
:
ChannelManager
(
std
:
:
unique_ptr
<
MediaEngineInterface
>
media_engine
bool
enable_rtx
rtc
:
:
Thread
*
worker_thread
rtc
:
:
Thread
*
network_thread
)
;
void
DestroyVoiceChannel
(
VoiceChannel
*
voice_channel
)
;
void
DestroyVideoChannel
(
VideoChannel
*
video_channel
)
;
private
:
const
std
:
:
unique_ptr
<
MediaEngineInterface
>
media_engine_
;
rtc
:
:
Thread
*
const
signaling_thread_
;
rtc
:
:
Thread
*
const
worker_thread_
;
rtc
:
:
Thread
*
const
network_thread_
;
rtc
:
:
UniqueRandomIdGenerator
ssrc_generator_
;
const
bool
enable_rtx_
;
}
;
}
#
endif
