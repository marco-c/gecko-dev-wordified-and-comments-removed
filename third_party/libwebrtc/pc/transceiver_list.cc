#
include
"
pc
/
transceiver_list
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
void
TransceiverStableState
:
:
set_newly_created
(
)
{
RTC_DCHECK
(
!
has_m_section_
)
;
newly_created_
=
true
;
}
void
TransceiverStableState
:
:
SetMSectionIfUnset
(
absl
:
:
optional
<
std
:
:
string
>
mid
absl
:
:
optional
<
size_t
>
mline_index
)
{
if
(
!
has_m_section_
)
{
mid_
=
mid
;
mline_index_
=
mline_index
;
has_m_section_
=
true
;
}
}
void
TransceiverStableState
:
:
SetRemoteStreamIdsIfUnset
(
const
std
:
:
vector
<
std
:
:
string
>
&
ids
)
{
if
(
!
remote_stream_ids_
.
has_value
(
)
)
{
remote_stream_ids_
=
ids
;
}
}
void
TransceiverStableState
:
:
SetInitSendEncodings
(
const
std
:
:
vector
<
RtpEncodingParameters
>
&
encodings
)
{
init_send_encodings_
=
encodings
;
}
RtpTransceiverProxyRefPtr
TransceiverList
:
:
FindBySender
(
rtc
:
:
scoped_refptr
<
RtpSenderInterface
>
sender
)
const
{
for
(
auto
transceiver
:
transceivers_
)
{
if
(
transceiver
-
>
sender
(
)
=
=
sender
)
{
return
transceiver
;
}
}
return
nullptr
;
}
RtpTransceiverProxyRefPtr
TransceiverList
:
:
FindByMid
(
const
std
:
:
string
&
mid
)
const
{
for
(
auto
transceiver
:
transceivers_
)
{
if
(
transceiver
-
>
mid
(
)
=
=
mid
)
{
return
transceiver
;
}
}
return
nullptr
;
}
RtpTransceiverProxyRefPtr
TransceiverList
:
:
FindByMLineIndex
(
size_t
mline_index
)
const
{
for
(
auto
transceiver
:
transceivers_
)
{
if
(
transceiver
-
>
internal
(
)
-
>
mline_index
(
)
=
=
mline_index
)
{
return
transceiver
;
}
}
return
nullptr
;
}
}
