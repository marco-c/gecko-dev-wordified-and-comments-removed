#
ifndef
PC_COMPOSITE_RTP_TRANSPORT_H_
#
define
PC_COMPOSITE_RTP_TRANSPORT_H_
#
include
<
memory
>
#
include
<
set
>
#
include
<
string
>
#
include
<
vector
>
#
include
"
call
/
rtp_demuxer
.
h
"
#
include
"
call
/
rtp_packet_sink_interface
.
h
"
#
include
"
pc
/
rtp_transport_internal
.
h
"
#
include
"
pc
/
session_description
.
h
"
#
include
"
rtc_base
/
async_packet_socket
.
h
"
#
include
"
rtc_base
/
copy_on_write_buffer
.
h
"
namespace
webrtc
{
class
CompositeRtpTransport
:
public
RtpTransportInternal
{
public
:
explicit
CompositeRtpTransport
(
std
:
:
vector
<
RtpTransportInternal
*
>
transports
)
;
void
SetSendTransport
(
RtpTransportInternal
*
send_transport
)
;
void
RemoveTransport
(
RtpTransportInternal
*
transport
)
;
const
std
:
:
string
&
transport_name
(
)
const
override
;
int
SetRtpOption
(
rtc
:
:
Socket
:
:
Option
opt
int
value
)
override
;
int
SetRtcpOption
(
rtc
:
:
Socket
:
:
Option
opt
int
value
)
override
;
bool
rtcp_mux_enabled
(
)
const
override
;
void
SetRtcpMuxEnabled
(
bool
enabled
)
override
;
bool
IsReadyToSend
(
)
const
override
;
bool
IsWritable
(
bool
rtcp
)
const
override
;
bool
SendRtpPacket
(
rtc
:
:
CopyOnWriteBuffer
*
packet
const
rtc
:
:
PacketOptions
&
options
int
flags
)
override
;
bool
SendRtcpPacket
(
rtc
:
:
CopyOnWriteBuffer
*
packet
const
rtc
:
:
PacketOptions
&
options
int
flags
)
override
;
void
UpdateRtpHeaderExtensionMap
(
const
cricket
:
:
RtpHeaderExtensions
&
header_extensions
)
override
;
bool
IsSrtpActive
(
)
const
override
;
bool
RegisterRtpDemuxerSink
(
const
RtpDemuxerCriteria
&
criteria
RtpPacketSinkInterface
*
sink
)
override
;
bool
UnregisterRtpDemuxerSink
(
RtpPacketSinkInterface
*
sink
)
override
;
private
:
void
OnNetworkRouteChanged
(
absl
:
:
optional
<
rtc
:
:
NetworkRoute
>
route
)
;
void
OnRtcpPacketReceived
(
rtc
:
:
CopyOnWriteBuffer
*
packet
int64_t
packet_time_us
)
;
void
OnWritableState
(
bool
writable
)
;
void
OnReadyToSend
(
bool
ready_to_send
)
;
void
OnSentPacket
(
const
rtc
:
:
SentPacket
&
packet
)
;
std
:
:
vector
<
RtpTransportInternal
*
>
transports_
;
RtpTransportInternal
*
send_transport_
=
nullptr
;
std
:
:
set
<
RtpPacketSinkInterface
*
>
rtp_demuxer_sinks_
;
}
;
}
#
endif
