#
include
"
test
/
fake_texture_frame
.
h
"
#
include
"
api
/
video
/
i420_buffer
.
h
"
#
include
"
rtc_base
/
ref_counted_object
.
h
"
namespace
webrtc
{
namespace
test
{
VideoFrame
FakeNativeBuffer
:
:
CreateFrame
(
int
width
int
height
uint32_t
timestamp
int64_t
render_time_ms
VideoRotation
rotation
)
{
return
VideoFrame
:
:
Builder
(
)
.
set_video_frame_buffer
(
rtc
:
:
make_ref_counted
<
FakeNativeBuffer
>
(
width
height
)
)
.
set_timestamp_rtp
(
timestamp
)
.
set_timestamp_ms
(
render_time_ms
)
.
set_rotation
(
rotation
)
.
build
(
)
;
}
VideoFrameBuffer
:
:
Type
FakeNativeBuffer
:
:
type
(
)
const
{
return
Type
:
:
kNative
;
}
int
FakeNativeBuffer
:
:
width
(
)
const
{
return
width_
;
}
int
FakeNativeBuffer
:
:
height
(
)
const
{
return
height_
;
}
rtc
:
:
scoped_refptr
<
I420BufferInterface
>
FakeNativeBuffer
:
:
ToI420
(
)
{
rtc
:
:
scoped_refptr
<
I420Buffer
>
buffer
=
I420Buffer
:
:
Create
(
width_
height_
)
;
I420Buffer
:
:
SetBlack
(
buffer
.
get
(
)
)
;
return
buffer
;
}
}
}
