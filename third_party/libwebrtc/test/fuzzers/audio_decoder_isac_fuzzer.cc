#
include
"
modules
/
audio_coding
/
codecs
/
isac
/
main
/
include
/
audio_decoder_isac
.
h
"
#
include
"
test
/
fuzzers
/
audio_decoder_fuzzer
.
h
"
namespace
webrtc
{
void
FuzzOneInput
(
const
uint8_t
*
data
size_t
size
)
{
if
(
size
>
20000
)
{
return
;
}
const
int
sample_rate_hz
=
size
%
2
=
=
0
?
16000
:
32000
;
static
const
size_t
kAllocatedOuputSizeSamples
=
32000
/
10
;
int16_t
output
[
kAllocatedOuputSizeSamples
]
;
AudioDecoderIsacFloatImpl
:
:
Config
c
;
c
.
sample_rate_hz
=
sample_rate_hz
;
AudioDecoderIsacFloatImpl
dec
(
c
)
;
FuzzAudioDecoder
(
DecoderFunctionType
:
:
kNormalDecode
data
size
&
dec
sample_rate_hz
sizeof
(
output
)
output
)
;
}
}
