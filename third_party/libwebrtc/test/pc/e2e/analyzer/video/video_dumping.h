#
ifndef
TEST_PC_E2E_ANALYZER_VIDEO_VIDEO_DUMPING_H_
#
define
TEST_PC_E2E_ANALYZER_VIDEO_VIDEO_DUMPING_H_
#
include
<
cstdint
>
#
include
<
memory
>
#
include
"
absl
/
strings
/
string_view
.
h
"
#
include
"
api
/
test
/
video
/
video_frame_writer
.
h
"
#
include
"
api
/
video
/
video_frame
.
h
"
#
include
"
api
/
video
/
video_sink_interface
.
h
"
namespace
webrtc
{
namespace
webrtc_pc_e2e
{
class
VideoWriter
final
:
public
VideoSinkInterface
<
VideoFrame
>
{
public
:
VideoWriter
(
test
:
:
VideoFrameWriter
*
video_writer
int
sampling_modulo
)
;
VideoWriter
(
const
VideoWriter
&
)
=
delete
;
VideoWriter
&
operator
=
(
const
VideoWriter
&
)
=
delete
;
~
VideoWriter
(
)
override
=
default
;
void
OnFrame
(
const
VideoFrame
&
frame
)
override
;
private
:
test
:
:
VideoFrameWriter
*
const
video_writer_
;
const
int
sampling_modulo_
;
int64_t
frames_counter_
=
0
;
}
;
std
:
:
unique_ptr
<
test
:
:
VideoFrameWriter
>
CreateVideoFrameWithIdsWriter
(
std
:
:
unique_ptr
<
test
:
:
VideoFrameWriter
>
video_writer_delegate
absl
:
:
string_view
frame_ids_dump_file_name
)
;
}
}
#
endif
