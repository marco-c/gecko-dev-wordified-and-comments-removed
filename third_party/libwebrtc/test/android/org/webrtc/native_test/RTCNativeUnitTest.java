package
org
.
webrtc
.
native_test
;
import
android
.
app
.
Activity
;
import
android
.
util
.
Log
;
import
org
.
chromium
.
build
.
NativeLibraries
;
import
org
.
webrtc
.
native_test
.
NativeTestWebrtc
;
import
org
.
webrtc
.
ContextUtils
;
public
class
RTCNativeUnitTest
extends
NativeTestWebrtc
{
private
static
final
String
TAG
=
"
RTCNativeUnitTest
"
;
private
static
final
String
LIBRARY_UNDER_TEST_NAME
=
"
org
.
chromium
.
native_test
.
NativeTestInstrumentationTestRunner
.
LibraryUnderTest
"
;
Override
public
void
preCreate
(
Activity
activity
)
{
super
.
preCreate
(
activity
)
;
String
libraryToLoad
=
activity
.
getIntent
(
)
.
getStringExtra
(
LIBRARY_UNDER_TEST_NAME
)
;
loadLibraries
(
libraryToLoad
!
=
null
?
new
String
[
]
{
libraryToLoad
}
:
NativeLibraries
.
LIBRARIES
)
;
ContextUtils
.
initialize
(
activity
.
getApplicationContext
(
)
)
;
}
private
void
loadLibraries
(
String
[
]
librariesToLoad
)
{
for
(
String
library
:
librariesToLoad
)
{
Log
.
i
(
TAG
"
loading
:
"
+
library
)
;
System
.
loadLibrary
(
library
)
;
Log
.
i
(
TAG
"
loaded
:
"
+
library
)
;
}
}
}
