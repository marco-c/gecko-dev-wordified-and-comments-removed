#
ifndef
TEST_TESTSUPPORT_VIDEO_FRAME_WRITER_H_
#
define
TEST_TESTSUPPORT_VIDEO_FRAME_WRITER_H_
#
include
<
memory
>
#
include
<
string
>
#
include
"
api
/
video
/
video_frame
.
h
"
#
include
"
rtc_base
/
buffer
.
h
"
#
include
"
test
/
testsupport
/
frame_writer
.
h
"
namespace
webrtc
{
namespace
test
{
class
VideoFrameWriter
{
public
:
virtual
~
VideoFrameWriter
(
)
=
default
;
virtual
bool
WriteFrame
(
const
webrtc
:
:
VideoFrame
&
frame
)
=
0
;
virtual
void
Close
(
)
=
0
;
}
;
class
Y4mVideoFrameWriterImpl
:
public
VideoFrameWriter
{
public
:
Y4mVideoFrameWriterImpl
(
std
:
:
string
output_file_name
int
width
int
height
int
fps
)
;
~
Y4mVideoFrameWriterImpl
(
)
override
=
default
;
bool
WriteFrame
(
const
webrtc
:
:
VideoFrame
&
frame
)
override
;
void
Close
(
)
override
;
private
:
const
int
width_
;
const
int
height_
;
std
:
:
unique_ptr
<
FrameWriter
>
frame_writer_
;
}
;
class
YuvVideoFrameWriterImpl
:
public
VideoFrameWriter
{
public
:
YuvVideoFrameWriterImpl
(
std
:
:
string
output_file_name
int
width
int
height
)
;
~
YuvVideoFrameWriterImpl
(
)
override
=
default
;
bool
WriteFrame
(
const
webrtc
:
:
VideoFrame
&
frame
)
override
;
void
Close
(
)
override
;
private
:
const
int
width_
;
const
int
height_
;
std
:
:
unique_ptr
<
FrameWriter
>
frame_writer_
;
}
;
}
}
#
endif
