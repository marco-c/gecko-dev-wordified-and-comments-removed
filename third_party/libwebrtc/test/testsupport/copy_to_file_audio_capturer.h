#
ifndef
TEST_TESTSUPPORT_COPY_TO_FILE_AUDIO_CAPTURER_H_
#
define
TEST_TESTSUPPORT_COPY_TO_FILE_AUDIO_CAPTURER_H_
#
include
<
memory
>
#
include
<
string
>
#
include
"
absl
/
types
/
optional
.
h
"
#
include
"
api
/
array_view
.
h
"
#
include
"
common_audio
/
wav_file
.
h
"
#
include
"
modules
/
audio_device
/
include
/
test_audio_device
.
h
"
#
include
"
rtc_base
/
buffer
.
h
"
namespace
webrtc
{
namespace
test
{
class
CopyToFileAudioCapturer
:
public
TestAudioDeviceModule
:
:
Capturer
{
public
:
CopyToFileAudioCapturer
(
std
:
:
unique_ptr
<
TestAudioDeviceModule
:
:
Capturer
>
delegate
std
:
:
string
stream_dump_file_name
)
;
~
CopyToFileAudioCapturer
(
)
override
;
int
SamplingFrequency
(
)
const
override
;
int
NumChannels
(
)
const
override
;
bool
Capture
(
rtc
:
:
BufferT
<
int16_t
>
*
buffer
)
override
;
private
:
std
:
:
unique_ptr
<
TestAudioDeviceModule
:
:
Capturer
>
delegate_
;
std
:
:
unique_ptr
<
WavWriter
>
wav_writer_
;
}
;
}
}
#
endif
