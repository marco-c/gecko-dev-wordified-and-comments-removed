package
org
.
webrtc
;
import
static
com
.
google
.
common
.
truth
.
Truth
.
assertThat
;
import
androidx
.
test
.
runner
.
AndroidJUnit4
;
import
org
.
junit
.
Test
;
import
org
.
junit
.
runner
.
RunWith
;
import
org
.
robolectric
.
annotation
.
Config
;
import
org
.
webrtc
.
VideoEncoder
.
ScalingSettings
;
RunWith
(
AndroidJUnit4
.
class
)
Config
(
manifest
=
Config
.
NONE
)
public
class
FramerateBitrateAdjusterTest
{
Test
public
void
getAdjustedFramerate_alwaysReturnsDefault
(
)
{
FramerateBitrateAdjuster
bitrateAdjuster
=
new
FramerateBitrateAdjuster
(
)
;
bitrateAdjuster
.
setTargets
(
1000
15
)
;
assertThat
(
bitrateAdjuster
.
getAdjustedFramerateFps
(
)
)
.
isEqualTo
(
30
.
0
)
;
}
Test
public
void
getAdjustedBitrate_defaultFramerate_returnsTargetBitrate
(
)
{
FramerateBitrateAdjuster
bitrateAdjuster
=
new
FramerateBitrateAdjuster
(
)
;
bitrateAdjuster
.
setTargets
(
1000
30
)
;
assertThat
(
bitrateAdjuster
.
getAdjustedBitrateBps
(
)
)
.
isEqualTo
(
1000
)
;
}
Test
public
void
getAdjustedBitrate_nonDefaultFramerate_returnsAdjustedBitrate
(
)
{
FramerateBitrateAdjuster
bitrateAdjuster
=
new
FramerateBitrateAdjuster
(
)
;
bitrateAdjuster
.
setTargets
(
1000
7
.
5
)
;
assertThat
(
bitrateAdjuster
.
getAdjustedBitrateBps
(
)
)
.
isEqualTo
(
4000
)
;
}
}
