package
org
.
webrtc
;
import
androidx
.
annotation
.
Nullable
;
import
java
.
util
.
ArrayList
;
import
java
.
util
.
HashMap
;
import
java
.
util
.
List
;
public
class
SoftwareVideoEncoderFactory
implements
VideoEncoderFactory
{
Nullable
Override
public
VideoEncoder
createEncoder
(
VideoCodecInfo
info
)
{
if
(
info
.
name
.
equalsIgnoreCase
(
"
VP8
"
)
)
{
return
new
LibvpxVp8Encoder
(
)
;
}
if
(
info
.
name
.
equalsIgnoreCase
(
"
VP9
"
)
&
&
LibvpxVp9Encoder
.
nativeIsSupported
(
)
)
{
return
new
LibvpxVp9Encoder
(
)
;
}
if
(
info
.
name
.
equalsIgnoreCase
(
"
AV1
"
)
&
&
LibaomAv1Encoder
.
nativeIsSupported
(
)
)
{
return
new
LibaomAv1Encoder
(
)
;
}
return
null
;
}
Override
public
VideoCodecInfo
[
]
getSupportedCodecs
(
)
{
return
supportedCodecs
(
)
;
}
static
VideoCodecInfo
[
]
supportedCodecs
(
)
{
List
<
VideoCodecInfo
>
codecs
=
new
ArrayList
<
VideoCodecInfo
>
(
)
;
codecs
.
add
(
new
VideoCodecInfo
(
"
VP8
"
new
HashMap
<
>
(
)
)
)
;
if
(
LibvpxVp9Encoder
.
nativeIsSupported
(
)
)
{
codecs
.
add
(
new
VideoCodecInfo
(
"
VP9
"
new
HashMap
<
>
(
)
)
)
;
}
if
(
LibaomAv1Encoder
.
nativeIsSupported
(
)
)
{
codecs
.
add
(
new
VideoCodecInfo
(
"
AV1
"
new
HashMap
<
>
(
)
)
)
;
}
return
codecs
.
toArray
(
new
VideoCodecInfo
[
codecs
.
size
(
)
]
)
;
}
}
