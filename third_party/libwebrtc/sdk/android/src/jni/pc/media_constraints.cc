#
include
"
sdk
/
android
/
src
/
jni
/
pc
/
media_constraints
.
h
"
#
include
<
memory
>
#
include
"
sdk
/
android
/
generated_peerconnection_jni
/
MediaConstraints_jni
.
h
"
#
include
"
sdk
/
android
/
native_api
/
jni
/
java_types
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
jni_helpers
.
h
"
namespace
webrtc
{
namespace
jni
{
namespace
{
MediaConstraints
:
:
Constraints
PopulateConstraintsFromJavaPairList
(
JNIEnv
*
env
const
JavaRef
<
jobject
>
&
j_list
)
{
MediaConstraints
:
:
Constraints
constraints
;
for
(
const
JavaRef
<
jobject
>
&
entry
:
Iterable
(
env
j_list
)
)
{
constraints
.
emplace_back
(
JavaToStdString
(
env
Java_KeyValuePair_getKey
(
env
entry
)
)
JavaToStdString
(
env
Java_KeyValuePair_getValue
(
env
entry
)
)
)
;
}
return
constraints
;
}
}
std
:
:
unique_ptr
<
MediaConstraints
>
JavaToNativeMediaConstraints
(
JNIEnv
*
env
const
JavaRef
<
jobject
>
&
j_constraints
)
{
return
std
:
:
make_unique
<
MediaConstraints
>
(
PopulateConstraintsFromJavaPairList
(
env
Java_MediaConstraints_getMandatory
(
env
j_constraints
)
)
PopulateConstraintsFromJavaPairList
(
env
Java_MediaConstraints_getOptional
(
env
j_constraints
)
)
)
;
}
}
}
