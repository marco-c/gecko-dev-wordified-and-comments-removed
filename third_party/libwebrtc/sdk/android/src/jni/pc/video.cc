#
include
"
sdk
/
android
/
src
/
jni
/
pc
/
video
.
h
"
#
include
<
jni
.
h
>
#
include
<
memory
>
#
include
"
api
/
video_codecs
/
video_decoder_factory
.
h
"
#
include
"
api
/
video_codecs
/
video_encoder_factory
.
h
"
#
include
"
rtc_base
/
logging
.
h
"
#
include
"
sdk
/
android
/
native_api
/
jni
/
java_types
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
android_video_track_source
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
video_decoder_factory_wrapper
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
video_encoder_factory_wrapper
.
h
"
namespace
webrtc
{
namespace
jni
{
VideoEncoderFactory
*
CreateVideoEncoderFactory
(
JNIEnv
*
jni
const
JavaRef
<
jobject
>
&
j_encoder_factory
)
{
return
IsNull
(
jni
j_encoder_factory
)
?
nullptr
:
new
VideoEncoderFactoryWrapper
(
jni
j_encoder_factory
)
;
}
VideoDecoderFactory
*
CreateVideoDecoderFactory
(
JNIEnv
*
jni
const
JavaRef
<
jobject
>
&
j_decoder_factory
)
{
return
IsNull
(
jni
j_decoder_factory
)
?
nullptr
:
new
VideoDecoderFactoryWrapper
(
jni
j_decoder_factory
)
;
}
void
*
CreateVideoSource
(
JNIEnv
*
env
rtc
:
:
Thread
*
signaling_thread
rtc
:
:
Thread
*
worker_thread
jboolean
is_screencast
jboolean
align_timestamps
)
{
auto
source
=
rtc
:
:
make_ref_counted
<
AndroidVideoTrackSource
>
(
signaling_thread
env
is_screencast
align_timestamps
)
;
return
source
.
release
(
)
;
}
}
}
