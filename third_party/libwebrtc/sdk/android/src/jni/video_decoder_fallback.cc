#
include
<
jni
.
h
>
#
include
"
api
/
video_codecs
/
video_decoder_software_fallback_wrapper
.
h
"
#
include
"
sdk
/
android
/
generated_video_jni
/
VideoDecoderFallback_jni
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
jni_helpers
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
video_decoder_wrapper
.
h
"
namespace
webrtc
{
namespace
jni
{
static
jlong
JNI_VideoDecoderFallback_CreateDecoder
(
JNIEnv
*
jni
const
JavaParamRef
<
jobject
>
&
j_fallback_decoder
const
JavaParamRef
<
jobject
>
&
j_primary_decoder
)
{
std
:
:
unique_ptr
<
VideoDecoder
>
fallback_decoder
=
JavaToNativeVideoDecoder
(
jni
j_fallback_decoder
)
;
std
:
:
unique_ptr
<
VideoDecoder
>
primary_decoder
=
JavaToNativeVideoDecoder
(
jni
j_primary_decoder
)
;
VideoDecoder
*
nativeWrapper
=
CreateVideoDecoderSoftwareFallbackWrapper
(
std
:
:
move
(
fallback_decoder
)
std
:
:
move
(
primary_decoder
)
)
.
release
(
)
;
return
jlongFromPointer
(
nativeWrapper
)
;
}
}
}
