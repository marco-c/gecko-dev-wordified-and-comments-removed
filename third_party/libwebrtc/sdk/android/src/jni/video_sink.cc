#
include
"
sdk
/
android
/
src
/
jni
/
video_sink
.
h
"
#
include
"
sdk
/
android
/
generated_video_jni
/
VideoSink_jni
.
h
"
#
include
"
sdk
/
android
/
src
/
jni
/
video_frame
.
h
"
namespace
webrtc
{
namespace
jni
{
VideoSinkWrapper
:
:
VideoSinkWrapper
(
JNIEnv
*
jni
const
JavaRef
<
jobject
>
&
j_sink
)
:
j_sink_
(
jni
j_sink
)
{
}
VideoSinkWrapper
:
:
~
VideoSinkWrapper
(
)
{
}
void
VideoSinkWrapper
:
:
OnFrame
(
const
VideoFrame
&
frame
)
{
JNIEnv
*
jni
=
AttachCurrentThreadIfNeeded
(
)
;
ScopedJavaLocalRef
<
jobject
>
j_frame
=
NativeToJavaVideoFrame
(
jni
frame
)
;
Java_VideoSink_onFrame
(
jni
j_sink_
j_frame
)
;
ReleaseJavaVideoFrame
(
jni
j_frame
)
;
}
}
}
