#
import
"
RTCPeerConnectionFactory
+
Native
.
h
"
#
import
"
RTCPeerConnectionFactoryBuilder
+
DefaultComponents
.
h
"
#
include
"
api
/
audio_codecs
/
builtin_audio_decoder_factory
.
h
"
#
include
"
api
/
audio_codecs
/
builtin_audio_encoder_factory
.
h
"
#
import
"
components
/
video_codec
/
RTCVideoDecoderFactoryH264
.
h
"
#
import
"
components
/
video_codec
/
RTCVideoEncoderFactoryH264
.
h
"
#
include
"
sdk
/
objc
/
native
/
api
/
video_decoder_factory
.
h
"
#
include
"
sdk
/
objc
/
native
/
api
/
video_encoder_factory
.
h
"
#
if
defined
(
WEBRTC_IOS
)
#
import
"
sdk
/
objc
/
native
/
api
/
audio_device_module
.
h
"
#
endif
implementation
RTCPeerConnectionFactoryBuilder
(
DefaultComponents
)
+
(
RTCPeerConnectionFactoryBuilder
*
)
defaultBuilder
{
RTCPeerConnectionFactoryBuilder
*
builder
=
[
[
RTCPeerConnectionFactoryBuilder
alloc
]
init
]
;
auto
audioEncoderFactory
=
webrtc
:
:
CreateBuiltinAudioEncoderFactory
(
)
;
[
builder
setAudioEncoderFactory
:
audioEncoderFactory
]
;
auto
audioDecoderFactory
=
webrtc
:
:
CreateBuiltinAudioDecoderFactory
(
)
;
[
builder
setAudioDecoderFactory
:
audioDecoderFactory
]
;
auto
videoEncoderFactory
=
webrtc
:
:
ObjCToNativeVideoEncoderFactory
(
[
[
RTC_OBJC_TYPE
(
RTCVideoEncoderFactoryH264
)
alloc
]
init
]
)
;
[
builder
setVideoEncoderFactory
:
std
:
:
move
(
videoEncoderFactory
)
]
;
auto
videoDecoderFactory
=
webrtc
:
:
ObjCToNativeVideoDecoderFactory
(
[
[
RTC_OBJC_TYPE
(
RTCVideoDecoderFactoryH264
)
alloc
]
init
]
)
;
[
builder
setVideoDecoderFactory
:
std
:
:
move
(
videoDecoderFactory
)
]
;
#
if
defined
(
WEBRTC_IOS
)
[
builder
setAudioDeviceModule
:
webrtc
:
:
CreateAudioDeviceModule
(
)
]
;
#
endif
return
builder
;
}
end
