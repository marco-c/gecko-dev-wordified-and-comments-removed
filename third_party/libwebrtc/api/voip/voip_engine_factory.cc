#
include
"
api
/
voip
/
voip_engine_factory
.
h
"
#
include
<
memory
>
#
include
<
utility
>
#
include
"
api
/
environment
/
environment_factory
.
h
"
#
include
"
api
/
voip
/
voip_engine
.
h
"
#
include
"
audio
/
voip
/
voip_core
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
rtc_base
/
logging
.
h
"
namespace
webrtc
{
std
:
:
unique_ptr
<
VoipEngine
>
CreateVoipEngine
(
VoipEngineConfig
config
)
{
RTC_CHECK
(
config
.
encoder_factory
)
;
RTC_CHECK
(
config
.
decoder_factory
)
;
RTC_CHECK
(
config
.
task_queue_factory
)
;
RTC_CHECK
(
config
.
audio_device_module
)
;
if
(
!
config
.
audio_processing
)
{
RTC_DLOG
(
LS_INFO
)
<
<
"
No
audio
processing
functionality
provided
.
"
;
}
return
std
:
:
make_unique
<
VoipCore
>
(
CreateEnvironment
(
std
:
:
move
(
config
.
task_queue_factory
)
)
std
:
:
move
(
config
.
encoder_factory
)
std
:
:
move
(
config
.
decoder_factory
)
std
:
:
move
(
config
.
audio_device_module
)
std
:
:
move
(
config
.
audio_processing
)
)
;
}
}
