#
ifndef
API_ICE_TRANSPORT_INTERFACE_H_
#
define
API_ICE_TRANSPORT_INTERFACE_H_
#
include
<
string
>
#
include
"
api
/
async_dns_resolver
.
h
"
#
include
"
api
/
environment
/
environment
.
h
"
#
include
"
api
/
local_network_access_permission
.
h
"
#
include
"
api
/
ref_count
.
h
"
#
include
"
api
/
rtc_event_log
/
rtc_event_log
.
h
"
#
include
"
api
/
scoped_refptr
.
h
"
namespace
webrtc
{
class
ActiveIceControllerFactoryInterface
;
class
FieldTrialsView
;
class
IceControllerFactoryInterface
;
class
IceTransportInternal
;
class
PortAllocator
;
class
IceTransportInterface
:
public
RefCountInterface
{
public
:
virtual
IceTransportInternal
*
internal
(
)
=
0
;
}
;
class
IceTransportInit
final
{
public
:
explicit
IceTransportInit
(
const
Environment
&
env
)
:
env_
(
env
)
{
}
IceTransportInit
(
const
IceTransportInit
&
)
=
delete
;
IceTransportInit
(
IceTransportInit
&
&
)
=
default
;
IceTransportInit
&
operator
=
(
const
IceTransportInit
&
)
=
delete
;
IceTransportInit
&
operator
=
(
IceTransportInit
&
&
)
=
default
;
PortAllocator
*
port_allocator
(
)
{
return
port_allocator_
;
}
void
set_port_allocator
(
PortAllocator
*
port_allocator
)
{
port_allocator_
=
port_allocator
;
}
AsyncDnsResolverFactoryInterface
*
async_dns_resolver_factory
(
)
{
return
async_dns_resolver_factory_
;
}
void
set_async_dns_resolver_factory
(
AsyncDnsResolverFactoryInterface
*
async_dns_resolver_factory
)
{
async_dns_resolver_factory_
=
async_dns_resolver_factory
;
}
LocalNetworkAccessPermissionFactoryInterface
*
lna_permission_factory
(
)
{
return
lna_permission_factory_
;
}
void
set_lna_permission_factory
(
LocalNetworkAccessPermissionFactoryInterface
*
lna_permission_factory
)
{
lna_permission_factory_
=
lna_permission_factory
;
}
RtcEventLog
*
event_log
(
)
{
return
&
env_
.
event_log
(
)
;
}
void
set_ice_controller_factory
(
IceControllerFactoryInterface
*
ice_controller_factory
)
{
ice_controller_factory_
=
ice_controller_factory
;
}
IceControllerFactoryInterface
*
ice_controller_factory
(
)
{
return
ice_controller_factory_
;
}
void
set_active_ice_controller_factory
(
ActiveIceControllerFactoryInterface
*
active_ice_controller_factory
)
{
active_ice_controller_factory_
=
active_ice_controller_factory
;
}
ActiveIceControllerFactoryInterface
*
active_ice_controller_factory
(
)
{
return
active_ice_controller_factory_
;
}
const
FieldTrialsView
*
field_trials
(
)
{
return
&
env_
.
field_trials
(
)
;
}
const
Environment
&
env
(
)
{
return
env_
;
}
private
:
Environment
env_
;
PortAllocator
*
port_allocator_
=
nullptr
;
AsyncDnsResolverFactoryInterface
*
async_dns_resolver_factory_
=
nullptr
;
LocalNetworkAccessPermissionFactoryInterface
*
lna_permission_factory_
=
nullptr
;
IceControllerFactoryInterface
*
ice_controller_factory_
=
nullptr
;
ActiveIceControllerFactoryInterface
*
active_ice_controller_factory_
=
nullptr
;
}
;
class
IceTransportFactory
{
public
:
virtual
~
IceTransportFactory
(
)
=
default
;
virtual
scoped_refptr
<
IceTransportInterface
>
CreateIceTransport
(
const
std
:
:
string
&
transport_name
int
component
IceTransportInit
init
)
=
0
;
}
;
}
#
endif
