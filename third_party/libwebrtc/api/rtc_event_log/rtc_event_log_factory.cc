#
include
"
api
/
rtc_event_log
/
rtc_event_log_factory
.
h
"
#
include
<
memory
>
#
include
"
absl
/
base
/
nullability
.
h
"
#
include
"
api
/
environment
/
environment
.
h
"
#
include
"
api
/
field_trials_view
.
h
"
#
include
"
api
/
rtc_event_log
/
rtc_event_log
.
h
"
#
ifdef
WEBRTC_ENABLE_RTC_EVENT_LOG
#
include
"
logging
/
rtc_event_log
/
rtc_event_log_impl
.
h
"
#
endif
namespace
webrtc
{
absl_nonnull
std
:
:
unique_ptr
<
RtcEventLog
>
RtcEventLogFactory
:
:
Create
(
const
Environment
&
env
)
const
{
#
ifndef
WEBRTC_ENABLE_RTC_EVENT_LOG
return
std
:
:
make_unique
<
RtcEventLogNull
>
(
)
;
#
else
if
(
env
.
field_trials
(
)
.
IsEnabled
(
"
WebRTC
-
RtcEventLogKillSwitch
"
)
)
{
return
std
:
:
make_unique
<
RtcEventLogNull
>
(
)
;
}
return
std
:
:
make_unique
<
RtcEventLogImpl
>
(
env
)
;
#
endif
}
}
