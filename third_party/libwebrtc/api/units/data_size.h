#
ifndef
API_UNITS_DATA_SIZE_H_
#
define
API_UNITS_DATA_SIZE_H_
#
ifdef
UNIT_TEST
#
include
<
ostream
>
#
endif
#
include
<
string
>
#
include
<
type_traits
>
#
include
"
rtc_base
/
units
/
unit_base
.
h
"
namespace
webrtc
{
class
DataSize
final
:
public
rtc_units_impl
:
:
RelativeUnit
<
DataSize
>
{
public
:
template
<
typename
T
>
static
constexpr
DataSize
Bytes
(
T
value
)
{
static_assert
(
std
:
:
is_arithmetic
<
T
>
:
:
value
"
"
)
;
return
FromValue
(
value
)
;
}
static
constexpr
DataSize
Infinity
(
)
{
return
PlusInfinity
(
)
;
}
DataSize
(
)
=
delete
;
template
<
typename
T
=
int64_t
>
constexpr
T
bytes
(
)
const
{
return
ToValue
<
T
>
(
)
;
}
constexpr
int64_t
bytes_or
(
int64_t
fallback_value
)
const
{
return
ToValueOr
(
fallback_value
)
;
}
private
:
friend
class
rtc_units_impl
:
:
UnitBase
<
DataSize
>
;
using
RelativeUnit
:
:
RelativeUnit
;
static
constexpr
bool
one_sided
=
true
;
}
;
std
:
:
string
ToString
(
DataSize
value
)
;
inline
std
:
:
string
ToLogString
(
DataSize
value
)
{
return
ToString
(
value
)
;
}
#
ifdef
UNIT_TEST
inline
std
:
:
ostream
&
operator
<
<
(
std
:
:
ostream
&
stream
DataSize
value
)
{
return
stream
<
<
ToString
(
value
)
;
}
#
endif
}
#
endif
