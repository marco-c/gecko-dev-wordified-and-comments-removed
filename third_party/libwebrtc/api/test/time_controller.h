#
ifndef
API_TEST_TIME_CONTROLLER_H_
#
define
API_TEST_TIME_CONTROLLER_H_
#
include
<
functional
>
#
include
<
memory
>
#
include
<
string
>
#
include
"
api
/
task_queue
/
task_queue_factory
.
h
"
#
include
"
api
/
units
/
time_delta
.
h
"
#
include
"
api
/
units
/
timestamp
.
h
"
#
include
"
rtc_base
/
socket_server
.
h
"
#
include
"
rtc_base
/
thread
.
h
"
#
include
"
system_wrappers
/
include
/
clock
.
h
"
namespace
webrtc
{
class
TimeController
{
public
:
virtual
~
TimeController
(
)
=
default
;
virtual
Clock
*
GetClock
(
)
=
0
;
virtual
TaskQueueFactory
*
GetTaskQueueFactory
(
)
=
0
;
std
:
:
unique_ptr
<
TaskQueueFactory
>
CreateTaskQueueFactory
(
)
;
virtual
std
:
:
unique_ptr
<
Thread
>
CreateThread
(
const
std
:
:
string
&
name
std
:
:
unique_ptr
<
SocketServer
>
socket_server
=
nullptr
)
=
0
;
virtual
Thread
*
GetMainThread
(
)
=
0
;
virtual
void
AdvanceTime
(
TimeDelta
duration
)
=
0
;
bool
Wait
(
const
std
:
:
function
<
bool
(
)
>
&
condition
TimeDelta
max_duration
=
TimeDelta
:
:
Seconds
(
5
)
)
;
}
;
}
#
endif
