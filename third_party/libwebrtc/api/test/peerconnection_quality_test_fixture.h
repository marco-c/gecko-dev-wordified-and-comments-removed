#
ifndef
API_TEST_PEERCONNECTION_QUALITY_TEST_FIXTURE_H_
#
define
API_TEST_PEERCONNECTION_QUALITY_TEST_FIXTURE_H_
#
include
<
stddef
.
h
>
#
include
<
functional
>
#
include
<
memory
>
#
include
"
absl
/
strings
/
string_view
.
h
"
#
include
"
api
/
test
/
pclf
/
media_quality_test_params
.
h
"
#
include
"
api
/
test
/
pclf
/
peer_configurer
.
h
"
#
include
"
api
/
test
/
stats_observer_interface
.
h
"
#
include
"
api
/
test
/
track_id_stream_info_map
.
h
"
#
include
"
api
/
units
/
time_delta
.
h
"
namespace
webrtc
{
namespace
webrtc_pc_e2e
{
class
PeerConnectionE2EQualityTestFixture
{
public
:
class
QualityMetricsReporter
:
public
StatsObserverInterface
{
public
:
virtual
~
QualityMetricsReporter
(
)
=
default
;
virtual
void
Start
(
absl
:
:
string_view
test_case_name
const
TrackIdStreamInfoMap
*
reporter_helper
)
=
0
;
virtual
void
StopAndReportResults
(
)
=
0
;
}
;
class
PeerHandle
{
public
:
virtual
~
PeerHandle
(
)
=
default
;
}
;
virtual
~
PeerConnectionE2EQualityTestFixture
(
)
=
default
;
virtual
void
ExecuteAt
(
TimeDelta
target_time_since_start
std
:
:
function
<
void
(
TimeDelta
)
>
func
)
=
0
;
virtual
void
ExecuteEvery
(
TimeDelta
initial_delay_since_start
TimeDelta
interval
std
:
:
function
<
void
(
TimeDelta
)
>
func
)
=
0
;
virtual
void
AddQualityMetricsReporter
(
std
:
:
unique_ptr
<
QualityMetricsReporter
>
quality_metrics_reporter
)
=
0
;
virtual
PeerHandle
*
AddPeer
(
std
:
:
unique_ptr
<
PeerConfigurer
>
configurer
)
=
0
;
virtual
void
Run
(
RunParams
run_params
)
=
0
;
virtual
TimeDelta
GetRealTestDuration
(
)
const
=
0
;
}
;
}
}
#
endif
