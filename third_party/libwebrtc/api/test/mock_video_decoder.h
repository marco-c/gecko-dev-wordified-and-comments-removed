#
ifndef
API_TEST_MOCK_VIDEO_DECODER_H_
#
define
API_TEST_MOCK_VIDEO_DECODER_H_
#
include
"
api
/
video_codecs
/
video_decoder
.
h
"
#
include
"
test
/
gmock
.
h
"
namespace
webrtc
{
class
MockDecodedImageCallback
:
public
DecodedImageCallback
{
public
:
MOCK_METHOD
(
int32_t
Decoded
(
VideoFrame
&
decoded_image
)
(
override
)
)
;
MOCK_METHOD
(
int32_t
Decoded
(
VideoFrame
&
decoded_image
int64_t
decode_time_ms
)
(
override
)
)
;
MOCK_METHOD
(
void
Decoded
(
VideoFrame
&
decoded_image
absl
:
:
optional
<
int32_t
>
decode_time_ms
absl
:
:
optional
<
uint8_t
>
qp
)
(
override
)
)
;
}
;
class
MockVideoDecoder
:
public
VideoDecoder
{
public
:
MOCK_METHOD
(
bool
Configure
(
const
Settings
&
settings
)
(
override
)
)
;
MOCK_METHOD
(
int32_t
InitDecode
(
const
VideoCodec
*
codec_settings
int32_t
number_of_cores
)
(
override
)
)
;
MOCK_METHOD
(
int32_t
Decode
(
const
EncodedImage
&
input_image
bool
missing_frames
int64_t
render_time_ms
)
(
override
)
)
;
MOCK_METHOD
(
int32_t
RegisterDecodeCompleteCallback
(
DecodedImageCallback
*
callback
)
(
override
)
)
;
MOCK_METHOD
(
int32_t
Release
(
)
(
override
)
)
;
}
;
}
#
endif
