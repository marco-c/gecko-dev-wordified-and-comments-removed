#
ifndef
API_SCTP_TRANSPORT_INTERFACE_H_
#
define
API_SCTP_TRANSPORT_INTERFACE_H_
#
include
<
optional
>
#
include
"
api
/
dtls_transport_interface
.
h
"
#
include
"
api
/
ref_count
.
h
"
#
include
"
api
/
scoped_refptr
.
h
"
#
include
"
rtc_base
/
system
/
rtc_export
.
h
"
namespace
webrtc
{
enum
class
SctpTransportState
{
kNew
kConnecting
kConnected
kClosed
kNumValues
}
;
class
RTC_EXPORT
SctpTransportInformation
{
public
:
SctpTransportInformation
(
)
=
default
;
SctpTransportInformation
(
const
SctpTransportInformation
&
)
=
default
;
explicit
SctpTransportInformation
(
SctpTransportState
state
)
;
SctpTransportInformation
(
SctpTransportState
state
scoped_refptr
<
DtlsTransportInterface
>
dtls_transport
std
:
:
optional
<
double
>
max_message_size
std
:
:
optional
<
int
>
max_channels
)
;
~
SctpTransportInformation
(
)
;
scoped_refptr
<
DtlsTransportInterface
>
dtls_transport
(
)
const
{
return
dtls_transport_
;
}
SctpTransportState
state
(
)
const
{
return
state_
;
}
std
:
:
optional
<
double
>
MaxMessageSize
(
)
const
{
return
max_message_size_
;
}
std
:
:
optional
<
int
>
MaxChannels
(
)
const
{
return
max_channels_
;
}
private
:
SctpTransportState
state_
=
SctpTransportState
:
:
kNew
;
scoped_refptr
<
DtlsTransportInterface
>
dtls_transport_
;
std
:
:
optional
<
double
>
max_message_size_
;
std
:
:
optional
<
int
>
max_channels_
;
}
;
class
SctpTransportObserverInterface
{
public
:
virtual
void
OnStateChange
(
SctpTransportInformation
info
)
=
0
;
protected
:
virtual
~
SctpTransportObserverInterface
(
)
=
default
;
}
;
class
SctpTransportInterface
:
public
webrtc
:
:
RefCountInterface
{
public
:
virtual
scoped_refptr
<
DtlsTransportInterface
>
dtls_transport
(
)
const
=
0
;
virtual
SctpTransportInformation
Information
(
)
const
=
0
;
virtual
void
RegisterObserver
(
SctpTransportObserverInterface
*
observer
)
=
0
;
virtual
void
UnregisterObserver
(
)
=
0
;
}
;
constexpr
int
kSctpSendBufferSize
=
256
*
1024
;
struct
SctpOptions
{
int
local_port
=
-
1
;
int
remote_port
=
-
1
;
int
max_message_size
=
kSctpSendBufferSize
;
}
;
}
#
endif
