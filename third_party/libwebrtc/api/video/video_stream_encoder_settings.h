#
ifndef
API_VIDEO_VIDEO_STREAM_ENCODER_SETTINGS_H_
#
define
API_VIDEO_VIDEO_STREAM_ENCODER_SETTINGS_H_
#
include
<
string
>
#
include
"
api
/
video
/
video_bitrate_allocator_factory
.
h
"
#
include
"
api
/
video_codecs
/
video_encoder
.
h
"
#
include
"
api
/
video_codecs
/
video_encoder_factory
.
h
"
namespace
webrtc
{
class
EncoderSwitchRequestCallback
{
public
:
virtual
~
EncoderSwitchRequestCallback
(
)
{
}
struct
Config
{
std
:
:
string
codec_name
;
absl
:
:
optional
<
std
:
:
string
>
param
;
absl
:
:
optional
<
std
:
:
string
>
value
;
}
;
virtual
void
RequestEncoderFallback
(
)
=
0
;
virtual
void
RequestEncoderSwitch
(
const
Config
&
conf
)
=
0
;
virtual
void
RequestEncoderSwitch
(
const
SdpVideoFormat
&
format
)
=
0
;
}
;
struct
VideoStreamEncoderSettings
{
enum
class
BitrateAllocationCallbackType
{
kVideoBitrateAllocation
kVideoBitrateAllocationWhenScreenSharing
kVideoLayersAllocation
}
;
explicit
VideoStreamEncoderSettings
(
const
VideoEncoder
:
:
Capabilities
&
capabilities
)
:
capabilities
(
capabilities
)
{
}
bool
experiment_cpu_load_estimator
=
false
;
VideoEncoderFactory
*
encoder_factory
=
nullptr
;
EncoderSwitchRequestCallback
*
encoder_switch_request_callback
=
nullptr
;
VideoBitrateAllocatorFactory
*
bitrate_allocator_factory
=
nullptr
;
VideoEncoder
:
:
Capabilities
capabilities
;
BitrateAllocationCallbackType
allocation_cb_type
=
BitrateAllocationCallbackType
:
:
kVideoBitrateAllocationWhenScreenSharing
;
}
;
}
#
endif
