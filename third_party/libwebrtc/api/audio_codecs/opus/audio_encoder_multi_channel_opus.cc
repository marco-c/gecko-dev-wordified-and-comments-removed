#
include
"
api
/
audio_codecs
/
opus
/
audio_encoder_multi_channel_opus
.
h
"
#
include
<
memory
>
#
include
<
optional
>
#
include
<
utility
>
#
include
<
vector
>
#
include
"
api
/
audio_codecs
/
audio_codec_pair_id
.
h
"
#
include
"
api
/
audio_codecs
/
audio_encoder
.
h
"
#
include
"
api
/
audio_codecs
/
audio_format
.
h
"
#
include
"
api
/
audio_codecs
/
opus
/
audio_encoder_multi_channel_opus_config
.
h
"
#
include
"
api
/
field_trials_view
.
h
"
#
include
"
modules
/
audio_coding
/
codecs
/
opus
/
audio_encoder_multi_channel_opus_impl
.
h
"
namespace
webrtc
{
std
:
:
optional
<
AudioEncoderMultiChannelOpusConfig
>
AudioEncoderMultiChannelOpus
:
:
SdpToConfig
(
const
SdpAudioFormat
&
format
)
{
return
AudioEncoderMultiChannelOpusImpl
:
:
SdpToConfig
(
format
)
;
}
void
AudioEncoderMultiChannelOpus
:
:
AppendSupportedEncoders
(
std
:
:
vector
<
AudioCodecSpec
>
*
specs
)
{
{
AudioCodecInfo
surround_5_1_opus_info
{
48000
6
128000
}
;
surround_5_1_opus_info
.
allow_comfort_noise
=
false
;
surround_5_1_opus_info
.
supports_network_adaption
=
false
;
SdpAudioFormat
opus_format
(
{
"
multiopus
"
48000
6
{
{
"
minptime
"
"
10
"
}
{
"
useinbandfec
"
"
1
"
}
{
"
channel_mapping
"
"
0
4
1
2
3
5
"
}
{
"
num_streams
"
"
4
"
}
{
"
coupled_streams
"
"
2
"
}
}
}
)
;
specs
-
>
push_back
(
{
std
:
:
move
(
opus_format
)
surround_5_1_opus_info
}
)
;
}
{
AudioCodecInfo
surround_7_1_opus_info
{
48000
8
200000
}
;
surround_7_1_opus_info
.
allow_comfort_noise
=
false
;
surround_7_1_opus_info
.
supports_network_adaption
=
false
;
SdpAudioFormat
opus_format
(
{
"
multiopus
"
48000
8
{
{
"
minptime
"
"
10
"
}
{
"
useinbandfec
"
"
1
"
}
{
"
channel_mapping
"
"
0
6
1
2
3
4
5
7
"
}
{
"
num_streams
"
"
5
"
}
{
"
coupled_streams
"
"
3
"
}
}
}
)
;
specs
-
>
push_back
(
{
std
:
:
move
(
opus_format
)
surround_7_1_opus_info
}
)
;
}
}
AudioCodecInfo
AudioEncoderMultiChannelOpus
:
:
QueryAudioEncoder
(
const
AudioEncoderMultiChannelOpusConfig
&
config
)
{
return
AudioEncoderMultiChannelOpusImpl
:
:
QueryAudioEncoder
(
config
)
;
}
std
:
:
unique_ptr
<
AudioEncoder
>
AudioEncoderMultiChannelOpus
:
:
MakeAudioEncoder
(
const
AudioEncoderMultiChannelOpusConfig
&
config
int
payload_type
std
:
:
optional
<
AudioCodecPairId
>
const
FieldTrialsView
*
)
{
return
AudioEncoderMultiChannelOpusImpl
:
:
MakeAudioEncoder
(
config
payload_type
)
;
}
}
