#
include
"
api
/
audio
/
builtin_audio_processing_factory
.
h
"
#
include
"
api
/
audio
/
audio_processing
.
h
"
#
include
"
api
/
environment
/
environment
.
h
"
#
include
"
api
/
environment
/
environment_factory
.
h
"
#
include
"
api
/
scoped_refptr
.
h
"
#
include
"
test
/
gmock
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
using
:
:
testing
:
:
NotNull
;
TEST
(
BuiltinAudioProcessingFactoryTest
CreatesWithDefaults
)
{
EXPECT_THAT
(
BuiltinAudioProcessingFactory
(
)
.
Create
(
CreateEnvironment
(
)
)
NotNull
(
)
)
;
}
TEST
(
BuiltinAudioProcessingFactoryTest
CreatesWithConfig
)
{
const
Environment
env
=
CreateEnvironment
(
)
;
AudioProcessing
:
:
Config
config
;
config
.
gain_controller1
.
enabled
=
!
config
.
gain_controller1
.
enabled
;
scoped_refptr
<
AudioProcessing
>
ap1
=
BuiltinAudioProcessingFactory
(
config
)
.
Create
(
env
)
;
ASSERT_THAT
(
ap1
NotNull
(
)
)
;
EXPECT_EQ
(
ap1
-
>
GetConfig
(
)
.
gain_controller1
.
enabled
config
.
gain_controller1
.
enabled
)
;
scoped_refptr
<
AudioProcessing
>
ap2
=
BuiltinAudioProcessingFactory
(
)
.
SetConfig
(
config
)
.
Create
(
env
)
;
ASSERT_THAT
(
ap2
NotNull
(
)
)
;
EXPECT_EQ
(
ap2
-
>
GetConfig
(
)
.
gain_controller1
.
enabled
config
.
gain_controller1
.
enabled
)
;
}
}
