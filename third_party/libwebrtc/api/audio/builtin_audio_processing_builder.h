#
ifndef
API_AUDIO_BUILTIN_AUDIO_PROCESSING_BUILDER_H_
#
define
API_AUDIO_BUILTIN_AUDIO_PROCESSING_BUILDER_H_
#
include
<
memory
>
#
include
<
utility
>
#
include
"
absl
/
base
/
nullability
.
h
"
#
include
"
api
/
audio
/
audio_processing
.
h
"
#
include
"
api
/
audio
/
echo_control
.
h
"
#
include
"
api
/
environment
/
environment
.
h
"
#
include
"
api
/
scoped_refptr
.
h
"
#
include
"
rtc_base
/
system
/
rtc_export
.
h
"
namespace
webrtc
{
class
RTC_EXPORT
BuiltinAudioProcessingBuilder
:
public
AudioProcessingBuilderInterface
{
public
:
BuiltinAudioProcessingBuilder
(
)
=
default
;
explicit
BuiltinAudioProcessingBuilder
(
const
AudioProcessing
:
:
Config
&
config
)
:
config_
(
config
)
{
}
BuiltinAudioProcessingBuilder
(
const
BuiltinAudioProcessingBuilder
&
)
=
delete
;
BuiltinAudioProcessingBuilder
&
operator
=
(
const
BuiltinAudioProcessingBuilder
&
)
=
delete
;
~
BuiltinAudioProcessingBuilder
(
)
override
=
default
;
BuiltinAudioProcessingBuilder
&
SetConfig
(
const
AudioProcessing
:
:
Config
&
config
)
{
config_
=
config
;
return
*
this
;
}
BuiltinAudioProcessingBuilder
&
SetEchoControlFactory
(
std
:
:
unique_ptr
<
EchoControlFactory
>
echo_control_factory
)
{
echo_control_factory_
=
std
:
:
move
(
echo_control_factory
)
;
return
*
this
;
}
BuiltinAudioProcessingBuilder
&
SetCapturePostProcessing
(
std
:
:
unique_ptr
<
CustomProcessing
>
capture_post_processing
)
{
capture_post_processing_
=
std
:
:
move
(
capture_post_processing
)
;
return
*
this
;
}
BuiltinAudioProcessingBuilder
&
SetRenderPreProcessing
(
std
:
:
unique_ptr
<
CustomProcessing
>
render_pre_processing
)
{
render_pre_processing_
=
std
:
:
move
(
render_pre_processing
)
;
return
*
this
;
}
BuiltinAudioProcessingBuilder
&
SetEchoDetector
(
scoped_refptr
<
EchoDetector
>
echo_detector
)
{
echo_detector_
=
std
:
:
move
(
echo_detector
)
;
return
*
this
;
}
BuiltinAudioProcessingBuilder
&
SetCaptureAnalyzer
(
std
:
:
unique_ptr
<
CustomAudioAnalyzer
>
capture_analyzer
)
{
capture_analyzer_
=
std
:
:
move
(
capture_analyzer
)
;
return
*
this
;
}
absl_nullable
scoped_refptr
<
AudioProcessing
>
Build
(
const
Environment
&
env
)
override
;
private
:
AudioProcessing
:
:
Config
config_
;
std
:
:
unique_ptr
<
EchoControlFactory
>
echo_control_factory_
;
std
:
:
unique_ptr
<
CustomProcessing
>
capture_post_processing_
;
std
:
:
unique_ptr
<
CustomProcessing
>
render_pre_processing_
;
scoped_refptr
<
EchoDetector
>
echo_detector_
;
std
:
:
unique_ptr
<
CustomAudioAnalyzer
>
capture_analyzer_
;
}
;
}
#
endif
