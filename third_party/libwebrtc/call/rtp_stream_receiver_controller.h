#
ifndef
CALL_RTP_STREAM_RECEIVER_CONTROLLER_H_
#
define
CALL_RTP_STREAM_RECEIVER_CONTROLLER_H_
#
include
<
memory
>
#
include
"
call
/
rtp_demuxer
.
h
"
#
include
"
call
/
rtp_stream_receiver_controller_interface
.
h
"
#
include
"
rtc_base
/
deprecated
/
recursive_critical_section
.
h
"
namespace
webrtc
{
class
RtpPacketReceived
;
class
RtpStreamReceiverController
:
public
RtpStreamReceiverControllerInterface
{
public
:
RtpStreamReceiverController
(
)
;
~
RtpStreamReceiverController
(
)
override
;
std
:
:
unique_ptr
<
RtpStreamReceiverInterface
>
CreateReceiver
(
uint32_t
ssrc
RtpPacketSinkInterface
*
sink
)
override
;
bool
AddSink
(
uint32_t
ssrc
RtpPacketSinkInterface
*
sink
)
override
;
size_t
RemoveSink
(
const
RtpPacketSinkInterface
*
sink
)
override
;
bool
OnRtpPacket
(
const
RtpPacketReceived
&
packet
)
;
private
:
class
Receiver
:
public
RtpStreamReceiverInterface
{
public
:
Receiver
(
RtpStreamReceiverController
*
controller
uint32_t
ssrc
RtpPacketSinkInterface
*
sink
)
;
~
Receiver
(
)
override
;
private
:
RtpStreamReceiverController
*
const
controller_
;
RtpPacketSinkInterface
*
const
sink_
;
}
;
rtc
:
:
RecursiveCriticalSection
lock_
;
RtpDemuxer
demuxer_
RTC_GUARDED_BY
(
&
lock_
)
;
}
;
}
#
endif
