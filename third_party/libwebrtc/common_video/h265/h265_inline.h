#
ifndef
COMMON_VIDEO_H265_H265_INLINE_H_
#
define
COMMON_VIDEO_H265_H265_INLINE_H_
#
include
<
stdint
.
h
>
#
include
"
rtc_base
/
compile_assert_c
.
h
"
extern
const
int8_t
kWebRtcVideo_CountLeadingZeros32_Table
[
64
]
;
static
__inline
int
WebRtcVideo_CountLeadingZeros32_NotBuiltin
(
uint32_t
n
)
{
n
|
=
n
>
>
1
;
n
|
=
n
>
>
2
;
n
|
=
n
>
>
4
;
n
|
=
n
>
>
8
;
n
|
=
n
>
>
16
;
return
kWebRtcVideo_CountLeadingZeros32_Table
[
(
n
*
0x8c0b2891
)
>
>
26
]
;
}
static
__inline
int
WebRtcVideo_CountLeadingZeros32
(
uint32_t
n
)
{
#
ifdef
__GNUC__
RTC_COMPILE_ASSERT
(
sizeof
(
unsigned
int
)
=
=
sizeof
(
uint32_t
)
)
;
return
n
=
=
0
?
32
:
__builtin_clz
(
n
)
;
#
else
return
WebRtcVideo_CountLeadingZeros32_NotBuiltin
(
n
)
;
#
endif
}
#
endif
