#
include
"
common_video
/
h265
/
h265_vps_parser
.
h
"
#
include
"
common_video
/
h265
/
h265_common
.
h
"
#
include
"
rtc_base
/
arraysize
.
h
"
#
include
"
rtc_base
/
bit_buffer
.
h
"
#
include
"
rtc_base
/
buffer
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
class
H265VpsParserTest
:
public
:
:
testing
:
:
Test
{
public
:
H265VpsParserTest
(
)
{
}
~
H265VpsParserTest
(
)
override
{
}
absl
:
:
optional
<
H265VpsParser
:
:
VpsState
>
vps_
;
}
;
TEST_F
(
H265VpsParserTest
TestSampleVPSId
)
{
const
uint8_t
buffer
[
]
=
{
0x1c
0x01
0xff
0xff
0x04
0x08
0x00
0x00
0x03
0x00
0x9d
0x08
0x00
0x00
0x03
0x00
0x00
0x78
0x95
0x98
0x09
}
;
EXPECT_TRUE
(
static_cast
<
bool
>
(
vps_
=
H265VpsParser
:
:
ParseVps
(
buffer
)
)
)
;
EXPECT_EQ
(
1u
vps_
-
>
id
)
;
}
}
