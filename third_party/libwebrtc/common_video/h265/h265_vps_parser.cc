#
include
"
common_video
/
h265
/
h265_vps_parser
.
h
"
#
include
<
cstdint
>
#
include
<
optional
>
#
include
"
api
/
array_view
.
h
"
#
include
"
common_video
/
h265
/
h265_common
.
h
"
#
include
"
rtc_base
/
bitstream_reader
.
h
"
namespace
webrtc
{
H265VpsParser
:
:
VpsState
:
:
VpsState
(
)
=
default
;
std
:
:
optional
<
H265VpsParser
:
:
VpsState
>
H265VpsParser
:
:
ParseVps
(
ArrayView
<
const
uint8_t
>
data
)
{
return
ParseInternal
(
H265
:
:
ParseRbsp
(
data
)
)
;
}
std
:
:
optional
<
H265VpsParser
:
:
VpsState
>
H265VpsParser
:
:
ParseInternal
(
ArrayView
<
const
uint8_t
>
buffer
)
{
BitstreamReader
reader
(
buffer
)
;
VpsState
vps
;
vps
.
id
=
reader
.
ReadBits
(
4
)
;
if
(
!
reader
.
Ok
(
)
)
{
return
std
:
:
nullopt
;
}
return
vps
;
}
}
