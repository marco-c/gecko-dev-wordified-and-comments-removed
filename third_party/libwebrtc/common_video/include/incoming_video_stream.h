#
ifndef
COMMON_VIDEO_INCLUDE_INCOMING_VIDEO_STREAM_H_
#
define
COMMON_VIDEO_INCLUDE_INCOMING_VIDEO_STREAM_H_
#
include
<
stdint
.
h
>
#
include
"
api
/
task_queue
/
task_queue_factory
.
h
"
#
include
"
api
/
video
/
video_frame
.
h
"
#
include
"
api
/
video
/
video_sink_interface
.
h
"
#
include
"
common_video
/
video_render_frames
.
h
"
#
include
"
rtc_base
/
race_checker
.
h
"
#
include
"
rtc_base
/
task_queue
.
h
"
#
include
"
rtc_base
/
thread_annotations
.
h
"
#
include
"
rtc_base
/
thread_checker
.
h
"
namespace
webrtc
{
class
IncomingVideoStream
:
public
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
{
public
:
IncomingVideoStream
(
TaskQueueFactory
*
task_queue_factory
int32_t
delay_ms
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
callback
)
;
~
IncomingVideoStream
(
)
override
;
private
:
void
OnFrame
(
const
VideoFrame
&
video_frame
)
override
;
void
Dequeue
(
)
;
rtc
:
:
ThreadChecker
main_thread_checker_
;
rtc
:
:
RaceChecker
decoder_race_checker_
;
VideoRenderFrames
render_buffers_
RTC_GUARDED_BY
(
&
incoming_render_queue_
)
;
rtc
:
:
VideoSinkInterface
<
VideoFrame
>
*
const
callback_
;
rtc
:
:
TaskQueue
incoming_render_queue_
;
}
;
}
#
endif
