#
include
"
logging
/
rtc_event_log
/
encoder
/
rtc_event_log_encoder_common
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
namespace
{
constexpr
uint32_t
kPacketLossFractionRange
=
(
1
<
<
14
)
-
1
;
constexpr
float
kPacketLossFractionRangeFloat
=
static_cast
<
float
>
(
kPacketLossFractionRange
)
;
}
uint32_t
ConvertPacketLossFractionToProtoFormat
(
float
packet_loss_fraction
)
{
RTC_DCHECK_GE
(
packet_loss_fraction
0
)
;
RTC_DCHECK_LE
(
packet_loss_fraction
1
)
;
return
static_cast
<
uint32_t
>
(
packet_loss_fraction
*
kPacketLossFractionRange
)
;
}
bool
ParsePacketLossFractionFromProtoFormat
(
uint32_t
proto_packet_loss_fraction
float
*
output
)
{
if
(
proto_packet_loss_fraction
>
=
kPacketLossFractionRange
)
{
return
false
;
}
*
output
=
proto_packet_loss_fraction
/
kPacketLossFractionRangeFloat
;
return
true
;
}
}
