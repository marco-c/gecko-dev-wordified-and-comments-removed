#
ifndef
VIDEO_CORRUPTION_DETECTION_FRAME_PAIR_CORRUPTION_SCORE_H_
#
define
VIDEO_CORRUPTION_DETECTION_FRAME_PAIR_CORRUPTION_SCORE_H_
#
include
<
optional
>
#
include
"
absl
/
strings
/
string_view
.
h
"
#
include
"
api
/
video
/
video_codec_type
.
h
"
#
include
"
api
/
video
/
video_frame_buffer
.
h
"
#
include
"
video
/
corruption_detection
/
corruption_classifier
.
h
"
#
include
"
video
/
corruption_detection
/
halton_frame_sampler
.
h
"
namespace
webrtc
{
class
FramePairCorruptionScorer
{
public
:
FramePairCorruptionScorer
(
absl
:
:
string_view
codec_name
float
scale_factor
std
:
:
optional
<
float
>
sample_fraction
)
;
FramePairCorruptionScorer
(
absl
:
:
string_view
codec_name
float
growth_rate
float
midpoint
std
:
:
optional
<
float
>
sample_fraction
)
;
~
FramePairCorruptionScorer
(
)
=
default
;
double
CalculateScore
(
int
qp
I420BufferInterface
&
reference_buffer
I420BufferInterface
&
test_buffer
)
;
private
:
const
VideoCodecType
codec_type_
;
const
float
sample_fraction_
;
HaltonFrameSampler
halton_frame_sampler_
;
CorruptionClassifier
corruption_classifier_
;
}
;
}
#
endif
