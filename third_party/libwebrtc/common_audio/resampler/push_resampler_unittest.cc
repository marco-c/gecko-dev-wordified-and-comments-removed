#
include
"
common_audio
/
resampler
/
include
/
push_resampler
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
test
/
gtest
.
h
"
#
include
"
test
/
testsupport
/
rtc_expect_death
.
h
"
namespace
webrtc
{
TEST
(
PushResamplerTest
VerifiesInputParameters
)
{
PushResampler
<
int16_t
>
resampler1
(
160
160
1
)
;
PushResampler
<
int16_t
>
resampler2
(
160
160
2
)
;
PushResampler
<
int16_t
>
resampler3
(
160
160
8
)
;
}
#
if
RTC_DCHECK_IS_ON
&
&
GTEST_HAS_DEATH_TEST
&
&
!
defined
(
WEBRTC_ANDROID
)
TEST
(
PushResamplerDeathTest
VerifiesBadInputParameters1
)
{
RTC_EXPECT_DEATH
(
PushResampler
<
int16_t
>
(
-
1
160
1
)
"
src_samples_per_channel
"
)
;
}
TEST
(
PushResamplerDeathTest
VerifiesBadInputParameters2
)
{
RTC_EXPECT_DEATH
(
PushResampler
<
int16_t
>
(
160
-
1
1
)
"
dst_samples_per_channel
"
)
;
}
TEST
(
PushResamplerDeathTest
VerifiesBadInputParameters3
)
{
RTC_EXPECT_DEATH
(
PushResampler
<
int16_t
>
(
160
16000
0
)
"
num_channels
"
)
;
}
#
endif
}
