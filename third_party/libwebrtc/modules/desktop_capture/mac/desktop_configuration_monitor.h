#
ifndef
MODULES_DESKTOP_CAPTURE_MAC_DESKTOP_CONFIGURATION_MONITOR_H_
#
define
MODULES_DESKTOP_CAPTURE_MAC_DESKTOP_CONFIGURATION_MONITOR_H_
#
include
<
ApplicationServices
/
ApplicationServices
.
h
>
#
include
<
memory
>
#
include
<
set
>
#
include
"
api
/
ref_counted_base
.
h
"
#
include
"
modules
/
desktop_capture
/
mac
/
desktop_configuration
.
h
"
#
include
"
rtc_base
/
constructor_magic
.
h
"
#
include
"
rtc_base
/
synchronization
/
mutex
.
h
"
namespace
webrtc
{
class
DesktopConfigurationMonitor
final
:
public
rtc
:
:
RefCountedNonVirtual
<
DesktopConfigurationMonitor
>
{
public
:
DesktopConfigurationMonitor
(
)
;
~
DesktopConfigurationMonitor
(
)
;
MacDesktopConfiguration
desktop_configuration
(
)
;
private
:
static
void
DisplaysReconfiguredCallback
(
CGDirectDisplayID
display
CGDisplayChangeSummaryFlags
flags
void
*
user_parameter
)
;
void
DisplaysReconfigured
(
CGDirectDisplayID
display
CGDisplayChangeSummaryFlags
flags
)
;
Mutex
desktop_configuration_lock_
;
MacDesktopConfiguration
desktop_configuration_
RTC_GUARDED_BY
(
&
desktop_configuration_lock_
)
;
std
:
:
set
<
CGDirectDisplayID
>
reconfiguring_displays_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
DesktopConfigurationMonitor
)
;
}
;
}
#
endif
