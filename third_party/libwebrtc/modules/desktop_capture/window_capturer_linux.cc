#
include
<
memory
>
#
include
"
modules
/
desktop_capture
/
desktop_capture_options
.
h
"
#
include
"
modules
/
desktop_capture
/
desktop_capturer
.
h
"
#
if
defined
(
WEBRTC_USE_PIPEWIRE
)
#
include
"
modules
/
desktop_capture
/
linux
/
base_capturer_pipewire
.
h
"
#
endif
#
if
defined
(
WEBRTC_USE_X11
)
#
include
"
modules
/
desktop_capture
/
linux
/
window_capturer_x11
.
h
"
#
endif
namespace
webrtc
{
std
:
:
unique_ptr
<
DesktopCapturer
>
DesktopCapturer
:
:
CreateRawWindowCapturer
(
const
DesktopCaptureOptions
&
options
)
{
#
if
defined
(
WEBRTC_USE_PIPEWIRE
)
if
(
options
.
allow_pipewire
(
)
&
&
DesktopCapturer
:
:
IsRunningUnderWayland
(
)
)
{
return
BaseCapturerPipeWire
:
:
CreateRawCapturer
(
options
)
;
}
#
endif
#
if
defined
(
WEBRTC_USE_X11
)
return
WindowCapturerX11
:
:
CreateRawWindowCapturer
(
options
)
;
#
endif
return
nullptr
;
}
}
