#
ifndef
MODULES_DESKTOP_CAPTURE_WIN_WGC_CAPTURE_SESSION_H_
#
define
MODULES_DESKTOP_CAPTURE_WIN_WGC_CAPTURE_SESSION_H_
#
include
<
Windows
.
Graphics
.
Capture
.
h
>
#
include
<
d3d11
.
h
>
#
include
<
wrl
/
client
.
h
>
#
include
<
memory
>
#
include
"
modules
/
desktop_capture
/
desktop_frame
.
h
"
namespace
webrtc
{
class
WgcCaptureSession
final
{
public
:
WgcCaptureSession
(
Microsoft
:
:
WRL
:
:
ComPtr
<
ID3D11Device
>
d3d11_device
HWND
window
)
;
WgcCaptureSession
(
const
WgcCaptureSession
&
)
=
delete
;
WgcCaptureSession
&
operator
=
(
const
WgcCaptureSession
&
)
=
delete
;
~
WgcCaptureSession
(
)
;
HRESULT
StartCapture
(
)
;
HRESULT
GetMostRecentFrame
(
std
:
:
unique_ptr
<
DesktopFrame
>
*
output_frame
)
;
bool
IsCaptureStarted
(
)
const
{
return
is_capture_started_
;
}
private
:
Microsoft
:
:
WRL
:
:
ComPtr
<
ID3D11Device
>
d3d11_device_
;
HWND
window_
;
bool
is_capture_started_
=
false
;
}
;
}
#
endif
