#
include
"
modules
/
video_coding
/
utility
/
frame_sampler
.
h
"
#
include
"
api
/
video
/
video_frame
.
h
"
#
include
"
modules
/
include
/
module_common_types_public
.
h
"
namespace
webrtc
{
constexpr
int
kTimestampDifference
=
90
'
000
-
1
;
bool
FrameSampler
:
:
ShouldBeSampled
(
const
VideoFrame
&
frame
)
{
if
(
!
last_rtp_timestamp_sampled_
.
has_value
(
)
|
|
(
IsNewerTimestamp
(
frame
.
rtp_timestamp
(
)
*
last_rtp_timestamp_sampled_
+
kTimestampDifference
)
)
)
{
last_rtp_timestamp_sampled_
=
frame
.
rtp_timestamp
(
)
;
return
true
;
}
return
false
;
}
}
