#
ifndef
MODULES_VIDEO_CODING_INCLUDE_VIDEO_CODING_DEFINES_H_
#
define
MODULES_VIDEO_CODING_INCLUDE_VIDEO_CODING_DEFINES_H_
#
include
<
stddef
.
h
>
#
include
<
stdint
.
h
>
#
include
"
absl
/
types
/
optional
.
h
"
#
include
"
api
/
video
/
video_content_type
.
h
"
#
include
"
api
/
video
/
video_frame
.
h
"
#
include
"
api
/
video
/
video_timing
.
h
"
namespace
webrtc
{
#
define
VCM_FRAME_NOT_READY
3
#
define
VCM_MISSING_CALLBACK
1
#
define
VCM_OK
0
#
define
VCM_GENERAL_ERROR
-
1
#
define
VCM_PARAMETER_ERROR
-
4
#
define
VCM_NO_CODEC_REGISTERED
-
8
#
define
VCM_JITTER_BUFFER_ERROR
-
9
enum
{
kDefaultTimingFramesDelayMs
=
200
kDefaultOutlierFrameSizePercent
=
500
kMaxEncodeStartTimeListSize
=
150
}
;
enum
VCMVideoProtection
{
kProtectionNack
kProtectionNackFEC
}
;
class
VCMReceiveCallback
{
public
:
virtual
int32_t
FrameToRender
(
VideoFrame
&
videoFrame
absl
:
:
optional
<
uint8_t
>
qp
int32_t
decode_time_ms
VideoContentType
content_type
)
=
0
;
virtual
void
OnDroppedFrames
(
uint32_t
frames_dropped
)
;
virtual
void
OnIncomingPayloadType
(
int
payload_type
)
;
virtual
void
OnDecoderImplementationName
(
const
char
*
implementation_name
)
;
protected
:
virtual
~
VCMReceiveCallback
(
)
{
}
}
;
class
VCMReceiveStatisticsCallback
{
public
:
virtual
void
OnCompleteFrame
(
bool
is_keyframe
size_t
size_bytes
VideoContentType
content_type
)
=
0
;
virtual
void
OnDroppedFrames
(
uint32_t
frames_dropped
)
=
0
;
virtual
void
OnDiscardedPackets
(
uint32_t
packets_discarded
)
=
0
;
virtual
void
OnFrameBufferTimingsUpdated
(
int
max_decode_ms
int
current_delay_ms
int
target_delay_ms
int
jitter_buffer_ms
int
min_playout_delay_ms
int
render_delay_ms
)
=
0
;
virtual
void
OnTimingFrameInfoUpdated
(
const
TimingFrameInfo
&
info
)
=
0
;
protected
:
virtual
~
VCMReceiveStatisticsCallback
(
)
{
}
}
;
class
VCMFrameTypeCallback
{
public
:
virtual
int32_t
RequestKeyFrame
(
)
=
0
;
protected
:
virtual
~
VCMFrameTypeCallback
(
)
{
}
}
;
class
VCMPacketRequestCallback
{
public
:
virtual
int32_t
ResendPackets
(
const
uint16_t
*
sequenceNumbers
uint16_t
length
)
=
0
;
protected
:
virtual
~
VCMPacketRequestCallback
(
)
{
}
}
;
}
#
endif
