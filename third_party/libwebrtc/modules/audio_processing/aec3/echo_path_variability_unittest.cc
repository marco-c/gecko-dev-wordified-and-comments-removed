#
include
"
modules
/
audio_processing
/
aec3
/
echo_path_variability
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
EchoPathVariability
CorrectBehavior
)
{
EchoPathVariability
v
(
true
EchoPathVariability
:
:
DelayAdjustment
:
:
kNewDetectedDelay
false
)
;
EXPECT_TRUE
(
v
.
gain_change
)
;
EXPECT_TRUE
(
v
.
delay_change
=
=
EchoPathVariability
:
:
DelayAdjustment
:
:
kNewDetectedDelay
)
;
EXPECT_TRUE
(
v
.
AudioPathChanged
(
)
)
;
EXPECT_FALSE
(
v
.
clock_drift
)
;
v
=
EchoPathVariability
(
true
EchoPathVariability
:
:
DelayAdjustment
:
:
kNone
false
)
;
EXPECT_TRUE
(
v
.
gain_change
)
;
EXPECT_TRUE
(
v
.
delay_change
=
=
EchoPathVariability
:
:
DelayAdjustment
:
:
kNone
)
;
EXPECT_TRUE
(
v
.
AudioPathChanged
(
)
)
;
EXPECT_FALSE
(
v
.
clock_drift
)
;
v
=
EchoPathVariability
(
false
EchoPathVariability
:
:
DelayAdjustment
:
:
kNewDetectedDelay
false
)
;
EXPECT_FALSE
(
v
.
gain_change
)
;
EXPECT_TRUE
(
v
.
delay_change
=
=
EchoPathVariability
:
:
DelayAdjustment
:
:
kNewDetectedDelay
)
;
EXPECT_TRUE
(
v
.
AudioPathChanged
(
)
)
;
EXPECT_FALSE
(
v
.
clock_drift
)
;
v
=
EchoPathVariability
(
false
EchoPathVariability
:
:
DelayAdjustment
:
:
kNone
false
)
;
EXPECT_FALSE
(
v
.
gain_change
)
;
EXPECT_TRUE
(
v
.
delay_change
=
=
EchoPathVariability
:
:
DelayAdjustment
:
:
kNone
)
;
EXPECT_FALSE
(
v
.
AudioPathChanged
(
)
)
;
EXPECT_FALSE
(
v
.
clock_drift
)
;
}
}
