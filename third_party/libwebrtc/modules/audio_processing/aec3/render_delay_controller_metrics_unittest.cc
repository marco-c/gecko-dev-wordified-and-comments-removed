#
include
"
modules
/
audio_processing
/
aec3
/
render_delay_controller_metrics
.
h
"
#
include
"
absl
/
types
/
optional
.
h
"
#
include
"
modules
/
audio_processing
/
aec3
/
aec3_common
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
RenderDelayControllerMetrics
NormalUsage
)
{
RenderDelayControllerMetrics
metrics
;
for
(
int
j
=
0
;
j
<
3
;
+
+
j
)
{
for
(
int
k
=
0
;
k
<
kMetricsReportingIntervalBlocks
-
1
;
+
+
k
)
{
metrics
.
Update
(
absl
:
:
nullopt
0
absl
:
:
nullopt
ClockdriftDetector
:
:
Level
:
:
kNone
)
;
EXPECT_FALSE
(
metrics
.
MetricsReported
(
)
)
;
}
metrics
.
Update
(
absl
:
:
nullopt
0
absl
:
:
nullopt
ClockdriftDetector
:
:
Level
:
:
kNone
)
;
EXPECT_TRUE
(
metrics
.
MetricsReported
(
)
)
;
}
}
}
