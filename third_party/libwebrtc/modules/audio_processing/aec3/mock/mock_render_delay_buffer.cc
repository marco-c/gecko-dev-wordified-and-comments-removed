#
include
"
modules
/
audio_processing
/
aec3
/
mock
/
mock_render_delay_buffer
.
h
"
#
include
<
cstddef
>
#
include
"
modules
/
audio_processing
/
aec3
/
aec3_common
.
h
"
#
include
"
test
/
gmock
.
h
"
namespace
webrtc
{
namespace
test
{
MockRenderDelayBuffer
:
:
MockRenderDelayBuffer
(
int
sample_rate_hz
size_t
num_channels
)
:
block_buffer_
(
GetRenderDelayBufferSize
(
4
4
12
)
NumBandsForRate
(
sample_rate_hz
)
num_channels
)
spectrum_buffer_
(
block_buffer_
.
buffer
.
size
(
)
num_channels
)
fft_buffer_
(
block_buffer_
.
buffer
.
size
(
)
num_channels
)
render_buffer_
(
&
block_buffer_
&
spectrum_buffer_
&
fft_buffer_
)
downsampled_render_buffer_
(
GetDownSampledBufferSize
(
4
4
)
)
{
ON_CALL
(
*
this
GetRenderBuffer
(
)
)
.
WillByDefault
(
:
:
testing
:
:
Invoke
(
this
&
MockRenderDelayBuffer
:
:
FakeGetRenderBuffer
)
)
;
ON_CALL
(
*
this
GetDownsampledRenderBuffer
(
)
)
.
WillByDefault
(
:
:
testing
:
:
Invoke
(
this
&
MockRenderDelayBuffer
:
:
FakeGetDownsampledRenderBuffer
)
)
;
}
MockRenderDelayBuffer
:
:
~
MockRenderDelayBuffer
(
)
=
default
;
}
}
