#
include
"
modules
/
audio_processing
/
aec3
/
render_buffer
.
h
"
#
include
<
algorithm
>
#
include
<
functional
>
#
include
<
vector
>
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
#
if
RTC_DCHECK_IS_ON
&
&
GTEST_HAS_DEATH_TEST
&
&
!
defined
(
WEBRTC_ANDROID
)
TEST
(
RenderBufferDeathTest
NullExternalFftBuffer
)
{
BlockBuffer
block_buffer
(
10
3
1
kBlockSize
)
;
SpectrumBuffer
spectrum_buffer
(
10
1
)
;
EXPECT_DEATH
(
RenderBuffer
(
&
block_buffer
&
spectrum_buffer
nullptr
)
"
"
)
;
}
TEST
(
RenderBufferDeathTest
NullExternalSpectrumBuffer
)
{
FftBuffer
fft_buffer
(
10
1
)
;
BlockBuffer
block_buffer
(
10
3
1
kBlockSize
)
;
EXPECT_DEATH
(
RenderBuffer
(
&
block_buffer
nullptr
&
fft_buffer
)
"
"
)
;
}
TEST
(
RenderBufferDeathTest
NullExternalBlockBuffer
)
{
FftBuffer
fft_buffer
(
10
1
)
;
SpectrumBuffer
spectrum_buffer
(
10
1
)
;
EXPECT_DEATH
(
RenderBuffer
(
nullptr
&
spectrum_buffer
&
fft_buffer
)
"
"
)
;
}
#
endif
}
