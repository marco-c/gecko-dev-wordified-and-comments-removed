#
include
"
modules
/
audio_processing
/
agc2
/
cpu_features
.
h
"
#
include
"
rtc_base
/
strings
/
string_builder
.
h
"
#
include
"
rtc_base
/
system
/
arch
.
h
"
#
include
"
system_wrappers
/
include
/
cpu_features_wrapper
.
h
"
namespace
webrtc
{
std
:
:
string
AvailableCpuFeatures
:
:
ToString
(
)
const
{
char
buf
[
64
]
;
rtc
:
:
SimpleStringBuilder
builder
(
buf
)
;
bool
first
=
true
;
if
(
sse2
)
{
builder
<
<
(
first
?
"
SSE2
"
:
"
_SSE2
"
)
;
first
=
false
;
}
if
(
avx2
)
{
builder
<
<
(
first
?
"
AVX2
"
:
"
_AVX2
"
)
;
first
=
false
;
}
if
(
neon
)
{
builder
<
<
(
first
?
"
NEON
"
:
"
_NEON
"
)
;
first
=
false
;
}
if
(
first
)
{
return
"
none
"
;
}
return
builder
.
str
(
)
;
}
AvailableCpuFeatures
GetAvailableCpuFeatures
(
)
{
#
if
defined
(
WEBRTC_ARCH_X86_FAMILY
)
return
{
GetCPUInfo
(
kSSE2
)
!
=
0
GetCPUInfo
(
kAVX2
)
!
=
0
false
}
;
#
elif
defined
(
WEBRTC_HAS_NEON
)
return
{
false
false
true
}
;
#
else
return
{
false
false
false
}
;
#
endif
}
AvailableCpuFeatures
NoAvailableCpuFeatures
(
)
{
return
{
false
false
false
}
;
}
}
