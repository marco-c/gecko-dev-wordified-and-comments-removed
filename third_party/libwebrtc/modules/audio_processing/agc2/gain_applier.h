#
ifndef
MODULES_AUDIO_PROCESSING_AGC2_GAIN_APPLIER_H_
#
define
MODULES_AUDIO_PROCESSING_AGC2_GAIN_APPLIER_H_
#
include
<
stddef
.
h
>
#
include
"
api
/
audio
/
audio_view
.
h
"
#
include
"
modules
/
audio_processing
/
include
/
audio_frame_view
.
h
"
namespace
webrtc
{
class
GainApplier
{
public
:
GainApplier
(
bool
hard_clip_samples
float
initial_gain_factor
)
;
void
ApplyGain
(
DeinterleavedView
<
float
>
signal
)
;
void
SetGainFactor
(
float
gain_factor
)
;
float
GetGainFactor
(
)
const
{
return
current_gain_factor_
;
}
[
[
deprecated
(
"
Use
DeinterleavedView
<
>
version
"
)
]
]
void
ApplyGain
(
AudioFrameView
<
float
>
signal
)
{
ApplyGain
(
signal
.
view
(
)
)
;
}
private
:
void
Initialize
(
int
samples_per_channel
)
;
const
bool
hard_clip_samples_
;
float
last_gain_factor_
;
float
current_gain_factor_
;
int
samples_per_channel_
=
-
1
;
float
inverse_samples_per_channel_
=
-
1
.
f
;
}
;
}
#
endif
