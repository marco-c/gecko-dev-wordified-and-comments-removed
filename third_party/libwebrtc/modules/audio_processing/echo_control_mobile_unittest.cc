#
include
<
array
>
#
include
<
vector
>
#
include
"
api
/
audio
/
audio_processing
.
h
"
#
include
"
modules
/
audio_processing
/
echo_control_mobile_impl
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
EchoControlMobileTest
InterfaceConfiguration
)
{
EchoControlMobileImpl
aecm
;
aecm
.
Initialize
(
AudioProcessing
:
:
kSampleRate16kHz
2
2
)
;
std
:
:
array
<
EchoControlMobileImpl
:
:
RoutingMode
5
>
routing_modes
=
{
EchoControlMobileImpl
:
:
kQuietEarpieceOrHeadset
EchoControlMobileImpl
:
:
kEarpiece
EchoControlMobileImpl
:
:
kLoudEarpiece
EchoControlMobileImpl
:
:
kSpeakerphone
EchoControlMobileImpl
:
:
kLoudSpeakerphone
}
;
for
(
auto
mode
:
routing_modes
)
{
EXPECT_EQ
(
0
aecm
.
set_routing_mode
(
mode
)
)
;
EXPECT_EQ
(
mode
aecm
.
routing_mode
(
)
)
;
}
EXPECT_EQ
(
0
aecm
.
enable_comfort_noise
(
false
)
)
;
EXPECT_FALSE
(
aecm
.
is_comfort_noise_enabled
(
)
)
;
EXPECT_EQ
(
0
aecm
.
enable_comfort_noise
(
true
)
)
;
EXPECT_TRUE
(
aecm
.
is_comfort_noise_enabled
(
)
)
;
}
}
