#
include
"
modules
/
video_capture
/
video_capture_options
.
h
"
#
if
defined
(
WEBRTC_USE_PIPEWIRE
)
#
include
"
modules
/
video_capture
/
linux
/
pipewire_session
.
h
"
#
endif
namespace
webrtc
{
VideoCaptureOptions
:
:
VideoCaptureOptions
(
)
{
}
VideoCaptureOptions
:
:
VideoCaptureOptions
(
const
VideoCaptureOptions
&
options
)
=
default
;
VideoCaptureOptions
:
:
VideoCaptureOptions
(
VideoCaptureOptions
&
&
options
)
=
default
;
VideoCaptureOptions
:
:
~
VideoCaptureOptions
(
)
{
}
VideoCaptureOptions
&
VideoCaptureOptions
:
:
operator
=
(
const
VideoCaptureOptions
&
options
)
=
default
;
VideoCaptureOptions
&
VideoCaptureOptions
:
:
operator
=
(
VideoCaptureOptions
&
&
options
)
=
default
;
void
VideoCaptureOptions
:
:
Init
(
Callback
*
callback
)
{
#
if
defined
(
WEBRTC_USE_PIPEWIRE
)
if
(
allow_pipewire_
)
{
pipewire_session_
=
webrtc
:
:
make_ref_counted
<
videocapturemodule
:
:
PipeWireSession
>
(
)
;
pipewire_session_
-
>
Init
(
callback
pipewire_fd_
)
;
return
;
}
#
endif
#
if
defined
(
WEBRTC_LINUX
)
if
(
!
allow_v4l2_
)
callback
-
>
OnInitialized
(
Status
:
:
UNAVAILABLE
)
;
else
#
endif
callback
-
>
OnInitialized
(
Status
:
:
SUCCESS
)
;
}
#
if
defined
(
WEBRTC_USE_PIPEWIRE
)
webrtc
:
:
scoped_refptr
<
videocapturemodule
:
:
PipeWireSession
>
VideoCaptureOptions
:
:
pipewire_session
(
)
{
return
pipewire_session_
;
}
#
endif
}
