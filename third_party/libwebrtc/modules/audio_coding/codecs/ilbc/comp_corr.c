#
include
"
modules
/
audio_coding
/
codecs
/
ilbc
/
comp_corr
.
h
"
#
include
"
modules
/
audio_coding
/
codecs
/
ilbc
/
defines
.
h
"
void
WebRtcIlbcfix_CompCorr
(
int32_t
*
corr
int32_t
*
ener
int16_t
*
buffer
size_t
lag
size_t
bLen
size_t
sRange
int16_t
scale
)
{
int16_t
*
w16ptr
;
w16ptr
=
&
buffer
[
bLen
-
sRange
-
lag
]
;
(
*
corr
)
=
WebRtcSpl_DotProductWithScale
(
&
buffer
[
bLen
-
sRange
]
w16ptr
sRange
scale
)
;
(
*
ener
)
=
WebRtcSpl_DotProductWithScale
(
w16ptr
w16ptr
sRange
scale
)
;
if
(
*
ener
=
=
0
)
{
*
corr
=
0
;
*
ener
=
1
;
}
}
