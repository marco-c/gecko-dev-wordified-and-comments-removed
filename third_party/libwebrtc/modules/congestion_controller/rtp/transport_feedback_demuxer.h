#
ifndef
MODULES_CONGESTION_CONTROLLER_RTP_TRANSPORT_FEEDBACK_DEMUXER_H_
#
define
MODULES_CONGESTION_CONTROLLER_RTP_TRANSPORT_FEEDBACK_DEMUXER_H_
#
include
<
map
>
#
include
<
utility
>
#
include
<
vector
>
#
include
"
api
/
sequence_checker
.
h
"
#
include
"
modules
/
include
/
module_common_types_public
.
h
"
#
include
"
modules
/
rtp_rtcp
/
include
/
rtp_rtcp_defines
.
h
"
#
include
"
rtc_base
/
numerics
/
sequence_number_unwrapper
.
h
"
#
include
"
rtc_base
/
system
/
no_unique_address
.
h
"
namespace
webrtc
{
class
TransportFeedbackDemuxer
final
:
public
StreamFeedbackProvider
{
public
:
TransportFeedbackDemuxer
(
)
;
void
RegisterStreamFeedbackObserver
(
std
:
:
vector
<
uint32_t
>
ssrcs
StreamFeedbackObserver
*
observer
)
override
;
void
DeRegisterStreamFeedbackObserver
(
StreamFeedbackObserver
*
observer
)
override
;
void
AddPacket
(
const
RtpPacketSendInfo
&
packet_info
)
;
void
OnTransportFeedback
(
const
rtcp
:
:
TransportFeedback
&
feedback
)
;
private
:
RTC_NO_UNIQUE_ADDRESS
SequenceChecker
observer_checker_
;
RtpSequenceNumberUnwrapper
seq_num_unwrapper_
RTC_GUARDED_BY
(
&
observer_checker_
)
;
std
:
:
map
<
int64_t
StreamFeedbackObserver
:
:
StreamPacketInfo
>
history_
RTC_GUARDED_BY
(
&
observer_checker_
)
;
std
:
:
vector
<
std
:
:
pair
<
std
:
:
vector
<
uint32_t
>
StreamFeedbackObserver
*
>
>
observers_
RTC_GUARDED_BY
(
&
observer_checker_
)
;
}
;
}
#
endif
