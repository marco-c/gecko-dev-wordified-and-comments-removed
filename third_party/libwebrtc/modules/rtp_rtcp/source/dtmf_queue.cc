#
include
"
modules
/
rtp_rtcp
/
source
/
dtmf_queue
.
h
"
#
include
<
stddef
.
h
>
#
include
"
rtc_base
/
checks
.
h
"
#
include
"
rtc_base
/
synchronization
/
mutex
.
h
"
namespace
{
constexpr
size_t
kDtmfOutbandMax
=
20
;
}
namespace
webrtc
{
DtmfQueue
:
:
DtmfQueue
(
)
{
}
DtmfQueue
:
:
~
DtmfQueue
(
)
{
}
bool
DtmfQueue
:
:
AddDtmf
(
const
Event
&
event
)
{
MutexLock
lock
(
&
dtmf_mutex_
)
;
if
(
queue_
.
size
(
)
>
=
kDtmfOutbandMax
)
{
return
false
;
}
queue_
.
push_back
(
event
)
;
return
true
;
}
bool
DtmfQueue
:
:
NextDtmf
(
Event
*
event
)
{
RTC_DCHECK
(
event
)
;
MutexLock
lock
(
&
dtmf_mutex_
)
;
if
(
queue_
.
empty
(
)
)
{
return
false
;
}
*
event
=
queue_
.
front
(
)
;
queue_
.
pop_front
(
)
;
return
true
;
}
bool
DtmfQueue
:
:
PendingDtmf
(
)
const
{
MutexLock
lock
(
&
dtmf_mutex_
)
;
return
!
queue_
.
empty
(
)
;
}
}
