#
include
"
modules
/
rtp_rtcp
/
source
/
rtp_video_header
.
h
"
namespace
webrtc
{
RTPVideoHeader
:
:
GenericDescriptorInfo
:
:
GenericDescriptorInfo
(
)
=
default
;
RTPVideoHeader
:
:
GenericDescriptorInfo
:
:
GenericDescriptorInfo
(
const
GenericDescriptorInfo
&
other
)
=
default
;
RTPVideoHeader
:
:
GenericDescriptorInfo
:
:
~
GenericDescriptorInfo
(
)
=
default
;
RTPVideoHeader
:
:
RTPVideoHeader
(
)
:
video_timing
(
)
{
}
RTPVideoHeader
:
:
RTPVideoHeader
(
const
RTPVideoHeader
&
other
)
=
default
;
RTPVideoHeader
:
:
~
RTPVideoHeader
(
)
=
default
;
VideoFrameMetadata
RTPVideoHeader
:
:
GetAsMetadata
(
)
const
{
VideoFrameMetadata
metadata
;
metadata
.
SetFrameType
(
frame_type
)
;
metadata
.
SetWidth
(
width
)
;
metadata
.
SetHeight
(
height
)
;
metadata
.
SetRotation
(
rotation
)
;
metadata
.
SetContentType
(
content_type
)
;
if
(
generic
)
{
metadata
.
SetFrameId
(
generic
-
>
frame_id
)
;
metadata
.
SetSpatialIndex
(
generic
-
>
spatial_index
)
;
metadata
.
SetTemporalIndex
(
generic
-
>
temporal_index
)
;
metadata
.
SetFrameDependencies
(
generic
-
>
dependencies
)
;
metadata
.
SetDecodeTargetIndications
(
generic
-
>
decode_target_indications
)
;
}
metadata
.
SetIsLastFrameInPicture
(
is_last_frame_in_picture
)
;
metadata
.
SetSimulcastIdx
(
simulcastIdx
)
;
metadata
.
SetCodec
(
codec
)
;
switch
(
codec
)
{
case
VideoCodecType
:
:
kVideoCodecVP8
:
metadata
.
SetRTPVideoHeaderCodecSpecifics
(
absl
:
:
get
<
RTPVideoHeaderVP8
>
(
video_type_header
)
)
;
break
;
case
VideoCodecType
:
:
kVideoCodecVP9
:
metadata
.
SetRTPVideoHeaderCodecSpecifics
(
absl
:
:
get
<
RTPVideoHeaderVP9
>
(
video_type_header
)
)
;
break
;
case
VideoCodecType
:
:
kVideoCodecH264
:
metadata
.
SetRTPVideoHeaderCodecSpecifics
(
absl
:
:
get
<
RTPVideoHeaderH264
>
(
video_type_header
)
)
;
break
;
default
:
break
;
}
return
metadata
;
}
}
