#
include
"
modules
/
rtp_rtcp
/
source
/
rtcp_packet
/
rrtr
.
h
"
#
include
<
cstdint
>
#
include
"
modules
/
rtp_rtcp
/
source
/
byte_io
.
h
"
#
include
"
rtc_base
/
checks
.
h
"
namespace
webrtc
{
namespace
rtcp
{
void
Rrtr
:
:
Parse
(
const
uint8_t
*
buffer
)
{
RTC_DCHECK
(
buffer
[
0
]
=
=
kBlockType
)
;
RTC_DCHECK
(
ByteReader
<
uint16_t
>
:
:
ReadBigEndian
(
&
buffer
[
2
]
)
=
=
kBlockLength
)
;
uint32_t
seconds
=
ByteReader
<
uint32_t
>
:
:
ReadBigEndian
(
&
buffer
[
4
]
)
;
uint32_t
fraction
=
ByteReader
<
uint32_t
>
:
:
ReadBigEndian
(
&
buffer
[
8
]
)
;
ntp_
.
Set
(
seconds
fraction
)
;
}
void
Rrtr
:
:
Create
(
uint8_t
*
buffer
)
const
{
const
uint8_t
kReserved
=
0
;
buffer
[
0
]
=
kBlockType
;
buffer
[
1
]
=
kReserved
;
ByteWriter
<
uint16_t
>
:
:
WriteBigEndian
(
&
buffer
[
2
]
kBlockLength
)
;
ByteWriter
<
uint32_t
>
:
:
WriteBigEndian
(
&
buffer
[
4
]
ntp_
.
seconds
(
)
)
;
ByteWriter
<
uint32_t
>
:
:
WriteBigEndian
(
&
buffer
[
8
]
ntp_
.
fractions
(
)
)
;
}
}
}
