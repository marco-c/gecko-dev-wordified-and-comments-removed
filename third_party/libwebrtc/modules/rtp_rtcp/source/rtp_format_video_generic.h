#
ifndef
MODULES_RTP_RTCP_SOURCE_RTP_FORMAT_VIDEO_GENERIC_H_
#
define
MODULES_RTP_RTCP_SOURCE_RTP_FORMAT_VIDEO_GENERIC_H_
#
include
<
stdint
.
h
>
#
include
<
vector
>
#
include
"
api
/
array_view
.
h
"
#
include
"
modules
/
rtp_rtcp
/
source
/
rtp_format
.
h
"
#
include
"
rtc_base
/
constructor_magic
.
h
"
namespace
webrtc
{
class
RtpPacketToSend
;
struct
RTPVideoHeader
;
namespace
RtpFormatVideoGeneric
{
static
const
uint8_t
kKeyFrameBit
=
0x01
;
static
const
uint8_t
kFirstPacketBit
=
0x02
;
static
const
uint8_t
kExtendedHeaderBit
=
0x04
;
}
class
RtpPacketizerGeneric
:
public
RtpPacketizer
{
public
:
RtpPacketizerGeneric
(
rtc
:
:
ArrayView
<
const
uint8_t
>
payload
PayloadSizeLimits
limits
const
RTPVideoHeader
&
rtp_video_header
)
;
RtpPacketizerGeneric
(
rtc
:
:
ArrayView
<
const
uint8_t
>
payload
PayloadSizeLimits
limits
)
;
~
RtpPacketizerGeneric
(
)
override
;
size_t
NumPackets
(
)
const
override
;
bool
NextPacket
(
RtpPacketToSend
*
packet
)
override
;
private
:
void
BuildHeader
(
const
RTPVideoHeader
&
rtp_video_header
)
;
uint8_t
header_
[
3
]
;
size_t
header_size_
;
rtc
:
:
ArrayView
<
const
uint8_t
>
remaining_payload_
;
std
:
:
vector
<
int
>
payload_sizes_
;
std
:
:
vector
<
int
>
:
:
const_iterator
current_packet_
;
RTC_DISALLOW_COPY_AND_ASSIGN
(
RtpPacketizerGeneric
)
;
}
;
}
#
endif
