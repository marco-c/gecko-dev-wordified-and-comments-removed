#
include
"
media
/
base
/
media_channel_shim
.
h
"
namespace
cricket
{
VideoMediaShimChannel
:
:
VideoMediaShimChannel
(
std
:
:
unique_ptr
<
VideoMediaSendChannelInterface
>
send_impl
std
:
:
unique_ptr
<
VideoMediaReceiveChannelInterface
>
receive_impl
)
:
VideoMediaChannel
(
MediaChannel
:
:
Role
:
:
kBoth
nullptr
false
)
send_impl_
(
std
:
:
move
(
send_impl
)
)
receive_impl_
(
std
:
:
move
(
receive_impl
)
)
{
if
(
send_impl_
&
&
receive_impl_
)
{
send_impl_
-
>
SetSendCodecChangedCallback
(
[
this
]
(
)
{
receive_impl_
-
>
SetReceiverFeedbackParameters
(
send_impl_
-
>
SendCodecHasLntf
(
)
send_impl_
-
>
SendCodecHasNack
(
)
send_impl_
-
>
SendCodecRtcpMode
(
)
send_impl_
-
>
SendCodecRtxTime
(
)
)
;
}
)
;
send_impl_
-
>
SetSsrcListChangedCallback
(
[
this
]
(
const
std
:
:
set
<
uint32_t
>
&
choices
)
{
receive_impl_
-
>
ChooseReceiverReportSsrc
(
choices
)
;
}
)
;
}
}
}
