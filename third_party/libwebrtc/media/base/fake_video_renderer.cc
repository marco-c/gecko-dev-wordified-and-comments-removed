#
include
"
media
/
base
/
fake_video_renderer
.
h
"
namespace
cricket
{
FakeVideoRenderer
:
:
FakeVideoRenderer
(
)
=
default
;
void
FakeVideoRenderer
:
:
OnFrame
(
const
webrtc
:
:
VideoFrame
&
frame
)
{
webrtc
:
:
MutexLock
lock
(
&
mutex_
)
;
black_frame_
=
CheckFrameColorYuv
(
0
48
128
128
128
128
&
frame
)
;
+
+
num_rendered_frames_
;
width_
=
frame
.
width
(
)
;
height_
=
frame
.
height
(
)
;
rotation_
=
frame
.
rotation
(
)
;
timestamp_us_
=
frame
.
timestamp_us
(
)
;
ntp_timestamp_ms_
=
frame
.
ntp_time_ms
(
)
;
color_space_
=
frame
.
color_space
(
)
;
packet_infos_
=
frame
.
packet_infos
(
)
;
frame_rendered_event_
.
Set
(
)
;
}
bool
FakeVideoRenderer
:
:
WaitForRenderedFrame
(
int64_t
timeout_ms
)
{
return
frame_rendered_event_
.
Wait
(
timeout_ms
)
;
}
}
