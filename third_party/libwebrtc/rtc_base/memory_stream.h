#
ifndef
RTC_BASE_MEMORY_STREAM_H_
#
define
RTC_BASE_MEMORY_STREAM_H_
#
include
<
stddef
.
h
>
#
include
"
rtc_base
/
stream
.
h
"
namespace
rtc
{
class
MemoryStream
final
:
public
StreamInterface
{
public
:
MemoryStream
(
)
;
~
MemoryStream
(
)
override
;
StreamState
GetState
(
)
const
override
;
StreamResult
Read
(
rtc
:
:
ArrayView
<
uint8_t
>
buffer
size_t
&
bytes_read
int
&
error
)
override
;
StreamResult
Write
(
rtc
:
:
ArrayView
<
const
uint8_t
>
buffer
size_t
&
bytes_written
int
&
error
)
override
;
void
Close
(
)
override
;
bool
GetSize
(
size_t
*
size
)
const
;
bool
ReserveSize
(
size_t
size
)
;
bool
SetPosition
(
size_t
position
)
;
bool
GetPosition
(
size_t
*
position
)
const
;
void
Rewind
(
)
;
char
*
GetBuffer
(
)
{
return
buffer_
;
}
const
char
*
GetBuffer
(
)
const
{
return
buffer_
;
}
void
SetData
(
const
void
*
data
size_t
length
)
;
private
:
StreamResult
DoReserve
(
size_t
size
int
*
error
)
;
char
*
buffer_
=
nullptr
;
size_t
buffer_length_
=
0
;
size_t
data_length_
=
0
;
size_t
seek_position_
=
0
;
}
;
}
#
endif
