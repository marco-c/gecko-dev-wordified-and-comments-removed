#
include
"
rtc_base
/
experiments
/
normalize_simulcast_size_experiment
.
h
"
#
include
"
test
/
field_trial
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponent
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Enabled
-
2
/
"
)
;
EXPECT_EQ
(
2
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponentWithTwoParameters
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Enabled
-
3
-
4
/
"
)
;
EXPECT_EQ
(
3
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponentFailsIfNotEnabled
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Disabled
/
"
)
;
EXPECT_FALSE
(
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponentFailsForInvalidFieldTrial
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Enabled
-
invalid
/
"
)
;
EXPECT_FALSE
(
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponentFailsForNegativeOutOfBoundValue
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Enabled
-
-
1
/
"
)
;
EXPECT_FALSE
(
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
TEST
(
NormalizeSimulcastSizeExperimentTest
GetExponentFailsForPositiveOutOfBoundValue
)
{
webrtc
:
:
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
NormalizeSimulcastResolution
/
Enabled
-
6
/
"
)
;
EXPECT_FALSE
(
NormalizeSimulcastSizeExperiment
:
:
GetBase2Exponent
(
)
)
;
}
}
