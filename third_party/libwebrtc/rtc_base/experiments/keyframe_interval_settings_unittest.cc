#
include
"
rtc_base
/
experiments
/
keyframe_interval_settings
.
h
"
#
include
"
test
/
field_trial
.
h
"
#
include
"
test
/
gtest
.
h
"
namespace
webrtc
{
namespace
{
TEST
(
KeyframeIntervalSettingsTest
ParsesMinKeyframeSendIntervalMs
)
{
EXPECT_FALSE
(
KeyframeIntervalSettings
:
:
ParseFromFieldTrials
(
)
.
MinKeyframeSendIntervalMs
(
)
)
;
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
KeyframeInterval
/
min_keyframe_send_interval_ms
:
100
/
"
)
;
EXPECT_EQ
(
KeyframeIntervalSettings
:
:
ParseFromFieldTrials
(
)
.
MinKeyframeSendIntervalMs
(
)
100
)
;
}
TEST
(
KeyframeIntervalSettingsTest
DoesNotParseIncorrectValues
)
{
EXPECT_FALSE
(
KeyframeIntervalSettings
:
:
ParseFromFieldTrials
(
)
.
MinKeyframeSendIntervalMs
(
)
)
;
test
:
:
ScopedFieldTrials
field_trials
(
"
WebRTC
-
KeyframeInterval
/
min_keyframe_send_interval_ms
:
a
/
"
)
;
EXPECT_FALSE
(
KeyframeIntervalSettings
:
:
ParseFromFieldTrials
(
)
.
MinKeyframeSendIntervalMs
(
)
)
;
EXPECT_FALSE
(
KeyframeIntervalSettings
:
:
ParseFromFieldTrials
(
)
.
MinKeyframeSendIntervalMs
(
)
)
;
}
}
}
