#
include
"
rtc_base
/
stream
.
h
"
#
include
<
string
.
h
>
#
include
<
cstdint
>
#
include
"
api
/
array_view
.
h
"
namespace
rtc
{
StreamResult
StreamInterface
:
:
WriteAll
(
ArrayView
<
const
uint8_t
>
data
size_t
&
written
int
&
error
)
{
StreamResult
result
=
SR_SUCCESS
;
size_t
total_written
=
0
current_written
;
while
(
total_written
<
data
.
size
(
)
)
{
rtc
:
:
ArrayView
<
const
uint8_t
>
this_slice
=
data
.
subview
(
total_written
data
.
size
(
)
-
total_written
)
;
result
=
Write
(
this_slice
current_written
error
)
;
if
(
result
!
=
SR_SUCCESS
)
break
;
total_written
+
=
current_written
;
}
written
=
total_written
;
return
result
;
}
bool
StreamInterface
:
:
Flush
(
)
{
return
false
;
}
StreamInterface
:
:
StreamInterface
(
)
{
}
}
