#
ifndef
NET_DCSCTP_TX_RETRANSMISSION_ERROR_COUNTER_H_
#
define
NET_DCSCTP_TX_RETRANSMISSION_ERROR_COUNTER_H_
#
include
<
optional
>
#
include
"
absl
/
strings
/
string_view
.
h
"
#
include
"
net
/
dcsctp
/
public
/
dcsctp_options
.
h
"
namespace
dcsctp
{
class
RetransmissionErrorCounter
{
public
:
RetransmissionErrorCounter
(
absl
:
:
string_view
log_prefix
const
DcSctpOptions
&
options
)
:
log_prefix_
(
log_prefix
)
limit_
(
options
.
max_retransmissions
)
{
}
bool
Increment
(
absl
:
:
string_view
reason
)
;
bool
IsExhausted
(
)
const
{
return
limit_
.
has_value
(
)
&
&
counter_
>
*
limit_
;
}
void
Clear
(
)
;
int
value
(
)
const
{
return
counter_
;
}
private
:
const
absl
:
:
string_view
log_prefix_
;
const
std
:
:
optional
<
int
>
limit_
;
int
counter_
=
0
;
}
;
}
#
endif
