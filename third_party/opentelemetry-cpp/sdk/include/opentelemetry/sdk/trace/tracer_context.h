#
pragma
once
#
include
<
chrono
>
#
include
<
memory
>
#
include
<
vector
>
#
include
"
opentelemetry
/
sdk
/
resource
/
resource
.
h
"
#
include
"
opentelemetry
/
sdk
/
trace
/
id_generator
.
h
"
#
include
"
opentelemetry
/
sdk
/
trace
/
processor
.
h
"
#
include
"
opentelemetry
/
sdk
/
trace
/
random_id_generator
.
h
"
#
include
"
opentelemetry
/
sdk
/
trace
/
sampler
.
h
"
#
include
"
opentelemetry
/
sdk
/
trace
/
samplers
/
always_on
.
h
"
#
include
"
opentelemetry
/
version
.
h
"
OPENTELEMETRY_BEGIN_NAMESPACE
namespace
sdk
{
namespace
trace
{
class
TracerContext
{
public
:
explicit
TracerContext
(
std
:
:
vector
<
std
:
:
unique_ptr
<
SpanProcessor
>
>
&
&
processor
const
opentelemetry
:
:
sdk
:
:
resource
:
:
Resource
&
resource
=
opentelemetry
:
:
sdk
:
:
resource
:
:
Resource
:
:
Create
(
{
}
)
std
:
:
unique_ptr
<
Sampler
>
sampler
=
std
:
:
unique_ptr
<
AlwaysOnSampler
>
(
new
AlwaysOnSampler
)
std
:
:
unique_ptr
<
IdGenerator
>
id_generator
=
std
:
:
unique_ptr
<
IdGenerator
>
(
new
RandomIdGenerator
(
)
)
)
noexcept
;
virtual
~
TracerContext
(
)
=
default
;
void
AddProcessor
(
std
:
:
unique_ptr
<
SpanProcessor
>
processor
)
noexcept
;
Sampler
&
GetSampler
(
)
const
noexcept
;
SpanProcessor
&
GetProcessor
(
)
const
noexcept
;
const
opentelemetry
:
:
sdk
:
:
resource
:
:
Resource
&
GetResource
(
)
const
noexcept
;
opentelemetry
:
:
sdk
:
:
trace
:
:
IdGenerator
&
GetIdGenerator
(
)
const
noexcept
;
bool
ForceFlush
(
std
:
:
chrono
:
:
microseconds
timeout
=
(
std
:
:
chrono
:
:
microseconds
:
:
max
)
(
)
)
noexcept
;
bool
Shutdown
(
std
:
:
chrono
:
:
microseconds
timeout
=
(
std
:
:
chrono
:
:
microseconds
:
:
max
)
(
)
)
noexcept
;
private
:
opentelemetry
:
:
sdk
:
:
resource
:
:
Resource
resource_
;
std
:
:
unique_ptr
<
Sampler
>
sampler_
;
std
:
:
unique_ptr
<
IdGenerator
>
id_generator_
;
std
:
:
unique_ptr
<
SpanProcessor
>
processor_
;
}
;
}
}
OPENTELEMETRY_END_NAMESPACE
