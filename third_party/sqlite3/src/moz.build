NoVisibilityFlags
(
)
EXPORTS
+
=
[
'
sqlite3
.
h
'
]
AllowCompilerWarnings
(
)
if
CONFIG
[
'
MOZ_FOLD_LIBS
'
]
:
FINAL_LIBRARY
=
'
nss
'
else
:
FINAL_LIBRARY
=
'
sqlite
'
DIRS
+
=
[
'
.
.
/
ext
'
]
SOURCES
+
=
[
'
sqlite3
.
c
'
]
for
var
in
(
'
SQLITE_SECURE_DELETE
'
'
SQLITE_THREADSAFE
'
'
SQLITE_ENABLE_UNLOCK_NOTIFY
'
'
SQLITE_ENABLE_DBSTAT_VTAB
'
)
:
DEFINES
[
var
]
=
1
DEFINES
[
'
SQLITE_DEFAULT_PAGE_SIZE
'
]
=
32768
DEFINES
[
'
SQLITE_MAX_DEFAULT_PAGE_SIZE
'
]
=
32768
if
CONFIG
[
'
MOZ_WIDGET_TOOLKIT
'
]
=
=
'
windows
'
:
DEFINES
[
'
SQLITE_WIN32_GETVERSIONEX
'
]
=
0
DEFINES
[
'
SQLITE_ALLOW_URI_AUTHORITY
'
]
=
1
if
CONFIG
[
'
MOZ_WIDGET_TOOLKIT
'
]
=
=
'
cocoa
'
:
DEFINES
[
'
SQLITE_ENABLE_LOCKING_STYLE
'
]
=
1
if
CONFIG
[
'
MOZ_WIDGET_TOOLKIT
'
]
=
=
'
uikit
'
:
DEFINES
[
'
SQLITE_ENABLE_LOCKING_STYLE
'
]
=
0
if
CONFIG
[
'
MOZ_DEBUG
'
]
:
DEFINES
[
'
SQLITE_DEBUG
'
]
=
1
DEFINES
[
'
SQLITE_ENABLE_API_ARMOR
'
]
=
True
else
:
DEFINES
[
'
SQLITE_OMIT_COMPILEOPTION_DIAGS
'
]
=
1
if
CONFIG
[
'
OS_TARGET
'
]
=
=
'
Android
'
:
DEFINES
[
'
SQLITE_DEFAULT_FILE_PERMISSIONS
'
]
=
'
0600
'
if
CONFIG
[
'
OS_TARGET
'
]
=
=
'
WINNT
'
and
CONFIG
[
'
CC_TYPE
'
]
!
=
'
clang
-
cl
'
:
DEFINES
[
'
SQLITE_USE_MALLOC_H
'
]
=
True
DEFINES
[
'
SQLITE_USE_MSIZE
'
]
=
True
DEFINES
[
'
SQLITE_OMIT_DEPRECATED
'
]
=
True
DEFINES
[
'
SQLITE_OMIT_BUILTIN_TEST
'
]
=
True
if
CONFIG
[
'
OS_TARGET
'
]
=
=
'
Android
'
:
DEFINES
[
'
SQLITE_TEMP_STORE
'
]
=
3
elif
CONFIG
[
'
HAVE_64BIT_BUILD
'
]
:
DEFINES
[
'
SQLITE_TEMP_STORE
'
]
=
2
DEFINES
[
'
SQLITE_TEMP_FILE_PREFIX
'
]
=
'
"
mz_etilqs_
"
'
DEFINES
[
'
SQLITE_ENABLE_MATH_FUNCTIONS
'
]
=
True
if
CONFIG
[
"
OS_TARGET
"
]
=
=
"
Linux
"
or
CONFIG
[
"
OS_TARGET
"
]
=
=
"
Android
"
:
OS_LIBS
+
=
[
"
m
"
]
if
CONFIG
[
'
OS_TARGET
'
]
=
=
'
Android
'
and
not
CONFIG
[
'
HAVE_64BIT_BUILD
'
]
:
DEFINES
[
'
HAVE_LOG2
'
]
=
0
if
CONFIG
[
'
CC_TYPE
'
]
in
(
'
clang
'
'
gcc
'
)
:
CFLAGS
+
=
[
'
-
Wno
-
sign
-
compare
'
'
-
Wno
-
type
-
limits
'
]
DEFINES
[
'
SQLITE_DEFAULT_JOURNAL_SIZE_LIMIT
'
]
=
1572864
if
CONFIG
[
"
MOZ_THUNDERBIRD
"
]
or
CONFIG
[
"
MOZ_SUITE
"
]
:
DEFINES
[
'
SQLITE_ENABLE_FTS3
'
]
=
1
DEFINES
[
'
SQLITE_DIRECT_OVERFLOW_READ
'
]
=
0
