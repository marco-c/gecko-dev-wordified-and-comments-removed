"
"
"
Normalize
input
string
.
"
"
"
import
re
from
.
state_core
import
StateCore
NEWLINES_RE
=
re
.
compile
(
r
"
\
r
\
n
?
|
\
n
"
)
NULL_RE
=
re
.
compile
(
r
"
\
0
"
)
def
normalize
(
state
:
StateCore
)
-
>
None
:
    
string
=
NEWLINES_RE
.
sub
(
"
\
n
"
state
.
src
)
    
string
=
NULL_RE
.
sub
(
"
\
uFFFD
"
string
)
    
state
.
src
=
string
