"
"
"
Tests
that
filenames
that
contain
colons
are
handled
correctly
.
(
This
is
important
for
absolute
paths
on
Windows
.
)
"
"
"
from
__future__
import
print_function
import
os
import
sys
if
sys
.
platform
=
=
'
win32
'
:
  
print
(
"
This
test
is
currently
disabled
:
https
:
/
/
crbug
.
com
/
483696
.
"
)
  
sys
.
exit
(
0
)
import
TestGyp
test
=
TestGyp
.
TestGyp
(
formats
=
[
'
!
make
'
]
)
CHDIR
=
'
colon
'
source_name
=
'
colon
/
a
:
b
.
c
'
copies_name
=
'
colon
/
a
:
b
.
c
-
d
'
if
sys
.
platform
=
=
'
win32
'
:
  
abs_source
=
os
.
path
.
abspath
(
'
colon
/
file
.
c
'
)
  
test
.
write
(
'
colon
/
test
.
gyp
'
             
test
.
read
(
'
colon
/
test
.
gyp
'
)
.
replace
(
"
'
a
:
b
.
c
'
"
repr
(
abs_source
)
)
)
  
source_name
=
abs_source
  
abs_copies
=
os
.
path
.
abspath
(
'
colon
/
file
.
txt
'
)
  
test
.
write
(
'
colon
/
test
.
gyp
'
             
test
.
read
(
'
colon
/
test
.
gyp
'
)
.
replace
(
"
'
a
:
b
.
c
-
d
'
"
repr
(
abs_copies
)
)
)
  
copies_name
=
abs_copies
test
.
write
(
source_name
'
int
main
(
)
{
}
'
)
test
.
write
(
copies_name
'
foo
'
)
test
.
run_gyp
(
'
test
.
gyp
'
chdir
=
CHDIR
)
test
.
build
(
'
test
.
gyp
'
test
.
ALL
chdir
=
CHDIR
)
test
.
built_file_must_exist
(
os
.
path
.
basename
(
copies_name
)
chdir
=
CHDIR
)
test
.
pass_test
(
)
