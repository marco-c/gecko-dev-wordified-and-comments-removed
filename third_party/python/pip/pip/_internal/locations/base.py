import
functools
import
os
import
site
import
sys
import
sysconfig
import
typing
from
pip
.
_internal
.
utils
import
appdirs
from
pip
.
_internal
.
utils
.
virtualenv
import
running_under_virtualenv
USER_CACHE_DIR
=
appdirs
.
user_cache_dir
(
"
pip
"
)
site_packages
:
typing
.
Optional
[
str
]
=
sysconfig
.
get_path
(
"
purelib
"
)
def
get_major_minor_version
(
)
-
>
str
:
    
"
"
"
    
Return
the
major
-
minor
version
of
the
current
Python
as
a
string
e
.
g
.
    
"
3
.
7
"
or
"
3
.
10
"
.
    
"
"
"
    
return
"
{
}
.
{
}
"
.
format
(
*
sys
.
version_info
)
def
get_src_prefix
(
)
-
>
str
:
    
if
running_under_virtualenv
(
)
:
        
src_prefix
=
os
.
path
.
join
(
sys
.
prefix
"
src
"
)
    
else
:
        
try
:
            
src_prefix
=
os
.
path
.
join
(
os
.
getcwd
(
)
"
src
"
)
        
except
OSError
:
            
sys
.
exit
(
"
The
folder
you
are
executing
pip
from
can
no
longer
be
found
.
"
)
    
return
os
.
path
.
abspath
(
src_prefix
)
try
:
    
user_site
:
typing
.
Optional
[
str
]
=
site
.
getusersitepackages
(
)
except
AttributeError
:
    
user_site
=
site
.
USER_SITE
functools
.
lru_cache
(
maxsize
=
None
)
def
is_osx_framework
(
)
-
>
bool
:
    
return
bool
(
sysconfig
.
get_config_var
(
"
PYTHONFRAMEWORK
"
)
)
