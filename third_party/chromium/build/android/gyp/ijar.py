import
argparse
import
os
import
subprocess
import
sys
from
util
import
build_utils
_EMPTY_JAR_SIZE
=
22
def
main
(
)
:
  
if
len
(
sys
.
argv
)
!
=
4
:
    
raise
ValueError
(
'
unexpected
arguments
were
given
.
%
s
'
%
sys
.
argv
)
  
ijar_bin
in_jar
out_jar
=
sys
.
argv
[
1
]
sys
.
argv
[
2
]
sys
.
argv
[
3
]
  
with
build_utils
.
AtomicOutput
(
out_jar
)
as
f
:
    
if
os
.
path
.
getsize
(
in_jar
)
<
=
_EMPTY_JAR_SIZE
:
      
with
open
(
in_jar
'
rb
'
)
as
in_f
:
        
f
.
write
(
in_f
.
read
(
)
)
    
else
:
      
build_utils
.
CheckOutput
(
[
ijar_bin
in_jar
f
.
name
]
)
if
__name__
=
=
'
__main__
'
:
  
main
(
)
