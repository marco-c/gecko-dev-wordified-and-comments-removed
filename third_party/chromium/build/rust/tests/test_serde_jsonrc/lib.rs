use
serde_jsonrc
:
:
{
Result
Value
}
;
#
[
cxx
:
:
bridge
]
mod
ffi
{
extern
"
Rust
"
{
fn
serde_works
(
)
-
>
bool
;
}
}
fn
serde_works
(
)
-
>
bool
{
parses_ok
(
)
.
unwrap_or_default
(
)
}
fn
parses_ok
(
)
-
>
Result
<
bool
>
{
let
data
=
r
#
"
{
"
name
"
:
"
Slartibartfast
"
"
planets
"
:
[
"
Magrathea
"
]
}
"
#
;
let
v
:
Value
=
serde_jsonrc
:
:
from_str
(
data
)
?
;
Ok
(
v
[
"
name
"
]
=
=
"
Slartibartfast
"
&
&
v
[
"
planets
"
]
[
0
]
=
=
"
Magrathea
"
)
}
