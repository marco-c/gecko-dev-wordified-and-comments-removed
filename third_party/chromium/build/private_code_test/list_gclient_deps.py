import
argparse
import
os
import
pathlib
import
sys
_REPO_ROOT
=
pathlib
.
Path
(
__file__
)
.
resolve
(
)
.
parents
[
3
]
_ENTRIES_FILE
=
_REPO_ROOT
/
'
.
gclient_entries
'
def
main
(
)
:
  
parser
=
argparse
.
ArgumentParser
(
)
  
parser
.
add_argument
(
'
-
-
source
-
filter
'
required
=
True
)
  
parser
.
add_argument
(
'
-
-
output
'
required
=
True
)
  
args
=
parser
.
parse_args
(
)
  
source_filter
=
args
.
source_filter
  
try
:
    
text
=
_ENTRIES_FILE
.
read_text
(
)
    
result
=
{
}
    
exec
(
text
result
)
    
entries
=
result
[
'
entries
'
]
    
private_dirs
=
sorted
(
d
for
d
s
in
entries
.
items
(
)
                          
if
s
and
source_filter
in
s
)
  
except
Exception
as
e
:
    
private_dirs
=
[
        
'
#
ERROR
parsing
.
gclient_entries
'
        
str
(
e
)
'
'
'
File
was
:
'
text
    
]
  
pathlib
.
Path
(
args
.
output
)
.
write_text
(
'
\
n
'
.
join
(
private_dirs
)
+
'
\
n
'
)
if
__name__
=
=
'
__main__
'
:
  
main
(
)
