#
ifndef
LIB_JXL_RENDER_PIPELINE_SIMPLE_RENDER_PIPELINE_H_
#
define
LIB_JXL_RENDER_PIPELINE_SIMPLE_RENDER_PIPELINE_H_
#
include
<
jxl
/
memory_manager
.
h
>
#
include
<
cstddef
>
#
include
<
utility
>
#
include
<
vector
>
#
include
"
lib
/
jxl
/
base
/
rect
.
h
"
#
include
"
lib
/
jxl
/
base
/
status
.
h
"
#
include
"
lib
/
jxl
/
image
.
h
"
#
include
"
lib
/
jxl
/
render_pipeline
/
render_pipeline
.
h
"
namespace
jxl
{
class
SimpleRenderPipeline
:
public
RenderPipeline
{
std
:
:
vector
<
std
:
:
pair
<
ImageF
*
Rect
>
>
PrepareBuffers
(
size_t
group_id
size_t
thread_id
)
override
;
Status
ProcessBuffers
(
size_t
group_id
size_t
thread_id
)
override
;
Status
PrepareForThreadsInternal
(
size_t
num
bool
use_group_ids
)
override
;
std
:
:
vector
<
ImageF
>
channel_data_
;
size_t
processed_passes_
=
0
;
public
:
explicit
SimpleRenderPipeline
(
JxlMemoryManager
*
memory_manager
)
:
RenderPipeline
(
memory_manager
)
{
}
private
:
Rect
MakeChannelRect
(
size_t
group_id
size_t
channel
)
;
}
;
}
#
endif
