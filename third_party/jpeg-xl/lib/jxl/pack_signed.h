#
ifndef
LIB_JXL_PACK_H_
#
define
LIB_JXL_PACK_H_
#
include
<
cstddef
>
#
include
<
cstdint
>
#
include
"
lib
/
jxl
/
base
/
compiler_specific
.
h
"
namespace
jxl
{
constexpr
uint32_t
PackSigned
(
int32_t
value
)
JXL_NO_SANITIZE
(
"
unsigned
-
integer
-
overflow
"
)
{
return
(
static_cast
<
uint32_t
>
(
value
)
<
<
1
)
^
(
(
static_cast
<
uint32_t
>
(
~
value
)
>
>
31
)
-
1
)
;
}
constexpr
intptr_t
UnpackSigned
(
size_t
value
)
JXL_NO_SANITIZE
(
"
unsigned
-
integer
-
overflow
"
)
{
return
static_cast
<
intptr_t
>
(
(
value
>
>
1
)
^
(
(
(
~
value
)
&
1
)
-
1
)
)
;
}
}
#
endif
