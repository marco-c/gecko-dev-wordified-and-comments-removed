#
include
"
lib
/
jxl
/
luminance
.
h
"
#
include
"
lib
/
jxl
/
codec_in_out
.
h
"
namespace
jxl
{
void
SetIntensityTarget
(
CodecInOut
*
io
)
{
SetIntensityTarget
(
&
io
-
>
metadata
.
m
)
;
}
void
SetIntensityTarget
(
ImageMetadata
*
m
)
{
if
(
m
-
>
color_encoding
.
tf
.
IsPQ
(
)
)
{
m
-
>
SetIntensityTarget
(
10000
)
;
}
else
if
(
m
-
>
color_encoding
.
tf
.
IsHLG
(
)
)
{
m
-
>
SetIntensityTarget
(
1000
)
;
}
else
{
m
-
>
SetIntensityTarget
(
kDefaultIntensityTarget
)
;
}
}
}
