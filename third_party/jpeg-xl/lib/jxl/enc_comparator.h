#
ifndef
LIB_JXL_ENC_COMPARATOR_H_
#
define
LIB_JXL_ENC_COMPARATOR_H_
#
include
<
jxl
/
cms_interface
.
h
>
#
include
"
lib
/
jxl
/
base
/
data_parallel
.
h
"
#
include
"
lib
/
jxl
/
base
/
status
.
h
"
#
include
"
lib
/
jxl
/
image
.
h
"
#
include
"
lib
/
jxl
/
image_bundle
.
h
"
namespace
jxl
{
class
Comparator
{
public
:
virtual
~
Comparator
(
)
=
default
;
virtual
Status
SetReferenceImage
(
const
ImageBundle
&
ref
)
=
0
;
virtual
Status
CompareWith
(
const
ImageBundle
&
actual
ImageF
*
diffmap
float
*
score
)
=
0
;
virtual
float
GoodQualityScore
(
)
const
=
0
;
virtual
float
BadQualityScore
(
)
const
=
0
;
}
;
Status
ComputeScore
(
const
ImageBundle
&
rgb0
const
ImageBundle
&
rgb1
Comparator
*
comparator
const
JxlCmsInterface
&
cms
float
*
score
ImageF
*
diffmap
=
nullptr
ThreadPool
*
pool
=
nullptr
bool
ignore_alpha
=
false
)
;
}
#
endif
