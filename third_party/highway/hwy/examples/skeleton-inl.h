#
if
defined
(
HIGHWAY_HWY_EXAMPLES_SKELETON_INL_H_
)
=
=
\
defined
(
HWY_TARGET_TOGGLE
)
#
ifdef
HIGHWAY_HWY_EXAMPLES_SKELETON_INL_H_
#
undef
HIGHWAY_HWY_EXAMPLES_SKELETON_INL_H_
#
else
#
define
HIGHWAY_HWY_EXAMPLES_SKELETON_INL_H_
#
endif
#
include
"
hwy
/
highway
.
h
"
HWY_BEFORE_NAMESPACE
(
)
;
namespace
skeleton
{
namespace
HWY_NAMESPACE
{
namespace
hn
=
hwy
:
:
HWY_NAMESPACE
;
template
<
class
D
typename
T
>
HWY_MAYBE_UNUSED
void
MulAddLoop
(
const
D
d
const
T
*
HWY_RESTRICT
mul_array
const
T
*
HWY_RESTRICT
add_array
const
size_t
size
T
*
HWY_RESTRICT
x_array
)
{
for
(
size_t
i
=
0
;
i
<
size
;
i
+
=
hn
:
:
Lanes
(
d
)
)
{
const
auto
mul
=
hn
:
:
Load
(
d
mul_array
+
i
)
;
const
auto
add
=
hn
:
:
Load
(
d
add_array
+
i
)
;
auto
x
=
hn
:
:
Load
(
d
x_array
+
i
)
;
x
=
hn
:
:
MulAdd
(
mul
x
add
)
;
hn
:
:
Store
(
x
d
x_array
+
i
)
;
}
}
}
}
HWY_AFTER_NAMESPACE
(
)
;
#
endif
