#
ifndef
HIGHWAY_HWY_CONTRIB_SORT_SHARED_INL_H_
#
define
HIGHWAY_HWY_CONTRIB_SORT_SHARED_INL_H_
#
include
"
hwy
/
base
.
h
"
namespace
hwy
{
struct
SortConstants
{
#
if
HWY_COMPILER_MSVC
static
constexpr
size_t
kMaxCols
=
8
;
#
else
static
constexpr
size_t
kMaxCols
=
16
;
#
endif
static
constexpr
size_t
kMaxRowsLog2
=
4
;
static
constexpr
size_t
kMaxRows
=
size_t
{
1
}
<
<
kMaxRowsLog2
;
static
HWY_INLINE
size_t
BaseCaseNum
(
size_t
N
)
{
return
kMaxRows
*
HWY_MIN
(
N
kMaxCols
)
;
}
static
constexpr
size_t
kPartitionUnroll
=
4
;
static
HWY_INLINE
size_t
PartitionBufNum
(
size_t
N
)
{
return
(
2
*
kPartitionUnroll
+
1
)
*
N
;
}
static
HWY_INLINE
size_t
LanesPerChunk
(
size_t
sizeof_t
size_t
N
)
{
return
HWY_MAX
(
64
/
sizeof_t
N
)
;
}
}
;
}
#
endif
#
if
defined
(
HIGHWAY_HWY_CONTRIB_SORT_SHARED_TOGGLE
)
=
=
\
defined
(
HWY_TARGET_TOGGLE
)
#
ifdef
HIGHWAY_HWY_CONTRIB_SORT_SHARED_TOGGLE
#
undef
HIGHWAY_HWY_CONTRIB_SORT_SHARED_TOGGLE
#
else
#
define
HIGHWAY_HWY_CONTRIB_SORT_SHARED_TOGGLE
#
endif
#
include
"
hwy
/
highway
.
h
"
namespace
hwy
{
namespace
HWY_NAMESPACE
{
#
if
HWY_TARGET
=
=
HWY_RVV
&
&
0
template
<
typename
T
>
using
SortTag
=
ScalableTag
<
T
-
1
>
;
#
else
template
<
typename
T
>
using
SortTag
=
ScalableTag
<
T
>
;
#
endif
}
}
#
endif
