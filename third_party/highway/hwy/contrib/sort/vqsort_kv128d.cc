#
include
"
hwy
/
contrib
/
sort
/
vqsort
.
h
"
#
undef
HWY_TARGET_INCLUDE
#
define
HWY_TARGET_INCLUDE
"
hwy
/
contrib
/
sort
/
vqsort_kv128d
.
cc
"
/
/
NOLINT
#
include
"
hwy
/
foreach_target
.
h
"
#
include
"
hwy
/
contrib
/
sort
/
vqsort
-
inl
.
h
"
HWY_BEFORE_NAMESPACE
(
)
;
namespace
hwy
{
namespace
HWY_NAMESPACE
{
namespace
{
void
SortKV128Desc
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
num
)
{
#
if
HWY_TARGET
!
=
HWY_SCALAR
return
VQSortStatic
(
keys
num
SortDescending
(
)
)
;
#
else
(
void
)
keys
;
(
void
)
num
;
#
endif
}
void
PartialSortKV128Desc
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
num
const
size_t
k
)
{
#
if
HWY_TARGET
!
=
HWY_SCALAR
return
VQPartialSortStatic
(
keys
num
k
SortDescending
(
)
)
;
#
else
(
void
)
keys
;
(
void
)
num
;
(
void
)
k
;
#
endif
}
void
SelectKV128Desc
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
num
const
size_t
k
)
{
#
if
HWY_TARGET
!
=
HWY_SCALAR
return
VQSelectStatic
(
keys
num
k
SortDescending
(
)
)
;
#
else
(
void
)
keys
;
(
void
)
num
;
(
void
)
k
;
#
endif
}
}
}
}
HWY_AFTER_NAMESPACE
(
)
;
#
if
HWY_ONCE
namespace
hwy
{
namespace
{
HWY_EXPORT
(
SortKV128Desc
)
;
HWY_EXPORT
(
PartialSortKV128Desc
)
;
HWY_EXPORT
(
SelectKV128Desc
)
;
}
void
VQSort
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
n
SortDescending
)
{
HWY_DYNAMIC_DISPATCH
(
SortKV128Desc
)
(
keys
n
)
;
}
void
VQPartialSort
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
n
const
size_t
k
SortDescending
)
{
HWY_DYNAMIC_DISPATCH
(
PartialSortKV128Desc
)
(
keys
n
k
)
;
}
void
VQSelect
(
K64V64
*
HWY_RESTRICT
keys
const
size_t
n
const
size_t
k
SortDescending
)
{
HWY_DYNAMIC_DISPATCH
(
SelectKV128Desc
)
(
keys
n
k
)
;
}
void
Sorter
:
:
operator
(
)
(
K64V64
*
HWY_RESTRICT
keys
size_t
n
SortDescending
tag
)
const
{
VQSort
(
keys
n
tag
)
;
}
}
#
endif
