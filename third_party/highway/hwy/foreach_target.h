#
ifndef
HIGHWAY_HWY_FOREACH_TARGET_H_
#
define
HIGHWAY_HWY_FOREACH_TARGET_H_
#
include
"
hwy
/
detect_targets
.
h
"
#
ifdef
HWY_TARGET_TOGGLE
#
error
"
This
macro
must
not
be
defined
outside
foreach_target
.
h
"
#
endif
#
ifdef
HWY_HIGHWAY_INCLUDED
#
define
HWY_ALREADY_INCLUDED
#
undef
HWY_SET_MACROS_PER_TARGET
#
endif
#
undef
HWY_ONCE
#
define
HWY_ONCE
(
0
|
|
HWY_IDE
)
#
if
!
HWY_IDE
&
&
(
HWY_TARGETS
!
=
HWY_STATIC_TARGET
)
#
if
!
defined
(
HWY_TARGET_INCLUDE
)
#
error
"
>
1
target
enabled
=
>
define
HWY_TARGET_INCLUDE
before
foreach_target
.
h
"
#
endif
#
if
(
HWY_TARGETS
&
HWY_SSE2
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SSE2
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SSE2
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SSSE3
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SSSE3
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SSSE3
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SSE4
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SSE4
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SSE4
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX2
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX2
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX2
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX3
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX3
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX3
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX3_DL
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX3_DL
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX3_DL
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX3_ZEN4
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX3_ZEN4
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX3_ZEN4
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX3_SPR
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX3_SPR
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX3_SPR
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_AVX10_2
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_AVX10_2
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_AVX10_2
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_NEON_WITHOUT_AES
)
&
&
\
(
HWY_STATIC_TARGET
!
=
HWY_NEON_WITHOUT_AES
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_NEON_WITHOUT_AES
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_NEON
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_NEON
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_NEON
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_NEON_BF16
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_NEON_BF16
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_NEON_BF16
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SVE
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SVE
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SVE
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SVE2
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SVE2
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SVE2
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SVE_256
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SVE_256
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SVE_256
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SVE2_128
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SVE2_128
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SVE2_128
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_WASM_EMU256
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_WASM_EMU256
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_WASM_EMU256
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_WASM
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_WASM
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_WASM
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_PPC8
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_PPC8
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_PPC8
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_PPC9
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_PPC9
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_PPC9
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_PPC10
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_PPC10
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_PPC10
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_Z14
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_Z14
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_Z14
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_Z15
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_Z15
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_Z15
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_RVV
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_RVV
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_RVV
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_LSX
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_LSX
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_LSX
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_LASX
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_LASX
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_LASX
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_EMU128
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_EMU128
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_EMU128
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
if
(
HWY_TARGETS
&
HWY_SCALAR
)
&
&
(
HWY_STATIC_TARGET
!
=
HWY_SCALAR
)
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_SCALAR
#
include
HWY_TARGET_INCLUDE
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
endif
#
endif
#
undef
HWY_ONCE
#
define
HWY_ONCE
1
#
undef
HWY_TARGET
#
define
HWY_TARGET
HWY_STATIC_TARGET
#
ifdef
HWY_ALREADY_INCLUDED
#
ifdef
HWY_TARGET_TOGGLE
#
undef
HWY_TARGET_TOGGLE
#
else
#
define
HWY_TARGET_TOGGLE
#
endif
#
ifdef
HWY_SET_MACROS_PER_TARGET
#
undef
HWY_SET_MACROS_PER_TARGET
#
else
#
define
HWY_SET_MACROS_PER_TARGET
#
endif
#
endif
#
endif
