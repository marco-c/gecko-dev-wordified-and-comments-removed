import
os
import
sys
project
=
'
HIGHWAY
'
release
=
'
nightly
'
copyright
=
'
Apache
2
'
extensions
=
[
		
'
sphinx_rtd_theme
'
	    	
'
sphinx
.
ext
.
githubpages
'
	    	
'
sphinx
.
ext
.
autosectionlabel
'
	        
'
sphinx_tabs
.
tabs
'
]
templates_path
=
[
'
_templates
'
]
exclude_patterns
=
[
'
_build
'
'
Thumbs
.
db
'
'
.
DS_Store
'
]
html_theme
=
'
sphinx_rtd_theme
'
html_static_path
=
[
'
_static
'
]
html_logo
=
'
images
/
logo
.
png
'
html_favicon
=
'
images
/
logo
-
32x32
.
ico
'
html_theme_options
=
{
    
'
logo_only
'
:
False
    
'
display_version
'
:
True
}
top_doc
=
'
index
'
html_extra_path
=
[
"
_static
/
css
"
]
html_css_files
=
[
"
css
/
toggle
.
css
"
]
html_js_files
=
[
"
js
/
toggle
.
js
"
]
try
:
   
html_context
except
NameError
:
   
html_context
=
dict
(
)
html_context
[
'
display_lower_left
'
]
=
True
if
'
REPO_NAME
'
in
os
.
environ
:
   
REPO_NAME
=
os
.
environ
[
'
REPO_NAME
'
]
else
:
   
REPO_NAME
=
'
'
if
'
current_language
'
in
os
.
environ
:
   
current_language
=
os
.
environ
[
'
current_language
'
]
else
:
   
current_language
=
'
en
'
html_context
[
'
current_language
'
]
=
current_language
from
git
import
Repo
repo
=
Repo
(
search_parent_directories
=
True
)
if
'
current_version
'
in
os
.
environ
:
   
current_version
=
os
.
environ
[
'
current_version
'
]
else
:
   
current_version
=
repo
.
active_branch
.
name
html_context
[
'
current_version
'
]
=
current_version
html_context
[
'
version
'
]
=
current_version
html_context
[
'
languages
'
]
=
[
(
'
en
'
'
/
'
+
REPO_NAME
+
'
/
en
/
'
+
current_version
+
'
/
'
)
]
languages
=
[
lang
.
name
for
lang
in
os
.
scandir
(
'
locales
'
)
if
lang
.
is_dir
(
)
]
for
lang
in
languages
:
   
html_context
[
'
languages
'
]
.
append
(
(
lang
'
/
'
+
REPO_NAME
+
'
/
'
+
lang
+
'
/
'
+
current_version
+
'
/
'
)
)
html_context
[
'
versions
'
]
=
list
(
)
versions
=
[
branch
.
name
for
branch
in
repo
.
branches
]
for
version
in
versions
:
   
html_context
[
'
versions
'
]
.
append
(
(
version
'
/
'
+
REPO_NAME
+
'
/
'
+
current_language
+
'
/
'
+
version
+
'
/
'
)
)
rinoh_documents
=
[
(
 
top_doc
 
'
target
'
 
project
+
'
Documentation
'
 
'
'
+
copyright
)
]
today_fmt
=
"
%
B
%
d
%
Y
"
epub_basename
=
'
target
'
html_context
[
'
downloads
'
]
=
list
(
)
html_context
[
'
downloads
'
]
.
append
(
(
'
epub
'
'
/
'
+
REPO_NAME
+
'
/
'
+
current_language
+
'
/
'
+
current_version
+
'
/
'
+
REPO_NAME
+
'
_
'
+
current_language
+
'
_
'
+
current_version
+
'
.
epub
'
)
)
html_context
[
'
display_github
'
]
=
True
html_context
[
'
github_user
'
]
=
'
google
'
html_context
[
'
github_repo
'
]
=
REPO_NAME
html_context
[
'
github_version
'
]
=
'
master
/
docs
/
'
