#
include
"
absl
/
debugging
/
internal
/
stack_consumption
.
h
"
#
ifdef
ABSL_INTERNAL_HAVE_DEBUGGING_STACK_CONSUMPTION
#
include
<
string
.
h
>
#
include
"
gtest
/
gtest
.
h
"
#
include
"
absl
/
log
/
log
.
h
"
namespace
absl
{
ABSL_NAMESPACE_BEGIN
namespace
debugging_internal
{
namespace
{
static
void
SimpleSignalHandler
(
int
signo
)
{
char
buf
[
100
]
;
memset
(
buf
'
a
'
sizeof
(
buf
)
)
;
if
(
signo
=
=
0
)
{
LOG
(
INFO
)
<
<
static_cast
<
void
*
>
(
buf
)
;
}
}
TEST
(
SignalHandlerStackConsumptionTest
MeasuresStackConsumption
)
{
EXPECT_GE
(
GetSignalHandlerStackConsumption
(
SimpleSignalHandler
)
100
)
;
}
}
}
ABSL_NAMESPACE_END
}
#
endif
