#
include
<
cassert
>
#
include
"
gtest
/
gtest
.
h
"
#
include
"
absl
/
base
/
nullability
.
h
"
ABSL_POINTERS_DEFAULT_NONNULL
namespace
{
void
FuncWithDefaultNonnullArg
(
int
*
)
{
}
template
<
typename
T
>
void
FuncWithDeducedDefaultNonnullArg
(
T
*
)
{
}
TEST
(
DefaultNonnullTest
NonnullArgument
)
{
int
var
=
0
;
FuncWithDefaultNonnullArg
(
&
var
)
;
FuncWithDeducedDefaultNonnullArg
<
int
>
(
&
var
)
;
}
int
*
FuncWithDefaultNonnullReturn
(
)
{
static
int
var
=
0
;
return
&
var
;
}
TEST
(
DefaultNonnullTest
NonnullReturn
)
{
auto
var
=
FuncWithDefaultNonnullReturn
(
)
;
(
void
)
var
;
}
}
