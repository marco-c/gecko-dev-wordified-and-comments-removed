#
ifndef
PIPEWIRE_RESOURCE_H
#
define
PIPEWIRE_RESOURCE_H
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
#
include
<
spa
/
utils
/
hook
.
h
>
struct
pw_resource
;
#
include
<
pipewire
/
impl
-
client
.
h
>
struct
pw_resource_events
{
#
define
PW_VERSION_RESOURCE_EVENTS
0
uint32_t
version
;
void
(
*
destroy
)
(
void
*
data
)
;
void
(
*
pong
)
(
void
*
data
int
seq
)
;
void
(
*
error
)
(
void
*
data
int
seq
int
res
const
char
*
message
)
;
}
;
struct
pw_resource
*
pw_resource_new
(
struct
pw_impl_client
*
client
uint32_t
id
uint32_t
permissions
const
char
*
type
uint32_t
version
size_t
user_data_size
)
;
void
pw_resource_destroy
(
struct
pw_resource
*
resource
)
;
void
pw_resource_remove
(
struct
pw_resource
*
resource
)
;
struct
pw_impl_client
*
pw_resource_get_client
(
struct
pw_resource
*
resource
)
;
uint32_t
pw_resource_get_id
(
struct
pw_resource
*
resource
)
;
uint32_t
pw_resource_get_permissions
(
struct
pw_resource
*
resource
)
;
const
char
*
pw_resource_get_type
(
struct
pw_resource
*
resource
uint32_t
*
version
)
;
struct
pw_protocol
*
pw_resource_get_protocol
(
struct
pw_resource
*
resource
)
;
void
*
pw_resource_get_user_data
(
struct
pw_resource
*
resource
)
;
void
pw_resource_add_listener
(
struct
pw_resource
*
resource
struct
spa_hook
*
listener
const
struct
pw_resource_events
*
events
void
*
data
)
;
void
pw_resource_add_object_listener
(
struct
pw_resource
*
resource
struct
spa_hook
*
listener
const
void
*
funcs
void
*
data
)
;
int
pw_resource_ping
(
struct
pw_resource
*
resource
int
seq
)
;
void
pw_resource_ref
(
struct
pw_resource
*
resource
)
;
void
pw_resource_unref
(
struct
pw_resource
*
resource
)
;
int
pw_resource_set_bound_id
(
struct
pw_resource
*
resource
uint32_t
global_id
)
;
uint32_t
pw_resource_get_bound_id
(
struct
pw_resource
*
resource
)
;
void
pw_resource_error
(
struct
pw_resource
*
resource
int
res
const
char
*
error
)
;
void
pw_resource_errorf
(
struct
pw_resource
*
resource
int
res
const
char
*
error
.
.
.
)
SPA_PRINTF_FUNC
(
3
4
)
;
void
pw_resource_errorf_id
(
struct
pw_resource
*
resource
uint32_t
id
int
res
const
char
*
error
.
.
.
)
SPA_PRINTF_FUNC
(
4
5
)
;
struct
spa_hook_list
*
pw_resource_get_object_listeners
(
struct
pw_resource
*
resource
)
;
const
struct
pw_protocol_marshal
*
pw_resource_get_marshal
(
struct
pw_resource
*
resource
)
;
int
pw_resource_install_marshal
(
struct
pw_resource
*
resource
bool
implementor
)
;
#
define
pw_resource_notify
(
r
type
event
version
.
.
.
)
\
spa_hook_list_call
(
pw_resource_get_object_listeners
(
r
)
\
type
event
version
#
#
__VA_ARGS__
)
#
define
pw_resource_call
(
r
type
method
version
.
.
.
)
\
spa_interface_call
(
(
struct
spa_interface
*
)
r
\
type
method
version
#
#
__VA_ARGS__
)
#
define
pw_resource_call_res
(
r
type
method
version
.
.
.
)
\
(
{
\
int
_res
=
-
ENOTSUP
;
\
spa_interface_call_res
(
(
struct
spa_interface
*
)
r
\
type
_res
method
version
#
#
__VA_ARGS__
)
;
\
_res
;
\
}
)
#
ifdef
__cplusplus
}
#
endif
#
endif
