#
include
"
components
/
zucchini
/
ensemble_matcher
.
h
"
#
include
<
limits
>
#
include
"
base
/
containers
/
cxx20_erase
.
h
"
#
include
"
base
/
logging
.
h
"
#
include
"
base
/
ranges
/
algorithm
.
h
"
namespace
zucchini
{
EnsembleMatcher
:
:
EnsembleMatcher
(
)
=
default
;
EnsembleMatcher
:
:
~
EnsembleMatcher
(
)
=
default
;
void
EnsembleMatcher
:
:
Trim
(
)
{
auto
is_match_dex
=
[
]
(
const
ElementMatch
&
match
)
{
return
match
.
exe_type
(
)
=
=
kExeTypeDex
;
}
;
auto
num_dex
=
base
:
:
ranges
:
:
count_if
(
matches_
is_match_dex
)
;
if
(
num_dex
>
1
)
{
LOG
(
WARNING
)
<
<
"
Found
"
<
<
num_dex
<
<
"
DEX
:
Ignoring
all
.
"
;
base
:
:
EraseIf
(
matches_
is_match_dex
)
;
}
}
}
