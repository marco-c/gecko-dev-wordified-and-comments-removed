"
use
strict
"
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
results
:
Cr
}
=
Components
;
function
downloadFile
(
url
decodeContentsAsBase64
)
{
let
req
=
Cc
[
"
mozilla
.
org
/
xmlextras
/
xmlhttprequest
;
1
"
]
.
createInstance
(
Ci
.
nsIXMLHttpRequest
)
;
req
.
open
(
"
GET
"
url
false
)
;
try
{
req
.
send
(
)
;
}
catch
(
e
)
{
throw
new
Error
(
ERROR
:
problem
downloading
'
{
url
}
'
:
{
e
}
)
;
}
if
(
req
.
status
!
=
200
)
{
throw
new
Error
(
ERROR
:
problem
downloading
'
{
url
}
'
:
status
{
req
.
status
}
)
;
}
if
(
!
decodeContentsAsBase64
)
{
return
req
.
responseText
;
}
try
{
return
atob
(
req
.
responseText
)
;
}
catch
(
e
)
{
throw
new
Error
(
ERROR
:
could
not
decode
data
as
base64
from
'
{
url
}
'
:
+
e
)
;
}
}
function
stripComments
(
input
)
{
return
input
.
replace
(
/
^
(
\
s
*
)
?
\
/
\
/
[
^
\
n
]
*
\
n
/
mg
"
"
)
;
}
this
.
PSMToolUtils
=
{
downloadFile
stripComments
}
;
this
.
EXPORTED_SYMBOLS
=
[
"
PSMToolUtils
"
]
;
