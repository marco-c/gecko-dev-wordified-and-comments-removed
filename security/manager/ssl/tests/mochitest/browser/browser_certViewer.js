"
use
strict
"
;
var
gBugWindow
;
function
onLoad
(
)
{
gBugWindow
.
removeEventListener
(
"
load
"
onLoad
)
;
gBugWindow
.
addEventListener
(
"
unload
"
onUnload
)
;
gBugWindow
.
close
(
)
;
}
function
onUnload
(
)
{
gBugWindow
.
removeEventListener
(
"
unload
"
onUnload
)
;
window
.
focus
(
)
;
finish
(
)
;
}
function
test
(
)
{
waitForExplicitFinish
(
)
;
let
certdb
=
Cc
[
"
mozilla
.
org
/
security
/
x509certdb
;
1
"
]
.
getService
(
Ci
.
nsIX509CertDB
)
;
let
certList
=
certdb
.
getCerts
(
)
;
let
enumerator
=
certList
.
getEnumerator
(
)
;
ok
(
enumerator
.
hasMoreElements
(
)
"
we
have
at
least
one
certificate
"
)
;
let
cert
=
enumerator
.
getNext
(
)
.
QueryInterface
(
Ci
.
nsIX509Cert
)
;
ok
(
cert
"
found
a
certificate
to
look
at
"
)
;
info
(
"
looking
at
certificate
with
nickname
"
+
cert
.
nickname
)
;
let
array
=
Cc
[
"
mozilla
.
org
/
array
;
1
"
]
.
createInstance
(
Ci
.
nsIMutableArray
)
;
array
.
appendElement
(
cert
false
)
;
let
params
=
Cc
[
"
mozilla
.
org
/
embedcomp
/
dialogparam
;
1
"
]
.
createInstance
(
Ci
.
nsIDialogParamBlock
)
;
params
.
objects
=
array
;
gBugWindow
=
window
.
openDialog
(
"
chrome
:
/
/
pippki
/
content
/
certViewer
.
xul
"
"
"
"
"
params
)
;
gBugWindow
.
addEventListener
(
"
load
"
onLoad
)
;
}
