use
bindgen
;
use
std
:
:
env
;
use
std
:
:
path
:
:
PathBuf
;
fn
main
(
)
{
let
target_os
=
env
:
:
var
(
"
CARGO_CFG_TARGET_OS
"
)
.
expect
(
"
CARGO_CFG_TARGET_OS
unset
?
"
)
;
if
target_os
=
=
"
windows
"
{
let
bindings
=
bindgen
:
:
Builder
:
:
default
(
)
.
header
(
"
src
/
wrapper
-
windows
.
h
"
)
.
whitelist_function
(
"
NCryptSignHash
"
)
.
generate
(
)
.
expect
(
"
Unable
to
generate
bindings
"
)
;
let
out_path
=
PathBuf
:
:
from
(
env
:
:
var
(
"
OUT_DIR
"
)
.
expect
(
"
OUT_DIR
unset
?
"
)
)
;
bindings
.
write_to_file
(
out_path
.
join
(
"
bindings
.
rs
"
)
)
.
expect
(
"
Couldn
'
t
write
bindings
"
)
;
}
}
