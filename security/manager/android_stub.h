#
ifndef
ANDROID_STUB_H
#
define
ANDROID_STUB_H
#
define
_SYS_SYSINFO_H_
#
include
<
sys
/
cdefs
.
h
>
#
include
<
sys
/
resource
.
h
>
#
include
<
linux
/
kernel
.
h
>
#
include
<
unistd
.
h
>
#
ifndef
ANDROID_VERSION
#
include
<
android
/
api
-
level
.
h
>
#
define
ANDROID_VERSION
__ANDROID_API__
#
endif
__attribute__
(
(
unused
)
)
static
int
getdtablesize_stub
(
void
)
{
struct
rlimit
r
;
if
(
getrlimit
(
RLIMIT_NOFILE
&
r
)
<
0
)
{
return
sysconf
(
_SC_OPEN_MAX
)
;
}
return
r
.
rlim_cur
;
}
#
define
getdtablesize
(
)
getdtablesize_stub
(
)
#
if
ANDROID_VERSION
<
21
#
define
RTLD_NOLOAD
0
#
endif
#
define
sysinfo
(
foo
)
-
1
#
endif
