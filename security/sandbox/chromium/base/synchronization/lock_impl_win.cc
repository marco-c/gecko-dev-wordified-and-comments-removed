#
include
"
base
/
synchronization
/
lock_impl
.
h
"
#
include
"
base
/
debug
/
activity_tracker
.
h
"
namespace
base
{
namespace
internal
{
LockImpl
:
:
LockImpl
(
)
:
native_handle_
(
SRWLOCK_INIT
)
{
}
LockImpl
:
:
~
LockImpl
(
)
=
default
;
bool
LockImpl
:
:
Try
(
)
{
return
!
!
:
:
TryAcquireSRWLockExclusive
(
&
native_handle_
)
;
}
void
LockImpl
:
:
Lock
(
)
{
base
:
:
debug
:
:
ScopedLockAcquireActivity
lock_activity
(
this
)
;
:
:
AcquireSRWLockExclusive
(
&
native_handle_
)
;
}
void
LockImpl
:
:
Unlock
(
)
{
:
:
ReleaseSRWLockExclusive
(
&
native_handle_
)
;
}
}
}
