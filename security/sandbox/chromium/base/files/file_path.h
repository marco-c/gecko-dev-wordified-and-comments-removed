#
ifndef
BASE_FILES_FILE_PATH_H_
#
define
BASE_FILES_FILE_PATH_H_
#
include
<
stddef
.
h
>
#
include
<
iosfwd
>
#
include
<
string
>
#
include
<
vector
>
#
include
"
base
/
base_export
.
h
"
#
include
"
base
/
compiler_specific
.
h
"
#
include
"
base
/
macros
.
h
"
#
include
"
base
/
strings
/
string16
.
h
"
#
include
"
base
/
strings
/
string_piece
.
h
"
#
include
"
build
/
build_config
.
h
"
#
if
defined
(
OS_WIN
)
#
define
FILE_PATH_USES_DRIVE_LETTERS
#
define
FILE_PATH_USES_WIN_SEPARATORS
#
endif
#
if
defined
(
OS_POSIX
)
#
define
PRIsFP
"
s
"
#
elif
defined
(
OS_WIN
)
#
define
PRIsFP
"
ls
"
#
endif
namespace
base
{
class
Pickle
;
class
PickleIterator
;
class
PickleSizer
;
class
BASE_EXPORT
FilePath
{
public
:
#
if
defined
(
OS_POSIX
)
typedef
std
:
:
string
StringType
;
#
elif
defined
(
OS_WIN
)
typedef
std
:
:
wstring
StringType
;
#
endif
typedef
BasicStringPiece
<
StringType
>
StringPieceType
;
typedef
StringType
:
:
value_type
CharType
;
static
const
CharType
kSeparators
[
]
;
static
const
size_t
kSeparatorsLength
;
static
const
CharType
kCurrentDirectory
[
]
;
static
const
CharType
kParentDirectory
[
]
;
static
const
CharType
kExtensionSeparator
;
FilePath
(
)
;
FilePath
(
const
FilePath
&
that
)
;
explicit
FilePath
(
StringPieceType
path
)
;
~
FilePath
(
)
;
FilePath
&
operator
=
(
const
FilePath
&
that
)
;
FilePath
(
FilePath
&
&
that
)
noexcept
;
FilePath
&
operator
=
(
FilePath
&
&
that
)
;
bool
operator
=
=
(
const
FilePath
&
that
)
const
;
bool
operator
!
=
(
const
FilePath
&
that
)
const
;
bool
operator
<
(
const
FilePath
&
that
)
const
{
return
path_
<
that
.
path_
;
}
const
StringType
&
value
(
)
const
{
return
path_
;
}
bool
empty
(
)
const
{
return
path_
.
empty
(
)
;
}
void
clear
(
)
{
path_
.
clear
(
)
;
}
static
bool
IsSeparator
(
CharType
character
)
;
void
GetComponents
(
std
:
:
vector
<
FilePath
:
:
StringType
>
*
components
)
const
;
bool
IsParent
(
const
FilePath
&
child
)
const
;
bool
AppendRelativePath
(
const
FilePath
&
child
FilePath
*
path
)
const
;
FilePath
DirName
(
)
const
WARN_UNUSED_RESULT
;
FilePath
BaseName
(
)
const
WARN_UNUSED_RESULT
;
StringType
Extension
(
)
const
WARN_UNUSED_RESULT
;
StringType
FinalExtension
(
)
const
WARN_UNUSED_RESULT
;
FilePath
RemoveExtension
(
)
const
WARN_UNUSED_RESULT
;
FilePath
RemoveFinalExtension
(
)
const
WARN_UNUSED_RESULT
;
FilePath
InsertBeforeExtension
(
StringPieceType
suffix
)
const
WARN_UNUSED_RESULT
;
FilePath
InsertBeforeExtensionASCII
(
StringPiece
suffix
)
const
WARN_UNUSED_RESULT
;
FilePath
AddExtension
(
StringPieceType
extension
)
const
WARN_UNUSED_RESULT
;
FilePath
ReplaceExtension
(
StringPieceType
extension
)
const
WARN_UNUSED_RESULT
;
bool
MatchesExtension
(
StringPieceType
extension
)
const
;
FilePath
Append
(
StringPieceType
component
)
const
WARN_UNUSED_RESULT
;
FilePath
Append
(
const
FilePath
&
component
)
const
WARN_UNUSED_RESULT
;
FilePath
AppendASCII
(
StringPiece
component
)
const
WARN_UNUSED_RESULT
;
bool
IsAbsolute
(
)
const
;
bool
EndsWithSeparator
(
)
const
WARN_UNUSED_RESULT
;
FilePath
AsEndingWithSeparator
(
)
const
WARN_UNUSED_RESULT
;
FilePath
StripTrailingSeparators
(
)
const
WARN_UNUSED_RESULT
;
bool
ReferencesParent
(
)
const
;
string16
LossyDisplayName
(
)
const
;
std
:
:
string
MaybeAsASCII
(
)
const
;
std
:
:
string
AsUTF8Unsafe
(
)
const
;
string16
AsUTF16Unsafe
(
)
const
;
static
FilePath
FromUTF8Unsafe
(
StringPiece
utf8
)
;
static
FilePath
FromUTF16Unsafe
(
StringPiece16
utf16
)
;
void
GetSizeForPickle
(
PickleSizer
*
sizer
)
const
;
void
WriteToPickle
(
Pickle
*
pickle
)
const
;
bool
ReadFromPickle
(
PickleIterator
*
iter
)
;
FilePath
NormalizePathSeparators
(
)
const
;
FilePath
NormalizePathSeparatorsTo
(
CharType
separator
)
const
;
static
int
CompareIgnoreCase
(
StringPieceType
string1
StringPieceType
string2
)
;
static
bool
CompareEqualIgnoreCase
(
StringPieceType
string1
StringPieceType
string2
)
{
return
CompareIgnoreCase
(
string1
string2
)
=
=
0
;
}
static
bool
CompareLessIgnoreCase
(
StringPieceType
string1
StringPieceType
string2
)
{
return
CompareIgnoreCase
(
string1
string2
)
<
0
;
}
#
if
defined
(
OS_MACOSX
)
static
StringType
GetHFSDecomposedForm
(
StringPieceType
string
)
;
static
int
HFSFastUnicodeCompare
(
StringPieceType
string1
StringPieceType
string2
)
;
#
endif
#
if
defined
(
OS_ANDROID
)
bool
IsContentUri
(
)
const
;
#
endif
private
:
void
StripTrailingSeparatorsInternal
(
)
;
StringType
path_
;
}
;
BASE_EXPORT
std
:
:
ostream
&
operator
<
<
(
std
:
:
ostream
&
out
const
FilePath
&
file_path
)
;
}
#
if
defined
(
OS_POSIX
)
#
define
FILE_PATH_LITERAL
(
x
)
x
#
define
PRFilePath
"
s
"
#
elif
defined
(
OS_WIN
)
#
define
FILE_PATH_LITERAL
(
x
)
L
#
#
x
#
define
PRFilePath
"
ls
"
#
endif
namespace
std
{
template
<
>
struct
hash
<
base
:
:
FilePath
>
{
typedef
base
:
:
FilePath
argument_type
;
typedef
std
:
:
size_t
result_type
;
result_type
operator
(
)
(
argument_type
const
&
f
)
const
{
return
hash
<
base
:
:
FilePath
:
:
StringType
>
(
)
(
f
.
value
(
)
)
;
}
}
;
}
#
endif
