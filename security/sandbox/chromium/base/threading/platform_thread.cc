#
include
"
base
/
threading
/
platform_thread
.
h
"
#
include
<
atomic
>
#
include
<
memory
>
#
include
"
base
/
feature_list
.
h
"
namespace
base
{
namespace
{
const
Feature
kThreadPrioritiesFeature
{
"
ThreadPriorities
"
FEATURE_ENABLED_BY_DEFAULT
}
;
std
:
:
atomic
<
bool
>
g_use_thread_priorities
(
true
)
;
}
void
PlatformThread
:
:
SetCurrentThreadPriority
(
ThreadPriority
priority
)
{
if
(
g_use_thread_priorities
.
load
(
)
)
SetCurrentThreadPriorityImpl
(
priority
)
;
}
namespace
internal
{
void
InitializeThreadPrioritiesFeature
(
)
{
if
(
FeatureList
:
:
GetInstance
(
)
&
&
!
FeatureList
:
:
IsEnabled
(
kThreadPrioritiesFeature
)
)
{
g_use_thread_priorities
.
store
(
false
)
;
}
}
}
}
