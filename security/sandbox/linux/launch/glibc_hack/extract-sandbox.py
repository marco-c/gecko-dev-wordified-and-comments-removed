import
re
with
open
(
"
sandbox
/
linux
/
services
/
namespace_sandbox
.
cc
"
)
as
fd
:
    
content
=
fd
.
read
(
)
match
=
re
.
search
(
    
r
"
#
if
defined
\
(
LIBC_GLIBC
\
)
.
*
?
#
endif
/
/
defined
\
(
LIBC_GLIBC
\
)
"
content
re
.
DOTALL
)
if
not
match
:
    
raise
ValueError
(
"
Invalid
patch
extraction
pattern
"
)
patch
=
match
.
group
(
)
with
open
(
"
namespace_sandbox
.
inc
"
"
w
"
)
as
fd
:
    
fd
.
write
(
patch
)
