#
include
"
RemoteSandboxBrokerProcessParent
.
h
"
#
include
"
nsIRunnable
.
h
"
#
include
<
windows
.
h
>
using
mozilla
:
:
ipc
:
:
GeckoChildProcessHost
;
namespace
mozilla
{
RemoteSandboxBrokerProcessParent
:
:
RemoteSandboxBrokerProcessParent
(
)
:
GeckoChildProcessHost
(
GeckoProcessType_RemoteSandboxBroker
)
{
MOZ_COUNT_CTOR
(
RemoteSandboxBrokerProcessParent
)
;
}
RemoteSandboxBrokerProcessParent
:
:
~
RemoteSandboxBrokerProcessParent
(
)
{
MOZ_COUNT_DTOR
(
RemoteSandboxBrokerProcessParent
)
;
}
RefPtr
<
RemoteSandboxBrokerProcessParent
:
:
HandlePromise
>
RemoteSandboxBrokerProcessParent
:
:
AsyncLaunch
(
)
{
if
(
!
GeckoChildProcessHost
:
:
AsyncLaunch
(
)
)
{
return
HandlePromise
:
:
CreateAndReject
(
GeckoChildProcessHost
:
:
LaunchError
{
}
__func__
)
;
}
return
WhenProcessHandleReady
(
)
;
}
}
