#
include
"
RemoteSandboxBrokerProcessParent
.
h
"
#
include
"
nsIRunnable
.
h
"
#
include
<
windows
.
h
>
using
mozilla
:
:
ipc
:
:
GeckoChildProcessHost
;
using
mozilla
:
:
ipc
:
:
LaunchError
;
using
mozilla
:
:
ipc
:
:
ProcessHandlePromise
;
namespace
mozilla
{
RemoteSandboxBrokerProcessParent
:
:
RemoteSandboxBrokerProcessParent
(
)
:
GeckoChildProcessHost
(
GeckoProcessType_RemoteSandboxBroker
)
{
MOZ_COUNT_CTOR
(
RemoteSandboxBrokerProcessParent
)
;
}
RemoteSandboxBrokerProcessParent
:
:
~
RemoteSandboxBrokerProcessParent
(
)
{
MOZ_COUNT_DTOR
(
RemoteSandboxBrokerProcessParent
)
;
}
RefPtr
<
ProcessHandlePromise
>
RemoteSandboxBrokerProcessParent
:
:
AsyncLaunch
(
)
{
if
(
!
GeckoChildProcessHost
:
:
AsyncLaunch
(
)
)
{
return
ProcessHandlePromise
:
:
CreateAndReject
(
LaunchError
{
}
__func__
)
;
}
return
WhenProcessHandleReady
(
)
;
}
}
