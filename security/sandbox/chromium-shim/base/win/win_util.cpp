#
include
"
base
/
win
/
win_util
.
h
"
#
include
"
base
/
logging
.
h
"
#
include
"
base
/
strings
/
string_util
.
h
"
namespace
base
{
namespace
win
{
std
:
:
wstring
GetWindowObjectName
(
HANDLE
handle
)
{
std
:
:
wstring
object_name
;
DWORD
size
=
0
;
:
:
GetUserObjectInformation
(
handle
UOI_NAME
nullptr
0
&
size
)
;
if
(
!
size
)
{
DPCHECK
(
false
)
;
return
object_name
;
}
LOG_ASSERT
(
size
%
sizeof
(
wchar_t
)
=
=
0u
)
;
if
(
!
:
:
GetUserObjectInformation
(
handle
UOI_NAME
WriteInto
(
&
object_name
size
/
sizeof
(
wchar_t
)
)
size
&
size
)
)
{
DPCHECK
(
false
)
;
}
return
object_name
;
}
}
}
