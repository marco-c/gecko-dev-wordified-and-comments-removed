#
include
"
BroadcastChannelChild
.
h
"
#
include
"
BroadcastChannel
.
h
"
namespace
mozilla
{
using
namespace
ipc
;
namespace
dom
{
BroadcastChannelChild
:
:
BroadcastChannelChild
(
)
:
mBC
(
nullptr
)
mActorDestroyed
(
false
)
{
}
BroadcastChannelChild
:
:
~
BroadcastChannelChild
(
)
{
MOZ_ASSERT
(
!
mBC
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
BroadcastChannelChild
:
:
RecvNotify
(
const
MessageData
&
aData
)
{
if
(
!
mBC
)
{
return
IPC_OK
(
)
;
}
mBC
-
>
MessageReceived
(
aData
)
;
return
IPC_OK
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
BroadcastChannelChild
:
:
RecvRefMessageDelivered
(
const
nsID
&
aMessageID
const
uint32_t
&
aOtherBCs
)
{
if
(
!
mBC
)
{
return
IPC_OK
(
)
;
}
mBC
-
>
MessageDelivered
(
aMessageID
aOtherBCs
)
;
return
IPC_OK
(
)
;
}
void
BroadcastChannelChild
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
mActorDestroyed
=
true
;
}
}
}
