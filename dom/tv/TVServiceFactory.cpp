#
include
"
TVServiceFactory
.
h
"
#
ifdef
MOZ_WIDGET_GONK
#
include
"
gonk
/
TVGonkService
.
h
"
#
endif
#
include
"
ipc
/
TVIPCService
.
h
"
#
include
"
nsITVService
.
h
"
#
include
"
nsITVSimulatorService
.
h
"
#
include
"
nsServiceManagerUtils
.
h
"
namespace
mozilla
{
namespace
dom
{
already_AddRefed
<
nsITVService
>
TVServiceFactory
:
:
AutoCreateTVService
(
)
{
nsCOMPtr
<
nsITVService
>
service
;
if
(
GeckoProcessType_Default
!
=
XRE_GetProcessType
(
)
)
{
service
=
new
TVIPCService
(
)
;
return
service
.
forget
(
)
;
}
#
ifdef
MOZ_WIDGET_GONK
service
=
new
TVGonkService
(
)
;
#
endif
if
(
!
service
)
{
service
=
do_CreateInstance
(
TV_SIMULATOR_SERVICE_CONTRACTID
)
;
}
return
service
.
forget
(
)
;
}
}
}
