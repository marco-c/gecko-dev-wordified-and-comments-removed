#
ifndef
mozilla_KeyframeUtils_h
#
define
mozilla_KeyframeUtils_h
#
include
"
mozilla
/
KeyframeEffectParams
.
h
"
#
include
"
nsCSSPropertyID
.
h
"
#
include
"
nsTArrayForwardDeclare
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
struct
JSContext
;
class
JSObject
;
class
nsIDocument
;
class
ComputedStyle
;
struct
RawServoDeclarationBlock
;
namespace
mozilla
{
struct
AnimationProperty
;
enum
class
CSSPseudoElementType
:
uint8_t
;
class
ErrorResult
;
struct
Keyframe
;
struct
PropertyStyleAnimationValuePair
;
namespace
dom
{
class
Element
;
}
}
namespace
mozilla
{
using
ComputedKeyframeValues
=
nsTArray
<
PropertyStyleAnimationValuePair
>
;
class
KeyframeUtils
{
public
:
static
nsTArray
<
Keyframe
>
GetKeyframesFromObject
(
JSContext
*
aCx
nsIDocument
*
aDocument
JS
:
:
Handle
<
JSObject
*
>
aFrames
ErrorResult
&
aRv
)
;
static
void
DistributeKeyframes
(
nsTArray
<
Keyframe
>
&
aKeyframes
)
;
static
nsTArray
<
AnimationProperty
>
GetAnimationPropertiesFromKeyframes
(
const
nsTArray
<
Keyframe
>
&
aKeyframes
dom
:
:
Element
*
aElement
const
ComputedStyle
*
aStyle
dom
:
:
CompositeOperation
aEffectComposite
)
;
static
bool
IsAnimatableProperty
(
nsCSSPropertyID
aProperty
)
;
static
dom
:
:
CompositeOperationOrAuto
ToCompositeOperationOrAuto
(
const
Maybe
<
dom
:
:
CompositeOperation
>
&
aComposite
)
{
return
aComposite
?
static_cast
<
dom
:
:
CompositeOperationOrAuto
>
(
aComposite
.
value
(
)
)
:
dom
:
:
CompositeOperationOrAuto
:
:
Auto
;
}
static
Maybe
<
dom
:
:
CompositeOperation
>
ToCompositeOperation
(
dom
:
:
CompositeOperationOrAuto
aComposite
)
{
return
aComposite
=
=
dom
:
:
CompositeOperationOrAuto
:
:
Auto
?
Nothing
(
)
:
Some
(
static_cast
<
dom
:
:
CompositeOperation
>
(
aComposite
)
)
;
}
}
;
}
#
endif
