#
ifndef
mozilla_KeyframeUtils_h
#
define
mozilla_KeyframeUtils_h
#
include
"
nsTArrayForwardDeclare
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
#
include
"
mozilla
/
KeyframeEffectParams
.
h
"
struct
JSContext
;
class
JSObject
;
class
nsIDocument
;
class
nsStyleContext
;
struct
ServoComputedValues
;
namespace
mozilla
{
struct
AnimationProperty
;
enum
class
CSSPseudoElementType
:
uint8_t
;
class
ErrorResult
;
struct
Keyframe
;
struct
PropertyStyleAnimationValuePair
;
struct
ServoComputedStyleValues
;
namespace
dom
{
class
Element
;
}
}
namespace
mozilla
{
using
ComputedKeyframeValues
=
nsTArray
<
PropertyStyleAnimationValuePair
>
;
class
KeyframeUtils
{
public
:
static
nsTArray
<
Keyframe
>
GetKeyframesFromObject
(
JSContext
*
aCx
nsIDocument
*
aDocument
JS
:
:
Handle
<
JSObject
*
>
aFrames
ErrorResult
&
aRv
)
;
static
nsTArray
<
ComputedKeyframeValues
>
GetComputedKeyframeValues
(
const
nsTArray
<
Keyframe
>
&
aKeyframes
dom
:
:
Element
*
aElement
nsStyleContext
*
aStyleContext
)
;
static
nsTArray
<
ComputedKeyframeValues
>
GetComputedKeyframeValues
(
const
nsTArray
<
Keyframe
>
&
aKeyframes
dom
:
:
Element
*
aElement
const
ServoComputedStyleValues
&
aServoValues
)
;
static
void
ApplySpacing
(
nsTArray
<
Keyframe
>
&
aKeyframes
SpacingMode
aSpacingMode
nsCSSPropertyID
aProperty
nsTArray
<
ComputedKeyframeValues
>
&
aComputedValues
nsStyleContext
*
aStyleContext
)
;
static
void
ApplySpacing
(
nsTArray
<
Keyframe
>
&
aKeyframes
SpacingMode
aSpacingMode
nsCSSPropertyID
aProperty
nsTArray
<
ComputedKeyframeValues
>
&
aComputedValues
const
ServoComputedStyleValues
&
aServoValues
)
{
NS_WARNING
(
"
stylo
:
ApplySpacing
not
implemented
yet
"
)
;
}
static
void
ApplyDistributeSpacing
(
nsTArray
<
Keyframe
>
&
aKeyframes
)
;
static
nsTArray
<
AnimationProperty
>
GetAnimationPropertiesFromKeyframes
(
const
nsTArray
<
Keyframe
>
&
aKeyframes
const
nsTArray
<
ComputedKeyframeValues
>
&
aComputedValues
dom
:
:
CompositeOperation
aEffectComposite
)
;
static
bool
IsAnimatableProperty
(
nsCSSPropertyID
aProperty
)
;
}
;
}
#
endif
