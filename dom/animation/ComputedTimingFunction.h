#
ifndef
mozilla_ComputedTimingFunction_h
#
define
mozilla_ComputedTimingFunction_h
#
include
"
nsSMILKeySpline
.
h
"
#
include
"
nsStyleStruct
.
h
"
namespace
mozilla
{
class
ComputedTimingFunction
{
public
:
void
Init
(
const
nsTimingFunction
&
aFunction
)
;
double
GetValue
(
double
aPortion
)
const
;
const
nsSMILKeySpline
*
GetFunction
(
)
const
{
NS_ASSERTION
(
HasSpline
(
)
"
Type
mismatch
"
)
;
return
&
mTimingFunction
;
}
nsTimingFunction
:
:
Type
GetType
(
)
const
{
return
mType
;
}
bool
HasSpline
(
)
const
{
return
nsTimingFunction
:
:
IsSplineType
(
mType
)
;
}
uint32_t
GetSteps
(
)
const
{
return
mSteps
;
}
nsTimingFunction
:
:
StepSyntax
GetStepSyntax
(
)
const
{
return
mStepSyntax
;
}
bool
operator
=
=
(
const
ComputedTimingFunction
&
aOther
)
const
{
return
mType
=
=
aOther
.
mType
&
&
(
HasSpline
(
)
?
mTimingFunction
=
=
aOther
.
mTimingFunction
:
(
mSteps
=
=
aOther
.
mSteps
&
&
mStepSyntax
=
=
aOther
.
mStepSyntax
)
)
;
}
bool
operator
!
=
(
const
ComputedTimingFunction
&
aOther
)
const
{
return
!
(
*
this
=
=
aOther
)
;
}
int32_t
Compare
(
const
ComputedTimingFunction
&
aRhs
)
const
;
void
AppendToString
(
nsAString
&
aResult
)
const
;
static
double
GetPortion
(
const
Maybe
<
ComputedTimingFunction
>
&
aFunction
double
aPortion
)
{
return
aFunction
.
isSome
(
)
?
aFunction
-
>
GetValue
(
aPortion
)
:
aPortion
;
}
private
:
nsTimingFunction
:
:
Type
mType
;
nsSMILKeySpline
mTimingFunction
;
uint32_t
mSteps
;
nsTimingFunction
:
:
StepSyntax
mStepSyntax
;
}
;
}
#
endif
