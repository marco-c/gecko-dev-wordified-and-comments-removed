#
ifndef
mozilla_dom_AnimationUtils_h
#
define
mozilla_dom_AnimationUtils_h
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
mozilla
/
dom
/
BindingDeclarations
.
h
"
#
include
"
mozilla
/
dom
/
Nullable
.
h
"
#
include
"
nsRFPService
.
h
"
#
include
"
nsStringFwd
.
h
"
class
nsIContent
;
class
nsIFrame
;
struct
JSContext
;
namespace
mozilla
{
class
ComputedTimingFunction
;
class
EffectSet
;
namespace
dom
{
class
Document
;
}
class
AnimationUtils
{
public
:
typedef
dom
:
:
Document
Document
;
static
dom
:
:
Nullable
<
double
>
TimeDurationToDouble
(
const
dom
:
:
Nullable
<
TimeDuration
>
&
aTime
)
{
dom
:
:
Nullable
<
double
>
result
;
if
(
!
aTime
.
IsNull
(
)
)
{
result
.
SetValue
(
nsRFPService
:
:
ReduceTimePrecisionAsMSecs
(
aTime
.
Value
(
)
.
ToMilliseconds
(
)
0
TimerPrecisionType
:
:
RFPOnly
)
)
;
}
return
result
;
}
static
dom
:
:
Nullable
<
TimeDuration
>
DoubleToTimeDuration
(
const
dom
:
:
Nullable
<
double
>
&
aTime
)
{
dom
:
:
Nullable
<
TimeDuration
>
result
;
if
(
!
aTime
.
IsNull
(
)
)
{
result
.
SetValue
(
TimeDuration
:
:
FromMilliseconds
(
aTime
.
Value
(
)
)
)
;
}
return
result
;
}
static
void
LogAsyncAnimationFailure
(
nsCString
&
aMessage
const
nsIContent
*
aContent
=
nullptr
)
;
static
Document
*
GetCurrentRealmDocument
(
JSContext
*
aCx
)
;
static
Document
*
GetDocumentFromGlobal
(
JSObject
*
aGlobalObject
)
;
static
bool
IsOffscreenThrottlingEnabled
(
)
;
static
bool
EffectSetContainsAnimatedScale
(
EffectSet
&
aEffects
const
nsIFrame
*
aFrame
)
;
static
bool
HasCurrentTransitions
(
const
dom
:
:
Element
*
aElement
PseudoStyleType
aPseudoType
)
;
}
;
}
#
endif
