#
ifndef
mozilla_ScrollTimelineAnimationTracker_h
#
define
mozilla_ScrollTimelineAnimationTracker_h
#
include
"
mozilla
/
dom
/
Animation
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsTHashSet
.
h
"
namespace
mozilla
{
namespace
dom
{
class
Document
;
}
class
ScrollTimelineAnimationTracker
final
{
public
:
explicit
ScrollTimelineAnimationTracker
(
dom
:
:
Document
*
aDocument
)
:
mDocument
(
aDocument
)
{
}
NS_INLINE_DECL_CYCLE_COLLECTING_NATIVE_REFCOUNTING
(
ScrollTimelineAnimationTracker
)
NS_DECL_CYCLE_COLLECTION_NATIVE_CLASS
(
ScrollTimelineAnimationTracker
)
void
AddPending
(
dom
:
:
Animation
&
aAnimation
)
{
mPendingSet
.
Insert
(
&
aAnimation
)
;
}
void
RemovePending
(
dom
:
:
Animation
&
aAnimation
)
{
mPendingSet
.
Remove
(
&
aAnimation
)
;
}
bool
HasPendingAnimations
(
)
const
{
return
mPendingSet
.
Count
(
)
>
0
;
}
bool
IsWaiting
(
const
dom
:
:
Animation
&
aAnimation
)
const
{
return
mPendingSet
.
Contains
(
const_cast
<
dom
:
:
Animation
*
>
(
&
aAnimation
)
)
;
}
void
TriggerPendingAnimations
(
)
;
private
:
~
ScrollTimelineAnimationTracker
(
)
=
default
;
nsTHashSet
<
nsRefPtrHashKey
<
dom
:
:
Animation
>
>
mPendingSet
;
RefPtr
<
dom
:
:
Document
>
mDocument
;
}
;
}
#
endif
