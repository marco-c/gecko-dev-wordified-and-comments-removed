#
ifndef
mozilla_dom_AnimationPerformanceWarning_h
#
define
mozilla_dom_AnimationPerformanceWarning_h
#
include
<
initializer_list
>
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
nsTArray
.
h
"
class
nsXPIDLString
;
namespace
mozilla
{
struct
AnimationPerformanceWarning
{
enum
class
Type
:
uint8_t
{
ContentTooSmall
ContentTooLarge
TransformBackfaceVisibilityHidden
TransformPreserve3D
TransformSVG
TransformWithGeometricProperties
TransformWithSyncGeometricAnimations
TransformFrameInactive
OpacityFrameInactive
HasRenderingObserver
}
;
explicit
AnimationPerformanceWarning
(
Type
aType
)
:
mType
(
aType
)
{
}
AnimationPerformanceWarning
(
Type
aType
std
:
:
initializer_list
<
int32_t
>
aParams
)
:
mType
(
aType
)
{
MOZ_ASSERT
(
aParams
.
size
(
)
<
=
kMaxParamsForLocalization
"
The
length
of
parameters
should
be
less
than
"
"
kMaxParamsForLocalization
"
)
;
mParams
.
emplace
(
aParams
)
;
}
static
constexpr
uint8_t
kMaxParamsForLocalization
=
10
;
Type
mType
;
Maybe
<
nsTArray
<
int32_t
>
>
mParams
;
bool
ToLocalizedString
(
nsXPIDLString
&
aLocalizedString
)
const
;
template
<
uint32_t
N
>
nsresult
ToLocalizedStringWithIntParams
(
const
char
*
aKey
nsXPIDLString
&
aLocalizedString
)
const
;
bool
operator
=
=
(
const
AnimationPerformanceWarning
&
aOther
)
const
{
return
mType
=
=
aOther
.
mType
&
&
mParams
=
=
aOther
.
mParams
;
}
bool
operator
!
=
(
const
AnimationPerformanceWarning
&
aOther
)
const
{
return
!
(
*
this
=
=
aOther
)
;
}
}
;
}
#
endif
