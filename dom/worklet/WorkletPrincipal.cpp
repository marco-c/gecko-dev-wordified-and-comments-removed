#
include
"
WorkletPrincipal
.
h
"
#
include
"
jsapi
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
namespace
mozilla
{
namespace
dom
{
namespace
WorkletPrincipal
{
struct
WorkletPrincipal
final
:
public
JSPrincipals
{
bool
write
(
JSContext
*
aCx
JSStructuredCloneWriter
*
aWriter
)
override
{
MOZ_CRASH
(
"
WorkletPrincipal
:
:
write
not
implemented
"
)
;
return
false
;
}
}
;
JSPrincipals
*
GetWorkletPrincipal
(
)
{
static
WorkletPrincipal
sPrincipal
;
int32_t
prevRefcount
=
sPrincipal
.
refcount
+
+
;
if
(
prevRefcount
>
0
)
{
-
-
sPrincipal
.
refcount
;
}
else
{
#
ifdef
DEBUG
sPrincipal
.
debugToken
=
kJSPrincipalsDebugToken
;
#
endif
}
return
&
sPrincipal
;
}
}
}
}
