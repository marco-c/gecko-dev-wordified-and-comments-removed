#
ifndef
mozilla_dom_PresentationServiceBase_h
#
define
mozilla_dom_PresentationServiceBase_h
#
include
"
nsClassHashtable
.
h
"
#
include
"
nsRefPtrHashtable
.
h
"
#
include
"
nsTArray
.
h
"
class
nsIPresentationRespondingListener
;
class
nsString
;
namespace
mozilla
{
namespace
dom
{
class
PresentationServiceBase
:
public
nsISupports
{
public
:
NS_DECL_ISUPPORTS
PresentationServiceBase
(
)
=
default
;
protected
:
virtual
~
PresentationServiceBase
(
)
=
default
;
void
Shutdown
(
)
{
mRespondingListeners
.
Clear
(
)
;
mRespondingSessionIds
.
Clear
(
)
;
mRespondingWindowIds
.
Clear
(
)
;
}
nsresult
GetExistentSessionIdAtLaunchInternal
(
uint64_t
aWindowId
nsAString
&
aSessionId
)
;
nsresult
GetWindowIdBySessionIdInternal
(
const
nsAString
&
aSessionId
uint64_t
*
aWindowId
)
;
void
AddRespondingSessionId
(
uint64_t
aWindowId
const
nsAString
&
aSessionId
)
;
void
RemoveRespondingSessionId
(
const
nsAString
&
aSessionId
)
;
nsresult
UpdateWindowIdBySessionIdInternal
(
const
nsAString
&
aSessionId
const
uint64_t
aWindowId
)
;
nsRefPtrHashtable
<
nsUint64HashKey
nsIPresentationRespondingListener
>
mRespondingListeners
;
nsClassHashtable
<
nsUint64HashKey
nsTArray
<
nsString
>
>
mRespondingSessionIds
;
nsDataHashtable
<
nsStringHashKey
uint64_t
>
mRespondingWindowIds
;
}
;
}
}
#
endif
