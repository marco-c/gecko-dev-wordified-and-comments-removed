#
ifndef
__AutoplayRequest_h__
#
define
__AutoplayRequest_h__
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
nsIContentPermissionPrompt
.
h
"
#
include
"
nsIWeakReferenceUtils
.
h
"
class
nsGlobalWindowInner
;
class
nsIEventTarget
;
namespace
mozilla
{
class
AutoplayRequest
final
:
public
nsIContentPermissionRequest
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSICONTENTPERMISSIONREQUEST
static
already_AddRefed
<
AutoplayRequest
>
Create
(
nsGlobalWindowInner
*
aWindow
)
;
RefPtr
<
GenericPromise
>
RequestWithPrompt
(
)
;
private
:
AutoplayRequest
(
nsGlobalWindowInner
*
aWindow
nsIPrincipal
*
aNodePrincipal
nsIEventTarget
*
aMainThreadTarget
)
;
~
AutoplayRequest
(
)
;
nsWeakPtr
mWindow
;
nsCOMPtr
<
nsIPrincipal
>
mNodePrincipal
;
nsCOMPtr
<
nsIEventTarget
>
mMainThreadTarget
;
nsCOMPtr
<
nsIContentPermissionRequester
>
mRequester
;
MozPromiseHolder
<
GenericPromise
>
mPromiseHolder
;
bool
mRequestDispatched
=
false
;
}
;
}
#
endif
