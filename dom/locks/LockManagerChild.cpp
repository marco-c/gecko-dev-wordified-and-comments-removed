#
include
"
LockManagerChild
.
h
"
#
include
"
LockRequestChild
.
h
"
namespace
mozilla
:
:
dom
:
:
locks
{
NS_IMPL_CYCLE_COLLECTION
(
LockManagerChild
mOwner
)
NS_IMPL_CYCLE_COLLECTION_ROOT_NATIVE
(
LockManagerChild
AddRef
)
NS_IMPL_CYCLE_COLLECTION_UNROOT_NATIVE
(
LockManagerChild
Release
)
void
LockManagerChild
:
:
RequestLock
(
const
LockRequest
&
aRequest
const
LockOptions
&
aOptions
)
{
auto
requestActor
=
MakeRefPtr
<
LockRequestChild
>
(
aRequest
)
;
SendPLockRequestConstructor
(
requestActor
IPCLockRequest
(
nsString
(
aRequest
.
mName
)
aOptions
.
mMode
aOptions
.
mIfAvailable
aOptions
.
mSteal
)
)
;
}
}
