#
if
!
defined
(
AudioSink_h__
)
#
define
AudioSink_h__
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
MediaSink
.
h
"
namespace
mozilla
{
template
<
class
T
>
class
MediaQueue
;
namespace
media
{
class
AudioSink
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
AudioSink
)
AudioSink
(
MediaQueue
<
AudioData
>
&
aAudioQueue
)
:
mAudioQueue
(
aAudioQueue
)
{
}
typedef
MediaSink
:
:
PlaybackParams
PlaybackParams
;
virtual
RefPtr
<
GenericPromise
>
Init
(
const
PlaybackParams
&
aParams
)
=
0
;
virtual
int64_t
GetEndTime
(
)
const
=
0
;
virtual
int64_t
GetPosition
(
)
=
0
;
virtual
bool
HasUnplayedFrames
(
)
=
0
;
virtual
void
Shutdown
(
)
=
0
;
virtual
void
SetVolume
(
double
aVolume
)
=
0
;
virtual
void
SetPlaybackRate
(
double
aPlaybackRate
)
=
0
;
virtual
void
SetPreservesPitch
(
bool
aPreservesPitch
)
=
0
;
virtual
void
SetPlaying
(
bool
aPlaying
)
=
0
;
protected
:
virtual
~
AudioSink
(
)
{
}
virtual
MediaQueue
<
AudioData
>
&
AudioQueue
(
)
const
{
return
mAudioQueue
;
}
MediaQueue
<
AudioData
>
&
mAudioQueue
;
}
;
}
}
#
endif
