#
include
"
DDMediaLog
.
h
"
namespace
mozilla
{
size_t
DDMediaLog
:
:
SizeOfExcludingThis
(
MallocSizeOf
aMallocSizeOf
)
const
{
size_t
size
=
mMessages
.
ShallowSizeOfExcludingThis
(
aMallocSizeOf
)
;
for
(
const
DDLogMessage
&
message
:
mMessages
)
{
if
(
message
.
mValue
.
is
<
const
nsCString
>
(
)
)
{
size
+
=
message
.
mValue
.
as
<
const
nsCString
>
(
)
.
SizeOfExcludingThisIfUnshared
(
aMallocSizeOf
)
;
}
else
if
(
message
.
mValue
.
is
<
MediaResult
>
(
)
)
{
size
+
=
message
.
mValue
.
as
<
MediaResult
>
(
)
.
Message
(
)
.
SizeOfExcludingThisIfUnshared
(
aMallocSizeOf
)
;
}
}
return
size
;
}
}
