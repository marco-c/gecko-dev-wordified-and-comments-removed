#
ifndef
mozilla_dom_mediacontrolservice_h__
#
define
mozilla_dom_mediacontrolservice_h__
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
AudioFocusManager
.
h
"
#
include
"
MediaController
.
h
"
#
include
"
MediaHardwareKeysManager
.
h
"
#
include
"
nsDataHashtable
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
dom
{
class
MediaControlService
final
:
public
nsIObserver
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
static
RefPtr
<
MediaControlService
>
GetService
(
)
;
RefPtr
<
MediaController
>
GetOrCreateControllerById
(
const
uint64_t
aId
)
const
;
RefPtr
<
MediaController
>
GetControllerById
(
const
uint64_t
aId
)
const
;
AudioFocusManager
&
GetAudioFocusManager
(
)
{
return
mAudioFocusManager
;
}
void
AddMediaController
(
const
RefPtr
<
MediaController
>
&
aController
)
;
void
RemoveMediaController
(
const
RefPtr
<
MediaController
>
&
aController
)
;
uint64_t
GetControllersNum
(
)
const
;
already_AddRefed
<
MediaController
>
GetLastAddedController
(
)
;
private
:
MediaControlService
(
)
;
~
MediaControlService
(
)
;
void
Shutdown
(
)
;
void
PlayAllControllers
(
)
const
;
void
PauseAllControllers
(
)
const
;
void
StopAllControllers
(
)
const
;
void
ShutdownAllControllers
(
)
const
;
nsDataHashtable
<
nsUint64HashKey
RefPtr
<
MediaController
>
>
mControllers
;
nsTArray
<
uint64_t
>
mControllerHistory
;
AudioFocusManager
mAudioFocusManager
;
MediaControlKeysManager
mMediaControlKeysManager
;
}
;
}
}
#
endif
