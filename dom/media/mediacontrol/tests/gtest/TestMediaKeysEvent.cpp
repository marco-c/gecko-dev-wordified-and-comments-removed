#
include
"
gtest
/
gtest
.
h
"
#
include
"
MediaControlKeysEvent
.
h
"
using
namespace
mozilla
:
:
dom
;
class
MediaControlKeysEventSourceTestImpl
:
public
MediaControlKeysEventSource
{
bool
Open
(
)
override
{
return
true
;
}
}
;
TEST
(
MediaControlKeysEvent
TestAddOrRemoveListener
)
{
RefPtr
<
MediaControlKeysEventSource
>
source
=
new
MediaControlKeysEventSourceTestImpl
(
)
;
ASSERT_TRUE
(
source
-
>
GetListenersNum
(
)
=
=
0
)
;
RefPtr
<
MediaControlKeysEventListener
>
listener
=
new
MediaControlKeysHandler
(
)
;
source
-
>
AddListener
(
listener
)
;
ASSERT_TRUE
(
source
-
>
GetListenersNum
(
)
=
=
1
)
;
source
-
>
RemoveListener
(
listener
)
;
ASSERT_TRUE
(
source
-
>
GetListenersNum
(
)
=
=
0
)
;
}
