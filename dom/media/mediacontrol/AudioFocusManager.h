#
ifndef
DOM_MEDIA_MEDIACONTROL_AUDIOFOCUSMANAGER_H_
#
define
DOM_MEDIA_MEDIACONTROL_AUDIOFOCUSMANAGER_H_
#
include
"
base
/
basictypes
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
VideoUtils
.
h
"
namespace
mozilla
{
namespace
dom
{
class
IMediaController
;
class
MediaControlService
;
class
AudioFocusManager
{
public
:
void
RequestAudioFocus
(
IMediaController
*
aController
)
;
void
RevokeAudioFocus
(
IMediaController
*
aController
)
;
explicit
AudioFocusManager
(
)
=
default
;
~
AudioFocusManager
(
)
;
uint32_t
GetAudioFocusNums
(
)
const
;
private
:
friend
class
MediaControlService
;
bool
ClearFocusControllersIfNeeded
(
)
;
void
CreateTimerForUpdatingTelemetry
(
)
;
void
UpdateTelemetryDataFromTimer
(
uint32_t
aPrevFocusNum
uint64_t
aPrevActiveControllerNum
)
;
nsTArray
<
RefPtr
<
IMediaController
>
>
mOwningFocusControllers
;
RefPtr
<
SimpleTimer
>
mTelemetryTimer
;
}
;
}
}
#
endif
