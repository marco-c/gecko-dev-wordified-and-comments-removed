#
if
!
defined
(
CubebUtils_h_
)
#
define
CubebUtils_h_
#
include
"
cubeb
/
cubeb
.
h
"
#
include
"
mozilla
/
dom
/
AudioDeviceInfo
.
h
"
#
include
"
mozilla
/
dom
/
AudioChannelBinding
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
namespace
mozilla
{
namespace
CubebUtils
{
typedef
cubeb_devid
AudioDeviceID
;
void
InitLibrary
(
)
;
void
ShutdownLibrary
(
)
;
uint32_t
MaxNumberOfChannels
(
)
;
uint32_t
PreferredSampleRate
(
)
;
uint32_t
PreferredChannelMap
(
uint32_t
aChannels
)
;
enum
Side
{
Input
Output
}
;
void
PrefChanged
(
const
char
*
aPref
void
*
aClosure
)
;
double
GetVolumeScale
(
)
;
bool
GetFirstStream
(
)
;
cubeb
*
GetCubebContext
(
)
;
cubeb
*
GetCubebContextUnlocked
(
)
;
void
ReportCubebStreamInitFailure
(
bool
aIsFirstStream
)
;
void
ReportCubebBackendUsed
(
)
;
uint32_t
GetCubebPlaybackLatencyInMilliseconds
(
)
;
Maybe
<
uint32_t
>
GetCubebMSGLatencyInFrames
(
)
;
bool
CubebLatencyPrefSet
(
)
;
cubeb_channel_layout
ConvertChannelMapToCubebLayout
(
uint32_t
aChannelMap
)
;
#
if
defined
(
__ANDROID__
)
&
&
defined
(
MOZ_B2G
)
cubeb_stream_type
ConvertChannelToCubebType
(
dom
:
:
AudioChannel
aChannel
)
;
#
endif
void
GetCurrentBackend
(
nsAString
&
aBackend
)
;
void
GetPreferredChannelLayout
(
nsAString
&
aLayout
)
;
void
GetDeviceCollection
(
nsTArray
<
RefPtr
<
AudioDeviceInfo
>
>
&
aDeviceInfos
Side
aSide
)
;
}
}
#
endif
