#
ifndef
BUFFER_DECODER_H_
#
define
BUFFER_DECODER_H_
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
ReentrantMonitor
.
h
"
#
include
"
mozilla
/
TaskQueue
.
h
"
#
include
"
AbstractMediaDecoder
.
h
"
namespace
mozilla
{
class
BufferDecoder
final
:
public
AbstractMediaDecoder
{
public
:
explicit
BufferDecoder
(
MediaResource
*
aResource
AbstractThread
*
aMainThread
GMPCrashHelper
*
aCrashHelper
)
;
NS_DECL_THREADSAFE_ISUPPORTS
void
BeginDecoding
(
TaskQueue
*
aTaskQueueIdentity
)
;
MediaResource
*
GetResource
(
)
const
final
override
;
void
NotifyDecodedFrames
(
const
FrameStatisticsData
&
aStats
)
final
override
;
VideoFrameContainer
*
GetVideoFrameContainer
(
)
final
override
;
layers
:
:
ImageContainer
*
GetImageContainer
(
)
final
override
;
MediaDecoderOwner
*
GetOwner
(
)
const
final
override
;
already_AddRefed
<
GMPCrashHelper
>
GetCrashHelper
(
)
override
;
AbstractThread
*
AbstractMainThread
(
)
const
final
override
;
private
:
virtual
~
BufferDecoder
(
)
;
RefPtr
<
TaskQueue
>
mTaskQueueIdentity
;
RefPtr
<
MediaResource
>
mResource
;
const
RefPtr
<
AbstractThread
>
mAbstractMainThread
;
RefPtr
<
GMPCrashHelper
>
mCrashHelper
;
}
;
}
#
endif
