#
ifndef
BUFFER_DECODER_H_
#
define
BUFFER_DECODER_H_
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
ReentrantMonitor
.
h
"
#
include
"
mozilla
/
TaskQueue
.
h
"
#
include
"
AbstractMediaDecoder
.
h
"
namespace
mozilla
{
class
BufferDecoder
final
:
public
AbstractMediaDecoder
{
public
:
explicit
BufferDecoder
(
MediaResource
*
aResource
)
;
NS_DECL_THREADSAFE_ISUPPORTS
void
BeginDecoding
(
TaskQueue
*
aTaskQueueIdentity
)
;
virtual
MediaResource
*
GetResource
(
)
const
final
override
;
virtual
void
NotifyDecodedFrames
(
uint32_t
aParsed
uint32_t
aDecoded
uint32_t
aDropped
)
final
override
;
virtual
void
SetMediaSeekable
(
bool
aMediaSeekable
)
final
override
;
virtual
VideoFrameContainer
*
GetVideoFrameContainer
(
)
final
override
;
virtual
layers
:
:
ImageContainer
*
GetImageContainer
(
)
final
override
;
virtual
void
MetadataLoaded
(
nsAutoPtr
<
MediaInfo
>
aInfo
nsAutoPtr
<
MetadataTags
>
aTags
MediaDecoderEventVisibility
aEventVisibility
)
final
override
;
virtual
void
FirstFrameLoaded
(
nsAutoPtr
<
MediaInfo
>
aInfo
MediaDecoderEventVisibility
aEventVisibility
)
final
override
;
virtual
MediaDecoderOwner
*
GetOwner
(
)
final
override
;
private
:
virtual
~
BufferDecoder
(
)
;
RefPtr
<
TaskQueue
>
mTaskQueueIdentity
;
RefPtr
<
MediaResource
>
mResource
;
}
;
}
#
endif
