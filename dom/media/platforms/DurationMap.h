#
ifndef
mozilla_DurationMap_h
#
define
mozilla_DurationMap_h
#
include
"
mozilla
/
Pair
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
class
DurationMap
{
public
:
typedef
Pair
<
int64_t
int64_t
>
DurationElement
;
DurationMap
(
)
:
mMutex
(
"
DurationMap
"
)
{
}
void
Insert
(
int64_t
aKey
int64_t
aDuration
)
{
MutexAutoLock
lock
(
mMutex
)
;
mMap
.
AppendElement
(
MakePair
(
aKey
aDuration
)
)
;
}
bool
Find
(
int64_t
aKey
int64_t
&
aDuration
)
{
MutexAutoLock
lock
(
mMutex
)
;
for
(
uint32_t
i
=
0
;
i
<
mMap
.
Length
(
)
;
i
+
+
)
{
DurationElement
&
element
=
mMap
[
i
]
;
if
(
element
.
first
(
)
=
=
aKey
)
{
aDuration
=
element
.
second
(
)
;
mMap
.
RemoveElementAt
(
i
)
;
return
true
;
}
}
return
false
;
}
void
Clear
(
)
{
MutexAutoLock
lock
(
mMutex
)
;
mMap
.
Clear
(
)
;
}
private
:
Mutex
mMutex
;
AutoTArray
<
DurationElement
16
>
mMap
;
}
;
}
#
endif
