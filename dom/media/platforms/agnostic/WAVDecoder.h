#
if
!
defined
(
WaveDecoder_h_
)
#
define
WaveDecoder_h_
#
include
"
PlatformDecoderModule
.
h
"
#
include
"
mp4_demuxer
/
ByteReader
.
h
"
namespace
mozilla
{
class
WaveDataDecoder
:
public
MediaDataDecoder
{
public
:
WaveDataDecoder
(
const
AudioInfo
&
aConfig
FlushableTaskQueue
*
aTaskQueue
MediaDataDecoderCallback
*
aCallback
)
;
RefPtr
<
InitPromise
>
Init
(
)
override
;
nsresult
Input
(
MediaRawData
*
aSample
)
override
;
nsresult
Flush
(
)
override
;
nsresult
Drain
(
)
override
;
nsresult
Shutdown
(
)
override
;
const
char
*
GetDescriptionName
(
)
const
override
{
return
"
wave
audio
decoder
"
;
}
static
bool
IsWave
(
const
nsACString
&
aMimeType
)
;
private
:
void
Decode
(
MediaRawData
*
aSample
)
;
bool
DoDecode
(
MediaRawData
*
aSample
)
;
void
DoDrain
(
)
;
const
AudioInfo
&
mInfo
;
RefPtr
<
FlushableTaskQueue
>
mTaskQueue
;
MediaDataDecoderCallback
*
mCallback
;
int64_t
mFrames
;
}
;
}
#
endif
