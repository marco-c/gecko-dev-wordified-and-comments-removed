#
ifndef
DOM_MEDIA_PLATFORM_WMF_MFCDMPROXY_H
#
define
DOM_MEDIA_PLATFORM_WMF_MFCDMPROXY_H
#
include
<
mfobjects
.
h
>
#
include
<
unknwn
.
h
>
#
include
<
windef
.
h
>
#
include
<
wrl
.
h
>
#
include
<
map
>
#
include
"
MFCDMExtra
.
h
"
#
include
"
nsISupportsImpl
.
h
"
namespace
mozilla
{
class
MFCDMProxy
{
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
MFCDMProxy
)
;
MFCDMProxy
(
IMFContentDecryptionModule
*
aCDM
uint64_t
aCDMParentId
)
;
public
:
HRESULT
GetPMPServer
(
REFIID
aRiid
LPVOID
*
aPMPServerOut
)
;
HRESULT
GetInputTrustAuthority
(
uint32_t
aStreamId
const
uint8_t
*
aContentInitData
uint32_t
aContentInitDataSize
REFIID
aRiid
IUnknown
*
*
aInputTrustAuthorityOut
)
;
HRESULT
SetContentEnabler
(
IUnknown
*
aRequest
IMFAsyncResult
*
aResult
)
;
void
OnHardwareContextReset
(
)
;
void
Shutdown
(
)
;
private
:
~
MFCDMProxy
(
)
;
Microsoft
:
:
WRL
:
:
ComPtr
<
IMFContentDecryptionModule
>
mCDM
;
std
:
:
map
<
uint32_t
Microsoft
:
:
WRL
:
:
ComPtr
<
IMFInputTrustAuthority
>
>
mInputTrustAuthorities
;
Microsoft
:
:
WRL
:
:
ComPtr
<
IMFTrustedInput
>
mTrustedInput
;
const
uint64_t
mCDMParentId
;
}
;
}
#
endif
