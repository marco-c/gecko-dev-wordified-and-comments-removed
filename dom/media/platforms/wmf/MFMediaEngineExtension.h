#
ifndef
DOM_MEDIA_PLATFORM_WMF_MFMEDIAENGINEEXTENSION_H
#
define
DOM_MEDIA_PLATFORM_WMF_MFMEDIAENGINEEXTENSION_H
#
include
<
wrl
.
h
>
#
include
"
MFMediaEngineExtra
.
h
"
namespace
mozilla
{
class
MFMediaEngineExtension
final
:
public
Microsoft
:
:
WRL
:
:
RuntimeClass
<
Microsoft
:
:
WRL
:
:
RuntimeClassFlags
<
Microsoft
:
:
WRL
:
:
RuntimeClassType
:
:
ClassicCom
>
IMFMediaEngineExtension
>
{
public
:
MFMediaEngineExtension
(
)
=
default
;
HRESULT
RuntimeClassInitialize
(
)
{
return
S_OK
;
}
void
SetMediaSource
(
IMFMediaSource
*
aMediaSource
)
;
IFACEMETHODIMP
BeginCreateObject
(
BSTR
aUrl
IMFByteStream
*
aByteStream
MF_OBJECT_TYPE
aType
IUnknown
*
*
aCancelCookie
IMFAsyncCallback
*
aCallback
IUnknown
*
aState
)
override
;
IFACEMETHODIMP
CancelObjectCreation
(
IUnknown
*
aCancelCookie
)
override
;
IFACEMETHODIMP
EndCreateObject
(
IMFAsyncResult
*
aResult
IUnknown
*
*
aRetObj
)
override
;
IFACEMETHODIMP
CanPlayType
(
BOOL
aIsAudioOnly
BSTR
aMimeType
MF_MEDIA_ENGINE_CANPLAY
*
aResult
)
override
;
private
:
bool
mIsObjectCreating
=
false
;
Microsoft
:
:
WRL
:
:
ComPtr
<
IMFMediaSource
>
mMediaSource
;
}
;
}
#
endif
