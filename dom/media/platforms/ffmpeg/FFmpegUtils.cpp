#
include
"
FFmpegUtils
.
h
"
#
include
"
FFmpegLibWrapper
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
nsString
.
h
"
namespace
mozilla
{
nsCString
MakeErrorString
(
const
FFmpegLibWrapper
*
aLib
int
aErrNum
)
{
MOZ_ASSERT
(
aLib
)
;
char
errStr
[
FFmpegErrorMaxStringSize
]
;
aLib
-
>
av_strerror
(
aErrNum
errStr
FFmpegErrorMaxStringSize
)
;
return
nsCString
(
errStr
)
;
}
#
define
ENUM_TO_STR
(
enumVal
)
\
if
(
aCodec
=
=
(
enumVal
)
)
{
\
return
#
enumVal
;
\
}
const
char
*
AVCodecToString
(
const
AVCodecID
&
aCodec
)
{
ENUM_TO_STR
(
AV_CODEC_ID_AAC
)
;
ENUM_TO_STR
(
AV_CODEC_ID_H264
)
;
#
if
LIBAVCODEC_VERSION_MAJOR
>
=
54
ENUM_TO_STR
(
AV_CODEC_ID_VP8
)
;
#
endif
#
if
LIBAVCODEC_VERSION_MAJOR
>
=
55
ENUM_TO_STR
(
AV_CODEC_ID_VP9
)
;
ENUM_TO_STR
(
AV_CODEC_ID_HEVC
)
;
#
endif
#
if
LIBAVCODEC_VERSION_MAJOR
>
=
59
ENUM_TO_STR
(
AV_CODEC_ID_AV1
)
;
#
endif
return
"
unknown
"
;
}
#
undef
ENUM_TO_STR
}
