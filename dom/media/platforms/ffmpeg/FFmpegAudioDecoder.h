#
ifndef
__FFmpegAACDecoder_h__
#
define
__FFmpegAACDecoder_h__
#
include
"
FFmpegLibWrapper
.
h
"
#
include
"
FFmpegDataDecoder
.
h
"
namespace
mozilla
{
template
<
int
V
>
class
FFmpegAudioDecoder
{
}
;
template
<
>
class
FFmpegAudioDecoder
<
LIBAV_VER
>
:
public
FFmpegDataDecoder
<
LIBAV_VER
>
{
public
:
FFmpegAudioDecoder
(
FFmpegLibWrapper
*
aLib
FlushableTaskQueue
*
aTaskQueue
MediaDataDecoderCallback
*
aCallback
const
AudioInfo
&
aConfig
)
;
virtual
~
FFmpegAudioDecoder
(
)
;
RefPtr
<
InitPromise
>
Init
(
)
override
;
nsresult
Input
(
MediaRawData
*
aSample
)
override
;
void
ProcessDrain
(
)
override
;
void
InitCodecContext
(
)
override
;
static
AVCodecID
GetCodecId
(
const
nsACString
&
aMimeType
)
;
const
char
*
GetDescriptionName
(
)
const
override
{
return
"
ffmpeg
audio
decoder
"
;
}
private
:
void
DecodePacket
(
MediaRawData
*
aSample
)
;
}
;
}
#
endif
