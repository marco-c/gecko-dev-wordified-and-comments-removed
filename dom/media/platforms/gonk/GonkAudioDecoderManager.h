#
if
!
defined
(
GonkAudioDecoderManager_h_
)
#
define
GonkAudioDecoderManager_h_
#
include
"
AudioCompactor
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
GonkMediaDataDecoder
.
h
"
using
namespace
android
;
namespace
android
{
class
MOZ_EXPORT
MediaBuffer
;
}
namespace
mozilla
{
class
GonkAudioDecoderManager
:
public
GonkDecoderManager
{
typedef
android
:
:
MediaCodecProxy
MediaCodecProxy
;
public
:
GonkAudioDecoderManager
(
const
AudioInfo
&
aConfig
)
;
virtual
~
GonkAudioDecoderManager
(
)
;
RefPtr
<
InitPromise
>
Init
(
)
override
;
nsresult
Output
(
int64_t
aStreamOffset
RefPtr
<
MediaData
>
&
aOutput
)
override
;
void
ProcessFlush
(
)
override
;
const
char
*
GetDescriptionName
(
)
const
override
{
return
"
gonk
audio
decoder
"
;
}
private
:
bool
InitMediaCodecProxy
(
)
;
nsresult
CreateAudioData
(
MediaBuffer
*
aBuffer
int64_t
aStreamOffset
)
;
uint32_t
mAudioChannels
;
uint32_t
mAudioRate
;
const
uint32_t
mAudioProfile
;
MediaQueue
<
AudioData
>
mAudioQueue
;
AudioCompactor
mAudioCompactor
;
}
;
}
#
endif
