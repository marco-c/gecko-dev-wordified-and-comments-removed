#
ifndef
MediaStreamWindowCapturer_h
#
define
MediaStreamWindowCapturer_h
#
include
"
DOMMediaStream
.
h
"
namespace
mozilla
{
namespace
dom
{
class
AudioStreamTrack
;
class
MediaStreamTrack
;
}
class
MediaInputPort
;
class
MediaStreamWindowCapturer
:
public
DOMMediaStream
:
:
TrackListener
{
public
:
MediaStreamWindowCapturer
(
DOMMediaStream
*
aStream
uint64_t
aWindowId
)
;
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
MediaStreamWindowCapturer
DOMMediaStream
:
:
TrackListener
)
void
NotifyTrackAdded
(
const
RefPtr
<
dom
:
:
MediaStreamTrack
>
&
aTrack
)
override
;
void
NotifyTrackRemoved
(
const
RefPtr
<
dom
:
:
MediaStreamTrack
>
&
aTrack
)
override
;
struct
CapturedTrack
{
CapturedTrack
(
dom
:
:
MediaStreamTrack
*
aTrack
uint64_t
aWindowID
)
;
~
CapturedTrack
(
)
;
const
WeakPtr
<
dom
:
:
MediaStreamTrack
>
mTrack
;
const
RefPtr
<
MediaInputPort
>
mPort
;
}
;
const
WeakPtr
<
DOMMediaStream
>
mStream
;
const
uint64_t
mWindowId
;
protected
:
~
MediaStreamWindowCapturer
(
)
;
void
AddTrack
(
dom
:
:
AudioStreamTrack
*
aTrack
)
;
void
RemoveTrack
(
dom
:
:
AudioStreamTrack
*
aTrack
)
;
nsTArray
<
UniquePtr
<
CapturedTrack
>
>
mTracks
;
}
;
}
#
endif
