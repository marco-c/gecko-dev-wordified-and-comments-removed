#
ifndef
SEEK_TARGET_H
#
define
SEEK_TARGET_H
#
include
"
TimeUnits
.
h
"
namespace
mozilla
{
enum
class
MediaDecoderEventVisibility
:
int8_t
{
Observable
Suppressed
}
;
struct
SeekTarget
{
enum
Type
{
Invalid
PrevSyncPoint
Accurate
AccurateVideoOnly
}
;
SeekTarget
(
)
:
mEventVisibility
(
MediaDecoderEventVisibility
:
:
Observable
)
mTime
(
media
:
:
TimeUnit
:
:
Invalid
(
)
)
mType
(
SeekTarget
:
:
Invalid
)
{
}
SeekTarget
(
int64_t
aTimeUsecs
Type
aType
MediaDecoderEventVisibility
aEventVisibility
=
MediaDecoderEventVisibility
:
:
Observable
)
:
mEventVisibility
(
aEventVisibility
)
mTime
(
media
:
:
TimeUnit
:
:
FromMicroseconds
(
aTimeUsecs
)
)
mType
(
aType
)
{
}
SeekTarget
(
const
media
:
:
TimeUnit
&
aTime
Type
aType
MediaDecoderEventVisibility
aEventVisibility
=
MediaDecoderEventVisibility
:
:
Observable
)
:
mEventVisibility
(
aEventVisibility
)
mTime
(
aTime
)
mType
(
aType
)
{
}
SeekTarget
(
const
SeekTarget
&
aOther
)
:
mEventVisibility
(
aOther
.
mEventVisibility
)
mTime
(
aOther
.
mTime
)
mType
(
aOther
.
mType
)
{
}
bool
IsValid
(
)
const
{
return
mType
!
=
SeekTarget
:
:
Invalid
;
}
void
Reset
(
)
{
mTime
=
media
:
:
TimeUnit
:
:
Invalid
(
)
;
mType
=
SeekTarget
:
:
Invalid
;
}
media
:
:
TimeUnit
GetTime
(
)
const
{
NS_ASSERTION
(
mTime
.
IsValid
(
)
"
Invalid
SeekTarget
"
)
;
return
mTime
;
}
void
SetTime
(
const
media
:
:
TimeUnit
&
aTime
)
{
NS_ASSERTION
(
aTime
.
IsValid
(
)
"
Invalid
SeekTarget
destination
"
)
;
mTime
=
aTime
;
}
void
SetType
(
Type
aType
)
{
mType
=
aType
;
}
bool
IsFast
(
)
const
{
return
mType
=
=
SeekTarget
:
:
Type
:
:
PrevSyncPoint
;
}
bool
IsAccurate
(
)
const
{
return
mType
=
=
SeekTarget
:
:
Type
:
:
Accurate
;
}
bool
IsVideoOnly
(
)
const
{
return
mType
=
=
SeekTarget
:
:
Type
:
:
AccurateVideoOnly
;
}
MediaDecoderEventVisibility
mEventVisibility
;
private
:
media
:
:
TimeUnit
mTime
;
Type
mType
;
}
;
}
#
endif
