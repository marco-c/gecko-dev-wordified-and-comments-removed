#
ifndef
MOZILLA_AUDIOCAPTURESTREAM_H_
#
define
MOZILLA_AUDIOCAPTURESTREAM_H_
#
include
"
MediaStreamGraph
.
h
"
#
include
"
AudioMixer
.
h
"
#
include
"
StreamTracks
.
h
"
#
include
<
algorithm
>
namespace
mozilla
{
class
AbstractThread
;
class
DOMMediaStream
;
class
AudioCaptureStream
:
public
ProcessedMediaStream
public
MixerCallbackReceiver
{
public
:
AudioCaptureStream
(
TrackID
aTrackId
AbstractThread
*
aMainThread
)
;
virtual
~
AudioCaptureStream
(
)
;
void
Start
(
)
;
void
ProcessInput
(
GraphTime
aFrom
GraphTime
aTo
uint32_t
aFlags
)
override
;
protected
:
void
MixerCallback
(
AudioDataValue
*
aMixedBuffer
AudioSampleFormat
aFormat
uint32_t
aChannels
uint32_t
aFrames
uint32_t
aSampleRate
)
override
;
AudioMixer
mMixer
;
TrackID
mTrackId
;
bool
mStarted
;
bool
mTrackCreated
;
}
;
}
#
endif
