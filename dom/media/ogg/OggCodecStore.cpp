#
include
"
OggCodecStore
.
h
"
#
include
"
mozilla
/
DebugOnly
.
h
"
namespace
mozilla
{
OggCodecStore
:
:
OggCodecStore
(
)
:
mMonitor
(
"
CodecStore
"
)
{
}
OggCodecState
*
OggCodecStore
:
:
Add
(
uint32_t
serial
UniquePtr
<
OggCodecState
>
codecState
)
{
MonitorAutoLock
mon
(
mMonitor
)
;
return
mCodecStates
.
InsertOrUpdate
(
serial
std
:
:
move
(
codecState
)
)
.
get
(
)
;
}
bool
OggCodecStore
:
:
Contains
(
uint32_t
serial
)
{
MonitorAutoLock
mon
(
mMonitor
)
;
return
mCodecStates
.
Get
(
serial
nullptr
)
;
}
OggCodecState
*
OggCodecStore
:
:
Get
(
uint32_t
serial
)
{
MonitorAutoLock
mon
(
mMonitor
)
;
return
mCodecStates
.
Get
(
serial
)
;
}
}
