#
ifndef
SINF_PARSER_H_
#
define
SINF_PARSER_H_
#
include
"
mozilla
/
ResultExtensions
.
h
"
#
include
"
mp4_demuxer
/
Atom
.
h
"
#
include
"
mp4_demuxer
/
AtomType
.
h
"
namespace
mp4_demuxer
{
class
Box
;
class
Sinf
:
public
Atom
{
public
:
Sinf
(
)
:
mDefaultIVSize
(
0
)
mDefaultEncryptionType
(
)
{
}
explicit
Sinf
(
Box
&
aBox
)
;
virtual
bool
IsValid
(
)
override
{
return
!
!
mDefaultIVSize
&
&
!
!
mDefaultEncryptionType
;
}
uint8_t
mDefaultIVSize
;
AtomType
mDefaultEncryptionType
;
uint8_t
mDefaultKeyID
[
16
]
;
}
;
class
SinfParser
{
public
:
explicit
SinfParser
(
Box
&
aBox
)
;
Sinf
&
GetSinf
(
)
{
return
mSinf
;
}
private
:
Result
<
Ok
nsresult
>
ParseSchm
(
Box
&
aBox
)
;
Result
<
Ok
nsresult
>
ParseSchi
(
Box
&
aBox
)
;
Result
<
Ok
nsresult
>
ParseTenc
(
Box
&
aBox
)
;
Sinf
mSinf
;
}
;
}
#
endif
