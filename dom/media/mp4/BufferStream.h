#
ifndef
BUFFER_STREAM_H_
#
define
BUFFER_STREAM_H_
#
include
"
ByteStream
.
h
"
#
include
"
MediaResource
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
class
MediaByteBuffer
;
DDLoggedTypeDeclNameAndBase
(
BufferStream
ByteStream
)
;
class
BufferStream
:
public
ByteStream
public
mozilla
:
:
DecoderDoctorLifeLogger
<
BufferStream
>
{
public
:
BufferStream
(
)
;
explicit
BufferStream
(
mozilla
:
:
MediaByteBuffer
*
aBuffer
)
;
virtual
nsresult
ReadAt
(
int64_t
aOffset
void
*
aData
size_t
aLength
size_t
*
aBytesRead
)
override
;
virtual
nsresult
CachedReadAt
(
int64_t
aOffset
void
*
aData
size_t
aLength
size_t
*
aBytesRead
)
override
;
virtual
bool
Length
(
int64_t
*
aLength
)
override
;
virtual
void
DiscardBefore
(
int64_t
aOffset
)
override
;
bool
AppendBytes
(
const
uint8_t
*
aData
size_t
aLength
)
;
mozilla
:
:
MediaByteRange
GetByteRange
(
)
;
private
:
~
BufferStream
(
)
;
int64_t
mStartOffset
;
RefPtr
<
mozilla
:
:
MediaByteBuffer
>
mData
;
}
;
}
#
endif
