#
include
"
GMPCrashHelperHolder
.
h
"
#
include
"
GMPService
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsPIDOMWindow
.
h
"
#
include
"
mozilla
/
ipc
/
ProtocolUtils
.
h
"
namespace
mozilla
{
void
GMPCrashHelperHolder
:
:
SetCrashHelper
(
GMPCrashHelper
*
aHelper
)
{
mCrashHelper
=
aHelper
;
}
GMPCrashHelper
*
GMPCrashHelperHolder
:
:
GetCrashHelper
(
)
{
return
mCrashHelper
;
}
void
GMPCrashHelperHolder
:
:
MaybeDisconnect
(
bool
aAbnormalShutdown
)
{
if
(
!
aAbnormalShutdown
)
{
RefPtr
<
gmp
:
:
GeckoMediaPluginService
>
service
(
gmp
:
:
GeckoMediaPluginService
:
:
GetGeckoMediaPluginService
(
)
)
;
if
(
service
)
{
service
-
>
DisconnectCrashHelper
(
GetCrashHelper
(
)
)
;
}
}
}
}
