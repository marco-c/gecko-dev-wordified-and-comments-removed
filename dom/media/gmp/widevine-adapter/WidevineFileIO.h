#
ifndef
WidevineFileIO_h_
#
define
WidevineFileIO_h_
#
include
<
stddef
.
h
>
#
include
<
string
>
#
include
"
content_decryption_module
.
h
"
#
include
"
gmp
-
api
/
gmp
-
storage
.
h
"
namespace
mozilla
{
class
WidevineFileIO
:
public
cdm
:
:
FileIO
public
GMPRecordClient
{
public
:
explicit
WidevineFileIO
(
cdm
:
:
FileIOClient
*
aClient
)
:
mClient
(
aClient
)
mRecord
(
nullptr
)
{
}
void
Open
(
const
char
*
aFilename
uint32_t
aFilenameLength
)
override
;
void
Read
(
)
override
;
void
Write
(
const
uint8_t
*
aData
uint32_t
aDataSize
)
override
;
void
Close
(
)
override
;
void
OpenComplete
(
GMPErr
aStatus
)
override
;
void
ReadComplete
(
GMPErr
aStatus
const
uint8_t
*
aData
uint32_t
aDataSize
)
override
;
void
WriteComplete
(
GMPErr
aStatus
)
override
;
private
:
cdm
:
:
FileIOClient
*
mClient
;
GMPRecord
*
mRecord
;
std
:
:
string
mName
;
}
;
}
#
endif
