#
include
"
GMPCrashHelper
.
h
"
#
include
"
runnable_utils
.
h
"
#
include
"
nsThreadUtils
.
h
"
#
include
"
mozilla
/
SchedulerGroup
.
h
"
namespace
mozilla
{
NS_IMPL_ADDREF
(
GMPCrashHelper
)
NS_IMPL_RELEASE_WITH_DESTROY
(
GMPCrashHelper
Destroy
(
)
)
void
GMPCrashHelper
:
:
Destroy
(
)
{
if
(
NS_IsMainThread
(
)
)
{
delete
this
;
}
else
{
SchedulerGroup
:
:
Dispatch
(
TaskCategory
:
:
Other
NewNonOwningRunnableMethod
(
"
GMPCrashHelper
:
:
Destroy
"
this
&
GMPCrashHelper
:
:
Destroy
)
)
;
}
}
}
