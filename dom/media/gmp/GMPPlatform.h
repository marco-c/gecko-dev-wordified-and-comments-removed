#
ifndef
GMPPlatform_h_
#
define
GMPPlatform_h_
#
include
<
functional
>
#
include
"
gmp
-
platform
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
gmp
/
PGMPChild
.
h
"
namespace
mozilla
{
#
ifdef
XP_WIN
struct
ModulePaths
;
#
endif
namespace
ipc
{
class
ByteBuf
;
}
namespace
gmp
{
class
GMPChild
;
void
InitPlatformAPI
(
GMPPlatformAPI
&
aPlatformAPI
GMPChild
*
aChild
)
;
void
ShutdownPlatformAPI
(
)
;
GMPErr
RunOnMainThread
(
GMPTask
*
aTask
)
;
GMPTask
*
NewGMPTask
(
std
:
:
function
<
void
(
)
>
&
&
aFunction
)
;
GMPErr
SetTimerOnMainThread
(
GMPTask
*
aTask
int64_t
aTimeoutMS
)
;
using
SpinPendingPredicate
=
std
:
:
function
<
bool
(
)
>
;
bool
SpinPendingGmpEventsUntil
(
const
SpinPendingPredicate
&
aPred
uint32_t
aTimeoutMs
)
;
void
SendFOGData
(
ipc
:
:
ByteBuf
&
&
buf
)
;
#
ifdef
XP_WIN
RefPtr
<
PGMPChild
:
:
GetModulesTrustPromise
>
SendGetModulesTrust
(
ModulePaths
&
&
aModules
bool
aRunNormal
)
;
#
endif
}
}
#
endif
