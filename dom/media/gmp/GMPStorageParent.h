#
ifndef
GMPStorageParent_h_
#
define
GMPStorageParent_h_
#
include
"
GMPStorage
.
h
"
#
include
"
mozilla
/
gmp
/
PGMPStorageParent
.
h
"
namespace
mozilla
:
:
gmp
{
class
GMPParent
;
class
GMPStorageParent
:
public
PGMPStorageParent
{
friend
class
PGMPStorageParent
;
public
:
NS_INLINE_DECL_REFCOUNTING
(
GMPStorageParent
)
GMPStorageParent
(
const
nsACString
&
aNodeId
GMPParent
*
aPlugin
)
;
nsresult
Init
(
)
;
void
Shutdown
(
)
;
protected
:
mozilla
:
:
ipc
:
:
IPCResult
RecvOpen
(
const
nsACString
&
aRecordName
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvRead
(
const
nsACString
&
aRecordName
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvWrite
(
const
nsACString
&
aRecordName
nsTArray
<
uint8_t
>
&
&
aBytes
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvClose
(
const
nsACString
&
aRecordName
)
override
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
private
:
~
GMPStorageParent
(
)
=
default
;
RefPtr
<
GMPStorage
>
mStorage
;
const
nsCString
mNodeId
;
RefPtr
<
GMPParent
>
mPlugin
;
bool
mShutdown
;
}
;
}
#
endif
