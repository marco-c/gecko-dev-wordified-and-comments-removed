#
ifndef
GMPCrashHelperHolder_h_
#
define
GMPCrashHelperHolder_h_
#
include
"
GMPService
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsPIDOMWindow
.
h
"
#
include
"
mozilla
/
ipc
/
ProtocolUtils
.
h
"
namespace
mozilla
{
class
GMPCrashHelper
;
class
GMPCrashHelperHolder
{
public
:
void
SetCrashHelper
(
GMPCrashHelper
*
aHelper
)
{
mCrashHelper
=
aHelper
;
}
GMPCrashHelper
*
GetCrashHelper
(
)
{
return
mCrashHelper
;
}
void
MaybeDisconnect
(
bool
aAbnormalShutdown
)
{
if
(
!
aAbnormalShutdown
)
{
RefPtr
<
gmp
:
:
GeckoMediaPluginService
>
service
(
gmp
:
:
GeckoMediaPluginService
:
:
GetGeckoMediaPluginService
(
)
)
;
service
-
>
DisconnectCrashHelper
(
GetCrashHelper
(
)
)
;
}
}
private
:
RefPtr
<
GMPCrashHelper
>
mCrashHelper
;
}
;
}
#
endif
