#
ifndef
GMPVideoHost_h_
#
define
GMPVideoHost_h_
#
include
"
gmp
-
video
-
host
.
h
"
#
include
"
gmp
-
video
-
plane
.
h
"
#
include
"
gmp
-
video
-
frame
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
gmp
{
class
GMPSharedMemManager
;
class
GMPPlaneImpl
;
class
GMPVideoEncodedFrameImpl
;
class
GMPVideoHostImpl
:
public
GMPVideoHost
{
public
:
explicit
GMPVideoHostImpl
(
GMPSharedMemManager
*
aSharedMemMgr
)
;
virtual
~
GMPVideoHostImpl
(
)
;
GMPSharedMemManager
*
SharedMemMgr
(
)
;
void
DoneWithAPI
(
)
;
void
ActorDestroyed
(
)
;
void
PlaneCreated
(
GMPPlaneImpl
*
aPlane
)
;
void
PlaneDestroyed
(
GMPPlaneImpl
*
aPlane
)
;
void
EncodedFrameCreated
(
GMPVideoEncodedFrameImpl
*
aEncodedFrame
)
;
void
EncodedFrameDestroyed
(
GMPVideoEncodedFrameImpl
*
aFrame
)
;
GMPErr
CreateFrame
(
GMPVideoFrameFormat
aFormat
GMPVideoFrame
*
*
aFrame
)
override
;
GMPErr
CreatePlane
(
GMPPlane
*
*
aPlane
)
override
;
private
:
GMPSharedMemManager
*
mSharedMemMgr
;
nsTArray
<
GMPPlaneImpl
*
>
mPlanes
;
nsTArray
<
GMPVideoEncodedFrameImpl
*
>
mEncodedFrames
;
}
;
}
}
#
endif
