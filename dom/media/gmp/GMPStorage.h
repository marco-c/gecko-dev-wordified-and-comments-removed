#
ifndef
GMPStorage_h_
#
define
GMPStorage_h_
#
include
"
gmp
-
storage
.
h
"
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
:
:
gmp
{
class
GMPStorage
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
GMPStorage
)
virtual
GMPErr
Open
(
const
nsACString
&
aRecordName
)
=
0
;
virtual
bool
IsOpen
(
const
nsACString
&
aRecordName
)
const
=
0
;
virtual
GMPErr
Read
(
const
nsACString
&
aRecordName
nsTArray
<
uint8_t
>
&
aOutBytes
)
=
0
;
virtual
GMPErr
Write
(
const
nsACString
&
aRecordName
const
nsTArray
<
uint8_t
>
&
aBytes
)
=
0
;
virtual
void
Close
(
const
nsACString
&
aRecordName
)
=
0
;
protected
:
virtual
~
GMPStorage
(
)
=
default
;
}
;
already_AddRefed
<
GMPStorage
>
CreateGMPMemoryStorage
(
const
nsACString
&
aNodeId
const
nsAString
&
aGMPName
)
;
already_AddRefed
<
GMPStorage
>
CreateGMPDiskStorage
(
const
nsACString
&
aNodeId
const
nsAString
&
aGMPName
)
;
}
#
endif
