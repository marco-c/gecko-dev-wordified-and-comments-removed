#
ifndef
mozilla_CameraUtils_h
#
define
mozilla_CameraUtils_h
#
include
"
nsThreadUtils
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
"
base
/
thread
.
h
"
namespace
mozilla
{
namespace
camera
{
nsresult
SynchronouslyCreatePBackground
(
)
;
class
ThreadDestructor
:
public
nsRunnable
{
DISALLOW_COPY_AND_ASSIGN
(
ThreadDestructor
)
;
public
:
explicit
ThreadDestructor
(
nsIThread
*
aThread
)
:
mThread
(
aThread
)
{
}
NS_IMETHOD
Run
(
)
override
{
if
(
mThread
)
{
mThread
-
>
Shutdown
(
)
;
}
return
NS_OK
;
}
private
:
~
ThreadDestructor
(
)
{
}
nsCOMPtr
<
nsIThread
>
mThread
;
}
;
class
RunnableTask
:
public
Task
{
public
:
explicit
RunnableTask
(
nsRunnable
*
aRunnable
)
:
mRunnable
(
aRunnable
)
{
}
void
Run
(
)
override
{
mRunnable
-
>
Run
(
)
;
}
private
:
~
RunnableTask
(
)
{
}
nsRefPtr
<
nsRunnable
>
mRunnable
;
}
;
}
}
#
endif
