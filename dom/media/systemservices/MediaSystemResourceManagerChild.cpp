#
include
"
MediaSystemResourceManager
.
h
"
#
include
"
MediaSystemResourceManagerChild
.
h
"
namespace
mozilla
{
namespace
media
{
MediaSystemResourceManagerChild
:
:
MediaSystemResourceManagerChild
(
)
:
mDestroyed
(
false
)
mManager
(
nullptr
)
{
}
MediaSystemResourceManagerChild
:
:
~
MediaSystemResourceManagerChild
(
)
{
}
mozilla
:
:
ipc
:
:
IPCResult
MediaSystemResourceManagerChild
:
:
RecvResponse
(
const
uint32_t
&
aId
const
bool
&
aSuccess
)
{
if
(
mManager
)
{
mManager
-
>
RecvResponse
(
aId
aSuccess
)
;
}
return
IPC_OK
(
)
;
}
void
MediaSystemResourceManagerChild
:
:
ActorDestroy
(
ActorDestroyReason
aActorDestroyReason
)
{
MOZ_ASSERT
(
!
mDestroyed
)
;
if
(
mManager
)
{
mManager
-
>
OnIpcClosed
(
)
;
}
mDestroyed
=
true
;
}
void
MediaSystemResourceManagerChild
:
:
Destroy
(
)
{
if
(
mDestroyed
)
{
return
;
}
SendRemoveResourceManager
(
)
;
}
}
}
