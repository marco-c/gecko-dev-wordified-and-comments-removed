#
ifndef
RTC_BASE_PLATFORM_UITHREAD_H_
#
define
RTC_BASE_PLATFORM_UITHREAD_H_
#
if
defined
(
WEBRTC_WIN
)
#
include
"
Assertions
.
h
"
#
include
"
rtc_base
/
platform_thread
.
h
"
#
include
"
rtc_base
/
deprecated
/
recursive_critical_section
.
h
"
#
include
"
ThreadSafety
.
h
"
namespace
rtc
{
class
PlatformUIThread
:
public
PlatformThread
{
public
:
PlatformUIThread
(
ThreadRunFunction
func
void
*
obj
const
char
*
thread_name
)
:
PlatformThread
(
func
obj
thread_name
)
{
MOZ_ASSERT
(
func
)
;
}
virtual
~
PlatformUIThread
(
)
;
void
Stop
(
)
override
;
bool
RequestCallbackTimer
(
unsigned
int
milliseconds
)
;
protected
:
void
Run
(
)
override
;
private
:
static
LRESULT
CALLBACK
EventWindowProc
(
HWND
UINT
WPARAM
LPARAM
)
;
void
NativeEventCallback
(
)
;
bool
InternalInit
(
)
;
HWND
hwnd_
MOZ_GUARDED_BY
(
cs_
)
=
nullptr
;
UINT_PTR
timerid_
MOZ_GUARDED_BY
(
cs_
)
=
0
;
unsigned
int
timeout_
MOZ_GUARDED_BY
(
cs_
)
=
0
;
enum
class
State
{
UNSTARTED
STARTED
STOPPED
}
;
State
state_
MOZ_GUARDED_BY
(
cs_
)
=
State
:
:
UNSTARTED
;
}
;
}
#
endif
#
endif
