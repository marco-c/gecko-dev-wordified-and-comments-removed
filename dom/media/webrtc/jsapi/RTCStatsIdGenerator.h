#
ifndef
_RTCSTATSIDGENERATOR_H_
#
define
_RTCSTATSIDGENERATOR_H_
#
include
<
map
>
#
include
"
mozilla
/
Atomics
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
namespace
dom
{
struct
RTCStatsCollection
;
}
class
RTCStatsIdGenerator
{
public
:
RTCStatsIdGenerator
(
)
;
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
RTCStatsIdGenerator
)
;
void
RewriteIds
(
nsTArray
<
UniquePtr
<
dom
:
:
RTCStatsCollection
>
>
aFromStats
dom
:
:
RTCStatsCollection
*
aIntoReport
)
;
private
:
virtual
~
RTCStatsIdGenerator
(
)
{
}
;
nsString
Id
(
const
nsString
&
aKey
)
;
nsString
Generate
(
)
;
const
uint64_t
mSalt
;
uint64_t
mCounter
;
std
:
:
map
<
nsString
nsString
>
mAllocated
;
}
;
}
#
endif
