#
ifndef
MOZILLA_DOM_MEDIA_WEBRTC_JSAPI_RTCENCODEDAUDIOFRAME_H_
#
define
MOZILLA_DOM_MEDIA_WEBRTC_JSAPI_RTCENCODEDAUDIOFRAME_H_
#
include
"
jsapi
/
RTCEncodedFrameBase
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
dom
/
RTCEncodedAudioFrameBinding
.
h
"
#
include
"
nsIGlobalObject
.
h
"
namespace
mozilla
:
:
dom
{
struct
RTCEncodedAudioFrameData
:
RTCEncodedFrameState
{
RTCEncodedAudioFrameMetadata
mMetadata
;
}
;
class
RTCEncodedAudioFrame
final
:
public
RTCEncodedAudioFrameData
public
RTCEncodedFrameBase
{
public
:
explicit
RTCEncodedAudioFrame
(
nsIGlobalObject
*
aGlobal
std
:
:
unique_ptr
<
webrtc
:
:
TransformableFrameInterface
>
aFrame
uint64_t
aCounter
RTCRtpScriptTransformer
*
aOwner
)
;
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
RTCEncodedAudioFrame
RTCEncodedFrameBase
)
JSObject
*
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
override
;
nsIGlobalObject
*
GetParentObject
(
)
const
;
void
GetMetadata
(
RTCEncodedAudioFrameMetadata
&
aMetadata
)
const
;
bool
CheckOwner
(
RTCRtpScriptTransformer
*
aOwner
)
const
override
;
bool
IsVideo
(
)
const
override
{
return
false
;
}
static
already_AddRefed
<
RTCEncodedAudioFrame
>
ReadStructuredClone
(
JSContext
*
aCx
nsIGlobalObject
*
aGlobal
JSStructuredCloneReader
*
aReader
)
;
bool
WriteStructuredClone
(
JSContext
*
aCx
JSStructuredCloneWriter
*
aWriter
)
const
;
private
:
virtual
~
RTCEncodedAudioFrame
(
)
;
RTCEncodedAudioFrame
(
const
RTCEncodedAudioFrame
&
)
=
delete
;
RTCEncodedAudioFrame
&
operator
=
(
const
RTCEncodedAudioFrame
&
)
=
delete
;
RTCEncodedAudioFrame
(
RTCEncodedAudioFrame
&
&
)
=
delete
;
RTCEncodedAudioFrame
&
operator
=
(
RTCEncodedAudioFrame
&
&
)
=
delete
;
RefPtr
<
RTCRtpScriptTransformer
>
mOwner
;
}
;
}
#
endif
