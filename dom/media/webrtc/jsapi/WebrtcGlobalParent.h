#
ifndef
_WEBRTC_GLOBAL_PARENT_H_
#
define
_WEBRTC_GLOBAL_PARENT_H_
#
include
"
mozilla
/
dom
/
PWebrtcGlobalParent
.
h
"
#
include
"
nsISupportsImpl
.
h
"
namespace
mozilla
:
:
dom
{
class
WebrtcParents
;
class
WebrtcGlobalParent
:
public
PWebrtcGlobalParent
{
friend
class
ContentParent
;
friend
class
WebrtcGlobalInformation
;
friend
class
WebrtcContentParents
;
bool
mShutdown
;
nsTHashSet
<
nsString
>
mPcids
;
MOZ_IMPLICIT
WebrtcGlobalParent
(
)
;
static
WebrtcGlobalParent
*
Alloc
(
)
;
static
bool
Dealloc
(
WebrtcGlobalParent
*
aActor
)
;
virtual
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
Recv__delete__
(
)
override
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPeerConnectionCreated
(
const
nsAString
&
aPcId
const
bool
&
aIsLongTermStatsDisabled
)
override
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPeerConnectionDestroyed
(
const
nsAString
&
aPcid
)
override
;
virtual
mozilla
:
:
ipc
:
:
IPCResult
RecvPeerConnectionFinalStats
(
const
RTCStatsReportInternal
&
aFinalStats
)
override
;
virtual
~
WebrtcGlobalParent
(
)
;
public
:
NS_INLINE_DECL_REFCOUNTING
(
WebrtcGlobalParent
)
bool
IsActive
(
)
{
return
!
mShutdown
;
}
}
;
}
#
endif
