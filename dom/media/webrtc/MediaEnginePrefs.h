#
ifndef
MediaEnginePrefs_h
#
define
MediaEnginePrefs_h
#
include
<
stdint
.
h
>
#
include
<
string
.
h
>
#
include
"
mozilla
/
dom
/
MediaStreamTrackBinding
.
h
"
namespace
mozilla
{
class
MediaEnginePrefs
{
public
:
static
const
int
DEFAULT_VIDEO_FPS
=
30
;
static
const
int
DEFAULT_43_VIDEO_WIDTH
=
640
;
static
const
int
DEFAULT_43_VIDEO_HEIGHT
=
480
;
static
const
int
DEFAULT_169_VIDEO_WIDTH
=
1280
;
static
const
int
DEFAULT_169_VIDEO_HEIGHT
=
720
;
MediaEnginePrefs
(
)
:
mWidth
(
0
)
mHeight
(
0
)
mResizeModeEnabled
(
false
)
mResizeMode
(
dom
:
:
VideoResizeModeEnum
:
:
None
)
mFPS
(
0
)
mFreq
(
0
)
mUsePlatformProcessing
(
false
)
mAecOn
(
false
)
mUseAecMobile
(
false
)
mAgcOn
(
false
)
mHPFOn
(
false
)
mNoiseOn
(
false
)
mTransientOn
(
false
)
mAgc2Forced
(
false
)
mExpectDrift
(
-
1
)
mAgc
(
0
)
mNoise
(
0
)
mChannels
(
0
)
{
}
int32_t
mWidth
;
int32_t
mHeight
;
bool
mResizeModeEnabled
;
dom
:
:
VideoResizeModeEnum
mResizeMode
;
int32_t
mFPS
;
int32_t
mFreq
;
bool
mUsePlatformProcessing
;
bool
mAecOn
;
bool
mUseAecMobile
;
bool
mAgcOn
;
bool
mHPFOn
;
bool
mNoiseOn
;
bool
mTransientOn
;
bool
mAgc2Forced
;
int32_t
mExpectDrift
;
int32_t
mAgc
;
int32_t
mNoise
;
int32_t
mChannels
;
bool
operator
=
=
(
const
MediaEnginePrefs
&
aRhs
)
{
return
memcmp
(
this
&
aRhs
sizeof
(
MediaEnginePrefs
)
)
=
=
0
;
}
;
int32_t
GetWidth
(
bool
aHD
=
false
)
const
{
return
mWidth
?
mWidth
:
(
mHeight
?
(
mHeight
*
GetDefWidth
(
aHD
)
)
/
GetDefHeight
(
aHD
)
:
GetDefWidth
(
aHD
)
)
;
}
int32_t
GetHeight
(
bool
aHD
=
false
)
const
{
return
mHeight
?
mHeight
:
(
mWidth
?
(
mWidth
*
GetDefHeight
(
aHD
)
)
/
GetDefWidth
(
aHD
)
:
GetDefHeight
(
aHD
)
)
;
}
private
:
static
int32_t
GetDefWidth
(
bool
aHD
=
false
)
{
if
(
aHD
)
{
return
DEFAULT_169_VIDEO_WIDTH
;
}
return
DEFAULT_43_VIDEO_WIDTH
;
}
static
int32_t
GetDefHeight
(
bool
aHD
=
false
)
{
if
(
aHD
)
{
return
DEFAULT_169_VIDEO_HEIGHT
;
}
return
DEFAULT_43_VIDEO_HEIGHT
;
}
}
;
}
#
endif
