#
ifndef
MEDIAENGINEWEBRTC_H_
#
define
MEDIAENGINEWEBRTC_H_
#
include
"
CubebDeviceEnumerator
.
h
"
#
include
"
MediaEngine
.
h
"
#
include
"
MediaEngineSource
.
h
"
#
include
"
MediaEventSource
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
dom
/
MediaStreamTrackBinding
.
h
"
#
include
"
nsTArray
.
h
"
namespace
mozilla
{
class
MediaEngineWebRTC
:
public
MediaEngine
{
public
:
MediaEngineWebRTC
(
)
;
void
Shutdown
(
)
override
;
void
EnumerateDevices
(
dom
:
:
MediaSourceEnum
MediaSinkEnum
nsTArray
<
RefPtr
<
MediaDevice
>
>
*
)
override
;
RefPtr
<
MediaEngineSource
>
CreateSource
(
const
MediaDevice
*
aDevice
)
override
;
MediaEventSource
<
void
>
&
DeviceListChangeEvent
(
)
override
{
return
mDeviceListChangeEvent
;
}
bool
IsFake
(
)
const
override
{
return
false
;
}
private
:
~
MediaEngineWebRTC
(
)
=
default
;
void
EnumerateVideoDevices
(
dom
:
:
MediaSourceEnum
nsTArray
<
RefPtr
<
MediaDevice
>
>
*
)
;
void
EnumerateMicrophoneDevices
(
nsTArray
<
RefPtr
<
MediaDevice
>
>
*
)
;
void
EnumerateSpeakerDevices
(
nsTArray
<
RefPtr
<
MediaDevice
>
>
*
)
;
void
DeviceListChanged
(
)
{
mDeviceListChangeEvent
.
Notify
(
)
;
}
MediaEventListener
mCameraListChangeListener
;
MediaEventListener
mMicrophoneListChangeListener
;
MediaEventListener
mSpeakerListChangeListener
;
MediaEventProducer
<
void
>
mDeviceListChangeEvent
;
}
;
}
#
endif
