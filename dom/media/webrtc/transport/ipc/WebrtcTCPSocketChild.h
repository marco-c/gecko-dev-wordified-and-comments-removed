#
ifndef
mozilla_net_WebrtcTCPSocketChild_h
#
define
mozilla_net_WebrtcTCPSocketChild_h
#
include
"
mozilla
/
dom
/
ipc
/
IdType
.
h
"
#
include
"
mozilla
/
net
/
PWebrtcTCPSocketChild
.
h
"
#
include
"
transport
/
nr_socket_proxy_config
.
h
"
namespace
mozilla
:
:
net
{
class
WebrtcTCPSocketCallback
;
class
WebrtcTCPSocketChild
:
public
PWebrtcTCPSocketChild
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
WebrtcTCPSocketChild
)
mozilla
:
:
ipc
:
:
IPCResult
RecvOnClose
(
const
nsresult
&
aReason
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnConnected
(
const
nsACString
&
aProxyType
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnRead
(
nsTArray
<
uint8_t
>
&
&
aReadData
)
override
;
explicit
WebrtcTCPSocketChild
(
WebrtcTCPSocketCallback
*
aProxyCallbacks
)
;
void
AsyncOpen
(
const
nsACString
&
aHost
const
int
&
aPort
const
nsACString
&
aLocalAddress
const
int
&
aLocalPort
bool
aUseTls
const
std
:
:
shared_ptr
<
NrSocketProxyConfig
>
&
aProxyConfig
)
;
void
AddIPDLReference
(
)
{
AddRef
(
)
;
}
void
ReleaseIPDLReference
(
)
{
Release
(
)
;
}
protected
:
virtual
~
WebrtcTCPSocketChild
(
)
;
RefPtr
<
WebrtcTCPSocketCallback
>
mProxyCallbacks
;
}
;
}
#
endif
