#
ifndef
transportlayerice_h__
#
define
transportlayerice_h__
#
include
"
m_cpp_utils
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nricemediastream
.
h
"
#
include
"
sigslot
.
h
"
#
include
"
transportlayer
.
h
"
namespace
mozilla
{
class
TransportLayerIce
:
public
TransportLayer
{
public
:
TransportLayerIce
(
)
;
virtual
~
TransportLayerIce
(
)
;
void
SetParameters
(
RefPtr
<
NrIceMediaStream
>
stream
int
component
)
;
void
ResetOldStream
(
)
;
void
RestoreOldStream
(
)
;
TransportResult
SendPacket
(
MediaPacket
&
packet
)
override
;
void
IceCandidate
(
NrIceMediaStream
*
stream
const
std
:
:
string
&
)
;
void
IceReady
(
NrIceMediaStream
*
stream
)
;
void
IceFailed
(
NrIceMediaStream
*
stream
)
;
void
IcePacketReceived
(
NrIceMediaStream
*
stream
int
component
const
unsigned
char
*
data
int
len
)
;
sigslot
:
:
signal2
<
TransportLayer
*
MediaPacket
&
>
SignalPacketSending
;
TRANSPORT_LAYER_ID
(
"
ice
"
)
private
:
DISALLOW_COPY_ASSIGN
(
TransportLayerIce
)
;
void
PostSetup
(
)
;
RefPtr
<
NrIceMediaStream
>
stream_
;
int
component_
;
}
;
}
#
endif
