#
ifndef
mediapipelinefilter_h__
#
define
mediapipelinefilter_h__
#
include
<
cstddef
>
#
include
<
stdint
.
h
>
#
include
<
string
>
#
include
<
set
>
#
include
<
vector
>
#
include
"
mozilla
/
Maybe
.
h
"
namespace
webrtc
{
struct
RTPHeader
;
struct
RtpExtension
;
}
namespace
mozilla
{
class
MediaPipelineFilter
{
public
:
MediaPipelineFilter
(
)
=
default
;
explicit
MediaPipelineFilter
(
const
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
&
aExtMap
)
;
bool
Filter
(
const
webrtc
:
:
RTPHeader
&
header
)
;
void
AddRemoteSSRC
(
uint32_t
ssrc
)
;
void
AddRemoteRtpStreamId
(
const
std
:
:
string
&
rtp_strm_id
)
;
void
AddRtpExtensionMapping
(
const
webrtc
:
:
RtpExtension
&
aExt
)
;
void
SetRemoteMediaStreamId
(
const
Maybe
<
std
:
:
string
>
&
aMid
)
;
void
AddUniquePT
(
uint8_t
payload_type
)
;
void
Update
(
const
MediaPipelineFilter
&
filter_update
)
;
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
GetExtmap
(
)
const
{
return
mExtMap
;
}
private
:
Maybe
<
webrtc
:
:
RtpExtension
>
GetRtpExtension
(
const
std
:
:
string
&
aUri
)
const
;
std
:
:
set
<
uint32_t
>
remote_ssrc_set_
;
std
:
:
set
<
uint8_t
>
payload_type_set_
;
std
:
:
set
<
std
:
:
string
>
remote_rid_set_
;
Maybe
<
std
:
:
string
>
mRemoteMid
;
std
:
:
set
<
uint32_t
>
mRemoteMidBindings
;
std
:
:
vector
<
webrtc
:
:
RtpExtension
>
mExtMap
;
}
;
}
#
endif
