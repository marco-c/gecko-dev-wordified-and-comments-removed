#
ifndef
DecryptorProxyCallback_h_
#
define
DecryptorProxyCallback_h_
#
include
"
mozilla
/
dom
/
MediaKeyStatusMapBinding
.
h
"
#
include
"
mozilla
/
dom
/
MediaKeyMessageEventBinding
.
h
"
#
include
"
mozilla
/
CDMProxy
.
h
"
class
DecryptorProxyCallback
{
public
:
virtual
~
DecryptorProxyCallback
(
)
{
}
virtual
void
SetSessionId
(
uint32_t
aCreateSessionId
const
nsCString
&
aSessionId
)
=
0
;
virtual
void
ResolveLoadSessionPromise
(
uint32_t
aPromiseId
bool
aSuccess
)
=
0
;
virtual
void
ResolvePromise
(
uint32_t
aPromiseId
)
=
0
;
virtual
void
RejectPromise
(
uint32_t
aPromiseId
nsresult
aException
const
nsCString
&
aSessionId
)
=
0
;
virtual
void
SessionMessage
(
const
nsCString
&
aSessionId
mozilla
:
:
dom
:
:
MediaKeyMessageType
aMessageType
const
nsTArray
<
uint8_t
>
&
aMessage
)
=
0
;
virtual
void
ExpirationChange
(
const
nsCString
&
aSessionId
mozilla
:
:
UnixTime
aExpiryTime
)
=
0
;
virtual
void
SessionClosed
(
const
nsCString
&
aSessionId
)
=
0
;
virtual
void
SessionError
(
const
nsCString
&
aSessionId
nsresult
aException
uint32_t
aSystemCode
const
nsCString
&
aMessage
)
=
0
;
virtual
void
Decrypted
(
uint32_t
aId
mozilla
:
:
DecryptStatus
aResult
const
nsTArray
<
uint8_t
>
&
aDecryptedData
)
=
0
;
virtual
void
BatchedKeyStatusChanged
(
const
nsCString
&
aSessionId
const
nsTArray
<
mozilla
:
:
CDMKeyInfo
>
&
aKeyInfos
)
=
0
;
}
;
#
endif
