#
ifndef
__DetailedPromise_h__
#
define
__DetailedPromise_h__
#
include
"
mozilla
/
dom
/
Promise
.
h
"
#
include
"
EMEUtils
.
h
"
namespace
mozilla
{
namespace
dom
{
class
DetailedPromise
:
public
Promise
{
public
:
static
already_AddRefed
<
DetailedPromise
>
Create
(
nsIGlobalObject
*
aGlobal
ErrorResult
&
aRv
const
nsACString
&
aName
)
;
template
<
typename
T
>
void
MaybeResolve
(
const
T
&
aArg
)
{
EME_LOG
(
"
%
s
promise
resolved
"
mName
.
get
(
)
)
;
mResponded
=
true
;
Promise
:
:
MaybeResolve
<
T
>
(
aArg
)
;
}
void
MaybeReject
(
nsresult
aArg
)
=
delete
;
void
MaybeReject
(
nsresult
aArg
const
nsACString
&
aReason
)
;
void
MaybeReject
(
ErrorResult
&
aArg
)
=
delete
;
void
MaybeReject
(
ErrorResult
&
const
nsACString
&
aReason
)
;
private
:
explicit
DetailedPromise
(
nsIGlobalObject
*
aGlobal
const
nsACString
&
aName
)
;
virtual
~
DetailedPromise
(
)
;
nsCString
mName
;
bool
mResponded
;
}
;
}
}
#
endif
