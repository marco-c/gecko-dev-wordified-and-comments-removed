#
ifndef
DOM_MEDIA_EME_MEDIAKEYSYSTEMACCESSPERMISSIONREQUEST_H_
#
define
DOM_MEDIA_EME_MEDIAKEYSYSTEMACCESSPERMISSIONREQUEST_H_
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
nsContentPermissionHelper
.
h
"
class
nsGlobalWindowInner
;
namespace
mozilla
{
namespace
dom
{
class
MediaKeySystemAccessPermissionRequest
:
public
ContentPermissionRequestBase
{
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
MediaKeySystemAccessPermissionRequest
ContentPermissionRequestBase
)
using
RequestPromise
=
MozPromise
<
bool
bool
true
>
;
static
already_AddRefed
<
MediaKeySystemAccessPermissionRequest
>
Create
(
nsPIDOMWindowInner
*
aWindow
)
;
already_AddRefed
<
RequestPromise
>
GetPromise
(
)
;
nsresult
Start
(
)
;
NS_IMETHOD
Cancel
(
void
)
override
;
NS_IMETHOD
Allow
(
JS
:
:
HandleValue
choices
)
override
;
private
:
explicit
MediaKeySystemAccessPermissionRequest
(
nsGlobalWindowInner
*
aWindow
)
;
~
MediaKeySystemAccessPermissionRequest
(
)
;
MozPromiseHolder
<
RequestPromise
>
mPromiseHolder
;
}
;
}
}
#
endif
