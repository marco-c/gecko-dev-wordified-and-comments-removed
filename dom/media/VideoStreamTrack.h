#
ifndef
VIDEOSTREAMTRACK_H_
#
define
VIDEOSTREAMTRACK_H_
#
include
"
MediaStreamTrack
.
h
"
#
include
"
DOMMediaStream
.
h
"
namespace
mozilla
{
class
VideoFrameContainer
;
class
VideoOutput
;
namespace
dom
{
class
VideoStreamTrack
:
public
MediaStreamTrack
{
public
:
VideoStreamTrack
(
nsPIDOMWindowInner
*
aWindow
mozilla
:
:
MediaTrack
*
aInputTrack
MediaStreamTrackSource
*
aSource
MediaStreamTrackState
aState
=
MediaStreamTrackState
:
:
Live
bool
aMuted
=
false
const
MediaTrackConstraints
&
aConstraints
=
MediaTrackConstraints
(
)
)
;
void
Destroy
(
)
override
;
VideoStreamTrack
*
AsVideoStreamTrack
(
)
override
{
return
this
;
}
const
VideoStreamTrack
*
AsVideoStreamTrack
(
)
const
override
{
return
this
;
}
void
AddVideoOutput
(
VideoFrameContainer
*
aSink
)
;
void
AddVideoOutput
(
VideoOutput
*
aOutput
)
;
void
RemoveVideoOutput
(
VideoFrameContainer
*
aSink
)
;
void
RemoveVideoOutput
(
VideoOutput
*
aOutput
)
;
bool
HasAlpha
(
)
const
{
return
GetSource
(
)
.
HasAlpha
(
)
;
}
void
GetKind
(
nsAString
&
aKind
)
override
{
aKind
.
AssignLiteral
(
"
video
"
)
;
}
void
GetLabel
(
nsAString
&
aLabel
CallerType
aCallerType
)
override
;
protected
:
already_AddRefed
<
MediaStreamTrack
>
CloneInternal
(
)
override
;
private
:
nsTArray
<
RefPtr
<
VideoOutput
>
>
mVideoOutputs
;
}
;
}
}
#
endif
