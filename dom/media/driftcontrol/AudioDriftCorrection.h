#
ifndef
DOM_MEDIA_DRIFTCONTROL_AUDIODRIFTCORRECTION_H_
#
define
DOM_MEDIA_DRIFTCONTROL_AUDIODRIFTCORRECTION_H_
#
include
"
AudioSegment
.
h
"
namespace
mozilla
{
class
AudioResampler
;
class
ClockDrift
;
class
AudioDriftCorrection
final
{
const
uint32_t
kMinBufferMs
=
5
;
public
:
AudioDriftCorrection
(
uint32_t
aSourceRate
uint32_t
aTargetRate
uint32_t
aBufferMs
const
PrincipalHandle
&
aPrincipalHandle
)
;
~
AudioDriftCorrection
(
)
;
AudioSegment
RequestFrames
(
const
AudioSegment
&
aInput
uint32_t
aOutputFrames
)
;
uint32_t
CurrentBuffering
(
)
const
;
uint32_t
NumCorrectionChanges
(
)
const
;
const
uint32_t
mDesiredBuffering
;
const
uint32_t
mTargetRate
;
private
:
const
UniquePtr
<
ClockDrift
>
mClockDrift
;
const
UniquePtr
<
AudioResampler
>
mResampler
;
}
;
}
#
endif
