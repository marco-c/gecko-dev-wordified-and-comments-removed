#
ifndef
DOM_MEDIA_DRIFTCONTROL_AUDIODRIFTCORRECTION_H_
#
define
DOM_MEDIA_DRIFTCONTROL_AUDIODRIFTCORRECTION_H_
#
include
"
AudioSegment
.
h
"
namespace
mozilla
{
class
AudioResampler
;
class
DriftController
;
class
AudioDriftCorrection
final
{
public
:
AudioDriftCorrection
(
uint32_t
aSourceRate
uint32_t
aTargetRate
const
PrincipalHandle
&
aPrincipalHandle
)
;
~
AudioDriftCorrection
(
)
;
AudioSegment
RequestFrames
(
const
AudioSegment
&
aInput
uint32_t
aOutputFrames
)
;
uint32_t
CurrentBuffering
(
)
const
;
uint32_t
BufferSize
(
)
const
;
uint32_t
NumCorrectionChanges
(
)
const
;
const
uint32_t
mTargetRate
;
private
:
void
SetDesiredBuffering
(
uint32_t
aDesiredBufferingFrames
)
;
uint32_t
mDesiredBufferingFrames
=
0
;
const
UniquePtr
<
DriftController
>
mDriftController
;
const
UniquePtr
<
AudioResampler
>
mResampler
;
}
;
}
#
endif
