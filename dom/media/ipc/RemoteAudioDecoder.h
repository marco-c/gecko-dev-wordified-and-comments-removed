#
ifndef
include_dom_media_ipc_RemoteAudioDecoderChild_h
#
define
include_dom_media_ipc_RemoteAudioDecoderChild_h
#
include
"
RemoteDecoderChild
.
h
"
#
include
"
RemoteDecoderParent
.
h
"
namespace
mozilla
{
using
mozilla
:
:
ipc
:
:
IPCResult
;
class
RemoteAudioDecoderChild
final
:
public
RemoteDecoderChild
{
public
:
explicit
RemoteAudioDecoderChild
(
RemoteDecodeIn
aLocation
)
;
MOZ_IS_CLASS_INIT
MediaResult
InitIPDL
(
const
AudioInfo
&
aAudioInfo
const
CreateDecoderParams
:
:
OptionSet
&
aOptions
const
Maybe
<
uint64_t
>
&
aMediaEngineId
)
;
MediaResult
ProcessOutput
(
DecodedOutputIPDL
&
&
aDecodedData
)
override
;
}
;
class
RemoteAudioDecoderParent
final
:
public
RemoteDecoderParent
{
public
:
RemoteAudioDecoderParent
(
RemoteDecoderManagerParent
*
aParent
const
AudioInfo
&
aAudioInfo
const
CreateDecoderParams
:
:
OptionSet
&
aOptions
nsISerialEventTarget
*
aManagerThread
TaskQueue
*
aDecodeTaskQueue
Maybe
<
uint64_t
>
aMediaEngineId
)
;
protected
:
IPCResult
RecvConstruct
(
ConstructResolver
&
&
aResolver
)
override
;
MediaResult
ProcessDecodedData
(
MediaDataDecoder
:
:
DecodedData
&
&
aData
DecodedOutputIPDL
&
aDecodedData
)
override
;
private
:
const
AudioInfo
mAudioInfo
;
const
CreateDecoderParams
:
:
OptionSet
mOptions
;
}
;
}
#
endif
