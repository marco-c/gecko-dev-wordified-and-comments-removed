#
ifndef
include_dom_media_ipc_RemoteDecoderManagerChild_h
#
define
include_dom_media_ipc_RemoteDecoderManagerChild_h
#
include
"
mozilla
/
PRemoteDecoderManagerChild
.
h
"
namespace
mozilla
{
class
RemoteDecoderManagerChild
final
:
public
PRemoteDecoderManagerChild
{
friend
class
PRemoteDecoderManagerChild
;
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
RemoteDecoderManagerChild
)
static
RemoteDecoderManagerChild
*
GetSingleton
(
)
;
static
nsIThread
*
GetManagerThread
(
)
;
static
AbstractThread
*
GetManagerAbstractThread
(
)
;
static
void
InitForContent
(
Endpoint
<
PRemoteDecoderManagerChild
>
&
&
aVideoManager
)
;
static
void
Shutdown
(
)
;
bool
CanSend
(
)
;
protected
:
void
InitIPDL
(
)
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
void
DeallocPRemoteDecoderManagerChild
(
)
override
;
PRemoteDecoderChild
*
AllocPRemoteDecoderChild
(
const
RemoteDecoderInfoIPDL
&
aRemoteDecoderInfo
const
CreateDecoderParams
:
:
OptionSet
&
aOptions
bool
*
aSuccess
nsCString
*
aErrorDescription
)
;
bool
DeallocPRemoteDecoderChild
(
PRemoteDecoderChild
*
actor
)
;
private
:
static
void
InitializeThread
(
)
;
RemoteDecoderManagerChild
(
)
=
default
;
~
RemoteDecoderManagerChild
(
)
=
default
;
static
void
Open
(
Endpoint
<
PRemoteDecoderManagerChild
>
&
&
aEndpoint
)
;
RefPtr
<
RemoteDecoderManagerChild
>
mIPDLSelfRef
;
bool
mCanSend
=
false
;
}
;
}
#
endif
