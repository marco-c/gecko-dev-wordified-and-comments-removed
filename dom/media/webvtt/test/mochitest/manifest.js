function
removeNodeAndSource
(
n
)
{
n
.
remove
(
)
;
n
.
srcObject
=
null
;
n
.
removeAttribute
(
"
src
"
)
;
n
.
load
(
)
;
while
(
n
.
firstChild
)
{
n
.
firstChild
.
remove
(
)
;
}
}
function
once
(
target
name
cb
)
{
var
p
=
new
Promise
(
function
(
resolve
reject
)
{
target
.
addEventListener
(
name
function
(
)
{
resolve
(
)
;
}
{
once
:
true
}
)
;
}
)
;
if
(
cb
)
{
p
.
then
(
cb
)
;
}
return
p
;
}
