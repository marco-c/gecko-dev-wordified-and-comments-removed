#
ifndef
DOM_MEDIA_MEDIASESSION_MEDIASESSIONCONTROLLER_H_
#
define
DOM_MEDIA_MEDIASESSION_MEDIASESSIONCONTROLLER_H_
#
include
"
mozilla
/
dom
/
MediaMetadata
.
h
"
#
include
"
mozilla
/
dom
/
MediaSessionBinding
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
nsDataHashtable
.
h
"
#
include
"
nsISupportsImpl
.
h
"
namespace
mozilla
{
namespace
dom
{
class
MediaSessionController
{
public
:
NS_INLINE_DECL_PURE_VIRTUAL_REFCOUNTING
explicit
MediaSessionController
(
uint64_t
aContextId
)
;
void
NotifySessionCreated
(
uint64_t
aSessionContextId
)
;
void
NotifySessionDestroyed
(
uint64_t
aSessionContextId
)
;
void
UpdateMetadata
(
uint64_t
aSessionContextId
const
Maybe
<
MediaMetadataBase
>
&
aMetadata
)
;
MediaMetadataBase
GetCurrentMediaMetadata
(
)
const
;
uint64_t
Id
(
)
const
{
return
mTopLevelBCId
;
}
protected
:
~
MediaSessionController
(
)
=
default
;
uint64_t
mTopLevelBCId
;
Maybe
<
uint64_t
>
mActiveMediaSessionContextId
;
private
:
nsString
GetDefaultFaviconURL
(
)
const
;
MediaMetadataBase
CreateDefaultMetadata
(
)
const
;
void
UpdateActiveMediaSessionContextId
(
)
;
nsDataHashtable
<
nsUint64HashKey
Maybe
<
MediaMetadataBase
>
>
mMetadataMap
;
}
;
}
}
#
endif
