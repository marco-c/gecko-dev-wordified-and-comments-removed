#
include
"
PerformanceEntry
.
h
"
#
include
"
MainThreadUtils
.
h
"
using
namespace
mozilla
:
:
dom
;
NS_IMPL_CYCLE_COLLECTION_WRAPPERCACHE
(
PerformanceEntry
mParent
)
NS_IMPL_CYCLE_COLLECTING_ADDREF
(
PerformanceEntry
)
NS_IMPL_CYCLE_COLLECTING_RELEASE
(
PerformanceEntry
)
NS_INTERFACE_MAP_BEGIN_CYCLE_COLLECTION
(
PerformanceEntry
)
NS_WRAPPERCACHE_INTERFACE_MAP_ENTRY
NS_INTERFACE_MAP_ENTRY
(
nsISupports
)
NS_INTERFACE_MAP_END
PerformanceEntry
:
:
PerformanceEntry
(
nsISupports
*
aParent
const
nsAString
&
aName
const
nsAString
&
aEntryType
)
:
mParent
(
aParent
)
mName
(
NS_Atomize
(
aName
)
)
mEntryType
(
NS_Atomize
(
aEntryType
)
)
{
}
PerformanceEntry
:
:
~
PerformanceEntry
(
)
=
default
;
size_t
PerformanceEntry
:
:
SizeOfExcludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
const
{
return
0
;
}
size_t
PerformanceEntry
:
:
SizeOfIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
const
{
return
aMallocSizeOf
(
this
)
+
SizeOfExcludingThis
(
aMallocSizeOf
)
;
}
bool
PerformanceEntry
:
:
ShouldAddEntryToObserverBuffer
(
PerformanceObserverInit
&
aOption
)
const
{
if
(
aOption
.
mType
.
WasPassed
(
)
)
{
if
(
GetEntryType
(
)
-
>
Equals
(
aOption
.
mType
.
Value
(
)
)
)
{
return
true
;
}
}
else
{
if
(
aOption
.
mEntryTypes
.
Value
(
)
.
Contains
(
nsDependentAtomString
(
GetEntryType
(
)
)
)
)
{
return
true
;
}
}
return
false
;
}
