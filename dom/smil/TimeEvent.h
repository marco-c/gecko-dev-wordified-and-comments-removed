#
ifndef
DOM_SMIL_TIMEEVENT_H_
#
define
DOM_SMIL_TIMEEVENT_H_
#
include
"
nsDocShell
.
h
"
#
include
"
mozilla
/
dom
/
Event
.
h
"
#
include
"
mozilla
/
dom
/
TimeEventBinding
.
h
"
#
include
"
mozilla
/
dom
/
Nullable
.
h
"
#
include
"
mozilla
/
dom
/
WindowProxyHolder
.
h
"
class
nsGlobalWindowInner
;
namespace
mozilla
:
:
dom
{
class
TimeEvent
final
:
public
Event
{
public
:
TimeEvent
(
EventTarget
*
aOwner
nsPresContext
*
aPresContext
InternalSMILTimeEvent
*
aEvent
)
;
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
TimeEvent
Event
)
virtual
JSObject
*
WrapObjectInternal
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
override
{
return
TimeEvent_Binding
:
:
Wrap
(
aCx
this
aGivenProto
)
;
}
void
InitTimeEvent
(
const
nsAString
&
aType
nsGlobalWindowInner
*
aView
int32_t
aDetail
)
;
int32_t
Detail
(
)
const
{
return
mDetail
;
}
Nullable
<
WindowProxyHolder
>
GetView
(
)
const
{
if
(
!
mView
)
{
return
nullptr
;
}
return
WindowProxyHolder
(
mView
-
>
GetBrowsingContext
(
)
)
;
}
TimeEvent
*
AsTimeEvent
(
)
final
{
return
this
;
}
private
:
~
TimeEvent
(
)
=
default
;
nsCOMPtr
<
nsPIDOMWindowOuter
>
mView
;
int32_t
mDetail
;
}
;
}
already_AddRefed
<
mozilla
:
:
dom
:
:
TimeEvent
>
NS_NewDOMTimeEvent
(
mozilla
:
:
dom
:
:
EventTarget
*
aOwner
nsPresContext
*
aPresContext
mozilla
:
:
InternalSMILTimeEvent
*
aEvent
)
;
#
endif
