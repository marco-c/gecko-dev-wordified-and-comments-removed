#
ifndef
mozilla_dom_PermissionStatus_h_
#
define
mozilla_dom_PermissionStatus_h_
#
include
"
mozilla
/
dom
/
PermissionsBinding
.
h
"
#
include
"
mozilla
/
dom
/
PermissionStatusBinding
.
h
"
#
include
"
mozilla
/
DOMEventTargetHelper
.
h
"
namespace
mozilla
:
:
dom
{
class
PermissionObserver
;
class
PermissionStatus
:
public
DOMEventTargetHelper
{
friend
class
PermissionObserver
;
public
:
static
already_AddRefed
<
PermissionStatus
>
Create
(
nsPIDOMWindowInner
*
aWindow
PermissionName
aName
ErrorResult
&
aRv
)
;
JSObject
*
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
override
;
PermissionState
State
(
)
const
{
return
mState
;
}
IMPL_EVENT_HANDLER
(
change
)
void
DisconnectFromOwner
(
)
override
;
PermissionName
Name
(
)
const
{
return
mName
;
}
nsresult
Init
(
)
;
protected
:
~
PermissionStatus
(
)
;
PermissionStatus
(
nsPIDOMWindowInner
*
aWindow
PermissionName
aName
)
;
virtual
nsLiteralCString
GetPermissionType
(
)
;
private
:
nsresult
UpdateState
(
)
;
already_AddRefed
<
nsIPrincipal
>
GetPrincipal
(
)
const
;
void
PermissionChanged
(
)
;
PermissionName
mName
;
PermissionState
mState
;
RefPtr
<
PermissionObserver
>
mObserver
;
}
;
}
#
endif
