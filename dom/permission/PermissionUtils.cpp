#
include
"
PermissionUtils
.
h
"
#
include
"
nsIPermissionManager
.
h
"
namespace
mozilla
:
:
dom
{
static
const
nsLiteralCString
kPermissionTypes
[
]
=
{
"
geo
"
_ns
"
desktop
-
notification
"
_ns
"
desktop
-
notification
"
_ns
"
persistent
-
storage
"
_ns
}
;
const
size_t
kPermissionNameCount
=
PermissionNameValues
:
:
Count
;
static_assert
(
MOZ_ARRAY_LENGTH
(
kPermissionTypes
)
=
=
kPermissionNameCount
"
kPermissionTypes
and
PermissionName
count
should
match
"
)
;
const
nsLiteralCString
&
PermissionNameToType
(
PermissionName
aName
)
{
MOZ_ASSERT
(
(
size_t
)
aName
<
ArrayLength
(
kPermissionTypes
)
)
;
return
kPermissionTypes
[
static_cast
<
size_t
>
(
aName
)
]
;
}
Maybe
<
PermissionName
>
TypeToPermissionName
(
const
nsACString
&
aType
)
{
for
(
size_t
i
=
0
;
i
<
ArrayLength
(
kPermissionTypes
)
;
+
+
i
)
{
if
(
kPermissionTypes
[
i
]
.
Equals
(
aType
)
)
{
return
Some
(
static_cast
<
PermissionName
>
(
i
)
)
;
}
}
return
Nothing
(
)
;
}
PermissionState
ActionToPermissionState
(
uint32_t
aAction
)
{
switch
(
aAction
)
{
case
nsIPermissionManager
:
:
ALLOW_ACTION
:
return
PermissionState
:
:
Granted
;
case
nsIPermissionManager
:
:
DENY_ACTION
:
return
PermissionState
:
:
Denied
;
default
:
case
nsIPermissionManager
:
:
PROMPT_ACTION
:
return
PermissionState
:
:
Prompt
;
}
}
}
