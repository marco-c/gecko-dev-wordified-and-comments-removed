const
ConsoleAPIStorage
=
Cc
[
"
mozilla
.
org
/
consoleAPI
-
storage
;
1
"
]
.
getService
(
Ci
.
nsIConsoleAPIStorage
)
;
function
addConsoleStorageListener
(
listener
)
{
listener
.
__handler
=
(
message
id
)
=
>
{
listener
.
observe
(
message
id
)
;
}
;
ConsoleAPIStorage
.
addLogEventListener
(
listener
.
__handler
Cc
[
"
mozilla
.
org
/
systemprincipal
;
1
"
]
.
createInstance
(
Ci
.
nsIPrincipal
)
)
;
}
function
removeConsoleStorageListener
(
listener
)
{
ConsoleAPIStorage
.
removeLogEventListener
(
listener
.
__handler
)
;
}
