#
ifndef
nsHTTPSOnlyStreamListener_h___
#
define
nsHTTPSOnlyStreamListener_h___
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIStreamListener
.
h
"
class
nsILoadInfo
;
class
nsHTTPSOnlyStreamListener
:
public
nsIStreamListener
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIREQUESTOBSERVER
NS_DECL_NSISTREAMLISTENER
explicit
nsHTTPSOnlyStreamListener
(
nsIStreamListener
*
aListener
nsILoadInfo
*
aLoadInfo
)
;
private
:
virtual
~
nsHTTPSOnlyStreamListener
(
)
=
default
;
void
RecordUpgradeTelemetry
(
nsIRequest
*
request
nsresult
aStatus
)
;
void
LogUpgradeFailure
(
nsIRequest
*
request
nsresult
aStatus
)
;
nsCOMPtr
<
nsIStreamListener
>
mListener
;
mozilla
:
:
TimeStamp
mCreationStart
;
}
;
#
endif
