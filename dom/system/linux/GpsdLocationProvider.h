#
ifndef
GpsdLocationProvider_h
#
define
GpsdLocationProvider_h
#
include
"
nsCOMPtr
.
h
"
#
include
"
Geolocation
.
h
"
#
include
"
nsIGeolocationProvider
.
h
"
class
MLSFallback
;
namespace
mozilla
{
class
LazyIdleThread
;
namespace
dom
{
class
GpsdLocationProvider
final
:
public
nsIGeolocationProvider
{
class
MLSGeolocationUpdate
;
class
NotifyErrorRunnable
;
class
PollRunnable
;
class
UpdateRunnable
;
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIGEOLOCATIONPROVIDER
GpsdLocationProvider
(
)
;
private
:
~
GpsdLocationProvider
(
)
;
void
Update
(
nsIDOMGeoPosition
*
aPosition
)
;
void
NotifyError
(
int
aError
)
;
static
const
uint32_t
GPSD_POLL_THREAD_TIMEOUT_MS
;
nsCOMPtr
<
nsIGeolocationUpdate
>
mCallback
;
RefPtr
<
LazyIdleThread
>
mPollThread
;
RefPtr
<
PollRunnable
>
mPollRunnable
;
RefPtr
<
MLSFallback
>
mMLSProvider
;
}
;
}
}
#
endif
