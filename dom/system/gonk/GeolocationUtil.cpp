#
include
"
GeolocationUtil
.
h
"
double
CalculateDeltaInMeter
(
double
aLat
double
aLon
double
aLastLat
double
aLastLon
)
{
const
double
radsInDeg
=
M_PI
/
180
.
0
;
const
double
rNewLat
=
aLat
*
radsInDeg
;
const
double
rNewLon
=
aLon
*
radsInDeg
;
const
double
rOldLat
=
aLastLat
*
radsInDeg
;
const
double
rOldLon
=
aLastLon
*
radsInDeg
;
double
cosDelta
=
(
sin
(
rNewLat
)
*
sin
(
rOldLat
)
)
+
(
cos
(
rNewLat
)
*
cos
(
rOldLat
)
*
cos
(
rOldLon
-
rNewLon
)
)
;
if
(
cosDelta
>
1
.
0
)
{
cosDelta
=
1
.
0
;
}
else
if
(
cosDelta
<
-
1
.
0
)
{
cosDelta
=
-
1
.
0
;
}
return
acos
(
cosDelta
)
*
6378137
;
}
