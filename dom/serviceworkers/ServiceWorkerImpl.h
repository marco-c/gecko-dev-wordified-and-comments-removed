#
ifndef
mozilla_dom_ServiceWorkerImpl_h
#
define
mozilla_dom_ServiceWorkerImpl_h
#
include
"
ServiceWorker
.
h
"
#
include
"
ServiceWorkerInfo
.
h
"
namespace
mozilla
{
namespace
dom
{
class
ServiceWorkerInfo
;
class
ServiceWorkerRegistrationInfo
;
class
ServiceWorkerImpl
final
:
public
ServiceWorker
:
:
Inner
public
ServiceWorkerInfo
:
:
Listener
{
RefPtr
<
ServiceWorkerInfo
>
mInfo
;
RefPtr
<
ServiceWorkerRegistrationInfo
>
mReg
;
ServiceWorker
*
mOuter
;
~
ServiceWorkerImpl
(
)
;
void
AddServiceWorker
(
ServiceWorker
*
aWorker
)
override
;
void
RemoveServiceWorker
(
ServiceWorker
*
aWorker
)
override
;
void
GetRegistration
(
ServiceWorkerRegistrationCallback
&
&
aSuccessCB
ServiceWorkerFailureCallback
&
&
aFailureCB
)
override
;
void
PostMessage
(
RefPtr
<
ServiceWorkerCloneData
>
&
&
aData
const
ClientInfo
&
aClientInfo
const
ClientState
&
aClientState
)
override
;
void
SetState
(
ServiceWorkerState
aState
)
override
;
public
:
ServiceWorkerImpl
(
ServiceWorkerInfo
*
aInfo
ServiceWorkerRegistrationInfo
*
aReg
)
;
NS_INLINE_DECL_REFCOUNTING
(
ServiceWorkerImpl
override
)
;
}
;
}
}
#
endif
