#
include
"
mozilla
/
dom
/
ServiceWorkerLifetimeExtension
.
h
"
namespace
mozilla
:
:
dom
{
bool
ServiceWorkerLifetimeExtension
:
:
LifetimeExtendsIntoTheFuture
(
uint32_t
aRequiredSecs
)
const
{
return
this
-
>
match
(
[
]
(
const
NoLifetimeExtension
&
nle
)
{
return
false
;
}
[
aRequiredSecs
]
(
const
PropagatedLifetimeExtension
&
ple
)
{
TimeStamp
minFuture
=
TimeStamp
:
:
NowLoRes
(
)
+
TimeDuration
:
:
FromSeconds
(
aRequiredSecs
)
;
return
!
(
ple
.
mDeadline
.
IsNull
(
)
|
|
ple
.
mDeadline
<
minFuture
)
;
}
[
]
(
const
FullLifetimeExtension
&
fle
)
{
return
true
;
}
)
;
}
}
