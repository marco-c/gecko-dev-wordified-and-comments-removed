#
ifndef
mozilla_dom_ServiceWorkerCloneData_h__
#
define
mozilla_dom_ServiceWorkerCloneData_h__
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
dom
/
DOMTypes
.
h
"
#
include
"
mozilla
/
dom
/
ipc
/
StructuredCloneData
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsISupports
.
h
"
class
nsISerialEventTarget
;
namespace
mozilla
{
namespace
ipc
{
class
PBackgroundChild
;
class
PBackgroundParent
;
}
namespace
dom
{
class
ClonedOrErrorMessageData
;
class
ServiceWorkerCloneData
final
:
public
ipc
:
:
StructuredCloneData
{
nsCOMPtr
<
nsISerialEventTarget
>
mEventTarget
;
bool
mIsErrorMessageData
;
~
ServiceWorkerCloneData
(
)
;
public
:
ServiceWorkerCloneData
(
)
;
bool
StealFromAndBuildClonedMessageDataForBackgroundParent
(
ClonedOrErrorMessageData
&
aFromClonedData
mozilla
:
:
ipc
:
:
PBackgroundParent
*
aParent
ClonedOrErrorMessageData
&
aToClonedData
)
;
bool
BuildClonedMessageDataForBackgroundChild
(
mozilla
:
:
ipc
:
:
PBackgroundChild
*
aChild
ClonedOrErrorMessageData
&
aClonedData
)
;
void
CopyFromClonedMessageDataForBackgroundParent
(
const
ClonedOrErrorMessageData
&
aClonedData
)
;
void
CopyFromClonedMessageDataForBackgroundChild
(
const
ClonedOrErrorMessageData
&
aClonedData
)
;
void
SetAsErrorMessageData
(
)
;
bool
IsErrorMessageData
(
)
const
;
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
ServiceWorkerCloneData
)
}
;
}
}
#
endif
