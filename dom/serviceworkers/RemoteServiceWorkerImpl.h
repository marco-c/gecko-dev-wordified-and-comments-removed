#
ifndef
mozilla_dom_remoteserviceworkerimpl_h__
#
define
mozilla_dom_remoteserviceworkerimpl_h__
#
include
"
ServiceWorker
.
h
"
namespace
mozilla
:
:
dom
{
class
ServiceWorkerChild
;
class
RemoteServiceWorkerImpl
final
:
public
ServiceWorker
:
:
Inner
{
RefPtr
<
ServiceWorkerChild
>
mActor
;
ServiceWorker
*
mWorker
;
bool
mShutdown
;
~
RemoteServiceWorkerImpl
(
)
;
void
Shutdown
(
)
;
void
AddServiceWorker
(
ServiceWorker
*
aWorker
)
override
;
void
RemoveServiceWorker
(
ServiceWorker
*
aWorker
)
override
;
void
GetRegistration
(
ServiceWorkerRegistrationCallback
&
&
aSuccessCB
ServiceWorkerFailureCallback
&
&
aFailureCB
)
override
;
void
PostMessage
(
RefPtr
<
ServiceWorkerCloneData
>
&
&
aData
const
ClientInfo
&
aClientInfo
const
ClientState
&
aClientState
)
override
;
public
:
explicit
RemoteServiceWorkerImpl
(
const
ServiceWorkerDescriptor
&
aDescriptor
)
;
void
RevokeActor
(
ServiceWorkerChild
*
aActor
)
;
NS_INLINE_DECL_REFCOUNTING
(
RemoteServiceWorkerImpl
override
)
}
;
}
#
endif
