#
include
"
ServiceWorkerUnregisterCallback
.
h
"
namespace
mozilla
:
:
dom
{
NS_IMPL_ISUPPORTS
(
UnregisterCallback
nsIServiceWorkerUnregisterCallback
)
UnregisterCallback
:
:
UnregisterCallback
(
)
:
mPromise
(
new
GenericPromise
:
:
Private
(
__func__
)
)
{
}
UnregisterCallback
:
:
UnregisterCallback
(
GenericPromise
:
:
Private
*
aPromise
)
:
mPromise
(
aPromise
)
{
MOZ_DIAGNOSTIC_ASSERT
(
mPromise
)
;
}
NS_IMETHODIMP
UnregisterCallback
:
:
UnregisterSucceeded
(
bool
aState
)
{
mPromise
-
>
Resolve
(
aState
__func__
)
;
return
NS_OK
;
}
NS_IMETHODIMP
UnregisterCallback
:
:
UnregisterFailed
(
)
{
mPromise
-
>
Reject
(
NS_ERROR_DOM_SECURITY_ERR
__func__
)
;
return
NS_OK
;
}
RefPtr
<
GenericPromise
>
UnregisterCallback
:
:
Promise
(
)
const
{
return
mPromise
;
}
}
