#
ifndef
mozilla_dom_fetcheventopproxychild_h__
#
define
mozilla_dom_fetcheventopproxychild_h__
#
include
"
nsISupportsImpl
.
h
"
#
include
"
ServiceWorkerOp
.
h
"
#
include
"
ServiceWorkerOpPromise
.
h
"
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
dom
/
InternalRequest
.
h
"
#
include
"
mozilla
/
dom
/
PFetchEventOpProxyChild
.
h
"
namespace
mozilla
{
namespace
dom
{
class
InternalRequest
;
class
InternalResponse
;
class
ServiceWorkerFetchEventOpArgs
;
class
FetchEventOpProxyChild
final
:
public
PFetchEventOpProxyChild
{
friend
class
PFetchEventOpProxyChild
;
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
FetchEventOpProxyChild
override
)
;
FetchEventOpProxyChild
(
)
=
default
;
void
Initialize
(
const
ServiceWorkerFetchEventOpArgs
&
aArgs
)
;
SafeRefPtr
<
InternalRequest
>
ExtractInternalRequest
(
)
;
RefPtr
<
FetchEventPreloadResponsePromise
>
GetPreloadResponsePromise
(
)
;
private
:
~
FetchEventOpProxyChild
(
)
=
default
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPreloadResponse
(
IPCInternalResponse
&
&
aResponse
)
;
void
ActorDestroy
(
ActorDestroyReason
)
override
;
MozPromiseRequestHolder
<
FetchEventRespondWithPromise
>
mRespondWithPromiseRequestHolder
;
RefPtr
<
FetchEventOp
>
mOp
;
SafeRefPtr
<
InternalRequest
>
mInternalRequest
;
RefPtr
<
FetchEventPreloadResponsePromise
:
:
Private
>
mPreloadResponsePromise
;
}
;
}
}
#
endif
