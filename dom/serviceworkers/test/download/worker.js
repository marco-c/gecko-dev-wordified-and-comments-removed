addEventListener
(
"
install
"
function
(
evt
)
{
evt
.
waitUntil
(
self
.
skipWaiting
(
)
)
;
}
)
;
addEventListener
(
"
activate
"
function
(
evt
)
{
evt
.
waitUntil
(
clients
.
claim
(
)
)
;
}
)
;
addEventListener
(
"
fetch
"
function
(
evt
)
{
if
(
!
evt
.
request
.
url
.
includes
(
"
fake_download
"
)
)
{
return
;
}
evt
.
respondWith
(
registration
.
unregister
(
)
.
then
(
function
(
)
{
return
new
Response
(
"
service
worker
generated
download
"
{
headers
:
{
"
Content
-
Disposition
"
:
'
attachment
;
filename
=
"
fake_download
.
bin
"
'
"
Content
-
Type
"
:
"
application
/
octet
-
stream
"
"
Content
-
Encoding
"
:
"
gzip
"
}
}
)
;
}
)
)
;
}
)
;
