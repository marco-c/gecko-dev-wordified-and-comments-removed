#
ifndef
DOM_SERVICEWORKERS_SERVICEWORKERSHUTDOWNSTATE_H_
#
define
DOM_SERVICEWORKERS_SERVICEWORKERSHUTDOWNSTATE_H_
#
include
<
cstdint
>
#
include
"
ipc
/
EnumSerializer
.
h
"
#
include
"
mozilla
/
dom
/
ServiceWorkerOpArgs
.
h
"
namespace
mozilla
{
namespace
dom
{
class
ServiceWorkerShutdownState
{
public
:
enum
class
Progress
{
ParentProcessMainThread
ParentProcessIpdlBackgroundThread
ContentProcessWorkerLauncherThread
ContentProcessMainThread
ShutdownCompleted
EndGuard_
}
;
ServiceWorkerShutdownState
(
)
;
~
ServiceWorkerShutdownState
(
)
;
const
char
*
GetProgressString
(
)
const
;
void
SetProgress
(
Progress
aProgress
)
;
private
:
Progress
mProgress
;
}
;
void
MaybeReportServiceWorkerShutdownProgress
(
const
ServiceWorkerOpArgs
&
aArgs
bool
aShutdownCompleted
=
false
)
;
}
}
namespace
IPC
{
using
Progress
=
mozilla
:
:
dom
:
:
ServiceWorkerShutdownState
:
:
Progress
;
template
<
>
struct
ParamTraits
<
Progress
>
:
public
ContiguousEnumSerializer
<
Progress
Progress
:
:
ParentProcessMainThread
Progress
:
:
EndGuard_
>
{
}
;
}
#
endif
