#
include
"
GLContext
.
h
"
#
include
"
WebGLBuffer
.
h
"
#
include
"
WebGLContext
.
h
"
#
include
"
WebGLVertexArray
.
h
"
namespace
mozilla
{
void
WebGLContext
:
:
BindVertexArray
(
WebGLVertexArray
*
array
)
{
FuncScope
funcScope
(
*
this
"
bindVertexArray
"
)
;
if
(
IsContextLost
(
)
)
return
;
funcScope
.
mBindFailureGuard
=
true
;
if
(
array
&
&
!
ValidateObject
(
"
array
"
*
array
)
)
return
;
if
(
array
=
=
nullptr
)
{
array
=
mDefaultVertexArray
;
}
array
-
>
BindVertexArray
(
)
;
MOZ_ASSERT
(
mBoundVertexArray
=
=
array
)
;
if
(
mBoundVertexArray
)
{
mBoundVertexArray
-
>
mHasBeenBound
=
true
;
}
funcScope
.
mBindFailureGuard
=
false
;
}
RefPtr
<
WebGLVertexArray
>
WebGLContext
:
:
CreateVertexArray
(
)
{
const
FuncScope
funcScope
(
*
this
"
createVertexArray
"
)
;
if
(
IsContextLost
(
)
)
return
nullptr
;
return
WebGLVertexArray
:
:
Create
(
this
)
;
}
}
