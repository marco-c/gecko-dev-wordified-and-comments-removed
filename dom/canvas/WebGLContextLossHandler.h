#
ifndef
WEBGL_CONTEXT_LOSS_HANDLER_H_
#
define
WEBGL_CONTEXT_LOSS_HANDLER_H_
#
include
"
mozilla
/
WeakPtr
.
h
"
#
include
"
nsCOMPtr
.
h
"
class
nsIThread
;
class
nsITimer
;
namespace
mozilla
{
class
WebGLContext
;
class
WebGLContextLossHandler
final
:
public
SupportsWeakPtr
<
WebGLContextLossHandler
>
{
WebGLContext
*
const
mWebGL
;
const
nsCOMPtr
<
nsITimer
>
mTimer
;
bool
mTimerPending
;
bool
mShouldRunTimerAgain
;
#
ifdef
DEBUG
nsIThread
*
const
mThread
;
#
endif
friend
class
WatchdogTimerEvent
;
public
:
MOZ_DECLARE_WEAKREFERENCE_TYPENAME
(
WebGLContextLossHandler
)
explicit
WebGLContextLossHandler
(
WebGLContext
*
webgl
)
;
~
WebGLContextLossHandler
(
)
;
void
RunTimer
(
)
;
private
:
void
TimerCallback
(
)
;
}
;
}
#
endif
