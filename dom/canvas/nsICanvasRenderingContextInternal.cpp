#
include
"
nsICanvasRenderingContextInternal
.
h
"
#
include
"
nsRefreshDriver
.
h
"
nsICanvasRenderingContextInternal
:
:
nsICanvasRenderingContextInternal
(
)
:
mSharedPtrPtr
(
std
:
:
make_shared
<
nsICanvasRenderingContextInternal
*
>
(
this
)
)
{
}
nsICanvasRenderingContextInternal
:
:
~
nsICanvasRenderingContextInternal
(
)
=
default
;
void
nsICanvasRenderingContextInternal
:
:
RemovePostRefreshObserver
(
)
{
if
(
mRefreshDriver
)
{
mRefreshDriver
-
>
RemovePostRefreshObserver
(
this
)
;
mRefreshDriver
=
nullptr
;
}
}
void
nsICanvasRenderingContextInternal
:
:
AddPostRefreshObserverIfNecessary
(
)
{
if
(
!
GetPresShell
(
)
|
|
!
GetPresShell
(
)
-
>
GetPresContext
(
)
|
|
!
GetPresShell
(
)
-
>
GetPresContext
(
)
-
>
RefreshDriver
(
)
)
{
return
;
}
mRefreshDriver
=
GetPresShell
(
)
-
>
GetPresContext
(
)
-
>
RefreshDriver
(
)
;
mRefreshDriver
-
>
AddPostRefreshObserver
(
this
)
;
}
