function
generateTest
(
internalFormat
pixelFormat
pixelType
prologue
resourcePath
defaultContextVersion
)
{
var
wtu
=
WebGLTestUtils
;
var
tiu
=
TexImageUtils
;
var
gl
=
null
;
var
successfullyParsed
=
false
;
function
init
(
)
{
description
(
'
Verify
texImage2D
and
texSubImage2D
code
paths
taking
ImageBitmap
created
from
an
HTMLVideoElement
(
'
+
internalFormat
+
'
/
'
+
pixelFormat
+
'
/
'
+
pixelType
+
'
)
'
)
;
if
(
!
window
.
createImageBitmap
|
|
!
window
.
ImageBitmap
)
{
finishTest
(
)
;
return
;
}
wtu
.
setDefault3DContextVersion
(
defaultContextVersion
)
;
gl
=
wtu
.
create3DContext
(
"
example
"
)
;
if
(
!
prologue
(
gl
)
)
{
finishTest
(
)
;
return
;
}
gl
.
clearColor
(
0
0
0
1
)
;
gl
.
clearDepth
(
1
)
;
var
video
=
document
.
createElement
(
"
video
"
)
;
video
.
oncanplaythrough
=
function
(
)
{
runImageBitmapTest
(
video
1
internalFormat
pixelFormat
pixelType
gl
tiu
wtu
false
)
;
finishTest
(
)
;
}
video
.
src
=
resourcePath
+
"
red
-
green
.
theora
.
ogv
"
;
document
.
body
.
appendChild
(
video
)
;
}
return
init
;
}
