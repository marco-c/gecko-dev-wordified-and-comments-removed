importScripts
(
"
.
.
/
.
.
/
js
/
tests
/
canvas
-
tests
-
utils
.
js
"
)
;
self
.
onmessage
=
function
(
e
)
{
canvas
=
new
OffscreenCanvas
(
10
10
)
;
gl
=
canvas
.
getContext
(
'
webgl
'
)
;
if
(
!
testValidContext
(
)
)
self
.
postMessage
(
"
Test
failed
"
)
;
extension
=
gl
.
getExtension
(
"
WEBGL_lose_context
"
)
;
OES_vertex_array_object
=
gl
.
getExtension
(
"
OES_vertex_array_object
"
)
;
if
(
extension
=
=
null
|
|
OES_vertex_array_object
=
=
null
)
self
.
postMessage
(
"
Test
failed
"
)
;
uniformLocation
=
gl
.
getUniformLocation
(
program
"
tex
"
)
;
extension
.
loseContext
(
)
;
canvas
.
addEventListener
(
"
webglcontextlost
"
function
(
)
{
if
(
testLostContextWithoutRestore
(
)
)
self
.
postMessage
(
"
Test
passed
"
)
;
else
self
.
postMessage
(
"
Test
failed
"
)
;
}
false
)
;
}
