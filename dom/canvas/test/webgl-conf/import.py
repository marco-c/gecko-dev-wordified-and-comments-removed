assert
__name__
=
=
'
__main__
'
from
pathlib
import
*
import
shutil
import
subprocess
import
sys
REL_PATH
=
'
/
dom
/
canvas
/
test
/
webgl
-
conf
'
REPO_DIR
=
Path
.
cwd
(
)
DIR_IN_GECKO
=
Path
(
__file__
)
.
parent
assert
not
REPO_DIR
.
samefile
(
DIR_IN_GECKO
)
'
Run
this
script
from
the
source
git
checkout
.
'
assert
DIR_IN_GECKO
.
as_posix
(
)
.
endswith
(
REL_PATH
)
gecko_base_dir
=
DIR_IN_GECKO
.
as_posix
(
)
[
:
-
len
(
REL_PATH
)
]
angle_dir
=
Path
(
gecko_base_dir
'
gfx
/
angle
'
)
.
as_posix
(
)
sys
.
path
.
append
(
angle_dir
)
from
vendor_from_git
import
*
(
MERGE_BASE_ORIGIN
)
=
sys
.
argv
[
1
:
]
record_cherry_picks
(
DIR_IN_GECKO
MERGE_BASE_ORIGIN
)
src_dir
=
Path
(
REPO_DIR
'
sdk
/
tests
'
)
dest_dir
=
Path
(
DIR_IN_GECKO
'
checkout
'
)
print_now
(
'
Nuking
old
checkout
.
.
.
'
)
shutil
.
rmtree
(
dest_dir
True
)
print_now
(
'
Writing
new
checkout
.
.
.
'
)
shutil
.
copytree
(
src_dir
dest_dir
copy_function
=
shutil
.
copy
)
print_now
(
'
Done
!
'
)
