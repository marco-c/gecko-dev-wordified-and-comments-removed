#
ifndef
WEBGLCROSSPROCESSCOMMANDQUEUE_H_
#
define
WEBGLCROSSPROCESSCOMMANDQUEUE_H_
#
include
"
mozilla
/
dom
/
WebGLCommandQueue
.
h
"
namespace
mozilla
{
namespace
layers
{
class
PCompositorBridgeParent
;
}
class
HostWebGLContext
;
using
mozilla
:
:
webgl
:
:
ProducerConsumerQueue
;
using
ClientWebGLCommandSource
=
SyncCommandSource
<
size_t
>
;
class
HostWebGLCommandSink
:
public
SyncCommandSink
<
size_t
>
{
public
:
HostWebGLCommandSink
(
UniquePtr
<
Consumer
>
&
&
aConsumer
UniquePtr
<
Producer
>
&
&
aResponseProducer
)
:
SyncCommandSink
(
std
:
:
move
(
aConsumer
)
std
:
:
move
(
aResponseProducer
)
)
{
}
HostWebGLContext
*
mHostContext
=
nullptr
;
protected
:
friend
struct
mozilla
:
:
ipc
:
:
IPDLParamTraits
<
HostWebGLCommandSink
>
;
friend
class
mozilla
:
:
layers
:
:
PCompositorBridgeParent
;
HostWebGLCommandSink
(
)
=
default
;
bool
DispatchCommand
(
size_t
command
)
override
;
}
;
namespace
ipc
{
template
<
>
struct
IPDLParamTraits
<
mozilla
:
:
HostWebGLCommandSink
>
:
public
IPDLParamTraits
<
mozilla
:
:
SyncCommandSink
<
size_t
>
>
{
public
:
typedef
mozilla
:
:
HostWebGLCommandSink
paramType
;
}
;
}
}
#
endif
