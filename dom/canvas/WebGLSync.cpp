#
include
"
WebGLSync
.
h
"
#
include
"
GLContext
.
h
"
#
include
"
mozilla
/
dom
/
WebGL2RenderingContextBinding
.
h
"
#
include
"
WebGLContext
.
h
"
namespace
mozilla
{
WebGLSync
:
:
WebGLSync
(
WebGLContext
*
webgl
GLenum
condition
GLbitfield
flags
)
:
WebGLContextBoundObject
(
webgl
)
mGLName
(
mContext
-
>
gl
-
>
fFenceSync
(
condition
flags
)
)
mFenceId
(
mContext
-
>
mNextFenceId
)
{
mContext
-
>
mNextFenceId
+
=
1
;
}
WebGLSync
:
:
~
WebGLSync
(
)
{
if
(
!
mContext
)
return
;
mContext
-
>
gl
-
>
fDeleteSync
(
mGLName
)
;
}
void
WebGLSync
:
:
MarkSignaled
(
)
const
{
if
(
mContext
-
>
mCompletedFenceId
<
mFenceId
)
{
mContext
-
>
mCompletedFenceId
=
mFenceId
;
}
}
}
