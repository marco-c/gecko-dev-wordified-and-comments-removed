var
testGenerator
=
testSteps
(
)
;
function
*
testSteps
(
)
{
const
morgueFile
=
"
storage
/
default
/
http
+
+
+
example
.
com
/
morgue
"
;
const
packages
=
[
"
version1_0_morgueDirectory_profile
"
"
.
.
/
defaultStorageDirectory_shared
"
]
;
info
(
"
Clearing
"
)
;
clear
(
continueToNextStepSync
)
;
yield
undefined
;
info
(
"
Installing
packages
"
)
;
installPackages
(
packages
)
;
info
(
"
Verifying
storage
"
)
;
verifyStorage
(
packages
"
afterInstall
"
)
;
info
(
"
Checking
morgue
file
"
)
;
let
file
=
getRelativeFile
(
morgueFile
)
;
let
exists
=
file
.
exists
(
)
;
ok
(
exists
"
Morgue
file
does
exist
"
)
;
info
(
"
Initializing
"
)
;
let
request
=
init
(
continueToNextStepSync
)
;
yield
undefined
;
ok
(
request
.
resultCode
=
=
NS_OK
"
Initialization
succeeded
"
)
;
info
(
"
Verifying
storage
"
)
;
verifyStorage
(
packages
"
afterInit
"
)
;
info
(
"
Checking
morgue
file
"
)
;
exists
=
file
.
exists
(
)
;
ok
(
!
exists
"
Morgue
file
doesn
'
t
exist
"
)
;
finishTest
(
)
;
}
