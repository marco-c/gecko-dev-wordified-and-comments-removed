#
include
"
QuotaRequestBase
.
h
"
#
include
"
mozilla
/
dom
/
quota
/
PQuotaUsageRequest
.
h
"
#
include
"
mozilla
/
dom
/
quota
/
QuotaManager
.
h
"
namespace
mozilla
:
:
dom
:
:
quota
{
QuotaRequestBase
:
:
~
QuotaRequestBase
(
)
{
AssertIsOnOwningThread
(
)
;
MOZ_ASSERT
(
mActorDestroyed
)
;
}
void
QuotaRequestBase
:
:
SendResults
(
)
{
AssertIsOnOwningThread
(
)
;
if
(
IsActorDestroyed
(
)
)
{
if
(
NS_SUCCEEDED
(
mResultCode
)
)
{
mResultCode
=
NS_ERROR_FAILURE
;
}
}
else
{
RequestResponse
response
;
if
(
NS_SUCCEEDED
(
mResultCode
)
)
{
GetResponse
(
response
)
;
}
else
{
response
=
mResultCode
;
}
Unused
<
<
PQuotaRequestParent
:
:
Send__delete__
(
this
response
)
;
}
}
void
QuotaRequestBase
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
AssertIsOnOwningThread
(
)
;
NoteActorDestroyed
(
)
;
}
}
