#
include
"
BackgroundThreadObject
.
h
"
#
include
"
mozilla
/
ipc
/
BackgroundParent
.
h
"
#
include
"
nsThreadUtils
.
h
"
namespace
mozilla
:
:
dom
:
:
quota
{
BackgroundThreadObject
:
:
BackgroundThreadObject
(
)
:
mOwningThread
(
GetCurrentSerialEventTarget
(
)
)
{
AssertIsOnOwningThread
(
)
;
}
BackgroundThreadObject
:
:
BackgroundThreadObject
(
nsISerialEventTarget
*
aOwningThread
)
:
mOwningThread
(
aOwningThread
)
{
}
#
ifdef
DEBUG
void
BackgroundThreadObject
:
:
AssertIsOnOwningThread
(
)
const
{
mozilla
:
:
ipc
:
:
AssertIsOnBackgroundThread
(
)
;
MOZ_ASSERT
(
mOwningThread
)
;
bool
current
;
MOZ_ASSERT
(
NS_SUCCEEDED
(
mOwningThread
-
>
IsOnCurrentThread
(
&
current
)
)
)
;
MOZ_ASSERT
(
current
)
;
}
#
endif
nsISerialEventTarget
*
BackgroundThreadObject
:
:
OwningThread
(
)
const
{
MOZ_ASSERT
(
mOwningThread
)
;
return
mOwningThread
;
}
}
