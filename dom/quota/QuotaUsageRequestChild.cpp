#
include
"
QuotaUsageRequestChild
.
h
"
#
include
"
QuotaRequests
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
namespace
mozilla
:
:
dom
:
:
quota
{
QuotaUsageRequestChild
:
:
QuotaUsageRequestChild
(
UsageRequest
*
aRequest
)
:
mRequest
(
aRequest
)
{
AssertIsOnOwningThread
(
)
;
MOZ_COUNT_CTOR
(
quota
:
:
QuotaUsageRequestChild
)
;
}
QuotaUsageRequestChild
:
:
~
QuotaUsageRequestChild
(
)
{
MOZ_COUNT_DTOR
(
quota
:
:
QuotaUsageRequestChild
)
;
}
#
ifdef
DEBUG
void
QuotaUsageRequestChild
:
:
AssertIsOnOwningThread
(
)
const
{
MOZ_ASSERT
(
mRequest
)
;
mRequest
-
>
AssertIsOnOwningThread
(
)
;
}
#
endif
mozilla
:
:
ipc
:
:
IPCResult
QuotaUsageRequestChild
:
:
Recv__delete__
(
)
{
AssertIsOnOwningThread
(
)
;
MOZ_ASSERT
(
mRequest
)
;
return
IPC_OK
(
)
;
}
void
QuotaUsageRequestChild
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
AssertIsOnOwningThread
(
)
;
if
(
mRequest
)
{
mRequest
-
>
ClearBackgroundActor
(
)
;
#
ifdef
DEBUG
mRequest
=
nullptr
;
#
endif
}
}
}
