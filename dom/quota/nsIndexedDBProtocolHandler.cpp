#
include
"
nsIndexedDBProtocolHandler
.
h
"
#
include
"
nsStandardURL
.
h
"
using
namespace
mozilla
:
:
net
;
nsIndexedDBProtocolHandler
:
:
nsIndexedDBProtocolHandler
(
)
{
}
nsIndexedDBProtocolHandler
:
:
~
nsIndexedDBProtocolHandler
(
)
{
}
NS_IMPL_ISUPPORTS
(
nsIndexedDBProtocolHandler
nsIProtocolHandler
nsISupportsWeakReference
)
NS_IMETHODIMP
nsIndexedDBProtocolHandler
:
:
GetScheme
(
nsACString
&
aScheme
)
{
aScheme
.
AssignLiteral
(
"
indexeddb
"
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsIndexedDBProtocolHandler
:
:
GetDefaultPort
(
int32_t
*
aDefaultPort
)
{
*
aDefaultPort
=
-
1
;
return
NS_OK
;
}
NS_IMETHODIMP
nsIndexedDBProtocolHandler
:
:
GetProtocolFlags
(
uint32_t
*
aProtocolFlags
)
{
*
aProtocolFlags
=
URI_STD
|
URI_DANGEROUS_TO_LOAD
|
URI_DOES_NOT_RETURN_DATA
|
URI_NON_PERSISTABLE
;
return
NS_OK
;
}
NS_IMETHODIMP
nsIndexedDBProtocolHandler
:
:
NewChannel
(
nsIURI
*
aURI
nsILoadInfo
*
aLoadInfo
nsIChannel
*
*
_retval
)
{
return
NS_ERROR_NOT_IMPLEMENTED
;
}
NS_IMETHODIMP
nsIndexedDBProtocolHandler
:
:
AllowPort
(
int32_t
aPort
const
char
*
aScheme
bool
*
_retval
)
{
*
_retval
=
false
;
return
NS_OK
;
}
