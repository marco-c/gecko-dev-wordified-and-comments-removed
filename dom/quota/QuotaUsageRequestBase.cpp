#
include
"
QuotaUsageRequestBase
.
h
"
namespace
mozilla
:
:
dom
:
:
quota
{
QuotaUsageRequestBase
:
:
~
QuotaUsageRequestBase
(
)
{
AssertIsOnOwningThread
(
)
;
MOZ_ASSERT
(
mActorDestroyed
)
;
}
RefPtr
<
BoolPromise
>
QuotaUsageRequestBase
:
:
OnCancel
(
)
{
AssertIsOnOwningThread
(
)
;
return
mCancelPromiseHolder
.
Ensure
(
__func__
)
;
}
void
QuotaUsageRequestBase
:
:
Destroy
(
)
{
AssertIsOnOwningThread
(
)
;
if
(
!
IsActorDestroyed
(
)
)
{
(
void
)
PQuotaUsageRequestParent
:
:
Send__delete__
(
this
)
;
}
}
void
QuotaUsageRequestBase
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
AssertIsOnOwningThread
(
)
;
NoteActorDestroyed
(
)
;
mCancelPromiseHolder
.
RejectIfExists
(
NS_ERROR_FAILURE
__func__
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
QuotaUsageRequestBase
:
:
RecvCancel
(
)
{
AssertIsOnOwningThread
(
)
;
mCancelPromiseHolder
.
ResolveIfExists
(
true
__func__
)
;
return
IPC_OK
(
)
;
}
}
