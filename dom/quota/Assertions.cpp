#
include
"
Assertions
.
h
"
namespace
mozilla
:
:
dom
:
:
quota
{
bool
IsOnIOThread
(
)
{
QuotaManager
*
quotaManager
=
QuotaManager
:
:
Get
(
)
;
NS_ASSERTION
(
quotaManager
"
Must
have
a
manager
here
!
"
)
;
bool
currentThread
;
return
NS_SUCCEEDED
(
quotaManager
-
>
IOThread
(
)
-
>
IsOnCurrentThread
(
&
currentThread
)
)
&
&
currentThread
;
}
void
AssertIsOnIOThread
(
)
{
NS_ASSERTION
(
IsOnIOThread
(
)
"
Running
on
the
wrong
thread
!
"
)
;
}
void
DiagnosticAssertIsOnIOThread
(
)
{
MOZ_DIAGNOSTIC_ASSERT
(
IsOnIOThread
(
)
)
;
}
void
AssertCurrentThreadOwnsQuotaMutex
(
)
{
#
ifdef
DEBUG
QuotaManager
*
quotaManager
=
QuotaManager
:
:
Get
(
)
;
NS_ASSERTION
(
quotaManager
"
Must
have
a
manager
here
!
"
)
;
quotaManager
-
>
AssertCurrentThreadOwnsQuotaMutex
(
)
;
#
endif
}
}
