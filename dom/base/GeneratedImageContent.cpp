#
include
"
mozilla
/
dom
/
GeneratedImageContent
.
h
"
#
include
"
mozilla
/
dom
/
Document
.
h
"
#
include
"
mozilla
/
dom
/
HTMLElementBinding
.
h
"
#
include
"
mozilla
/
dom
/
NameSpaceConstants
.
h
"
#
include
"
nsContentCreatorFunctions
.
h
"
#
include
"
nsGkAtoms
.
h
"
#
include
"
nsNodeInfoManager
.
h
"
namespace
mozilla
:
:
dom
{
NS_IMPL_ELEMENT_CLONE
(
GeneratedImageContent
)
;
already_AddRefed
<
GeneratedImageContent
>
GeneratedImageContent
:
:
Create
(
Document
&
aDocument
uint32_t
aContentIndex
)
{
RefPtr
<
dom
:
:
NodeInfo
>
nodeInfo
=
aDocument
.
NodeInfoManager
(
)
-
>
GetNodeInfo
(
nsGkAtoms
:
:
mozgeneratedcontentimage
nullptr
kNameSpaceID_XHTML
nsINode
:
:
ELEMENT_NODE
)
;
auto
*
nim
=
nodeInfo
-
>
NodeInfoManager
(
)
;
RefPtr
<
GeneratedImageContent
>
image
=
new
(
nim
)
GeneratedImageContent
(
nodeInfo
.
forget
(
)
)
;
image
-
>
mIndex
=
aContentIndex
;
return
image
.
forget
(
)
;
}
already_AddRefed
<
GeneratedImageContent
>
GeneratedImageContent
:
:
CreateForListStyleImage
(
Document
&
aDocument
)
{
return
Create
(
aDocument
uint32_t
(
-
1
)
)
;
}
JSObject
*
GeneratedImageContent
:
:
WrapNode
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
{
return
dom
:
:
HTMLElement_Binding
:
:
Wrap
(
aCx
this
aGivenProto
)
;
}
}
