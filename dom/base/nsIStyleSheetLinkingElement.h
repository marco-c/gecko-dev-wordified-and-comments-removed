#
ifndef
nsIStyleSheetLinkingElement_h__
#
define
nsIStyleSheetLinkingElement_h__
#
include
"
nsISupports
.
h
"
#
include
"
mozilla
/
StyleSheet
.
h
"
#
include
"
mozilla
/
Result
.
h
"
class
nsIContent
;
class
nsICSSLoaderObserver
;
class
nsIPrincipal
;
class
nsIURI
;
#
define
NS_ISTYLESHEETLINKINGELEMENT_IID
\
{
0xa8b79f3b
0x9d18
0x4f9c
\
{
0xb1
0xaa
0x8c
0x9b
0x1b
0xaa
0xac
0xad
}
}
class
nsIStyleSheetLinkingElement
:
public
nsISupports
{
public
:
enum
class
ForceUpdate
{
Yes
No
}
;
enum
class
Completed
{
Yes
No
}
;
enum
class
HasAlternateRel
{
Yes
No
}
;
enum
class
IsAlternate
{
Yes
No
}
;
enum
class
IsInline
{
Yes
No
}
;
enum
class
MediaMatched
{
Yes
No
}
;
struct
Update
{
private
:
bool
mWillNotify
;
bool
mIsAlternate
;
bool
mMediaMatched
;
public
:
Update
(
)
:
mWillNotify
(
false
)
mIsAlternate
(
false
)
mMediaMatched
(
false
)
{
}
Update
(
Completed
aCompleted
IsAlternate
aIsAlternate
MediaMatched
aMediaMatched
)
:
mWillNotify
(
aCompleted
=
=
Completed
:
:
No
)
mIsAlternate
(
aIsAlternate
=
=
IsAlternate
:
:
Yes
)
mMediaMatched
(
aMediaMatched
=
=
MediaMatched
:
:
Yes
)
{
}
bool
WillNotify
(
)
const
{
return
mWillNotify
;
}
bool
ShouldBlock
(
)
const
{
if
(
!
mWillNotify
)
{
return
false
;
}
return
!
mIsAlternate
&
&
mMediaMatched
;
}
}
;
struct
MOZ_STACK_CLASS
SheetInfo
{
nsIContent
*
mContent
;
nsCOMPtr
<
nsIURI
>
mURI
;
nsCOMPtr
<
nsIPrincipal
>
mTriggeringPrincipal
;
mozilla
:
:
net
:
:
ReferrerPolicy
mReferrerPolicy
;
mozilla
:
:
CORSMode
mCORSMode
;
nsString
mTitle
;
nsString
mMedia
;
nsString
mIntegrity
;
bool
mHasAlternateRel
;
bool
mIsInline
;
SheetInfo
(
const
nsIDocument
&
nsIContent
*
already_AddRefed
<
nsIURI
>
aURI
already_AddRefed
<
nsIPrincipal
>
aTriggeringPrincipal
mozilla
:
:
net
:
:
ReferrerPolicy
aReferrerPolicy
mozilla
:
:
CORSMode
aCORSMode
const
nsAString
&
aTitle
const
nsAString
&
aMedia
HasAlternateRel
aHasAlternateRel
IsInline
aIsInline
)
;
~
SheetInfo
(
)
;
}
;
NS_DECLARE_STATIC_IID_ACCESSOR
(
NS_ISTYLESHEETLINKINGELEMENT_IID
)
virtual
void
SetStyleSheet
(
mozilla
:
:
StyleSheet
*
aStyleSheet
)
=
0
;
virtual
mozilla
:
:
StyleSheet
*
GetStyleSheet
(
)
=
0
;
virtual
void
InitStyleLinkElement
(
bool
aDontLoadStyle
)
=
0
;
virtual
mozilla
:
:
Result
<
Update
nsresult
>
UpdateStyleSheet
(
nsICSSLoaderObserver
*
aObserver
ForceUpdate
=
ForceUpdate
:
:
No
)
=
0
;
virtual
void
SetEnableUpdates
(
bool
aEnableUpdates
)
=
0
;
virtual
void
GetCharset
(
nsAString
&
aCharset
)
=
0
;
virtual
void
OverrideBaseURI
(
nsIURI
*
aNewBaseURI
)
=
0
;
virtual
void
SetLineNumber
(
uint32_t
aLineNumber
)
=
0
;
virtual
uint32_t
GetLineNumber
(
)
=
0
;
virtual
void
SetColumnNumber
(
uint32_t
aColumnNumber
)
=
0
;
virtual
uint32_t
GetColumnNumber
(
)
=
0
;
}
;
NS_DEFINE_STATIC_IID_ACCESSOR
(
nsIStyleSheetLinkingElement
NS_ISTYLESHEETLINKINGELEMENT_IID
)
#
endif
