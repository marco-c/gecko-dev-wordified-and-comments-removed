#
ifndef
nsCopySupport_h__
#
define
nsCopySupport_h__
#
include
<
cstdint
>
#
include
"
ErrorList
.
h
"
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
BasicEvents
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
nsIClipboard
.
h
"
#
include
"
nsStringFwd
.
h
"
class
nsINode
;
class
nsIImageLoadingContent
;
class
nsITransferable
;
class
nsILoadContext
;
namespace
mozilla
{
class
PresShell
;
namespace
dom
{
class
Document
;
class
Selection
;
class
WindowContext
;
}
}
class
nsCopySupport
{
public
:
static
nsresult
ClearSelectionCache
(
)
;
static
nsresult
EncodeDocumentWithContextAndPutToClipboard
(
mozilla
:
:
dom
:
:
Selection
*
aSel
mozilla
:
:
dom
:
:
Document
*
aDoc
nsIClipboard
:
:
ClipboardType
aClipboardID
bool
aWithRubyAnnotation
)
;
static
nsresult
GetContents
(
const
nsACString
&
aMimeType
uint32_t
aFlags
mozilla
:
:
dom
:
:
Selection
*
aSel
mozilla
:
:
dom
:
:
Document
*
aDoc
nsAString
&
outdata
)
;
static
nsresult
ImageCopy
(
nsIImageLoadingContent
*
aImageElement
nsILoadContext
*
aLoadContext
int32_t
aCopyFlags
mozilla
:
:
dom
:
:
WindowContext
*
aSettingWindowContext
)
;
static
nsresult
GetTransferableForSelection
(
mozilla
:
:
dom
:
:
Selection
*
aSelection
mozilla
:
:
dom
:
:
Document
*
aDocument
nsITransferable
*
*
aTransferable
)
;
MOZ_CAN_RUN_SCRIPT_BOUNDARY
static
nsresult
GetTransferableForNode
(
nsINode
*
aNode
mozilla
:
:
dom
:
:
Document
*
aDoc
nsITransferable
*
*
aTransferable
)
;
static
already_AddRefed
<
mozilla
:
:
dom
:
:
Selection
>
GetSelectionForCopy
(
mozilla
:
:
dom
:
:
Document
*
aDocument
)
;
static
bool
CanCopy
(
mozilla
:
:
dom
:
:
Document
*
aDocument
)
;
MOZ_CAN_RUN_SCRIPT_BOUNDARY
static
bool
FireClipboardEvent
(
mozilla
:
:
EventMessage
aEventMessage
mozilla
:
:
Maybe
<
nsIClipboard
:
:
ClipboardType
>
aClipboardType
mozilla
:
:
PresShell
*
aPresShell
mozilla
:
:
dom
:
:
Selection
*
aSelection
bool
*
aActionTaken
=
nullptr
)
;
}
;
#
endif
