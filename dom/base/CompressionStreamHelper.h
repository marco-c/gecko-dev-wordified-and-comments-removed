#
ifndef
DOM_COMPRESSION_STREAM_HELPER_H_
#
define
DOM_COMPRESSION_STREAM_HELPER_H_
#
include
"
js
/
TypeDecls
.
h
"
#
include
"
zlib
.
h
"
#
include
"
mozilla
/
dom
/
CompressionStreamBinding
.
h
"
namespace
mozilla
:
:
dom
:
:
compression
{
enum
class
Flush
:
bool
{
No
Yes
}
;
inline
uint8_t
intoZLibFlush
(
Flush
aFlush
)
{
switch
(
aFlush
)
{
case
Flush
:
:
No
:
{
return
Z_NO_FLUSH
;
}
case
Flush
:
:
Yes
:
{
return
Z_FINISH
;
}
default
:
{
MOZ_ASSERT_UNREACHABLE
(
"
Unknown
flush
mode
"
)
;
return
Z_NO_FLUSH
;
}
}
}
inline
int8_t
ZLibWindowBits
(
CompressionFormat
format
)
{
switch
(
format
)
{
case
CompressionFormat
:
:
Deflate
:
return
15
;
case
CompressionFormat
:
:
Deflate_raw
:
return
-
15
;
case
CompressionFormat
:
:
Gzip
:
return
31
;
default
:
MOZ_ASSERT_UNREACHABLE
(
"
Unknown
compression
format
"
)
;
return
0
;
}
}
}
#
endif
