#
ifndef
nsCCUncollectableMarker_h_
#
define
nsCCUncollectableMarker_h_
#
include
"
js
/
TracingAPI
.
h
"
#
include
"
nsIObserver
.
h
"
class
nsCCUncollectableMarker
final
:
public
nsIObserver
{
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
static
nsresult
Init
(
)
;
static
bool
InGeneration
(
uint32_t
aGeneration
)
{
return
aGeneration
&
&
aGeneration
=
=
sGeneration
;
}
template
<
class
CCCallback
>
static
bool
InGeneration
(
CCCallback
&
aCb
uint32_t
aGeneration
)
{
return
InGeneration
(
aGeneration
)
&
&
!
aCb
.
WantAllTraces
(
)
;
}
static
void
CleanupForForgetSkippable
(
)
;
static
uint32_t
sGeneration
;
private
:
nsCCUncollectableMarker
(
)
=
default
;
~
nsCCUncollectableMarker
(
)
=
default
;
nsresult
Cleanup
(
bool
aPrepareForCC
)
;
}
;
namespace
mozilla
:
:
dom
{
void
TraceBlackJS
(
JSTracer
*
aTrc
)
;
}
#
endif
