#
ifndef
nsNodeUtils_h___
#
define
nsNodeUtils_h___
#
include
"
nsIContent
.
h
"
#
include
"
nsIMutationObserver
.
h
"
#
include
"
mozilla
/
dom
/
Document
.
h
"
#
include
"
js
/
TypeDecls
.
h
"
#
include
"
nsContentUtils
.
h
"
struct
CharacterDataChangeInfo
;
class
nsCycleCollectionTraversalCallback
;
namespace
mozilla
{
struct
NonOwningAnimationTarget
;
namespace
dom
{
class
Animation
;
class
MutationObservers
{
public
:
static
void
NotifyCharacterDataWillChange
(
nsIContent
*
aContent
const
CharacterDataChangeInfo
&
)
;
static
void
NotifyCharacterDataChanged
(
nsIContent
*
aContent
const
CharacterDataChangeInfo
&
)
;
static
void
NotifyAttributeWillChange
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
)
;
static
void
NotifyAttributeChanged
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
const
nsAttrValue
*
aOldValue
)
;
static
void
NotifyAttributeSetToCurrentValue
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
)
;
static
void
NotifyContentAppended
(
nsIContent
*
aContainer
nsIContent
*
aFirstNewContent
)
;
static
void
NotifyNativeAnonymousChildListChange
(
nsIContent
*
aContent
bool
aIsRemove
)
;
static
void
NotifyContentInserted
(
nsINode
*
aContainer
nsIContent
*
aChild
)
;
static
void
NotifyContentRemoved
(
nsINode
*
aContainer
nsIContent
*
aChild
nsIContent
*
aPreviousSibling
)
;
static
inline
void
NotifyParentChainChanged
(
nsIContent
*
aContent
)
{
nsINode
:
:
nsSlots
*
slots
=
aContent
-
>
GetExistingSlots
(
)
;
if
(
slots
&
&
!
slots
-
>
mMutationObservers
.
IsEmpty
(
)
)
{
NS_OBSERVER_AUTO_ARRAY_NOTIFY_OBSERVERS
(
slots
-
>
mMutationObservers
nsIMutationObserver
1
ParentChainChanged
(
aContent
)
)
;
}
}
static
void
NotifyAnimationAdded
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
static
void
NotifyAnimationChanged
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
static
void
NotifyAnimationRemoved
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
private
:
enum
class
AnimationMutationType
{
Added
Changed
Removed
}
;
static
void
NotifyAnimationMutated
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
AnimationMutationType
aMutatedType
)
;
}
;
}
}
#
endif
