#
ifndef
nsNodeUtils_h___
#
define
nsNodeUtils_h___
#
include
"
nsIContent
.
h
"
#
include
"
nsIMutationObserver
.
h
"
#
include
"
mozilla
/
dom
/
Document
.
h
"
#
include
"
js
/
TypeDecls
.
h
"
#
include
"
nsContentUtils
.
h
"
struct
CharacterDataChangeInfo
;
class
nsCycleCollectionTraversalCallback
;
namespace
mozilla
{
struct
NonOwningAnimationTarget
;
namespace
dom
{
class
Animation
;
}
}
class
nsNodeUtils
{
public
:
static
void
CharacterDataWillChange
(
nsIContent
*
aContent
const
CharacterDataChangeInfo
&
)
;
static
void
CharacterDataChanged
(
nsIContent
*
aContent
const
CharacterDataChangeInfo
&
)
;
static
void
AttributeWillChange
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
)
;
static
void
AttributeChanged
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
int32_t
aModType
const
nsAttrValue
*
aOldValue
)
;
static
void
AttributeSetToCurrentValue
(
mozilla
:
:
dom
:
:
Element
*
aElement
int32_t
aNameSpaceID
nsAtom
*
aAttribute
)
;
static
void
ContentAppended
(
nsIContent
*
aContainer
nsIContent
*
aFirstNewContent
)
;
static
void
NativeAnonymousChildListChange
(
nsIContent
*
aContent
bool
aIsRemove
)
;
static
void
ContentInserted
(
nsINode
*
aContainer
nsIContent
*
aChild
)
;
static
void
ContentRemoved
(
nsINode
*
aContainer
nsIContent
*
aChild
nsIContent
*
aPreviousSibling
)
;
static
inline
void
ParentChainChanged
(
nsIContent
*
aContent
)
{
nsINode
:
:
nsSlots
*
slots
=
aContent
-
>
GetExistingSlots
(
)
;
if
(
slots
&
&
!
slots
-
>
mMutationObservers
.
IsEmpty
(
)
)
{
NS_OBSERVER_AUTO_ARRAY_NOTIFY_OBSERVERS
(
slots
-
>
mMutationObservers
nsIMutationObserver
1
ParentChainChanged
(
aContent
)
)
;
}
}
static
void
AnimationAdded
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
static
void
AnimationChanged
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
static
void
AnimationRemoved
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
)
;
private
:
enum
class
AnimationMutationType
{
Added
Changed
Removed
}
;
static
void
AnimationMutated
(
mozilla
:
:
dom
:
:
Animation
*
aAnimation
AnimationMutationType
aMutatedType
)
;
}
;
#
endif
