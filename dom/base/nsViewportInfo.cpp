#
include
"
nsViewportInfo
.
h
"
#
include
<
algorithm
>
#
include
"
mozilla
/
Assertions
.
h
"
using
namespace
mozilla
;
void
nsViewportInfo
:
:
ConstrainViewportValues
(
)
{
MOZ_ASSERT
(
mMinZoom
>
CSSToScreenScale
(
0
.
0f
)
"
zoom
factor
must
be
positive
"
)
;
MOZ_ASSERT
(
mMaxZoom
>
CSSToScreenScale
(
0
.
0f
)
"
zoom
factor
must
be
positive
"
)
;
if
(
mDefaultZoom
>
mMaxZoom
)
{
mDefaultZoomValid
=
false
;
mDefaultZoom
=
mMaxZoom
;
}
if
(
mDefaultZoom
<
mMinZoom
)
{
mDefaultZoomValid
=
false
;
mDefaultZoom
=
mMinZoom
;
}
}
static
const
float
&
MinOrMax
(
const
float
&
aA
const
float
&
aB
const
float
&
(
*
aMinOrMax
)
(
const
float
&
const
float
&
)
)
{
MOZ_ASSERT
(
aA
!
=
nsViewportInfo
:
:
kExtendToZoom
&
&
aA
!
=
nsViewportInfo
:
:
kDeviceSize
&
&
aB
!
=
nsViewportInfo
:
:
kExtendToZoom
&
&
aB
!
=
nsViewportInfo
:
:
kDeviceSize
)
;
if
(
aA
=
=
nsViewportInfo
:
:
kAuto
)
{
return
aB
;
}
if
(
aB
=
=
nsViewportInfo
:
:
kAuto
)
{
return
aA
;
}
return
aMinOrMax
(
aA
aB
)
;
}
const
float
&
nsViewportInfo
:
:
Min
(
const
float
&
aA
const
float
&
aB
)
{
return
MinOrMax
(
aA
aB
std
:
:
min
)
;
}
const
float
&
nsViewportInfo
:
:
Max
(
const
float
&
aA
const
float
&
aB
)
{
return
MinOrMax
(
aA
aB
std
:
:
max
)
;
}
