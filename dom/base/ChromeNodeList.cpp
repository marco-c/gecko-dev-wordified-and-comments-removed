#
include
"
mozilla
/
dom
/
ChromeNodeList
.
h
"
#
include
"
mozilla
/
dom
/
ChromeNodeListBinding
.
h
"
using
namespace
mozilla
;
using
namespace
mozilla
:
:
dom
;
already_AddRefed
<
ChromeNodeList
>
ChromeNodeList
:
:
Constructor
(
const
GlobalObject
&
aGlobal
ErrorResult
&
aRv
)
{
nsCOMPtr
<
nsPIDOMWindowInner
>
win
=
do_QueryInterface
(
aGlobal
.
GetAsSupports
(
)
)
;
nsIDocument
*
root
=
win
?
win
-
>
GetExtantDoc
(
)
:
nullptr
;
RefPtr
<
ChromeNodeList
>
list
=
new
ChromeNodeList
(
root
)
;
return
list
.
forget
(
)
;
}
JSObject
*
ChromeNodeList
:
:
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
{
return
ChromeNodeListBinding
:
:
Wrap
(
aCx
this
aGivenProto
)
;
}
void
ChromeNodeList
:
:
Append
(
nsINode
&
aNode
ErrorResult
&
aError
)
{
if
(
!
aNode
.
IsContent
(
)
)
{
aError
.
Throw
(
NS_ERROR_DOM_TYPE_ERR
)
;
return
;
}
AppendElement
(
aNode
.
AsContent
(
)
)
;
}
void
ChromeNodeList
:
:
Remove
(
nsINode
&
aNode
ErrorResult
&
aError
)
{
if
(
!
aNode
.
IsContent
(
)
)
{
aError
.
Throw
(
NS_ERROR_DOM_TYPE_ERR
)
;
return
;
}
RemoveElement
(
aNode
.
AsContent
(
)
)
;
}
