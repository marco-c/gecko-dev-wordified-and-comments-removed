#
include
"
nsOpenURIInFrameParams
.
h
"
#
include
"
mozilla
/
BasePrincipal
.
h
"
#
include
"
mozilla
/
dom
/
ToJSValue
.
h
"
NS_IMPL_ISUPPORTS
(
nsOpenURIInFrameParams
nsIOpenURIInFrameParams
)
nsOpenURIInFrameParams
:
:
nsOpenURIInFrameParams
(
const
mozilla
:
:
OriginAttributes
&
aOriginAttributes
)
:
mOpenerOriginAttributes
(
aOriginAttributes
)
{
}
nsOpenURIInFrameParams
:
:
~
nsOpenURIInFrameParams
(
)
{
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
GetReferrer
(
nsAString
&
aReferrer
)
{
aReferrer
=
mReferrer
;
return
NS_OK
;
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
SetReferrer
(
const
nsAString
&
aReferrer
)
{
mReferrer
=
aReferrer
;
return
NS_OK
;
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
GetIsPrivate
(
bool
*
aIsPrivate
)
{
NS_ENSURE_ARG_POINTER
(
aIsPrivate
)
;
*
aIsPrivate
=
mOpenerOriginAttributes
.
mPrivateBrowsingId
>
0
;
return
NS_OK
;
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
GetTriggeringPrincipal
(
nsIPrincipal
*
*
aTriggeringPrincipal
)
{
NS_ADDREF
(
*
aTriggeringPrincipal
=
mTriggeringPrincipal
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
SetTriggeringPrincipal
(
nsIPrincipal
*
aTriggeringPrincipal
)
{
NS_ENSURE_TRUE
(
aTriggeringPrincipal
NS_ERROR_INVALID_ARG
)
;
mTriggeringPrincipal
=
aTriggeringPrincipal
;
return
NS_OK
;
}
NS_IMETHODIMP
nsOpenURIInFrameParams
:
:
GetOpenerOriginAttributes
(
JSContext
*
aCx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
aValue
)
{
bool
ok
=
ToJSValue
(
aCx
mOpenerOriginAttributes
aValue
)
;
NS_ENSURE_TRUE
(
ok
NS_ERROR_FAILURE
)
;
return
NS_OK
;
}
