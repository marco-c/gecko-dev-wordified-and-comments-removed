#
ifndef
dom_base_GeneratedImageContent_h
#
define
dom_base_GeneratedImageContent_h
#
include
"
mozilla
/
dom
/
HTMLElementBinding
.
h
"
#
include
"
mozilla
/
dom
/
NameSpaceConstants
.
h
"
#
include
"
mozilla
/
dom
/
NodeInfo
.
h
"
#
include
"
nsGenericHTMLElement
.
h
"
namespace
mozilla
{
namespace
dom
{
class
GeneratedImageContent
final
:
public
nsGenericHTMLElement
{
public
:
static
already_AddRefed
<
GeneratedImageContent
>
Create
(
Document
&
uint32_t
aContentIndex
)
;
static
already_AddRefed
<
GeneratedImageContent
>
CreateForListStyleImage
(
Document
&
)
;
explicit
GeneratedImageContent
(
already_AddRefed
<
dom
:
:
NodeInfo
>
&
&
aNodeInfo
)
:
nsGenericHTMLElement
(
std
:
:
move
(
aNodeInfo
)
)
{
MOZ_ASSERT
(
IsInNamespace
(
kNameSpaceID_XHTML
)
"
Someone
messed
up
our
nodeinfo
"
)
;
}
EventStates
IntrinsicState
(
)
const
override
{
EventStates
state
=
nsGenericHTMLElement
:
:
IntrinsicState
(
)
;
if
(
mBroken
)
{
state
|
=
NS_EVENT_STATE_BROKEN
;
}
return
state
;
}
nsresult
Clone
(
dom
:
:
NodeInfo
*
aNodeInfo
nsINode
*
*
aResult
)
const
final
;
nsresult
CopyInnerTo
(
GeneratedImageContent
*
aDest
)
{
nsresult
rv
=
nsGenericHTMLElement
:
:
CopyInnerTo
(
aDest
)
;
NS_ENSURE_SUCCESS
(
rv
rv
)
;
aDest
-
>
mIndex
=
mIndex
;
return
NS_OK
;
}
bool
IsForListStyleImageMarker
(
)
const
{
return
Index
(
)
=
=
uint32_t
(
-
1
)
;
}
uint32_t
Index
(
)
const
{
return
mIndex
;
}
void
NotifyLoadFailed
(
)
{
mBroken
=
true
;
UpdateState
(
true
)
;
}
protected
:
JSObject
*
WrapNode
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
final
;
private
:
virtual
~
GeneratedImageContent
(
)
=
default
;
uint32_t
mIndex
=
0
;
bool
mBroken
=
false
;
}
;
}
}
#
endif
