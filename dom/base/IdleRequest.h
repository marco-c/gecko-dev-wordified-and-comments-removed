#
ifndef
mozilla_dom_idlerequest_h
#
define
mozilla_dom_idlerequest_h
#
include
"
mozilla
/
LinkedList
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsDOMNavigationTiming
.
h
"
#
include
"
nsICancelableRunnable
.
h
"
#
include
"
nsIIncrementalRunnable
.
h
"
#
include
"
nsIRunnable
.
h
"
#
include
"
nsString
.
h
"
class
nsPIDOMWindowInner
;
namespace
mozilla
{
namespace
dom
{
class
IdleRequestCallback
;
class
IdleRequest
final
:
public
nsISupports
public
LinkedListElement
<
IdleRequest
>
{
public
:
IdleRequest
(
IdleRequestCallback
*
aCallback
uint32_t
aHandle
)
;
nsresult
IdleRun
(
nsPIDOMWindowInner
*
aWindow
DOMHighResTimeStamp
aDeadline
bool
aDidTimeout
)
;
void
SetTimeoutHandle
(
int32_t
aHandle
)
;
bool
HasTimeout
(
)
const
{
return
mTimeoutHandle
.
isSome
(
)
;
}
uint32_t
GetTimeoutHandle
(
)
const
;
uint32_t
Handle
(
)
const
{
return
mHandle
;
}
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_CYCLE_COLLECTION_CLASS
(
IdleRequest
)
private
:
~
IdleRequest
(
)
;
RefPtr
<
IdleRequestCallback
>
mCallback
;
const
uint32_t
mHandle
;
mozilla
:
:
Maybe
<
int32_t
>
mTimeoutHandle
;
}
;
}
}
#
endif
