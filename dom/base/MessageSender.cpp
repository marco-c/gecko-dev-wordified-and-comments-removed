#
include
"
mozilla
/
dom
/
MessageSender
.
h
"
#
include
"
mozilla
/
dom
/
MessageBroadcaster
.
h
"
namespace
mozilla
:
:
dom
{
void
MessageSender
:
:
InitWithCallback
(
ipc
:
:
MessageManagerCallback
*
aCallback
)
{
if
(
mCallback
)
{
return
;
}
SetCallback
(
aCallback
)
;
if
(
mParentManager
)
{
mParentManager
-
>
AddChildManager
(
this
)
;
}
for
(
uint32_t
i
=
0
;
i
<
mPendingScripts
.
Length
(
)
;
+
+
i
)
{
LoadScript
(
mPendingScripts
[
i
]
false
mPendingScriptsGlobalStates
[
i
]
IgnoreErrors
(
)
)
;
}
}
}
