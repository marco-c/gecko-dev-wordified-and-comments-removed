#
ifndef
nsIDocumentObserver_h___
#
define
nsIDocumentObserver_h___
#
include
"
mozilla
/
EventStates
.
h
"
#
include
"
mozilla
/
StyleSheet
.
h
"
#
include
"
nsISupports
.
h
"
#
include
"
nsIMutationObserver
.
h
"
class
nsIContent
;
class
nsIDocument
;
#
define
NS_IDOCUMENT_OBSERVER_IID
\
{
0x71041fa3
0x6dd7
0x4cde
\
{
0xbb
0x76
0xae
0xcc
0x69
0xe1
0x75
0x78
}
}
typedef
uint32_t
nsUpdateType
;
#
define
UPDATE_CONTENT_MODEL
0x00000001
#
define
UPDATE_STYLE
0x00000002
#
define
UPDATE_ALL
(
UPDATE_CONTENT_MODEL
|
UPDATE_STYLE
)
class
nsIDocumentObserver
:
public
nsIMutationObserver
{
public
:
NS_DECLARE_STATIC_IID_ACCESSOR
(
NS_IDOCUMENT_OBSERVER_IID
)
virtual
void
BeginUpdate
(
nsIDocument
*
aDocument
nsUpdateType
aUpdateType
)
=
0
;
virtual
void
EndUpdate
(
nsIDocument
*
aDocument
nsUpdateType
aUpdateType
)
=
0
;
virtual
void
BeginLoad
(
nsIDocument
*
aDocument
)
=
0
;
virtual
void
EndLoad
(
nsIDocument
*
aDocument
)
=
0
;
virtual
void
ContentStateChanged
(
nsIDocument
*
aDocument
nsIContent
*
aContent
mozilla
:
:
EventStates
aStateMask
)
=
0
;
virtual
void
DocumentStatesChanged
(
nsIDocument
*
aDocument
mozilla
:
:
EventStates
aStateMask
)
=
0
;
virtual
void
StyleSheetAdded
(
mozilla
:
:
StyleSheet
*
aStyleSheet
bool
aDocumentSheet
)
=
0
;
virtual
void
StyleSheetRemoved
(
mozilla
:
:
StyleSheet
*
aStyleSheet
bool
aDocumentSheet
)
=
0
;
virtual
void
StyleSheetApplicableStateChanged
(
mozilla
:
:
StyleSheet
*
aStyleSheet
)
=
0
;
}
;
NS_DEFINE_STATIC_IID_ACCESSOR
(
nsIDocumentObserver
NS_IDOCUMENT_OBSERVER_IID
)
#
define
NS_DECL_NSIDOCUMENTOBSERVER_BEGINUPDATE
\
virtual
void
BeginUpdate
(
nsIDocument
*
aDocument
\
nsUpdateType
aUpdateType
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_ENDUPDATE
\
virtual
void
EndUpdate
(
nsIDocument
*
aDocument
nsUpdateType
aUpdateType
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_BEGINLOAD
\
virtual
void
BeginLoad
(
nsIDocument
*
aDocument
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_ENDLOAD
\
virtual
void
EndLoad
(
nsIDocument
*
aDocument
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_CONTENTSTATECHANGED
\
virtual
void
ContentStateChanged
(
nsIDocument
*
aDocument
\
nsIContent
*
aContent
\
mozilla
:
:
EventStates
aStateMask
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_DOCUMENTSTATESCHANGED
\
virtual
void
DocumentStatesChanged
(
nsIDocument
*
aDocument
\
mozilla
:
:
EventStates
aStateMask
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETADDED
\
virtual
void
StyleSheetAdded
(
mozilla
:
:
StyleSheet
*
aStyleSheet
\
bool
aDocumentSheet
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETREMOVED
\
virtual
void
StyleSheetRemoved
(
mozilla
:
:
StyleSheet
*
aStyleSheet
\
bool
aDocumentSheet
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETAPPLICABLESTATECHANGED
\
virtual
void
StyleSheetApplicableStateChanged
(
\
mozilla
:
:
StyleSheet
*
aStyleSheet
)
override
;
#
define
NS_DECL_NSIDOCUMENTOBSERVER
\
NS_DECL_NSIDOCUMENTOBSERVER_BEGINUPDATE
\
NS_DECL_NSIDOCUMENTOBSERVER_ENDUPDATE
\
NS_DECL_NSIDOCUMENTOBSERVER_BEGINLOAD
\
NS_DECL_NSIDOCUMENTOBSERVER_ENDLOAD
\
NS_DECL_NSIDOCUMENTOBSERVER_CONTENTSTATECHANGED
\
NS_DECL_NSIDOCUMENTOBSERVER_DOCUMENTSTATESCHANGED
\
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETADDED
\
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETREMOVED
\
NS_DECL_NSIDOCUMENTOBSERVER_STYLESHEETAPPLICABLESTATECHANGED
\
NS_DECL_NSIMUTATIONOBSERVER
#
define
NS_IMPL_NSIDOCUMENTOBSERVER_CORE_STUB
(
_class
)
\
void
\
_class
:
:
BeginUpdate
(
nsIDocument
*
aDocument
nsUpdateType
aUpdateType
)
\
{
\
}
\
void
\
_class
:
:
EndUpdate
(
nsIDocument
*
aDocument
nsUpdateType
aUpdateType
)
\
{
\
}
\
NS_IMPL_NSIMUTATIONOBSERVER_CORE_STUB
(
_class
)
#
define
NS_IMPL_NSIDOCUMENTOBSERVER_LOAD_STUB
(
_class
)
\
void
\
_class
:
:
BeginLoad
(
nsIDocument
*
aDocument
)
\
{
\
}
\
void
\
_class
:
:
EndLoad
(
nsIDocument
*
aDocument
)
\
{
\
}
#
define
NS_IMPL_NSIDOCUMENTOBSERVER_STATE_STUB
(
_class
)
\
void
\
_class
:
:
ContentStateChanged
(
nsIDocument
*
aDocument
\
nsIContent
*
aContent
\
mozilla
:
:
EventStates
aStateMask
)
\
{
\
}
\
\
void
\
_class
:
:
DocumentStatesChanged
(
nsIDocument
*
aDocument
\
mozilla
:
:
EventStates
aStateMask
)
\
{
\
}
#
define
NS_IMPL_NSIDOCUMENTOBSERVER_CONTENT
(
_class
)
\
NS_IMPL_NSIMUTATIONOBSERVER_CONTENT
(
_class
)
#
define
NS_IMPL_NSIDOCUMENTOBSERVER_STYLE_STUB
(
_class
)
\
void
\
_class
:
:
StyleSheetAdded
(
mozilla
:
:
StyleSheet
*
aStyleSheet
\
bool
aDocumentSheet
)
\
{
\
}
\
void
\
_class
:
:
StyleSheetRemoved
(
mozilla
:
:
StyleSheet
*
aStyleSheet
\
bool
aDocumentSheet
)
\
{
\
}
\
void
\
_class
:
:
StyleSheetApplicableStateChanged
(
mozilla
:
:
StyleSheet
*
aStyleSheet
)
\
{
\
}
\
#
endif
