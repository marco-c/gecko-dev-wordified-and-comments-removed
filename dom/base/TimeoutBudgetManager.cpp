#
include
"
TimeoutBudgetManager
.
h
"
#
include
"
mozilla
/
dom
/
Timeout
.
h
"
namespace
mozilla
:
:
dom
{
TimeoutBudgetManager
&
TimeoutBudgetManager
:
:
Get
(
)
{
static
TimeoutBudgetManager
gTimeoutBudgetManager
;
return
gTimeoutBudgetManager
;
}
void
TimeoutBudgetManager
:
:
StartRecording
(
const
TimeStamp
&
aNow
)
{
mStart
=
aNow
;
}
void
TimeoutBudgetManager
:
:
StopRecording
(
)
{
mStart
=
TimeStamp
(
)
;
}
TimeDuration
TimeoutBudgetManager
:
:
RecordExecution
(
const
TimeStamp
&
aNow
const
Timeout
*
aTimeout
)
{
if
(
!
mStart
)
{
return
TimeDuration
(
)
;
}
return
aNow
-
mStart
;
}
}
