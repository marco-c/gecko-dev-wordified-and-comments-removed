#
ifndef
mozilla_dom_BindContext_h__
#
define
mozilla_dom_BindContext_h__
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
nsXBLBinding
.
h
"
#
include
"
mozilla
/
dom
/
Element
.
h
"
#
include
"
mozilla
/
dom
/
ShadowRoot
.
h
"
namespace
mozilla
{
namespace
dom
{
struct
MOZ_STACK_CLASS
BindContext
final
{
Document
&
OwnerDoc
(
)
const
{
return
mDoc
;
}
bool
InComposedDoc
(
)
const
{
return
mInComposedDoc
;
}
bool
InUncomposedDoc
(
)
const
{
return
mInUncomposedDoc
;
}
Document
*
GetComposedDoc
(
)
const
{
return
mInComposedDoc
?
&
mDoc
:
nullptr
;
}
Document
*
GetUncomposedDoc
(
)
const
{
return
mInUncomposedDoc
?
&
mDoc
:
nullptr
;
}
bool
SubtreeRootChanges
(
)
const
{
return
mSubtreeRootChanges
;
}
Element
*
GetBindingParent
(
)
const
{
return
mBindingParent
;
}
explicit
BindContext
(
nsINode
&
aParentNode
)
:
mDoc
(
*
aParentNode
.
OwnerDoc
(
)
)
mBindingParent
(
aParentNode
.
IsContent
(
)
?
aParentNode
.
AsContent
(
)
-
>
GetBindingParent
(
)
:
nullptr
)
mInComposedDoc
(
aParentNode
.
IsInComposedDoc
(
)
)
mInUncomposedDoc
(
aParentNode
.
IsInUncomposedDoc
(
)
)
mSubtreeRootChanges
(
true
)
{
}
explicit
BindContext
(
ShadowRoot
&
aShadowRoot
)
:
mDoc
(
*
aShadowRoot
.
OwnerDoc
(
)
)
mBindingParent
(
aShadowRoot
.
Host
(
)
)
mInComposedDoc
(
aShadowRoot
.
IsInComposedDoc
(
)
)
mInUncomposedDoc
(
false
)
mSubtreeRootChanges
(
false
)
{
}
enum
ForNativeAnonymous
{
ForNativeAnonymous
}
;
BindContext
(
Element
&
aParentElement
enum
ForNativeAnonymous
)
:
mDoc
(
*
aParentElement
.
OwnerDoc
(
)
)
mBindingParent
(
&
aParentElement
)
mInComposedDoc
(
aParentElement
.
IsInComposedDoc
(
)
)
mInUncomposedDoc
(
aParentElement
.
IsInUncomposedDoc
(
)
)
mSubtreeRootChanges
(
true
)
{
MOZ_ASSERT
(
mInComposedDoc
"
Binding
NAC
in
a
disconnected
subtree
?
"
)
;
}
BindContext
(
nsXBLBinding
&
aBinding
Element
&
aParentElement
)
:
mDoc
(
*
aParentElement
.
OwnerDoc
(
)
)
mBindingParent
(
aBinding
.
GetBoundElement
(
)
)
mInComposedDoc
(
aParentElement
.
IsInComposedDoc
(
)
)
mInUncomposedDoc
(
aParentElement
.
IsInUncomposedDoc
(
)
)
mSubtreeRootChanges
(
true
)
{
}
private
:
Document
&
mDoc
;
Element
*
const
mBindingParent
;
const
bool
mInComposedDoc
;
const
bool
mInUncomposedDoc
;
const
bool
mSubtreeRootChanges
;
}
;
}
}
#
endif
