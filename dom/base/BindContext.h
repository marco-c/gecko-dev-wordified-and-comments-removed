#
ifndef
mozilla_dom_BindContext_h__
#
define
mozilla_dom_BindContext_h__
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
nsXBLBinding
.
h
"
#
include
"
mozilla
/
dom
/
Element
.
h
"
#
include
"
mozilla
/
dom
/
ShadowRoot
.
h
"
namespace
mozilla
{
namespace
dom
{
struct
MOZ_STACK_CLASS
BindContext
final
{
Document
&
OwnerDoc
(
)
const
{
return
mDoc
;
}
bool
SubtreeRootChanges
(
)
const
{
return
mSubtreeRootChanges
;
}
Element
*
GetBindingParent
(
)
const
{
return
mBindingParent
;
}
explicit
BindContext
(
nsINode
&
aParentNode
)
:
mDoc
(
*
aParentNode
.
OwnerDoc
(
)
)
mSubtreeRootChanges
(
true
)
mBindingParent
(
aParentNode
.
IsContent
(
)
?
aParentNode
.
AsContent
(
)
-
>
GetBindingParent
(
)
:
nullptr
)
{
}
explicit
BindContext
(
ShadowRoot
&
aShadowRoot
)
:
mDoc
(
*
aShadowRoot
.
OwnerDoc
(
)
)
mSubtreeRootChanges
(
false
)
mBindingParent
(
aShadowRoot
.
Host
(
)
)
{
}
enum
ForNativeAnonymous
{
ForNativeAnonymous
}
;
BindContext
(
Element
&
aParentElement
enum
ForNativeAnonymous
)
:
mDoc
(
*
aParentElement
.
OwnerDoc
(
)
)
mSubtreeRootChanges
(
true
)
mBindingParent
(
&
aParentElement
)
{
}
BindContext
(
nsXBLBinding
&
aBinding
Element
&
aParentElement
)
:
mDoc
(
*
aParentElement
.
OwnerDoc
(
)
)
mSubtreeRootChanges
(
true
)
mBindingParent
(
aBinding
.
GetBoundElement
(
)
)
{
}
private
:
Document
&
mDoc
;
const
bool
mSubtreeRootChanges
;
Element
*
const
mBindingParent
;
}
;
}
}
#
endif
