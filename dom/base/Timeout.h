#
ifndef
mozilla_dom_timeout_h
#
define
mozilla_dom_timeout_h
#
include
"
mozilla
/
LinkedList
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
class
nsGlobalWindow
;
class
nsIPrincipal
;
class
nsITimeoutHandler
;
class
nsITimer
;
namespace
mozilla
{
namespace
dom
{
class
Timeout
final
:
public
LinkedListElement
<
Timeout
>
{
public
:
Timeout
(
)
;
NS_DECL_CYCLE_COLLECTION_NATIVE_CLASS
(
Timeout
)
NS_INLINE_DECL_CYCLE_COLLECTING_NATIVE_REFCOUNTING
(
Timeout
)
nsresult
InitTimer
(
uint32_t
aDelay
)
;
enum
class
Reason
{
eTimeoutOrInterval
eIdleCallbackTimeout
}
;
static
void
TimerNameCallback
(
nsITimer
*
aTimer
void
*
aClosure
char
*
aBuf
size_t
aLen
)
;
#
ifdef
DEBUG
bool
HasRefCntOne
(
)
const
;
#
endif
RefPtr
<
nsGlobalWindow
>
mWindow
;
nsCOMPtr
<
nsITimer
>
mTimer
;
bool
mCleared
;
bool
mRunning
;
bool
mIsInterval
;
Reason
mReason
;
uint32_t
mTimeoutId
;
uint32_t
mInterval
;
TimeStamp
mWhen
;
TimeDuration
mTimeRemaining
;
nsCOMPtr
<
nsIPrincipal
>
mPrincipal
;
uint32_t
mFiringDepth
;
uint32_t
mNestingLevel
;
PopupControlState
mPopupState
;
nsCOMPtr
<
nsITimeoutHandler
>
mScriptHandler
;
private
:
~
Timeout
(
)
;
}
;
}
}
#
endif
