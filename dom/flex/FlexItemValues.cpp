#
include
"
FlexItemValues
.
h
"
#
include
"
mozilla
/
dom
/
DOMRect
.
h
"
#
include
"
mozilla
/
dom
/
FlexBinding
.
h
"
#
include
"
mozilla
/
dom
/
FlexLineValues
.
h
"
#
include
"
nsFlexContainerFrame
.
h
"
namespace
mozilla
:
:
dom
{
NS_IMPL_CYCLE_COLLECTION_WRAPPERCACHE
(
FlexItemValues
mParent
mNode
mFrameRect
)
NS_IMPL_CYCLE_COLLECTING_ADDREF
(
FlexItemValues
)
NS_IMPL_CYCLE_COLLECTING_RELEASE
(
FlexItemValues
)
NS_INTERFACE_MAP_BEGIN_CYCLE_COLLECTION
(
FlexItemValues
)
NS_WRAPPERCACHE_INTERFACE_MAP_ENTRY
NS_INTERFACE_MAP_ENTRY
(
nsISupports
)
NS_INTERFACE_MAP_END
static
double
ToPossiblyUnconstrainedPixels
(
nscoord
aSize
)
{
if
(
aSize
=
=
NS_UNCONSTRAINEDSIZE
)
{
return
std
:
:
numeric_limits
<
double
>
:
:
infinity
(
)
;
}
return
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aSize
)
;
}
FlexItemValues
:
:
FlexItemValues
(
FlexLineValues
*
aParent
const
ComputedFlexItemInfo
*
aItem
)
:
mParent
(
aParent
)
{
MOZ_ASSERT
(
aItem
"
Should
never
be
instantiated
with
a
null
ComputedFlexLineInfo
.
"
)
;
mNode
=
aItem
-
>
mNode
;
mFrameRect
=
new
DOMRectReadOnly
(
mParent
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mFrameRect
.
X
(
)
)
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mFrameRect
.
Y
(
)
)
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mFrameRect
.
Width
(
)
)
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mFrameRect
.
Height
(
)
)
)
;
mMainBaseSize
=
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mMainBaseSize
)
;
mMainDeltaSize
=
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mMainDeltaSize
)
;
mMainMinSize
=
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mMainMinSize
)
;
mMainMaxSize
=
ToPossiblyUnconstrainedPixels
(
aItem
-
>
mMainMaxSize
)
;
mCrossMinSize
=
nsPresContext
:
:
AppUnitsToDoubleCSSPixels
(
aItem
-
>
mCrossMinSize
)
;
mCrossMaxSize
=
ToPossiblyUnconstrainedPixels
(
aItem
-
>
mCrossMaxSize
)
;
mClampState
=
aItem
-
>
mClampState
;
}
JSObject
*
FlexItemValues
:
:
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
)
{
return
FlexItemValues_Binding
:
:
Wrap
(
aCx
this
aGivenProto
)
;
}
nsINode
*
FlexItemValues
:
:
GetNode
(
)
const
{
return
mNode
;
}
DOMRectReadOnly
*
FlexItemValues
:
:
FrameRect
(
)
const
{
return
mFrameRect
;
}
double
FlexItemValues
:
:
MainBaseSize
(
)
const
{
return
mMainBaseSize
;
}
double
FlexItemValues
:
:
MainDeltaSize
(
)
const
{
return
mMainDeltaSize
;
}
double
FlexItemValues
:
:
MainMinSize
(
)
const
{
return
mMainMinSize
;
}
double
FlexItemValues
:
:
MainMaxSize
(
)
const
{
return
mMainMaxSize
;
}
double
FlexItemValues
:
:
CrossMinSize
(
)
const
{
return
mCrossMinSize
;
}
double
FlexItemValues
:
:
CrossMaxSize
(
)
const
{
return
mCrossMaxSize
;
}
FlexItemClampState
FlexItemValues
:
:
ClampState
(
)
const
{
return
mClampState
;
}
}
