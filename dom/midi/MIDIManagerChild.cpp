#
include
"
MIDIManagerChild
.
h
"
#
include
"
mozilla
/
dom
/
MIDIAccessManager
.
h
"
using
namespace
mozilla
:
:
dom
;
MIDIManagerChild
:
:
MIDIManagerChild
(
)
:
mShutdown
(
false
)
{
}
mozilla
:
:
ipc
:
:
IPCResult
MIDIManagerChild
:
:
RecvMIDIPortListUpdate
(
const
MIDIPortList
&
aPortList
)
{
MOZ_ASSERT
(
NS_IsMainThread
(
)
)
;
if
(
mShutdown
)
{
return
IPC_OK
(
)
;
}
MOZ_ASSERT
(
MIDIAccessManager
:
:
IsRunning
(
)
)
;
MIDIAccessManager
:
:
Get
(
)
-
>
Update
(
aPortList
)
;
return
IPC_OK
(
)
;
}
void
MIDIManagerChild
:
:
SetActorAlive
(
)
{
AddRef
(
)
;
}
void
MIDIManagerChild
:
:
Shutdown
(
)
{
MOZ_ASSERT
(
!
mShutdown
)
;
mShutdown
=
true
;
SendShutdown
(
)
;
}
