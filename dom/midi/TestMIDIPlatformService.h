#
ifndef
mozilla_dom_TestMIDIPlatformService_h
#
define
mozilla_dom_TestMIDIPlatformService_h
#
include
"
mozilla
/
dom
/
MIDIPlatformService
.
h
"
#
include
"
mozilla
/
dom
/
MIDITypes
.
h
"
class
nsIThread
;
namespace
mozilla
{
namespace
dom
{
class
MIDIPortInterface
;
class
TestMIDIPlatformService
:
public
MIDIPlatformService
{
public
:
TestMIDIPlatformService
(
)
;
virtual
void
Init
(
)
override
;
virtual
void
Open
(
MIDIPortParent
*
aPort
)
override
;
virtual
void
Stop
(
)
override
;
virtual
void
ScheduleSend
(
const
nsAString
&
aPort
)
override
;
virtual
void
ScheduleClose
(
MIDIPortParent
*
aPort
)
override
;
void
ProcessMessages
(
const
nsAString
&
aPort
)
;
private
:
virtual
~
TestMIDIPlatformService
(
)
;
nsCOMPtr
<
nsIThread
>
mBackgroundThread
;
MIDIPortInfo
mControlInputPort
;
MIDIPortInfo
mControlOutputPort
;
MIDIPortInfo
mStateTestInputPort
;
MIDIPortInfo
mStateTestOutputPort
;
MIDIPortInfo
mAlwaysClosedTestOutputPort
;
nsCOMPtr
<
nsIThread
>
mClientThread
;
bool
mIsInitialized
;
}
;
}
}
#
endif
