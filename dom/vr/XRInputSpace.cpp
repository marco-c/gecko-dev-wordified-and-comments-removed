#
include
"
XRInputSpace
.
h
"
#
include
"
VRDisplayClient
.
h
"
#
include
"
mozilla
/
dom
/
GamepadPoseState
.
h
"
namespace
mozilla
{
namespace
dom
{
XRInputSpace
:
:
XRInputSpace
(
nsIGlobalObject
*
aParent
XRSession
*
aSession
XRNativeOrigin
*
aNativeOrigin
int32_t
aControllerIndex
)
:
XRSpace
(
aParent
aSession
aNativeOrigin
)
mIndex
(
aControllerIndex
)
{
}
bool
XRInputSpace
:
:
IsPositionEmulated
(
)
const
{
gfx
:
:
VRDisplayClient
*
display
=
mSession
-
>
GetDisplayClient
(
)
;
if
(
!
display
)
{
return
true
;
}
const
gfx
:
:
VRDisplayInfo
&
displayInfo
=
display
-
>
GetDisplayInfo
(
)
;
const
gfx
:
:
VRControllerState
&
controllerState
=
displayInfo
.
mControllerState
[
mIndex
]
;
MOZ_ASSERT
(
controllerState
.
controllerName
[
0
]
!
=
'
\
0
'
)
;
return
(
(
controllerState
.
flags
&
GamepadCapabilityFlags
:
:
Cap_PositionEmulated
)
!
=
GamepadCapabilityFlags
:
:
Cap_None
)
;
}
}
}
