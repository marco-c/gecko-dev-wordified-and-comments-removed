#
include
"
XRNativeOriginViewer
.
h
"
#
include
"
VRDisplayClient
.
h
"
namespace
mozilla
{
namespace
dom
{
XRNativeOriginViewer
:
:
XRNativeOriginViewer
(
gfx
:
:
VRDisplayClient
*
aDisplay
)
:
mDisplay
(
aDisplay
)
{
MOZ_ASSERT
(
aDisplay
)
;
}
gfx
:
:
PointDouble3D
XRNativeOriginViewer
:
:
GetPosition
(
)
{
const
gfx
:
:
VRHMDSensorState
&
sensorState
=
mDisplay
-
>
GetSensorState
(
)
;
return
gfx
:
:
PointDouble3D
(
sensorState
.
pose
.
position
[
0
]
sensorState
.
pose
.
position
[
1
]
sensorState
.
pose
.
position
[
2
]
)
;
}
gfx
:
:
QuaternionDouble
XRNativeOriginViewer
:
:
GetOrientation
(
)
{
const
gfx
:
:
VRHMDSensorState
&
sensorState
=
mDisplay
-
>
GetSensorState
(
)
;
return
gfx
:
:
QuaternionDouble
(
sensorState
.
pose
.
orientation
[
0
]
sensorState
.
pose
.
orientation
[
1
]
sensorState
.
pose
.
orientation
[
2
]
sensorState
.
pose
.
orientation
[
3
]
)
;
}
}
}
