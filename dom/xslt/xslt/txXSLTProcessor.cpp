#
include
"
txXSLTProcessor
.
h
"
#
include
"
nsGkAtoms
.
h
"
#
include
"
txExecutionState
.
h
"
#
include
"
txExprResult
.
h
"
#
include
"
txInstructions
.
h
"
#
include
"
txLog
.
h
"
#
include
"
txStylesheetCompileHandlers
.
h
"
#
include
"
txStylesheetCompiler
.
h
"
TX_LG_IMPL
bool
txXSLTProcessor
:
:
init
(
)
{
TX_LG_CREATE
;
if
(
!
txHandlerTable
:
:
init
(
)
)
return
false
;
extern
bool
TX_InitEXSLTFunction
(
)
;
if
(
!
TX_InitEXSLTFunction
(
)
)
return
false
;
return
true
;
}
void
txXSLTProcessor
:
:
shutdown
(
)
{
txHandlerTable
:
:
shutdown
(
)
;
}
nsresult
txXSLTProcessor
:
:
execute
(
txExecutionState
&
aEs
)
{
nsresult
rv
;
do
{
mozilla
:
:
Result
<
txInstruction
*
nsresult
>
result
=
aEs
.
getNextInstruction
(
)
;
if
(
result
.
isErr
(
)
)
{
return
result
.
unwrapErr
(
)
;
}
txInstruction
*
instr
=
result
.
unwrap
(
)
;
if
(
!
instr
)
{
return
NS_OK
;
}
rv
=
instr
-
>
execute
(
aEs
)
;
}
while
(
NS_SUCCEEDED
(
rv
)
)
;
return
rv
;
}
