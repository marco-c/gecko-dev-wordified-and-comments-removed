#
ifndef
mozilla_dom_XPathEvaluator_h
#
define
mozilla_dom_XPathEvaluator_h
#
include
"
mozilla
/
dom
/
NonRefcountedDOMObject
.
h
"
#
include
"
nsIWeakReference
.
h
"
#
include
"
nsAutoPtr
.
h
"
#
include
"
nsString
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
ErrorResult
.
h
"
#
include
"
mozilla
/
dom
/
Document
.
h
"
class
nsINode
;
class
txIParseContext
;
class
txResultRecycler
;
namespace
mozilla
{
namespace
dom
{
class
GlobalObject
;
class
XPathExpression
;
class
XPathNSResolver
;
class
XPathResult
;
class
XPathEvaluator
final
:
public
NonRefcountedDOMObject
{
public
:
explicit
XPathEvaluator
(
Document
*
aDocument
=
nullptr
)
;
~
XPathEvaluator
(
)
;
bool
WrapObject
(
JSContext
*
aCx
JS
:
:
Handle
<
JSObject
*
>
aGivenProto
JS
:
:
MutableHandle
<
JSObject
*
>
aReflector
)
;
Document
*
GetParentObject
(
)
{
nsCOMPtr
<
Document
>
doc
=
do_QueryReferent
(
mDocument
)
;
return
doc
;
}
static
XPathEvaluator
*
Constructor
(
const
GlobalObject
&
aGlobal
ErrorResult
&
rv
)
;
XPathExpression
*
CreateExpression
(
const
nsAString
&
aExpression
XPathNSResolver
*
aResolver
ErrorResult
&
rv
)
;
XPathExpression
*
CreateExpression
(
const
nsAString
&
aExpression
nsINode
*
aResolver
ErrorResult
&
aRv
)
;
nsINode
*
CreateNSResolver
(
nsINode
&
aNodeResolver
)
{
return
&
aNodeResolver
;
}
already_AddRefed
<
XPathResult
>
Evaluate
(
JSContext
*
aCx
const
nsAString
&
aExpression
nsINode
&
aContextNode
XPathNSResolver
*
aResolver
uint16_t
aType
JS
:
:
Handle
<
JSObject
*
>
aResult
ErrorResult
&
rv
)
;
private
:
XPathExpression
*
CreateExpression
(
const
nsAString
&
aExpression
txIParseContext
*
aContext
Document
*
aDocument
ErrorResult
&
aRv
)
;
nsWeakPtr
mDocument
;
RefPtr
<
txResultRecycler
>
mRecycler
;
}
;
}
}
#
endif
