#
ifndef
mozilla_dom_StringBlobImpl_h
#
define
mozilla_dom_StringBlobImpl_h
#
include
"
BaseBlobImpl
.
h
"
#
include
"
nsIMemoryReporter
.
h
"
namespace
mozilla
:
:
dom
{
class
StringBlobImpl
final
:
public
BaseBlobImpl
public
nsIMemoryReporter
{
MOZ_DEFINE_MALLOC_SIZE_OF
(
MallocSizeOf
)
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_NSIMEMORYREPORTER
static
already_AddRefed
<
StringBlobImpl
>
Create
(
const
nsACString
&
aData
const
nsAString
&
aContentType
)
;
void
CreateInputStream
(
nsIInputStream
*
*
aStream
ErrorResult
&
aRv
)
override
;
already_AddRefed
<
BlobImpl
>
CreateSlice
(
uint64_t
aStart
uint64_t
aLength
const
nsAString
&
aContentType
ErrorResult
&
aRv
)
override
;
size_t
GetAllocationSize
(
)
const
override
{
return
mData
.
Length
(
)
;
}
size_t
GetAllocationSize
(
FallibleTArray
<
BlobImpl
*
>
&
aVisitedBlobImpls
)
const
override
{
return
GetAllocationSize
(
)
;
}
void
GetBlobImplType
(
nsAString
&
aBlobImplType
)
const
override
{
aBlobImplType
=
u
"
StringBlobImpl
"
_ns
;
}
private
:
StringBlobImpl
(
const
nsACString
&
aData
const
nsAString
&
aContentType
)
;
~
StringBlobImpl
(
)
override
;
nsCString
mData
;
}
;
}
#
endif
