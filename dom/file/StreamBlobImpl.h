#
ifndef
mozilla_dom_StreamBlobImpl_h
#
define
mozilla_dom_StreamBlobImpl_h
#
include
"
BaseBlobImpl
.
h
"
#
include
"
nsIMemoryReporter
.
h
"
namespace
mozilla
{
namespace
dom
{
class
StreamBlobImpl
final
:
public
BaseBlobImpl
public
nsIMemoryReporter
{
MOZ_DEFINE_MALLOC_SIZE_OF
(
MallocSizeOf
)
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_NSIMEMORYREPORTER
static
already_AddRefed
<
StreamBlobImpl
>
Create
(
nsIInputStream
*
aInputStream
const
nsAString
&
aContentType
uint64_t
aLength
)
;
static
already_AddRefed
<
StreamBlobImpl
>
Create
(
nsIInputStream
*
aInputStream
const
nsAString
&
aName
const
nsAString
&
aContentType
int64_t
aLastModifiedDate
uint64_t
aLength
)
;
virtual
void
GetInternalStream
(
nsIInputStream
*
*
aStream
ErrorResult
&
aRv
)
override
;
virtual
already_AddRefed
<
BlobImpl
>
CreateSlice
(
uint64_t
aStart
uint64_t
aLength
const
nsAString
&
aContentType
ErrorResult
&
aRv
)
override
;
virtual
bool
IsMemoryFile
(
)
const
override
{
return
true
;
}
private
:
StreamBlobImpl
(
nsIInputStream
*
aInputStream
const
nsAString
&
aContentType
uint64_t
aLength
)
;
StreamBlobImpl
(
nsIInputStream
*
aInputStream
const
nsAString
&
aName
const
nsAString
&
aContentType
int64_t
aLastModifiedDate
uint64_t
aLength
)
;
StreamBlobImpl
(
StreamBlobImpl
*
aOther
const
nsAString
&
aContentType
uint64_t
aStart
uint64_t
aLength
)
;
~
StreamBlobImpl
(
)
;
void
MaybeRegisterMemoryReporter
(
)
;
nsCOMPtr
<
nsIInputStream
>
mInputStream
;
}
;
}
}
#
endif
