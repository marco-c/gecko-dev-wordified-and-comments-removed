#
include
"
MessagePortChild
.
h
"
#
include
"
MessagePort
.
h
"
#
include
"
mozilla
/
dom
/
MessageEvent
.
h
"
#
include
"
mozilla
/
ipc
/
PBackgroundChild
.
h
"
namespace
mozilla
:
:
dom
{
MessagePortChild
:
:
MessagePortChild
(
)
:
mPort
(
nullptr
)
{
}
mozilla
:
:
ipc
:
:
IPCResult
MessagePortChild
:
:
RecvStopSendingDataConfirmed
(
)
{
MOZ_ASSERT
(
mPort
)
;
mPort
-
>
StopSendingDataConfirmed
(
)
;
MOZ_ASSERT
(
!
mPort
)
;
return
IPC_OK
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
MessagePortChild
:
:
RecvEntangled
(
nsTArray
<
MessageData
>
&
&
aMessages
)
{
if
(
mPort
)
{
mPort
-
>
Entangled
(
aMessages
)
;
}
return
IPC_OK
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
MessagePortChild
:
:
RecvReceiveData
(
nsTArray
<
MessageData
>
&
&
aMessages
)
{
if
(
mPort
)
{
mPort
-
>
MessagesReceived
(
aMessages
)
;
}
return
IPC_OK
(
)
;
}
void
MessagePortChild
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
if
(
mPort
)
{
mPort
-
>
Closed
(
)
;
MOZ_ASSERT
(
!
mPort
)
;
}
}
}
