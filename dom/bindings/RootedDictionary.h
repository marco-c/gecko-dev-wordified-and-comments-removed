#
ifndef
mozilla_dom_RootedDictionary_h__
#
define
mozilla_dom_RootedDictionary_h__
#
include
"
jsapi
.
h
"
#
include
"
mozilla
/
dom
/
Nullable
.
h
"
namespace
mozilla
:
:
dom
{
template
<
typename
T
>
class
MOZ_RAII
RootedDictionary
final
:
public
T
private
JS
:
:
CustomAutoRooter
{
public
:
template
<
typename
CX
>
explicit
RootedDictionary
(
const
CX
&
cx
)
:
T
(
)
JS
:
:
CustomAutoRooter
(
cx
)
{
}
virtual
void
trace
(
JSTracer
*
trc
)
override
{
this
-
>
TraceDictionary
(
trc
)
;
}
}
;
template
<
typename
T
>
class
MOZ_RAII
NullableRootedDictionary
final
:
public
Nullable
<
T
>
private
JS
:
:
CustomAutoRooter
{
public
:
template
<
typename
CX
>
explicit
NullableRootedDictionary
(
const
CX
&
cx
)
:
Nullable
<
T
>
(
)
JS
:
:
CustomAutoRooter
(
cx
)
{
}
virtual
void
trace
(
JSTracer
*
trc
)
override
{
if
(
!
this
-
>
IsNull
(
)
)
{
this
-
>
Value
(
)
.
TraceDictionary
(
trc
)
;
}
}
}
;
}
#
endif
