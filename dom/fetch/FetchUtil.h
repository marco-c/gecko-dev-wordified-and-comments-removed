#
ifndef
mozilla_dom_FetchUtil_h
#
define
mozilla_dom_FetchUtil_h
#
include
"
nsString
.
h
"
#
include
"
nsError
.
h
"
#
include
"
mozilla
/
ErrorResult
.
h
"
#
include
"
mozilla
/
dom
/
File
.
h
"
#
include
"
mozilla
/
dom
/
FormData
.
h
"
#
define
WASM_CONTENT_TYPE
"
application
/
wasm
"
#
define
WASM_ALT_DATA_TYPE_V1
"
wasm
/
machine
-
code
/
1
"
class
nsIPrincipal
;
class
nsIHttpChannel
;
namespace
mozilla
{
namespace
dom
{
class
Document
;
class
InternalRequest
;
class
WorkerPrivate
;
class
FetchUtil
final
{
private
:
FetchUtil
(
)
=
delete
;
public
:
static
nsresult
GetValidRequestMethod
(
const
nsACString
&
aMethod
nsCString
&
outMethod
)
;
static
bool
ExtractHeader
(
nsACString
:
:
const_iterator
&
aStart
nsACString
:
:
const_iterator
&
aEnd
nsCString
&
aHeaderName
nsCString
&
aHeaderValue
bool
*
aWasEmptyHeader
)
;
static
nsresult
SetRequestReferrer
(
nsIPrincipal
*
aPrincipal
Document
*
aDoc
nsIHttpChannel
*
aChannel
InternalRequest
*
aRequest
)
;
static
bool
StreamResponseToJS
(
JSContext
*
aCx
JS
:
:
HandleObject
aObj
JS
:
:
MimeType
aMimeType
JS
:
:
StreamConsumer
*
aConsumer
WorkerPrivate
*
aMaybeWorker
)
;
static
void
ReportJSStreamError
(
JSContext
*
aCx
size_t
aErrorCode
)
;
}
;
}
}
#
endif
