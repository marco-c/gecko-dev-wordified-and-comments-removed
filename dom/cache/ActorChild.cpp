#
include
"
mozilla
/
dom
/
cache
/
ActorChild
.
h
"
#
include
"
mozilla
/
dom
/
cache
/
CacheWorkerRef
.
h
"
#
include
"
nsThreadUtils
.
h
"
namespace
mozilla
{
namespace
dom
{
namespace
cache
{
void
ActorChild
:
:
SetWorkerRef
(
CacheWorkerRef
*
aWorkerRef
)
{
if
(
mWorkerRef
)
{
MOZ_DIAGNOSTIC_ASSERT
(
mWorkerRef
=
=
aWorkerRef
)
;
return
;
}
mWorkerRef
=
aWorkerRef
;
if
(
mWorkerRef
)
{
mWorkerRef
-
>
AddActor
(
this
)
;
}
}
void
ActorChild
:
:
RemoveWorkerRef
(
)
{
MOZ_ASSERT_IF
(
!
NS_IsMainThread
(
)
mWorkerRef
)
;
if
(
mWorkerRef
)
{
mWorkerRef
-
>
RemoveActor
(
this
)
;
mWorkerRef
=
nullptr
;
}
}
CacheWorkerRef
*
ActorChild
:
:
GetWorkerRef
(
)
const
{
return
mWorkerRef
;
}
bool
ActorChild
:
:
WorkerRefNotified
(
)
const
{
return
mWorkerRef
&
&
mWorkerRef
-
>
Notified
(
)
;
}
ActorChild
:
:
ActorChild
(
)
{
}
ActorChild
:
:
~
ActorChild
(
)
{
MOZ_DIAGNOSTIC_ASSERT
(
!
mWorkerRef
)
;
}
}
}
}
