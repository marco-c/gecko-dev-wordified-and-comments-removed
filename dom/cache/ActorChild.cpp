#
include
"
mozilla
/
dom
/
cache
/
ActorChild
.
h
"
#
include
"
mozilla
/
dom
/
cache
/
CacheWorkerHolder
.
h
"
#
include
"
nsThreadUtils
.
h
"
namespace
mozilla
{
namespace
dom
{
namespace
cache
{
void
ActorChild
:
:
SetWorkerHolder
(
CacheWorkerHolder
*
aWorkerHolder
)
{
if
(
mWorkerHolder
)
{
MOZ_DIAGNOSTIC_ASSERT
(
mWorkerHolder
=
=
aWorkerHolder
)
;
return
;
}
mWorkerHolder
=
aWorkerHolder
;
if
(
mWorkerHolder
)
{
mWorkerHolder
-
>
AddActor
(
this
)
;
}
}
void
ActorChild
:
:
RemoveWorkerHolder
(
)
{
MOZ_ASSERT_IF
(
!
NS_IsMainThread
(
)
mWorkerHolder
)
;
if
(
mWorkerHolder
)
{
mWorkerHolder
-
>
RemoveActor
(
this
)
;
mWorkerHolder
=
nullptr
;
}
}
CacheWorkerHolder
*
ActorChild
:
:
GetWorkerHolder
(
)
const
{
return
mWorkerHolder
;
}
bool
ActorChild
:
:
WorkerHolderNotified
(
)
const
{
return
mWorkerHolder
&
&
mWorkerHolder
-
>
Notified
(
)
;
}
ActorChild
:
:
ActorChild
(
)
{
}
ActorChild
:
:
~
ActorChild
(
)
{
MOZ_DIAGNOSTIC_ASSERT
(
!
mWorkerHolder
)
;
}
}
}
}
