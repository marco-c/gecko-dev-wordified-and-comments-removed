#
ifndef
mozilla_dom_JSValidatorChild
#
define
mozilla_dom_JSValidatorChild
#
include
"
mozilla
/
ProcInfo
.
h
"
#
include
"
mozilla
/
dom
/
PJSValidatorChild
.
h
"
#
include
"
mozilla
/
dom
/
JSValidatorUtils
.
h
"
#
include
"
mozilla
/
net
/
OpaqueResponseUtils
.
h
"
namespace
mozilla
:
:
dom
{
class
JSValidatorChild
final
:
public
PJSValidatorChild
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
JSValidatorChild
override
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvIsOpaqueResponseAllowed
(
IsOpaqueResponseAllowedResolver
&
&
aResolver
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnDataAvailable
(
Shmem
&
&
aData
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvOnStopRequest
(
const
nsresult
&
aReason
)
;
void
ActorDestroy
(
ActorDestroyReason
aReason
)
override
;
private
:
virtual
~
JSValidatorChild
(
)
=
default
;
using
ValidatorResult
=
net
:
:
OpaqueResponseBlocker
:
:
ValidatorResult
;
void
Resolve
(
ValidatorResult
aResult
)
;
ValidatorResult
ShouldAllowJS
(
)
const
;
nsCString
mSourceBytes
;
Maybe
<
IsOpaqueResponseAllowedResolver
>
mResolver
;
}
;
}
#
endif
