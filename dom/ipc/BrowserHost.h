#
ifndef
mozilla_dom_BrowserHost_h
#
define
mozilla_dom_BrowserHost_h
#
include
"
mozilla
/
dom
/
BrowserParent
.
h
"
#
include
"
mozilla
/
dom
/
RemoteBrowser
.
h
"
#
include
"
nsIRemoteTab
.
h
"
class
nsPIDOMWindowOuter
;
namespace
mozilla
{
namespace
a11y
{
class
DocAccessibleParent
;
}
namespace
dom
{
class
Element
;
class
BrowserHost
:
public
RemoteBrowser
public
nsIRemoteTab
public
nsSupportsWeakReference
{
public
:
typedef
mozilla
:
:
layers
:
:
LayersId
LayersId
;
explicit
BrowserHost
(
BrowserParent
*
aParent
)
;
static
BrowserHost
*
GetFrom
(
nsIRemoteTab
*
aRemoteTab
)
;
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_NSIREMOTETAB
NS_DECL_CYCLE_COLLECTION_CLASS_AMBIGUOUS
(
BrowserHost
RemoteBrowser
)
BrowserParent
*
GetActor
(
)
{
return
mRoot
;
}
ContentParent
*
GetContentParent
(
)
const
{
return
mRoot
?
mRoot
-
>
Manager
(
)
:
nullptr
;
}
BrowserHost
*
AsBrowserHost
(
)
override
{
return
this
;
}
BrowserBridgeHost
*
AsBrowserBridgeHost
(
)
override
{
return
nullptr
;
}
TabId
GetTabId
(
)
const
override
;
LayersId
GetLayersId
(
)
const
override
;
BrowsingContext
*
GetBrowsingContext
(
)
const
override
;
nsILoadContext
*
GetLoadContext
(
)
const
override
;
bool
CanRecv
(
)
const
override
;
Element
*
GetOwnerElement
(
)
const
{
return
mRoot
-
>
GetOwnerElement
(
)
;
}
already_AddRefed
<
nsPIDOMWindowOuter
>
GetParentWindowOuter
(
)
const
{
return
mRoot
-
>
GetParentWindowOuter
(
)
;
}
a11y
:
:
DocAccessibleParent
*
GetTopLevelDocAccessible
(
)
const
;
template
<
typename
Callback
>
void
VisitAll
(
Callback
aCallback
)
{
if
(
!
mRoot
)
{
return
;
}
mRoot
-
>
VisitAll
(
aCallback
)
;
}
void
LoadURL
(
nsDocShellLoadState
*
aLoadState
)
override
;
void
ResumeLoad
(
uint64_t
aPendingSwitchId
)
override
;
void
DestroyStart
(
)
override
;
void
DestroyComplete
(
)
override
;
bool
Show
(
const
OwnerShowInfo
&
)
override
;
void
UpdateDimensions
(
const
LayoutDeviceIntRect
&
aRect
const
LayoutDeviceIntSize
&
aSize
)
override
;
void
UpdateEffects
(
EffectsInfo
aInfo
)
override
;
private
:
virtual
~
BrowserHost
(
)
=
default
;
TabId
mId
;
RefPtr
<
BrowserParent
>
mRoot
;
EffectsInfo
mEffectsInfo
;
}
;
}
}
#
endif
