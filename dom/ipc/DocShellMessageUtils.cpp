#
include
"
mozilla
/
dom
/
DocShellMessageUtils
.
h
"
#
include
"
nsSerializationHelper
.
h
"
namespace
mozilla
{
namespace
ipc
{
void
IPDLParamTraits
<
nsDocShellLoadState
*
>
:
:
Write
(
IPC
:
:
Message
*
aMsg
IProtocol
*
aActor
nsDocShellLoadState
*
aParam
)
{
MOZ_RELEASE_ASSERT
(
aParam
)
;
WriteIPDLParam
(
aMsg
aActor
aParam
-
>
Serialize
(
)
)
;
}
bool
IPDLParamTraits
<
nsDocShellLoadState
*
>
:
:
Read
(
const
IPC
:
:
Message
*
aMsg
PickleIterator
*
aIter
IProtocol
*
aActor
RefPtr
<
nsDocShellLoadState
>
*
aResult
)
{
DocShellLoadStateInit
loadState
;
if
(
!
ReadIPDLParam
(
aMsg
aIter
aActor
&
loadState
)
)
{
return
false
;
}
MOZ_ASSERT
(
loadState
.
URI
(
)
)
;
*
aResult
=
new
nsDocShellLoadState
(
loadState
)
;
return
true
;
}
}
}
