#
include
"
mozilla
/
dom
/
DocShellMessageUtils
.
h
"
#
include
"
mozilla
/
dom
/
DOMTypes
.
h
"
#
include
"
mozilla
/
ipc
/
IPDLParamTraits
.
h
"
#
include
"
nsSerializationHelper
.
h
"
namespace
mozilla
:
:
ipc
{
void
IPDLParamTraits
<
nsDocShellLoadState
*
>
:
:
Write
(
IPC
:
:
MessageWriter
*
aWriter
IProtocol
*
aActor
nsDocShellLoadState
*
aParam
)
{
MOZ_RELEASE_ASSERT
(
aParam
)
;
WriteIPDLParam
(
aWriter
aActor
aParam
-
>
Serialize
(
)
)
;
}
bool
IPDLParamTraits
<
nsDocShellLoadState
*
>
:
:
Read
(
IPC
:
:
MessageReader
*
aReader
IProtocol
*
aActor
RefPtr
<
nsDocShellLoadState
>
*
aResult
)
{
dom
:
:
DocShellLoadStateInit
loadState
;
if
(
!
ReadIPDLParam
(
aReader
aActor
&
loadState
)
)
{
return
false
;
}
MOZ_ASSERT
(
loadState
.
URI
(
)
)
;
*
aResult
=
new
nsDocShellLoadState
(
loadState
)
;
return
true
;
}
}
