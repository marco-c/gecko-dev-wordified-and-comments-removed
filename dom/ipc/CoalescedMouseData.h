#
ifndef
mozilla_dom_CoalescedMouseData_h
#
define
mozilla_dom_CoalescedMouseData_h
#
include
"
CoalescedInputData
.
h
"
#
include
"
mozilla
/
MouseEvents
.
h
"
#
include
"
nsRefreshDriver
.
h
"
namespace
mozilla
{
namespace
dom
{
class
CoalescedMouseData
final
:
public
CoalescedInputData
<
WidgetMouseEvent
>
{
public
:
CoalescedMouseData
(
)
{
MOZ_COUNT_CTOR
(
mozilla
:
:
dom
:
:
CoalescedMouseData
)
;
}
~
CoalescedMouseData
(
)
{
MOZ_COUNT_DTOR
(
mozilla
:
:
dom
:
:
CoalescedMouseData
)
;
}
void
Coalesce
(
const
WidgetMouseEvent
&
aEvent
const
ScrollableLayerGuid
&
aGuid
const
uint64_t
&
aInputBlockId
)
;
bool
CanCoalesce
(
const
WidgetMouseEvent
&
aEvent
const
ScrollableLayerGuid
&
aGuid
const
uint64_t
&
aInputBlockId
)
;
}
;
class
CoalescedMouseMoveFlusher
final
:
public
nsARefreshObserver
{
public
:
explicit
CoalescedMouseMoveFlusher
(
TabChild
*
aTabChild
)
:
mTabChild
(
aTabChild
)
{
MOZ_ASSERT
(
mTabChild
)
;
}
virtual
void
WillRefresh
(
mozilla
:
:
TimeStamp
aTime
)
override
;
NS_INLINE_DECL_REFCOUNTING
(
CoalescedMouseMoveFlusher
override
)
void
StartObserver
(
)
;
void
RemoveObserver
(
)
;
private
:
~
CoalescedMouseMoveFlusher
(
)
{
RemoveObserver
(
)
;
}
nsRefreshDriver
*
GetRefreshDriver
(
)
;
TabChild
*
mTabChild
;
RefPtr
<
nsRefreshDriver
>
mRefreshDriver
;
}
;
}
}
#
endif
