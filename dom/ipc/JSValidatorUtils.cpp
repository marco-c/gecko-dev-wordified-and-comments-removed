#
include
"
mozilla
/
dom
/
JSValidatorUtils
.
h
"
#
include
"
mozilla
/
ipc
/
ProtocolUtils
.
h
"
#
include
"
mozilla
/
ipc
/
Shmem
.
h
"
#
include
"
nsStringFwd
.
h
"
using
namespace
mozilla
:
:
ipc
;
namespace
mozilla
:
:
dom
{
nsresult
JSValidatorUtils
:
:
CopyCStringToShmem
(
IProtocol
*
aActor
const
nsCString
&
aCString
Shmem
&
aMem
)
{
if
(
!
aActor
-
>
AllocShmem
(
aCString
.
Length
(
)
&
aMem
)
)
{
return
NS_ERROR_FAILURE
;
}
memcpy
(
aMem
.
get
<
char
>
(
)
aCString
.
BeginReading
(
)
aCString
.
Length
(
)
)
;
return
NS_OK
;
}
}
