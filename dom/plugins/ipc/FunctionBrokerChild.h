#
ifndef
mozilla_plugins_functionbrokerchild_h
#
define
mozilla_plugins_functionbrokerchild_h
#
include
"
mozilla
/
plugins
/
PFunctionBrokerChild
.
h
"
namespace
mozilla
{
namespace
plugins
{
class
FunctionBrokerThread
;
class
FunctionBrokerChild
:
public
PFunctionBrokerChild
{
public
:
static
bool
Initialize
(
Endpoint
<
PFunctionBrokerChild
>
&
&
aBrokerEndpoint
)
;
static
FunctionBrokerChild
*
GetInstance
(
)
;
static
void
Destroy
(
)
;
bool
IsDispatchThread
(
)
;
void
PostToDispatchThread
(
already_AddRefed
<
nsIRunnable
>
&
&
runnable
)
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
private
:
explicit
FunctionBrokerChild
(
FunctionBrokerThread
*
aThread
Endpoint
<
PFunctionBrokerChild
>
&
&
aEndpoint
)
;
void
ShutdownOnDispatchThread
(
)
;
void
Bind
(
Endpoint
<
PFunctionBrokerChild
>
&
&
aEndpoint
)
;
UniquePtr
<
FunctionBrokerThread
>
mThread
;
bool
mShutdownDone
;
Monitor
mMonitor
;
static
FunctionBrokerChild
*
sInstance
;
}
;
}
}
#
endif
