#
ifndef
mozilla_dom_XULPersist_h
#
define
mozilla_dom_XULPersist_h
#
include
"
nsStubDocumentObserver
.
h
"
#
ifndef
MOZ_NEW_XULSTORE
#
include
"
nsCOMPtr
.
h
"
class
nsIXULStore
;
#
endif
template
<
typename
T
>
class
nsCOMArray
;
namespace
mozilla
:
:
dom
{
class
XULPersist
final
:
public
nsStubDocumentObserver
{
public
:
NS_DECL_ISUPPORTS
explicit
XULPersist
(
Document
*
aDocument
)
;
void
Init
(
)
;
void
DropDocumentReference
(
)
;
NS_DECL_NSIMUTATIONOBSERVER_ATTRIBUTECHANGED
protected
:
void
Persist
(
mozilla
:
:
dom
:
:
Element
*
aElement
nsAtom
*
aAttribute
)
;
private
:
~
XULPersist
(
)
;
nsresult
ApplyPersistentAttributes
(
)
;
nsresult
ApplyPersistentAttributesToElements
(
const
nsAString
&
aID
const
nsAString
&
aDocURI
nsCOMArray
<
Element
>
&
aElements
)
;
#
ifndef
MOZ_NEW_XULSTORE
nsCOMPtr
<
nsIXULStore
>
mLocalStore
;
#
endif
Document
*
MOZ_NON_OWNING_REF
mDocument
;
}
;
}
#
endif
