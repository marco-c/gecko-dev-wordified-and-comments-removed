#
ifndef
DOM_COMPRESSION_FORMATZSTD_H_
#
define
DOM_COMPRESSION_FORMATZSTD_H_
#
include
"
BaseAlgorithms
.
h
"
struct
ZSTD_DCtx_s
;
namespace
mozilla
:
:
dom
:
:
compression
{
class
ZstdDecompressionStreamAlgorithms
:
public
DecompressionStreamAlgorithms
{
public
:
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
ZstdDecompressionStreamAlgorithms
DecompressionStreamAlgorithms
)
static
Result
<
already_AddRefed
<
ZstdDecompressionStreamAlgorithms
>
nsresult
>
Create
(
)
;
private
:
ZstdDecompressionStreamAlgorithms
(
)
=
default
;
[
[
nodiscard
]
]
nsresult
Init
(
)
;
MOZ_CAN_RUN_SCRIPT
void
DecompressAndEnqueue
(
JSContext
*
aCx
Span
<
const
uint8_t
>
aInput
Flush
aFlush
TransformStreamDefaultController
&
aController
ErrorResult
&
aRv
)
override
;
~
ZstdDecompressionStreamAlgorithms
(
)
override
;
ZSTD_DCtx_s
*
mDStream
=
nullptr
;
bool
mObservedStreamEnd
=
false
;
}
;
}
#
endif
