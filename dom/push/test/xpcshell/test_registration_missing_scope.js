'
use
strict
'
;
const
{
PushDB
PushService
}
=
serviceExports
;
function
run_test
(
)
{
do_get_profile
(
)
;
setPrefs
(
)
;
run_next_test
(
)
;
}
add_task
(
function
*
test_registration_missing_scope
(
)
{
PushService
.
init
(
{
serverURI
:
"
wss
:
/
/
push
.
example
.
org
/
"
networkInfo
:
new
MockDesktopNetworkInfo
(
)
makeWebSocket
(
uri
)
{
return
new
MockWebSocket
(
uri
)
;
}
}
)
;
yield
rejects
(
PushService
.
registration
(
{
scope
:
'
'
originAttributes
:
'
'
}
)
'
Record
missing
page
and
manifest
URLs
'
)
;
}
)
;
