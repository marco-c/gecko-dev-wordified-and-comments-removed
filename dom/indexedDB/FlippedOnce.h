#
ifndef
mozilla_dom_indexeddb_flippedonce_h__
#
define
mozilla_dom_indexeddb_flippedonce_h__
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
namespace
mozilla
{
template
<
bool
Initial
>
class
FlippedOnce
{
public
:
FlippedOnce
(
const
FlippedOnce
&
)
=
delete
;
FlippedOnce
&
operator
=
(
const
FlippedOnce
&
)
=
delete
;
FlippedOnce
(
FlippedOnce
&
&
)
=
default
;
FlippedOnce
&
operator
=
(
FlippedOnce
&
&
)
=
default
;
constexpr
FlippedOnce
(
)
=
default
;
MOZ_IMPLICIT
constexpr
operator
bool
(
)
const
{
return
mValue
;
}
;
constexpr
void
Flip
(
)
{
MOZ_ASSERT
(
mValue
=
=
Initial
)
;
EnsureFlipped
(
)
;
}
constexpr
void
EnsureFlipped
(
)
{
mValue
=
!
Initial
;
}
private
:
bool
mValue
=
Initial
;
}
;
}
#
endif
