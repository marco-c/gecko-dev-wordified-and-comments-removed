async
function
testSteps
(
)
{
const
name
=
"
URLSearchParams
"
;
const
options
=
{
foo
:
"
bar
"
baz
:
"
bar
"
}
;
const
params
=
new
URLSearchParams
(
options
)
;
const
value
=
{
urlSearchParams
:
params
}
;
const
key
=
42
;
info
(
"
Clearing
"
)
;
let
request
=
clearAllDatabases
(
)
;
await
requestFinished
(
request
)
;
info
(
"
Installing
package
"
)
;
installPackagedProfile
(
"
URLSearchParams_profile
"
)
;
info
(
"
Opening
database
"
)
;
request
=
indexedDB
.
open
(
name
)
;
await
requestSucceeded
(
request
)
;
const
database
=
request
.
result
;
info
(
"
Getting
value
"
)
;
request
=
database
.
transaction
(
[
name
]
)
.
objectStore
(
name
)
.
get
(
key
)
;
await
requestSucceeded
(
request
)
;
info
(
"
Verifying
value
"
)
;
Assert
.
deepEqual
(
request
.
result
value
"
Value
is
correctly
structured
"
)
;
ok
(
request
.
result
.
urlSearchParams
instanceof
URLSearchParams
"
Value
urlSearchParams
property
is
an
instance
of
URLSearchParams
"
)
;
info
(
"
Closing
database
"
)
;
database
.
close
(
)
;
}
