#
ifndef
dom_indexeddb_dbschema_h__
#
define
dom_indexeddb_dbschema_h__
#
include
<
cstdint
>
#
include
"
ErrorList
.
h
"
class
mozIStorageConnection
;
namespace
mozilla
:
:
dom
:
:
indexedDB
{
const
uint32_t
kMajorSchemaVersion
=
26
;
const
uint32_t
kMinorSchemaVersion
=
0
;
static_assert
(
kMajorSchemaVersion
<
=
0xFFFFFFF
"
Major
version
needs
to
fit
in
28
bits
.
"
)
;
static_assert
(
kMinorSchemaVersion
<
=
0xF
"
Minor
version
needs
to
fit
in
4
bits
.
"
)
;
constexpr
int32_t
MakeSchemaVersion
(
uint32_t
aMajorSchemaVersion
uint32_t
aMinorSchemaVersion
)
{
return
int32_t
(
(
aMajorSchemaVersion
<
<
4
)
+
aMinorSchemaVersion
)
;
}
constexpr
int32_t
kSQLiteSchemaVersion
=
MakeSchemaVersion
(
kMajorSchemaVersion
kMinorSchemaVersion
)
;
nsresult
CreateFileTables
(
mozIStorageConnection
&
aConnection
)
;
nsresult
CreateTables
(
mozIStorageConnection
&
aConnection
)
;
}
#
endif
