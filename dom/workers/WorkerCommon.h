#
ifndef
mozilla_dom_workers_WorkerCommon_h
#
define
mozilla_dom_workers_WorkerCommon_h
#
include
"
jsapi
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
Mutex
.
h
"
#
include
"
nsAutoPtr
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
mozilla
/
dom
/
ServiceWorkerDescriptor
.
h
"
class
nsIGlobalObject
;
class
nsPIDOMWindowInner
;
namespace
mozilla
{
namespace
dom
{
enum
WorkerType
{
WorkerTypeDedicated
WorkerTypeShared
WorkerTypeService
}
;
class
WorkerPrivate
;
namespace
workers
{
#
ifdef
DEBUG
void
AssertIsOnMainThread
(
)
;
#
else
inline
void
AssertIsOnMainThread
(
)
{
}
#
endif
WorkerPrivate
*
GetWorkerPrivateFromContext
(
JSContext
*
aCx
)
;
WorkerPrivate
*
GetCurrentThreadWorkerPrivate
(
)
;
bool
IsCurrentThreadRunningChromeWorker
(
)
;
JSContext
*
GetCurrentThreadJSContext
(
)
;
JSObject
*
GetCurrentThreadWorkerGlobal
(
)
;
void
CancelWorkersForWindow
(
nsPIDOMWindowInner
*
aWindow
)
;
void
FreezeWorkersForWindow
(
nsPIDOMWindowInner
*
aWindow
)
;
void
ThawWorkersForWindow
(
nsPIDOMWindowInner
*
aWindow
)
;
void
SuspendWorkersForWindow
(
nsPIDOMWindowInner
*
aWindow
)
;
void
ResumeWorkersForWindow
(
nsPIDOMWindowInner
*
aWindow
)
;
bool
IsWorkerGlobal
(
JSObject
*
global
)
;
bool
IsDebuggerGlobal
(
JSObject
*
global
)
;
bool
IsDebuggerSandbox
(
JSObject
*
object
)
;
}
}
}
#
endif
