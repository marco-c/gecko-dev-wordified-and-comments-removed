#
include
"
RemoteWorkerNonLifeCycleOpControllerParent
.
h
"
#
include
"
mozilla
/
dom
/
RemoteWorkerController
.
h
"
namespace
mozilla
:
:
dom
{
RemoteWorkerNonLifeCycleOpControllerParent
:
:
RemoteWorkerNonLifeCycleOpControllerParent
(
RemoteWorkerController
*
aController
)
:
mController
(
aController
)
{
MOZ_ASSERT
(
mController
)
;
}
RemoteWorkerNonLifeCycleOpControllerParent
:
:
~
RemoteWorkerNonLifeCycleOpControllerParent
(
)
=
default
;
void
RemoteWorkerNonLifeCycleOpControllerParent
:
:
Shutdown
(
)
{
if
(
CanSend
(
)
)
{
Unused
<
<
SendShutdown
(
)
;
}
if
(
mController
)
{
mController
=
nullptr
;
}
if
(
GetIPCChannel
(
)
)
{
GetIPCChannel
(
)
-
>
Close
(
)
;
}
}
IPCResult
RemoteWorkerNonLifeCycleOpControllerParent
:
:
RecvTerminated
(
)
{
if
(
mController
)
{
mController
-
>
mNonLifeCycleOpController
=
nullptr
;
mController
=
nullptr
;
}
if
(
GetIPCChannel
(
)
)
{
GetIPCChannel
(
)
-
>
Close
(
)
;
}
return
IPC_OK
(
)
;
}
IPCResult
RemoteWorkerNonLifeCycleOpControllerParent
:
:
RecvError
(
const
ErrorValue
&
aError
)
{
MOZ_ASSERT
(
mController
)
;
mController
-
>
ErrorPropagation
(
aError
)
;
return
IPC_OK
(
)
;
}
}
