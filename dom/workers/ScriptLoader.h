#
ifndef
mozilla_dom_workers_scriptloader_h__
#
define
mozilla_dom_workers_scriptloader_h__
#
include
"
mozilla
/
dom
/
WorkerCommon
.
h
"
#
include
"
nsIContentPolicy
.
h
"
#
include
"
nsStringFwd
.
h
"
class
nsIChannel
;
class
nsICookieJarSettings
;
class
nsILoadGroup
;
class
nsIPrincipal
;
class
nsIReferrerInfo
;
class
nsIURI
;
namespace
mozilla
{
class
ErrorResult
;
namespace
dom
{
class
ClientInfo
;
class
Document
;
struct
WorkerLoadInfo
;
class
WorkerPrivate
;
class
SerializedStackHolder
;
enum
WorkerScriptType
{
WorkerScript
DebuggerScript
}
;
namespace
workerinternals
{
nsresult
ChannelFromScriptURLMainThread
(
nsIPrincipal
*
aPrincipal
Document
*
aParentDoc
nsILoadGroup
*
aLoadGroup
nsIURI
*
aScriptURL
const
Maybe
<
ClientInfo
>
&
aClientInfo
nsContentPolicyType
aContentPolicyType
nsICookieJarSettings
*
aCookieJarSettings
nsIReferrerInfo
*
aReferrerInfo
nsIChannel
*
*
aChannel
)
;
nsresult
ChannelFromScriptURLWorkerThread
(
JSContext
*
aCx
WorkerPrivate
*
aParent
const
nsAString
&
aScriptURL
WorkerLoadInfo
&
aLoadInfo
)
;
void
ReportLoadError
(
ErrorResult
&
aRv
nsresult
aLoadResult
const
nsAString
&
aScriptURL
)
;
void
LoadMainScript
(
WorkerPrivate
*
aWorkerPrivate
UniquePtr
<
SerializedStackHolder
>
aOriginStack
const
nsAString
&
aScriptURL
WorkerScriptType
aWorkerScriptType
ErrorResult
&
aRv
)
;
void
Load
(
WorkerPrivate
*
aWorkerPrivate
UniquePtr
<
SerializedStackHolder
>
aOriginStack
const
nsTArray
<
nsString
>
&
aScriptURLs
WorkerScriptType
aWorkerScriptType
ErrorResult
&
aRv
)
;
}
}
}
#
endif
