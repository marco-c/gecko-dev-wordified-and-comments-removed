#
include
"
Principal
.
h
"
#
include
"
jsapi
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
dom
/
StructuredCloneTags
.
h
"
#
include
"
mozilla
/
dom
/
workerinternals
/
JSSettings
.
h
"
namespace
mozilla
{
namespace
dom
{
WorkerPrincipal
:
:
WorkerPrincipal
(
bool
aIsSystemOrAddonPrincipal
)
:
JSPrincipals
(
)
mIsSystemOrAddonPrincipal
(
aIsSystemOrAddonPrincipal
)
{
setDebugToken
(
workerinternals
:
:
kJSPrincipalsDebugToken
)
;
}
WorkerPrincipal
:
:
~
WorkerPrincipal
(
)
=
default
;
bool
WorkerPrincipal
:
:
write
(
JSContext
*
aCx
JSStructuredCloneWriter
*
aWriter
)
{
return
JS_WriteUint32Pair
(
aWriter
SCTAG_DOM_WORKER_PRINCIPAL
0
)
;
}
bool
WorkerPrincipal
:
:
isSystemOrAddonPrincipal
(
)
{
return
mIsSystemOrAddonPrincipal
;
}
void
WorkerPrincipal
:
:
Destroy
(
JSPrincipals
*
aPrincipals
)
{
delete
static_cast
<
WorkerPrincipal
*
>
(
aPrincipals
)
;
}
}
}
