function
workerTestExec
(
script
)
{
SimpleTest
.
waitForExplicitFinish
(
)
;
var
worker
=
new
Worker
(
"
worker_wrapper
.
js
"
)
;
worker
.
onmessage
=
function
(
event
)
{
if
(
event
.
data
.
type
=
=
"
finish
"
)
{
SimpleTest
.
finish
(
)
;
}
else
if
(
event
.
data
.
type
=
=
"
status
"
)
{
ok
(
event
.
data
.
status
event
.
data
.
msg
)
;
}
else
if
(
event
.
data
.
type
=
=
"
getHelperData
"
)
{
worker
.
postMessage
(
{
type
:
"
returnHelperData
"
result
:
getHelperData
(
)
}
)
;
}
}
;
worker
.
onerror
=
function
(
event
)
{
ok
(
false
"
Worker
had
an
error
:
"
+
event
.
data
)
;
SimpleTest
.
finish
(
)
;
}
;
worker
.
postMessage
(
{
script
}
)
;
}
