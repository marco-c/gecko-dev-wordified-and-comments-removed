#
ifndef
mozilla_dom_workers_ServiceWorkerScriptCache_h
#
define
mozilla_dom_workers_ServiceWorkerScriptCache_h
#
include
"
nsString
.
h
"
class
nsILoadGroup
;
class
nsIPrincipal
;
namespace
mozilla
{
namespace
dom
{
namespace
workers
{
class
ServiceWorkerRegistrationInfo
;
namespace
serviceWorkerScriptCache
{
nsresult
PurgeCache
(
nsIPrincipal
*
aPrincipal
const
nsAString
&
aCacheName
)
;
nsresult
GenerateCacheName
(
nsAString
&
aName
)
;
class
CompareCallback
{
public
:
virtual
void
ComparisonResult
(
nsresult
aStatus
bool
aInCacheAndEqual
const
nsAString
&
aNewCacheName
const
nsACString
&
aMaxScope
nsLoadFlags
aLoadFlags
)
=
0
;
NS_INLINE_DECL_PURE_VIRTUAL_REFCOUNTING
}
;
void
Compare
(
ServiceWorkerRegistrationInfo
*
aRegistration
nsIPrincipal
*
aPrincipal
const
nsAString
&
aCacheName
const
nsAString
&
aURL
CompareCallback
*
aCallback
nsILoadGroup
*
aLoadGroup
)
;
}
}
}
}
#
endif
