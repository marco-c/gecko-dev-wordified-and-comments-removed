#
ifndef
DOM_WEBTRANSPORT_API_WEBTRANSPORTSTREAMS__H_
#
define
DOM_WEBTRANSPORT_API_WEBTRANSPORTSTREAMS__H_
#
include
"
mozilla
/
dom
/
UnderlyingSourceCallbackHelpers
.
h
"
namespace
mozilla
:
:
dom
{
class
WebTransport
;
class
WebTransportIncomingStreamsAlgorithms
:
public
UnderlyingSourceAlgorithmsWrapper
{
public
:
WebTransportIncomingStreamsAlgorithms
(
Promise
*
aIncomingStreamPromise
bool
aUnidirectional
WebTransport
*
aStream
)
:
mIncomingStreamPromise
(
aIncomingStreamPromise
)
mUnidirectional
(
aUnidirectional
)
mStream
(
aStream
)
{
}
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
WebTransportIncomingStreamsAlgorithms
UnderlyingSourceAlgorithmsWrapper
)
already_AddRefed
<
Promise
>
PullCallbackImpl
(
JSContext
*
aCx
ReadableStreamController
&
aController
ErrorResult
&
aRv
)
override
;
already_AddRefed
<
Promise
>
CancelCallbackImpl
(
JSContext
*
aCx
const
Optional
<
JS
:
:
Handle
<
JS
:
:
Value
>
>
&
aReason
ErrorResult
&
aRv
)
override
;
protected
:
~
WebTransportIncomingStreamsAlgorithms
(
)
override
;
private
:
RefPtr
<
Promise
>
mIncomingStreamPromise
;
const
bool
mUnidirectional
;
RefPtr
<
WebTransport
>
mStream
;
}
;
}
#
endif
