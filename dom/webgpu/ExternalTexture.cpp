#
include
"
ExternalTexture
.
h
"
#
ifdef
XP_WIN
#
include
"
mozilla
/
webgpu
/
ExternalTextureD3D11
.
h
"
#
endif
namespace
mozilla
:
:
webgpu
{
UniquePtr
<
ExternalTexture
>
ExternalTexture
:
:
Create
(
const
uint32_t
aWidth
const
uint32_t
aHeight
const
struct
ffi
:
:
WGPUTextureFormat
aFormat
const
ffi
:
:
WGPUTextureUsages
aUsage
)
{
UniquePtr
<
ExternalTexture
>
texture
;
#
ifdef
XP_WIN
texture
=
ExternalTextureD3D11
:
:
Create
(
aWidth
aHeight
aFormat
aUsage
)
;
#
endif
return
texture
;
}
ExternalTexture
:
:
ExternalTexture
(
const
uint32_t
aWidth
const
uint32_t
aHeight
const
struct
ffi
:
:
WGPUTextureFormat
aFormat
const
ffi
:
:
WGPUTextureUsages
aUsage
)
:
mWidth
(
aWidth
)
mHeight
(
aHeight
)
mFormat
(
aFormat
)
mUsage
(
aUsage
)
{
}
ExternalTexture
:
:
~
ExternalTexture
(
)
{
}
void
ExternalTexture
:
:
SetSubmissionIndex
(
uint64_t
aSubmissionIndex
)
{
MOZ_ASSERT
(
aSubmissionIndex
!
=
0
)
;
mSubmissionIndex
=
aSubmissionIndex
;
}
}
