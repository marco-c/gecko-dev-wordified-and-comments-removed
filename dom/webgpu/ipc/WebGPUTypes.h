#
ifndef
WEBGPU_TYPES_H_
#
define
WEBGPU_TYPES_H_
#
include
<
cstdint
>
#
include
"
nsTArray
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
webgpu
/
ffi
/
wgpu
.
h
"
namespace
mozilla
{
namespace
webgpu
{
typedef
uint64_t
RawId
;
typedef
uint64_t
BufferAddress
;
struct
SerialBindGroupLayoutDescriptor
{
nsTArray
<
ffi
:
:
WGPUBindGroupLayoutBinding
>
mBindings
;
}
;
struct
SerialPipelineLayoutDescriptor
{
nsTArray
<
RawId
>
mBindGroupLayouts
;
}
;
enum
class
SerialBindGroupBindingType
:
uint8_t
{
Buffer
Texture
Sampler
EndGuard_
}
;
struct
SerialBindGroupBinding
{
uint32_t
mBinding
;
SerialBindGroupBindingType
mType
;
RawId
mValue
;
BufferAddress
mBufferOffset
;
BufferAddress
mBufferSize
;
}
;
struct
SerialBindGroupDescriptor
{
RawId
mLayout
;
nsTArray
<
SerialBindGroupBinding
>
mBindings
;
}
;
struct
SerialProgrammableStageDescriptor
{
RawId
mModule
;
nsString
mEntryPoint
;
}
;
struct
SerialComputePipelineDescriptor
{
RawId
mLayout
;
SerialProgrammableStageDescriptor
mComputeStage
;
}
;
struct
SerialVertexBufferDescriptor
{
ffi
:
:
WGPUBufferAddress
mStride
;
ffi
:
:
WGPUInputStepMode
mStepMode
;
nsTArray
<
ffi
:
:
WGPUVertexAttributeDescriptor
>
mAttributes
;
}
;
struct
SerialVertexInputDescriptor
{
ffi
:
:
WGPUIndexFormat
mIndexFormat
;
nsTArray
<
SerialVertexBufferDescriptor
>
mVertexBuffers
;
}
;
struct
SerialRenderPipelineDescriptor
{
RawId
mLayout
;
SerialProgrammableStageDescriptor
mVertexStage
;
SerialProgrammableStageDescriptor
mFragmentStage
;
ffi
:
:
WGPUPrimitiveTopology
mPrimitiveTopology
;
Maybe
<
ffi
:
:
WGPURasterizationStateDescriptor
>
mRasterizationState
;
nsTArray
<
ffi
:
:
WGPUColorStateDescriptor
>
mColorStates
;
Maybe
<
ffi
:
:
WGPUDepthStencilStateDescriptor
>
mDepthStencilState
;
SerialVertexInputDescriptor
mVertexInput
;
uint32_t
mSampleCount
;
uint32_t
mSampleMask
;
bool
mAlphaToCoverageEnabled
;
}
;
}
}
#
endif
