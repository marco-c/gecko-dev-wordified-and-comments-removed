import
{
memcpy
TypedArrayBufferView
}
from
'
.
.
/
.
.
/
common
/
util
/
util
.
js
'
;
import
{
align
}
from
'
.
/
math
.
js
'
;
export
function
makeBufferWithContents
(
device
:
GPUDevice
dataArray
:
TypedArrayBufferView
usage
:
GPUBufferUsageFlags
)
:
GPUBuffer
{
const
buffer
=
device
.
createBuffer
(
{
mappedAtCreation
:
true
size
:
align
(
dataArray
.
byteLength
4
)
usage
}
)
;
memcpy
(
{
src
:
dataArray
}
{
dst
:
buffer
.
getMappedRange
(
)
}
)
;
buffer
.
unmap
(
)
;
return
buffer
;
}
