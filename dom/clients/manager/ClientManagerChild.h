#
ifndef
_mozilla_dom_ClientManagerChild_h
#
define
_mozilla_dom_ClientManagerChild_h
#
include
"
ClientThing
.
h
"
#
include
"
mozilla
/
dom
/
PClientManagerChild
.
h
"
#
include
"
mozilla
/
dom
/
WorkerHolderToken
.
h
"
namespace
mozilla
{
namespace
dom
{
namespace
workers
{
class
WorkerPrivate
;
}
class
ClientManagerChild
final
:
public
PClientManagerChild
public
WorkerHolderToken
:
:
Listener
{
ClientThing
<
ClientManagerChild
>
*
mManager
;
RefPtr
<
WorkerHolderToken
>
mWorkerHolderToken
;
bool
mTeardownStarted
;
void
ActorDestroy
(
ActorDestroyReason
aReason
)
override
;
PClientHandleChild
*
AllocPClientHandleChild
(
const
IPCClientInfo
&
aClientInfo
)
override
;
bool
DeallocPClientHandleChild
(
PClientHandleChild
*
aActor
)
override
;
PClientManagerOpChild
*
AllocPClientManagerOpChild
(
const
ClientOpConstructorArgs
&
aArgs
)
override
;
bool
DeallocPClientManagerOpChild
(
PClientManagerOpChild
*
aActor
)
override
;
PClientNavigateOpChild
*
AllocPClientNavigateOpChild
(
const
ClientNavigateOpConstructorArgs
&
aArgs
)
override
;
bool
DeallocPClientNavigateOpChild
(
PClientNavigateOpChild
*
aActor
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvPClientNavigateOpConstructor
(
PClientNavigateOpChild
*
aActor
const
ClientNavigateOpConstructorArgs
&
aArgs
)
override
;
PClientSourceChild
*
AllocPClientSourceChild
(
const
ClientSourceConstructorArgs
&
aArgs
)
override
;
bool
DeallocPClientSourceChild
(
PClientSourceChild
*
aActor
)
override
;
void
WorkerShuttingDown
(
)
override
;
public
:
explicit
ClientManagerChild
(
WorkerHolderToken
*
aWorkerHolderToken
)
;
void
SetOwner
(
ClientThing
<
ClientManagerChild
>
*
aThing
)
;
void
RevokeOwner
(
ClientThing
<
ClientManagerChild
>
*
aThing
)
;
void
MaybeStartTeardown
(
)
;
mozilla
:
:
dom
:
:
workers
:
:
WorkerPrivate
*
GetWorkerPrivate
(
)
const
;
}
;
}
}
#
endif
