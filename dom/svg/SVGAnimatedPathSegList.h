#
ifndef
DOM_SVG_SVGANIMATEDPATHSEGLIST_H_
#
define
DOM_SVG_SVGANIMATEDPATHSEGLIST_H_
#
include
"
SVGPathData
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
MemoryReporting
.
h
"
#
include
"
mozilla
/
SMILAttr
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
namespace
mozilla
{
class
SMILValue
;
namespace
dom
{
class
SVGAnimationElement
;
class
SVGElement
;
class
SVGPathSegment
;
struct
SVGPathSegmentInit
;
}
class
SVGAnimatedPathSegList
final
{
public
:
SVGAnimatedPathSegList
(
)
=
default
;
SVGAnimatedPathSegList
&
operator
=
(
const
SVGAnimatedPathSegList
&
aOther
)
{
mBaseVal
=
aOther
.
mBaseVal
;
if
(
aOther
.
mAnimVal
)
{
mAnimVal
=
MakeUnique
<
SVGPathData
>
(
*
aOther
.
mAnimVal
)
;
}
return
*
this
;
}
const
SVGPathData
&
GetBaseValue
(
)
const
{
return
mBaseVal
;
}
nsresult
SetBaseValueString
(
const
nsAString
&
aValue
)
;
void
SetBaseValueFromPathSegments
(
const
dom
:
:
Sequence
<
dom
:
:
SVGPathSegmentInit
>
&
aValues
)
;
void
ClearBaseValue
(
)
;
const
SVGPathData
&
GetAnimValue
(
)
const
{
return
mAnimVal
?
*
mAnimVal
:
mBaseVal
;
}
nsresult
SetAnimValue
(
const
SVGPathData
&
aNewAnimValue
dom
:
:
SVGElement
*
aElement
)
;
void
ClearAnimValue
(
dom
:
:
SVGElement
*
aElement
)
;
bool
IsRendered
(
)
const
;
void
*
GetBaseValKey
(
)
const
{
return
(
void
*
)
&
mBaseVal
;
}
void
*
GetAnimValKey
(
)
const
{
return
(
void
*
)
&
mAnimVal
;
}
bool
IsAnimating
(
)
const
{
return
!
!
mAnimVal
;
}
UniquePtr
<
SMILAttr
>
ToSMILAttr
(
dom
:
:
SVGElement
*
aElement
)
;
size_t
SizeOfExcludingThis
(
MallocSizeOf
aMallocSizeOf
)
const
;
private
:
SVGPathData
mBaseVal
;
UniquePtr
<
SVGPathData
>
mAnimVal
;
struct
SMILAnimatedPathSegList
:
public
SMILAttr
{
public
:
SMILAnimatedPathSegList
(
SVGAnimatedPathSegList
*
aVal
dom
:
:
SVGElement
*
aElement
)
:
mVal
(
aVal
)
mElement
(
aElement
)
{
}
SVGAnimatedPathSegList
*
mVal
;
dom
:
:
SVGElement
*
mElement
;
nsresult
ValueFromString
(
const
nsAString
&
aStr
const
dom
:
:
SVGAnimationElement
*
aSrcElement
SMILValue
&
aValue
bool
&
aPreventCachingOfSandwich
)
const
override
;
SMILValue
GetBaseValue
(
)
const
override
;
void
ClearAnimValue
(
)
override
;
nsresult
SetAnimValue
(
const
SMILValue
&
aValue
)
override
;
}
;
}
;
}
#
endif
