#
ifndef
DOM_SVG_SVGTRANSFORMABLEELEMENT_H_
#
define
DOM_SVG_SVGTRANSFORMABLEELEMENT_H_
#
include
"
gfxMatrix
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
dom
/
SVGAnimatedTransformList
.
h
"
#
include
"
mozilla
/
dom
/
SVGElement
.
h
"
#
include
"
mozilla
/
gfx
/
Matrix
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
namespace
mozilla
:
:
dom
{
class
DOMSVGAnimatedTransformList
;
class
SVGGraphicsElement
;
class
SVGMatrix
;
class
SVGRect
;
struct
SVGBoundingBoxOptions
;
class
SVGTransformableElement
:
public
SVGElement
{
public
:
explicit
SVGTransformableElement
(
already_AddRefed
<
dom
:
:
NodeInfo
>
&
&
aNodeInfo
)
:
SVGElement
(
std
:
:
move
(
aNodeInfo
)
)
{
}
virtual
~
SVGTransformableElement
(
)
=
default
;
virtual
nsresult
Clone
(
dom
:
:
NodeInfo
*
nsINode
*
*
aResult
)
const
override
=
0
;
already_AddRefed
<
DOMSVGAnimatedTransformList
>
Transform
(
)
;
SVGElement
*
GetNearestViewportElement
(
)
;
SVGElement
*
GetFarthestViewportElement
(
)
;
MOZ_CAN_RUN_SCRIPT
already_AddRefed
<
SVGRect
>
GetBBox
(
const
SVGBoundingBoxOptions
&
)
;
already_AddRefed
<
SVGMatrix
>
GetCTM
(
)
;
already_AddRefed
<
SVGMatrix
>
GetScreenCTM
(
)
;
already_AddRefed
<
SVGMatrix
>
GetTransformToElement
(
SVGGraphicsElement
&
aElement
ErrorResult
&
rv
)
;
NS_IMETHOD_
(
bool
)
IsAttributeMapped
(
const
nsAtom
*
aAttribute
)
const
override
;
nsChangeHint
GetAttributeChangeHint
(
const
nsAtom
*
aAttribute
int32_t
aModType
)
const
override
;
virtual
bool
IsEventAttributeNameInternal
(
nsAtom
*
aName
)
override
;
virtual
gfxMatrix
PrependLocalTransformsTo
(
const
gfxMatrix
&
aMatrix
SVGTransformTypes
aWhich
=
eAllTransforms
)
const
override
;
virtual
const
gfx
:
:
Matrix
*
GetAnimateMotionTransform
(
)
const
override
;
virtual
void
SetAnimateMotionTransform
(
const
gfx
:
:
Matrix
*
aMatrix
)
override
;
virtual
SVGAnimatedTransformList
*
GetAnimatedTransformList
(
uint32_t
aFlags
=
0
)
override
;
virtual
nsStaticAtom
*
GetTransformListAttrName
(
)
const
override
{
return
nsGkAtoms
:
:
transform
;
}
virtual
bool
IsTransformable
(
)
override
{
return
true
;
}
protected
:
static
gfxMatrix
GetUserToParentTransform
(
const
gfx
:
:
Matrix
*
aAnimateMotionTransform
const
SVGAnimatedTransformList
*
aTransforms
)
;
UniquePtr
<
SVGAnimatedTransformList
>
mTransforms
;
UniquePtr
<
gfx
:
:
Matrix
>
mAnimateMotionTransform
;
}
;
}
#
endif
