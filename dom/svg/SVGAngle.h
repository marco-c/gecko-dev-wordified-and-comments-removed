#
ifndef
__NS_SVGANGLE_H__
#
define
__NS_SVGANGLE_H__
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsError
.
h
"
#
include
"
mozilla
/
SMILAttr
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
dom
/
SVGAngleBinding
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
class
nsISupports
;
namespace
mozilla
{
class
SMILValue
;
namespace
dom
{
class
nsSVGOrientType
;
class
DOMSVGAngle
;
class
SVGAnimatedAngle
;
class
SVGAnimationElement
;
class
SVGElement
;
}
class
SVGAngle
{
friend
class
mozilla
:
:
dom
:
:
DOMSVGAngle
;
friend
class
mozilla
:
:
dom
:
:
SVGAnimatedAngle
;
typedef
mozilla
:
:
dom
:
:
SVGElement
SVGElement
;
public
:
void
Init
(
uint8_t
aAttrEnum
=
0xff
float
aValue
=
0
uint8_t
aUnitType
=
mozilla
:
:
dom
:
:
SVGAngle_Binding
:
:
SVG_ANGLETYPE_UNSPECIFIED
)
{
mAnimVal
=
mBaseVal
=
aValue
;
mAnimValUnit
=
mBaseValUnit
=
aUnitType
;
mAttrEnum
=
aAttrEnum
;
mIsAnimated
=
false
;
}
nsresult
SetBaseValueString
(
const
nsAString
&
aValue
SVGElement
*
aSVGElement
bool
aDoSetAttr
)
;
void
GetBaseValueString
(
nsAString
&
aValue
)
const
;
void
GetAnimValueString
(
nsAString
&
aValue
)
const
;
float
GetBaseValue
(
)
const
{
return
mBaseVal
*
GetDegreesPerUnit
(
mBaseValUnit
)
;
}
float
GetAnimValue
(
)
const
{
return
mAnimVal
*
GetDegreesPerUnit
(
mAnimValUnit
)
;
}
void
SetBaseValue
(
float
aValue
uint8_t
aUnit
SVGElement
*
aSVGElement
bool
aDoSetAttr
)
;
void
SetAnimValue
(
float
aValue
uint8_t
aUnit
SVGElement
*
aSVGElement
)
;
uint8_t
GetBaseValueUnit
(
)
const
{
return
mBaseValUnit
;
}
uint8_t
GetAnimValueUnit
(
)
const
{
return
mAnimValUnit
;
}
float
GetBaseValInSpecifiedUnits
(
)
const
{
return
mBaseVal
;
}
float
GetAnimValInSpecifiedUnits
(
)
const
{
return
mAnimVal
;
}
static
nsresult
ToDOMSVGAngle
(
nsISupports
*
*
aResult
)
;
already_AddRefed
<
mozilla
:
:
dom
:
:
SVGAnimatedAngle
>
ToDOMAnimatedAngle
(
SVGElement
*
aSVGElement
)
;
mozilla
:
:
UniquePtr
<
SMILAttr
>
ToSMILAttr
(
SVGElement
*
aSVGElement
)
;
static
bool
GetValueFromString
(
const
nsAString
&
aString
float
&
aValue
uint16_t
*
aUnitType
)
;
static
float
GetDegreesPerUnit
(
uint8_t
aUnit
)
;
private
:
float
mAnimVal
;
float
mBaseVal
;
uint8_t
mAnimValUnit
;
uint8_t
mBaseValUnit
;
uint8_t
mAttrEnum
;
bool
mIsAnimated
;
void
SetBaseValueInSpecifiedUnits
(
float
aValue
SVGElement
*
aSVGElement
)
;
nsresult
NewValueSpecifiedUnits
(
uint16_t
aUnitType
float
aValue
SVGElement
*
aSVGElement
)
;
nsresult
ConvertToSpecifiedUnits
(
uint16_t
aUnitType
SVGElement
*
aSVGElement
)
;
already_AddRefed
<
mozilla
:
:
dom
:
:
DOMSVGAngle
>
ToDOMBaseVal
(
SVGElement
*
aSVGElement
)
;
already_AddRefed
<
mozilla
:
:
dom
:
:
DOMSVGAngle
>
ToDOMAnimVal
(
SVGElement
*
aSVGElement
)
;
public
:
struct
SMILOrient
final
:
public
SMILAttr
{
public
:
SMILOrient
(
mozilla
:
:
dom
:
:
nsSVGOrientType
*
aOrientType
SVGAngle
*
aAngle
SVGElement
*
aSVGElement
)
:
mOrientType
(
aOrientType
)
mAngle
(
aAngle
)
mSVGElement
(
aSVGElement
)
{
}
mozilla
:
:
dom
:
:
nsSVGOrientType
*
mOrientType
;
SVGAngle
*
mAngle
;
SVGElement
*
mSVGElement
;
virtual
nsresult
ValueFromString
(
const
nsAString
&
aStr
const
mozilla
:
:
dom
:
:
SVGAnimationElement
*
aSrcElement
SMILValue
&
aValue
bool
&
aPreventCachingOfSandwich
)
const
override
;
virtual
SMILValue
GetBaseValue
(
)
const
override
;
virtual
void
ClearAnimValue
(
)
override
;
virtual
nsresult
SetAnimValue
(
const
SMILValue
&
aValue
)
override
;
}
;
}
;
}
#
endif
