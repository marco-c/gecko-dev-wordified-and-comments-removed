#
ifndef
mozilla_dom_CookieStoreNotifier_h
#
define
mozilla_dom_CookieStoreNotifier_h
#
include
"
nsIObserver
.
h
"
#
include
"
mozilla
/
OriginAttributes
.
h
"
class
nsISerialEventTarget
;
namespace
mozilla
:
:
dom
{
class
CookieStore
;
struct
CookieListItem
;
class
Event
;
class
CookieStoreNotifier
final
:
public
nsIObserver
{
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIOBSERVER
static
already_AddRefed
<
CookieStoreNotifier
>
Create
(
CookieStore
*
aCookieStore
)
;
void
Disentangle
(
)
;
void
FireDelayedDOMEvents
(
)
;
private
:
CookieStoreNotifier
(
CookieStore
*
aCookieStore
const
nsACString
&
aBaseDomain
const
OriginAttributes
&
aOriginAttributes
)
;
~
CookieStoreNotifier
(
)
;
void
AddObserversOnMainThread
(
bool
aPrivateBrowsing
)
;
void
RemoveObserversOnMainThread
(
bool
aPrivateBrowsing
)
;
CookieStore
*
mCookieStore
;
nsCString
mBaseDomain
;
OriginAttributes
mOriginAttributes
;
RefPtr
<
nsISerialEventTarget
>
mEventTarget
;
nsTArray
<
RefPtr
<
Event
>
>
mDelayedDOMEvents
;
}
;
}
#
endif
