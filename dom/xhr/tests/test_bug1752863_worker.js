var
xhr
;
var
myself
;
async
function
handleLoadstart
(
)
{
try
{
xhr
.
open
(
"
POST
"
"
FOOBAR
"
false
)
;
xhr
.
send
(
)
;
myself
.
postMessage
(
"
MissingError
"
)
;
}
catch
(
err
)
{
if
(
err
instanceof
DOMException
)
{
myself
.
postMessage
(
"
DOMException
"
)
;
}
else
{
myself
.
postMessage
(
"
OtherError
"
)
;
}
xhr
.
removeEventListener
(
"
loadstart
"
handleLoadstart
true
)
;
throw
err
;
}
}
self
.
onmessage
=
async
function
(
)
{
xhr
=
new
XMLHttpRequest
(
{
mozAnon
:
false
}
)
;
myself
=
self
;
xhr
.
addEventListener
(
"
loadstart
"
handleLoadstart
true
)
;
xhr
.
open
(
"
POST
"
"
FOOBAR
"
false
)
;
xhr
.
send
(
)
;
postMessage
(
"
TERMINATE
"
)
;
}
;
