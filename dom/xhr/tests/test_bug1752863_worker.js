self
.
onmessage
=
async
function
(
ev
)
{
var
xhr
=
new
XMLHttpRequest
(
{
mozAnon
:
false
}
)
;
var
myself
=
self
;
xhr
.
addEventListener
(
"
loadstart
"
async
(
)
=
>
{
try
{
xhr
.
open
(
"
POST
"
"
FOOBAR
"
false
)
;
xhr
.
send
(
)
;
myself
.
postMessage
(
"
MissingError
"
)
;
}
catch
(
err
)
{
if
(
err
instanceof
DOMException
)
{
myself
.
postMessage
(
"
DOMException
"
)
;
}
else
{
myself
.
postMessage
(
"
OtherError
"
)
;
}
}
}
true
)
;
xhr
.
open
(
"
POST
"
"
FOOBAR
"
false
)
;
xhr
.
send
(
)
;
postMessage
(
"
TERMINATE
"
)
;
}
;
