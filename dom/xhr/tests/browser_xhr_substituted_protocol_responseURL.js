const
TEST_URL
=
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
;
add_task
(
async
function
test
(
)
{
await
new
Promise
(
resolve
=
>
{
const
xhr
=
new
XMLHttpRequest
(
)
;
xhr
.
responseType
=
"
text
"
;
xhr
.
open
(
"
get
"
TEST_URL
)
;
xhr
.
addEventListener
(
"
loadend
"
(
)
=
>
{
is
(
xhr
.
responseURL
TEST_URL
"
original
URL
is
given
instead
of
substitution
"
)
;
resolve
(
)
;
}
)
;
xhr
.
send
(
)
;
}
)
;
}
)
;
