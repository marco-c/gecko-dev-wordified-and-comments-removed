extern
crate
mime_guess
;
extern
crate
nsstring
;
use
nsstring
:
:
{
nsACString
nsCString
}
;
use
std
:
:
path
:
:
Path
;
use
std
:
:
str
;
#
[
no_mangle
]
pub
extern
"
C
"
fn
mimeGuessFromPath
(
path
:
&
nsACString
content_type
:
&
mut
nsCString
)
{
let
path_data
=
str
:
:
from_utf8
(
path
.
as_ref
(
)
)
;
if
path_data
.
is_err
(
)
{
return
;
}
let
maybe_mime
=
mime_guess
:
:
from_path
(
Path
:
:
new
(
path_data
.
unwrap
(
)
)
)
.
first_raw
(
)
;
if
maybe_mime
.
is_none
(
)
{
return
;
}
content_type
.
assign
(
maybe_mime
.
unwrap
(
)
)
;
}
