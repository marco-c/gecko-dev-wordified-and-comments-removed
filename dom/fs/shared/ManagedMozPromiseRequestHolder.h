#
ifndef
DOM_FS_SHARED_MANAGEDMOZPROMISEREQUESTHOLDER_H_
#
define
DOM_FS_SHARED_MANAGEDMOZPROMISEREQUESTHOLDER_H_
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsISupportsImpl
.
h
"
namespace
mozilla
:
:
dom
:
:
fs
{
template
<
typename
Manager
typename
PromiseType
>
class
ManagedMozPromiseRequestHolder
final
:
public
MozPromiseRequestHolder
<
PromiseType
>
{
public
:
explicit
ManagedMozPromiseRequestHolder
(
Manager
*
aManager
)
:
mManager
(
aManager
)
{
mManager
-
>
RegisterPromiseRequestHolder
(
this
)
;
}
NS_INLINE_DECL_REFCOUNTING
(
ManagedMozPromiseRequestHolder
)
private
:
~
ManagedMozPromiseRequestHolder
(
)
{
mManager
-
>
UnregisterPromiseRequestHolder
(
this
)
;
}
RefPtr
<
Manager
>
mManager
;
}
;
}
#
endif
