#
include
"
mozilla
/
dom
/
WebAuthnTransactionChild
.
h
"
namespace
mozilla
{
namespace
dom
{
WebAuthnTransactionChild
:
:
WebAuthnTransactionChild
(
)
{
NS_ADDREF_THIS
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
WebAuthnTransactionChild
:
:
RecvConfirmRegister
(
const
uint64_t
&
aTransactionId
nsTArray
<
uint8_t
>
&
&
aRegBuffer
)
{
RefPtr
<
WebAuthnManager
>
mgr
=
WebAuthnManager
:
:
Get
(
)
;
MOZ_ASSERT
(
mgr
)
;
mgr
-
>
FinishMakeCredential
(
aTransactionId
aRegBuffer
)
;
return
IPC_OK
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
WebAuthnTransactionChild
:
:
RecvConfirmSign
(
const
uint64_t
&
aTransactionId
nsTArray
<
uint8_t
>
&
&
aCredentialId
nsTArray
<
uint8_t
>
&
&
aBuffer
)
{
RefPtr
<
WebAuthnManager
>
mgr
=
WebAuthnManager
:
:
Get
(
)
;
MOZ_ASSERT
(
mgr
)
;
mgr
-
>
FinishGetAssertion
(
aTransactionId
aCredentialId
aBuffer
)
;
return
IPC_OK
(
)
;
}
mozilla
:
:
ipc
:
:
IPCResult
WebAuthnTransactionChild
:
:
RecvAbort
(
const
uint64_t
&
aTransactionId
const
nsresult
&
aError
)
{
RefPtr
<
WebAuthnManager
>
mgr
=
WebAuthnManager
:
:
Get
(
)
;
MOZ_ASSERT
(
mgr
)
;
mgr
-
>
RequestAborted
(
aTransactionId
aError
)
;
return
IPC_OK
(
)
;
}
void
WebAuthnTransactionChild
:
:
ActorDestroy
(
ActorDestroyReason
why
)
{
RefPtr
<
WebAuthnManager
>
mgr
=
WebAuthnManager
:
:
Get
(
)
;
if
(
mgr
)
{
mgr
-
>
ActorDestroyed
(
)
;
}
}
}
}
