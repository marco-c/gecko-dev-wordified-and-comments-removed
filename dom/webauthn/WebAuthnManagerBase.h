#
ifndef
mozilla_dom_WebAuthnManagerBase_h
#
define
mozilla_dom_WebAuthnManagerBase_h
#
include
"
nsIDOMEventListener
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsCOMPtr
.
h
"
class
nsPIDOMWindowInner
;
namespace
mozilla
{
namespace
dom
{
class
WebAuthnTransactionChild
;
class
WebAuthnMakeCredentialResult
;
class
WebAuthnGetAssertionResult
;
class
WebAuthnManagerBase
:
public
nsIDOMEventListener
{
public
:
NS_DECL_NSIDOMEVENTLISTENER
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_CYCLE_COLLECTION_CLASS
(
WebAuthnManagerBase
)
explicit
WebAuthnManagerBase
(
nsPIDOMWindowInner
*
aParent
)
;
MOZ_CAN_RUN_SCRIPT
virtual
void
FinishMakeCredential
(
const
uint64_t
&
aTransactionId
const
WebAuthnMakeCredentialResult
&
aResult
)
=
0
;
MOZ_CAN_RUN_SCRIPT
virtual
void
FinishGetAssertion
(
const
uint64_t
&
aTransactionId
const
WebAuthnGetAssertionResult
&
aResult
)
=
0
;
MOZ_CAN_RUN_SCRIPT
virtual
void
RequestAborted
(
const
uint64_t
&
aTransactionId
const
nsresult
&
aError
)
=
0
;
void
ActorDestroyed
(
)
;
protected
:
MOZ_CAN_RUN_SCRIPT
virtual
~
WebAuthnManagerBase
(
)
;
MOZ_CAN_RUN_SCRIPT
virtual
void
HandleVisibilityChange
(
)
=
0
;
void
ListenForVisibilityEvents
(
)
;
void
StopListeningForVisibilityEvents
(
)
;
bool
MaybeCreateBackgroundActor
(
)
;
nsCOMPtr
<
nsPIDOMWindowInner
>
mParent
;
RefPtr
<
WebAuthnTransactionChild
>
mChild
;
}
;
}
}
#
endif
