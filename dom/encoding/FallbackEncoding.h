#
ifndef
mozilla_dom_FallbackEncoding_h_
#
define
mozilla_dom_FallbackEncoding_h_
#
include
"
mozilla
/
NotNull
.
h
"
#
include
"
mozilla
/
StaticPtr
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsWeakReference
.
h
"
namespace
mozilla
{
class
Encoding
;
namespace
dom
{
class
FallbackEncoding
:
public
nsIObserver
nsSupportsWeakReference
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
static
NotNull
<
const
Encoding
*
>
FromLocale
(
)
;
static
bool
IsParticipatingTopLevelDomain
(
const
nsACString
&
aTLD
)
;
static
NotNull
<
const
Encoding
*
>
FromTopLevelDomain
(
const
nsACString
&
aTLD
)
;
static
void
Initialize
(
)
;
static
void
Shutdown
(
)
;
private
:
static
StaticRefPtr
<
FallbackEncoding
>
sInstance
;
FallbackEncoding
(
)
;
virtual
~
FallbackEncoding
(
)
=
default
;
void
Invalidate
(
)
{
mFallback
=
nullptr
;
}
static
void
PrefChanged
(
const
char
*
void
*
)
;
NotNull
<
const
Encoding
*
>
Get
(
)
;
const
Encoding
*
mFallback
;
}
;
}
}
#
endif
