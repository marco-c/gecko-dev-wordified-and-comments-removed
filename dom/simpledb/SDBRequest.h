#
ifndef
mozilla_dom_simpledb_SDBRequest_h
#
define
mozilla_dom_simpledb_SDBRequest_h
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsISDBRequest
.
h
"
#
include
"
nsIVariant
.
h
"
class
nsISDBCallback
;
namespace
mozilla
{
namespace
dom
{
class
SDBConnection
;
class
SDBRequest
final
:
public
nsISDBRequest
{
RefPtr
<
SDBConnection
>
mConnection
;
nsCOMPtr
<
nsIVariant
>
mResult
;
nsCOMPtr
<
nsISDBCallback
>
mCallback
;
nsresult
mResultCode
;
bool
mHaveResultOrErrorCode
;
public
:
explicit
SDBRequest
(
SDBConnection
*
aConnection
)
;
void
AssertIsOnOwningThread
(
)
const
{
NS_ASSERT_OWNINGTHREAD
(
SDBRequest
)
;
}
SDBConnection
*
GetConnection
(
)
const
{
AssertIsOnOwningThread
(
)
;
return
mConnection
;
}
void
SetResult
(
nsIVariant
*
aResult
)
;
void
SetError
(
nsresult
aRv
)
;
private
:
~
SDBRequest
(
)
;
void
FireCallback
(
)
;
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_NSISDBREQUEST
NS_DECL_CYCLE_COLLECTION_CLASS
(
SDBRequest
)
}
;
}
}
#
endif
