#
ifndef
nsCommandManager_h__
#
define
nsCommandManager_h__
#
include
"
nsClassHashtable
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsICommandManager
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsWeakReference
.
h
"
class
nsIController
;
template
<
class
E
>
class
nsCOMArray
;
class
nsCommandManager
final
:
public
nsICommandManager
public
nsSupportsWeakReference
{
public
:
using
ObserverList
=
nsTArray
<
nsCOMPtr
<
nsIObserver
>
>
;
nsCommandManager
(
)
=
delete
;
explicit
nsCommandManager
(
mozIDOMWindowProxy
*
aWindow
)
;
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_CYCLE_COLLECTION_CLASS_AMBIGUOUS
(
nsCommandManager
nsICommandManager
)
NS_DECL_NSICOMMANDMANAGER
void
CommandStatusChanged
(
const
char
*
aCommandName
)
;
bool
IsCommandEnabled
(
const
nsCString
&
aCommandName
mozIDOMWindowProxy
*
aTargetWindow
)
;
protected
:
virtual
~
nsCommandManager
(
)
;
nsresult
GetControllerForCommand
(
const
char
*
aCommand
mozIDOMWindowProxy
*
aDirectedToThisWindow
nsIController
*
*
aResult
)
;
protected
:
nsClassHashtable
<
nsCharPtrHashKey
ObserverList
>
mObserversTable
;
mozIDOMWindowProxy
*
mWindow
;
}
;
nsCommandManager
*
nsICommandManager
:
:
AsCommandManager
(
)
{
return
static_cast
<
nsCommandManager
*
>
(
this
)
;
}
const
nsCommandManager
*
nsICommandManager
:
:
AsCommandManager
(
)
const
{
return
static_cast
<
const
nsCommandManager
*
>
(
this
)
;
}
#
endif
