#
ifndef
nsXBLPrototypeResources_h__
#
define
nsXBLPrototypeResources_h__
#
include
"
mozilla
/
StyleSheet
.
h
"
#
include
"
nsICSSLoaderObserver
.
h
"
class
nsCSSRuleProcessor
;
class
nsIAtom
;
class
nsIContent
;
class
nsXBLPrototypeBinding
;
class
nsXBLResourceLoader
;
namespace
mozilla
{
class
CSSStyleSheet
;
class
ServoStyleSet
;
}
class
nsXBLPrototypeResources
{
public
:
explicit
nsXBLPrototypeResources
(
nsXBLPrototypeBinding
*
aBinding
)
;
~
nsXBLPrototypeResources
(
)
;
bool
LoadResources
(
nsIContent
*
aBoundElement
)
;
void
AddResource
(
nsIAtom
*
aResourceType
const
nsAString
&
aSrc
)
;
void
AddResourceListener
(
nsIContent
*
aElement
)
;
nsresult
FlushSkinSheets
(
)
;
nsresult
Write
(
nsIObjectOutputStream
*
aStream
)
;
void
Traverse
(
nsCycleCollectionTraversalCallback
&
cb
)
;
void
Unlink
(
)
;
void
ClearLoader
(
)
;
void
AppendStyleSheet
(
mozilla
:
:
StyleSheet
*
aSheet
)
;
void
RemoveStyleSheet
(
mozilla
:
:
StyleSheet
*
aSheet
)
;
void
InsertStyleSheetAt
(
size_t
aIndex
mozilla
:
:
StyleSheet
*
aSheet
)
;
mozilla
:
:
StyleSheet
*
StyleSheetAt
(
size_t
aIndex
)
const
;
size_t
SheetCount
(
)
const
;
bool
HasStyleSheets
(
)
const
;
void
AppendStyleSheetsTo
(
nsTArray
<
mozilla
:
:
StyleSheet
*
>
&
aResult
)
const
;
void
GatherRuleProcessor
(
)
;
nsCSSRuleProcessor
*
GetRuleProcessor
(
)
const
{
return
mRuleProcessor
;
}
void
ComputeServoStyleSet
(
nsPresContext
*
aPresContext
)
;
mozilla
:
:
ServoStyleSet
*
GetServoStyleSet
(
)
const
{
return
mServoStyleSet
.
get
(
)
;
}
private
:
RefPtr
<
nsXBLResourceLoader
>
mLoader
;
nsTArray
<
RefPtr
<
mozilla
:
:
StyleSheet
>
>
mStyleSheetList
;
RefPtr
<
nsCSSRuleProcessor
>
mRuleProcessor
;
mozilla
:
:
UniquePtr
<
mozilla
:
:
ServoStyleSet
>
mServoStyleSet
;
}
;
#
endif
