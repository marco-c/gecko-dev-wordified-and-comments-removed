#
ifndef
DOM_NOTIFICATION_NOTIFICATIONPARENT_H_
#
define
DOM_NOTIFICATION_NOTIFICATIONPARENT_H_
#
include
"
mozilla
/
dom
/
notification
/
PNotificationParent
.
h
"
#
include
"
mozilla
/
ipc
/
PBackgroundParent
.
h
"
#
include
"
mozilla
/
dom
/
DOMTypes
.
h
"
namespace
mozilla
:
:
dom
:
:
notification
{
class
NotificationParent
final
:
public
PNotificationParent
public
nsIObserver
{
using
IPCResult
=
mozilla
:
:
ipc
:
:
IPCResult
;
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIOBSERVER
NotificationParent
(
NotNull
<
nsIPrincipal
*
>
aPrincipal
NotNull
<
nsIPrincipal
*
>
aEffectiveStoragePrincipal
bool
aIsSecureContext
const
nsAString
&
aId
const
nsAString
&
aScope
const
IPCNotificationOptions
&
aOptions
)
:
mPrincipal
(
aPrincipal
)
mEffectiveStoragePrincipal
(
aEffectiveStoragePrincipal
)
mIsSecureContext
(
aIsSecureContext
)
mId
(
aId
)
mScope
(
aScope
)
mOptions
(
aOptions
)
{
}
;
IPCResult
RecvShow
(
ShowResolver
&
&
aResolver
)
;
nsresult
BindToMainThread
(
Endpoint
<
PNotificationParent
>
&
&
aParentEndpoint
PBackgroundParent
:
:
CreateNotificationParentResolver
&
&
aResolver
)
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
private
:
~
NotificationParent
(
)
=
default
;
void
GetAlertName
(
nsAString
&
aRetval
)
{
if
(
mAlertName
.
IsEmpty
(
)
)
{
MaybeInitAlertName
(
)
;
}
aRetval
=
mAlertName
;
}
void
MaybeInitAlertName
(
)
;
NotNull
<
nsCOMPtr
<
nsIPrincipal
>
>
mPrincipal
;
NotNull
<
nsCOMPtr
<
nsIPrincipal
>
>
mEffectiveStoragePrincipal
;
bool
mIsSecureContext
;
nsString
mId
;
nsString
mScope
;
IPCNotificationOptions
mOptions
;
nsString
mAlertName
;
}
;
}
#
endif
