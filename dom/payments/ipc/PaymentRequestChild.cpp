#
include
"
PaymentRequestChild
.
h
"
#
include
"
mozilla
/
dom
/
PaymentRequestManager
.
h
"
namespace
mozilla
{
namespace
dom
{
PaymentRequestChild
:
:
PaymentRequestChild
(
)
:
mActorAlive
(
true
)
{
}
nsresult
PaymentRequestChild
:
:
RequestPayment
(
const
IPCPaymentActionRequest
&
aAction
)
{
if
(
!
mActorAlive
)
{
return
NS_ERROR_FAILURE
;
}
SendRequestPayment
(
aAction
)
;
return
NS_OK
;
}
void
PaymentRequestChild
:
:
ActorDestroy
(
ActorDestroyReason
aWhy
)
{
mActorAlive
=
false
;
RefPtr
<
PaymentRequestManager
>
manager
=
PaymentRequestManager
:
:
GetSingleton
(
)
;
MOZ_ASSERT
(
manager
)
;
manager
-
>
ReleasePaymentChild
(
this
)
;
}
void
PaymentRequestChild
:
:
MaybeDelete
(
)
{
if
(
mActorAlive
)
{
mActorAlive
=
false
;
Send__delete__
(
this
)
;
}
}
bool
PaymentRequestChild
:
:
SendRequestPayment
(
const
IPCPaymentActionRequest
&
aAction
)
{
return
PPaymentRequestChild
:
:
SendRequestPayment
(
aAction
)
;
}
}
}
