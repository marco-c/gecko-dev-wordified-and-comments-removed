#
ifndef
mozilla_dom_CloseWatcherManager_h
#
define
mozilla_dom_CloseWatcherManager_h
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsTObserverArray
.
h
"
namespace
mozilla
:
:
dom
{
class
CloseWatcher
;
using
CloseWatcherArray
=
nsTObserverArray
<
nsTObserverArray
<
RefPtr
<
CloseWatcher
>
>
>
;
class
CloseWatcherManager
:
public
nsISupports
{
public
:
CloseWatcherManager
(
)
=
default
;
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_CYCLE_COLLECTION_CLASS
(
CloseWatcherManager
)
void
NotifyUserInteraction
(
)
;
MOZ_CAN_RUN_SCRIPT
bool
ProcessCloseRequest
(
)
;
void
Add
(
CloseWatcher
&
)
;
void
Remove
(
CloseWatcher
&
)
;
bool
Contains
(
const
CloseWatcher
&
)
const
;
bool
CanGrow
(
)
const
;
protected
:
virtual
~
CloseWatcherManager
(
)
=
default
;
CloseWatcherArray
mGroups
;
uint32_t
mAllowedNumberOfGroups
=
1
;
bool
mNextUserInteractionAllowsNewGroup
=
true
;
}
;
}
#
endif
