#
include
"
mozilla
/
dom
/
PGamepadTestChannelParent
.
h
"
#
ifndef
mozilla_dom_GamepadTestChannelParent_h_
#
define
mozilla_dom_GamepadTestChannelParent_h_
namespace
mozilla
{
namespace
dom
{
class
GamepadTestChannelParent
final
:
public
PGamepadTestChannelParent
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
GamepadTestChannelParent
)
GamepadTestChannelParent
(
)
=
default
;
bool
Init
(
)
;
void
ActorDestroy
(
ActorDestroyReason
aWhy
)
override
;
mozilla
:
:
ipc
:
:
IPCResult
RecvGamepadTestEvent
(
const
uint32_t
&
aID
const
GamepadChangeEvent
&
aGamepadEvent
)
;
void
OnMonitoringStateChanged
(
bool
aNewState
)
;
private
:
struct
DeferredGamepadAdded
{
uint32_t
promiseId
;
GamepadAdded
gamepadAdded
;
}
;
void
AddGamepadToPlatformService
(
uint32_t
aPromiseId
const
GamepadAdded
&
aGamepadAdded
)
;
~
GamepadTestChannelParent
(
)
=
default
;
nsTArray
<
DeferredGamepadAdded
>
mDeferredGamepadAdded
;
}
;
}
}
#
endif
