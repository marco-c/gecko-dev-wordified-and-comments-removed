#
include
"
mozilla
/
WeakPtr
.
h
"
#
include
"
mozilla
/
dom
/
PGamepadTestChannelParent
.
h
"
#
ifndef
mozilla_dom_GamepadTestChannelParent_h_
#
define
mozilla_dom_GamepadTestChannelParent_h_
namespace
mozilla
:
:
dom
{
class
GamepadTestChannelParent
final
:
public
PGamepadTestChannelParent
public
SupportsWeakPtr
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
GamepadTestChannelParent
)
static
already_AddRefed
<
GamepadTestChannelParent
>
Create
(
)
;
mozilla
:
:
ipc
:
:
IPCResult
RecvGamepadTestEvent
(
const
uint32_t
&
aID
const
GamepadChangeEvent
&
aGamepadEvent
)
;
void
OnMonitoringStateChanged
(
bool
aNewState
)
;
GamepadTestChannelParent
(
const
GamepadTestChannelParent
&
)
=
delete
;
GamepadTestChannelParent
(
GamepadTestChannelParent
&
&
)
=
delete
;
GamepadTestChannelParent
&
operator
=
(
const
GamepadTestChannelParent
&
)
=
delete
;
GamepadTestChannelParent
&
operator
=
(
GamepadTestChannelParent
&
&
)
=
delete
;
private
:
struct
DeferredGamepadAdded
{
uint32_t
promiseId
;
GamepadAdded
gamepadAdded
;
}
;
GamepadTestChannelParent
(
)
;
~
GamepadTestChannelParent
(
)
;
void
AddGamepadToPlatformService
(
uint32_t
aPromiseId
const
GamepadAdded
&
aGamepadAdded
)
;
nsTArray
<
DeferredGamepadAdded
>
mDeferredGamepadAdded
;
}
;
}
#
endif
