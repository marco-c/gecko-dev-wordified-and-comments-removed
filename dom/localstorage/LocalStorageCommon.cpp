#
include
"
LocalStorageCommon
.
h
"
namespace
mozilla
{
namespace
dom
{
namespace
{
Atomic
<
int32_t
>
gNextGenLocalStorageEnabled
(
-
1
)
;
}
bool
NextGenLocalStorageEnabled
(
)
{
MOZ_ASSERT
(
NS_IsMainThread
(
)
)
;
if
(
gNextGenLocalStorageEnabled
=
=
-
1
)
{
bool
enabled
=
Preferences
:
:
GetBool
(
"
dom
.
storage
.
next_gen
"
false
)
;
gNextGenLocalStorageEnabled
=
enabled
?
1
:
0
;
}
return
!
!
gNextGenLocalStorageEnabled
;
}
bool
CachedNextGenLocalStorageEnabled
(
)
{
MOZ_ASSERT
(
gNextGenLocalStorageEnabled
!
=
-
1
)
;
return
!
!
gNextGenLocalStorageEnabled
;
}
}
}
