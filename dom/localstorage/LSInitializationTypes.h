#
ifndef
DOM_LOCALSTORAGE_INITIALIZATIONTYPES_H_
#
define
DOM_LOCALSTORAGE_INITIALIZATIONTYPES_H_
#
include
<
mozilla
/
dom
/
quota
/
FirstInitializationAttempts
.
h
>
#
include
"
mozilla
/
TypedEnumBits
.
h
"
#
include
"
nsTHashMap
.
h
"
namespace
mozilla
{
struct
CreateIfNonExistent
;
}
namespace
mozilla
:
:
dom
{
enum
class
LSOriginInitialization
{
None
=
0
Datastore
=
1
<
<
0
}
;
MOZ_MAKE_ENUM_CLASS_BITWISE_OPERATORS
(
LSOriginInitialization
)
using
LSOriginInitializationInfo
=
quota
:
:
FirstInitializationAttempts
<
LSOriginInitialization
Nothing
>
;
class
LSInitializationInfo
final
{
nsTHashMap
<
nsCStringHashKey
LSOriginInitializationInfo
>
mOriginInitializationInfos
;
public
:
LSOriginInitializationInfo
&
MutableOriginInitializationInfoRef
(
const
nsACString
&
aOrigin
)
{
return
*
mOriginInitializationInfos
.
Lookup
(
aOrigin
)
;
}
LSOriginInitializationInfo
&
MutableOriginInitializationInfoRef
(
const
nsACString
&
aOrigin
const
CreateIfNonExistent
&
)
{
return
mOriginInitializationInfos
.
LookupOrInsert
(
aOrigin
)
;
}
}
;
}
#
endif
