#
ifndef
MOZILLA_WIDGET_CLIPBOARDCONTENTANALYSISCHILD_H_
#
define
MOZILLA_WIDGET_CLIPBOARDCONTENTANALYSISCHILD_H_
#
include
"
mozilla
/
ipc
/
Endpoint
.
h
"
#
include
"
mozilla
/
PClipboardContentAnalysisChild
.
h
"
namespace
mozilla
{
class
ClipboardContentAnalysisChild
final
:
public
PClipboardContentAnalysisChild
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
ClipboardContentAnalysisChild
override
)
static
bool
Create
(
Endpoint
<
PClipboardContentAnalysisChild
>
&
&
aEndpoint
)
{
MOZ_ASSERT
(
!
sSingleton
)
;
sSingleton
=
new
ClipboardContentAnalysisChild
(
)
;
DebugOnly
<
bool
>
success
=
aEndpoint
.
Bind
(
sSingleton
)
;
MOZ_ASSERT
(
success
)
;
return
true
;
}
static
ClipboardContentAnalysisChild
*
GetSingleton
(
)
{
return
sSingleton
;
}
void
ActorDestroy
(
ActorDestroyReason
aReason
)
override
final
{
sSingleton
=
nullptr
;
}
private
:
friend
PClipboardContentAnalysisChild
;
ClipboardContentAnalysisChild
(
)
{
MOZ_ASSERT
(
XRE_IsContentProcess
(
)
)
;
}
~
ClipboardContentAnalysisChild
(
)
=
default
;
static
StaticRefPtr
<
ClipboardContentAnalysisChild
>
sSingleton
;
}
;
}
#
endif
