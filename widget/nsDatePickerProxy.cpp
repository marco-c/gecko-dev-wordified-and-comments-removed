#
include
"
nsDatePickerProxy
.
h
"
#
include
"
mozilla
/
dom
/
TabChild
.
h
"
using
namespace
mozilla
:
:
dom
;
NS_IMPL_ISUPPORTS
(
nsDatePickerProxy
nsIDatePicker
)
NS_IMETHODIMP
nsDatePickerProxy
:
:
Init
(
mozIDOMWindowProxy
*
aParent
const
nsAString
&
aTitle
const
nsAString
&
aInitialDate
)
{
TabChild
*
tabChild
=
TabChild
:
:
GetFrom
(
aParent
)
;
if
(
!
tabChild
)
{
return
NS_ERROR_FAILURE
;
}
tabChild
-
>
SendPDatePickerConstructor
(
this
nsString
(
aTitle
)
nsString
(
aInitialDate
)
)
;
NS_ADDREF_THIS
(
)
;
return
NS_OK
;
}
NS_IMETHODIMP
nsDatePickerProxy
:
:
Open
(
nsIDatePickerShownCallback
*
aDatePickerShownCallback
)
{
NS_ENSURE_STATE
(
!
mCallback
)
;
mCallback
=
aDatePickerShownCallback
;
SendOpen
(
)
;
return
NS_OK
;
}
bool
nsDatePickerProxy
:
:
RecvCancel
(
)
{
if
(
mCallback
)
{
mCallback
-
>
Cancel
(
)
;
mCallback
=
nullptr
;
}
return
true
;
}
bool
nsDatePickerProxy
:
:
Recv__delete__
(
const
nsString
&
aDate
)
{
if
(
mCallback
)
{
mCallback
-
>
Done
(
aDate
)
;
mCallback
=
nullptr
;
}
return
true
;
}
