#
ifndef
nsAppShell_h_
#
define
nsAppShell_h_
#
include
"
nsBaseAppShell
.
h
"
#
include
"
nsTArray
.
h
"
#
include
<
Foundation
/
NSAutoreleasePool
.
h
>
#
include
<
CoreFoundation
/
CFRunLoop
.
h
>
#
include
<
UIKit
/
UIWindow
.
h
>
class
AppShellDelegate
;
class
nsAppShell
:
public
nsBaseAppShell
{
public
:
NS_IMETHOD
ResumeNative
(
void
)
override
;
nsAppShell
(
)
;
nsresult
Init
(
)
;
NS_IMETHOD
Run
(
void
)
override
;
NS_IMETHOD
Exit
(
void
)
override
;
void
WillTerminate
(
void
)
;
static
nsAppShell
*
gAppShell
;
static
UIWindow
*
gWindow
;
static
NSMutableArray
*
gTopLevelViews
;
protected
:
virtual
~
nsAppShell
(
)
;
static
void
ProcessGeckoEvents
(
void
*
aInfo
)
;
void
ScheduleNativeEventCallback
(
)
override
;
bool
ProcessNextNativeEvent
(
bool
aMayWait
)
override
;
NSAutoreleasePool
*
mAutoreleasePool
;
AppShellDelegate
*
mDelegate
;
CFRunLoopRef
mCFRunLoop
;
CFRunLoopSourceRef
mCFRunLoopSource
;
bool
mRunningEventLoop
;
bool
mTerminated
;
bool
mNotifiedWillTerminate
;
}
;
#
endif
