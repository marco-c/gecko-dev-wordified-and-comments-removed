#
include
"
IOSBridge
.
h
"
#
import
"
mozilla
/
widget
/
GeckoViewSupport
.
h
"
#
include
"
mozilla
/
widget
/
EventDispatcher
.
h
"
using
namespace
mozilla
:
:
widget
;
NS_IMPL_ISUPPORTS
(
nsIOSBridge
nsIGeckoViewEventDispatcher
nsIGeckoViewBridge
)
nsIOSBridge
:
:
nsIOSBridge
(
)
{
RefPtr
<
mozilla
:
:
widget
:
:
EventDispatcher
>
dispatcher
=
new
mozilla
:
:
widget
:
:
EventDispatcher
(
)
;
dispatcher
-
>
Attach
(
[
GetSwiftRuntime
(
)
runtimeDispatcher
]
)
;
dispatcher
-
>
Activate
(
)
;
mEventDispatcher
=
dispatcher
;
}
NS_IMETHODIMP
nsIOSBridge
:
:
GetDispatcherByName
(
const
char
*
aName
nsIGeckoViewEventDispatcher
*
*
aResult
)
{
mozilla
:
:
AssertIsOnMainThread
(
)
;
RefPtr
<
mozilla
:
:
widget
:
:
EventDispatcher
>
dispatcher
=
new
mozilla
:
:
widget
:
:
EventDispatcher
(
)
;
dispatcher
-
>
Attach
(
[
GetSwiftRuntime
(
)
dispatcherByName
:
aName
]
)
;
dispatcher
-
>
Activate
(
)
;
dispatcher
.
forget
(
aResult
)
;
return
NS_OK
;
}
nsIOSBridge
:
:
~
nsIOSBridge
(
)
=
default
;
