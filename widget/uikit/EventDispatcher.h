#
ifndef
mozilla_widget_EventDispatcher_h
#
define
mozilla_widget_EventDispatcher_h
#
include
<
objc
/
objc
.
h
>
#
include
<
CoreFoundation
/
CoreFoundation
.
h
>
#
include
"
mozilla
/
widget
/
EventDispatcherBase
.
h
"
namespace
mozilla
:
:
widget
{
class
EventDispatcher
final
:
public
EventDispatcherBase
{
public
:
void
Attach
(
id
aDispatcher
)
;
void
Detach
(
)
;
void
Activate
(
)
MOZ_REQUIRES
(
sMainThreadCapability
)
;
bool
HasEmbedderListener
(
const
nsAString
&
aEvent
)
override
MOZ_REQUIRES
(
sMainThreadCapability
)
;
nsresult
DispatchToEmbedder
(
JSContext
*
aCx
const
nsAString
&
aEvent
JS
:
:
Handle
<
JS
:
:
Value
>
aData
nsIGeckoViewEventCallback
*
aCallback
)
override
MOZ_REQUIRES
(
sMainThreadCapability
)
;
static
nsresult
UnboxBundle
(
JSContext
*
aCx
CFDictionaryRef
aData
JS
:
:
MutableHandle
<
JS
:
:
Value
>
aOut
)
;
private
:
virtual
~
EventDispatcher
(
)
;
void
Shutdown
(
)
MOZ_REQUIRES
(
sMainThreadCapability
)
;
id
mDispatcher
MOZ_GUARDED_BY
(
sMainThreadCapability
)
=
nullptr
;
}
;
}
#
endif
