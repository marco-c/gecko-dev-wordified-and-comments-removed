#
ifndef
__MOZ_WAYLAND_SURFACE_LOCK_H__
#
define
__MOZ_WAYLAND_SURFACE_LOCK_H__
#
include
"
mozilla
/
RefPtr
.
h
"
struct
wl_surface
;
struct
_MozContainer
;
typedef
struct
_MozContainer
MozContainer
;
namespace
mozilla
:
:
widget
{
class
WaylandSurface
;
class
WaylandSurfaceLock
final
{
public
:
explicit
WaylandSurfaceLock
(
RefPtr
<
WaylandSurface
>
aWaylandSurface
bool
aForceCommit
=
false
)
;
~
WaylandSurfaceLock
(
)
;
WaylandSurface
*
GetWaylandSurface
(
)
const
;
void
RequestForceCommit
(
)
{
#
ifdef
MOZ_WAYLAND
mForceCommit
=
true
;
#
endif
}
#
ifdef
MOZ_WAYLAND
void
Commit
(
)
;
#
endif
private
:
#
ifdef
MOZ_WAYLAND
RefPtr
<
WaylandSurface
>
mWaylandSurface
;
wl_surface
*
mSurface
=
nullptr
;
bool
mForceCommit
=
false
;
#
endif
}
;
}
#
endif
