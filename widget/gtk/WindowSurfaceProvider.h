#
ifndef
_MOZILLA_WIDGET_GTK_WINDOW_SURFACE_PROVIDER_H
#
define
_MOZILLA_WIDGET_GTK_WINDOW_SURFACE_PROVIDER_H
#
include
<
gdk
/
gdk
.
h
>
#
include
"
mozilla
/
gfx
/
2D
.
h
"
#
include
"
mozilla
/
gfx
/
Types
.
h
"
#
include
"
mozilla
/
layers
/
LayersTypes
.
h
"
#
include
"
mozilla
/
widget
/
WindowSurface
.
h
"
#
include
"
Units
.
h
"
#
ifdef
MOZ_X11
#
include
<
X11
/
Xlib
.
h
>
#
include
"
X11UndefineNone
.
h
"
#
endif
class
nsWindow
;
namespace
mozilla
{
namespace
widget
{
class
WindowSurfaceProvider
final
{
public
:
WindowSurfaceProvider
(
)
;
#
ifdef
MOZ_WAYLAND
void
Initialize
(
nsWindow
*
aWidget
)
;
#
endif
#
ifdef
MOZ_X11
void
Initialize
(
Window
aWindow
Visual
*
aVisual
int
aDepth
bool
aIsShaped
)
;
#
endif
void
CleanupResources
(
)
;
already_AddRefed
<
gfx
:
:
DrawTarget
>
StartRemoteDrawingInRegion
(
const
LayoutDeviceIntRegion
&
aInvalidRegion
layers
:
:
BufferMode
*
aBufferMode
)
;
void
EndRemoteDrawingInRegion
(
gfx
:
:
DrawTarget
*
aDrawTarget
const
LayoutDeviceIntRegion
&
aInvalidRegion
)
;
private
:
RefPtr
<
WindowSurface
>
CreateWindowSurface
(
)
;
RefPtr
<
WindowSurface
>
mWindowSurface
;
#
ifdef
MOZ_WAYLAND
nsWindow
*
mWidget
;
#
endif
#
ifdef
MOZ_X11
bool
mIsShaped
;
int
mXDepth
;
Window
mXWindow
;
Visual
*
mXVisual
;
#
endif
}
;
}
}
#
endif
