#
ifndef
__LookAndFeel
#
define
__LookAndFeel
#
ifndef
MOZILLA_INTERNAL_API
#
error
"
This
header
is
only
usable
from
within
libxul
(
MOZILLA_INTERNAL_API
)
.
"
#
endif
#
include
"
nsDebug
.
h
"
#
include
"
nsColor
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
widget
/
ThemeChangeKind
.
h
"
struct
gfxFontStyle
;
class
nsIFrame
;
namespace
mozilla
{
struct
StyleColorSchemeFlags
;
enum
class
ColorScheme
:
uint8_t
{
Light
Dark
}
;
namespace
dom
{
class
Document
;
}
namespace
widget
{
class
FullLookAndFeel
;
}
enum
class
StyleSystemColor
:
uint8_t
;
enum
class
StyleSystemColorScheme
:
uint8_t
;
enum
class
StyleSystemFont
:
uint8_t
;
class
LookAndFeel
{
public
:
using
ColorID
=
StyleSystemColor
;
using
ColorScheme
=
mozilla
:
:
ColorScheme
;
enum
class
IntID
{
CaretBlinkTime
CaretBlinkCount
CaretWidth
ShowCaretDuringSelection
SelectTextfieldsOnKeyFocus
SubmenuDelay
MenusCanOverlapOSBar
UseOverlayScrollbars
AllowOverlayScrollbarsOverlap
SkipNavigatingDisabledMenuItem
DragThresholdX
DragThresholdY
UseAccessibilityTheme
ScrollArrowStyle
ScrollSliderStyle
ScrollButtonLeftMouseButtonAction
ScrollButtonMiddleMouseButtonAction
ScrollButtonRightMouseButtonAction
TreeOpenDelay
TreeCloseDelay
TreeLazyScrollDelay
TreeScrollDelay
TreeScrollLinesMax
TabFocusModel
ChosenMenuItemsShouldBlink
WindowsAccentColorInTitlebar
WindowsDefaultTheme
DWMCompositor
WindowsClassic
WindowsGlass
MacGraphiteTheme
MacBigSurTheme
MacRTL
AlertNotificationOrigin
ScrollToClick
IMERawInputUnderlineStyle
IMESelectedRawTextUnderlineStyle
IMEConvertedTextUnderlineStyle
IMESelectedConvertedTextUnderline
SpellCheckerUnderlineStyle
MenuBarDrag
OperatingSystemVersionIdentifier
ScrollbarButtonAutoRepeatBehavior
TooltipDelay
SwipeAnimationEnabled
ScrollbarDisplayOnMouseMove
ScrollbarFadeBeginDelay
ScrollbarFadeDuration
ContextMenuOffsetVertical
ContextMenuOffsetHorizontal
GTKCSDAvailable
GTKCSDHideTitlebarByDefault
GTKCSDMinimizeButton
GTKCSDMaximizeButton
GTKCSDCloseButton
GTKCSDMinimizeButtonPosition
GTKCSDMaximizeButtonPosition
GTKCSDCloseButtonPosition
GTKCSDReversedPlacement
SystemUsesDarkTheme
PrefersReducedMotion
PrimaryPointerCapabilities
AllPointerCapabilities
SystemVerticalScrollbarWidth
SystemHorizontalScrollbarHeight
TouchDeviceSupportPresent
End
}
;
static
bool
UseOverlayScrollbars
(
)
{
return
GetInt
(
IntID
:
:
UseOverlayScrollbars
)
;
}
enum
class
OperatingSystemVersion
{
Windows7
=
2
Windows8
Windows10
Unknown
}
;
enum
{
eScrollArrow_None
=
0
eScrollArrow_StartBackward
=
0x1000
eScrollArrow_StartForward
=
0x0100
eScrollArrow_EndBackward
=
0x0010
eScrollArrow_EndForward
=
0x0001
}
;
enum
{
eScrollArrowStyle_Single
=
eScrollArrow_StartBackward
|
eScrollArrow_EndForward
eScrollArrowStyle_BothAtBottom
=
eScrollArrow_EndBackward
|
eScrollArrow_EndForward
eScrollArrowStyle_BothAtEachEnd
=
eScrollArrow_EndBackward
|
eScrollArrow_EndForward
|
eScrollArrow_StartBackward
|
eScrollArrow_StartForward
eScrollArrowStyle_BothAtTop
=
eScrollArrow_StartBackward
|
eScrollArrow_StartForward
}
;
enum
{
eScrollThumbStyle_Normal
eScrollThumbStyle_Proportional
}
;
enum
class
FloatID
{
IMEUnderlineRelativeSize
SpellCheckerUnderlineRelativeSize
CaretAspectRatio
TextScaleFactor
TitlebarRadius
End
}
;
using
FontID
=
mozilla
:
:
StyleSystemFont
;
static
ColorScheme
SystemColorScheme
(
)
{
return
GetInt
(
IntID
:
:
SystemUsesDarkTheme
)
?
ColorScheme
:
:
Dark
:
ColorScheme
:
:
Light
;
}
static
ColorScheme
ColorSchemeForChrome
(
)
;
static
ColorScheme
ColorSchemeForStyle
(
const
dom
:
:
Document
&
const
StyleColorSchemeFlags
&
)
;
static
ColorScheme
ColorSchemeForFrame
(
const
nsIFrame
*
)
;
enum
class
UseStandins
:
bool
{
No
Yes
}
;
static
UseStandins
ShouldUseStandins
(
const
dom
:
:
Document
&
ColorID
)
;
static
Maybe
<
nscolor
>
GetColor
(
ColorID
ColorScheme
UseStandins
)
;
static
Maybe
<
nscolor
>
GetColor
(
ColorID
const
nsIFrame
*
)
;
static
nscolor
Color
(
ColorID
aId
ColorScheme
aScheme
UseStandins
aUseStandins
nscolor
aDefault
=
NS_RGB
(
0
0
0
)
)
{
return
GetColor
(
aId
aScheme
aUseStandins
)
.
valueOr
(
aDefault
)
;
}
static
nscolor
Color
(
ColorID
aId
nsIFrame
*
aFrame
nscolor
aDefault
=
NS_RGB
(
0
0
0
)
)
{
return
GetColor
(
aId
aFrame
)
.
valueOr
(
aDefault
)
;
}
static
nsresult
GetInt
(
IntID
int32_t
*
aResult
)
;
static
nsresult
GetFloat
(
FloatID
aID
float
*
aResult
)
;
static
int32_t
GetInt
(
IntID
aID
int32_t
aDefault
=
0
)
{
int32_t
result
;
if
(
NS_FAILED
(
GetInt
(
aID
&
result
)
)
)
{
return
aDefault
;
}
return
result
;
}
static
float
GetFloat
(
FloatID
aID
float
aDefault
=
0
.
0f
)
{
float
result
;
if
(
NS_FAILED
(
GetFloat
(
aID
&
result
)
)
)
{
return
aDefault
;
}
return
result
;
}
static
bool
GetFont
(
FontID
aID
nsString
&
aName
gfxFontStyle
&
aStyle
)
;
static
char16_t
GetPasswordCharacter
(
)
;
static
bool
GetEchoPassword
(
)
;
static
uint32_t
GetPasswordMaskDelay
(
)
;
static
void
GetThemeInfo
(
nsACString
&
)
;
static
void
Refresh
(
)
;
static
void
NativeInit
(
)
;
static
void
SetData
(
widget
:
:
FullLookAndFeel
&
&
aTables
)
;
static
void
NotifyChangedAllWindows
(
widget
:
:
ThemeChangeKind
)
;
}
;
}
constexpr
nscolor
NS_TRANSPARENT
=
NS_RGBA
(
0x01
0x00
0x00
0x00
)
;
constexpr
nscolor
NS_SAME_AS_FOREGROUND_COLOR
=
NS_RGBA
(
0x02
0x00
0x00
0x00
)
;
constexpr
nscolor
NS_40PERCENT_FOREGROUND_COLOR
=
NS_RGBA
(
0x03
0x00
0x00
0x00
)
;
#
define
NS_IS_SELECTION_SPECIAL_COLOR
(
c
)
\
(
(
c
)
=
=
NS_TRANSPARENT
|
|
(
c
)
=
=
NS_SAME_AS_FOREGROUND_COLOR
|
|
\
(
c
)
=
=
NS_40PERCENT_FOREGROUND_COLOR
)
#
define
NS_ALERT_HORIZONTAL
1
#
define
NS_ALERT_LEFT
2
#
define
NS_ALERT_TOP
4
#
endif
