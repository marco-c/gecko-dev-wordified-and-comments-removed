#
ifndef
nsAppShellSingleton_h__
#
define
nsAppShellSingleton_h__
#
include
"
nsXULAppAPI
.
h
"
static
nsIAppShell
*
sAppShell
;
static
nsresult
nsAppShellInit
(
)
{
NS_ASSERTION
(
!
sAppShell
"
already
initialized
"
)
;
sAppShell
=
new
nsAppShell
(
)
;
if
(
!
sAppShell
)
return
NS_ERROR_OUT_OF_MEMORY
;
NS_ADDREF
(
sAppShell
)
;
nsresult
rv
=
static_cast
<
nsAppShell
*
>
(
sAppShell
)
-
>
Init
(
)
;
MOZ_RELEASE_ASSERT
(
NS_SUCCEEDED
(
rv
)
)
;
return
NS_OK
;
}
static
void
nsAppShellShutdown
(
)
{
NS_RELEASE
(
sAppShell
)
;
}
nsresult
nsAppShellConstructor
(
const
nsIID
&
iid
void
*
*
result
)
{
NS_ENSURE_TRUE
(
sAppShell
NS_ERROR_NOT_INITIALIZED
)
;
return
sAppShell
-
>
QueryInterface
(
iid
result
)
;
}
#
endif
