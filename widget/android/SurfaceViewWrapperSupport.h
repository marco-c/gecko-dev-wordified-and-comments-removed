#
ifndef
SurfaceViewWrapperSupport_h__
#
define
SurfaceViewWrapperSupport_h__
#
include
"
mozilla
/
java
/
SurfaceViewWrapperNatives
.
h
"
#
include
<
android
/
native_window
.
h
>
#
include
<
android
/
native_window_jni
.
h
>
namespace
mozilla
{
namespace
widget
{
class
SurfaceViewWrapperSupport
final
:
public
java
:
:
SurfaceViewWrapper
:
:
Natives
<
SurfaceViewWrapperSupport
>
{
public
:
static
bool
IsSurfaceAbandoned
(
jni
:
:
Object
:
:
Param
aSurface
)
{
ANativeWindow
*
win
=
ANativeWindow_fromSurface
(
jni
:
:
GetEnvForThread
(
)
aSurface
.
Get
(
)
)
;
if
(
!
win
)
{
return
true
;
}
int32_t
width
=
ANativeWindow_getWidth
(
win
)
;
ANativeWindow_release
(
win
)
;
return
width
<
0
;
}
}
;
}
}
#
endif
