#
ifndef
_widget_windows_WinCompositorWidget_h__
#
define
_widget_windows_WinCompositorWidget_h__
#
include
"
CompositorWidgetProxy
.
h
"
#
include
"
mozilla
/
gfx
/
CriticalSection
.
h
"
class
nsWindow
;
namespace
mozilla
{
namespace
widget
{
class
WinCompositorWidgetProxy
:
public
CompositorWidgetProxy
{
public
:
WinCompositorWidgetProxy
(
nsWindow
*
aWindow
)
;
bool
PreRender
(
layers
:
:
LayerManagerComposite
*
)
override
;
void
PostRender
(
layers
:
:
LayerManagerComposite
*
)
override
;
already_AddRefed
<
gfx
:
:
DrawTarget
>
StartRemoteDrawing
(
)
override
;
void
EndRemoteDrawing
(
)
override
;
LayoutDeviceIntSize
GetClientSize
(
)
override
;
already_AddRefed
<
CompositorVsyncDispatcher
>
GetCompositorVsyncDispatcher
(
)
override
;
nsIWidget
*
RealWidget
(
)
override
;
WinCompositorWidgetProxy
*
AsWindowsProxy
(
)
override
{
return
this
;
}
void
EnterPresentLock
(
)
;
void
LeavePresentLock
(
)
;
private
:
nsWindow
*
mWindow
;
HWND
mWnd
;
gfx
:
:
CriticalSection
mPresentLock
;
}
;
}
}
#
endif
