#
ifndef
PDFVIAEMFPRINTHELPER_H_
#
define
PDFVIAEMFPRINTHELPER_H_
#
include
"
nsCOMPtr
.
h
"
#
include
"
PDFiumEngineShim
.
h
"
#
include
"
mozilla
/
Vector
.
h
"
#
include
<
windows
.
h
>
class
nsIFile
;
class
nsFileInputStream
;
namespace
mozilla
{
namespace
widget
{
class
PDFViaEMFPrintHelper
{
public
:
explicit
PDFViaEMFPrintHelper
(
PRLibrary
*
aPDFiumLibrary
)
;
~
PDFViaEMFPrintHelper
(
)
;
NS_IMETHOD
OpenDocument
(
nsIFile
*
aFile
)
;
void
CloseDocument
(
)
;
int
GetPageCount
(
)
{
return
mPDFiumEngine
-
>
GetPageCount
(
mPDFDoc
)
;
}
bool
DrawPage
(
HDC
aPrinterDC
unsigned
int
aPageIndex
int
aPageWidth
int
aPageHeight
)
;
bool
DrawPageToFile
(
const
wchar_t
*
aFilePath
unsigned
int
aPageIndex
int
aPageWidth
int
aPageHeight
)
;
private
:
bool
LoadPDFDataToBuffer
(
nsIFile
*
aFile
)
;
bool
RenderPageToDC
(
HDC
aDC
unsigned
int
aPageIndex
int
aPageWidth
int
aPageHeight
)
;
UniquePtr
<
PDFiumEngineShim
>
mPDFiumEngine
;
FPDF_DOCUMENT
mPDFDoc
;
Vector
<
char
>
mPDFFileContents
;
PRLibrary
*
mPDFiumLibrary
;
}
;
}
}
#
endif
