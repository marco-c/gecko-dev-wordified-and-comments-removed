#
ifndef
WinPointerEvents_h__
#
define
WinPointerEvents_h__
#
include
"
mozilla
/
MouseEvents
.
h
"
#
include
"
touchinjection_sdk80
.
h
"
#
include
<
windef
.
h
>
class
WinPointerInfo
final
:
public
mozilla
:
:
WidgetPointerHelper
{
public
:
WinPointerInfo
(
)
:
WidgetPointerHelper
(
)
mPressure
(
0
)
mButtons
(
0
)
{
}
WinPointerInfo
(
uint32_t
aPointerId
uint32_t
aTiltX
uint32_t
aTiltY
float
aPressure
int16_t
aButtons
)
:
WidgetPointerHelper
(
aPointerId
aTiltX
aTiltY
)
mPressure
(
aPressure
)
mButtons
(
aButtons
)
{
}
float
mPressure
;
int16_t
mButtons
;
}
;
class
WinPointerEvents
final
{
public
:
explicit
WinPointerEvents
(
)
;
public
:
bool
ShouldHandleWinPointerMessages
(
UINT
aMsg
WPARAM
aWParam
)
;
uint32_t
GetPointerId
(
WPARAM
aWParam
)
{
return
GET_POINTERID_WPARAM
(
aWParam
)
;
}
bool
GetPointerType
(
uint32_t
aPointerId
POINTER_INPUT_TYPE
*
aPointerType
)
;
POINTER_INPUT_TYPE
GetPointerType
(
uint32_t
aPointerId
)
;
bool
GetPointerInfo
(
uint32_t
aPointerId
POINTER_INFO
*
aPointerInfo
)
;
bool
GetPointerPenInfo
(
uint32_t
aPointerId
POINTER_PEN_INFO
*
aPenInfo
)
;
bool
ShouldRollupOnPointerEvent
(
UINT
aMsg
WPARAM
aWParam
)
;
bool
ShouldFirePointerEventByWinPointerMessages
(
)
;
WinPointerInfo
*
GetCachedPointerInfo
(
UINT
aMsg
WPARAM
aWParam
)
;
void
ConvertAndCachePointerInfo
(
UINT
aMsg
WPARAM
aWParam
)
;
void
ConvertAndCachePointerInfo
(
WPARAM
aWParam
WinPointerInfo
*
aInfo
)
;
private
:
typedef
BOOL
(
WINAPI
*
GetPointerTypePtr
)
(
uint32_t
aPointerId
POINTER_INPUT_TYPE
*
aPointerType
)
;
typedef
BOOL
(
WINAPI
*
GetPointerInfoPtr
)
(
uint32_t
aPointerId
POINTER_INFO
*
aPointerInfo
)
;
typedef
BOOL
(
WINAPI
*
GetPointerPenInfoPtr
)
(
uint32_t
aPointerId
POINTER_PEN_INFO
*
aPenInfo
)
;
void
InitLibrary
(
)
;
static
HMODULE
sLibraryHandle
;
static
const
wchar_t
kPointerLibraryName
[
]
;
static
GetPointerTypePtr
getPointerType
;
static
GetPointerInfoPtr
getPointerInfo
;
static
GetPointerPenInfoPtr
getPointerPenInfo
;
WinPointerInfo
mPenPointerDownInfo
;
WinPointerInfo
mPenPointerUpInfo
;
WinPointerInfo
mPenPointerUpdateInfo
;
}
;
#
endif
