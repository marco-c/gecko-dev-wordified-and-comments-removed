#
include
"
InputDeviceUtils
.
h
"
#
define
INITGUID
#
include
<
dbt
.
h
>
#
include
<
hidclass
.
h
>
#
include
<
ntddmou
.
h
>
namespace
mozilla
{
namespace
widget
{
HDEVNOTIFY
InputDeviceUtils
:
:
RegisterNotification
(
HWND
aHwnd
)
{
DEV_BROADCAST_DEVICEINTERFACE
filter
=
{
}
;
filter
.
dbcc_size
=
sizeof
(
DEV_BROADCAST_DEVICEINTERFACE
)
;
filter
.
dbcc_devicetype
=
DBT_DEVTYP_DEVICEINTERFACE
;
filter
.
dbcc_classguid
=
GUID_DEVINTERFACE_MOUSE
;
return
RegisterDeviceNotification
(
aHwnd
&
filter
DEVICE_NOTIFY_WINDOW_HANDLE
)
;
}
void
InputDeviceUtils
:
:
UnregisterNotification
(
HDEVNOTIFY
aHandle
)
{
if
(
!
aHandle
)
{
return
;
}
UnregisterDeviceNotification
(
aHandle
)
;
}
}
}
