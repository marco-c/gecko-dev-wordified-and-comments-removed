#
ifndef
PDFIUMENGINESHIM_H
#
define
PDFIUMENGINESHIM_H
#
include
"
prlink
.
h
"
#
include
"
fpdfview
.
h
"
#
include
<
windows
.
h
>
#
include
"
private
/
pprio
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
namespace
mozilla
{
namespace
widget
{
struct
PDFFunctionPointerTable
;
class
PDFiumEngineShim
{
public
:
NS_INLINE_DECL_THREADSAFE_REFCOUNTING
(
PDFiumEngineShim
)
static
already_AddRefed
<
PDFiumEngineShim
>
GetInstanceOrNull
(
)
;
static
already_AddRefed
<
PDFiumEngineShim
>
GetInstanceOrNull
(
const
nsCString
&
aLibrary
)
;
FPDF_DOCUMENT
LoadDocument
(
FPDF_STRING
file_path
FPDF_BYTESTRING
aPassword
)
;
FPDF_DOCUMENT
LoadDocument
(
PRFileDesc
*
aPrfile
FPDF_BYTESTRING
aPassword
)
;
void
CloseDocument
(
FPDF_DOCUMENT
aDocument
)
;
int
GetPageCount
(
FPDF_DOCUMENT
aDocument
)
;
int
GetPageSizeByIndex
(
FPDF_DOCUMENT
aDocument
int
aPageIndex
double
*
aWidth
double
*
aHeight
)
;
FPDF_PAGE
LoadPage
(
FPDF_DOCUMENT
aDocument
int
aPageIndex
)
;
void
ClosePage
(
FPDF_PAGE
aPage
)
;
void
RenderPage
(
HDC
aDC
FPDF_PAGE
aPage
int
aStartX
int
aStartY
int
aSizeX
int
aSizeY
int
aRotate
int
aFlags
)
;
private
:
PDFiumEngineShim
(
)
;
~
PDFiumEngineShim
(
)
;
bool
Init
(
const
nsCString
&
aLibrary
)
;
UniquePtr
<
PDFFunctionPointerTable
>
mTable
;
bool
mInitialized
;
PRLibrary
*
mPRLibrary
;
}
;
}
}
#
endif
