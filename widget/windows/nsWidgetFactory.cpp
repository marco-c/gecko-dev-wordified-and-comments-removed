#
include
"
nsWidgetFactory
.
h
"
#
include
"
mozilla
/
Components
.
h
"
#
include
"
nsIFactory
.
h
"
#
include
"
nsISupports
.
h
"
#
include
"
nsdefs
.
h
"
#
include
"
nsWidgetsCID
.
h
"
#
include
"
nsAppShell
.
h
"
#
include
"
nsAppShellSingleton
.
h
"
#
include
"
mozilla
/
WidgetUtils
.
h
"
#
include
"
mozilla
/
widget
/
ScreenManager
.
h
"
#
include
"
nsIServiceManager
.
h
"
#
include
"
nsLookAndFeel
.
h
"
#
include
"
WinMouseScrollHandler
.
h
"
#
include
"
KeyboardLayout
.
h
"
#
include
"
nsToolkit
.
h
"
#
include
"
nsXULAppAPI
.
h
"
#
include
"
nsFilePicker
.
h
"
#
include
"
nsColorPicker
.
h
"
#
include
"
nsFilePickerProxy
.
h
"
#
include
"
nsClipboardHelper
.
h
"
#
include
"
nsClipboard
.
h
"
#
include
"
HeadlessClipboard
.
h
"
#
include
"
WindowsUIUtils
.
h
"
using
namespace
mozilla
;
using
namespace
mozilla
:
:
widget
;
NS_IMPL_COMPONENT_FACTORY
(
nsIClipboard
)
{
nsCOMPtr
<
nsIClipboard
>
inst
;
if
(
gfxPlatform
:
:
IsHeadless
(
)
)
{
inst
=
new
HeadlessClipboard
(
)
;
}
else
{
inst
=
new
nsClipboard
(
)
;
}
return
inst
.
forget
(
)
.
downcast
<
nsISupports
>
(
)
;
}
nsresult
nsWidgetWindowsModuleCtor
(
)
{
return
nsAppShellInit
(
)
;
}
void
nsWidgetWindowsModuleDtor
(
)
{
WidgetUtils
:
:
Shutdown
(
)
;
KeyboardLayout
:
:
Shutdown
(
)
;
MouseScrollHandler
:
:
Shutdown
(
)
;
nsLookAndFeel
:
:
Shutdown
(
)
;
nsToolkit
:
:
Shutdown
(
)
;
nsAppShellShutdown
(
)
;
}
