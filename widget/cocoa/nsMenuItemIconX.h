#
ifndef
nsMenuItemIconX_h_
#
define
nsMenuItemIconX_h_
#
import
<
Cocoa
/
Cocoa
.
h
>
#
include
"
mozilla
/
widget
/
IconLoader
.
h
"
#
include
"
mozilla
/
WeakPtr
.
h
"
class
nsIconLoaderService
;
class
nsIURI
;
class
nsIContent
;
class
nsIPrincipal
;
class
imgRequestProxy
;
class
nsMenuParentX
;
class
nsPresContext
;
namespace
mozilla
{
class
ComputedStyle
;
}
class
nsMenuItemIconX
final
:
public
mozilla
:
:
widget
:
:
IconLoader
:
:
Listener
{
public
:
class
Listener
{
public
:
virtual
void
IconUpdated
(
)
=
0
;
}
;
explicit
nsMenuItemIconX
(
Listener
*
aListener
)
;
~
nsMenuItemIconX
(
)
;
void
SetupIcon
(
nsIContent
*
aContent
)
;
nsresult
OnComplete
(
imgIContainer
*
aImage
)
override
;
NSImage
*
GetIconImage
(
)
const
{
return
mIconImage
;
}
protected
:
bool
StartIconLoad
(
nsIContent
*
aContent
)
;
already_AddRefed
<
nsIURI
>
GetIconURI
(
nsIContent
*
aContent
)
;
Listener
*
mListener
;
RefPtr
<
const
mozilla
:
:
ComputedStyle
>
mComputedStyle
;
mozilla
:
:
WeakPtr
<
nsPresContext
>
mPresContext
;
NSImage
*
mIconImage
=
nil
;
RefPtr
<
mozilla
:
:
widget
:
:
IconLoader
>
mIconLoader
;
}
;
#
endif
