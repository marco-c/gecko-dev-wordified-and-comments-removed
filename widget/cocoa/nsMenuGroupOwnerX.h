#
ifndef
nsMenuGroupOwnerX_h_
#
define
nsMenuGroupOwnerX_h_
#
import
<
Cocoa
/
Cocoa
.
h
>
#
include
"
mozilla
/
WeakPtr
.
h
"
#
include
"
nsIMutationObserver
.
h
"
#
include
"
nsHashKeys
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsTHashMap
.
h
"
#
include
"
nsString
.
h
"
class
nsMenuBarX
;
class
nsMenuItemX
;
class
nsChangeObserver
;
class
nsIWidget
;
class
nsIContent
;
class
MOZMenuItemRepresentedObject
;
enum
{
eCommand_ID_About
=
1
eCommand_ID_Prefs
=
2
eCommand_ID_Quit
=
3
eCommand_ID_HideApp
=
4
eCommand_ID_HideOthers
=
5
eCommand_ID_ShowAll
=
6
eCommand_ID_Update
=
7
eCommand_ID_TouchBar
=
8
eCommand_ID_Last
=
9
}
;
class
nsMenuGroupOwnerX
:
public
nsIMutationObserver
public
nsIObserver
{
public
:
nsMenuGroupOwnerX
(
mozilla
:
:
dom
:
:
Element
*
aElement
nsMenuBarX
*
aMenuBarIfMenuBar
)
;
void
RegisterForContentChanges
(
nsIContent
*
aContent
nsChangeObserver
*
aMenuObject
)
;
void
UnregisterForContentChanges
(
nsIContent
*
aContent
)
;
uint32_t
RegisterForCommand
(
nsMenuItemX
*
aMenuItem
)
;
void
UnregisterCommand
(
uint32_t
aCommandID
)
;
nsMenuItemX
*
GetMenuItemForCommandID
(
uint32_t
aCommandID
)
;
void
RegisterForLocaleChanges
(
)
;
void
UnregisterForLocaleChanges
(
)
;
MOZMenuItemRepresentedObject
*
GetRepresentedObject
(
)
{
return
mRepresentedObject
;
}
nsMenuBarX
*
GetMenuBar
(
)
{
return
mMenuBar
.
get
(
)
;
}
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
NS_DECL_NSIMUTATIONOBSERVER
protected
:
virtual
~
nsMenuGroupOwnerX
(
)
;
nsChangeObserver
*
LookupContentChangeObserver
(
nsIContent
*
aContent
)
;
RefPtr
<
nsIContent
>
mContent
;
uint32_t
mCurrentCommandID
=
eCommand_ID_Last
;
nsTHashMap
<
nsPtrHashKey
<
nsIContent
>
nsChangeObserver
*
>
mContentToObserverTable
;
nsTHashMap
<
nsUint32HashKey
nsMenuItemX
*
>
mCommandToMenuObjectTable
;
MOZMenuItemRepresentedObject
*
mRepresentedObject
=
nil
;
mozilla
:
:
WeakPtr
<
nsMenuBarX
>
mMenuBar
;
}
;
interface
MOZMenuItemRepresentedObject
:
NSObject
-
(
id
)
initWithMenuGroupOwner
:
(
nsMenuGroupOwnerX
*
)
aMenuGroupOwner
;
-
(
void
)
setMenuGroupOwner
:
(
nsMenuGroupOwnerX
*
)
aMenuGroupOwner
;
-
(
nsMenuGroupOwnerX
*
)
menuGroupOwner
;
end
#
endif
