#
include
"
mozilla
/
widget
/
NativeMenuSupport
.
h
"
#
include
"
MainThreadUtils
.
h
"
#
include
"
mozilla
/
StaticPrefs_browser
.
h
"
#
include
"
mozilla
/
StaticPrefs_widget
.
h
"
#
include
"
NativeMenuMac
.
h
"
#
include
"
nsCocoaWindow
.
h
"
#
include
"
nsMenuBarX
.
h
"
namespace
mozilla
:
:
widget
{
void
NativeMenuSupport
:
:
CreateNativeMenuBar
(
nsIWidget
*
aParent
dom
:
:
Element
*
aMenuBarElement
)
{
MOZ_RELEASE_ASSERT
(
NS_IsMainThread
(
)
"
Attempting
to
create
native
menu
bar
on
wrong
thread
!
"
)
;
if
(
aMenuBarElement
)
{
aMenuBarElement
-
>
SetBoolAttr
(
nsGkAtoms
:
:
native
true
)
;
}
static_cast
<
nsCocoaWindow
*
>
(
aParent
)
-
>
SetMenuBar
(
MakeRefPtr
<
nsMenuBarX
>
(
aMenuBarElement
)
)
;
}
already_AddRefed
<
NativeMenu
>
NativeMenuSupport
:
:
CreateNativeContextMenu
(
dom
:
:
Element
*
aPopup
)
{
return
MakeAndAddRef
<
NativeMenuMac
>
(
aPopup
)
;
}
bool
NativeMenuSupport
:
:
ShouldUseNativeContextMenus
(
)
{
return
StaticPrefs
:
:
widget_macos_native_context_menus
(
)
;
}
}
