#
include
"
nsCollationFactory
.
h
"
#
include
"
nsCollation
.
h
"
#
include
"
nsServiceManagerUtils
.
h
"
#
include
"
mozilla
/
intl
/
LocaleService
.
h
"
NS_IMPL_ISUPPORTS
(
nsCollationFactory
nsICollationFactory
)
nsresult
nsCollationFactory
:
:
CreateCollation
(
nsICollation
*
*
instancePtr
)
{
nsAutoCString
appLocale
;
mozilla
:
:
intl
:
:
LocaleService
:
:
GetInstance
(
)
-
>
GetAppLocaleAsBCP47
(
appLocale
)
;
return
CreateCollationForLocale
(
appLocale
instancePtr
)
;
}
nsresult
nsCollationFactory
:
:
CreateCollationForLocale
(
const
nsACString
&
locale
nsICollation
*
*
instancePtr
)
{
nsCOMPtr
<
nsICollation
>
inst
=
new
nsCollation
(
)
;
inst
-
>
Initialize
(
locale
)
;
inst
.
forget
(
instancePtr
)
;
return
NS_OK
;
}
