#
ifndef
nsHyphenationManager_h__
#
define
nsHyphenationManager_h__
#
include
"
base
/
process
.
h
"
#
include
"
mozilla
/
Omnijar
.
h
"
#
include
"
mozilla
/
ipc
/
SharedMemory
.
h
"
#
include
"
nsHashKeys
.
h
"
#
include
"
nsAtomHashKeys
.
h
"
#
include
"
nsInterfaceHashtable
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsRefPtrHashtable
.
h
"
class
nsHyphenator
;
class
nsAtom
;
class
nsIURI
;
class
nsHyphenationManager
:
public
nsIObserver
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
nsHyphenationManager
(
)
;
already_AddRefed
<
nsHyphenator
>
GetHyphenator
(
nsAtom
*
aLocale
)
;
void
ShareHyphDictToProcess
(
nsIURI
*
aURI
base
:
:
ProcessId
aPid
mozilla
:
:
ipc
:
:
SharedMemory
:
:
Handle
*
aOutHandle
uint32_t
*
aOutSize
)
;
static
nsHyphenationManager
*
Instance
(
)
;
static
void
Shutdown
(
)
;
size_t
SizeOfIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
;
private
:
virtual
~
nsHyphenationManager
(
)
;
protected
:
void
LoadPatternList
(
)
;
void
LoadPatternListFromOmnijar
(
mozilla
:
:
Omnijar
:
:
Type
aType
)
;
void
LoadPatternListFromDir
(
nsIFile
*
aDir
)
;
void
LoadAliases
(
)
;
nsRefPtrHashtable
<
nsAtomHashKey
nsAtom
>
mHyphAliases
;
nsInterfaceHashtable
<
nsAtomHashKey
nsIURI
>
mPatternFiles
;
nsRefPtrHashtable
<
nsAtomHashKey
nsHyphenator
>
mHyphenators
;
static
nsHyphenationManager
*
sInstance
;
}
;
#
endif
