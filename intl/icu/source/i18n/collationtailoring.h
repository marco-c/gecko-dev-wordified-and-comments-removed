#
ifndef
__COLLATIONTAILORING_H__
#
define
__COLLATIONTAILORING_H__
#
include
"
unicode
/
utypes
.
h
"
#
if
!
UCONFIG_NO_COLLATION
#
include
"
unicode
/
locid
.
h
"
#
include
"
unicode
/
unistr
.
h
"
#
include
"
unicode
/
uversion
.
h
"
#
include
"
collationsettings
.
h
"
#
include
"
uhash
.
h
"
#
include
"
umutex
.
h
"
#
include
"
unifiedcache
.
h
"
struct
UDataMemory
;
struct
UResourceBundle
;
struct
UTrie2
;
U_NAMESPACE_BEGIN
struct
CollationData
;
class
UnicodeSet
;
struct
U_I18N_API_CLASS
CollationTailoring
:
public
SharedObject
{
U_I18N_API
CollationTailoring
(
const
CollationSettings
*
baseSettings
)
;
U_I18N_API
virtual
~
CollationTailoring
(
)
;
U_I18N_API
UBool
isBogus
(
)
{
return
settings
=
=
nullptr
;
}
U_I18N_API
UBool
ensureOwnedData
(
UErrorCode
&
errorCode
)
;
U_I18N_API
static
void
makeBaseVersion
(
const
UVersionInfo
ucaVersion
UVersionInfo
version
)
;
U_I18N_API
void
setVersion
(
const
UVersionInfo
baseVersion
const
UVersionInfo
rulesVersion
)
;
U_I18N_API
int32_t
getUCAVersion
(
)
const
;
const
CollationData
*
data
;
const
CollationSettings
*
settings
;
UnicodeString
rules
;
mutable
Locale
actualLocale
;
UVersionInfo
version
;
CollationData
*
ownedData
;
UObject
*
builder
;
UDataMemory
*
memory
;
UResourceBundle
*
bundle
;
UTrie2
*
trie
;
UnicodeSet
*
unsafeBackwardSet
;
mutable
UHashtable
*
maxExpansions
;
mutable
UInitOnce
maxExpansionsInitOnce
;
private
:
CollationTailoring
(
const
CollationTailoring
&
other
)
=
delete
;
}
;
struct
U_I18N_API_CLASS
CollationCacheEntry
:
public
SharedObject
{
U_I18N_API
CollationCacheEntry
(
const
Locale
&
loc
const
CollationTailoring
*
t
)
:
validLocale
(
loc
)
tailoring
(
t
)
{
if
(
t
!
=
nullptr
)
{
t
-
>
addRef
(
)
;
}
}
U_I18N_API
~
CollationCacheEntry
(
)
;
Locale
validLocale
;
const
CollationTailoring
*
tailoring
;
}
;
template
<
>
U_I18N_API
const
CollationCacheEntry
*
LocaleCacheKey
<
CollationCacheEntry
>
:
:
createObject
(
const
void
*
creationContext
UErrorCode
&
errorCode
)
const
;
U_NAMESPACE_END
#
endif
#
endif
