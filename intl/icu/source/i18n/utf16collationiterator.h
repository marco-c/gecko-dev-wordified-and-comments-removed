#
ifndef
__UTF16COLLATIONITERATOR_H__
#
define
__UTF16COLLATIONITERATOR_H__
#
include
"
unicode
/
utypes
.
h
"
#
if
!
UCONFIG_NO_COLLATION
#
include
"
cmemory
.
h
"
#
include
"
collation
.
h
"
#
include
"
collationdata
.
h
"
#
include
"
collationiterator
.
h
"
#
include
"
normalizer2impl
.
h
"
U_NAMESPACE_BEGIN
class
U_I18N_API
UTF16CollationIterator
:
public
CollationIterator
{
public
:
UTF16CollationIterator
(
const
CollationData
*
d
UBool
numeric
const
char16_t
*
s
const
char16_t
*
p
const
char16_t
*
lim
)
:
CollationIterator
(
d
numeric
)
start
(
s
)
pos
(
p
)
limit
(
lim
)
{
}
UTF16CollationIterator
(
const
UTF16CollationIterator
&
other
const
char16_t
*
newText
)
;
virtual
~
UTF16CollationIterator
(
)
;
virtual
bool
operator
=
=
(
const
CollationIterator
&
other
)
const
override
;
virtual
void
resetToOffset
(
int32_t
newOffset
)
override
;
virtual
int32_t
getOffset
(
)
const
override
;
void
setText
(
const
char16_t
*
s
const
char16_t
*
lim
)
{
reset
(
)
;
start
=
pos
=
s
;
limit
=
lim
;
}
virtual
UChar32
nextCodePoint
(
UErrorCode
&
errorCode
)
override
;
virtual
UChar32
previousCodePoint
(
UErrorCode
&
errorCode
)
override
;
protected
:
UTF16CollationIterator
(
const
UTF16CollationIterator
&
other
)
:
CollationIterator
(
other
)
start
(
nullptr
)
pos
(
nullptr
)
limit
(
nullptr
)
{
}
virtual
uint32_t
handleNextCE32
(
UChar32
&
c
UErrorCode
&
errorCode
)
override
;
virtual
char16_t
handleGetTrailSurrogate
(
)
override
;
virtual
UBool
foundNULTerminator
(
)
override
;
virtual
void
forwardNumCodePoints
(
int32_t
num
UErrorCode
&
errorCode
)
override
;
virtual
void
backwardNumCodePoints
(
int32_t
num
UErrorCode
&
errorCode
)
override
;
const
char16_t
*
start
*
pos
*
limit
;
}
;
class
U_I18N_API
FCDUTF16CollationIterator
:
public
UTF16CollationIterator
{
public
:
FCDUTF16CollationIterator
(
const
CollationData
*
data
UBool
numeric
const
char16_t
*
s
const
char16_t
*
p
const
char16_t
*
lim
)
:
UTF16CollationIterator
(
data
numeric
s
p
lim
)
rawStart
(
s
)
segmentStart
(
p
)
segmentLimit
(
nullptr
)
rawLimit
(
lim
)
nfcImpl
(
data
-
>
nfcImpl
)
checkDir
(
1
)
{
}
FCDUTF16CollationIterator
(
const
FCDUTF16CollationIterator
&
other
const
char16_t
*
newText
)
;
virtual
~
FCDUTF16CollationIterator
(
)
;
virtual
bool
operator
=
=
(
const
CollationIterator
&
other
)
const
override
;
virtual
void
resetToOffset
(
int32_t
newOffset
)
override
;
virtual
int32_t
getOffset
(
)
const
override
;
virtual
UChar32
nextCodePoint
(
UErrorCode
&
errorCode
)
override
;
virtual
UChar32
previousCodePoint
(
UErrorCode
&
errorCode
)
override
;
protected
:
virtual
uint32_t
handleNextCE32
(
UChar32
&
c
UErrorCode
&
errorCode
)
override
;
virtual
UBool
foundNULTerminator
(
)
override
;
virtual
void
forwardNumCodePoints
(
int32_t
num
UErrorCode
&
errorCode
)
override
;
virtual
void
backwardNumCodePoints
(
int32_t
num
UErrorCode
&
errorCode
)
override
;
private
:
void
switchToForward
(
)
;
UBool
nextSegment
(
UErrorCode
&
errorCode
)
;
void
switchToBackward
(
)
;
UBool
previousSegment
(
UErrorCode
&
errorCode
)
;
UBool
normalize
(
const
char16_t
*
from
const
char16_t
*
to
UErrorCode
&
errorCode
)
;
const
char16_t
*
rawStart
;
const
char16_t
*
segmentStart
;
const
char16_t
*
segmentLimit
;
const
char16_t
*
rawLimit
;
const
Normalizer2Impl
&
nfcImpl
;
UnicodeString
normalized
;
int8_t
checkDir
;
}
;
U_NAMESPACE_END
#
endif
#
endif
