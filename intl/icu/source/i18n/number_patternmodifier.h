#
include
"
unicode
/
utypes
.
h
"
#
if
!
UCONFIG_NO_FORMATTING
#
ifndef
__NUMBER_PATTERNMODIFIER_H__
#
define
__NUMBER_PATTERNMODIFIER_H__
#
include
"
standardplural
.
h
"
#
include
"
unicode
/
numberformatter
.
h
"
#
include
"
number_patternstring
.
h
"
#
include
"
number_types
.
h
"
#
include
"
number_modifiers
.
h
"
#
include
"
number_utils
.
h
"
#
include
"
number_currencysymbols
.
h
"
U_NAMESPACE_BEGIN
#
if
U_PF_WINDOWS
<
=
U_PLATFORM
&
&
U_PLATFORM
<
=
U_PF_CYGWIN
template
class
U_I18N_API
LocalPointerBase
<
number
:
:
impl
:
:
AdoptingModifierStore
>
;
template
class
U_I18N_API
LocalPointer
<
number
:
:
impl
:
:
AdoptingModifierStore
>
;
#
endif
namespace
number
:
:
impl
{
class
MutablePatternModifier
;
class
U_I18N_API
ImmutablePatternModifier
:
public
MicroPropsGenerator
public
UMemory
{
public
:
~
ImmutablePatternModifier
(
)
override
=
default
;
void
processQuantity
(
DecimalQuantity
&
MicroProps
&
micros
UErrorCode
&
status
)
const
override
;
void
applyToMicros
(
MicroProps
&
micros
const
DecimalQuantity
&
quantity
UErrorCode
&
status
)
const
;
const
Modifier
*
getModifier
(
Signum
signum
StandardPlural
:
:
Form
plural
)
const
;
void
addToChain
(
const
MicroPropsGenerator
*
parent
)
;
private
:
ImmutablePatternModifier
(
AdoptingModifierStore
*
pm
const
PluralRules
*
rules
)
;
const
LocalPointer
<
AdoptingModifierStore
>
pm
;
const
PluralRules
*
rules
;
const
MicroPropsGenerator
*
parent
;
friend
class
MutablePatternModifier
;
}
;
class
U_I18N_API
MutablePatternModifier
:
public
MicroPropsGenerator
public
Modifier
public
SymbolProvider
public
UMemory
{
public
:
~
MutablePatternModifier
(
)
override
=
default
;
explicit
MutablePatternModifier
(
bool
isStrong
)
;
void
setPatternInfo
(
const
AffixPatternProvider
*
patternInfo
Field
field
)
;
void
setPatternAttributes
(
UNumberSignDisplay
signDisplay
bool
perMille
bool
approximately
)
;
void
setSymbols
(
const
DecimalFormatSymbols
*
symbols
const
CurrencyUnit
&
currency
UNumberUnitWidth
unitWidth
const
PluralRules
*
rules
UErrorCode
&
status
)
;
void
setNumberProperties
(
Signum
signum
StandardPlural
:
:
Form
plural
)
;
bool
needsPlurals
(
)
const
;
AdoptingSignumModifierStore
createImmutableForPlural
(
StandardPlural
:
:
Form
plural
UErrorCode
&
status
)
;
ImmutablePatternModifier
*
createImmutable
(
UErrorCode
&
status
)
;
MicroPropsGenerator
&
addToChain
(
const
MicroPropsGenerator
*
parent
)
;
void
processQuantity
(
DecimalQuantity
&
MicroProps
&
micros
UErrorCode
&
status
)
const
override
;
int32_t
apply
(
FormattedStringBuilder
&
output
int32_t
leftIndex
int32_t
rightIndex
UErrorCode
&
status
)
const
override
;
int32_t
getPrefixLength
(
)
const
override
;
int32_t
getCodePointCount
(
)
const
override
;
bool
isStrong
(
)
const
override
;
bool
containsField
(
Field
field
)
const
override
;
void
getParameters
(
Parameters
&
output
)
const
override
;
bool
strictEquals
(
const
Modifier
&
other
)
const
override
;
UnicodeString
getSymbol
(
AffixPatternType
type
)
const
override
;
UnicodeString
getCurrencySymbolForUnitWidth
(
UErrorCode
&
status
)
const
;
UnicodeString
toUnicodeString
(
)
const
;
private
:
const
bool
fStrong
;
const
AffixPatternProvider
*
fPatternInfo
;
Field
fField
;
UNumberSignDisplay
fSignDisplay
;
bool
fPerMilleReplacesPercent
;
bool
fApproximately
;
const
DecimalFormatSymbols
*
fSymbols
;
UNumberUnitWidth
fUnitWidth
;
CurrencySymbols
fCurrencySymbols
;
const
PluralRules
*
fRules
;
Signum
fSignum
;
StandardPlural
:
:
Form
fPlural
;
const
MicroPropsGenerator
*
fParent
;
UnicodeString
currentAffix
;
ConstantMultiFieldModifier
*
createConstantModifier
(
UErrorCode
&
status
)
;
int32_t
insertPrefix
(
FormattedStringBuilder
&
sb
int
position
UErrorCode
&
status
)
;
int32_t
insertSuffix
(
FormattedStringBuilder
&
sb
int
position
UErrorCode
&
status
)
;
void
prepareAffix
(
bool
isPrefix
)
;
}
;
}
U_NAMESPACE_END
#
endif
#
endif
