#
ifndef
SMPDTFMT_H
#
define
SMPDTFMT_H
#
include
"
unicode
/
utypes
.
h
"
#
if
U_SHOW_CPLUSPLUS_API
#
if
!
UCONFIG_NO_FORMATTING
#
include
"
unicode
/
datefmt
.
h
"
#
include
"
unicode
/
udisplaycontext
.
h
"
#
include
"
unicode
/
tzfmt
.
h
"
#
include
"
unicode
/
brkiter
.
h
"
U_NAMESPACE_BEGIN
class
DateFormatSymbols
;
class
DateFormat
;
class
MessageFormat
;
class
FieldPositionHandler
;
class
TimeZoneFormat
;
class
SharedNumberFormat
;
class
SimpleDateFormatMutableNFs
;
class
DateIntervalFormat
;
namespace
number
{
class
LocalizedNumberFormatter
;
class
SimpleNumberFormatter
;
}
class
U_I18N_API
SimpleDateFormat
:
public
DateFormat
{
public
:
SimpleDateFormat
(
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
const
UnicodeString
&
override
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
const
Locale
&
locale
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
const
UnicodeString
&
override
const
Locale
&
locale
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
DateFormatSymbols
*
formatDataToAdopt
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
UnicodeString
&
pattern
const
DateFormatSymbols
&
formatData
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
SimpleDateFormat
&
)
;
SimpleDateFormat
&
operator
=
(
const
SimpleDateFormat
&
)
;
virtual
~
SimpleDateFormat
(
)
;
virtual
SimpleDateFormat
*
clone
(
)
const
override
;
virtual
bool
operator
=
=
(
const
Format
&
other
)
const
override
;
using
DateFormat
:
:
format
;
virtual
UnicodeString
&
format
(
Calendar
&
cal
UnicodeString
&
appendTo
FieldPosition
&
pos
)
const
override
;
virtual
UnicodeString
&
format
(
Calendar
&
cal
UnicodeString
&
appendTo
FieldPositionIterator
*
posIter
UErrorCode
&
status
)
const
override
;
using
DateFormat
:
:
parse
;
virtual
void
parse
(
const
UnicodeString
&
text
Calendar
&
cal
ParsePosition
&
pos
)
const
override
;
virtual
void
set2DigitYearStart
(
UDate
d
UErrorCode
&
status
)
;
UDate
get2DigitYearStart
(
UErrorCode
&
status
)
const
;
virtual
UnicodeString
&
toPattern
(
UnicodeString
&
result
)
const
;
virtual
UnicodeString
&
toLocalizedPattern
(
UnicodeString
&
result
UErrorCode
&
status
)
const
;
virtual
void
applyPattern
(
const
UnicodeString
&
pattern
)
;
virtual
void
applyLocalizedPattern
(
const
UnicodeString
&
pattern
UErrorCode
&
status
)
;
virtual
const
DateFormatSymbols
*
getDateFormatSymbols
(
void
)
const
;
virtual
void
adoptDateFormatSymbols
(
DateFormatSymbols
*
newFormatSymbols
)
;
virtual
void
setDateFormatSymbols
(
const
DateFormatSymbols
&
newFormatSymbols
)
;
static
UClassID
U_EXPORT2
getStaticClassID
(
void
)
;
virtual
UClassID
getDynamicClassID
(
void
)
const
override
;
virtual
void
adoptCalendar
(
Calendar
*
calendarToAdopt
)
override
;
virtual
void
adoptTimeZoneFormat
(
TimeZoneFormat
*
timeZoneFormatToAdopt
)
;
virtual
void
setTimeZoneFormat
(
const
TimeZoneFormat
&
newTimeZoneFormat
)
;
virtual
const
TimeZoneFormat
*
getTimeZoneFormat
(
void
)
const
;
virtual
void
setContext
(
UDisplayContext
value
UErrorCode
&
status
)
override
;
void
adoptNumberFormat
(
NumberFormat
*
formatToAdopt
)
override
;
void
adoptNumberFormat
(
const
UnicodeString
&
fields
NumberFormat
*
formatToAdopt
UErrorCode
&
status
)
;
const
NumberFormat
*
getNumberFormatForField
(
char16_t
field
)
const
;
#
ifndef
U_HIDE_INTERNAL_API
UBool
isFieldUnitIgnored
(
UCalendarDateFields
field
)
const
;
static
UBool
isFieldUnitIgnored
(
const
UnicodeString
&
pattern
UCalendarDateFields
field
)
;
const
Locale
&
getSmpFmtLocale
(
void
)
const
;
#
endif
private
:
friend
class
DateFormat
;
friend
class
DateIntervalFormat
;
void
initializeDefaultCentury
(
void
)
;
void
initializeBooleanAttributes
(
void
)
;
SimpleDateFormat
(
)
=
delete
;
SimpleDateFormat
(
EStyle
timeStyle
EStyle
dateStyle
const
Locale
&
locale
UErrorCode
&
status
)
;
SimpleDateFormat
(
const
Locale
&
locale
UErrorCode
&
status
)
;
UnicodeString
&
_format
(
Calendar
&
cal
UnicodeString
&
appendTo
FieldPositionHandler
&
handler
UErrorCode
&
status
)
const
;
void
subFormat
(
UnicodeString
&
appendTo
char16_t
ch
int32_t
count
UDisplayContext
capitalizationContext
int32_t
fieldNum
char16_t
fieldToOutput
FieldPositionHandler
&
handler
Calendar
&
cal
UErrorCode
&
status
)
const
;
void
zeroPaddingNumber
(
const
NumberFormat
*
currentNumberFormat
UnicodeString
&
appendTo
int32_t
value
int32_t
minDigits
int32_t
maxDigits
)
const
;
static
UBool
isNumeric
(
char16_t
formatChar
int32_t
count
)
;
static
UBool
isAtNumericField
(
const
UnicodeString
&
pattern
int32_t
patternOffset
)
;
static
UBool
isAfterNonNumericField
(
const
UnicodeString
&
pattern
int32_t
patternOffset
)
;
Calendar
*
initializeCalendar
(
TimeZone
*
adoptZone
const
Locale
&
locale
UErrorCode
&
status
)
;
void
construct
(
EStyle
timeStyle
EStyle
dateStyle
const
Locale
&
locale
UErrorCode
&
status
)
;
void
initialize
(
const
Locale
&
locale
UErrorCode
&
status
)
;
int32_t
matchString
(
const
UnicodeString
&
text
int32_t
start
UCalendarDateFields
field
const
UnicodeString
*
stringArray
int32_t
stringArrayCount
const
UnicodeString
*
monthPattern
Calendar
&
cal
)
const
;
int32_t
matchAlphaMonthStrings
(
const
UnicodeString
&
text
int32_t
start
const
UnicodeString
*
wideStringArray
const
UnicodeString
*
shortStringArray
int32_t
stringArrayCount
Calendar
&
cal
)
const
;
int32_t
matchQuarterString
(
const
UnicodeString
&
text
int32_t
start
UCalendarDateFields
field
const
UnicodeString
*
stringArray
int32_t
stringArrayCount
Calendar
&
cal
)
const
;
int32_t
matchDayPeriodStrings
(
const
UnicodeString
&
text
int32_t
start
const
UnicodeString
*
stringArray
int32_t
stringArrayCount
int32_t
&
dayPeriod
)
const
;
static
UBool
matchLiterals
(
const
UnicodeString
&
pattern
int32_t
&
patternOffset
const
UnicodeString
&
text
int32_t
&
textOffset
UBool
whitespaceLenient
UBool
partialMatchLenient
UBool
oldLeniency
)
;
int32_t
subParse
(
const
UnicodeString
&
text
int32_t
&
start
char16_t
ch
int32_t
count
UBool
obeyCount
UBool
allowNegative
UBool
ambiguousYear
[
]
int32_t
&
saveHebrewMonth
Calendar
&
cal
int32_t
patLoc
MessageFormat
*
numericLeapMonthFormatter
UTimeZoneFormatTimeType
*
tzTimeType
int32_t
*
dayPeriod
=
nullptr
)
const
;
void
parseInt
(
const
UnicodeString
&
text
Formattable
&
number
ParsePosition
&
pos
UBool
allowNegative
const
NumberFormat
*
fmt
)
const
;
void
parseInt
(
const
UnicodeString
&
text
Formattable
&
number
int32_t
maxDigits
ParsePosition
&
pos
UBool
allowNegative
const
NumberFormat
*
fmt
)
const
;
int32_t
checkIntSuffix
(
const
UnicodeString
&
text
int32_t
start
int32_t
patLoc
UBool
isNegative
)
const
;
int32_t
countDigits
(
const
UnicodeString
&
text
int32_t
start
int32_t
end
)
const
;
static
void
translatePattern
(
const
UnicodeString
&
originalPattern
UnicodeString
&
translatedPattern
const
UnicodeString
&
from
const
UnicodeString
&
to
UErrorCode
&
status
)
;
void
parseAmbiguousDatesAsAfter
(
UDate
startDate
UErrorCode
&
status
)
;
int32_t
compareSimpleAffix
(
const
UnicodeString
&
affix
const
UnicodeString
&
input
int32_t
pos
)
const
;
int32_t
skipPatternWhiteSpace
(
const
UnicodeString
&
text
int32_t
pos
)
const
;
int32_t
skipUWhiteSpace
(
const
UnicodeString
&
text
int32_t
pos
)
const
;
void
initSimpleNumberFormatter
(
UErrorCode
&
status
)
;
void
initNumberFormatters
(
const
Locale
&
locale
UErrorCode
&
status
)
;
void
processOverrideString
(
const
Locale
&
locale
const
UnicodeString
&
str
int8_t
type
UErrorCode
&
status
)
;
static
const
UCalendarDateFields
fgPatternIndexToCalendarField
[
]
;
static
const
UDateFormatField
fgPatternIndexToDateFormatField
[
]
;
TimeZoneFormat
*
tzFormat
(
UErrorCode
&
status
)
const
;
const
NumberFormat
*
getNumberFormatByIndex
(
UDateFormatField
index
)
const
;
static
const
int32_t
fgCalendarFieldToLevel
[
]
;
static
int32_t
getLevelFromChar
(
char16_t
ch
)
;
static
UBool
isSyntaxChar
(
char16_t
ch
)
;
UnicodeString
fPattern
;
UnicodeString
fDateOverride
;
UnicodeString
fTimeOverride
;
Locale
fLocale
;
DateFormatSymbols
*
fSymbols
=
nullptr
;
TimeZoneFormat
*
fTimeZoneFormat
=
nullptr
;
UDate
fDefaultCenturyStart
;
UBool
fHasMinute
;
UBool
fHasSecond
;
UBool
fHasHanYearChar
;
void
parsePattern
(
)
;
int32_t
fDefaultCenturyStartYear
;
struct
NSOverride
:
public
UMemory
{
const
SharedNumberFormat
*
snf
;
int32_t
hash
;
NSOverride
*
next
;
void
free
(
)
;
NSOverride
(
)
:
snf
(
nullptr
)
hash
(
0
)
next
(
nullptr
)
{
}
~
NSOverride
(
)
;
}
;
const
SharedNumberFormat
*
*
fSharedNumberFormatters
=
nullptr
;
const
number
:
:
SimpleNumberFormatter
*
fSimpleNumberFormatter
=
nullptr
;
UBool
fHaveDefaultCentury
;
const
BreakIterator
*
fCapitalizationBrkIter
=
nullptr
;
}
;
inline
UDate
SimpleDateFormat
:
:
get2DigitYearStart
(
UErrorCode
&
)
const
{
return
fDefaultCenturyStart
;
}
U_NAMESPACE_END
#
endif
#
endif
#
endif
