#
include
"
gtest
/
gtest
.
h
"
#
include
"
mozilla
/
intl
/
NumberParser
.
h
"
namespace
mozilla
:
:
intl
{
TEST
(
IntlNumberParser
Basic
)
{
UniquePtr
<
NumberParser
>
np
=
NumberParser
:
:
TryCreate
(
"
en
-
US
"
true
)
.
unwrap
(
)
;
auto
result
=
np
-
>
ParseDouble
(
MakeStringSpan
(
u
"
1
234
.
56
"
)
)
;
ASSERT_TRUE
(
result
.
isOk
(
)
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
first
1234
.
56
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
second
8
)
;
np
=
NumberParser
:
:
TryCreate
(
"
en
-
US
"
false
)
.
unwrap
(
)
;
result
=
np
-
>
ParseDouble
(
MakeStringSpan
(
u
"
1
234
.
56
"
)
)
;
ASSERT_TRUE
(
result
.
isOk
(
)
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
first
1
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
second
1
)
;
np
=
NumberParser
:
:
TryCreate
(
"
es
-
CR
"
true
)
.
unwrap
(
)
;
result
=
np
-
>
ParseDouble
(
MakeStringSpan
(
u
"
1234
56
"
)
)
;
ASSERT_TRUE
(
result
.
isOk
(
)
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
first
1234
.
56
)
;
ASSERT_EQ
(
result
.
unwrap
(
)
.
second
7
)
;
}
}
