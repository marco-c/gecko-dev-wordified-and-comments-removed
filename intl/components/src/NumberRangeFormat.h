#
ifndef
intl_components_NumberRangeFormat_h_
#
define
intl_components_NumberRangeFormat_h_
#
include
"
mozilla
/
intl
/
NumberFormat
.
h
"
#
include
"
mozilla
/
Result
.
h
"
#
include
"
mozilla
/
ResultVariant
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
<
stdint
.
h
>
#
include
<
string_view
>
#
include
"
unicode
/
utypes
.
h
"
struct
UFormattedNumberRange
;
struct
UNumberRangeFormatter
;
struct
UPluralRules
;
namespace
mozilla
:
:
intl
{
#
ifndef
U_HIDE_DRAFT_API
#
define
MOZ_INTL_HAS_NUMBER_RANGE_FORMAT
#
endif
struct
MOZ_STACK_CLASS
NumberRangeFormatOptions
:
public
NumberFormatOptions
{
enum
class
RangeCollapse
{
Auto
None
Unit
All
}
mRangeCollapse
=
RangeCollapse
:
:
Auto
;
enum
class
RangeIdentityFallback
{
SingleValue
ApproximatelyOrSingleValue
Approximately
Range
}
mRangeIdentityFallback
=
RangeIdentityFallback
:
:
SingleValue
;
}
;
class
NumberRangeFormat
final
{
public
:
enum
class
FormatError
{
InternalError
OutOfMemory
}
;
static
Result
<
UniquePtr
<
NumberRangeFormat
>
FormatError
>
TryCreate
(
std
:
:
string_view
aLocale
const
NumberRangeFormatOptions
&
aOptions
)
;
NumberRangeFormat
(
)
=
default
;
NumberRangeFormat
(
const
NumberRangeFormat
&
)
=
delete
;
NumberRangeFormat
&
operator
=
(
const
NumberRangeFormat
&
)
=
delete
;
#
ifdef
MOZ_INTL_HAS_NUMBER_RANGE_FORMAT
~
NumberRangeFormat
(
)
;
Result
<
std
:
:
u16string_view
FormatError
>
format
(
double
start
double
end
)
const
{
if
(
!
formatInternal
(
start
end
)
)
{
return
Err
(
FormatError
:
:
InternalError
)
;
}
return
formatResult
(
)
;
}
Result
<
int32_t
FormatError
>
selectForRange
(
double
start
double
end
char16_t
*
keyword
int32_t
keywordSize
const
UPluralRules
*
pluralRules
)
const
;
private
:
UNumberRangeFormatter
*
mNumberRangeFormatter
=
nullptr
;
UFormattedNumberRange
*
mFormattedNumberRange
=
nullptr
;
Result
<
Ok
FormatError
>
initialize
(
std
:
:
string_view
aLocale
const
NumberRangeFormatOptions
&
aOptions
)
;
[
[
nodiscard
]
]
bool
formatInternal
(
double
start
double
end
)
const
;
Result
<
std
:
:
u16string_view
FormatError
>
formatResult
(
)
const
;
#
endif
}
;
}
#
endif
