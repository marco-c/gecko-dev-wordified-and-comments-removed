#
include
"
mozilla
/
intl
/
ICU4CLibrary
.
h
"
#
include
"
unicode
/
putil
.
h
"
#
include
"
unicode
/
uclean
.
h
"
#
include
"
unicode
/
utypes
.
h
"
#
include
"
unicode
/
uversion
.
h
"
namespace
mozilla
:
:
intl
{
ICUResult
ICU4CLibrary
:
:
Initialize
(
)
{
#
if
!
MOZ_SYSTEM_ICU
u_setDataDirectory
(
"
"
)
;
#
endif
UErrorCode
status
=
U_ZERO_ERROR
;
u_init
(
&
status
)
;
return
ToICUResult
(
status
)
;
}
void
ICU4CLibrary
:
:
Cleanup
(
)
{
u_cleanup
(
)
;
}
ICUResult
ICU4CLibrary
:
:
SetMemoryFunctions
(
MemoryFunctions
aMemoryFunctions
)
{
UErrorCode
status
=
U_ZERO_ERROR
;
u_setMemoryFunctions
(
nullptr
aMemoryFunctions
.
mAllocFn
aMemoryFunctions
.
mReallocFn
aMemoryFunctions
.
mFreeFn
&
status
)
;
return
ToICUResult
(
status
)
;
}
Span
<
const
char
>
ICU4CLibrary
:
:
GetVersion
(
)
{
return
MakeStringSpan
(
U_ICU_VERSION
)
;
}
}
