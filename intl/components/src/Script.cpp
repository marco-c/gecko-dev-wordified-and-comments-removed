#
include
"
mozilla
/
intl
/
Script
.
h
"
#
include
"
unicode
/
uscript
.
h
"
namespace
mozilla
:
:
intl
{
ICUResult
Script
:
:
GetExtensions
(
char32_t
aCodePoint
ScriptExtensionVector
&
aExtensions
)
{
aExtensions
.
clear
(
)
;
UScriptCode
ext
[
kMaxScripts
]
;
UErrorCode
status
=
U_ZERO_ERROR
;
int32_t
len
=
uscript_getScriptExtensions
(
static_cast
<
UChar32
>
(
aCodePoint
)
ext
kMaxScripts
&
status
)
;
if
(
U_FAILURE
(
status
)
)
{
MOZ_DIAGNOSTIC_ASSERT
(
status
!
=
U_BUFFER_OVERFLOW_ERROR
)
;
return
Err
(
ToICUError
(
status
)
)
;
}
if
(
!
aExtensions
.
reserve
(
len
)
)
{
return
Err
(
ICUError
:
:
OutOfMemory
)
;
}
for
(
int32_t
i
=
0
;
i
<
len
;
i
+
+
)
{
aExtensions
.
infallibleAppend
(
ext
[
i
]
)
;
}
return
Ok
(
)
;
}
}
