#
include
"
CssAltContent
.
h
"
#
include
"
nsIContent
.
h
"
#
include
"
nsIFrame
.
h
"
namespace
mozilla
:
:
a11y
{
CssAltContent
:
:
CssAltContent
(
nsIContent
*
aContent
)
{
nsIFrame
*
frame
=
aContent
-
>
GetPrimaryFrame
(
)
;
if
(
!
frame
)
{
return
;
}
if
(
!
frame
-
>
IsReplaced
(
)
)
{
return
;
}
if
(
aContent
-
>
IsInNativeAnonymousSubtree
(
)
)
{
nsIContent
*
parent
=
aContent
-
>
GetParent
(
)
;
if
(
parent
&
&
(
parent
-
>
IsGeneratedContentContainerForBefore
(
)
|
|
parent
-
>
IsGeneratedContentContainerForAfter
(
)
|
|
parent
-
>
IsGeneratedContentContainerForMarker
(
)
)
)
{
frame
=
parent
-
>
GetPrimaryFrame
(
)
;
if
(
!
frame
)
{
return
;
}
}
}
mItems
=
frame
-
>
StyleContent
(
)
-
>
AltContentItems
(
)
;
}
void
CssAltContent
:
:
AppendToString
(
nsAString
&
aOut
)
{
for
(
const
auto
&
item
:
mItems
)
{
if
(
item
.
IsString
(
)
)
{
aOut
.
Append
(
NS_ConvertUTF8toUTF16
(
item
.
AsString
(
)
.
AsString
(
)
)
)
;
}
}
}
}
