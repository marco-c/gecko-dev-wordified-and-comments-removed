#
ifndef
mozilla_a11y_Pivot_h_
#
define
mozilla_a11y_Pivot_h_
#
include
<
stdint
.
h
>
#
include
"
Role
.
h
"
#
include
"
mozilla
/
dom
/
ChildIterator
.
h
"
#
include
"
AccessibleOrProxy
.
h
"
namespace
mozilla
{
namespace
a11y
{
class
Accessible
;
class
HyperTextAccessible
;
class
DocAccessible
;
class
PivotRule
{
public
:
virtual
uint16_t
Match
(
const
AccessibleOrProxy
&
aAccOrProxy
)
=
0
;
}
;
class
Pivot
final
{
public
:
explicit
Pivot
(
const
AccessibleOrProxy
&
aRoot
)
;
Pivot
(
)
=
delete
;
Pivot
(
const
Pivot
&
)
=
delete
;
Pivot
&
operator
=
(
const
Pivot
&
)
=
delete
;
~
Pivot
(
)
;
AccessibleOrProxy
Next
(
AccessibleOrProxy
&
aAnchor
PivotRule
&
aRule
bool
aIncludeStart
=
false
)
;
AccessibleOrProxy
Prev
(
AccessibleOrProxy
&
aAnchor
PivotRule
&
aRule
bool
aIncludeStart
=
false
)
;
AccessibleOrProxy
First
(
PivotRule
&
aRule
)
;
AccessibleOrProxy
Last
(
PivotRule
&
aRule
)
;
Accessible
*
NextText
(
Accessible
*
aAnchor
int32_t
*
aStartOffset
int32_t
*
aEndOffset
int32_t
aBoundaryType
)
;
Accessible
*
PrevText
(
Accessible
*
aAnchor
int32_t
*
aStartOffset
int32_t
*
aEndOffset
int32_t
aBoundaryType
)
;
AccessibleOrProxy
AtPoint
(
int32_t
aX
int32_t
aY
PivotRule
&
aRule
)
;
private
:
AccessibleOrProxy
AdjustStartPosition
(
AccessibleOrProxy
&
aAnchor
PivotRule
&
aRule
uint16_t
*
aFilterResult
)
;
AccessibleOrProxy
SearchForward
(
AccessibleOrProxy
&
aAnchor
PivotRule
&
aRule
bool
aSearchCurrent
)
;
AccessibleOrProxy
SearchBackward
(
AccessibleOrProxy
&
aAnchor
PivotRule
&
aRule
bool
aSearchCurrent
)
;
HyperTextAccessible
*
SearchForText
(
Accessible
*
aAnchor
bool
aBackward
)
;
AccessibleOrProxy
mRoot
;
}
;
class
PivotRoleRule
:
public
PivotRule
{
public
:
explicit
PivotRoleRule
(
role
aRole
)
;
explicit
PivotRoleRule
(
role
aRole
AccessibleOrProxy
&
aDirectDescendantsFrom
)
;
virtual
uint16_t
Match
(
const
AccessibleOrProxy
&
aAccOrProxy
)
override
;
protected
:
role
mRole
;
AccessibleOrProxy
mDirectDescendantsFrom
;
}
;
}
}
#
endif
