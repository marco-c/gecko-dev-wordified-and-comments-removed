#
ifndef
mozilla_a11y_FocusManager_h_
#
define
mozilla_a11y_FocusManager_h_
#
include
"
mozilla
/
RefPtr
.
h
"
class
nsINode
;
class
nsISupports
;
namespace
mozilla
{
namespace
dom
{
class
Document
;
}
namespace
a11y
{
class
Accessible
;
class
AccEvent
;
class
LocalAccessible
;
class
DocAccessible
;
class
DocAccessibleParent
;
class
FocusManager
{
public
:
virtual
~
FocusManager
(
)
;
LocalAccessible
*
FocusedLocalAccessible
(
)
const
;
Accessible
*
FocusedAccessible
(
)
const
;
bool
IsFocused
(
const
Accessible
*
aAccessible
)
const
{
return
FocusedAccessible
(
)
=
=
aAccessible
;
}
inline
bool
IsActiveItem
(
const
LocalAccessible
*
aAccessible
)
{
return
aAccessible
=
=
mActiveItem
;
}
nsINode
*
FocusedDOMNode
(
)
const
;
inline
bool
HasDOMFocus
(
const
nsINode
*
aNode
)
const
{
return
aNode
=
=
FocusedDOMNode
(
)
;
}
bool
IsFocusWithin
(
const
Accessible
*
aContainer
)
const
;
enum
FocusDisposition
{
eNone
eFocused
eContainsFocus
eContainedByFocus
}
;
FocusDisposition
IsInOrContainsFocus
(
const
LocalAccessible
*
aAccessible
)
const
;
bool
WasLastFocused
(
const
LocalAccessible
*
aAccessible
)
const
;
void
NotifyOfDOMFocus
(
nsISupports
*
aTarget
)
;
void
NotifyOfDOMBlur
(
nsISupports
*
aTarget
)
;
void
ActiveItemChanged
(
LocalAccessible
*
aItem
bool
aCheckIfActive
=
true
)
;
void
ForceFocusEvent
(
)
;
void
DispatchFocusEvent
(
DocAccessible
*
aDocument
LocalAccessible
*
aTarget
)
;
void
ProcessDOMFocus
(
nsINode
*
aTarget
)
;
void
ProcessFocusEvent
(
AccEvent
*
aEvent
)
;
#
ifdef
ANDROID
void
SetFocusedRemoteDoc
(
DocAccessibleParent
*
aDoc
)
{
mFocusedRemoteDoc
=
aDoc
;
}
bool
IsFocusedRemoteDoc
(
DocAccessibleParent
*
aDoc
)
{
return
mFocusedRemoteDoc
=
=
aDoc
;
}
#
endif
protected
:
FocusManager
(
)
;
private
:
FocusManager
(
const
FocusManager
&
)
;
FocusManager
&
operator
=
(
const
FocusManager
&
)
;
dom
:
:
Document
*
FocusedDOMDocument
(
)
const
;
private
:
RefPtr
<
LocalAccessible
>
mActiveItem
;
RefPtr
<
LocalAccessible
>
mLastFocus
;
RefPtr
<
LocalAccessible
>
mActiveARIAMenubar
;
#
ifdef
ANDROID
DocAccessibleParent
*
mFocusedRemoteDoc
=
nullptr
;
#
endif
}
;
}
}
#
endif
