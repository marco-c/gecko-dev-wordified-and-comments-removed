#
ifndef
mozilla_a11y_xpcAccessibilityService_h_
#
define
mozilla_a11y_xpcAccessibilityService_h_
#
include
"
nsIAccessibilityService
.
h
"
class
xpcAccessibilityService
:
public
nsIAccessibleRetrieval
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIACCESSIBILITYSERVICE
NS_DECL_NSIACCESSIBLERETRIEVAL
static
bool
IsInUse
(
)
{
return
gXPCAccessibilityService
?
gXPCAccessibilityService
-
>
mRefCnt
>
1
:
false
;
}
protected
:
virtual
~
xpcAccessibilityService
(
)
{
if
(
mShutdownTimer
)
{
mShutdownTimer
-
>
Cancel
(
)
;
mShutdownTimer
=
nullptr
;
}
gXPCAccessibilityService
=
nullptr
;
}
private
:
xpcAccessibilityService
(
)
{
}
;
nsCOMPtr
<
nsITimer
>
mShutdownTimer
;
static
xpcAccessibilityService
*
gXPCAccessibilityService
;
static
void
ShutdownCallback
(
nsITimer
*
aTimer
void
*
aClosure
)
;
friend
nsresult
NS_GetAccessibilityService
(
nsIAccessibilityService
*
*
aResult
)
;
}
;
#
define
NS_ACCESSIBILITY_SERVICE_CID
\
{
0x3b265b69
0xf813
0x48ff
{
0x88
0x0d
0xd8
0x8d
0x10
0x1a
0xf4
0x04
}
}
extern
nsresult
NS_GetAccessibilityService
(
nsIAccessibilityService
*
*
aResult
)
;
#
endif
