#
include
"
DocAccessibleChild
.
h
"
#
include
"
Accessible
-
inl
.
h
"
#
include
"
mozilla
/
a11y
/
PlatformChild
.
h
"
#
include
"
mozilla
/
ClearOnShutdown
.
h
"
namespace
mozilla
{
namespace
a11y
{
static
StaticAutoPtr
<
PlatformChild
>
sPlatformChild
;
DocAccessibleChild
:
:
DocAccessibleChild
(
DocAccessible
*
aDoc
)
:
DocAccessibleChildBase
(
aDoc
)
{
MOZ_COUNT_CTOR_INHERITED
(
DocAccessibleChild
DocAccessibleChildBase
)
;
if
(
!
sPlatformChild
)
{
sPlatformChild
=
new
PlatformChild
(
)
;
ClearOnShutdown
(
&
sPlatformChild
ShutdownPhase
:
:
Shutdown
)
;
}
}
DocAccessibleChild
:
:
~
DocAccessibleChild
(
)
{
MOZ_COUNT_DTOR_INHERITED
(
DocAccessibleChild
DocAccessibleChildBase
)
;
}
void
DocAccessibleChild
:
:
SendCOMProxy
(
const
IAccessibleHolder
&
aProxy
)
{
int32_t
msaaID
=
AccessibleWrap
:
:
GetChildIDFor
(
mDoc
)
;
IAccessibleHolder
parentProxy
;
PDocAccessibleChild
:
:
SendCOMProxy
(
msaaID
aProxy
&
parentProxy
)
;
mParentProxy
.
reset
(
parentProxy
.
Release
(
)
)
;
}
}
}
