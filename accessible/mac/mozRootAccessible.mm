#
include
"
RootAccessibleWrap
.
h
"
#
import
"
mozRootAccessible
.
h
"
#
import
"
mozView
.
h
"
#
include
"
nsObjCExceptions
.
h
"
using
namespace
mozilla
:
:
a11y
;
static
id
<
mozAccessible
mozView
>
getNativeViewFromRootAccessible
(
Accessible
*
aAccessible
)
{
RootAccessibleWrap
*
root
=
static_cast
<
RootAccessibleWrap
*
>
(
aAccessible
-
>
AsRoot
(
)
)
;
id
<
mozAccessible
mozView
>
nativeView
=
nil
;
root
-
>
GetNativeWidget
(
(
void
*
*
)
&
nativeView
)
;
return
nativeView
;
}
#
pragma
mark
-
implementation
mozRootAccessible
-
(
id
)
initWithAccessible
:
(
mozilla
:
:
a11y
:
:
AccessibleOrProxy
)
aAccOrProxy
{
NS_OBJC_BEGIN_TRY_ABORT_BLOCK_NIL
;
MOZ_ASSERT
(
!
aAccOrProxy
.
IsProxy
(
)
"
mozRootAccessible
is
never
a
proxy
"
)
;
mParallelView
=
getNativeViewFromRootAccessible
(
aAccOrProxy
.
AsAccessible
(
)
)
;
return
[
super
initWithAccessible
:
aAccOrProxy
]
;
NS_OBJC_END_TRY_ABORT_BLOCK_NIL
;
}
-
(
NSNumber
*
)
moxMain
{
return
(
[
[
self
moxWindow
]
isMainWindow
]
)
;
}
-
(
NSNumber
*
)
moxMinimized
{
return
(
[
[
self
moxWindow
]
isMiniaturized
]
)
;
}
-
(
id
)
moxUnignoredParent
{
NS_OBJC_BEGIN_TRY_ABORT_BLOCK_NIL
;
return
[
[
self
representedView
]
accessibilityAttributeValue
:
NSAccessibilityParentAttribute
]
;
NS_OBJC_END_TRY_ABORT_BLOCK_NIL
;
}
-
(
BOOL
)
hasRepresentedView
{
return
YES
;
}
-
(
id
)
representedView
{
NS_OBJC_BEGIN_TRY_ABORT_BLOCK_NIL
;
MOZ_ASSERT
(
mParallelView
"
root
accessible
does
not
have
a
native
parallel
view
.
"
)
;
return
mParallelView
;
NS_OBJC_END_TRY_ABORT_BLOCK_NIL
;
}
-
(
BOOL
)
isRoot
{
return
YES
;
}
end
