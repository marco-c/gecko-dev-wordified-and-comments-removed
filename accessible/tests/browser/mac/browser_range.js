"
use
strict
"
;
loadScripts
(
{
name
:
"
role
.
js
"
dir
:
MOCHITESTS_DIR
}
{
name
:
"
states
.
js
"
dir
:
MOCHITESTS_DIR
}
)
;
addAccessibleTask
(
<
input
id
=
"
range
"
type
=
"
range
"
min
=
"
1
"
max
=
"
100
"
value
=
"
1
"
step
=
"
10
"
>
async
(
browser
accDoc
)
=
>
{
let
range
=
getNativeInterface
(
accDoc
"
range
"
)
;
is
(
range
.
getAttributeValue
(
"
AXRole
"
)
"
AXSlider
"
"
Correct
AXSlider
role
"
)
;
is
(
range
.
getAttributeValue
(
"
AXValue
"
)
1
"
Correct
initial
value
"
)
;
let
actions
=
range
.
actionNames
;
ok
(
actions
.
includes
(
"
AXDecrement
"
)
"
Has
decrement
action
"
)
;
ok
(
actions
.
includes
(
"
AXIncrement
"
)
"
Has
increment
action
"
)
;
let
evt
=
waitForMacEvent
(
"
AXValueChanged
"
)
;
range
.
performAction
(
"
AXIncrement
"
)
;
await
evt
;
is
(
range
.
getAttributeValue
(
"
AXValue
"
)
11
"
Correct
increment
value
"
)
;
evt
=
waitForMacEvent
(
"
AXValueChanged
"
)
;
range
.
performAction
(
"
AXDecrement
"
)
;
await
evt
;
is
(
range
.
getAttributeValue
(
"
AXValue
"
)
1
"
Correct
decrement
value
"
)
;
evt
=
waitForMacEvent
(
"
AXValueChanged
"
)
;
await
SpecialPowers
.
spawn
(
browser
[
]
(
)
=
>
{
content
.
document
.
getElementById
(
"
range
"
)
.
value
=
41
;
}
)
;
await
evt
;
is
(
range
.
getAttributeValue
(
"
AXValue
"
)
41
"
Correct
value
from
content
change
"
)
;
}
)
;
