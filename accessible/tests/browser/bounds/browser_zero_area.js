"
use
strict
"
;
async
function
testContentBounds
(
browser
acc
expectedWidth
expectedHeight
)
{
let
[
expectedX
expectedY
]
=
await
getContentBoundsForDOMElm
(
browser
getAccessibleDOMNodeID
(
acc
)
)
;
let
contentDPR
=
await
getContentDPR
(
browser
)
;
let
[
x
y
width
height
]
=
getBounds
(
acc
contentDPR
)
;
let
prettyAccName
=
prettyName
(
acc
)
;
is
(
x
expectedX
"
Wrong
x
coordinate
of
"
+
prettyAccName
)
;
is
(
y
expectedY
"
Wrong
y
coordinate
of
"
+
prettyAccName
)
;
is
(
width
expectedWidth
"
Wrong
width
of
"
+
prettyAccName
)
;
is
(
height
expectedHeight
"
Wrong
height
of
"
+
prettyAccName
)
;
}
addAccessibleTask
(
<
div
id
=
"
a1
"
style
=
"
height
:
100px
;
width
:
100px
;
background
:
green
;
"
>
<
/
div
>
<
div
id
=
"
a2
"
style
=
"
height
:
100px
;
width
:
100px
;
background
:
green
;
"
>
<
div
style
=
"
height
:
300px
;
max
-
width
:
300px
;
background
:
blue
;
"
>
<
/
div
>
<
/
div
>
<
div
id
=
"
a3
"
style
=
"
height
:
0
;
width
:
0
;
"
>
<
div
style
=
"
height
:
200px
;
width
:
200px
;
background
:
green
;
"
>
<
/
div
>
<
/
div
>
async
function
(
browser
accDoc
)
{
const
a1
=
findAccessibleChildByID
(
accDoc
"
a1
"
)
;
const
a2
=
findAccessibleChildByID
(
accDoc
"
a2
"
)
;
const
a3
=
findAccessibleChildByID
(
accDoc
"
a3
"
)
;
await
testContentBounds
(
browser
a1
100
100
)
;
await
testContentBounds
(
browser
a2
100
100
)
;
await
testContentBounds
(
browser
a3
200
200
)
;
}
)
;
addAccessibleTask
(
<
br
>
<
div
id
=
"
a
"
style
=
"
height
:
0
;
width
:
0
;
"
>
<
/
div
>
async
function
(
browser
accDoc
)
{
const
a
=
findAccessibleChildByID
(
accDoc
"
a
"
)
;
await
testContentBounds
(
browser
a
0
0
)
;
}
)
;
addAccessibleTask
(
<
input
type
=
"
radio
"
id
=
"
radio
"
style
=
"
left
:
-
671091em
;
position
:
absolute
;
"
>
async
function
(
browser
accDoc
)
{
const
radio
=
findAccessibleChildByID
(
accDoc
"
radio
"
)
;
const
contentDPR
=
await
getContentDPR
(
browser
)
;
const
[
x
y
width
height
]
=
getBounds
(
radio
contentDPR
)
;
Assert
.
less
(
x
0
"
X
coordinate
should
be
negative
"
)
;
Assert
.
greater
(
y
0
"
Y
coordinate
should
be
positive
"
)
;
Assert
.
greater
(
width
0
"
Width
should
be
positive
"
)
;
Assert
.
greater
(
height
0
"
Height
should
be
positive
"
)
;
}
)
;
addAccessibleTask
(
<
aside
style
=
"
height
:
0
;
display
:
flex
;
align
-
items
:
flex
-
end
;
"
>
<
div
id
=
"
inner0
"
>
testing
<
/
div
>
<
/
aside
>
<
aside
style
=
"
height
:
1
;
display
:
flex
;
align
-
items
:
flex
-
end
;
"
>
<
div
id
=
"
inner1
"
>
testing
<
/
div
>
<
/
aside
>
async
function
(
browser
docAcc
)
{
await
testBoundsWithContent
(
docAcc
"
inner0
"
browser
)
;
await
testBoundsWithContent
(
docAcc
"
inner1
"
browser
)
;
}
{
chrome
:
true
topLevel
:
true
remoteIframe
:
true
}
)
;
addAccessibleTask
(
<
span
id
=
"
span
"
tabindex
=
"
-
1
"
>
<
div
id
=
"
div
"
>
Testing
<
/
div
>
<
/
span
>
async
function
(
browser
docAcc
)
{
await
testBoundsWithContent
(
docAcc
"
span
"
browser
)
;
await
testBoundsWithContent
(
docAcc
"
div
"
browser
)
;
}
{
chrome
:
true
topLevel
:
true
remoteIframe
:
true
}
)
;
