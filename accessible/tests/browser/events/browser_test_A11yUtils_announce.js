"
use
strict
"
;
loadScripts
(
{
name
:
"
role
.
js
"
dir
:
MOCHITESTS_DIR
}
)
;
async
function
runTests
(
)
{
const
alert
=
document
.
getElementById
(
"
a11y
-
announcement
"
)
;
let
alerted
=
waitForEvent
(
EVENT_ALERT
alert
)
;
A11yUtils
.
announce
(
"
first
"
)
;
let
event
=
await
alerted
;
const
alertAcc
=
event
.
accessible
;
is
(
alertAcc
.
role
ROLE_ALERT
)
;
ok
(
!
alertAcc
.
name
)
;
is
(
alertAcc
.
childCount
1
)
;
is
(
alertAcc
.
firstChild
.
name
"
first
"
)
;
alerted
=
waitForEvent
(
EVENT_ALERT
alertAcc
)
;
A11yUtils
.
announce
(
"
second
"
)
;
event
=
await
alerted
;
ok
(
!
alertAcc
.
name
)
;
is
(
alertAcc
.
childCount
1
)
;
is
(
alertAcc
.
firstChild
.
name
"
second
"
)
;
}
addAccessibleTask
(
runTests
)
;
