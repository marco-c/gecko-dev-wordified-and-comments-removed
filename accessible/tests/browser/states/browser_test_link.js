"
use
strict
"
;
async
function
runTests
(
browser
accDoc
)
{
let
getAcc
=
id
=
>
findAccessibleChildByID
(
accDoc
id
)
;
testStates
(
getAcc
(
"
link_traversed
"
)
0
0
STATE_TRAVERSED
)
;
let
onStateChanged
=
waitForEvent
(
EVENT_STATE_CHANGE
"
link_traversed
"
)
;
let
newTabOpened
=
BrowserTestUtils
.
waitForNewTab
(
gBrowser
)
;
await
BrowserTestUtils
.
synthesizeMouse
(
"
#
link_traversed
"
1
1
{
ctrlKey
:
!
MAC
metaKey
:
MAC
}
browser
)
;
await
onStateChanged
;
testStates
(
getAcc
(
"
link_traversed
"
)
STATE_TRAVERSED
)
;
let
newTab
=
await
newTabOpened
;
gBrowser
.
removeTab
(
newTab
)
;
}
addAccessibleTask
(
<
a
id
=
"
link_traversed
"
href
=
"
https
:
/
/
www
.
example
.
com
/
{
Date
.
now
(
)
}
"
target
=
"
_top
"
>
example
.
com
<
/
a
>
runTests
)
;
