"
use
strict
"
;
loadScripts
(
{
name
:
"
role
.
js
"
dir
:
MOCHITESTS_DIR
}
)
;
addAccessibleTask
(
<
div
id
=
"
container
"
>
<
div
id
=
"
scrollarea
"
style
=
"
overflow
:
auto
;
"
>
<
input
>
<
/
div
>
<
/
div
>
<
div
id
=
"
container2
"
>
<
div
id
=
"
scrollarea2
"
style
=
"
overflow
:
hidden
;
"
>
<
/
div
>
<
/
div
>
async
function
(
browser
accDoc
)
{
const
id1
=
"
container
"
;
const
id2
=
"
container2
"
;
const
container
=
findAccessibleChildByID
(
accDoc
id1
)
;
const
container2
=
findAccessibleChildByID
(
accDoc
id2
)
;
let
tree
=
{
SECTION
:
[
{
SECTION
:
[
{
ENTRY
:
[
]
}
]
}
]
}
;
testAccessibleTree
(
container
tree
)
;
let
onReorder
=
waitForEvent
(
EVENT_REORDER
id1
)
;
await
ContentTask
.
spawn
(
browser
id1
id
=
>
{
let
doc
=
content
.
document
;
doc
.
getElementById
(
"
scrollarea
"
)
.
style
.
width
=
"
20px
"
;
doc
.
getElementById
(
id
)
.
appendChild
(
doc
.
createElement
(
"
input
"
)
)
;
}
)
;
await
onReorder
;
tree
=
{
SECTION
:
[
{
SECTION
:
[
{
ENTRY
:
[
]
}
]
}
{
ENTRY
:
[
]
}
]
}
;
testAccessibleTree
(
container
tree
)
;
tree
=
{
SECTION
:
[
{
SECTION
:
[
]
}
]
}
;
testAccessibleTree
(
container2
tree
)
;
onReorder
=
waitForEvent
(
EVENT_REORDER
id2
)
;
await
invokeSetStyle
(
browser
"
scrollarea2
"
"
overflow
"
"
auto
"
)
;
await
onReorder
;
tree
=
{
SECTION
:
[
{
SECTION
:
[
]
}
]
}
;
testAccessibleTree
(
container2
tree
)
;
}
)
;
