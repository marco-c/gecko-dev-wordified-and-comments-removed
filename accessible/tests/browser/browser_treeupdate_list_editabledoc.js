'
use
strict
'
;
loadScripts
(
{
name
:
'
role
.
js
'
dir
:
MOCHITESTS_DIR
}
)
;
addAccessibleTask
(
'
<
ol
id
=
"
list
"
>
<
/
ol
>
'
function
*
(
browser
accDoc
)
{
let
list
=
findAccessibleChildByID
(
accDoc
'
list
'
)
;
testAccessibleTree
(
list
{
role
:
ROLE_LIST
children
:
[
]
}
)
;
yield
invokeSetAttribute
(
browser
'
body
'
'
contentEditable
'
'
true
'
)
;
let
onReorder
=
waitForEvent
(
EVENT_REORDER
'
list
'
)
;
yield
ContentTask
.
spawn
(
browser
{
}
(
)
=
>
{
let
li
=
content
.
document
.
createElement
(
'
li
'
)
;
li
.
textContent
=
'
item
'
;
content
.
document
.
getElementById
(
'
list
'
)
.
appendChild
(
li
)
;
}
)
;
yield
onReorder
;
testAccessibleTree
(
list
{
role
:
ROLE_LIST
children
:
[
{
role
:
ROLE_LISTITEM
children
:
[
{
role
:
ROLE_STATICTEXT
name
:
"
1
.
"
children
:
[
]
}
{
role
:
ROLE_TEXT_LEAF
children
:
[
]
}
]
}
]
}
)
;
}
)
;
