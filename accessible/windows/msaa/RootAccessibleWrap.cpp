#
include
"
RootAccessibleWrap
.
h
"
#
include
"
Compatibility
.
h
"
#
include
"
mozilla
/
PresShell
.
h
"
#
include
"
nsCoreUtils
.
h
"
#
include
"
nsWinUtils
.
h
"
using
namespace
mozilla
;
using
namespace
mozilla
:
:
a11y
;
RootAccessibleWrap
:
:
RootAccessibleWrap
(
dom
:
:
Document
*
aDocument
PresShell
*
aPresShell
)
:
MsaaRootAccessible
(
aDocument
aPresShell
)
{
}
RootAccessibleWrap
:
:
~
RootAccessibleWrap
(
)
{
}
void
RootAccessibleWrap
:
:
DocumentActivated
(
DocAccessible
*
aDocument
)
{
if
(
Compatibility
:
:
IsDolphin
(
)
&
&
nsCoreUtils
:
:
IsTopLevelContentDocInProcess
(
aDocument
-
>
DocumentNode
(
)
)
)
{
MOZ_ASSERT
(
XRE_IsParentProcess
(
)
)
;
uint32_t
count
=
mChildDocuments
.
Length
(
)
;
for
(
uint32_t
idx
=
0
;
idx
<
count
;
idx
+
+
)
{
DocAccessible
*
childDoc
=
mChildDocuments
[
idx
]
;
HWND
childDocHWND
=
static_cast
<
HWND
>
(
childDoc
-
>
GetNativeWindow
(
)
)
;
if
(
childDoc
!
=
aDocument
)
nsWinUtils
:
:
HideNativeWindow
(
childDocHWND
)
;
else
nsWinUtils
:
:
ShowNativeWindow
(
childDocHWND
)
;
}
}
}
