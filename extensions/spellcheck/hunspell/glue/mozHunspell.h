#
ifndef
mozHunspell_h__
#
define
mozHunspell_h__
#
include
"
RLBoxHunspell
.
h
"
#
include
"
mozISpellCheckingEngine
.
h
"
#
include
"
mozIPersonalDictionary
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCOMArray
.
h
"
#
include
"
nsHashKeys
.
h
"
#
include
"
nsIMemoryReporter
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsIURI
.
h
"
#
include
"
mozilla
/
Encoding
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
"
nsInterfaceHashtable
.
h
"
#
include
"
nsWeakReference
.
h
"
#
include
"
nsTHashMap
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
mozHunspellAllocator
.
h
"
#
define
MOZ_HUNSPELL_CONTRACTID
"
mozilla
.
org
/
spellchecker
/
engine
;
1
"
#
define
MOZ_HUNSPELL_CID
\
{
\
0x56c778e4
0x1bee
0x45f3
{
\
0xa6
0x89
0x88
0x66
0x92
0xa9
0x7f
0xe7
\
}
\
}
class
mozHunspell
final
:
public
mozISpellCheckingEngine
public
nsIObserver
public
nsSupportsWeakReference
public
nsIMemoryReporter
{
public
:
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_MOZISPELLCHECKINGENGINE
NS_DECL_NSIOBSERVER
NS_DECL_CYCLE_COLLECTION_CLASS_AMBIGUOUS
(
mozHunspell
mozISpellCheckingEngine
)
mozHunspell
(
)
;
nsresult
Init
(
)
;
void
LoadDictionaryList
(
bool
aNotifyChildProcesses
)
;
NS_DECL_NSIMEMORYREPORTER
protected
:
virtual
~
mozHunspell
(
)
;
void
DictionariesChanged
(
bool
aNotifyChildProcesses
)
;
nsCOMPtr
<
mozIPersonalDictionary
>
mPersonalDictionary
;
nsInterfaceHashtable
<
nsStringHashKey
nsIURI
>
mDictionaries
;
nsCOMArray
<
nsIFile
>
mDynamicDirectories
;
nsInterfaceHashtable
<
nsStringHashKey
nsIURI
>
mDynamicDictionaries
;
struct
DictionaryData
{
bool
mEnabled
=
true
;
mozilla
:
:
UniquePtr
<
mozilla
:
:
Encoder
>
mEncoder
;
mozilla
:
:
UniquePtr
<
mozilla
:
:
Decoder
>
mDecoder
;
mozilla
:
:
UniquePtr
<
RLBoxHunspell
>
mHunspell
;
nsCString
mAffixFileName
;
nsresult
ConvertCharset
(
const
nsAString
&
aStr
std
:
:
string
&
aDst
)
;
}
;
nsTHashMap
<
nsCStringHashKey
DictionaryData
>
mHunspells
;
}
;
#
endif
