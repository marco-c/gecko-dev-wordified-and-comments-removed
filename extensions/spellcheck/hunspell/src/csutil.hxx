#
ifndef
__CSUTILHXX__
#
define
__CSUTILHXX__
#
include
"
w_char
.
hxx
"
#
define
NOCAP
0
#
define
INITCAP
1
#
define
ALLCAP
2
#
define
HUHCAP
3
#
define
HUHINITCAP
4
#
define
SPELL_ENCODING
"
ISO8859
-
1
"
#
define
SPELL_KEYSTRING
"
qwertyuiop
|
asdfghjkl
|
zxcvbnm
"
#
define
MORPH_STEM
"
st
:
"
#
define
MORPH_ALLOMORPH
"
al
:
"
#
define
MORPH_POS
"
po
:
"
#
define
MORPH_DERI_PFX
"
dp
:
"
#
define
MORPH_INFL_PFX
"
ip
:
"
#
define
MORPH_TERM_PFX
"
tp
:
"
#
define
MORPH_DERI_SFX
"
ds
:
"
#
define
MORPH_INFL_SFX
"
is
:
"
#
define
MORPH_TERM_SFX
"
ts
:
"
#
define
MORPH_SURF_PFX
"
sp
:
"
#
define
MORPH_FREQ
"
fr
:
"
#
define
MORPH_PHON
"
ph
:
"
#
define
MORPH_HYPH
"
hy
:
"
#
define
MORPH_PART
"
pa
:
"
#
define
MORPH_FLAG
"
fl
:
"
#
define
MORPH_HENTRY
"
_H
:
"
#
define
MORPH_TAG_LEN
strlen
(
MORPH_STEM
)
#
define
MSEP_FLD
'
'
#
define
MSEP_REC
'
\
n
'
#
define
MSEP_ALT
'
\
v
'
#
define
DEFAULTFLAGS
65510
#
define
FORBIDDENWORD
65510
#
define
ONLYUPCASEFLAG
65511
#
define
HENTRY_DATA
(
h
)
(
h
-
>
var
?
(
(
h
-
>
var
&
H_OPT_ALIASM
)
?
\
get_stored_pointer
(
&
(
h
-
>
word
)
+
h
-
>
blen
+
1
)
:
&
(
h
-
>
word
)
+
h
-
>
blen
+
1
)
:
NULL
)
#
define
HENTRY_DATA2
(
h
)
(
h
-
>
var
?
(
(
h
-
>
var
&
H_OPT_ALIASM
)
?
\
get_stored_pointer
(
&
(
h
-
>
word
)
+
h
-
>
blen
+
1
)
:
&
(
h
-
>
word
)
+
h
-
>
blen
+
1
)
:
"
"
)
#
define
HENTRY_FIND
(
h
p
)
(
HENTRY_DATA
(
h
)
?
strstr
(
HENTRY_DATA
(
h
)
p
)
:
NULL
)
#
define
w_char_eq
(
a
b
)
(
(
(
a
)
.
l
=
=
(
b
)
.
l
)
&
&
(
(
a
)
.
h
=
=
(
b
)
.
h
)
)
char
*
u16_u8
(
char
*
dest
int
size
const
w_char
*
src
int
srclen
)
;
int
u8_u16
(
w_char
*
dest
int
size
const
char
*
src
)
;
void
flag_qsort
(
unsigned
short
flags
[
]
int
begin
int
end
)
;
int
flag_bsearch
(
unsigned
short
flags
[
]
unsigned
short
flag
int
right
)
;
void
mychomp
(
char
*
s
)
;
char
*
mystrdup
(
const
char
*
s
)
;
char
*
mystrcat
(
char
*
dest
const
char
*
st
int
max
)
;
char
*
myrevstrdup
(
const
char
*
s
)
;
char
*
mystrsep
(
char
*
*
sptr
const
char
delim
)
;
char
*
mystrsep2
(
char
*
*
sptr
const
char
delim
)
;
char
*
mystrrep
(
char
*
const
char
*
const
char
*
)
;
void
strlinecat
(
char
*
lines
const
char
*
s
)
;
int
line_tok
(
const
char
*
text
char
*
*
*
lines
char
breakchar
)
;
char
*
line_uniq
(
char
*
text
char
breakchar
)
;
char
*
line_uniq_app
(
char
*
*
text
char
breakchar
)
;
char
*
tr
(
char
*
text
char
oldc
char
newc
)
;
int
reverseword
(
char
*
)
;
int
reverseword_utf
(
char
*
)
;
int
uniqlist
(
char
*
*
list
int
n
)
;
void
freelist
(
char
*
*
*
list
int
n
)
;
struct
cs_info
{
unsigned
char
ccase
;
unsigned
char
clower
;
unsigned
char
cupper
;
}
;
struct
unicode_info
{
unsigned
short
c
;
unsigned
short
cupper
;
unsigned
short
clower
;
}
;
struct
unicode_info2
{
char
cletter
;
unsigned
short
cupper
;
unsigned
short
clower
;
}
;
int
initialize_utf_tbl
(
)
;
void
free_utf_tbl
(
)
;
unsigned
short
unicodetoupper
(
unsigned
short
c
int
langnum
)
;
unsigned
short
unicodetolower
(
unsigned
short
c
int
langnum
)
;
int
unicodeisalpha
(
unsigned
short
c
)
;
struct
enc_entry
{
const
char
*
enc_name
;
struct
cs_info
*
cs_table
;
}
;
struct
lang_map
{
const
char
*
lang
;
const
char
*
def_enc
;
int
num
;
}
;
struct
cs_info
*
get_current_cs
(
const
char
*
es
)
;
const
char
*
get_default_enc
(
const
char
*
lang
)
;
int
get_lang_num
(
const
char
*
lang
)
;
char
*
get_casechars
(
const
char
*
enc
)
;
void
enmkallcap
(
char
*
d
const
char
*
p
const
char
*
encoding
)
;
void
enmkallsmall
(
char
*
d
const
char
*
p
const
char
*
encoding
)
;
void
enmkinitcap
(
char
*
d
const
char
*
p
const
char
*
encoding
)
;
void
mkallcap
(
char
*
p
const
struct
cs_info
*
csconv
)
;
void
mkallsmall
(
char
*
p
const
struct
cs_info
*
csconv
)
;
void
mkinitcap
(
char
*
p
const
struct
cs_info
*
csconv
)
;
void
mkallsmall_utf
(
w_char
*
u
int
nc
int
langnum
)
;
void
mkallcap_utf
(
w_char
*
u
int
nc
int
langnum
)
;
int
get_captype
(
char
*
q
int
nl
cs_info
*
)
;
int
get_captype_utf8
(
w_char
*
q
int
nl
int
langnum
)
;
void
remove_ignored_chars_utf
(
char
*
word
unsigned
short
ignored_chars
[
]
int
ignored_len
)
;
void
remove_ignored_chars
(
char
*
word
char
*
ignored_chars
)
;
int
parse_string
(
char
*
line
char
*
*
out
int
ln
)
;
int
parse_array
(
char
*
line
char
*
*
out
unsigned
short
*
*
out_utf16
int
*
out_utf16_len
int
utf8
int
ln
)
;
int
fieldlen
(
const
char
*
r
)
;
char
*
copy_field
(
char
*
dest
const
char
*
morph
const
char
*
var
)
;
int
morphcmp
(
const
char
*
s
const
char
*
t
)
;
int
get_sfxcount
(
const
char
*
morph
)
;
void
store_pointer
(
char
*
dest
char
*
source
)
;
char
*
get_stored_pointer
(
char
*
s
)
;
#
endif
