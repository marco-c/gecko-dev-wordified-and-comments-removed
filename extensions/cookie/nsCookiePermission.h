#
ifndef
nsCookiePermission_h__
#
define
nsCookiePermission_h__
#
include
"
nsICookiePermission
.
h
"
#
include
"
nsIPermissionManager
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
mozIThirdPartyUtil
.
h
"
class
nsIPrefBranch
;
class
nsCookiePermission
final
:
public
nsICookiePermission
public
nsIObserver
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSICOOKIEPERMISSION
NS_DECL_NSIOBSERVER
static
already_AddRefed
<
nsICookiePermission
>
GetOrCreate
(
)
;
static
void
Shutdown
(
)
;
bool
Init
(
)
;
void
PrefChanged
(
nsIPrefBranch
*
const
char
*
)
;
private
:
nsCookiePermission
(
)
:
mCookiesLifetimePolicy
(
0
)
{
}
virtual
~
nsCookiePermission
(
)
{
}
bool
EnsureInitialized
(
)
{
return
(
mPermMgr
!
=
nullptr
&
&
mThirdPartyUtil
!
=
nullptr
)
|
|
Init
(
)
;
}
;
nsCOMPtr
<
nsIPermissionManager
>
mPermMgr
;
nsCOMPtr
<
mozIThirdPartyUtil
>
mThirdPartyUtil
;
uint8_t
mCookiesLifetimePolicy
;
}
;
#
endif
