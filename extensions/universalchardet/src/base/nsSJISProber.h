#
ifndef
nsSJISProber_h__
#
define
nsSJISProber_h__
#
include
"
nsCharSetProber
.
h
"
#
include
"
nsCodingStateMachine
.
h
"
#
include
"
JpCntx
.
h
"
#
include
"
CharDistribution
.
h
"
class
nsSJISProber
:
public
nsCharSetProber
{
public
:
nsSJISProber
(
)
{
mCodingSM
=
new
nsCodingStateMachine
(
&
SJISSMModel
)
;
Reset
(
)
;
}
virtual
~
nsSJISProber
(
void
)
{
delete
mCodingSM
;
}
nsProbingState
HandleData
(
const
char
*
aBuf
uint32_t
aLen
)
override
;
const
char
*
GetCharSetName
(
)
override
{
return
"
Shift_JIS
"
;
}
nsProbingState
GetState
(
void
)
override
{
return
mState
;
}
void
Reset
(
void
)
override
;
float
GetConfidence
(
void
)
override
;
protected
:
nsCodingStateMachine
*
mCodingSM
;
nsProbingState
mState
;
SJISContextAnalysis
mContextAnalyser
;
SJISDistributionAnalysis
mDistributionAnalyser
;
char
mLastChar
[
2
]
;
}
;
#
endif
