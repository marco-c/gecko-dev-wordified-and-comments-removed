#
include
"
WebBrowserPersistResourcesChild
.
h
"
#
include
"
WebBrowserPersistDocumentChild
.
h
"
#
include
"
mozilla
/
dom
/
PBrowserChild
.
h
"
namespace
mozilla
{
NS_IMPL_ISUPPORTS
(
WebBrowserPersistResourcesChild
nsIWebBrowserPersistResourceVisitor
)
WebBrowserPersistResourcesChild
:
:
WebBrowserPersistResourcesChild
(
)
{
}
WebBrowserPersistResourcesChild
:
:
~
WebBrowserPersistResourcesChild
(
)
{
}
NS_IMETHODIMP
WebBrowserPersistResourcesChild
:
:
VisitResource
(
nsIWebBrowserPersistDocument
*
aDocument
const
nsACString
&
aURI
)
{
nsCString
copiedURI
(
aURI
)
;
SendVisitResource
(
copiedURI
)
;
return
NS_OK
;
}
NS_IMETHODIMP
WebBrowserPersistResourcesChild
:
:
VisitDocument
(
nsIWebBrowserPersistDocument
*
aDocument
nsIWebBrowserPersistDocument
*
aSubDocument
)
{
auto
*
subActor
=
new
WebBrowserPersistDocumentChild
(
)
;
dom
:
:
PBrowserChild
*
grandManager
=
Manager
(
)
-
>
Manager
(
)
;
if
(
!
grandManager
-
>
SendPWebBrowserPersistDocumentConstructor
(
subActor
)
)
{
return
NS_ERROR_FAILURE
;
}
SendVisitDocument
(
subActor
)
;
subActor
-
>
Start
(
aSubDocument
)
;
return
NS_OK
;
}
NS_IMETHODIMP
WebBrowserPersistResourcesChild
:
:
EndVisit
(
nsIWebBrowserPersistDocument
*
aDocument
nsresult
aStatus
)
{
Send__delete__
(
this
aStatus
)
;
return
NS_OK
;
}
}
