#
ifndef
nsHtml5StreamListener_h
#
define
nsHtml5StreamListener_h
#
include
"
nsIStreamListener
.
h
"
#
include
"
nsIThreadRetargetableStreamListener
.
h
"
#
include
"
nsHtml5StreamParser
.
h
"
#
include
"
mozilla
/
ReentrantMonitor
.
h
"
class
nsHtml5StreamListener
:
public
nsIStreamListener
public
nsIThreadRetargetableStreamListener
{
public
:
explicit
nsHtml5StreamListener
(
nsHtml5StreamParser
*
aDelegate
)
;
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIREQUESTOBSERVER
NS_DECL_NSISTREAMLISTENER
NS_DECL_NSITHREADRETARGETABLESTREAMLISTENER
nsHtml5StreamParser
*
GetDelegate
(
)
;
void
DropDelegate
(
)
;
private
:
void
DropDelegateImpl
(
)
;
virtual
~
nsHtml5StreamListener
(
)
;
mozilla
:
:
ReentrantMonitor
mDelegateMonitor
;
mozilla
:
:
Atomic
<
nsHtml5StreamParser
*
mozilla
:
:
ReleaseAcquire
>
mDelegate
;
}
;
#
endif
