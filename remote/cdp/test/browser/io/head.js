"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
remote
/
cdp
/
test
/
browser
/
head
.
js
"
this
)
;
const
{
streamRegistry
}
=
ChromeUtils
.
importESModule
(
"
chrome
:
/
/
remote
/
content
/
cdp
/
domains
/
parent
/
IO
.
sys
.
mjs
"
)
;
async
function
registerFileStream
(
contents
options
=
{
}
)
{
options
.
remove
=
false
;
const
{
file
path
}
=
await
createFile
(
contents
options
)
;
const
handle
=
streamRegistry
.
add
(
file
)
;
return
{
handle
path
}
;
}
