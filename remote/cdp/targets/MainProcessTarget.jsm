"
use
strict
"
;
var
EXPORTED_SYMBOLS
=
[
"
MainProcessTarget
"
]
;
const
{
XPCOMUtils
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
sys
.
mjs
"
)
;
const
{
Target
}
=
ChromeUtils
.
import
(
"
chrome
:
/
/
remote
/
content
/
cdp
/
targets
/
Target
.
jsm
"
)
;
const
lazy
=
{
}
;
XPCOMUtils
.
defineLazyModuleGetters
(
lazy
{
MainProcessSession
:
"
chrome
:
/
/
remote
/
content
/
cdp
/
sessions
/
MainProcessSession
.
jsm
"
RemoteAgent
:
"
chrome
:
/
/
remote
/
content
/
components
/
RemoteAgent
.
jsm
"
}
)
;
class
MainProcessTarget
extends
Target
{
constructor
(
targetList
)
{
super
(
targetList
lazy
.
MainProcessSession
)
;
this
.
type
=
"
browser
"
;
this
.
path
=
/
devtools
/
browser
/
{
this
.
id
}
;
}
get
wsDebuggerURL
(
)
{
const
{
host
port
}
=
lazy
.
RemoteAgent
;
return
ws
:
/
/
{
host
}
:
{
port
}
{
this
.
path
}
;
}
toString
(
)
{
return
[
object
MainProcessTarget
]
;
}
toJSON
(
)
{
return
{
description
:
"
Main
process
target
"
devtoolsFrontendUrl
:
"
"
faviconUrl
:
"
"
id
:
this
.
id
title
:
"
Main
process
target
"
type
:
this
.
type
url
:
"
"
webSocketDebuggerUrl
:
this
.
wsDebuggerURL
}
;
}
}
