const
{
chromeLauncher
}
=
require
(
'
web
/
test
-
runner
-
chrome
'
)
;
module
.
exports
=
{
files
:
[
'
test
-
browser
/
*
*
/
*
.
spec
.
js
'
]
browsers
:
[
chromeLauncher
(
{
async
createPage
(
{
browser
}
)
{
const
page
=
await
browser
.
newPage
(
)
;
page
.
evaluateOnNewDocument
(
(
wsEndpoint
)
=
>
{
window
.
__ENV__
=
{
wsEndpoint
}
;
}
browser
.
wsEndpoint
(
)
)
;
return
page
;
}
}
)
]
plugins
:
[
{
name
:
'
esmify
-
expect
'
transform
(
context
)
{
if
(
context
.
path
=
=
=
'
/
node_modules
/
expect
/
build
-
es5
/
index
.
js
'
)
{
return
const
module
=
{
}
;
const
exports
=
{
}
;
\
n
{
context
.
body
}
;
\
n
export
default
module
.
exports
;
;
}
}
}
]
}
;
