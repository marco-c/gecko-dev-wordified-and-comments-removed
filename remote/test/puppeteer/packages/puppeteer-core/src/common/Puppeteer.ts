import
{
Browser
}
from
'
.
.
/
api
/
Browser
.
js
'
;
import
{
BrowserConnectOptions
_connectToCDPBrowser
}
from
'
.
/
BrowserConnector
.
js
'
;
import
{
ConnectionTransport
}
from
'
.
/
ConnectionTransport
.
js
'
;
import
{
CustomQueryHandler
customQueryHandlers
}
from
'
.
/
CustomQueryHandler
.
js
'
;
export
interface
CommonPuppeteerSettings
{
isPuppeteerCore
:
boolean
;
}
export
interface
ConnectOptions
extends
BrowserConnectOptions
{
browserWSEndpoint
?
:
string
;
browserURL
?
:
string
;
transport
?
:
ConnectionTransport
;
headers
?
:
Record
<
string
string
>
;
}
export
class
Puppeteer
{
static
customQueryHandlers
=
customQueryHandlers
;
static
registerCustomQueryHandler
(
name
:
string
queryHandler
:
CustomQueryHandler
)
:
void
{
return
this
.
customQueryHandlers
.
register
(
name
queryHandler
)
;
}
static
unregisterCustomQueryHandler
(
name
:
string
)
:
void
{
return
this
.
customQueryHandlers
.
unregister
(
name
)
;
}
static
customQueryHandlerNames
(
)
:
string
[
]
{
return
this
.
customQueryHandlers
.
names
(
)
;
}
static
clearCustomQueryHandlers
(
)
:
void
{
return
this
.
customQueryHandlers
.
clear
(
)
;
}
_isPuppeteerCore
:
boolean
;
protected
_changedProduct
=
false
;
constructor
(
settings
:
CommonPuppeteerSettings
)
{
this
.
_isPuppeteerCore
=
settings
.
isPuppeteerCore
;
this
.
connect
=
this
.
connect
.
bind
(
this
)
;
}
connect
(
options
:
ConnectOptions
)
:
Promise
<
Browser
>
{
return
_connectToCDPBrowser
(
options
)
;
}
}
