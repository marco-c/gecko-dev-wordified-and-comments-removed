import
glob
from
'
glob
'
;
import
dts
from
'
rollup
-
plugin
-
dts
'
;
import
{
nodeResolve
}
from
'
rollup
/
plugin
-
node
-
resolve
'
;
import
commonjs
from
'
rollup
/
plugin
-
commonjs
'
;
export
default
[
'
cjs
'
'
esm
'
]
.
flatMap
(
outputType
=
>
{
const
configs
=
[
]
;
const
thirdPartyPath
=
lib
/
{
outputType
}
/
third_party
;
for
(
const
jsFile
of
glob
.
sync
(
{
thirdPartyPath
}
/
*
*
/
*
.
js
)
)
{
configs
.
push
(
{
input
:
jsFile
output
:
{
file
:
jsFile
format
:
outputType
}
plugins
:
[
commonjs
(
)
nodeResolve
(
)
]
}
)
;
}
for
(
const
typesFile
of
glob
.
sync
(
{
thirdPartyPath
}
/
*
*
/
*
.
d
.
ts
)
)
{
configs
.
push
(
{
input
:
typesFile
output
:
{
file
:
typesFile
format
:
outputType
}
plugins
:
[
dts
(
{
respectExternal
:
true
}
)
]
}
)
;
}
return
configs
;
}
)
;
