var
__classPrivateFieldGet
=
(
this
&
&
this
.
__classPrivateFieldGet
)
|
|
function
(
receiver
state
kind
f
)
{
if
(
kind
=
=
=
"
a
"
&
&
!
f
)
throw
new
TypeError
(
"
Private
accessor
was
defined
without
a
getter
"
)
;
if
(
typeof
state
=
=
=
"
function
"
?
receiver
!
=
=
state
|
|
!
f
:
!
state
.
has
(
receiver
)
)
throw
new
TypeError
(
"
Cannot
read
private
member
from
an
object
whose
class
did
not
declare
it
"
)
;
return
kind
=
=
=
"
m
"
?
f
:
kind
=
=
=
"
a
"
?
f
.
call
(
receiver
)
:
f
?
f
.
value
:
state
.
get
(
receiver
)
;
}
;
var
__classPrivateFieldSet
=
(
this
&
&
this
.
__classPrivateFieldSet
)
|
|
function
(
receiver
state
value
kind
f
)
{
if
(
kind
=
=
=
"
m
"
)
throw
new
TypeError
(
"
Private
method
is
not
writable
"
)
;
if
(
kind
=
=
=
"
a
"
&
&
!
f
)
throw
new
TypeError
(
"
Private
accessor
was
defined
without
a
setter
"
)
;
if
(
typeof
state
=
=
=
"
function
"
?
receiver
!
=
=
state
|
|
!
f
:
!
state
.
has
(
receiver
)
)
throw
new
TypeError
(
"
Cannot
write
private
member
to
an
object
whose
class
did
not
declare
it
"
)
;
return
(
kind
=
=
=
"
a
"
?
f
.
call
(
receiver
value
)
:
f
?
f
.
value
=
value
:
state
.
set
(
receiver
value
)
)
value
;
}
;
var
_JSHandle_disposed
_JSHandle_context
_JSHandle_remoteObject
;
import
{
assert
}
from
'
.
.
/
util
/
assert
.
js
'
;
import
{
createJSHandle
releaseObject
valueFromRemoteObject
}
from
'
.
/
util
.
js
'
;
export
class
JSHandle
{
get
client
(
)
{
return
__classPrivateFieldGet
(
this
_JSHandle_context
"
f
"
)
.
_client
;
}
get
disposed
(
)
{
return
__classPrivateFieldGet
(
this
_JSHandle_disposed
"
f
"
)
;
}
constructor
(
context
remoteObject
)
{
_JSHandle_disposed
.
set
(
this
false
)
;
_JSHandle_context
.
set
(
this
void
0
)
;
_JSHandle_remoteObject
.
set
(
this
void
0
)
;
__classPrivateFieldSet
(
this
_JSHandle_context
context
"
f
"
)
;
__classPrivateFieldSet
(
this
_JSHandle_remoteObject
remoteObject
"
f
"
)
;
}
executionContext
(
)
{
return
__classPrivateFieldGet
(
this
_JSHandle_context
"
f
"
)
;
}
async
evaluate
(
pageFunction
.
.
.
args
)
{
return
await
this
.
executionContext
(
)
.
evaluate
(
pageFunction
this
.
.
.
args
)
;
}
async
evaluateHandle
(
pageFunction
.
.
.
args
)
{
return
await
this
.
executionContext
(
)
.
evaluateHandle
(
pageFunction
this
.
.
.
args
)
;
}
async
getProperty
(
propertyName
)
{
return
this
.
evaluateHandle
(
(
object
propertyName
)
=
>
{
return
object
[
propertyName
]
;
}
propertyName
)
;
}
async
getProperties
(
)
{
assert
(
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
objectId
)
;
const
response
=
await
this
.
client
.
send
(
'
Runtime
.
getProperties
'
{
objectId
:
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
objectId
ownProperties
:
true
}
)
;
const
result
=
new
Map
(
)
;
for
(
const
property
of
response
.
result
)
{
if
(
!
property
.
enumerable
|
|
!
property
.
value
)
{
continue
;
}
result
.
set
(
property
.
name
createJSHandle
(
__classPrivateFieldGet
(
this
_JSHandle_context
"
f
"
)
property
.
value
)
)
;
}
return
result
;
}
async
jsonValue
(
)
{
if
(
!
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
objectId
)
{
return
valueFromRemoteObject
(
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
)
;
}
const
value
=
await
this
.
evaluate
(
object
=
>
{
return
object
;
}
)
;
if
(
value
=
=
=
undefined
)
{
throw
new
Error
(
'
Could
not
serialize
referenced
object
'
)
;
}
return
value
;
}
asElement
(
)
{
return
null
;
}
async
dispose
(
)
{
if
(
__classPrivateFieldGet
(
this
_JSHandle_disposed
"
f
"
)
)
{
return
;
}
__classPrivateFieldSet
(
this
_JSHandle_disposed
true
"
f
"
)
;
await
releaseObject
(
this
.
client
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
)
;
}
toString
(
)
{
if
(
!
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
objectId
)
{
return
'
JSHandle
:
'
+
valueFromRemoteObject
(
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
)
;
}
const
type
=
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
subtype
|
|
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
.
type
;
return
'
JSHandle
'
+
type
;
}
remoteObject
(
)
{
return
__classPrivateFieldGet
(
this
_JSHandle_remoteObject
"
f
"
)
;
}
}
_JSHandle_disposed
=
new
WeakMap
(
)
_JSHandle_context
=
new
WeakMap
(
)
_JSHandle_remoteObject
=
new
WeakMap
(
)
;
