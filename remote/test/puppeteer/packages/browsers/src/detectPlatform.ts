import
os
from
'
os
'
;
import
{
BrowserPlatform
}
from
'
.
/
browsers
/
browsers
.
js
'
;
export
function
detectBrowserPlatform
(
)
:
BrowserPlatform
|
undefined
{
const
platform
=
os
.
platform
(
)
;
switch
(
platform
)
{
case
'
darwin
'
:
return
os
.
arch
(
)
=
=
=
'
arm64
'
?
BrowserPlatform
.
MAC_ARM
:
BrowserPlatform
.
MAC
;
case
'
linux
'
:
return
BrowserPlatform
.
LINUX
;
case
'
win32
'
:
return
os
.
arch
(
)
=
=
=
'
x64
'
|
|
(
os
.
arch
(
)
=
=
=
'
arm64
'
&
&
isWindows11
(
os
.
release
(
)
)
)
?
BrowserPlatform
.
WIN64
:
BrowserPlatform
.
WIN32
;
default
:
return
undefined
;
}
}
function
isWindows11
(
version
:
string
)
:
boolean
{
const
parts
=
version
.
split
(
'
.
'
)
;
if
(
parts
.
length
>
2
)
{
const
major
=
parseInt
(
parts
[
0
]
as
string
10
)
;
const
minor
=
parseInt
(
parts
[
1
]
as
string
10
)
;
const
patch
=
parseInt
(
parts
[
2
]
as
string
10
)
;
return
(
major
>
10
|
|
(
major
=
=
=
10
&
&
minor
>
0
)
|
|
(
major
=
=
=
10
&
&
minor
=
=
=
0
&
&
patch
>
=
22000
)
)
;
}
return
false
;
}
