import
assert
from
'
assert
'
;
import
{
readdir
}
from
'
fs
/
promises
'
;
import
{
join
}
from
'
path
'
;
import
{
describeInstallation
}
from
'
.
/
describeInstallation
.
js
'
;
import
{
readAsset
}
from
'
.
/
util
.
js
'
;
describeInstallation
(
'
puppeteer
with
Firefox
'
{
dependencies
:
[
'
puppeteer
-
core
'
'
puppeteer
'
]
env
:
cwd
=
>
{
return
{
PUPPETEER_CACHE_DIR
:
join
(
cwd
'
.
cache
'
'
puppeteer
'
)
PUPPETEER_PRODUCT
:
'
firefox
'
}
;
}
}
(
{
itEvaluates
}
)
=
>
{
itEvaluates
(
'
CommonJS
'
{
commonjs
:
true
}
async
cwd
=
>
{
const
files
=
await
readdir
(
join
(
cwd
'
.
cache
'
'
puppeteer
'
)
)
;
assert
.
equal
(
files
.
length
1
)
;
assert
.
equal
(
files
[
0
]
'
firefox
'
)
;
return
readAsset
(
'
puppeteer
-
core
'
'
requires
.
cjs
'
)
;
}
)
;
itEvaluates
(
'
ES
modules
'
async
(
)
=
>
{
return
readAsset
(
'
puppeteer
-
core
'
'
imports
.
js
'
)
;
}
)
;
}
)
;
