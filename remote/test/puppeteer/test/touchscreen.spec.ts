import
expect
from
'
expect
'
;
import
{
getTestState
setupTestBrowserHooks
setupTestPageAndContextHooks
describeFailsFirefox
}
from
'
.
/
mocha
-
utils
'
;
describe
(
'
Touchscreen
'
function
(
)
{
setupTestBrowserHooks
(
)
;
setupTestPageAndContextHooks
(
)
;
it
(
'
should
tap
the
button
'
async
(
)
=
>
{
const
{
puppeteer
page
server
}
=
getTestState
(
)
;
const
iPhone
=
puppeteer
.
devices
[
'
iPhone
6
'
]
;
await
page
.
emulate
(
iPhone
)
;
await
page
.
goto
(
server
.
PREFIX
+
'
/
input
/
button
.
html
'
)
;
await
page
.
tap
(
'
button
'
)
;
expect
(
await
page
.
evaluate
(
(
)
=
>
globalThis
.
result
)
)
.
toBe
(
'
Clicked
'
)
;
}
)
;
it
(
'
should
report
touches
'
async
(
)
=
>
{
const
{
puppeteer
page
server
}
=
getTestState
(
)
;
const
iPhone
=
puppeteer
.
devices
[
'
iPhone
6
'
]
;
await
page
.
emulate
(
iPhone
)
;
await
page
.
goto
(
server
.
PREFIX
+
'
/
input
/
touches
.
html
'
)
;
const
button
=
await
page
.
(
'
button
'
)
;
await
button
.
tap
(
)
;
expect
(
await
page
.
evaluate
(
(
)
=
>
globalThis
.
getResult
(
)
)
)
.
toEqual
(
[
'
Touchstart
:
0
'
'
Touchend
:
0
'
]
)
;
}
)
;
}
)
;
