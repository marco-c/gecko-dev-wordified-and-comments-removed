import
packageJson
from
'
.
.
/
package
.
json
'
;
const
allDeps
=
{
.
.
.
packageJson
.
dependencies
.
.
.
packageJson
.
devDependencies
}
;
const
invalidDeps
=
new
Map
<
string
string
>
(
)
;
for
(
const
[
depKey
depValue
]
of
Object
.
entries
(
allDeps
)
)
{
if
(
/
[
0
-
9
]
/
.
test
(
depValue
[
0
]
!
)
)
{
continue
;
}
invalidDeps
.
set
(
depKey
depValue
)
;
}
if
(
invalidDeps
.
size
>
0
)
{
console
.
error
(
'
Found
non
-
pinned
dependencies
in
package
.
json
:
'
)
;
console
.
log
(
[
.
.
.
invalidDeps
.
keys
(
)
]
.
map
(
k
=
>
{
return
{
k
}
;
}
)
.
join
(
'
\
n
'
)
)
;
process
.
exit
(
1
)
;
}
process
.
exit
(
0
)
;
