const
fs
=
require
(
'
fs
'
)
;
const
path
=
require
(
'
path
'
)
;
const
prettier
=
require
(
'
prettier
'
)
;
const
source
=
'
test
/
TestExpectations
.
json
'
;
const
testExpectations
=
JSON
.
parse
(
fs
.
readFileSync
(
source
'
utf
-
8
'
)
)
;
function
getSpecificity
(
item
)
{
return
(
item
.
parameters
.
length
+
(
item
.
testIdPattern
.
includes
(
'
*
'
)
?
item
.
testIdPattern
=
=
=
'
*
'
?
0
:
1
:
2
)
)
;
}
testExpectations
.
sort
(
(
a
b
)
=
>
{
const
result
=
getSpecificity
(
a
)
-
getSpecificity
(
b
)
;
if
(
result
=
=
=
0
)
{
return
a
.
testIdPattern
.
localeCompare
(
b
.
testIdPattern
)
;
}
return
result
;
}
)
;
testExpectations
.
forEach
(
item
=
>
{
item
.
parameters
.
sort
(
)
;
item
.
expectations
.
sort
(
)
;
item
.
platforms
.
sort
(
)
;
}
)
;
fs
.
writeFileSync
(
source
prettier
.
format
(
JSON
.
stringify
(
testExpectations
)
{
.
.
.
require
(
path
.
join
(
__dirname
'
.
.
'
'
.
prettierrc
.
cjs
'
)
)
parser
:
'
json
'
}
)
)
;
