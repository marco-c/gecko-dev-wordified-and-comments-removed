"
use
strict
"
;
const
EXPORTED_SYMBOLS
=
[
"
readSessionData
"
]
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
const
{
XPCOMUtils
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyModuleGetters
(
this
{
SESSION_DATA_SHARED_DATA_KEY
:
"
chrome
:
/
/
remote
/
content
/
shared
/
messagehandler
/
sessiondata
/
SessionData
.
jsm
"
}
)
;
XPCOMUtils
.
defineLazyGetter
(
this
"
sharedData
"
(
)
=
>
{
const
isInParent
=
Services
.
appinfo
.
processType
=
=
Ci
.
nsIXULRuntime
.
PROCESS_TYPE_DEFAULT
;
return
isInParent
?
Services
.
ppmm
.
sharedData
:
Services
.
cpmm
.
sharedData
;
}
)
;
const
readSessionData
=
(
)
=
>
sharedData
.
get
(
SESSION_DATA_SHARED_DATA_KEY
)
|
|
new
Map
(
)
;
