#
include
"
gtest
/
gtest
.
h
"
#
include
"
mozilla
/
BasePrincipal
.
h
"
using
mozilla
:
:
OriginAttributes
;
static
void
TestSuffix
(
const
OriginAttributes
&
attrs
)
{
nsAutoCString
suffix
;
attrs
.
CreateSuffix
(
suffix
)
;
OriginAttributes
attrsFromSuffix
;
bool
success
=
attrsFromSuffix
.
PopulateFromSuffix
(
suffix
)
;
EXPECT_TRUE
(
success
)
;
EXPECT_EQ
(
attrs
attrsFromSuffix
)
;
}
TEST
(
OriginAttributes
Suffix_default
)
{
OriginAttributes
attrs
;
TestSuffix
(
attrs
)
;
}
TEST
(
OriginAttributes
Suffix_appId_inIsolatedMozBrowser
)
{
OriginAttributes
attrs
(
1
true
)
;
TestSuffix
(
attrs
)
;
}
TEST
(
OriginAttributes
Suffix_maxAppId_inIsolatedMozBrowser
)
{
OriginAttributes
attrs
(
4294967295
true
)
;
TestSuffix
(
attrs
)
;
}
