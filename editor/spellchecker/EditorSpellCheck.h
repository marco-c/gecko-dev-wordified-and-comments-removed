#
ifndef
mozilla_EditorSpellCheck_h
#
define
mozilla_EditorSpellCheck_h
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsIEditorSpellCheck
.
h
"
#
include
"
nsISupportsImpl
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
nscore
.
h
"
class
mozSpellChecker
;
class
nsComposeTxtSrvFilter
;
class
nsIEditor
;
class
nsISpellChecker
;
class
nsITextServicesFilter
;
#
define
NS_EDITORSPELLCHECK_CID
\
{
/
*
{
75656ad9
-
bd13
-
4c5d
-
939a
-
ec6351eea0cc
}
*
/
\
0x75656ad9
0xbd13
0x4c5d
\
{
0x93
0x9a
0xec
0x63
0x51
0xee
0xa0
0xcc
}
\
}
namespace
mozilla
{
class
DictionaryFetcher
;
class
EditorBase
;
enum
dictCompare
{
DICT_NORMAL_COMPARE
DICT_COMPARE_CASE_INSENSITIVE
DICT_COMPARE_DASHMATCH
}
;
class
EditorSpellCheck
final
:
public
nsIEditorSpellCheck
{
friend
class
DictionaryFetcher
;
public
:
EditorSpellCheck
(
)
;
NS_DECL_CYCLE_COLLECTING_ISUPPORTS
NS_DECL_CYCLE_COLLECTION_CLASS
(
EditorSpellCheck
)
NS_DECL_NSIEDITORSPELLCHECK
mozSpellChecker
*
GetSpellChecker
(
)
;
protected
:
virtual
~
EditorSpellCheck
(
)
;
RefPtr
<
mozSpellChecker
>
mSpellChecker
;
RefPtr
<
nsComposeTxtSrvFilter
>
mTxtSrvFilter
;
RefPtr
<
EditorBase
>
mEditor
;
nsTArray
<
nsString
>
mSuggestedWordList
;
nsTArray
<
nsString
>
mDictionaryList
;
nsString
mPreferredLang
;
int32_t
mSuggestedWordIndex
;
int32_t
mDictionaryIndex
;
uint32_t
mDictionaryFetcherGroup
;
bool
mUpdateDictionaryRunning
;
nsresult
DeleteSuggestedWordList
(
)
;
void
BuildDictionaryList
(
const
nsAString
&
aDictName
const
nsTArray
<
nsString
>
&
aDictList
enum
dictCompare
aCompareType
nsTArray
<
nsString
>
&
aTryList
)
;
nsresult
DictionaryFetched
(
DictionaryFetcher
*
aFetchState
)
;
void
SetFallbackDictionary
(
DictionaryFetcher
*
aFetcher
)
;
public
:
void
BeginUpdateDictionary
(
)
{
mUpdateDictionaryRunning
=
true
;
}
void
EndUpdateDictionary
(
)
{
mUpdateDictionaryRunning
=
false
;
}
}
;
}
#
endif
