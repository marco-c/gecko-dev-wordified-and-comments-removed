#
ifndef
CreateElementTransaction_h
#
define
CreateElementTransaction_h
#
include
"
mozilla
/
EditorDOMPoint
.
h
"
#
include
"
mozilla
/
EditTransactionBase
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsISupportsImpl
.
h
"
class
nsAtom
;
namespace
mozilla
{
namespace
dom
{
class
Element
;
}
class
EditorBase
;
class
CreateElementTransaction
final
:
public
EditTransactionBase
{
protected
:
template
<
typename
PT
typename
CT
>
CreateElementTransaction
(
EditorBase
&
aEditorBase
nsAtom
&
aTag
const
EditorDOMPointBase
<
PT
CT
>
&
aPointToInsert
)
;
public
:
template
<
typename
PT
typename
CT
>
static
already_AddRefed
<
CreateElementTransaction
>
Create
(
EditorBase
&
aEditorBase
nsAtom
&
aTag
const
EditorDOMPointBase
<
PT
CT
>
&
aPointToInsert
)
;
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
CreateElementTransaction
EditTransactionBase
)
NS_DECL_EDITTRANSACTIONBASE
NS_DECL_EDITTRANSACTIONBASE_GETASMETHODS_OVERRIDE
(
CreateElementTransaction
)
MOZ_CAN_RUN_SCRIPT
NS_IMETHOD
RedoTransaction
(
)
override
;
dom
:
:
Element
*
GetNewElement
(
)
const
{
return
mNewElement
;
}
protected
:
virtual
~
CreateElementTransaction
(
)
=
default
;
MOZ_CAN_RUN_SCRIPT
void
InsertNewNode
(
ErrorResult
&
aError
)
;
RefPtr
<
EditorBase
>
mEditorBase
;
RefPtr
<
nsAtom
>
mTag
;
EditorDOMPoint
mPointToInsert
;
RefPtr
<
dom
:
:
Element
>
mNewElement
;
}
;
}
#
endif
