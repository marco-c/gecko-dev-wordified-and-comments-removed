#
ifndef
mozilla_ChangeStyleTransaction_h
#
define
mozilla_ChangeStyleTransaction_h
#
include
"
mozilla
/
EditTransactionBase
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsString
.
h
"
class
nsAtom
;
class
nsStyledElement
;
namespace
mozilla
{
namespace
dom
{
class
Element
;
}
class
ChangeStyleTransaction
final
:
public
EditTransactionBase
{
protected
:
ChangeStyleTransaction
(
nsStyledElement
&
aStyledElement
nsAtom
&
aProperty
const
nsAString
&
aValue
bool
aRemove
)
;
public
:
static
already_AddRefed
<
ChangeStyleTransaction
>
Create
(
nsStyledElement
&
aStyledElement
nsAtom
&
aProperty
const
nsAString
&
aValue
)
;
static
already_AddRefed
<
ChangeStyleTransaction
>
CreateToRemove
(
nsStyledElement
&
aStyledElement
nsAtom
&
aProperty
const
nsAString
&
aValue
)
;
NS_DECL_CYCLE_COLLECTION_CLASS_INHERITED
(
ChangeStyleTransaction
EditTransactionBase
)
NS_DECL_ISUPPORTS_INHERITED
NS_DECL_EDITTRANSACTIONBASE
NS_IMETHOD
RedoTransaction
(
)
override
;
static
bool
ValueIncludes
(
const
nsAString
&
aValueList
const
nsAString
&
aValue
)
;
private
:
virtual
~
ChangeStyleTransaction
(
)
=
default
;
void
AddValueToMultivalueProperty
(
nsAString
&
aValues
const
nsAString
&
aNewValue
)
;
bool
AcceptsMoreThanOneValue
(
nsAtom
&
aCSSProperty
)
;
void
RemoveValueFromListOfValues
(
nsAString
&
aValues
const
nsAString
&
aRemoveValue
)
;
nsresult
SetStyle
(
bool
aAttributeWasSet
nsAString
&
aValue
)
;
RefPtr
<
nsStyledElement
>
mStyledElement
;
RefPtr
<
nsAtom
>
mProperty
;
nsString
mValue
;
nsString
mUndoValue
;
nsString
mRedoValue
;
bool
mRemoveProperty
;
bool
mUndoAttributeWasSet
;
bool
mRedoAttributeWasSet
;
}
;
}
#
endif
