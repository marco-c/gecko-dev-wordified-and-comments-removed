"
use
strict
"
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
var
gDecoderDoctorObserver
=
function
(
subject
topic
data
)
{
let
win
=
subject
.
top
;
let
mm
=
getMessageManagerForWindow
(
win
)
;
if
(
mm
)
{
mm
.
sendAsyncMessage
(
"
DecoderDoctor
:
Notification
"
data
)
;
}
}
;
function
getMessageManagerForWindow
(
aContentWindow
)
{
return
aContentWindow
.
docShell
.
messageManager
;
}
Services
.
obs
.
addObserver
(
gDecoderDoctorObserver
"
decoder
-
doctor
-
notification
"
)
;
