from
__future__
import
absolute_import
print_function
unicode_literals
import
io
import
re
import
sys
from
optparse
import
OptionParser
o
=
OptionParser
(
)
o
.
add_option
(
"
-
-
buildid
"
dest
=
"
buildid
"
)
o
.
add_option
(
"
-
-
version
"
dest
=
"
version
"
)
(
options
args
)
=
o
.
parse_args
(
)
if
not
options
.
buildid
:
    
print
(
"
-
-
buildid
is
required
"
file
=
sys
.
stderr
)
    
sys
.
exit
(
1
)
if
not
options
.
version
:
    
print
(
"
-
-
version
is
required
"
file
=
sys
.
stderr
)
    
sys
.
exit
(
1
)
define
MOZ_BUILDID
buildid
=
(
    
io
.
open
(
options
.
buildid
"
r
"
encoding
=
"
utf
-
8
"
)
.
read
(
)
.
split
(
)
)
majorVersion
=
re
.
match
(
r
"
^
(
\
d
+
)
[
^
\
d
]
.
*
"
options
.
version
)
.
group
(
1
)
twodigityear
=
buildid
[
2
:
4
]
month
=
buildid
[
4
:
6
]
if
month
[
0
]
=
=
"
0
"
:
    
month
=
month
[
1
]
day
=
buildid
[
6
:
8
]
if
day
[
0
]
=
=
"
0
"
:
    
day
=
day
[
1
]
print
(
"
%
s
.
%
s
.
%
s
"
%
(
majorVersion
+
twodigityear
month
day
)
)
