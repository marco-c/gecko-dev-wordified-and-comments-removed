"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
getRootDirectory
(
gTestPath
)
+
"
send_more_info
.
js
"
this
)
;
add_common_setup
(
)
;
const
VIDEO_URL
=
{
BASE_URL
}
/
videotest
.
mp4
;
add_setup
(
async
function
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
test
.
wait300msAfterTabSwitch
"
true
]
]
}
)
;
}
)
;
add_task
(
async
function
testWebcompatComFallbacks
(
)
{
ensureReportBrokenSitePreffedOff
(
)
;
const
tab
=
await
openTab
(
REPORTABLE_PAGE_URL
)
;
await
testWebcompatComFallback
(
tab
AppMenu
(
)
)
;
await
changeTab
(
tab
REPORTABLE_PAGE_URL2
)
;
await
testWebcompatComFallback
(
tab
ProtectionsPanel
(
)
)
;
const
tab2
=
await
openTab
(
VIDEO_URL
)
;
await
testWebcompatComFallback
(
tab2
HelpMenu
(
)
)
;
closeTab
(
tab2
)
;
closeTab
(
tab
)
;
}
)
;
