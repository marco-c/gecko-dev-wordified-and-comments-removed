ChromeUtils
.
defineESModuleGetters
(
this
{
TranslationsPanelShared
:
"
chrome
:
/
/
browser
/
content
/
translations
/
TranslationsPanelShared
.
sys
.
mjs
"
}
)
;
var
SelectTranslationsPanel
=
new
(
class
{
#
console
;
get
console
(
)
{
if
(
!
this
.
#
console
)
{
try
{
this
.
#
console
=
console
.
createInstance
(
{
maxLogLevelPref
:
"
browser
.
translations
.
logLevel
"
prefix
:
"
Translations
"
}
)
;
}
catch
{
}
}
return
this
.
#
console
;
}
#
lazyElements
;
get
elements
(
)
{
if
(
!
this
.
#
lazyElements
)
{
const
wrapper
=
document
.
getElementById
(
"
template
-
select
-
translations
-
panel
"
)
;
const
panel
=
wrapper
.
content
.
firstElementChild
;
const
settingsButton
=
document
.
getElementById
(
"
translations
-
panel
-
settings
"
)
;
wrapper
.
replaceWith
(
wrapper
.
content
)
;
this
.
#
lazyElements
=
{
panel
settingsButton
}
;
TranslationsPanelShared
.
defineLazyElements
(
document
this
.
#
lazyElements
{
betaIcon
:
"
select
-
translations
-
panel
-
beta
-
icon
"
copyButton
:
"
select
-
translations
-
panel
-
copy
-
button
"
doneButton
:
"
select
-
translations
-
panel
-
done
-
button
"
fromLabel
:
"
select
-
translations
-
panel
-
from
-
label
"
fromMenuList
:
"
select
-
translations
-
panel
-
from
"
header
:
"
select
-
translations
-
panel
-
header
"
multiview
:
"
select
-
translations
-
panel
-
multiview
"
textArea
:
"
select
-
translations
-
panel
-
translation
-
area
"
toLabel
:
"
select
-
translations
-
panel
-
to
-
label
"
toMenuList
:
"
select
-
translations
-
panel
-
to
"
translateFullPageButton
:
"
select
-
translations
-
panel
-
translate
-
full
-
page
-
button
"
}
)
;
}
return
this
.
#
lazyElements
;
}
close
(
)
{
PanelMultiView
.
hidePopup
(
this
.
elements
.
panel
)
;
}
async
#
ensureLangListsBuilt
(
)
{
try
{
await
TranslationsPanelShared
.
ensureLangListsBuilt
(
document
this
.
elements
.
panel
)
;
}
catch
(
error
)
{
this
.
console
?
.
error
(
error
)
;
}
}
async
open
(
event
)
{
await
this
.
#
ensureLangListsBuilt
(
)
;
const
appMenuButton
=
document
.
getElementById
(
"
PanelUI
-
menu
-
button
"
)
;
const
{
panel
textArea
}
=
this
.
elements
;
panel
.
addEventListener
(
"
popupshown
"
(
)
=
>
textArea
.
focus
(
)
{
once
:
true
}
)
;
await
PanelMultiView
.
openPopup
(
panel
appMenuButton
{
position
:
"
bottomright
topright
"
triggerEvent
:
event
}
)
.
catch
(
error
=
>
this
.
console
?
.
error
(
error
)
)
;
}
}
)
(
)
;
