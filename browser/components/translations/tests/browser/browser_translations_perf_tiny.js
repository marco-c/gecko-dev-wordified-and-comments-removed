"
use
strict
"
;
const
perfMetadata
=
{
owner
:
"
Translations
Team
"
name
:
"
Full
-
Page
Translations
Tiny
Model
"
description
:
"
Tests
the
performance
of
Full
Page
Translations
with
a
tiny
-
architecture
model
"
options
:
{
default
:
{
perfherder
:
true
perfherder_metrics
:
[
{
name
:
"
engine
-
init
-
time
"
unit
:
"
ms
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
words
-
per
-
second
"
unit
:
"
WPS
"
shouldAlert
:
true
lowerIsBetter
:
false
}
{
name
:
"
tokens
-
per
-
second
"
unit
:
"
TPS
"
shouldAlert
:
true
lowerIsBetter
:
false
}
{
name
:
"
peak
-
parent
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
stabilized
-
parent
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
post
-
gc
-
parent
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
peak
-
inference
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
stabilized
-
inference
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
post
-
gc
-
inference
-
process
-
memory
-
usage
"
unit
:
"
MiB
"
shouldAlert
:
true
lowerIsBetter
:
true
}
{
name
:
"
total
-
translation
-
time
"
unit
:
"
s
"
shouldAlert
:
true
lowerIsBetter
:
true
}
]
verbose
:
true
manifest
:
"
perftest
.
toml
"
manifest_flavor
:
"
browser
-
chrome
"
try_platform
:
[
"
linux
"
"
mac
"
"
win
"
]
}
}
}
;
requestLongerTimeout
(
6
)
;
add_task
(
async
function
test_translations_performance_tiny
(
)
{
await
TranslationsBencher
.
benchmarkTranslation
(
{
page
:
ENGLISH_BENCHMARK_PAGE_URL
sourceLanguage
:
"
en
"
targetLanguage
:
"
ru
"
architecture
:
"
tiny
"
speedBenchCount
:
5
memoryBenchCount
:
5
memorySampleInterval
:
50
}
)
;
}
)
;
