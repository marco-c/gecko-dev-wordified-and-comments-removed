#
include
"
gtest
/
gtest
.
h
"
#
include
"
Windows11LimitedAccessFeatures
.
h
"
#
include
"
WinUtils
.
h
"
TEST
(
LimitedAccessFeature
VerifyGeneratedInfo
)
{
if
(
mozilla
:
:
widget
:
:
WinUtils
:
:
HasPackageIdentity
(
)
)
{
return
;
}
LimitedAccessFeatureInfo
knownLafInfo
=
{
"
Win11LimitedAccessFeatureType
:
:
Taskbar
"
_ns
u
"
com
.
microsoft
.
windows
.
taskbar
.
pin
"
_ns
u
"
kRFiWpEK5uS6PMJZKmR7MQ
=
=
"
_ns
u
"
pcsmm0jrprpb2
has
registered
their
use
of
"
_ns
u
"
com
.
microsoft
.
windows
.
taskbar
.
pin
with
Microsoft
and
agrees
to
the
"
_ns
u
"
terms
"
_ns
u
"
of
use
.
"
_ns
}
;
auto
generatedLafInfoResult
=
GenerateLimitedAccessFeatureInfo
(
"
Win11LimitedAccessFeatureType
:
:
Taskbar
"
_ns
u
"
com
.
microsoft
.
windows
.
taskbar
.
pin
"
_ns
)
;
ASSERT_TRUE
(
generatedLafInfoResult
.
isOk
(
)
)
;
LimitedAccessFeatureInfo
generatedLafInfo
=
generatedLafInfoResult
.
unwrap
(
)
;
ASSERT_TRUE
(
knownLafInfo
.
debugName
.
Equals
(
generatedLafInfo
.
debugName
)
)
;
ASSERT_TRUE
(
knownLafInfo
.
feature
.
Equals
(
generatedLafInfo
.
feature
)
)
;
ASSERT_TRUE
(
knownLafInfo
.
token
.
Equals
(
generatedLafInfo
.
token
)
)
;
ASSERT_TRUE
(
knownLafInfo
.
attestation
.
Equals
(
generatedLafInfo
.
attestation
)
)
;
}
