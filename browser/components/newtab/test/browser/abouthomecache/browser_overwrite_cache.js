"
use
strict
"
;
add_task
(
async
function
test_overwrite_cache
(
)
{
await
BrowserTestUtils
.
withNewTab
(
"
about
:
home
"
async
browser
=
>
{
await
simulateRestart
(
browser
)
;
const
TEST_ID
=
"
test_overwrite_cache_h1
"
;
await
injectIntoCache
(
<
html
>
<
head
>
<
meta
http
-
equiv
=
"
Content
-
Security
-
Policy
"
content
=
"
default
-
src
'
none
'
;
object
-
src
'
none
'
;
script
-
src
resource
:
chrome
:
;
connect
-
src
https
:
;
img
-
src
https
:
data
:
blob
:
;
style
-
src
'
unsafe
-
inline
'
;
"
>
<
/
head
>
<
body
>
<
h1
id
=
"
{
TEST_ID
}
"
>
Something
new
<
/
h1
>
<
/
body
>
<
/
html
>
"
(
)
=
>
{
}
"
)
;
await
simulateRestart
(
browser
false
)
;
await
SpecialPowers
.
spawn
(
browser
[
TEST_ID
]
async
testID
=
>
{
let
target
=
content
.
document
.
getElementById
(
testID
)
;
Assert
.
ok
(
target
"
Found
the
target
element
"
)
;
}
)
;
}
)
;
}
)
;
