import
{
FluentBundle
}
from
"
fluent
"
;
const
RICH_TEXT_CONFIG
=
{
text
:
[
"
text
"
"
scene1_text
"
]
success_text
:
"
success_text
"
error_text
:
"
error_text
"
scene2_text
:
"
scene2_text
"
amo_html
:
"
amo_html
"
privacy_html
:
"
scene2_privacy_html
"
disclaimer_html
:
"
scene2_disclaimer_html
"
}
;
export
const
RICH_TEXT_KEYS
=
Object
.
keys
(
RICH_TEXT_CONFIG
)
;
export
function
generateBundles
(
content
)
{
const
bundle
=
new
FluentBundle
(
"
en
-
US
"
)
;
RICH_TEXT_KEYS
.
forEach
(
key
=
>
{
const
attrs
=
RICH_TEXT_CONFIG
[
key
]
;
const
attrsToTry
=
Array
.
isArray
(
attrs
)
?
[
.
.
.
attrs
]
:
[
attrs
]
;
let
string
=
"
"
;
while
(
!
string
&
&
attrsToTry
.
length
)
{
const
attr
=
attrsToTry
.
pop
(
)
;
string
=
content
[
attr
]
;
}
bundle
.
addMessages
(
{
key
}
=
{
string
}
)
;
}
)
;
return
[
bundle
]
;
}
