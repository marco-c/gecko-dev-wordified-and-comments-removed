export
function
clampTotalLines
(
parentNode
)
{
if
(
!
parentNode
|
|
!
parentNode
.
dataset
.
totalLines
)
{
return
;
}
const
toClamp
=
Array
.
from
(
parentNode
.
querySelectorAll
(
"
.
clamp
"
)
)
.
filter
(
child
=
>
child
.
scrollHeight
)
;
let
maxLines
=
parentNode
.
dataset
.
totalLines
-
toClamp
.
length
+
1
;
toClamp
.
forEach
(
child
=
>
{
const
lines
=
Math
.
min
(
maxLines
child
.
dataset
.
clamp
|
|
Infinity
child
.
scrollHeight
/
parseInt
(
global
.
getComputedStyle
(
child
)
.
lineHeight
10
)
)
;
child
.
style
.
webkitLineClamp
=
{
lines
}
;
maxLines
-
=
lines
-
1
;
}
)
;
}
