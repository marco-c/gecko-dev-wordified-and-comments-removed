const
path
=
require
(
"
path
"
)
;
const
PATHS
=
{
testEntryFile
:
path
.
resolve
(
__dirname
"
test
/
unit
/
unit
-
entry
.
js
"
)
testFilesPattern
:
"
test
/
unit
/
*
*
/
*
.
js
"
moduleResolveDirectory
:
__dirname
resourcePathRegEx
:
/
^
resource
:
\
/
\
/
activity
-
stream
\
/
/
coverageReportingPath
:
"
logs
/
coverage
/
"
}
;
const
preprocessors
=
{
}
;
preprocessors
[
PATHS
.
testFilesPattern
]
=
[
"
webpack
"
"
sourcemap
"
]
;
module
.
exports
=
function
(
config
)
{
const
isTDD
=
config
.
tdd
;
const
browsers
=
isTDD
?
[
"
Firefox
"
]
:
[
"
FirefoxHeadless
"
]
;
config
.
set
(
{
singleRun
:
!
isTDD
browsers
customLaunchers
:
{
FirefoxHeadless
:
{
base
:
"
Firefox
"
flags
:
[
"
-
-
headless
"
]
}
}
frameworks
:
[
"
chai
"
"
mocha
"
"
sinon
"
]
reporters
:
[
"
coverage
-
istanbul
"
"
mocha
"
]
coverageIstanbulReporter
:
{
reports
:
[
"
html
"
"
text
-
summary
"
]
dir
:
PATHS
.
coverageReportingPath
thresholds
:
!
isTDD
&
&
{
global
:
{
statements
:
100
lines
:
100
functions
:
100
branches
:
90
}
}
}
files
:
[
PATHS
.
testEntryFile
]
preprocessors
webpack
:
{
mode
:
"
none
"
devtool
:
"
inline
-
source
-
map
"
resolveLoader
:
{
alias
:
{
inject
:
path
.
join
(
__dirname
"
loaders
/
inject
-
loader
"
)
}
}
resolve
:
{
extensions
:
[
"
.
js
"
"
.
jsx
"
]
modules
:
[
PATHS
.
moduleResolveDirectory
"
node_modules
"
]
}
externals
:
{
"
react
/
addons
"
:
true
"
react
/
lib
/
ReactContext
"
:
true
"
react
/
lib
/
ExecutionEnvironment
"
:
true
}
module
:
{
rules
:
[
{
test
:
/
\
.
jsm
/
exclude
:
[
/
node_modules
/
]
use
:
[
{
loader
:
"
babel
-
loader
"
options
:
{
plugins
:
[
[
"
jsm
-
to
-
commonjs
"
{
basePath
:
PATHS
.
resourcePathRegEx
removeOtherImports
:
true
replace
:
true
}
]
[
"
transform
-
async
-
to
-
module
-
method
"
{
module
:
"
co
-
task
"
method
:
"
async
"
}
]
"
transform
-
es2015
-
modules
-
commonjs
"
[
"
transform
-
object
-
rest
-
spread
"
{
"
useBuiltIns
"
:
true
}
]
]
}
}
]
}
{
test
:
/
\
.
js
/
exclude
:
[
/
node_modules
\
/
(
?
!
(
fluent
|
fluent
-
react
)
\
/
)
.
*
/
/
test
/
]
use
:
[
{
loader
:
"
babel
-
loader
"
options
:
{
plugins
:
[
[
"
transform
-
async
-
to
-
module
-
method
"
{
module
:
"
co
-
task
"
method
:
"
async
"
}
]
"
transform
-
es2015
-
modules
-
commonjs
"
[
"
transform
-
object
-
rest
-
spread
"
{
"
useBuiltIns
"
:
true
}
]
[
"
transform
-
async
-
to
-
generator
"
]
[
"
transform
-
async
-
generator
-
functions
"
]
]
}
}
]
}
{
test
:
/
\
.
jsx
/
exclude
:
/
node_modules
/
loader
:
"
babel
-
loader
"
options
:
{
presets
:
[
"
react
"
]
plugins
:
[
[
"
transform
-
object
-
rest
-
spread
"
{
"
useBuiltIns
"
:
true
}
]
]
}
}
{
test
:
/
\
.
md
/
use
:
"
raw
-
loader
"
}
{
enforce
:
"
post
"
test
:
/
\
.
jsm
?
/
loader
:
"
istanbul
-
instrumenter
-
loader
"
include
:
[
path
.
resolve
(
"
content
-
src
"
)
path
.
resolve
(
"
lib
"
)
path
.
resolve
(
"
common
"
)
]
exclude
:
[
path
.
resolve
(
"
test
"
)
path
.
resolve
(
"
vendor
"
)
path
.
resolve
(
"
lib
/
ASRouterTargeting
.
jsm
"
)
path
.
resolve
(
"
content
-
src
/
lib
/
snippets
.
js
"
)
path
.
resolve
(
"
lib
/
ASRouterTriggerListeners
.
jsm
"
)
path
.
resolve
(
"
lib
/
OnboardingMessageProvider
.
jsm
"
)
path
.
resolve
(
"
lib
/
CFRMessageProvider
.
jsm
"
)
path
.
resolve
(
"
lib
/
CFRPageActions
.
jsm
"
)
]
}
]
}
}
webpackMiddleware
:
{
noInfo
:
true
}
}
)
;
}
;
