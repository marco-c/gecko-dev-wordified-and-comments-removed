const
TEST_PAGE
=
"
http
:
/
/
mochi
.
test
:
8888
/
browser
/
browser
/
components
/
"
+
"
originattributes
/
test
/
browser
/
file_firstPartyBasic
.
html
"
;
const
key
=
Math
.
random
(
)
.
toString
(
)
;
function
*
doTest
(
aBrowser
)
{
return
yield
ContentTask
.
spawn
(
aBrowser
key
function
(
key
)
{
let
value
=
content
.
localStorage
.
getItem
(
key
)
;
if
(
value
=
=
=
null
)
{
value
=
Math
.
random
(
)
.
toString
(
)
;
content
.
localStorage
.
setItem
(
key
value
)
;
}
return
value
;
}
)
;
}
IsolationTestTools
.
runTests
(
TEST_PAGE
doTest
)
;
