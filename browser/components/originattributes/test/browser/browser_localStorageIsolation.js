const
TEST_PAGE
=
"
http
:
/
/
mochi
.
test
:
8888
/
browser
/
browser
/
components
/
"
+
"
originattributes
/
test
/
browser
/
file_firstPartyBasic
.
html
"
;
const
key
=
Math
.
random
(
)
.
toString
(
)
;
function
doTest
(
aBrowser
)
{
return
SpecialPowers
.
spawn
(
aBrowser
[
key
]
function
(
contentKey
)
{
let
value
=
content
.
localStorage
.
getItem
(
contentKey
)
;
if
(
value
=
=
=
null
)
{
value
=
Math
.
random
(
)
.
toString
(
)
;
content
.
localStorage
.
setItem
(
contentKey
value
)
;
}
return
value
;
}
)
;
}
IsolationTestTools
.
runTests
(
TEST_PAGE
doTest
)
;
