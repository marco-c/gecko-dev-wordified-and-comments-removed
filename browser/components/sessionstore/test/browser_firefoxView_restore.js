"
use
strict
"
;
const
CLOSED_URI
=
"
https
:
/
/
www
.
example
.
com
/
"
;
add_task
(
async
function
test_TODO
(
)
{
let
tab
=
await
BrowserTestUtils
.
openNewForegroundTab
(
gBrowser
CLOSED_URI
)
;
Assert
.
equal
(
gBrowser
.
tabs
[
0
]
.
linkedBrowser
.
currentURI
.
filePath
"
blank
"
)
;
Assert
.
equal
(
gBrowser
.
tabs
[
1
]
.
linkedBrowser
.
currentURI
.
spec
CLOSED_URI
)
;
Assert
.
ok
(
gBrowser
.
selectedTab
=
=
tab
)
;
let
state
=
ss
.
getCurrentState
(
true
)
;
Assert
.
equal
(
state
.
windows
[
0
]
.
selected
2
)
;
await
EventUtils
.
synthesizeMouseAtCenter
(
window
.
document
.
getElementById
(
"
firefox
-
view
-
button
"
)
{
type
:
"
mousedown
"
}
window
)
;
Assert
.
ok
(
window
.
FirefoxViewHandler
.
tab
.
selected
)
;
Assert
.
equal
(
gBrowser
.
tabs
[
2
]
window
.
FirefoxViewHandler
.
tab
)
;
state
=
ss
.
getCurrentState
(
true
)
;
Assert
.
equal
(
state
.
windows
[
0
]
.
selected
1
)
;
gBrowser
.
removeTab
(
window
.
FirefoxViewHandler
.
tab
)
;
gBrowser
.
removeTab
(
tab
)
;
}
)
;
