function
run_test
(
)
{
let
profd
=
do_get_profile
(
)
;
var
SessionFile
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
/
modules
/
sessionstore
/
SessionFile
.
sys
.
mjs
"
)
.
SessionFile
;
let
sourceSession
=
do_get_file
(
"
data
/
sessionstore_valid
.
js
"
)
;
sourceSession
.
copyTo
(
profd
"
sessionstore
.
js
"
)
;
let
sourceCheckpoints
=
do_get_file
(
"
data
/
sessionCheckpoints_all
.
json
"
)
;
sourceCheckpoints
.
copyTo
(
profd
"
sessionCheckpoints
.
json
"
)
;
let
oldExtSessionFile
=
SessionFile
.
Paths
.
clean
.
replace
(
"
jsonlz4
"
"
js
"
)
;
writeCompressedFile
(
oldExtSessionFile
SessionFile
.
Paths
.
clean
)
.
then
(
(
)
=
>
{
afterSessionStartupInitialization
(
function
cb
(
)
{
Assert
.
equal
(
SessionStartup
.
sessionType
SessionStartup
.
DEFER_SESSION
)
;
do_test_finished
(
)
;
}
)
;
}
)
;
do_test_pending
(
)
;
}
