"
use
strict
"
;
this
.
EXPORTED_SYMBOLS
=
[
"
PrivacyLevel
"
]
;
const
Cu
=
Components
.
utils
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
gSessionStartup
"
"
mozilla
.
org
/
browser
/
sessionstartup
;
1
"
"
nsISessionStartup
"
)
;
const
PREF
=
"
browser
.
sessionstore
.
privacy_level
"
;
const
PRIVACY_NONE
=
0
;
const
PRIVACY_ENCRYPTED
=
1
;
const
PRIVACY_FULL
=
2
;
var
PrivacyLevel
=
Object
.
freeze
(
{
canSave
:
function
(
{
isHttps
}
)
{
let
level
=
Services
.
prefs
.
getIntPref
(
PREF
)
;
if
(
level
=
=
PRIVACY_FULL
)
{
return
false
;
}
if
(
isHttps
&
&
level
=
=
PRIVACY_ENCRYPTED
)
{
return
false
;
}
return
true
;
}
}
)
;
