add_task
(
async
function
test_default_bookmark_toolbar_visibility
(
)
{
const
browserGlue
=
Cc
[
"
mozilla
.
org
/
browser
/
browserglue
;
1
"
]
.
getService
(
Ci
.
nsIObserver
)
;
let
placesInitCompleteObserved
=
TestUtils
.
topicObserved
(
"
places
-
browser
-
init
-
complete
"
)
;
browserGlue
.
observe
(
null
"
browser
-
glue
-
test
"
"
places
-
browser
-
init
-
complete
"
)
;
await
placesInitCompleteObserved
;
const
BROWSER_DOCURL
=
AppConstants
.
BROWSER_CHROME_URL
;
let
xulStore
=
Services
.
xulStore
;
is
(
xulStore
.
getValue
(
BROWSER_DOCURL
"
PersonalToolbar
"
"
collapsed
"
)
"
"
"
Check
that
collapsed
isn
'
t
persisted
"
)
;
ok
(
document
.
getElementById
(
"
PersonalToolbar
"
)
.
collapsed
"
The
bookmarks
toolbar
should
be
collapsed
by
default
"
)
;
}
)
;
