"
use
strict
"
;
add_task
(
async
function
(
)
{
FissionTestingUI
.
checkFissionWithoutWebRender
(
)
;
const
isFissionEnabled
=
Services
.
prefs
.
getBoolPref
(
"
fission
.
autostart
"
)
;
let
isWebRenderEnabled
=
Cc
[
"
mozilla
.
org
/
gfx
/
info
;
1
"
]
.
getService
(
Ci
.
nsIGfxInfo
)
.
WebRenderEnabled
;
const
isWarningExpected
=
isFissionEnabled
&
&
!
isWebRenderEnabled
;
await
gBrowserInit
.
idleTasksFinishedPromise
;
let
isWarningFound
=
!
!
gNotificationBox
.
getNotificationWithValue
(
"
warning
-
fission
-
without
-
webrender
-
notification
"
)
;
is
(
isWarningFound
isWarningExpected
"
Did
we
get
the
Fission
/
WebRender
warning
right
?
"
)
;
}
)
;
