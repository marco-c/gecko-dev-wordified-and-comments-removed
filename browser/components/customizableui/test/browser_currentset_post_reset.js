"
use
strict
"
;
function
checkSpacers
(
)
{
let
bsPass
=
ChromeUtils
.
import
(
"
resource
:
/
/
/
modules
/
CustomizableUI
.
jsm
"
null
)
;
let
navbarWidgets
=
CustomizableUI
.
getWidgetIdsInArea
(
"
nav
-
bar
"
)
;
let
currentSetWidgets
=
bsPass
.
CustomizableUIInternal
.
_getCurrentWidgetsInContainer
(
document
.
getElementById
(
"
nav
-
bar
"
)
)
;
navbarWidgets
=
navbarWidgets
.
filter
(
w
=
>
CustomizableUI
.
isSpecialWidget
(
w
)
)
;
currentSetWidgets
=
currentSetWidgets
.
filter
(
w
=
>
CustomizableUI
.
isSpecialWidget
(
w
)
)
;
Assert
.
deepEqual
(
navbarWidgets
currentSetWidgets
"
Should
have
the
same
'
special
'
widgets
in
currentset
and
placements
"
)
;
}
add_task
(
async
function
(
)
{
await
startCustomizing
(
)
;
checkSpacers
(
)
;
CustomizableUI
.
addWidgetToArea
(
"
spring
"
"
nav
-
bar
"
4
)
;
await
gCustomizeMode
.
reset
(
)
;
checkSpacers
(
)
;
await
endCustomizing
(
)
;
}
)
;
