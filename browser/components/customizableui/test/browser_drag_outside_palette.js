"
use
strict
"
;
add_task
(
async
function
(
)
{
await
startCustomizing
(
)
;
let
panelContainer
=
document
.
getElementById
(
"
customization
-
panel
-
container
"
)
;
let
homeButton
=
document
.
getElementById
(
"
home
-
button
"
)
;
let
oldNavbarPlacements
=
CustomizableUI
.
getWidgetIdsInArea
(
"
nav
-
bar
"
)
;
simulateItemDrag
(
homeButton
panelContainer
)
;
assertAreaPlacements
(
CustomizableUI
.
AREA_NAVBAR
oldNavbarPlacements
.
filter
(
w
=
>
w
!
=
"
home
-
button
"
)
)
;
ok
(
homeButton
.
closest
(
"
#
customization
-
palette
"
)
"
Button
should
be
in
the
palette
"
)
;
let
panelHolder
=
document
.
getElementById
(
"
customization
-
panelHolder
"
)
;
simulateItemDrag
(
homeButton
panelHolder
)
;
assertAreaPlacements
(
CustomizableUI
.
AREA_FIXED_OVERFLOW_PANEL
[
"
home
-
button
"
]
)
;
simulateItemDrag
(
homeButton
panelContainer
)
;
assertAreaPlacements
(
CustomizableUI
.
AREA_FIXED_OVERFLOW_PANEL
[
]
)
;
ok
(
homeButton
.
closest
(
"
#
customization
-
palette
"
)
"
Button
should
be
in
the
palette
"
)
;
let
urlbar
=
document
.
getElementById
(
"
urlbar
-
container
"
)
;
simulateItemDrag
(
urlbar
panelContainer
)
;
assertAreaPlacements
(
CustomizableUI
.
AREA_NAVBAR
oldNavbarPlacements
.
filter
(
w
=
>
w
!
=
"
home
-
button
"
)
)
;
}
)
;
registerCleanupFunction
(
async
function
(
)
{
await
gCustomizeMode
.
reset
(
)
;
await
endCustomizing
(
)
;
}
)
;
