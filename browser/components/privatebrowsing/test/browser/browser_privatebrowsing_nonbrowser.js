"
use
strict
"
;
add_task
(
function
*
(
)
{
let
win
=
yield
BrowserTestUtils
.
openNewBrowserWindow
(
{
private
:
true
}
)
;
let
chromeWin
=
win
.
open
(
"
chrome
:
/
/
browser
/
content
/
places
/
places
.
xul
"
"
_blank
"
"
chrome
extrachrome
menubar
resizable
scrollbars
status
toolbar
"
)
;
yield
BrowserTestUtils
.
waitForEvent
(
chromeWin
"
load
"
)
;
let
obsPromise
=
TestUtils
.
topicObserved
(
"
last
-
pb
-
context
-
exited
"
)
;
yield
BrowserTestUtils
.
closeWindow
(
win
)
;
yield
obsPromise
;
Assert
.
ok
(
true
"
Got
the
last
-
pb
-
context
-
exited
notification
"
)
;
chromeWin
.
close
(
)
;
}
)
;
