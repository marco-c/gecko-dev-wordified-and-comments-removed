"
use
strict
"
;
add_task
(
async
function
test_dbLazilyCreated
(
)
{
if
(
!
AppConstants
.
MOZ_SELECTABLE_PROFILES
)
{
ok
(
true
"
Skipping
because
!
AppConstants
.
MOZ_SELECTABLE_PROFILES
"
)
;
return
;
}
ok
(
SelectableProfileService
.
initialized
Selectable
Profile
Service
should
be
initialized
because
the
store
id
is
{
storeID
}
)
;
const
toolkitProfileObject
=
{
storeID
:
null
rootDir
:
"
/
some
/
path
"
}
;
SelectableProfileService
.
groupToolkitProfile
=
toolkitProfileObject
;
await
SelectableProfileService
.
uninit
(
)
;
await
SelectableProfileService
.
init
(
)
;
ok
(
!
SelectableProfileService
.
initialized
Selectable
Profile
Service
should
not
be
initialized
because
the
store
id
is
null
)
;
SelectableProfileService
.
getExecutableProcess
=
(
)
=
>
{
return
{
runw
:
(
)
=
>
{
}
}
;
}
;
await
SelectableProfileService
.
createNewProfile
(
)
;
ok
(
SelectableProfileService
.
initialized
Selectable
Profile
Service
should
be
initialized
because
the
store
id
is
{
SelectableProfileService
.
groupToolkitProfile
.
storeID
}
)
;
}
)
;
