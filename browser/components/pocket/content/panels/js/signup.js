var
PKT_PANEL_OVERLAY
=
function
(
options
)
{
this
.
inited
=
false
;
this
.
active
=
false
;
this
.
initCloseTabEvents
=
function
(
)
{
function
clickHelper
(
selector
source
)
{
document
.
querySelector
(
selector
)
?
.
addEventListener
(
click
event
=
>
{
event
.
preventDefault
(
)
;
thePKT_PANEL
.
sendMessage
(
"
PKT_openTabWithUrl
"
{
url
:
event
.
currentTarget
.
getAttribute
(
href
)
activate
:
true
source
:
source
|
|
"
"
}
)
;
}
)
;
}
clickHelper
(
.
pkt_ext_learnmore
learn_more
)
;
clickHelper
(
.
signup
-
btn
-
firefox
sign_up_1
)
;
clickHelper
(
.
signup
-
btn
-
email
sign_up_2
)
;
clickHelper
(
.
pkt_ext_login
log_in
)
;
}
;
this
.
create
=
function
(
)
{
const
parser
=
new
DOMParser
(
)
;
let
elBody
=
document
.
querySelector
(
body
)
;
let
queryParams
=
new
URL
(
window
.
location
.
href
)
.
searchParams
;
let
pockethost
=
queryParams
.
get
(
pockethost
)
|
|
getpocket
.
com
;
let
language
=
queryParams
.
get
(
locale
)
?
.
split
(
-
)
[
0
]
.
toLowerCase
(
)
;
if
(
this
.
active
)
{
return
;
}
this
.
active
=
true
;
const
templateData
=
{
pockethost
utmCampaign
:
"
firefox_door_hanger_menu
"
utmSource
:
"
control
"
}
;
if
(
language
)
{
elBody
.
classList
.
add
(
pkt_ext_signup_
{
language
}
)
;
}
elBody
.
append
(
parser
.
parseFromString
(
Handlebars
.
templates
.
signup_shell
(
templateData
)
text
/
html
)
.
documentElement
)
;
this
.
initCloseTabEvents
(
)
;
thePKT_PANEL
.
sendMessage
(
"
PKT_show_signup
"
)
;
}
;
}
;
