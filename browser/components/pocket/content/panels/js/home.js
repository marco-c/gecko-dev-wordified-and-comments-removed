var
PKT_PANEL_OVERLAY
=
function
(
options
)
{
this
.
inited
=
false
;
this
.
active
=
false
;
this
.
translations
=
{
}
;
this
.
pockethost
=
"
getpocket
.
com
"
;
this
.
dictJSON
=
{
}
;
this
.
initCloseTabEvents
=
function
(
)
{
function
clickHelper
(
e
linkData
)
{
e
.
preventDefault
(
)
;
thePKT_PANEL
.
sendMessage
(
"
PKT_openTabWithUrl
"
{
url
:
linkData
.
url
activate
:
true
source
:
linkData
.
source
|
|
"
"
position
:
linkData
.
position
}
)
;
}
(
"
.
pkt_ext_mylist
"
)
.
click
(
function
(
e
)
{
clickHelper
(
e
{
source
:
"
home_view_list
"
url
:
(
this
)
.
attr
(
"
href
"
)
}
)
;
}
)
;
(
"
.
pkt_ext_topic
"
)
.
click
(
function
(
e
)
{
const
position
=
(
"
.
pkt_ext_topic
"
)
.
index
(
this
)
;
clickHelper
(
e
{
source
:
"
home_topic
"
url
:
(
this
)
.
attr
(
"
href
"
)
position
}
)
;
}
)
;
(
"
.
pkt_ext_discover
"
)
.
click
(
function
(
e
)
{
clickHelper
(
e
{
source
:
"
home_discover
"
url
:
(
this
)
.
attr
(
"
href
"
)
}
)
;
}
)
;
}
;
this
.
getTranslations
=
function
(
)
{
this
.
dictJSON
=
window
.
pocketStrings
;
}
;
}
;
PKT_PANEL_OVERLAY
.
prototype
=
{
create
(
)
{
var
host
=
window
.
location
.
href
.
match
(
/
pockethost
=
(
[
\
w
|
\
.
]
*
)
&
?
/
)
;
if
(
host
&
&
host
.
length
>
1
)
{
this
.
pockethost
=
host
[
1
]
;
}
var
locale
=
window
.
location
.
href
.
match
(
/
locale
=
(
[
\
w
|
\
.
]
*
)
&
?
/
)
;
if
(
locale
&
&
locale
.
length
>
1
)
{
this
.
locale
=
locale
[
1
]
.
toLowerCase
(
)
;
}
if
(
this
.
active
)
{
return
;
}
this
.
active
=
true
;
const
enableLocalizedExploreMore
=
false
;
this
.
getTranslations
(
)
;
this
.
dictJSON
.
pockethost
=
this
.
pockethost
;
this
.
dictJSON
.
utmsource
=
"
firefox
-
button
"
;
if
(
this
.
locale
)
{
(
"
body
"
)
.
addClass
(
"
pkt_ext_home_
"
+
this
.
locale
)
;
}
(
"
body
"
)
.
append
(
Handlebars
.
templates
.
home_shell
(
this
.
dictJSON
)
)
;
if
(
this
.
locale
.
startsWith
(
"
en
"
)
)
{
const
data
=
{
explorepopulartopics
:
this
.
dictJSON
.
explorepopulartopics
discovermore
:
this
.
dictJSON
.
discovermore
pockethost
:
this
.
dictJSON
.
pockethost
utmsource
:
this
.
dictJSON
.
utmsource
topics
:
[
{
title
:
"
Self
Improvement
"
topic
:
"
self
-
improvement
"
}
{
title
:
"
Food
"
topic
:
"
food
"
}
{
title
:
"
Entertainment
"
topic
:
"
entertainment
"
}
{
title
:
"
Science
"
topic
:
"
science
"
}
]
}
;
const
topics
=
Handlebars
.
templates
.
popular_topics
(
data
)
;
(
"
.
pkt_ext_more
"
)
.
append
(
topics
)
;
}
else
if
(
enableLocalizedExploreMore
)
{
const
explore
=
Handlebars
.
templates
.
explore_more
(
this
.
dictJSON
)
;
(
"
.
pkt_ext_more
"
)
.
append
(
explore
)
;
}
this
.
initCloseTabEvents
(
)
;
thePKT_PANEL
.
sendMessage
(
"
PKT_show_home
"
)
;
}
}
;
