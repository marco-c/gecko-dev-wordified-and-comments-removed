const
path
=
require
(
"
path
"
)
;
const
webpack
=
require
(
"
webpack
"
)
;
const
{
ResourceUriPlugin
}
=
require
(
"
.
.
/
.
.
/
tools
/
resourceUriPlugin
"
)
;
const
{
MozSrcUriPlugin
}
=
require
(
"
.
.
/
.
.
/
tools
/
mozsrcUriPlugin
"
)
;
const
PATHS
=
{
testEntryFile
:
path
.
resolve
(
__dirname
"
.
/
tests
/
unit
/
unit
-
entry
.
js
"
)
testFilesPattern
:
"
.
/
tests
/
unit
/
unit
-
entry
.
js
"
moduleResolveDirectory
:
__dirname
resourcePathRegEx
:
/
^
resource
:
\
/
\
/
activity
-
stream
\
/
/
coverageReportingPath
:
"
logs
/
coverage
/
"
}
;
const
preprocessors
=
{
}
;
preprocessors
[
PATHS
.
testFilesPattern
]
=
[
"
webpack
"
"
sourcemap
"
]
;
module
.
exports
=
function
(
config
)
{
const
isTDD
=
config
.
tdd
;
const
browsers
=
isTDD
?
[
"
Firefox
"
]
:
[
"
FirefoxHeadless
"
]
;
config
.
set
(
{
singleRun
:
!
isTDD
browsers
customLaunchers
:
{
FirefoxHeadless
:
{
base
:
"
Firefox
"
flags
:
[
"
-
-
headless
"
]
}
}
frameworks
:
[
"
chai
"
"
mocha
"
"
sinon
"
]
reporters
:
[
"
coverage
-
istanbul
"
"
mocha
"
"
json
"
]
jsonReporter
:
{
stdout
:
false
outputFile
:
path
.
join
(
"
logs
"
"
karma
-
run
-
results
.
json
"
)
}
coverageIstanbulReporter
:
{
reports
:
[
"
lcov
"
"
text
-
summary
"
]
"
report
-
config
"
:
{
lcov
:
{
projectRoot
:
"
.
.
/
.
.
/
.
.
"
}
}
dir
:
PATHS
.
coverageReportingPath
thresholds
:
!
isTDD
&
&
{
each
:
{
statements
:
80
lines
:
80
functions
:
80
branches
:
80
overrides
:
{
"
modules
/
AboutWelcomeDefaults
.
sys
.
mjs
"
:
{
statements
:
48
.
15
lines
:
48
.
75
functions
:
61
.
54
branches
:
37
.
04
}
"
content
-
src
/
lib
/
aboutwelcome
-
utils
.
mjs
"
:
{
statements
:
73
.
68
lines
:
73
.
68
functions
:
71
.
43
branches
:
66
.
67
}
"
content
-
src
/
components
/
LanguageSwitcher
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
EmbeddedMigrationWizard
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
AddonsPicker
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
SubmenuButton
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
EmbeddedBrowser
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
MSLocalized
.
jsx
"
:
{
statements
:
77
.
42
lines
:
77
.
42
functions
:
75
branches
:
73
.
08
}
"
content
-
src
/
components
/
CTAParagraph
.
jsx
"
:
{
functions
:
50
branches
:
75
}
"
content
-
src
/
components
/
HeroImage
.
jsx
"
:
{
branches
:
62
.
5
}
"
content
-
src
/
components
/
LinkParagraph
.
jsx
"
:
{
functions
:
75
branches
:
37
.
5
}
"
content
-
src
/
components
/
MobileDownloads
.
jsx
"
:
{
branches
:
56
.
25
}
"
content
-
src
/
components
/
Themes
.
jsx
"
:
{
branches
:
50
}
"
content
-
src
/
components
/
MultiStageAboutWelcome
.
jsx
"
:
{
statements
:
78
.
06
lines
:
79
.
89
functions
:
73
.
17
branches
:
61
.
74
}
"
content
-
src
/
components
/
AdditionalCTA
.
jsx
"
:
{
branches
:
75
}
"
content
-
src
/
components
/
MultiStageProtonScreen
.
jsx
"
:
{
branches
:
78
}
"
content
-
src
/
components
/
InstallButton
.
jsx
"
:
{
statements
:
60
lines
:
60
functions
:
60
branches
:
30
}
}
}
}
}
files
:
[
PATHS
.
testEntryFile
]
preprocessors
webpack
:
{
mode
:
"
none
"
devtool
:
"
inline
-
source
-
map
"
resolve
:
{
extensions
:
[
"
.
js
"
"
.
jsx
"
]
modules
:
[
PATHS
.
moduleResolveDirectory
"
node_modules
"
]
alias
:
{
asrouter
:
path
.
join
(
__dirname
"
.
.
/
asrouter
"
)
}
}
plugins
:
[
new
ResourceUriPlugin
(
{
resourcePathRegExes
:
[
[
new
RegExp
(
"
^
resource
:
/
/
/
modules
/
asrouter
/
"
)
path
.
join
(
__dirname
"
.
.
/
asrouter
/
modules
/
"
)
]
]
}
)
new
MozSrcUriPlugin
(
{
baseDir
:
path
.
join
(
__dirname
"
.
.
"
"
.
.
"
"
.
.
"
)
}
)
new
webpack
.
DefinePlugin
(
{
"
process
.
env
.
NODE_ENV
"
:
JSON
.
stringify
(
"
development
"
)
}
)
]
externals
:
{
"
react
/
addons
"
:
true
"
react
/
lib
/
ReactContext
"
:
true
"
react
/
lib
/
ExecutionEnvironment
"
:
true
}
module
:
{
rules
:
[
{
test
:
/
\
.
js
/
exclude
:
[
/
node_modules
\
/
(
?
!
fluent
\
/
)
.
*
/
/
tests
/
]
loader
:
"
babel
-
loader
"
}
{
test
:
/
\
.
jsx
/
exclude
:
/
node_modules
/
loader
:
"
babel
-
loader
"
options
:
{
presets
:
[
"
babel
/
preset
-
react
"
]
}
}
{
test
:
/
\
.
md
/
use
:
"
raw
-
loader
"
}
{
enforce
:
"
post
"
test
:
/
\
.
m
?
js
[
mx
]
?
/
loader
:
"
jsdevtools
/
coverage
-
istanbul
-
loader
"
options
:
{
esModules
:
true
}
include
:
[
path
.
resolve
(
"
content
-
src
"
)
path
.
resolve
(
"
modules
"
)
]
exclude
:
[
path
.
resolve
(
"
tests
"
)
path
.
resolve
(
"
.
.
/
newtab
"
)
]
}
]
}
}
webpackMiddleware
:
{
noInfo
:
true
}
}
)
;
}
;
