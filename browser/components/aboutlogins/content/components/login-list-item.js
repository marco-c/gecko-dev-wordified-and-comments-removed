export
default
class
LoginListItemFactory
{
static
create
(
login
)
{
let
loginListItemTemplate
=
document
.
querySelector
(
"
#
login
-
list
-
item
-
template
"
)
;
let
loginListItem
=
loginListItemTemplate
.
content
.
cloneNode
(
true
)
;
let
listItem
=
loginListItem
.
querySelector
(
"
li
"
)
;
let
title
=
loginListItem
.
querySelector
(
"
.
title
"
)
;
let
username
=
loginListItem
.
querySelector
(
"
.
username
"
)
;
let
favicon
=
loginListItem
.
querySelector
(
"
.
favicon
"
)
;
listItem
.
setAttribute
(
"
role
"
"
option
"
)
;
if
(
!
login
.
guid
)
{
listItem
.
id
=
"
new
-
login
-
list
-
item
"
;
document
.
l10n
.
setAttributes
(
title
"
login
-
list
-
item
-
title
-
new
-
login
"
)
;
document
.
l10n
.
setAttributes
(
username
"
login
-
list
-
item
-
subtitle
-
new
-
login
"
)
;
return
listItem
;
}
listItem
.
id
=
"
lli
-
"
+
login
.
guid
;
listItem
.
dataset
.
guid
=
login
.
guid
;
listItem
.
_login
=
login
;
title
.
textContent
=
login
.
title
;
if
(
login
.
username
.
trim
(
)
)
{
username
.
removeAttribute
(
"
data
-
l10n
-
id
"
)
;
username
.
textContent
=
login
.
username
.
trim
(
)
;
}
else
{
document
.
l10n
.
setAttributes
(
username
"
login
-
list
-
item
-
subtitle
-
missing
-
username
"
)
;
}
if
(
login
.
faviconDataURI
)
{
favicon
.
src
=
login
.
faviconDataURI
;
document
.
l10n
.
setAttributes
(
favicon
"
login
-
favicon
"
{
title
:
login
.
title
}
)
;
}
return
listItem
;
}
}
