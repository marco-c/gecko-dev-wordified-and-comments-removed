"
use
strict
"
;
add_task
(
async
function
testValidAttrCodes
(
)
{
for
(
let
entry
of
validAttrCodes
)
{
let
result
=
AttributionCode
.
parseAttributionCode
(
entry
.
code
)
;
Assert
.
deepEqual
(
result
entry
.
parsed
"
Parsed
code
should
match
expected
value
code
was
:
"
+
entry
.
code
)
;
result
=
AttributionCode
.
serializeAttributionData
(
entry
.
parsed
)
;
if
(
!
entry
.
doesNotRoundtrip
)
{
Assert
.
deepEqual
(
result
entry
.
code
"
Serialized
data
should
match
expected
value
code
was
:
"
+
entry
.
code
)
;
}
}
}
)
;
add_task
(
async
function
testInvalidAttrCodes
(
)
{
for
(
let
code
of
invalidAttrCodes
)
{
let
result
=
AttributionCode
.
parseAttributionCode
(
code
)
;
Assert
.
deepEqual
(
result
{
}
"
Code
should
have
failed
to
parse
:
"
+
code
)
;
}
}
)
;
