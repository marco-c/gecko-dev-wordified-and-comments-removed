const
[
prefixMap
aliasMap
sourceMap
]
=
require
(
"
.
/
chrome
-
map
.
js
"
)
;
function
rewriteChromeUri
(
uri
)
{
if
(
uri
in
aliasMap
)
{
return
rewriteChromeUri
(
aliasMap
[
uri
]
)
;
}
for
(
let
[
prefix
[
bundlePath
]
]
of
Object
.
entries
(
prefixMap
)
)
{
if
(
uri
.
startsWith
(
prefix
)
)
{
if
(
!
bundlePath
.
endsWith
(
"
/
"
)
)
{
bundlePath
+
=
"
/
"
;
}
let
relativePath
=
uri
.
slice
(
prefix
.
length
)
;
let
objdirPath
=
bundlePath
+
relativePath
;
for
(
let
[
_objdirPath
[
filePath
]
]
of
Object
.
entries
(
sourceMap
)
)
{
if
(
_objdirPath
=
=
objdirPath
)
{
return
filePath
;
}
}
}
}
return
"
"
;
}
module
.
exports
=
rewriteChromeUri
;
