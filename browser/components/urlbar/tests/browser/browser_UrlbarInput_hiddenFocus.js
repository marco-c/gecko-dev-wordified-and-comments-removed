add_task
(
async
function
(
)
{
let
tab
=
await
BrowserTestUtils
.
openNewForegroundTab
(
gBrowser
)
;
registerCleanupFunction
(
async
function
(
)
{
BrowserTestUtils
.
removeTab
(
tab
)
;
URLBarSetURI
(
)
;
}
)
;
gURLBar
.
blur
(
)
;
ok
(
!
gURLBar
.
focused
"
url
bar
is
not
focused
"
)
;
ok
(
!
gURLBar
.
hasAttribute
(
"
focused
"
)
"
url
bar
is
not
visibly
focused
"
)
;
gURLBar
.
setHiddenFocus
(
)
;
ok
(
gURLBar
.
focused
"
url
bar
is
focused
"
)
;
ok
(
!
gURLBar
.
hasAttribute
(
"
focused
"
)
"
url
bar
is
not
visibly
focused
"
)
;
gURLBar
.
removeHiddenFocus
(
)
;
ok
(
gURLBar
.
focused
"
url
bar
is
focused
"
)
;
ok
(
gURLBar
.
hasAttribute
(
"
focused
"
)
"
url
bar
is
visibly
focused
"
)
;
}
)
;
