"
use
strict
"
;
add_setup
(
function
(
)
{
AccessibilityUtils
.
setEnv
(
{
mustHaveAccessibleRule
:
false
}
)
;
registerCleanupFunction
(
async
(
)
=
>
{
AccessibilityUtils
.
resetEnv
(
)
;
}
)
;
}
)
;
add_task
(
async
function
(
)
{
await
BrowserTestUtils
.
withNewTab
(
"
about
:
robots
"
async
(
)
=
>
{
for
(
let
elt
of
[
gBrowser
.
selectedBrowser
gBrowser
.
tabContainer
document
.
querySelector
(
"
#
nav
-
bar
toolbarspring
"
)
]
)
{
await
UrlbarTestUtils
.
promiseAutocompleteResultPopup
(
{
window
waitForFocus
value
:
"
dummy
"
}
)
;
Assert
.
ok
(
!
!
elt
"
Found
a
valid
element
:
"
+
(
elt
.
id
|
|
elt
.
localName
)
)
;
await
UrlbarTestUtils
.
promisePopupClose
(
window
(
)
=
>
EventUtils
.
synthesizeNativeMouseEvent
(
{
type
:
"
click
"
target
:
elt
atCenter
:
true
}
)
)
;
}
}
)
;
}
)
;
