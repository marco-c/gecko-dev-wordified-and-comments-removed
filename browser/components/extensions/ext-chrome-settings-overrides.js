"
use
strict
"
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
}
=
Components
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyModuleGetter
(
this
"
ExtensionPreferencesManager
"
"
resource
:
/
/
gre
/
modules
/
ExtensionPreferencesManager
.
jsm
"
)
;
extensions
.
on
(
"
manifest_chrome_settings_overrides
"
(
type
directive
extension
manifest
)
=
>
{
if
(
manifest
.
chrome_settings_overrides
.
homepage
)
{
ExtensionPreferencesManager
.
setSetting
(
extension
"
homepage_override
"
manifest
.
chrome_settings_overrides
.
homepage
)
;
}
}
)
;
ExtensionPreferencesManager
.
addSetting
(
"
homepage_override
"
{
prefNames
:
[
"
browser
.
startup
.
homepage
"
]
setCallback
(
value
)
{
return
{
"
browser
.
startup
.
homepage
"
:
value
}
;
}
}
)
;
