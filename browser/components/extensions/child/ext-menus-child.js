"
use
strict
"
;
ChromeUtils
.
defineESModuleGetters
(
this
{
ContextMenuChild
:
"
resource
:
/
/
/
actors
/
ContextMenuChild
.
sys
.
mjs
"
}
)
;
this
.
menusChild
=
class
extends
ExtensionAPI
{
getAPI
(
context
)
{
return
{
menus
:
{
getTargetElement
(
targetElementId
)
{
let
element
;
let
lastMenuTarget
=
ContextMenuChild
.
getLastTarget
(
context
.
contentWindow
.
docShell
.
browsingContext
)
;
if
(
lastMenuTarget
&
&
Math
.
floor
(
lastMenuTarget
.
timeStamp
)
=
=
=
targetElementId
)
{
element
=
lastMenuTarget
.
targetRef
.
get
(
)
;
}
if
(
element
&
&
element
.
getRootNode
(
{
composed
:
true
}
)
=
=
=
context
.
contentWindow
.
document
)
{
return
element
;
}
return
null
;
}
}
}
;
}
}
;
