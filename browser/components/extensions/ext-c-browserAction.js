"
use
strict
"
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
ExtensionUtils
.
jsm
"
)
;
var
{
IconDetails
}
=
ExtensionUtils
;
extensions
.
registerSchemaAPI
(
"
browserAction
"
"
addon_child
"
context
=
>
{
return
{
browserAction
:
{
setIcon
:
function
(
details
)
{
let
normalizedDetails
=
{
tabId
:
details
.
tabId
path
:
IconDetails
.
normalize
(
details
context
.
extension
context
)
}
;
return
context
.
childManager
.
callParentAsyncFunction
(
"
browserAction
.
setIcon
"
[
normalizedDetails
]
)
;
}
}
}
;
}
)
;
