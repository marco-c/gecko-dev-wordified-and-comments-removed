"
use
strict
"
;
var
{
SpreadArgs
}
=
ExtensionCommon
;
this
.
devtools_inspectedWindow
=
class
extends
ExtensionAPI
{
getAPI
(
context
)
{
const
callerInfo
=
{
addonId
:
context
.
extension
.
id
url
:
context
.
extension
.
baseURI
.
spec
}
;
return
{
devtools
:
{
inspectedWindow
:
{
async
eval
(
expression
options
)
{
const
toolboxEvalOptions
=
await
getToolboxEvalOptions
(
context
)
;
const
evalOptions
=
Object
.
assign
(
{
}
options
toolboxEvalOptions
)
;
const
commands
=
await
context
.
getDevToolsCommands
(
)
;
const
evalResult
=
await
commands
.
inspectedWindowCommand
.
eval
(
callerInfo
expression
evalOptions
)
;
return
new
SpreadArgs
(
[
evalResult
.
value
evalResult
.
exceptionInfo
]
)
;
}
async
reload
(
options
)
{
const
{
ignoreCache
userAgent
injectedScript
}
=
options
|
|
{
}
;
const
commands
=
await
context
.
getDevToolsCommands
(
)
;
commands
.
inspectedWindowCommand
.
reload
(
callerInfo
{
ignoreCache
userAgent
injectedScript
}
)
;
}
}
}
}
;
}
}
;
