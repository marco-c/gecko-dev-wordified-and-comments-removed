"
use
strict
"
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
}
=
Components
;
XPCOMUtils
.
defineLazyGetter
(
this
"
History
"
(
)
=
>
{
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
PlacesUtils
.
jsm
"
)
;
return
PlacesUtils
.
history
;
}
)
;
extensions
.
registerSchemaAPI
(
"
history
"
"
history
"
(
extension
context
)
=
>
{
return
{
history
:
{
deleteAll
:
function
(
)
{
return
History
.
clear
(
)
;
}
deleteRange
:
function
(
filter
)
{
let
newFilter
=
{
beginDate
:
new
Date
(
filter
.
startTime
)
endDate
:
new
Date
(
filter
.
endTime
)
}
;
return
History
.
removeVisitsByFilter
(
newFilter
)
.
then
(
(
)
=
>
undefined
)
;
}
deleteUrl
:
function
(
details
)
{
let
url
=
details
.
url
;
return
History
.
remove
(
url
)
.
then
(
(
)
=
>
undefined
)
;
}
}
}
;
}
)
;
