"
use
strict
"
;
async
function
checkPocket
(
shouldBeEnabled
)
{
return
BrowserTestUtils
.
waitForCondition
(
(
)
=
>
{
return
(
!
!
CustomizableUI
.
getWidget
(
"
save
-
to
-
pocket
-
button
"
)
=
=
shouldBeEnabled
)
;
}
"
Expecting
Pocket
to
be
"
+
shouldBeEnabled
)
;
}
add_task
(
async
function
test_disable_firefox_screenshots
(
)
{
await
BrowserTestUtils
.
withNewTab
(
"
data
:
text
/
html
Test
"
async
function
(
)
{
await
checkPocket
(
true
)
;
await
setupPolicyEngineWithJson
(
{
policies
:
{
DisablePocket
:
true
}
}
)
;
await
checkPocket
(
false
)
;
}
)
;
}
)
;
