"
use
strict
"
;
add_task
(
async
function
test_pinned_and_hidden_tabs
(
)
{
const
startingTab
=
gBrowser
.
selectedTab
;
const
tabToHide
=
BrowserTestUtils
.
addTab
(
gBrowser
"
data
:
text
/
plain
;
hidden
tab
"
)
;
info
(
"
ensure
that
there
is
a
hidden
tab
before
a
visible
tab
"
)
;
gBrowser
.
moveTabBefore
(
tabToHide
startingTab
)
;
gBrowser
.
hideTab
(
tabToHide
)
;
info
(
"
create
a
new
pinned
tab
without
a
specified
tab
index
position
"
)
;
const
pinnedTab
=
BrowserTestUtils
.
addTab
(
gBrowser
"
data
:
text
/
plain
;
pinned
tab
"
{
pinned
:
true
}
)
;
Assert
.
ok
(
pinnedTab
.
pinned
"
Tab
should
have
been
created
as
a
pinned
tab
"
)
;
Assert
.
equal
(
pinnedTab
.
_tPos
0
"
Pinned
tabs
should
come
before
all
unpinned
tabs
"
)
;
Assert
.
equal
(
gBrowser
.
pinnedTabCount
1
"
Pinned
tab
count
should
be
correct
"
)
;
BrowserTestUtils
.
removeTab
(
tabToHide
)
;
BrowserTestUtils
.
removeTab
(
pinnedTab
)
;
}
)
;
