"
use
strict
"
;
var
EXPORTED_SYMBOLS
=
[
"
PageMetadataChild
"
]
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
actors
/
ActorChild
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
ContextMenuChild
"
"
resource
:
/
/
/
modules
/
ContextMenuChild
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
PageMetadata
"
"
resource
:
/
/
gre
/
modules
/
PageMetadata
.
jsm
"
)
;
class
PageMetadataChild
extends
ActorChild
{
receiveMessage
(
message
)
{
switch
(
message
.
name
)
{
case
"
PageMetadata
:
GetPageData
"
:
{
let
target
=
ContextMenuChild
.
getTarget
(
this
.
mm
message
)
;
let
result
=
PageMetadata
.
getData
(
this
.
content
.
document
target
)
;
this
.
mm
.
sendAsyncMessage
(
"
PageMetadata
:
PageDataResult
"
result
)
;
break
;
}
case
"
PageMetadata
:
GetMicroformats
"
:
{
let
target
=
ContextMenuChild
.
getTarget
(
this
.
mm
message
)
;
let
result
=
PageMetadata
.
getMicroformats
(
this
.
content
.
document
target
)
;
this
.
mm
.
sendAsyncMessage
(
"
PageMetadata
:
MicroformatsResult
"
result
)
;
break
;
}
}
}
}
