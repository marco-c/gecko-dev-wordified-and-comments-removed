document
.
addEventListener
(
"
DOMContentLoaded
"
(
)
=
>
{
const
navigatorToolbox
=
document
.
getElementById
(
"
navigator
-
toolbox
"
)
;
const
widgetOverflow
=
document
.
getElementById
(
"
widget
-
overflow
"
)
;
function
onPopupShowing
(
event
)
{
switch
(
event
.
target
.
id
)
{
case
"
PlacesChevronPopup
"
:
document
.
getElementById
(
"
PlacesToolbar
"
)
.
_placesView
.
_onChevronPopupShowing
(
event
)
;
break
;
case
"
BMB_bookmarksPopup
"
:
BookmarkingUI
.
onPopupShowing
(
event
)
;
case
"
BMB_bookmarksToolbarPopup
"
:
case
"
BMB_unsortedBookmarksPopup
"
:
case
"
BMB_mobileBookmarksPopup
"
:
if
(
!
event
.
target
.
parentNode
.
_placesView
)
{
let
placeMap
=
{
BMB_bookmarksPopup
:
PlacesUtils
.
bookmarks
.
menuGuid
BMB_bookmarksToolbarPopup
:
PlacesUtils
.
bookmarks
.
toolbarGuid
BMB_unsortedBookmarksPopup
:
PlacesUtils
.
bookmarks
.
unfiledGuid
BMB_mobileBookmarksPopup
:
PlacesUtils
.
bookmarks
.
mobileGuid
}
;
new
PlacesMenu
(
event
place
:
parent
=
{
placeMap
[
event
.
target
.
id
]
}
)
;
}
break
;
}
}
navigatorToolbox
.
addEventListener
(
"
popupshowing
"
onPopupShowing
)
;
widgetOverflow
.
addEventListener
(
"
popupshowing
"
onPopupShowing
)
;
}
{
once
:
true
}
)
;
