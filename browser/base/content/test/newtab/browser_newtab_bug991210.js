add_task
(
function
*
(
)
{
yield
pushPrefs
(
[
"
browser
.
newtab
.
preload
"
false
]
)
;
let
afterLoadProvider
=
{
getLinks
:
function
(
callback
)
{
this
.
callback
=
callback
;
}
addObserver
:
function
(
)
{
}
}
;
NewTabUtils
.
links
.
addProvider
(
afterLoadProvider
)
;
yield
BrowserTestUtils
.
openNewForegroundTab
(
gBrowser
"
about
:
newtab
"
)
;
afterLoadProvider
.
callback
(
[
]
)
;
yield
ContentTask
.
spawn
(
gBrowser
.
selectedBrowser
{
}
function
*
(
)
{
let
{
_cellMargin
_cellHeight
_cellWidth
node
}
=
content
.
gGrid
;
Assert
.
notEqual
(
_cellMargin
null
"
grid
has
a
computed
cell
margin
"
)
;
Assert
.
notEqual
(
_cellHeight
null
"
grid
has
a
computed
cell
height
"
)
;
Assert
.
notEqual
(
_cellWidth
null
"
grid
has
a
computed
cell
width
"
)
;
let
{
height
maxHeight
maxWidth
}
=
node
.
style
;
Assert
.
notEqual
(
height
"
"
"
grid
has
a
computed
grid
height
"
)
;
Assert
.
notEqual
(
maxHeight
"
"
"
grid
has
a
computed
grid
max
-
height
"
)
;
Assert
.
notEqual
(
maxWidth
"
"
"
grid
has
a
computed
grid
max
-
width
"
)
;
}
)
;
NewTabUtils
.
links
.
removeProvider
(
afterLoadProvider
)
;
}
)
;
