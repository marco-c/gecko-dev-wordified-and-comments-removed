add_task
(
function
*
(
)
{
yield
testOnWindow
(
undefined
)
;
yield
setLinks
(
"
0
1
2
3
4
5
6
7
8
9
"
)
;
yield
*
addNewTabPageTab
(
)
;
yield
pinCell
(
0
)
;
yield
*
checkGrid
(
"
0p
1
2
3
4
5
6
7
8
"
)
;
yield
testOnWindow
(
{
private
:
true
}
)
;
yield
*
addNewTabPageTab
(
)
;
yield
*
checkGrid
(
"
0p
1
2
3
4
5
6
7
8
"
)
;
yield
blockCell
(
1
)
;
yield
*
checkGrid
(
"
0p
2
3
4
5
6
7
8
"
)
;
yield
unpinCell
(
0
)
;
yield
*
checkGrid
(
"
0
2
3
4
5
6
7
8
"
)
;
yield
testOnWindow
(
undefined
)
;
yield
*
addNewTabPageTab
(
)
;
yield
*
checkGrid
(
"
0
2
3
4
5
6
7
8
"
)
}
)
;
var
windowsToClose
=
[
]
;
function
*
testOnWindow
(
options
)
{
let
newWindowPromise
=
BrowserTestUtils
.
waitForNewWindow
(
)
;
var
win
=
OpenBrowserWindow
(
options
)
;
windowsToClose
.
push
(
win
)
;
gWindow
=
win
;
yield
newWindowPromise
;
}
registerCleanupFunction
(
function
(
)
{
gWindow
=
window
;
windowsToClose
.
forEach
(
function
(
win
)
{
win
.
close
(
)
;
}
)
;
}
)
;
