add_task
(
async
function
test
(
)
{
await
new
Promise
(
(
resolve
reject
)
=
>
{
FormHistory
.
update
(
{
op
:
"
remove
"
}
{
handleError
(
error
)
{
reject
(
error
)
;
}
handleCompletion
(
reason
)
{
if
(
!
reason
)
{
resolve
(
)
;
}
else
{
reject
(
)
;
}
}
}
)
;
}
)
;
await
Sanitizer
.
sanitize
(
[
"
formdata
"
]
)
;
ok
(
!
gFindBar
.
hasTransactions
"
pre
-
test
baseline
for
sanitizer
"
)
;
gFindBar
.
getElement
(
"
findbar
-
textbox
"
)
.
value
=
"
m
"
;
ok
(
gFindBar
.
hasTransactions
"
formdata
can
be
cleared
after
input
"
)
;
await
Sanitizer
.
sanitize
(
[
"
formdata
"
]
)
;
is
(
gFindBar
.
getElement
(
"
findbar
-
textbox
"
)
.
value
"
"
"
findBar
textbox
should
be
empty
after
sanitize
"
)
;
ok
(
!
gFindBar
.
hasTransactions
"
No
transactions
after
sanitize
"
)
;
}
)
;
