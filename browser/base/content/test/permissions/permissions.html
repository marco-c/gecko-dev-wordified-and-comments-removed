<
!
DOCTYPE
HTML
>
<
html
dir
=
"
ltr
"
xml
:
lang
=
"
en
-
US
"
lang
=
"
en
-
US
"
>
<
head
>
<
meta
charset
=
"
utf8
"
>
<
/
head
>
<
script
>
var
gKeyDowns
=
0
;
var
gKeyPresses
=
0
;
navigator
.
serviceWorker
.
register
(
"
dummy
.
js
"
)
;
function
requestPush
(
)
{
return
navigator
.
serviceWorker
.
ready
.
then
(
function
(
serviceWorkerRegistration
)
{
serviceWorkerRegistration
.
pushManager
.
subscribe
(
)
;
}
)
;
}
function
requestGeo
(
)
{
return
navigator
.
geolocation
.
getCurrentPosition
(
(
)
=
>
{
parent
.
postMessage
(
"
allow
"
"
*
"
)
;
}
error
=
>
{
/
/
PERMISSION_DENIED
=
1
parent
.
postMessage
(
error
.
code
=
=
1
?
"
deny
"
:
"
allow
"
"
*
"
)
;
}
)
;
}
window
.
onmessage
=
function
(
event
)
{
switch
(
event
.
data
)
{
case
"
push
"
:
requestPush
(
)
;
break
;
}
}
;
<
/
script
>
<
body
onkeydown
=
"
gKeyDowns
+
+
;
"
onkeypress
=
"
gKeyPresses
+
+
"
>
<
button
id
=
"
geo
"
onclick
=
"
requestGeo
(
)
"
>
Geolocation
<
/
button
>
<
button
id
=
"
desktop
-
notification
"
onclick
=
"
Notification
.
requestPermission
(
)
"
>
Notifications
<
/
button
>
<
button
id
=
"
push
"
onclick
=
"
requestPush
(
)
"
>
Push
Notifications
<
/
button
>
<
button
id
=
"
camera
"
onclick
=
"
navigator
.
mediaDevices
.
getUserMedia
(
{
video
:
true
fake
:
true
}
)
"
>
Camera
<
/
button
>
<
/
body
>
<
/
html
>
