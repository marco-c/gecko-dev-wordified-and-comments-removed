"
use
strict
"
;
requestLongerTimeout
(
5
)
;
const
EXPECTED_REFLOWS_FIRST_OPEN
=
[
]
;
if
(
AppConstants
.
platform
!
=
"
macosx
"
&
&
(
AppConstants
.
DEBUG
|
|
AppConstants
.
platform
=
=
"
linux
"
|
|
AppConstants
.
isPlatformAndVersionAtLeast
(
"
win
"
"
10
"
)
)
)
{
EXPECTED_REFLOWS_FIRST_OPEN
.
push
(
{
stack
:
[
"
__rebuild
chrome
:
/
/
browser
/
content
/
search
/
search
-
one
-
offs
.
js
"
]
}
)
;
}
EXPECTED_REFLOWS_FIRST_OPEN
.
push
(
{
stack
:
[
"
_handleOverflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
handleOverUnderflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
_reuseAcItem
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
_appendCurrentResult
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
_invalidate
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
invalidate
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
]
maxCount
:
36
}
{
stack
:
[
"
_handleOverflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
handleOverUnderflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
_openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openPopup
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
set_popupOpen
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
]
maxCount
:
6
}
{
stack
:
[
"
_openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openPopup
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
set_popupOpen
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
]
}
)
;
const
EXPECTED_REFLOWS_SECOND_OPEN
=
[
{
stack
:
[
"
_handleOverflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
handleOverUnderflow
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
_reuseAcItem
chrome
:
/
/
global
/
content
/
elements
/
autocomplete
-
richlistitem
.
js
"
"
_appendCurrentResult
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
_invalidate
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
invalidate
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
]
maxCount
:
24
}
{
stack
:
[
"
_openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openAutocompletePopup
chrome
:
/
/
browser
/
content
/
urlbarBindings
.
xml
"
"
openPopup
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
"
set_popupOpen
chrome
:
/
/
global
/
content
/
bindings
/
autocomplete
.
xml
"
]
}
]
;
add_task
(
async
function
awesomebar
(
)
{
await
runUrlbarTest
(
true
false
EXPECTED_REFLOWS_FIRST_OPEN
EXPECTED_REFLOWS_SECOND_OPEN
)
;
}
)
;
