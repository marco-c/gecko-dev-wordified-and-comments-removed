add_task
(
async
function
removeTabsToTheEnd
(
)
{
let
firstTab
=
await
addTab
(
)
;
let
pinnedTab
=
await
addTab
(
)
;
let
lastTab
=
await
addTab
(
)
;
gBrowser
.
pinTab
(
pinnedTab
)
;
is
(
gBrowser
.
getTabsToTheEndFrom
(
firstTab
)
.
length
1
"
One
unpinned
tab
towards
the
end
"
)
;
gBrowser
.
removeTabsToTheEndFrom
(
firstTab
)
;
ok
(
!
firstTab
.
closing
"
First
tab
is
not
closing
"
)
;
ok
(
!
pinnedTab
.
closing
"
Pinned
tab
is
not
closing
"
)
;
ok
(
lastTab
.
closing
"
Last
tab
is
closing
"
)
;
for
(
let
tab
of
[
firstTab
pinnedTab
]
)
{
BrowserTestUtils
.
removeTab
(
tab
)
;
}
}
)
;
