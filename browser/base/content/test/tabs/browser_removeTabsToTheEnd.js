add_task
(
async
function
removeTabsToTheEnd
(
)
{
let
originalTab
=
gBrowser
.
selectedTab
;
let
pinnedTab
=
await
addTab
(
)
;
let
lastTab
=
await
addTab
(
)
;
gBrowser
.
pinTab
(
pinnedTab
)
;
is
(
gBrowser
.
getTabsToTheEndFrom
(
originalTab
)
.
length
1
"
One
unpinned
tab
towards
the
end
"
)
;
gBrowser
.
removeTabsToTheEndFrom
(
originalTab
)
;
ok
(
!
originalTab
.
closing
"
Original
tab
is
not
closing
"
)
;
ok
(
!
pinnedTab
.
closing
"
Pinned
tab
is
not
closing
"
)
;
ok
(
lastTab
.
closing
"
Last
tab
is
closing
"
)
;
BrowserTestUtils
.
removeTab
(
pinnedTab
)
;
}
)
;
