add_task
(
async
function
removeTabsToTheStart
(
)
{
let
originalTab
=
gBrowser
.
selectedTab
;
gBrowser
.
pinTab
(
originalTab
)
;
let
firstTab
=
await
addTab
(
)
;
let
pinnedTab
=
await
addTab
(
)
;
let
lastTab
=
await
addTab
(
)
;
gBrowser
.
pinTab
(
pinnedTab
)
;
is
(
gBrowser
.
getTabsToTheStartFrom
(
lastTab
)
.
length
1
"
One
unpinned
tab
towards
the
start
"
)
;
gBrowser
.
removeTabsToTheStartFrom
(
lastTab
)
;
ok
(
firstTab
.
closing
"
First
tab
is
closing
"
)
;
ok
(
!
pinnedTab
.
closing
"
Pinned
tab
is
not
closing
"
)
;
ok
(
!
lastTab
.
closing
"
Last
tab
is
not
closing
"
)
;
gBrowser
.
unpinTab
(
originalTab
)
;
for
(
let
tab
of
[
pinnedTab
lastTab
]
)
{
BrowserTestUtils
.
removeTab
(
tab
)
;
}
}
)
;
