"
use
strict
"
;
const
PAGE
=
"
data
:
text
/
html
<
html
>
<
body
>
A
%
20regular
%
20everyday
%
20normal
%
20page
.
"
;
function
crashTabTestHelper
(
)
{
return
BrowserTestUtils
.
withNewTab
(
{
gBrowser
url
:
PAGE
}
async
function
(
browser
)
{
TabCrashHandler
.
testBuildIDMismatch
=
true
;
await
BrowserTestUtils
.
crashFrame
(
browser
false
)
;
let
doc
=
browser
.
contentDocument
;
let
title
=
doc
.
getElementById
(
"
title
"
)
;
let
description
=
doc
.
getElementById
(
"
errorLongContent
"
)
;
let
restartButton
=
doc
.
getElementById
(
"
restart
"
)
;
ok
(
title
"
Title
element
exists
.
"
)
;
ok
(
description
"
Description
element
exists
.
"
)
;
ok
(
restartButton
"
Restart
button
exists
.
"
)
;
TabCrashHandler
.
testBuildIDMismatch
=
false
;
}
)
;
}
add_task
(
async
function
test_default
(
)
{
await
crashTabTestHelper
(
)
;
}
)
;
