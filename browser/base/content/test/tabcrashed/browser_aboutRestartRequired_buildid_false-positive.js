"
use
strict
"
;
requestLongerTimeout
(
2
)
;
SimpleTest
.
expectChildProcessCrash
(
)
;
add_task
(
async
function
test_browser_crashed_false_positive_event
(
)
{
info
(
"
Waiting
for
oop
-
browser
-
crashed
event
.
"
)
;
Services
.
telemetry
.
clearScalars
(
)
;
is
(
getFalsePositiveTelemetry
(
)
undefined
"
Build
ID
mismatch
false
positive
count
should
be
undefined
"
)
;
setBuildidMatchDontSendEnv
(
)
;
await
forceCleanProcesses
(
)
;
let
eventPromise
=
getEventPromise
(
"
oop
-
browser
-
crashed
"
"
false
-
positive
"
)
;
let
tab
=
await
openNewTab
(
false
)
;
await
eventPromise
;
unsetBuildidMatchDontSendEnv
(
)
;
is
(
getFalsePositiveTelemetry
(
)
1
"
Build
ID
mismatch
false
positive
count
should
be
1
"
)
;
await
closeTab
(
tab
)
;
}
)
;
