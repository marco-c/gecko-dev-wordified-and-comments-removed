_referrerTests
=
[
{
fromScheme
:
"
http
:
/
/
"
toScheme
:
"
http
:
/
/
"
cross
:
true
result
:
"
http
:
/
/
test1
.
example
.
com
/
"
}
{
fromScheme
:
"
https
:
/
/
"
toScheme
:
"
http
:
/
/
"
cross
:
true
result
:
"
"
}
{
fromScheme
:
"
https
:
/
/
"
toScheme
:
"
http
:
/
/
"
policy
:
"
origin
"
cross
:
true
result
:
"
https
:
/
/
test1
.
example
.
com
/
"
}
{
fromScheme
:
"
https
:
/
/
"
toScheme
:
"
http
:
/
/
"
policy
:
"
origin
"
rel
:
"
noreferrer
"
cross
:
true
result
:
"
"
}
{
fromScheme
:
"
https
:
/
/
"
toScheme
:
"
https
:
/
/
"
policy
:
"
no
-
referrer
"
cross
:
true
result
:
"
"
}
{
fromScheme
:
"
http
:
/
/
"
toScheme
:
"
https
:
/
/
"
policy
:
"
no
-
referrer
"
cross
:
true
result
:
"
"
}
]
;
async
function
startClickPinnedTabTestCase
(
aTestNumber
)
{
info
(
"
browser_referrer_click_pinned_tab
:
"
+
getReferrerTestDescription
(
aTestNumber
)
)
;
let
browser
=
gTestWindow
.
gBrowser
;
browser
.
pinTab
(
browser
.
selectedTab
)
;
someTabLoaded
(
gTestWindow
)
.
then
(
function
(
aNewTab
)
{
checkReferrerAndStartNextTest
(
aTestNumber
null
aNewTab
startClickPinnedTabTestCase
)
;
}
)
;
clickTheLink
(
gTestWindow
"
testlink
"
{
}
)
;
}
function
test
(
)
{
requestLongerTimeout
(
10
)
;
startReferrerTest
(
startClickPinnedTabTestCase
)
;
}
