add_task
(
async
function
(
)
{
var
tab1
=
gBrowser
.
addTab
(
)
;
var
tab2
=
gBrowser
.
addTab
(
)
;
await
BrowserTestUtils
.
switchTab
(
gBrowser
tab2
)
;
gURLBar
.
focus
(
)
;
await
BrowserTestUtils
.
switchTab
(
gBrowser
tab1
)
;
gURLBar
.
openPopup
(
)
;
await
BrowserTestUtils
.
switchTab
(
gBrowser
tab2
)
;
ok
(
!
gURLBar
.
popupOpen
"
urlbar
focused
in
tab
to
switch
to
close
popup
"
)
;
gBrowser
.
removeCurrentTab
(
)
;
gBrowser
.
removeCurrentTab
(
)
;
}
)
;
