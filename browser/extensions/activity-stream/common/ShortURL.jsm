Components
.
utils
.
importGlobalProperties
(
[
"
URL
"
]
)
;
this
.
shortURL
=
function
shortURL
(
link
)
{
if
(
!
link
.
url
&
&
!
link
.
hostname
)
{
return
"
"
;
}
const
{
eTLD
}
=
link
;
const
hostname
=
(
link
.
hostname
|
|
new
URL
(
link
.
url
)
.
hostname
)
.
replace
(
/
^
www
\
.
/
i
"
"
)
;
const
eTLDLength
=
(
eTLD
|
|
"
"
)
.
length
|
|
(
hostname
.
match
(
/
\
.
com
/
)
&
&
3
)
;
const
eTLDExtra
=
eTLDLength
>
0
?
-
(
eTLDLength
+
1
)
:
Infinity
;
return
hostname
.
slice
(
0
eTLDExtra
)
.
toLowerCase
(
)
|
|
hostname
|
|
link
.
title
|
|
link
.
url
;
}
;
this
.
EXPORTED_SYMBOLS
=
[
"
shortURL
"
]
;
