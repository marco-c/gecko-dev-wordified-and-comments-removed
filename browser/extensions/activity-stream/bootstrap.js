"
use
strict
"
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
Services
"
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
resProto
"
"
mozilla
.
org
/
network
/
protocol
;
1
?
name
=
resource
"
"
nsISubstitutingProtocolHandler
"
)
;
const
RESOURCE_HOST
=
"
activity
-
stream
"
;
this
.
install
=
function
install
(
data
reason
)
{
}
;
this
.
startup
=
function
startup
(
data
reason
)
{
resProto
.
setSubstitutionWithFlags
(
RESOURCE_HOST
Services
.
io
.
newURI
(
"
chrome
/
content
/
"
null
data
.
resourceURI
)
resProto
.
ALLOW_CONTENT_ACCESS
)
;
}
;
this
.
shutdown
=
function
shutdown
(
data
reason
)
{
resProto
.
setSubstitution
(
RESOURCE_HOST
null
)
;
}
;
this
.
uninstall
=
function
uninstall
(
data
reason
)
{
}
;
