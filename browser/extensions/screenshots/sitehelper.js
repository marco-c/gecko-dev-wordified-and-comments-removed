"
use
strict
"
;
this
.
sitehelper
=
(
function
(
)
{
catcher
.
registerHandler
(
errorObj
=
>
{
callBackground
(
"
reportError
"
errorObj
)
;
}
)
;
const
capabilities
=
{
}
;
function
registerListener
(
name
func
)
{
capabilities
[
name
]
=
name
;
document
.
addEventListener
(
name
func
)
;
}
function
sendCustomEvent
(
name
detail
)
{
if
(
typeof
detail
=
=
=
"
object
"
)
{
detail
=
JSON
.
stringify
(
detail
)
;
}
document
.
dispatchEvent
(
new
CustomEvent
(
name
{
detail
}
)
)
;
}
registerListener
(
"
delete
-
everything
"
catcher
.
watchFunction
(
event
=
>
{
}
false
)
)
;
registerListener
(
"
copy
-
to
-
clipboard
"
catcher
.
watchFunction
(
event
=
>
{
catcher
.
watchPromise
(
callBackground
(
"
copyShotToClipboard
"
event
.
detail
)
)
;
}
)
)
;
registerListener
(
"
show
-
notification
"
catcher
.
watchFunction
(
event
=
>
{
catcher
.
watchPromise
(
callBackground
(
"
showNotification
"
event
.
detail
)
)
;
}
)
)
;
registerListener
(
"
request
-
addon
-
present
"
catcher
.
watchFunction
(
(
)
=
>
{
sendCustomEvent
(
"
addon
-
present
"
capabilities
)
;
}
)
)
;
sendCustomEvent
(
"
addon
-
present
"
capabilities
)
;
}
)
(
)
;
null
;
