const
path
=
require
(
"
path
"
)
;
const
webpack
=
require
(
"
webpack
"
)
;
const
{
ResourceUriPlugin
}
=
require
(
"
.
.
/
.
.
/
tools
/
resourceUriPlugin
"
)
;
const
PATHS
=
{
testEntryFile
:
path
.
resolve
(
__dirname
"
test
/
unit
/
unit
-
entry
.
js
"
)
testFilesPattern
:
"
test
/
unit
/
*
*
/
*
.
js
"
moduleResolveDirectory
:
__dirname
resourcePathRegEx
:
/
^
resource
:
\
/
\
/
activity
-
stream
\
/
/
coverageReportingPath
:
"
logs
/
coverage
/
"
}
;
const
preprocessors
=
{
}
;
preprocessors
[
PATHS
.
testFilesPattern
]
=
[
"
webpack
"
"
sourcemap
"
]
;
module
.
exports
=
function
(
config
)
{
const
isTDD
=
config
.
tdd
;
const
browsers
=
isTDD
?
[
"
Firefox
"
]
:
[
"
FirefoxHeadless
"
]
;
config
.
set
(
{
singleRun
:
!
isTDD
browsers
customLaunchers
:
{
FirefoxHeadless
:
{
base
:
"
Firefox
"
flags
:
[
"
-
-
headless
"
]
}
}
frameworks
:
[
"
chai
"
"
mocha
"
"
sinon
"
]
reporters
:
[
"
coverage
-
istanbul
"
"
mocha
"
"
json
"
]
jsonReporter
:
{
stdout
:
false
outputFile
:
path
.
join
(
"
logs
"
"
karma
-
run
-
results
.
json
"
)
}
coverageIstanbulReporter
:
{
reports
:
[
"
lcov
"
"
text
-
summary
"
]
"
report
-
config
"
:
{
lcov
:
{
projectRoot
:
"
.
.
/
.
.
/
.
.
"
}
}
dir
:
PATHS
.
coverageReportingPath
thresholds
:
!
isTDD
&
&
{
each
:
{
statements
:
100
lines
:
100
functions
:
100
branches
:
66
overrides
:
{
"
lib
/
AboutPreferences
.
sys
.
mjs
"
:
{
statements
:
98
lines
:
98
functions
:
94
branches
:
66
}
"
lib
/
TelemetryFeed
.
sys
.
mjs
"
:
{
statements
:
10
lines
:
10
functions
:
9
branches
:
0
}
"
content
-
src
/
lib
/
init
-
store
.
js
"
:
{
statements
:
98
lines
:
98
functions
:
100
branches
:
100
}
"
lib
/
DownloadsManager
.
sys
.
mjs
"
:
{
statements
:
100
lines
:
100
functions
:
100
branches
:
78
}
"
lib
/
PlacesFeed
.
sys
.
mjs
"
:
{
statements
:
7
lines
:
7
functions
:
8
branches
:
0
}
"
lib
/
UTEventReporting
.
sys
.
mjs
"
:
{
statements
:
100
lines
:
100
functions
:
100
branches
:
75
}
"
lib
/
Screenshots
.
sys
.
mjs
"
:
{
statements
:
94
lines
:
94
functions
:
75
branches
:
84
}
"
lib
/
Store
.
sys
.
mjs
"
:
{
statements
:
8
lines
:
8
functions
:
0
branches
:
0
}
"
lib
/
TopSitesFeed
.
sys
.
mjs
"
:
{
statements
:
9
lines
:
9
functions
:
5
branches
:
0
}
"
lib
/
TopStoriesFeed
.
sys
.
mjs
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
lib
/
WallpaperFeed
.
sys
.
mjs
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
Base
/
Base
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
FeatureHighlight
/
WallpaperFeatureHighlight
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
TopicSelection
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
InlineTopicSelection
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
DSCard
/
DSCard
.
jsx
"
:
{
statements
:
97
.
97
lines
:
97
.
93
functions
:
100
branches
:
72
.
95
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
CardSections
/
CardSections
.
jsx
"
:
{
statements
:
93
.
62
lines
:
93
.
48
functions
:
92
.
31
branches
:
60
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
SectionContextMenu
/
SectionContextMenu
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
AdBanner
/
AdBanner
.
jsx
"
:
{
branches
:
62
.
5
}
"
content
-
src
/
components
/
DiscoveryStreamComponents
/
*
*
/
*
.
jsx
"
:
{
statements
:
90
.
48
lines
:
90
.
48
functions
:
85
.
71
branches
:
68
.
75
}
"
content
-
src
/
components
/
WallpapersSection
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
Notifications
/
*
*
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
Weather
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
DiscoveryStreamAdmin
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
CustomizeMenu
/
*
*
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
components
/
CustomizeMenu
/
*
.
jsx
"
:
{
statements
:
0
lines
:
0
functions
:
0
branches
:
0
}
"
content
-
src
/
lib
/
link
-
menu
-
options
.
js
"
:
{
statements
:
96
lines
:
96
functions
:
96
branches
:
70
}
"
content
-
src
/
lib
/
hooks
.
jsx
"
:
{
branches
:
60
}
"
content
-
src
/
components
/
*
*
/
*
.
jsx
"
:
{
statements
:
51
.
1
lines
:
52
.
38
functions
:
31
.
2
branches
:
31
.
2
}
}
}
}
}
files
:
[
PATHS
.
testEntryFile
]
preprocessors
webpack
:
{
mode
:
"
none
"
devtool
:
"
inline
-
source
-
map
"
resolve
:
{
extensions
:
[
"
.
js
"
"
.
jsx
"
"
.
mjs
"
]
modules
:
[
PATHS
.
moduleResolveDirectory
"
node_modules
"
]
}
plugins
:
[
new
ResourceUriPlugin
(
{
resourcePathRegExes
:
[
[
new
RegExp
(
"
^
resource
:
/
/
newtab
/
"
)
path
.
join
(
__dirname
"
.
/
"
)
]
[
new
RegExp
(
"
^
resource
:
/
/
/
modules
/
asrouter
/
"
)
path
.
join
(
__dirname
"
.
.
/
.
.
/
components
/
asrouter
/
modules
/
"
)
]
[
new
RegExp
(
"
^
resource
:
/
/
/
modules
/
topsites
/
"
)
path
.
join
(
__dirname
"
.
.
/
.
.
/
components
/
topsites
/
"
)
]
[
new
RegExp
(
"
^
resource
:
/
/
gre
/
modules
/
SearchShortcuts
.
sys
.
mjs
"
)
path
.
join
(
__dirname
"
.
.
/
.
.
/
.
.
/
toolkit
/
components
/
search
/
SearchShortcuts
.
sys
.
mjs
"
)
]
[
new
RegExp
(
"
^
resource
:
/
/
/
modules
/
Dedupe
.
sys
.
mjs
"
)
path
.
join
(
__dirname
"
.
.
/
.
.
/
modules
/
Dedupe
.
sys
.
mjs
"
)
]
]
}
)
new
webpack
.
DefinePlugin
(
{
"
process
.
env
.
NODE_ENV
"
:
JSON
.
stringify
(
"
development
"
)
}
)
]
externals
:
{
"
react
/
addons
"
:
true
"
react
/
lib
/
ReactContext
"
:
true
"
react
/
lib
/
ExecutionEnvironment
"
:
true
}
module
:
{
rules
:
[
{
test
:
/
\
.
js
/
exclude
:
[
/
node_modules
\
/
(
?
!
fluent
\
/
)
.
*
/
/
test
/
]
loader
:
"
babel
-
loader
"
}
{
test
:
/
\
.
jsx
/
exclude
:
/
node_modules
/
loader
:
"
babel
-
loader
"
options
:
{
presets
:
[
"
babel
/
preset
-
react
"
]
}
}
{
test
:
/
\
.
md
/
use
:
"
raw
-
loader
"
}
{
enforce
:
"
post
"
test
:
/
\
.
js
[
x
]
?
/
loader
:
"
jsdevtools
/
coverage
-
istanbul
-
loader
"
options
:
{
esModules
:
true
}
include
:
[
path
.
resolve
(
"
content
-
src
"
)
path
.
resolve
(
"
lib
"
)
path
.
resolve
(
"
common
"
)
]
exclude
:
[
path
.
resolve
(
"
test
"
)
path
.
resolve
(
"
vendor
"
)
]
}
]
}
}
webpackMiddleware
:
{
noInfo
:
true
}
}
)
;
}
;
