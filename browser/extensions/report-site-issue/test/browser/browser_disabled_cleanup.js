"
use
strict
"
;
add_task
(
async
function
test_disabled
(
)
{
await
promiseAddonEnabled
(
)
;
SpecialPowers
.
Services
.
prefs
.
setBoolPref
(
PREF_WC_REPORTER_ENABLED
false
)
;
await
BrowserTestUtils
.
withNewTab
(
{
gBrowser
url
:
"
http
:
/
/
example
.
com
"
}
async
function
(
)
{
const
menu
=
new
HelpMenuHelper
(
)
;
await
menu
.
open
(
)
;
is
(
menu
.
isItemHidden
(
)
true
"
Report
Site
Issue
help
menu
item
is
hidden
.
"
)
;
await
menu
.
close
(
)
;
}
)
;
await
promiseAddonEnabled
(
)
;
await
BrowserTestUtils
.
withNewTab
(
{
gBrowser
url
:
"
http
:
/
/
example
.
com
"
}
async
function
(
)
{
const
menu
=
new
HelpMenuHelper
(
)
;
await
menu
.
open
(
)
;
is
(
await
menu
.
isItemHidden
(
)
false
"
Report
Site
Issue
help
menu
item
is
visible
.
"
)
;
await
menu
.
close
(
)
;
}
)
;
SpecialPowers
.
Services
.
prefs
.
setBoolPref
(
PREF_WC_REPORTER_ENABLED
false
)
;
}
)
;
