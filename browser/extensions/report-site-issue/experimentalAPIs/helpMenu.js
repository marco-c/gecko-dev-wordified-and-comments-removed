"
use
strict
"
;
ChromeUtils
.
defineModuleGetter
(
this
"
Services
"
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
ExtensionCommon
"
"
resource
:
/
/
gre
/
modules
/
ExtensionCommon
.
jsm
"
)
;
const
TOPIC
=
"
report
-
site
-
issue
"
;
this
.
helpMenu
=
class
extends
ExtensionAPI
{
getAPI
(
context
)
{
const
{
tabManager
}
=
context
.
extension
;
let
EventManager
=
ExtensionCommon
.
EventManager
;
return
{
helpMenu
:
{
onHelpMenuCommand
:
new
EventManager
(
{
context
name
:
"
helpMenu
"
register
:
fire
=
>
{
let
observer
=
(
subject
topic
data
)
=
>
{
let
nativeTab
=
subject
.
wrappedJSObject
;
let
tab
=
tabManager
.
convert
(
nativeTab
)
;
fire
.
async
(
tab
)
;
}
;
Services
.
obs
.
addObserver
(
observer
TOPIC
)
;
return
(
)
=
>
{
Services
.
obs
.
removeObserver
(
observer
TOPIC
)
;
}
;
}
}
)
.
api
(
)
}
}
;
}
}
;
