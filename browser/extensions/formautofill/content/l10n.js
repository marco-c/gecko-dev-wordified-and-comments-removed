"
use
strict
"
;
ChromeUtils
.
import
(
"
resource
:
/
/
formautofill
/
FormAutofillUtils
.
jsm
"
)
;
const
CONTENT_WIN
=
typeof
(
window
)
!
=
"
undefined
"
?
window
:
content
.
window
;
const
L10N_ATTRIBUTES
=
[
"
data
-
localization
"
"
data
-
localization
-
region
"
]
;
let
mutationObserver
=
new
CONTENT_WIN
.
MutationObserver
(
function
onMutation
(
mutations
)
{
for
(
let
mutation
of
mutations
)
{
if
(
!
mutation
.
target
.
hasAttribute
(
mutation
.
attributeName
)
)
{
continue
;
}
FormAutofillUtils
.
localizeAttributeForElement
(
mutation
.
target
mutation
.
attributeName
)
;
}
}
)
;
CONTENT_WIN
.
document
.
addEventListener
(
"
DOMContentLoaded
"
function
onDCL
(
)
{
FormAutofillUtils
.
localizeMarkup
(
CONTENT_WIN
.
document
)
;
mutationObserver
.
observe
(
CONTENT_WIN
.
document
{
attributes
:
true
attributeFilter
:
L10N_ATTRIBUTES
subtree
:
true
}
)
;
}
{
once
:
true
}
)
;
