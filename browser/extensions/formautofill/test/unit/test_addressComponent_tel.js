"
use
strict
"
;
const
VALID_TESTS
=
[
[
"
200
-
234
-
5678
"
true
]
[
"
100
-
234
-
5678
"
true
]
[
"
555
-
abc
-
1234
"
true
]
[
"
55
-
555
-
5555
"
false
]
[
"
2
-
800
-
555
-
1234
"
false
]
[
"
1
-
800
-
555
-
1234
"
true
]
[
"
+
1
200
-
234
-
5678
"
true
]
[
"
+
1
100
-
234
-
5678
"
false
]
[
"
+
1
55
-
555
-
5555
"
false
]
[
"
+
1
1
-
800
-
555
-
1234
"
true
]
[
"
+
1
2
-
800
-
555
-
1234
"
false
]
[
"
+
1
555
-
abc
-
1234
"
true
]
]
;
const
COMPARE_TESTS
=
[
[
"
+
1
520
-
248
-
6621
"
"
+
15202486621
"
SAME
]
[
"
+
1
520
-
248
-
6621
"
"
1
-
520
-
248
-
6621
"
SAME
]
[
"
+
1
520
-
248
-
6621
"
"
1
(
520
)
248
-
6621
"
SAME
]
[
"
520
-
248
-
6621
"
"
520
-
248
-
6621
"
SAME
]
[
"
520
-
248
-
6621
"
"
+
1
520
-
248
-
6621
"
SAME
]
[
"
+
1
520
-
248
-
6621
"
"
248
-
6621
"
A_CONTAINS_B
]
[
"
520
-
248
-
6621
"
"
248
-
6621
"
A_CONTAINS_B
]
[
"
0520
-
248
-
6621
"
"
520
-
248
-
6621
"
A_CONTAINS_B
]
[
"
48
-
6621
"
"
6621
"
A_CONTAINS_B
]
[
"
+
1
520
-
248
-
6621
"
"
+
91
520
-
248
-
6622
"
DIFFERENT
]
[
"
+
1
520
-
248
-
6621
"
"
+
91
520
-
248
-
6621
"
DIFFERENT
]
[
"
+
1
520
-
248
-
6621
"
"
+
1
520
-
248
-
6622
"
DIFFERENT
]
[
"
520
-
248
-
6621
"
"
+
91
520
-
248
-
6622
"
DIFFERENT
]
[
"
520
-
248
-
6621
"
"
+
91
520
-
248
-
6621
"
DIFFERENT
]
[
"
520
-
248
-
6621
"
"
+
1
520
-
248
-
6622
"
DIFFERENT
]
[
"
520
-
248
-
6621
"
"
520
-
248
-
6622
"
DIFFERENT
]
[
"
+
1
520
-
248
-
6621
"
"
+
1
ja0
-
bgt
-
mnc1
"
SAME
]
[
"
+
1
1
-
800
-
555
-
1234
"
"
+
1
800
-
555
-
1234
"
SAME
]
]
;
const
TEST_FIELD_NAME
=
"
Tel
"
;
add_setup
(
async
(
)
=
>
{
Services
.
prefs
.
setBoolPref
(
"
browser
.
search
.
region
"
"
US
"
)
;
registerCleanupFunction
(
function
head_cleanup
(
)
{
Services
.
prefs
.
clearUserPref
(
"
browser
.
search
.
region
"
)
;
}
)
;
}
)
;
add_task
(
async
function
test_isValid
(
)
{
runIsValidTest
(
VALID_TESTS
TEST_FIELD_NAME
value
=
>
{
return
{
tel
:
value
}
;
}
)
;
}
)
;
add_task
(
async
function
test_compare
(
)
{
runCompareTest
(
COMPARE_TESTS
TEST_FIELD_NAME
value
=
>
{
return
{
tel
:
value
}
;
}
)
;
}
)
;
