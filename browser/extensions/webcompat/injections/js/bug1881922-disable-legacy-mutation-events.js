"
use
strict
"
;
console
.
info
(
"
DOM
Mutation
Events
have
been
disabled
to
prevent
performance
issues
.
See
https
:
/
/
bugzilla
.
mozilla
.
org
/
show_bug
.
cgi
?
id
=
1881922
for
details
.
"
)
;
(
function
disableMutationEvents
(
)
{
const
whichEvents
=
[
"
domattrmodified
"
"
domcharacterdatamodified
"
"
domnodeinserted
"
"
domnodeinsertedintodocument
"
"
domnoderemoved
"
"
domnoderemovedfromdocument
"
"
domsubtreemodified
"
]
;
const
{
prototype
}
=
window
.
wrappedJSObject
.
EventTarget
;
const
{
addEventListener
}
=
prototype
;
Object
.
defineProperty
(
prototype
"
addEventListener
"
{
value
:
exportFunction
(
function
(
_type
b
c
d
)
{
const
type
=
_type
?
.
toLowerCase
(
)
;
if
(
whichEvents
.
includes
(
type
)
)
{
return
undefined
;
}
return
addEventListener
.
call
(
this
type
b
c
d
)
;
}
window
)
}
)
;
}
)
(
)
;
