const
SANDBOX_ATTR
=
"
allow
-
storage
-
access
-
by
-
user
-
activation
"
;
console
.
warn
(
"
Firefox
calls
the
Storage
Access
API
on
behalf
of
the
site
.
See
https
:
/
/
bugzilla
.
mozilla
.
org
/
show_bug
.
cgi
?
id
=
1638383
for
details
.
"
)
;
function
init
(
)
{
const
observer
=
new
MutationObserver
(
(
)
=
>
{
document
.
body
.
querySelectorAll
(
"
iframe
[
id
^
=
'
msalRenewFrame
'
]
[
sandbox
]
"
)
.
forEach
(
frame
=
>
{
frame
.
sandbox
.
add
(
SANDBOX_ATTR
)
;
}
)
;
}
)
;
observer
.
observe
(
document
.
body
{
attributes
:
true
subtree
:
false
childList
:
true
}
)
;
}
window
.
addEventListener
(
"
DOMContentLoaded
"
init
)
;
