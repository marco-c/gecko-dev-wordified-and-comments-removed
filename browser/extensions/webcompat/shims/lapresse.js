"
use
strict
"
;
const
STORAGE_ACCESS_ORIGIN
=
"
https
:
/
/
la
-
presse
-
prod
.
firebaseapp
.
com
"
;
console
.
warn
(
When
using
oauth
Firefox
calls
the
Storage
Access
API
on
behalf
of
the
site
.
See
https
:
/
/
bugzilla
.
mozilla
.
org
/
show_bug
.
cgi
?
id
=
1779490
for
details
.
)
;
document
.
documentElement
.
addEventListener
(
"
click
"
e
=
>
{
const
{
target
isTrusted
}
=
e
;
if
(
!
isTrusted
)
{
return
;
}
const
button
=
target
.
closest
(
"
button
"
)
;
if
(
!
button
)
{
return
;
}
const
buttonClasses
=
Array
.
from
(
button
.
classList
.
values
(
)
)
;
const
isProvider
=
!
!
buttonClasses
.
filter
(
name
=
>
name
.
startsWith
(
"
providerButton
"
)
)
.
length
;
if
(
isProvider
)
{
button
.
disabled
=
true
;
button
.
style
.
opacity
=
0
.
5
;
e
.
stopPropagation
(
)
;
e
.
preventDefault
(
)
;
document
.
requestStorageAccessForOrigin
(
STORAGE_ACCESS_ORIGIN
)
.
then
(
(
)
=
>
{
target
.
click
(
)
;
}
)
.
catch
(
(
)
=
>
{
button
.
disabled
=
false
;
button
.
style
.
opacity
=
1
.
0
;
}
)
;
}
}
true
)
;
