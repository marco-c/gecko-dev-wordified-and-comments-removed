#
include
"
math_private
.
h
"
static
const
uint32_t
k
=
1799
;
static
const
double
kln2
=
1246
.
97177782734161156
;
static
double
__frexp_exp
(
double
x
int
*
expt
)
{
double
exp_x
;
uint32_t
hx
;
exp_x
=
exp
(
x
-
kln2
)
;
GET_HIGH_WORD
(
hx
exp_x
)
;
*
expt
=
(
hx
>
>
20
)
-
(
0x3ff
+
1023
)
+
k
;
SET_HIGH_WORD
(
exp_x
(
hx
&
0xfffff
)
|
(
(
0x3ff
+
1023
)
<
<
20
)
)
;
return
(
exp_x
)
;
}
double
__ldexp_exp
(
double
x
int
expt
)
{
double
exp_x
scale
;
int
ex_expt
;
exp_x
=
__frexp_exp
(
x
&
ex_expt
)
;
expt
+
=
ex_expt
;
INSERT_WORDS
(
scale
(
0x3ff
+
expt
)
<
<
20
0
)
;
return
(
exp_x
*
scale
)
;
}
