function
run_test
(
)
{
var
file
=
do_get_file
(
"
data
/
test_corrupt3
.
zip
"
)
;
var
zipreader
=
Cc
[
"
mozilla
.
org
/
libjar
/
zip
-
reader
;
1
"
]
.
createInstance
(
Ci
.
nsIZipReader
)
;
zipreader
.
open
(
file
)
;
var
failed
=
false
;
for
(
let
entryPath
of
zipreader
.
findEntries
(
"
*
"
)
)
{
let
entry
=
zipreader
.
getEntry
(
entryPath
)
;
if
(
!
entry
.
isDirectory
)
{
try
{
let
inputStream
=
zipreader
.
getInputStream
(
entryPath
)
;
}
catch
(
e
)
{
failed
=
true
;
}
}
}
Assert
.
ok
(
failed
)
;
}
