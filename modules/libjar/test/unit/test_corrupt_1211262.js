function
run_test
(
)
{
const
Cc
=
Components
.
classes
;
const
Ci
=
Components
.
interfaces
;
var
file
=
do_get_file
(
"
data
/
test_corrupt3
.
zip
"
)
;
var
zipreader
=
Cc
[
"
mozilla
.
org
/
libjar
/
zip
-
reader
;
1
"
]
.
createInstance
(
Ci
.
nsIZipReader
)
;
zipreader
.
open
(
file
)
;
var
entries
=
zipreader
.
findEntries
(
'
*
'
)
;
var
failed
=
false
;
while
(
entries
.
hasMore
(
)
)
{
let
entryPath
=
entries
.
getNext
(
)
;
let
entry
=
zipreader
.
getEntry
(
entryPath
)
;
if
(
!
entry
.
isDirectory
)
{
try
{
let
inputStream
=
zipreader
.
getInputStream
(
entryPath
)
;
}
catch
(
e
)
{
failed
=
true
;
}
}
}
Assert
.
ok
(
failed
)
;
}
