const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
const
{
NetUtil
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
NetUtil
.
jsm
"
)
;
function
run_test
(
)
{
var
file
=
do_get_file
(
"
data
/
test_bug370103
.
jar
"
)
;
var
url
=
Services
.
io
.
newFileURI
(
file
)
.
spec
;
url
=
"
jar
:
"
+
url
+
"
!
/
test_bug370103
"
;
var
channel
=
NetUtil
.
newChannel
(
{
uri
:
url
loadUsingSystemPrincipal
:
true
}
)
;
var
exception
=
false
;
try
{
channel
.
asyncOpen
(
null
)
;
}
catch
(
e
)
{
exception
=
true
;
}
Assert
.
ok
(
exception
)
;
}
