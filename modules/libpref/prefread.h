#
ifndef
prefread_h__
#
define
prefread_h__
#
include
"
prefapi
.
h
"
#
ifdef
__cplusplus
extern
"
C
"
{
#
endif
typedef
void
(
*
PrefReader
)
(
void
*
aClosure
const
char
*
aPref
PrefValue
aValue
PrefType
aType
bool
aIsDefault
bool
aIsStickyDefault
)
;
typedef
void
(
*
PrefParseErrorReporter
)
(
const
char
*
aMessage
int
aLine
bool
aError
)
;
typedef
struct
PrefParseState
{
PrefReader
mReader
;
PrefParseErrorReporter
mReporter
;
void
*
mClosure
;
int
mState
;
int
mNextState
;
const
char
*
mStrMatch
;
int
mStrIndex
;
char16_t
mUtf16
[
2
]
;
int
mEscLen
;
char
mEscTmp
[
6
]
;
char
mQuoteChar
;
char
*
mLb
;
char
*
mLbCur
;
char
*
mLbEnd
;
char
*
mVb
;
PrefType
mVtype
;
bool
mIsDefault
;
bool
mIsStickyDefault
;
}
PrefParseState
;
void
PREF_InitParseState
(
PrefParseState
*
aPS
PrefReader
aReader
PrefParseErrorReporter
aReporter
void
*
aClosure
)
;
void
PREF_FinalizeParseState
(
PrefParseState
*
aPS
)
;
bool
PREF_ParseBuf
(
PrefParseState
*
aPS
const
char
*
aBuf
int
aBufLen
)
;
#
ifdef
__cplusplus
}
#
endif
#
endif
