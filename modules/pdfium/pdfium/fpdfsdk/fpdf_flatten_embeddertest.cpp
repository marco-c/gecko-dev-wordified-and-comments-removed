#
include
"
core
/
fxcrt
/
fx_basic
.
h
"
#
include
"
public
/
fpdf_flatten
.
h
"
#
include
"
public
/
fpdfview
.
h
"
#
include
"
testing
/
embedder_test
.
h
"
#
include
"
testing
/
gtest
/
include
/
gtest
/
gtest
.
h
"
#
include
"
testing
/
test_support
.
h
"
namespace
{
class
FPDFFlattenEmbeddertest
:
public
EmbedderTest
{
}
;
}
TEST_F
(
FPDFFlattenEmbeddertest
FlatNothing
)
{
EXPECT_TRUE
(
OpenDocument
(
"
hello_world
.
pdf
"
)
)
;
FPDF_PAGE
page
=
LoadPage
(
0
)
;
EXPECT_TRUE
(
page
)
;
EXPECT_EQ
(
FLATTEN_NOTHINGTODO
FPDFPage_Flatten
(
page
FLAT_NORMALDISPLAY
)
)
;
UnloadPage
(
page
)
;
}
TEST_F
(
FPDFFlattenEmbeddertest
FlatNormal
)
{
EXPECT_TRUE
(
OpenDocument
(
"
annotiter
.
pdf
"
)
)
;
FPDF_PAGE
page
=
LoadPage
(
0
)
;
EXPECT_TRUE
(
page
)
;
EXPECT_EQ
(
FLATTEN_SUCCESS
FPDFPage_Flatten
(
page
FLAT_NORMALDISPLAY
)
)
;
UnloadPage
(
page
)
;
}
TEST_F
(
FPDFFlattenEmbeddertest
FlatPrint
)
{
EXPECT_TRUE
(
OpenDocument
(
"
annotiter
.
pdf
"
)
)
;
FPDF_PAGE
page
=
LoadPage
(
0
)
;
EXPECT_TRUE
(
page
)
;
EXPECT_EQ
(
FLATTEN_SUCCESS
FPDFPage_Flatten
(
page
FLAT_PRINT
)
)
;
UnloadPage
(
page
)
;
}
