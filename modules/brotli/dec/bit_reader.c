#
include
<
stdlib
.
h
>
#
include
"
.
/
bit_reader
.
h
"
#
include
"
.
/
port
.
h
"
#
if
defined
(
__cplusplus
)
|
|
defined
(
c_plusplus
)
extern
"
C
"
{
#
endif
void
BrotliInitBitReader
(
BrotliBitReader
*
const
br
BrotliInput
input
)
{
BROTLI_DCHECK
(
br
!
=
NULL
)
;
br
-
>
input_
=
input
;
br
-
>
val_
=
0
;
br
-
>
bit_pos_
=
0
;
br
-
>
avail_in
=
0
;
br
-
>
eos_
=
0
;
br
-
>
next_in
=
br
-
>
buf_
;
}
void
BrotliWarmupBitReader
(
BrotliBitReader
*
const
br
)
{
size_t
i
;
br
-
>
val_
=
0
;
for
(
i
=
0
;
i
<
sizeof
(
br
-
>
val_
)
;
+
+
i
)
{
#
if
(
BROTLI_64_BITS_LITTLE_ENDIAN
)
br
-
>
val_
|
=
(
(
uint64_t
)
*
br
-
>
next_in
)
<
<
(
8
*
i
)
;
#
else
br
-
>
val_
|
=
(
(
uint32_t
)
*
br
-
>
next_in
)
<
<
(
8
*
i
)
;
#
endif
+
+
br
-
>
next_in
;
-
-
br
-
>
avail_in
;
}
}
#
if
defined
(
__cplusplus
)
|
|
defined
(
c_plusplus
)
}
#
endif
