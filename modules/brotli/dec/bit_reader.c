#
include
"
.
/
bit_reader
.
h
"
#
include
<
brotli
/
types
.
h
>
#
include
"
.
/
port
.
h
"
#
if
defined
(
__cplusplus
)
|
|
defined
(
c_plusplus
)
extern
"
C
"
{
#
endif
void
BrotliInitBitReader
(
BrotliBitReader
*
const
br
)
{
br
-
>
val_
=
0
;
br
-
>
bit_pos_
=
sizeof
(
br
-
>
val_
)
<
<
3
;
}
BROTLI_BOOL
BrotliWarmupBitReader
(
BrotliBitReader
*
const
br
)
{
size_t
aligned_read_mask
=
(
sizeof
(
br
-
>
val_
)
>
>
1
)
-
1
;
if
(
!
BROTLI_ALIGNED_READ
)
{
aligned_read_mask
=
0
;
}
if
(
BrotliGetAvailableBits
(
br
)
=
=
0
)
{
if
(
!
BrotliPullByte
(
br
)
)
{
return
BROTLI_FALSE
;
}
}
while
(
(
(
(
size_t
)
br
-
>
next_in
)
&
aligned_read_mask
)
!
=
0
)
{
if
(
!
BrotliPullByte
(
br
)
)
{
return
BROTLI_TRUE
;
}
}
return
BROTLI_TRUE
;
}
#
if
defined
(
__cplusplus
)
|
|
defined
(
c_plusplus
)
}
#
endif
