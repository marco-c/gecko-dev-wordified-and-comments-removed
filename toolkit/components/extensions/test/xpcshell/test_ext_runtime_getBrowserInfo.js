"
use
strict
"
;
add_task
(
function
*
setup
(
)
{
ExtensionTestUtils
.
mockAppInfo
(
)
;
}
)
;
add_task
(
function
*
test_getBrowserInfo
(
)
{
function
background
(
)
{
browser
.
runtime
.
getBrowserInfo
(
)
.
then
(
info
=
>
{
browser
.
test
.
assertEq
(
info
.
name
"
XPCShell
"
"
name
is
valid
"
)
;
browser
.
test
.
assertEq
(
info
.
vendor
"
Mozilla
"
"
vendor
is
Mozilla
"
)
;
browser
.
test
.
assertEq
(
info
.
version
"
48
"
"
version
is
correct
"
)
;
browser
.
test
.
assertEq
(
info
.
buildID
"
20160315
"
"
buildID
is
correct
"
)
;
browser
.
test
.
notifyPass
(
"
runtime
.
getBrowserInfo
"
)
;
}
)
;
}
const
extension
=
ExtensionTestUtils
.
loadExtension
(
{
background
}
)
;
yield
extension
.
startup
(
)
;
yield
extension
.
awaitFinish
(
"
runtime
.
getBrowserInfo
"
)
;
yield
extension
.
unload
(
)
;
}
)
;
