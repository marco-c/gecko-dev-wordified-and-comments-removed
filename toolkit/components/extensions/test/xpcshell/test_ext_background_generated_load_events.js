"
use
strict
"
;
add_task
(
function
*
test_DOMContentLoaded_in_generated_background_page
(
)
{
let
extension
=
ExtensionTestUtils
.
loadExtension
(
{
background
(
)
{
function
reportListener
(
event
)
{
browser
.
test
.
sendMessage
(
"
eventname
"
event
.
type
)
;
}
document
.
addEventListener
(
"
DOMContentLoaded
"
reportListener
)
;
window
.
addEventListener
(
"
load
"
reportListener
)
;
}
}
)
;
yield
extension
.
startup
(
)
;
equal
(
"
DOMContentLoaded
"
yield
extension
.
awaitMessage
(
"
eventname
"
)
)
;
equal
(
"
load
"
yield
extension
.
awaitMessage
(
"
eventname
"
)
)
;
yield
extension
.
unload
(
)
;
}
)
;
