function
*
runTests
(
)
{
let
tab
=
BrowserTestUtils
.
addTab
(
gBrowser
"
http
:
/
/
127
.
0
.
0
.
1
:
1
/
"
)
;
let
browser
=
tab
.
linkedBrowser
;
yield
BrowserTestUtils
.
waitForContentEvent
(
browser
"
DOMContentLoaded
"
)
;
yield
new
Promise
(
resolve
=
>
{
PageThumbs
.
shouldStoreThumbnail
(
browser
)
.
then
(
aResult
=
>
{
ok
(
!
aResult
"
we
'
re
not
going
to
capture
an
error
page
"
)
;
resolve
(
)
;
}
)
;
}
)
;
}
