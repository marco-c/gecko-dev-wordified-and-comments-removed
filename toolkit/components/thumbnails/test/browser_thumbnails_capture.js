add_task
(
async
function
thumbnails_capture
(
)
{
await
BrowserTestUtils
.
withNewTab
(
{
gBrowser
url
:
"
data
:
text
/
html
<
body
bgcolor
=
ff0000
>
<
/
body
>
"
}
async
browser
=
>
{
await
captureAndCheckColor
(
255
0
0
"
we
have
a
red
thumbnail
"
)
;
let
loaded
=
BrowserTestUtils
.
browserLoaded
(
browser
)
;
BrowserTestUtils
.
loadURI
(
browser
"
data
:
text
/
html
<
body
bgcolor
=
00ff00
>
<
/
body
>
"
)
;
await
loaded
;
await
captureAndCheckColor
(
0
255
0
"
we
have
a
green
thumbnail
"
)
;
loaded
=
BrowserTestUtils
.
browserLoaded
(
browser
)
;
BrowserTestUtils
.
loadURI
(
browser
"
data
:
text
/
html
<
body
bgcolor
=
0000ff
>
<
/
body
>
"
)
;
await
loaded
;
await
captureAndCheckColor
(
0
0
255
"
we
have
a
blue
thumbnail
"
)
;
}
)
;
}
)
;
