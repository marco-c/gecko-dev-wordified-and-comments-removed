add_task
(
async
function
thumbnails_bug1775638
(
)
{
const
tab
=
await
BrowserTestUtils
.
openNewForegroundTab
(
gBrowser
"
https
:
/
/
example
.
com
"
)
;
const
canvas
=
document
.
createElement
(
"
canvas
"
)
;
const
promise
=
PageThumbs
.
captureToCanvas
(
tab
.
linkedBrowser
canvas
)
;
gBrowser
.
removeTab
(
tab
)
;
is
(
await
promise
canvas
)
;
}
)
;
