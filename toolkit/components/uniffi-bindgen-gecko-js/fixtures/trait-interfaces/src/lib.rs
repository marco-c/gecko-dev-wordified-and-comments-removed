use
std
:
:
sync
:
:
Arc
;
#
[
uniffi
:
:
export
]
pub
trait
Calc
:
Send
+
Sync
{
fn
add
(
&
self
a
:
u32
b
:
u32
)
-
>
u32
;
}
#
[
uniffi
:
:
export
]
pub
fn
make_calculator
(
)
-
>
Arc
<
dyn
Calc
>
{
Arc
:
:
new
(
Calculator
)
}
struct
Calculator
;
impl
Calc
for
Calculator
{
fn
add
(
&
self
a
:
u32
b
:
u32
)
-
>
u32
{
a
+
b
}
}
#
[
uniffi
:
:
export
]
pub
fn
make_buggy_calculator
(
)
-
>
Arc
<
dyn
Calc
>
{
Arc
:
:
new
(
BuggyCalculator
)
}
struct
BuggyCalculator
;
impl
Calc
for
BuggyCalculator
{
fn
add
(
&
self
a
:
u32
b
:
u32
)
-
>
u32
{
a
+
b
+
1
}
}
uniffi
:
:
setup_scaffolding
!
(
)
;
