const
Arithmetic
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
RustArithmetic
.
jsm
"
)
;
add_task
(
async
function
(
)
{
Assert
.
ok
(
Arithmetic
.
IntegerOverflow
)
;
Assert
.
equal
(
await
Arithmetic
.
add
(
2
4
)
6
)
;
Assert
.
equal
(
await
Arithmetic
.
add
(
4
8
)
12
)
;
await
Assert
.
rejects
(
Arithmetic
.
add
(
Number
.
MAX_SAFE_INTEGER
+
1
0
)
/
TypeError
/
"
add
(
)
should
throw
TypeError
when
an
input
is
>
MAX_SAFE_INTEGER
"
)
;
Assert
.
equal
(
await
Arithmetic
.
sub
(
4
2
)
2
)
;
Assert
.
equal
(
await
Arithmetic
.
sub
(
8
4
)
4
)
;
await
Assert
.
rejects
(
Arithmetic
.
sub
(
0
1
)
Arithmetic
.
IntegerOverflow
"
sub
(
)
should
throw
IntegerOverflow
"
)
;
Assert
.
equal
(
await
Arithmetic
.
div
(
8
4
)
2
)
;
Assert
.
ok
(
await
Arithmetic
.
equal
(
2
2
)
)
;
Assert
.
ok
(
await
Arithmetic
.
equal
(
4
4
)
)
;
Assert
.
ok
(
!
(
await
Arithmetic
.
equal
(
2
4
)
)
)
;
Assert
.
ok
(
!
(
await
Arithmetic
.
equal
(
4
8
)
)
)
;
}
)
;
