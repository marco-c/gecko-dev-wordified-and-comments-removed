#
[
uniffi
:
:
export
(
callback_interface
)
]
pub
trait
Logger
:
Send
+
Sync
{
fn
log
(
&
self
message
:
String
)
;
fn
log_repeat
(
&
self
message
:
String
count
:
u32
exclude
:
Vec
<
u32
>
)
;
fn
finished
(
&
self
)
;
}
#
[
uniffi
:
:
export
]
fn
log_even_numbers
(
logger
:
Box
<
dyn
Logger
>
items
:
Vec
<
i32
>
)
{
for
i
in
items
{
if
i
%
2
=
=
0
{
logger
.
log
(
format
!
(
"
Saw
even
number
:
{
i
}
"
)
)
}
}
logger
.
finished
(
)
;
}
#
[
uniffi
:
:
export
]
fn
log_even_numbers_main_thread
(
logger
:
Box
<
dyn
Logger
>
items
:
Vec
<
i32
>
)
{
log_even_numbers
(
logger
items
)
}
#
[
uniffi
:
:
export
]
fn
call_log_repeat
(
logger
:
Box
<
dyn
Logger
>
message
:
String
count
:
u32
exclude
:
Vec
<
u32
>
)
{
logger
.
log_repeat
(
message
count
exclude
)
;
logger
.
finished
(
)
;
}
uniffi
:
:
setup_scaffolding
!
(
"
fixture_callbacks
"
)
;
