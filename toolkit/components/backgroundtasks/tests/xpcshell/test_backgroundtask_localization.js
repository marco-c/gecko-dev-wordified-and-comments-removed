async
function
doOne
(
resource
id
)
{
let
l10n
=
new
Localization
(
[
resource
]
true
)
;
let
value
=
await
l10n
.
formatValue
(
id
)
;
Assert
.
ok
(
value
{
id
}
from
{
resource
}
is
not
null
:
{
value
}
)
;
let
exitCode
=
await
do_backgroundtask
(
"
localization
"
{
extraArgs
:
[
resource
id
value
]
}
)
;
Assert
.
equal
(
0
exitCode
)
;
}
add_task
(
async
function
test_localization
(
)
{
await
doOne
(
"
toolkit
/
global
/
commonDialog
.
ftl
"
"
common
-
dialog
-
title
-
system
"
)
;
if
(
AppConstants
.
MOZ_APP_NAME
=
=
"
thunderbird
"
)
{
await
doOne
(
"
messenger
/
messenger
.
ftl
"
"
no
-
reply
-
title
"
)
;
}
else
{
await
doOne
(
"
browser
/
pageInfo
.
ftl
"
"
not
-
set
-
date
"
)
;
}
}
)
;
