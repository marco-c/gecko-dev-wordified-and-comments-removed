var
EXPORTED_SYMBOLS
=
[
"
runBackgroundTask
"
]
;
async
function
runBackgroundTask
(
commandLine
)
{
var
env
=
Cc
[
"
mozilla
.
org
/
process
/
environment
;
1
"
]
.
getService
(
Ci
.
nsIEnvironment
)
;
const
get
=
env
.
get
(
"
MOZ_TEST_PROCESS_UPDATES
"
)
;
let
exitCode
=
81
;
if
(
get
=
=
"
ShouldNotProcessUpdates
(
)
:
OtherInstanceRunning
"
)
{
exitCode
=
80
;
}
if
(
get
=
=
"
ShouldNotProcessUpdates
(
)
:
DevToolsLaunching
"
)
{
exitCode
=
79
;
}
console
.
debug
(
runBackgroundTask
:
shouldprocessupdates
{
exists
:
env
.
exists
(
"
MOZ_TEST_PROCESS_UPDATES
"
)
get
}
)
;
console
.
error
(
runBackgroundTask
:
shouldprocessupdates
exiting
with
exitCode
{
exitCode
}
)
;
return
exitCode
;
}
