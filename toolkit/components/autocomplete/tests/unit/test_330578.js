var
gResultListener
=
{
_lastResult
:
null
_lastValue
:
"
"
onValueRemoved
(
aResult
aValue
)
{
this
.
_lastResult
=
aResult
;
this
.
_lastValue
=
aValue
;
}
}
;
function
run_test
(
)
{
var
result
=
Cc
[
"
mozilla
.
org
/
autocomplete
/
simple
-
result
;
1
"
]
.
createInstance
(
Ci
.
nsIAutoCompleteSimpleResult
)
;
result
.
appendMatch
(
"
a
"
"
"
)
;
result
.
appendMatch
(
"
b
"
"
"
)
;
result
.
appendMatch
(
"
c
"
"
"
)
;
result
.
setListener
(
gResultListener
)
;
Assert
.
equal
(
result
.
matchCount
3
)
;
result
.
removeValueAt
(
0
)
;
Assert
.
equal
(
result
.
matchCount
2
)
;
Assert
.
equal
(
gResultListener
.
_lastResult
result
)
;
Assert
.
equal
(
gResultListener
.
_lastValue
"
a
"
)
;
result
.
removeValueAt
(
0
)
;
Assert
.
equal
(
result
.
matchCount
1
)
;
Assert
.
equal
(
gResultListener
.
_lastValue
"
b
"
)
;
result
.
setListener
(
null
)
;
result
.
removeValueAt
(
0
)
;
Assert
.
equal
(
result
.
matchCount
0
)
;
Assert
.
equal
(
gResultListener
.
_lastValue
"
b
"
)
;
}
