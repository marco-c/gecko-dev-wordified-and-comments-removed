"
use
strict
"
;
add_task
(
async
function
setup
(
)
{
await
setupPlacesDatabase
(
"
places_v78
.
sqlite
"
)
;
}
)
;
add_task
(
async
function
database_is_valid
(
)
{
Assert
.
equal
(
PlacesUtils
.
history
.
databaseStatus
PlacesUtils
.
history
.
DATABASE_STATUS_UPGRADED
)
;
const
db
=
await
PlacesUtils
.
promiseDBConnection
(
)
;
Assert
.
equal
(
await
db
.
getSchemaVersion
(
)
CURRENT_SCHEMA_VERSION
)
;
await
db
.
execute
(
"
SELECT
*
FROM
moz_newtab_story_click
"
)
;
await
db
.
execute
(
"
SELECT
*
from
moz_newtab_story_impression
"
)
;
}
)
;
