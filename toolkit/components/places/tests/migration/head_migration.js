"
use
strict
"
;
var
{
classes
:
Cc
interfaces
:
Ci
results
:
Cr
utils
:
Cu
}
=
Components
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
{
let
commonFile
=
do_get_file
(
"
.
.
/
head_common
.
js
"
false
)
;
let
uri
=
Services
.
io
.
newFileURI
(
commonFile
)
;
Services
.
scriptloader
.
loadSubScript
(
uri
.
spec
this
)
;
}
const
DB_FILENAME
=
"
places
.
sqlite
"
;
var
setupPlacesDatabase
=
async
function
(
aFileName
)
{
let
currentDir
=
await
OS
.
File
.
getCurrentDirectory
(
)
;
let
src
=
OS
.
Path
.
join
(
currentDir
aFileName
)
;
Assert
.
ok
(
(
await
OS
.
File
.
exists
(
src
)
)
"
Database
file
found
"
)
;
let
dest
=
OS
.
Path
.
join
(
OS
.
Constants
.
Path
.
profileDir
DB_FILENAME
)
;
Assert
.
ok
(
!
(
await
OS
.
File
.
exists
(
dest
)
)
"
Database
file
should
not
exist
yet
"
)
;
await
OS
.
File
.
copy
(
src
dest
)
;
}
;
