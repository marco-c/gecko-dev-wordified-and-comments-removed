const
{
BookmarkHTMLUtils
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
gre
/
modules
/
BookmarkHTMLUtils
.
sys
.
mjs
"
)
;
add_task
(
async
function
test_bookmarks_html_singleframe
(
)
{
let
bookmarksFile
=
PathUtils
.
join
(
do_get_cwd
(
)
.
path
"
bookmarks_html_singleframe
.
html
"
)
;
await
BookmarkHTMLUtils
.
importFromFile
(
bookmarksFile
{
replace
:
true
}
)
;
let
root
=
PlacesUtils
.
getFolderContents
(
PlacesUtils
.
bookmarks
.
menuGuid
)
.
root
;
Assert
.
equal
(
root
.
childCount
1
)
;
let
folder
=
root
.
getChild
(
0
)
;
PlacesUtils
.
asContainer
(
folder
)
.
containerOpen
=
true
;
Assert
.
equal
(
folder
.
title
"
Subtitle
"
)
;
Assert
.
equal
(
folder
.
childCount
1
)
;
let
bookmark
=
folder
.
getChild
(
0
)
;
Assert
.
equal
(
bookmark
.
uri
"
http
:
/
/
www
.
mozilla
.
org
/
"
)
;
Assert
.
equal
(
bookmark
.
title
"
Mozilla
"
)
;
folder
.
containerOpen
=
false
;
}
)
;
