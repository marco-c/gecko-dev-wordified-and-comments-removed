function
run_test
(
)
{
let
query
=
PlacesUtils
.
history
.
getNewQuery
(
)
;
let
options
=
PlacesUtils
.
history
.
getNewQueryOptions
(
)
;
query
.
setFolders
(
[
PlacesUtils
.
bookmarks
.
placesRoot
]
1
)
;
Assert
.
equal
(
PlacesUtils
.
history
.
queryToQueryString
(
query
options
)
"
place
:
folder
=
PLACES_ROOT
"
)
;
options
.
sortingAnnotation
=
"
test
anno
"
;
options
.
sortingMode
=
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
;
var
placeURI
=
"
place
:
folder
=
PLACES_ROOT
&
sort
=
"
+
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
+
"
&
sortingAnnotation
=
test
%
20anno
"
;
Assert
.
equal
(
PlacesUtils
.
history
.
queryToQueryString
(
query
options
)
placeURI
)
;
options
=
{
}
;
PlacesUtils
.
history
.
queryStringToQuery
(
placeURI
{
}
options
)
;
Assert
.
equal
(
options
.
value
.
sortingAnnotation
"
test
anno
"
)
;
Assert
.
equal
(
options
.
value
.
sortingMode
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
)
;
}
