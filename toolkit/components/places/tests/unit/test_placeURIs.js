function
run_test
(
)
{
let
query
=
PlacesUtils
.
history
.
getNewQuery
(
)
;
let
options
=
PlacesUtils
.
history
.
getNewQueryOptions
(
)
;
query
.
setParents
(
[
PlacesUtils
.
bookmarks
.
rootGuid
]
1
)
;
Assert
.
equal
(
PlacesUtils
.
history
.
queryToQueryString
(
query
options
)
place
:
parent
=
{
PlacesUtils
.
bookmarks
.
rootGuid
}
)
;
options
.
sortingAnnotation
=
"
test
anno
"
;
options
.
sortingMode
=
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
;
var
placeURI
=
place
:
parent
=
{
PlacesUtils
.
bookmarks
.
rootGuid
}
&
sort
=
{
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
}
&
sortingAnnotation
=
test
%
20anno
;
Assert
.
equal
(
PlacesUtils
.
history
.
queryToQueryString
(
query
options
)
placeURI
)
;
options
=
{
}
;
PlacesUtils
.
history
.
queryStringToQuery
(
placeURI
{
}
options
)
;
Assert
.
equal
(
options
.
value
.
sortingAnnotation
"
test
anno
"
)
;
Assert
.
equal
(
options
.
value
.
sortingMode
Ci
.
nsINavHistoryQueryOptions
.
SORT_BY_ANNOTATION_DESCENDING
)
;
}
