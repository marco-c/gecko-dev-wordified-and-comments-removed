var
hs
=
Cc
[
"
mozilla
.
org
/
browser
/
nav
-
history
-
service
;
1
"
]
.
getService
(
Ci
.
nsINavHistoryService
)
;
function
search_has_result
(
aTerms
)
{
var
options
=
hs
.
getNewQueryOptions
(
)
;
options
.
maxResults
=
1
;
options
.
resultType
=
options
.
RESULTS_AS_URI
;
var
query
=
hs
.
getNewQuery
(
)
;
query
.
searchTerms
=
aTerms
;
var
result
=
hs
.
executeQuery
(
query
options
)
;
var
root
=
result
.
root
;
root
.
containerOpen
=
true
;
var
cc
=
root
.
childCount
;
root
.
containerOpen
=
false
;
return
(
cc
=
=
1
)
;
}
add_task
(
async
function
test_execute
(
)
{
const
SEARCH_TERM
=
"
"
;
const
TEST_URL
=
"
http
:
/
/
example
.
com
/
"
+
SEARCH_TERM
+
"
/
"
;
await
PlacesTestUtils
.
addVisits
(
uri
(
TEST_URL
)
)
;
Assert
.
ok
(
search_has_result
(
SEARCH_TERM
)
)
;
}
)
;
