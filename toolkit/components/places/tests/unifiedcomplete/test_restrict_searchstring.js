add_task
(
async
function
test_searchstring
(
)
{
for
(
let
token
of
Object
.
values
(
UrlbarTokenizer
.
RESTRICT
)
)
{
for
(
let
search
of
[
{
token
}
query
query
{
token
}
]
)
{
let
searchQuery
=
token
=
=
UrlbarTokenizer
.
RESTRICT
.
SEARCH
&
&
search
.
startsWith
(
UrlbarTokenizer
.
RESTRICT
.
SEARCH
)
?
search
.
substring
(
2
)
:
search
;
info
(
Searching
for
"
{
search
}
"
expecting
"
{
searchQuery
}
"
)
;
await
check_autocomplete
(
{
search
searchParam
:
"
enable
-
actions
"
matches
:
[
makeSearchMatch
(
search
{
engineName
:
"
MozSearch
"
searchQuery
heuristic
:
true
}
)
]
}
)
;
}
}
}
)
;
