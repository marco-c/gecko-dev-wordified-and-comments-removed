function
setSuggestPrefsToFalse
(
)
{
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
"
false
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
.
onlyTyped
"
false
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
bookmark
"
false
)
;
}
add_task
(
async
function
test_special_searches
(
)
{
let
uri1
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
"
)
;
let
uri2
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
2
"
)
;
let
uri3
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
"
)
;
let
uri4
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
2
"
)
;
let
uri5
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
star
"
)
;
let
uri6
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
star
/
2
"
)
;
let
uri7
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
star
"
)
;
let
uri8
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
star
/
2
"
)
;
let
uri9
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
tag
"
)
;
let
uri10
=
NetUtil
.
newURI
(
"
http
:
/
/
url
/
tag
/
2
"
)
;
let
uri11
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
tag
"
)
;
let
uri12
=
NetUtil
.
newURI
(
"
http
:
/
/
foo
.
bar
/
tag
/
2
"
)
;
await
PlacesTestUtils
.
addVisits
(
[
{
uri
:
uri1
title
:
"
title
"
transition
:
TRANSITION_TYPED
}
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
transition
:
TRANSITION_TYPED
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
transition
:
TRANSITION_TYPED
}
]
)
;
await
addBookmark
(
{
uri
:
uri5
title
:
"
title
"
}
)
;
await
addBookmark
(
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
)
;
await
addBookmark
(
{
uri
:
uri7
title
:
"
title
"
}
)
;
await
addBookmark
(
{
uri
:
uri8
title
:
"
foo
.
bar
"
}
)
;
await
addBookmark
(
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
}
)
;
await
addBookmark
(
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
}
)
;
await
addBookmark
(
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
}
)
;
await
addBookmark
(
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
}
)
;
do_print
(
"
History
restrict
"
)
;
await
check_autocomplete
(
{
search
:
"
^
"
matches
:
[
{
uri
:
uri1
title
:
"
title
"
}
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
Star
restrict
"
)
;
await
check_autocomplete
(
{
search
:
"
*
"
matches
:
[
{
uri
:
uri5
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
Tag
restrict
"
)
;
await
check_autocomplete
(
{
search
:
"
+
"
matches
:
[
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
Special
as
first
word
"
)
;
await
check_autocomplete
(
{
search
:
"
^
foo
bar
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
Special
as
middle
word
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
bar
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
Special
as
last
word
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
bar
^
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
-
>
history
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
*
-
>
is
star
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
*
"
matches
:
[
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
#
-
>
in
title
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
#
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
-
>
in
url
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
+
-
>
is
tag
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
+
"
matches
:
[
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
~
-
>
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
~
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
*
-
>
history
is
star
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
*
"
matches
:
[
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
#
-
>
history
in
title
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
#
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
-
>
history
in
url
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
"
matches
:
[
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
+
-
>
history
is
tag
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
+
"
matches
:
[
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
^
~
-
>
history
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
^
~
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
*
#
-
>
is
star
in
title
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
*
#
"
matches
:
[
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
*
-
>
is
star
in
url
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
*
"
matches
:
[
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
*
+
-
>
same
as
+
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
*
+
"
matches
:
[
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
*
~
-
>
is
star
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
*
~
"
matches
:
[
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
#
-
>
in
title
in
url
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
#
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
#
+
-
>
in
title
is
tag
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
#
+
"
matches
:
[
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
#
~
-
>
in
title
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
#
~
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
+
-
>
in
url
is
tag
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
+
"
matches
:
[
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
~
-
>
in
url
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
~
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
+
~
-
>
is
tag
is
typed
"
)
;
await
check_autocomplete
(
{
search
:
"
foo
+
~
"
matches
:
[
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
autoFill
"
false
)
;
do_print
(
"
foo
-
>
default
history
"
)
;
setSuggestPrefsToFalse
(
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
"
true
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
tag
"
]
}
]
}
)
;
do_print
(
"
foo
-
>
default
history
is
star
"
)
;
setSuggestPrefsToFalse
(
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
"
true
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
bookmark
"
true
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri2
title
:
"
foo
.
bar
"
}
{
uri
:
uri3
title
:
"
title
"
}
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
-
>
default
history
is
star
is
typed
"
)
;
setSuggestPrefsToFalse
(
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
"
true
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
.
onlyTyped
"
true
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
bookmark
"
true
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri4
title
:
"
foo
.
bar
"
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
-
>
is
star
"
)
;
setSuggestPrefsToFalse
(
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
"
false
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
bookmark
"
true
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
do_print
(
"
foo
-
>
is
star
is
typed
"
)
;
setSuggestPrefsToFalse
(
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
history
.
onlyTyped
"
true
)
;
Services
.
prefs
.
setBoolPref
(
"
browser
.
urlbar
.
suggest
.
bookmark
"
true
)
;
await
check_autocomplete
(
{
search
:
"
foo
"
matches
:
[
{
uri
:
uri6
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri7
title
:
"
title
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri8
title
:
"
foo
.
bar
"
style
:
[
"
bookmark
"
]
}
{
uri
:
uri9
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri10
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri11
title
:
"
title
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
{
uri
:
uri12
title
:
"
foo
.
bar
"
tags
:
[
"
foo
.
bar
"
]
style
:
[
"
bookmark
-
tag
"
]
}
]
}
)
;
await
cleanup
(
)
;
}
)
;
