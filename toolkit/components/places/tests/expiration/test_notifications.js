var
gObserver
=
{
notifications
:
0
observe
(
aSubject
aTopic
aData
)
{
this
.
notifications
+
+
;
}
}
;
Services
.
obs
.
addObserver
(
gObserver
PlacesUtils
.
TOPIC_EXPIRATION_FINISHED
)
;
function
run_test
(
)
{
setInterval
(
3600
)
;
promiseForceExpirationStep
(
1
)
;
do_timeout
(
2000
check_result
)
;
do_test_pending
(
)
;
}
function
check_result
(
)
{
Services
.
obs
.
removeObserver
(
gObserver
PlacesUtils
.
TOPIC_EXPIRATION_FINISHED
)
;
Assert
.
equal
(
gObserver
.
notifications
1
)
;
do_test_finished
(
)
;
}
