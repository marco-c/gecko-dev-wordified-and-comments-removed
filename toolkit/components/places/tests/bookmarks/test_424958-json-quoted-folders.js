"
use
strict
"
;
const
FOLDER_TITLE
=
'
"
quoted
folder
"
'
;
function
checkQuotedFolder
(
)
{
let
toolbar
=
PlacesUtils
.
getFolderContents
(
PlacesUtils
.
bookmarks
.
toolbarFolder
)
.
root
;
Assert
.
equal
(
toolbar
.
childCount
1
)
;
var
folderNode
=
toolbar
.
getChild
(
0
)
;
Assert
.
equal
(
folderNode
.
type
folderNode
.
RESULT_TYPE_FOLDER
)
;
Assert
.
equal
(
folderNode
.
title
FOLDER_TITLE
)
;
toolbar
.
containerOpen
=
false
;
}
add_task
(
async
function
(
)
{
let
jsonFile
=
OS
.
Path
.
join
(
OS
.
Constants
.
Path
.
profileDir
"
bookmarks
.
json
"
)
;
let
folder
=
await
PlacesUtils
.
bookmarks
.
insert
(
{
parentGuid
:
PlacesUtils
.
bookmarks
.
toolbarGuid
title
:
FOLDER_TITLE
type
:
PlacesUtils
.
bookmarks
.
TYPE_FOLDER
}
)
;
checkQuotedFolder
(
)
;
await
BookmarkJSONUtils
.
exportToFile
(
jsonFile
)
;
await
PlacesUtils
.
bookmarks
.
remove
(
folder
.
guid
)
;
await
BookmarkJSONUtils
.
importFromFile
(
jsonFile
{
replace
:
true
}
)
;
checkQuotedFolder
(
)
;
await
OS
.
File
.
remove
(
jsonFile
)
;
}
)
;
