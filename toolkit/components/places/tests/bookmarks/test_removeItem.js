const
DEFAULT_INDEX
=
PlacesUtils
.
bookmarks
.
DEFAULT_INDEX
;
add_task
(
async
function
test_removeItem
(
)
{
var
folderId
=
PlacesUtils
.
bookmarks
.
createFolder
(
PlacesUtils
.
toolbarFolderId
"
"
DEFAULT_INDEX
)
;
var
bookmarkURI
=
uri
(
"
http
:
/
/
iasdjkf
"
)
;
do_check_false
(
await
PlacesUtils
.
bookmarks
.
fetch
(
{
url
:
bookmarkURI
}
)
)
;
var
bookmarkId
=
PlacesUtils
.
bookmarks
.
insertBookmark
(
folderId
bookmarkURI
DEFAULT_INDEX
"
"
)
;
do_check_eq
(
PlacesUtils
.
bookmarks
.
getItemTitle
(
bookmarkId
)
"
"
)
;
do_check_true
(
await
PlacesUtils
.
bookmarks
.
fetch
(
{
url
:
bookmarkURI
}
)
)
;
PlacesUtils
.
bookmarks
.
removeItem
(
folderId
)
;
do_check_eq
(
PlacesUtils
.
bookmarks
.
getBookmarkIdsForURI
(
bookmarkURI
)
.
length
0
)
;
do_check_false
(
await
PlacesUtils
.
bookmarks
.
fetch
(
{
url
:
bookmarkURI
}
)
)
;
do_check_eq
(
PlacesUtils
.
bookmarks
.
getItemIndex
(
bookmarkId
)
-
1
)
;
}
)
;
