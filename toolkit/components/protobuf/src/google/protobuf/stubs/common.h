#
ifndef
GOOGLE_PROTOBUF_COMMON_H__
#
define
GOOGLE_PROTOBUF_COMMON_H__
#
include
<
algorithm
>
#
include
<
iostream
>
#
include
<
map
>
#
include
<
set
>
#
include
<
string
>
#
include
<
vector
>
#
include
<
google
/
protobuf
/
stubs
/
port
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
macros
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
platform_macros
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
logging
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
scoped_ptr
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
mutex
.
h
>
#
include
<
google
/
protobuf
/
stubs
/
callback
.
h
>
#
ifndef
PROTOBUF_USE_EXCEPTIONS
#
if
defined
(
_MSC_VER
)
&
&
defined
(
_CPPUNWIND
)
#
define
PROTOBUF_USE_EXCEPTIONS
1
#
elif
defined
(
__EXCEPTIONS
)
#
define
PROTOBUF_USE_EXCEPTIONS
1
#
else
#
define
PROTOBUF_USE_EXCEPTIONS
0
#
endif
#
endif
#
if
PROTOBUF_USE_EXCEPTIONS
#
include
<
exception
>
#
endif
#
if
defined
(
__APPLE__
)
#
include
<
TargetConditionals
.
h
>
#
endif
#
if
defined
(
__ANDROID__
)
|
|
defined
(
GOOGLE_PROTOBUF_OS_ANDROID
)
|
|
(
defined
(
TARGET_OS_IPHONE
)
&
&
TARGET_OS_IPHONE
)
|
|
defined
(
GOOGLE_PROTOBUF_OS_IPHONE
)
#
include
<
pthread
.
h
>
#
endif
#
if
defined
(
_WIN32
)
&
&
defined
(
GetMessage
)
inline
BOOL
GetMessage_Win32
(
LPMSG
lpMsg
HWND
hWnd
UINT
wMsgFilterMin
UINT
wMsgFilterMax
)
{
return
GetMessage
(
lpMsg
hWnd
wMsgFilterMin
wMsgFilterMax
)
;
}
#
undef
GetMessage
inline
BOOL
GetMessage
(
LPMSG
lpMsg
HWND
hWnd
UINT
wMsgFilterMin
UINT
wMsgFilterMax
)
{
return
GetMessage_Win32
(
lpMsg
hWnd
wMsgFilterMin
wMsgFilterMax
)
;
}
#
endif
namespace
std
{
}
namespace
google
{
namespace
protobuf
{
namespace
internal
{
#
define
GOOGLE_PROTOBUF_VERSION
3004000
#
define
GOOGLE_PROTOBUF_VERSION_SUFFIX
"
"
#
define
GOOGLE_PROTOBUF_MIN_LIBRARY_VERSION
3004000
static
const
int
kMinHeaderVersionForLibrary
=
3004000
;
#
define
GOOGLE_PROTOBUF_MIN_PROTOC_VERSION
3004000
static
const
int
kMinHeaderVersionForProtoc
=
3004000
;
void
LIBPROTOBUF_EXPORT
VerifyVersion
(
int
headerVersion
int
minLibraryVersion
const
char
*
filename
)
;
std
:
:
string
LIBPROTOBUF_EXPORT
VersionString
(
int
version
)
;
}
#
define
GOOGLE_PROTOBUF_VERIFY_VERSION
\
:
:
google
:
:
protobuf
:
:
internal
:
:
VerifyVersion
(
\
GOOGLE_PROTOBUF_VERSION
GOOGLE_PROTOBUF_MIN_LIBRARY_VERSION
\
__FILE__
)
class
StringPiece
;
namespace
internal
{
LIBPROTOBUF_EXPORT
bool
IsStructurallyValidUTF8
(
const
char
*
buf
int
len
)
;
inline
bool
IsStructurallyValidUTF8
(
const
std
:
:
string
&
str
)
{
return
IsStructurallyValidUTF8
(
str
.
data
(
)
static_cast
<
int
>
(
str
.
length
(
)
)
)
;
}
LIBPROTOBUF_EXPORT
int
UTF8SpnStructurallyValid
(
const
StringPiece
&
str
)
;
LIBPROTOBUF_EXPORT
char
*
UTF8CoerceToStructurallyValid
(
const
StringPiece
&
str
char
*
dst
char
replace_char
)
;
}
LIBPROTOBUF_EXPORT
void
ShutdownProtobufLibrary
(
)
;
namespace
internal
{
LIBPROTOBUF_EXPORT
void
OnShutdown
(
void
(
*
func
)
(
)
)
;
LIBPROTOBUF_EXPORT
void
OnShutdownDestroyString
(
const
std
:
:
string
*
ptr
)
;
LIBPROTOBUF_EXPORT
void
OnShutdownDestroyMessage
(
const
void
*
ptr
)
;
}
#
if
PROTOBUF_USE_EXCEPTIONS
class
FatalException
:
public
std
:
:
exception
{
public
:
FatalException
(
const
char
*
filename
int
line
const
std
:
:
string
&
message
)
:
filename_
(
filename
)
line_
(
line
)
message_
(
message
)
{
}
virtual
~
FatalException
(
)
throw
(
)
;
virtual
const
char
*
what
(
)
const
throw
(
)
;
const
char
*
filename
(
)
const
{
return
filename_
;
}
int
line
(
)
const
{
return
line_
;
}
const
std
:
:
string
&
message
(
)
const
{
return
message_
;
}
private
:
const
char
*
filename_
;
const
int
line_
;
const
std
:
:
string
message_
;
}
;
#
endif
using
std
:
:
istream
;
using
std
:
:
ostream
;
using
std
:
:
pair
;
using
std
:
:
string
;
using
std
:
:
vector
;
}
}
#
endif
