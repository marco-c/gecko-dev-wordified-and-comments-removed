#
ifndef
GOOGLE_PROTOBUF_ANY_H__
#
define
GOOGLE_PROTOBUF_ANY_H__
#
include
<
string
>
#
include
<
google
/
protobuf
/
stubs
/
common
.
h
>
#
include
<
google
/
protobuf
/
descriptor
.
h
>
#
include
<
google
/
protobuf
/
message
.
h
>
#
include
<
google
/
protobuf
/
arenastring
.
h
>
namespace
google
{
namespace
protobuf
{
namespace
internal
{
class
LIBPROTOBUF_EXPORT
AnyMetadata
{
typedef
ArenaStringPtr
UrlType
;
typedef
ArenaStringPtr
ValueType
;
public
:
AnyMetadata
(
UrlType
*
type_url
ValueType
*
value
)
;
void
PackFrom
(
const
Message
&
message
)
;
void
PackFrom
(
const
Message
&
message
const
string
&
type_url_prefix
)
;
bool
UnpackTo
(
Message
*
message
)
const
;
template
<
typename
T
>
bool
Is
(
)
const
{
return
InternalIs
(
T
:
:
default_instance
(
)
.
GetDescriptor
(
)
)
;
}
private
:
bool
InternalIs
(
const
Descriptor
*
message
)
const
;
UrlType
*
type_url_
;
ValueType
*
value_
;
GOOGLE_DISALLOW_EVIL_CONSTRUCTORS
(
AnyMetadata
)
;
}
;
extern
const
char
kAnyFullTypeName
[
]
;
extern
const
char
kTypeGoogleApisComPrefix
[
]
;
extern
const
char
kTypeGoogleProdComPrefix
[
]
;
bool
ParseAnyTypeUrl
(
const
string
&
type_url
string
*
full_type_name
)
;
bool
GetAnyFieldDescriptors
(
const
Message
&
message
const
FieldDescriptor
*
*
type_url_field
const
FieldDescriptor
*
*
value_field
)
;
}
}
}
#
endif
