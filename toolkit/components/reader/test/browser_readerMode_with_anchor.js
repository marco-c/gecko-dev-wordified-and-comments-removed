"
use
strict
"
;
const
TEST_PATH
=
getRootDirectory
(
gTestPath
)
.
replace
(
"
chrome
:
/
/
mochitests
/
content
"
"
http
:
/
/
example
.
com
"
)
;
add_task
(
function
*
(
)
{
yield
BrowserTestUtils
.
withNewTab
(
TEST_PATH
+
"
readerModeArticle
.
html
#
foo
"
function
*
(
browser
)
{
let
pageShownPromise
=
BrowserTestUtils
.
waitForContentEvent
(
browser
"
AboutReaderContentReady
"
)
;
let
readerButton
=
document
.
getElementById
(
"
reader
-
mode
-
button
"
)
;
readerButton
.
click
(
)
;
yield
pageShownPromise
;
yield
ContentTask
.
spawn
(
browser
null
function
*
(
)
{
ok
(
content
.
document
.
getElementById
(
"
foo
"
)
!
=
=
null
"
foo
element
should
be
in
document
"
)
;
ok
(
content
.
pageYOffset
!
=
0
"
pageYOffset
should
be
>
0
"
)
;
}
)
;
}
)
;
}
)
;
