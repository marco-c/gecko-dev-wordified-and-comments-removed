use
glean_preview
:
:
Configuration
;
use
nserror
:
:
{
nsresult
NS_ERROR_FAILURE
NS_OK
}
;
use
nsstring
:
:
nsAString
;
#
[
no_mangle
]
pub
unsafe
extern
"
C
"
fn
fog_init
(
upload_enabled
:
bool
data_dir
:
&
nsAString
)
-
>
nsresult
{
let
cfg
=
Configuration
{
data_path
:
data_dir
.
to_string
(
)
application_id
:
"
org
.
mozilla
.
fogotype
"
.
into
(
)
upload_enabled
:
upload_enabled
max_events
:
None
delay_ping_lifetime_io
:
false
}
;
if
glean_preview
:
:
initialize
(
cfg
)
.
is_err
(
)
{
return
NS_ERROR_FAILURE
}
NS_OK
}
