#
ifndef
TelemetryFixture_h_
#
define
TelemetryFixture_h_
#
include
"
gtest
/
gtest
.
h
"
#
include
"
nsITelemetry
.
h
"
#
include
"
mozilla
/
CycleCollectedJSContext
.
h
"
#
include
"
mozilla
/
dom
/
ScriptSettings
.
h
"
class
TelemetryTestFixture
:
public
:
:
testing
:
:
Test
{
protected
:
TelemetryTestFixture
(
)
:
mCleanGlobal
(
nullptr
)
{
}
virtual
void
SetUp
(
)
;
JSObject
*
mCleanGlobal
;
nsCOMPtr
<
nsITelemetry
>
mTelemetry
;
}
;
class
MOZ_RAII
AutoJSContextWithGlobal
{
public
:
explicit
AutoJSContextWithGlobal
(
JSObject
*
aGlobalObject
)
;
JSContext
*
GetJSContext
(
)
const
;
protected
:
mozilla
:
:
dom
:
:
AutoJSAPI
mJsAPI
;
JSContext
*
mCx
;
}
;
#
endif
