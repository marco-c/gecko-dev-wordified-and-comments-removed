#
ifndef
TelemetryHistogram_h__
#
define
TelemetryHistogram_h__
#
include
"
mozilla
/
TelemetryHistogramEnums
.
h
"
#
include
"
mozilla
/
TelemetryComms
.
h
"
#
include
"
nsXULAppAPI
.
h
"
namespace
TelemetryHistogram
{
void
CreateStatisticsRecorder
(
)
;
void
DestroyStatisticsRecorder
(
)
;
void
InitializeGlobalState
(
bool
canRecordBase
bool
canRecordExtended
)
;
void
DeInitializeGlobalState
(
)
;
#
ifdef
DEBUG
bool
GlobalStateHasBeenInitialized
(
)
;
#
endif
bool
CanRecordBase
(
)
;
void
SetCanRecordBase
(
bool
b
)
;
bool
CanRecordExtended
(
)
;
void
SetCanRecordExtended
(
bool
b
)
;
void
InitHistogramRecordingEnabled
(
)
;
void
SetHistogramRecordingEnabled
(
mozilla
:
:
Telemetry
:
:
ID
aID
bool
aEnabled
)
;
nsresult
SetHistogramRecordingEnabled
(
const
nsACString
&
id
bool
aEnabled
)
;
void
Accumulate
(
mozilla
:
:
Telemetry
:
:
ID
aHistogram
uint32_t
aSample
)
;
void
Accumulate
(
mozilla
:
:
Telemetry
:
:
ID
aID
const
nsCString
&
aKey
uint32_t
aSample
)
;
void
Accumulate
(
const
char
*
name
uint32_t
sample
)
;
void
Accumulate
(
const
char
*
name
const
nsCString
&
key
uint32_t
sample
)
;
void
AccumulateCategorical
(
mozilla
:
:
Telemetry
:
:
ID
aId
const
nsCString
&
aLabel
)
;
void
AccumulateChild
(
GeckoProcessType
aProcessType
const
nsTArray
<
mozilla
:
:
Telemetry
:
:
Accumulation
>
&
aAccumulations
)
;
void
AccumulateChildKeyed
(
GeckoProcessType
aProcessType
const
nsTArray
<
mozilla
:
:
Telemetry
:
:
KeyedAccumulation
>
&
aAccumulations
)
;
nsresult
GetHistogramById
(
const
nsACString
&
name
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
nsresult
GetKeyedHistogramById
(
const
nsACString
&
name
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
const
char
*
GetHistogramName
(
mozilla
:
:
Telemetry
:
:
ID
id
)
;
nsresult
HistogramFrom
(
const
nsACString
&
name
const
nsACString
&
existing_name
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
nsresult
CreateHistogramSnapshots
(
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
bool
subsession
bool
clearSubsession
)
;
nsresult
RegisteredHistograms
(
uint32_t
aDataset
uint32_t
*
aCount
char
*
*
*
aHistograms
)
;
nsresult
RegisteredKeyedHistograms
(
uint32_t
aDataset
uint32_t
*
aCount
char
*
*
*
aHistograms
)
;
nsresult
GetKeyedHistogramSnapshots
(
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
nsresult
RegisterAddonHistogram
(
const
nsACString
&
id
const
nsACString
&
name
uint32_t
histogramType
uint32_t
min
uint32_t
max
uint32_t
bucketCount
uint8_t
optArgCount
)
;
nsresult
GetAddonHistogram
(
const
nsACString
&
id
const
nsACString
&
name
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
nsresult
UnregisterAddonHistograms
(
const
nsACString
&
id
)
;
nsresult
GetAddonHistogramSnapshots
(
JSContext
*
cx
JS
:
:
MutableHandle
<
JS
:
:
Value
>
ret
)
;
size_t
GetMapShallowSizesOfExcludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
;
size_t
GetHistogramSizesofIncludingThis
(
mozilla
:
:
MallocSizeOf
aMallocSizeOf
)
;
void
IPCTimerFired
(
nsITimer
*
aTimer
void
*
aClosure
)
;
}
#
endif
