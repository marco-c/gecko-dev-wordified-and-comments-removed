#
ifndef
MOZILLA_CREDENTIALCHOSENCALLBACK_H_
#
define
MOZILLA_CREDENTIALCHOSENCALLBACK_H_
#
include
"
nsICredentialChosenCallback
.
h
"
#
include
"
nsINamed
.
h
"
#
include
"
nsStringFwd
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
mozilla
/
dom
/
IdentityCredentialSerializationHelpers
.
h
"
#
include
"
mozilla
/
dom
/
Promise
.
h
"
namespace
mozilla
{
using
dom
:
:
IPCIdentityCredential
;
using
dom
:
:
Promise
;
class
CredentialChosenCallback
final
:
public
nsICredentialChosenCallback
public
nsINamed
{
public
:
explicit
CredentialChosenCallback
(
CopyableTArray
<
IPCIdentityCredential
>
&
&
aOptions
const
RefPtr
<
MozPromise
<
IPCIdentityCredential
nsresult
true
>
:
:
Private
>
&
aResult
)
:
mOptions
(
aOptions
)
mResult
(
aResult
)
{
}
NS_IMETHOD
Notify
(
const
nsACString
&
aCredential
)
override
;
NS_IMETHOD
GetName
(
nsACString
&
aName
)
override
;
NS_DECL_ISUPPORTS
private
:
~
CredentialChosenCallback
(
)
{
if
(
mResult
)
{
mResult
-
>
Reject
(
NS_ERROR_FAILURE
__func__
)
;
}
}
;
CopyableTArray
<
IPCIdentityCredential
>
mOptions
;
RefPtr
<
MozPromise
<
IPCIdentityCredential
nsresult
true
>
:
:
Private
>
mResult
;
}
;
}
#
endif
