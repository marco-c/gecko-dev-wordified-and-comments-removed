#
include
"
reflect
.
h
"
#
include
"
jsapi
.
h
"
#
include
"
nsString
.
h
"
#
include
"
xpc_make_class
.
h
"
namespace
mozilla
:
:
reflect
{
NS_IMPL_ISUPPORTS
(
Module
nsIXPCScriptable
)
Module
:
:
Module
(
)
=
default
;
Module
:
:
~
Module
(
)
=
default
;
#
define
XPC_MAP_CLASSNAME
Module
#
define
XPC_MAP_QUOTED_CLASSNAME
"
Module
"
#
define
XPC_MAP_FLAGS
XPC_SCRIPTABLE_WANT_CALL
#
include
"
xpc_map_end
.
h
"
NS_IMETHODIMP
Module
:
:
Call
(
nsIXPConnectWrappedNative
*
wrapper
JSContext
*
cx
JSObject
*
obj
const
JS
:
:
CallArgs
&
args
bool
*
_retval
)
{
JS
:
:
Rooted
<
JSObject
*
>
global
(
cx
JS
:
:
GetScriptedCallerGlobal
(
cx
)
)
;
if
(
!
global
)
return
NS_ERROR_NOT_AVAILABLE
;
JSAutoRealm
ar
(
cx
global
)
;
*
_retval
=
JS_InitReflectParse
(
cx
global
)
;
return
NS_OK
;
}
}
