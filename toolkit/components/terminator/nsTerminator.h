#
ifndef
nsTerminator_h__
#
define
nsTerminator_h__
#
include
"
nsISupports
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsITerminatorTest
.
h
"
namespace
mozilla
{
class
nsTerminator
final
:
public
nsIObserver
public
nsITerminatorTest
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
NS_DECL_NSITERMINATORTEST
nsTerminator
(
)
;
void
AdvancePhase
(
mozilla
:
:
ShutdownPhase
aPhase
)
;
private
:
void
Start
(
)
;
void
StartWatchdog
(
)
;
void
StartWriter
(
)
;
void
UpdateHeartbeat
(
int
aStep
)
;
void
UpdateTelemetry
(
)
;
void
UpdateCrashReport
(
const
char
*
aTopic
)
;
~
nsTerminator
(
)
=
default
;
bool
mInitialized
;
int
mCurrentStep
;
}
;
}
#
define
NS_TOOLKIT_TERMINATOR_CID
\
{
\
0x2e59cc70
0xf83a
0x412f
{
\
0x89
0xd4
0x45
0x38
0x85
0x83
0x72
0x17
\
}
\
}
#
define
NS_TOOLKIT_TERMINATOR_CONTRACTID
\
"
mozilla
.
org
/
toolkit
/
shutdown
-
terminator
;
1
"
#
endif
