#
ifndef
mozilla_OwnedRustBuffer_h
#
define
mozilla_OwnedRustBuffer_h
#
include
"
mozilla
/
ErrorResult
.
h
"
#
include
"
mozilla
/
dom
/
TypedArray
.
h
"
#
include
"
mozilla
/
dom
/
UniFFIRust
.
h
"
namespace
mozilla
:
:
uniffi
{
class
OwnedRustBuffer
final
{
private
:
RustBuffer
mBuf
;
void
FreeData
(
)
;
public
:
OwnedRustBuffer
(
)
:
mBuf
{
0
}
{
}
;
explicit
OwnedRustBuffer
(
const
RustBuffer
&
aBuf
)
;
OwnedRustBuffer
(
OwnedRustBuffer
&
&
aOther
)
;
OwnedRustBuffer
&
operator
=
(
OwnedRustBuffer
&
&
aOther
)
;
OwnedRustBuffer
(
const
OwnedRustBuffer
&
)
=
delete
;
OwnedRustBuffer
&
operator
=
(
const
OwnedRustBuffer
&
)
=
delete
;
~
OwnedRustBuffer
(
)
;
static
OwnedRustBuffer
FromArrayBuffer
(
const
mozilla
:
:
dom
:
:
ArrayBuffer
&
aArrayBuffer
)
;
RustBuffer
IntoRustBuffer
(
)
;
void
IntoArrayBuffer
(
JSContext
*
cx
JS
:
:
MutableHandle
<
JSObject
*
>
aResult
ErrorResult
&
aError
)
;
bool
IsValid
(
)
const
{
return
mBuf
.
data
!
=
nullptr
;
}
private
:
static
void
ArrayBufferFreeFunc
(
void
*
contents
void
*
userData
)
;
}
;
}
#
endif
