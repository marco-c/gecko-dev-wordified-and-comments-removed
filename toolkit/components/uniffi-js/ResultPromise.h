#
ifndef
mozilla_dom_UniFFIResultPromise_h
#
define
mozilla_dom_UniFFIResultPromise_h
#
include
"
nsThreadUtils
.
h
"
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
#
include
"
mozilla
/
dom
/
Promise
.
h
"
#
include
"
mozilla
/
dom
/
UniFFIBinding
.
h
"
namespace
mozilla
:
:
uniffi
{
extern
mozilla
:
:
LazyLogModule
gUniffiLogger
;
class
UniffiAsyncCallHandler
;
class
UniffiCallHandlerBase
;
class
ResultPromise
{
public
:
ResultPromise
(
)
=
default
;
void
Init
(
const
dom
:
:
GlobalObject
&
aGlobal
ErrorResult
&
aError
)
;
dom
:
:
Promise
*
GetPromise
(
)
{
return
mPromise
;
}
void
Complete
(
UniquePtr
<
UniffiCallHandlerBase
>
aHandler
)
;
void
RejectWithUnexpectedError
(
)
;
private
:
nsMainThreadPtrHandle
<
dom
:
:
Promise
>
mPromise
;
}
;
}
#
endif
