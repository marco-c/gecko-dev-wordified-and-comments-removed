#
ifndef
mozilla_dom_UniFFI_h
#
define
mozilla_dom_UniFFI_h
#
include
"
mozilla
/
ErrorResult
.
h
"
#
include
"
mozilla
/
dom
/
RootedDictionary
.
h
"
#
include
"
mozilla
/
dom
/
TypedArray
.
h
"
#
include
"
mozilla
/
dom
/
UniFFIBinding
.
h
"
namespace
mozilla
:
:
dom
{
using
UniFFIScaffoldingValue
=
OwningDoubleOrArrayBufferOrUniFFIPointer
;
class
UniFFIScaffolding
{
public
:
static
already_AddRefed
<
Promise
>
CallAsync
(
const
GlobalObject
&
aGlobal
uint64_t
aId
const
Sequence
<
UniFFIScaffoldingValue
>
&
aArgs
ErrorResult
&
aErrorResult
)
;
static
void
CallSync
(
const
GlobalObject
&
aGlobal
uint64_t
aId
const
Sequence
<
UniFFIScaffoldingValue
>
&
aArgs
RootedDictionary
<
UniFFIScaffoldingCallResult
>
&
aReturnValue
ErrorResult
&
aErrorResult
)
;
static
already_AddRefed
<
UniFFIPointer
>
ReadPointer
(
const
GlobalObject
&
aGlobal
uint64_t
aId
const
ArrayBuffer
&
aArrayBuff
long
aPosition
ErrorResult
&
aError
)
;
static
void
WritePointer
(
const
GlobalObject
&
aGlobal
uint64_t
aId
const
UniFFIPointer
&
aPtr
const
ArrayBuffer
&
aArrayBuff
long
aPosition
ErrorResult
&
aError
)
;
static
void
RegisterCallbackHandler
(
GlobalObject
&
aGlobal
uint64_t
interfaceId
UniFFICallbackHandler
&
aCallbackHandler
ErrorResult
&
aError
)
;
static
void
DeregisterCallbackHandler
(
GlobalObject
&
aGlobal
uint64_t
interfaceId
ErrorResult
&
aError
)
;
}
;
}
#
endif
