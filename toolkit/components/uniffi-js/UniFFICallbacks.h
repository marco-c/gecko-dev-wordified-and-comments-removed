#
ifndef
mozilla_UniFFICallbacks_h
#
define
mozilla_UniFFICallbacks_h
#
include
"
mozilla
/
StaticPtr
.
h
"
#
include
"
mozilla
/
dom
/
UniFFIRust
.
h
"
#
include
"
mozilla
/
dom
/
UniFFIScaffolding
.
h
"
namespace
mozilla
:
:
uniffi
{
typedef
void
(
*
CallbackInitFunc
)
(
ForeignCallback
RustCallStatus
*
)
;
struct
CallbackInterfaceInfo
{
const
char
*
mName
;
StaticRefPtr
<
dom
:
:
UniFFICallbackHandler
>
*
mHandler
;
ForeignCallback
mForeignCallback
;
CallbackInitFunc
mInitForeignCallback
;
}
;
Maybe
<
CallbackInterfaceInfo
>
UniFFIGetCallbackInterfaceInfo
(
uint64_t
aInterfaceId
)
;
#
ifdef
MOZ_UNIFFI_FIXTURES
Maybe
<
CallbackInterfaceInfo
>
UniFFIFixturesGetCallbackInterfaceInfo
(
uint64_t
aInterfaceId
)
;
#
endif
void
RegisterCallbackHandler
(
uint64_t
aInterfaceId
dom
:
:
UniFFICallbackHandler
&
aCallbackHandler
ErrorResult
&
aError
)
;
void
DeregisterCallbackHandler
(
uint64_t
aInterfaceId
ErrorResult
&
aError
)
;
MOZ_CAN_RUN_SCRIPT
void
QueueCallback
(
size_t
aInterfaceId
uint64_t
aHandle
uint32_t
aMethod
const
uint8_t
*
aArgsData
int32_t
aArgsLen
)
;
}
#
endif
