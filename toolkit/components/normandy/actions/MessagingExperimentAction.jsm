"
use
strict
"
;
const
{
BaseStudyAction
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
normandy
/
actions
/
BaseStudyAction
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
ExperimentManager
"
"
resource
:
/
/
nimbus
/
lib
/
ExperimentManager
.
jsm
"
)
;
ChromeUtils
.
defineModuleGetter
(
this
"
ActionSchemas
"
"
resource
:
/
/
normandy
/
actions
/
schemas
/
index
.
js
"
)
;
const
EXPORTED_SYMBOLS
=
[
"
MessagingExperimentAction
"
]
;
const
RECIPE_SOURCE
=
"
normandy
"
;
class
MessagingExperimentAction
extends
BaseStudyAction
{
constructor
(
)
{
super
(
)
;
this
.
manager
=
ExperimentManager
;
}
get
schema
(
)
{
return
ActionSchemas
[
"
messaging
-
experiment
"
]
;
}
async
_run
(
recipe
)
{
if
(
recipe
.
arguments
)
{
await
this
.
manager
.
onRecipe
(
recipe
.
arguments
RECIPE_SOURCE
)
;
}
}
async
_finalize
(
)
{
this
.
manager
.
onFinalize
(
RECIPE_SOURCE
)
;
}
}
