"
use
strict
"
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
var
EXPORTED_SYMBOLS
=
[
"
TelemetryEvents
"
]
;
const
TELEMETRY_CATEGORY
=
"
normandy
"
;
const
TelemetryEvents
=
{
NO_ENROLLMENT_ID_MARKER
:
"
__NO_ENROLLMENT_ID__
"
init
(
)
{
Services
.
telemetry
.
setEventRecordingEnabled
(
TELEMETRY_CATEGORY
true
)
;
}
sendEvent
(
method
object
value
extra
)
{
for
(
const
val
of
Object
.
values
(
extra
)
)
{
if
(
val
=
=
null
)
{
throw
new
Error
(
"
Extra
parameters
in
telemetry
events
must
not
be
null
"
)
;
}
}
Services
.
telemetry
.
recordEvent
(
TELEMETRY_CATEGORY
method
object
value
extra
)
;
}
}
;
