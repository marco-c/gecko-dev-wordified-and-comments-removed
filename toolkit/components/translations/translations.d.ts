export
interface
Attachment
{
hash
:
string
;
size
:
string
;
filename
:
string
;
location
:
string
;
mimetype
:
string
;
}
export
interface
TranslationModelRecord
{
id
:
string
;
name
:
string
;
fromLang
:
string
;
toLang
:
string
;
version
:
string
;
fileType
:
string
;
attachment
:
Attachment
;
schema
:
number
;
last_modified
:
string
;
filter_expression
:
string
;
}
export
interface
WasmRecord
{
id
:
string
;
name
:
string
;
release
:
string
;
revision
:
string
;
license
:
string
;
version
:
string
;
attachment
:
Attachment
;
last_modified
:
string
;
filter_expression
:
string
;
}
export
namespace
Bergamot
{
export
interface
ModuleExport
{
BlockingService
:
typeof
BlockingService
;
AlignedMemoryList
:
typeof
AlignedMemoryList
;
TranslationModel
:
typeof
TranslationModel
;
AlignedMemory
:
typeof
AlignedMemory
;
VectorResponseOptions
:
typeof
VectorResponseOptions
;
VectorString
:
typeof
VectorString
;
}
export
class
Vector
<
T
>
{
size
(
)
:
number
;
get
(
index
:
number
)
:
T
;
push_back
(
item
:
T
)
;
}
export
class
VectorResponse
extends
Vector
<
Response
>
{
}
export
class
VectorString
extends
Vector
<
string
>
{
}
export
class
VectorResponseOptions
extends
Vector
<
ResponseOptions
>
{
}
export
class
AlignedMemoryList
extends
Vector
<
AlignedMemory
>
{
}
export
class
BlockingService
{
translate
(
translationModel
vectorSourceText
:
VectorString
vectorResponseOptions
:
VectorResponseOptions
)
:
VectorResponse
;
translateViaPivoting
(
first
:
TranslationModel
second
:
TranslationModel
vectorSourceText
:
VectorString
vectorResponseOptions
:
VectorResponseOptions
)
:
VectorResponse
;
}
export
class
TranslationModel
{
}
export
class
AlignedMemory
{
constructor
(
size
:
number
alignment
:
number
)
;
size
(
)
:
number
;
getByteArrayView
(
)
:
Uint8Array
;
}
export
class
Response
{
getOriginalText
(
)
:
string
;
getTranslatedText
(
)
:
string
;
}
export
class
ResponseOptions
{
qualityScores
:
boolean
;
alignment
:
boolean
;
html
:
boolean
;
sentenceMappings
:
boolean
}
}
interface
RemoteSettingsClient
{
on
:
Function
get
:
Function
attachments
:
any
}
interface
LanguageTranslationModelFile
{
buffer
:
ArrayBuffer
record
:
TranslationModelRecord
}
interface
LanguageTranslationModelFiles
{
model
:
LanguageTranslationModelFile
lex
:
LanguageTranslationModelFile
qualityModel
?
:
LanguageTranslationModelFile
vocab
?
:
LanguageTranslationModelFile
srcvocab
?
:
LanguageTranslationModelFile
trgvocab
?
:
LanguageTranslationModelFile
}
;
type
LanguageTranslationModelFilesAligned
=
{
[
K
in
keyof
LanguageTranslationModelFiles
]
:
AlignedMemory
}
;
interface
TranslationsEnginePayload
{
bergamotWasmArrayBuffer
:
ArrayBuffer
languageModelFiles
:
LanguageTranslationModelFiles
[
]
isMocked
:
boolean
}
export
type
NodeVisibility
=
"
in
-
viewport
"
|
"
out
-
of
-
viewport
"
|
"
hidden
"
;
export
interface
LangTags
{
isDocLangTagSupported
:
boolean
docLangTag
:
string
|
null
userLangTag
:
string
|
null
}
export
interface
LanguagePair
{
fromLang
:
string
toLang
:
string
}
;
export
interface
SupportedLanguages
{
languagePairs
:
LanguagePair
[
]
fromLanguages
:
Array
<
{
langTag
:
string
displayName
:
string
}
>
toLanguages
:
Array
<
{
langTag
:
string
displayName
:
string
}
>
}
export
type
TranslationErrors
=
"
engine
-
load
-
error
"
;
export
type
SelectTranslationsPanelState
=
|
{
phase
:
"
closed
"
;
}
|
{
phase
:
"
idle
"
;
fromLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
}
|
{
phase
:
"
translation
-
failure
"
;
fromLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
}
|
{
phase
:
"
translatable
"
;
fromLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
}
|
{
phase
:
"
translating
"
;
fromLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
}
|
{
phase
:
"
translated
"
;
fromLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
translatedText
:
string
}
|
{
phase
:
"
unsupported
"
;
detectedLanguage
:
string
;
toLanguage
:
string
sourceText
:
string
}
