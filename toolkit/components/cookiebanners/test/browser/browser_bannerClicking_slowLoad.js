"
use
strict
"
;
add_setup
(
clickTestSetup
)
;
add_task
(
async
function
test_clicking_with_delayed_banner
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
cookiebanners
.
service
.
mode
"
Ci
.
nsICookieBannerService
.
MODE_REJECT
]
]
}
)
;
insertTestClickRules
(
)
;
let
TEST_PAGE
=
TEST_ORIGIN_A
+
TEST_PATH
+
"
file_delayed_banner_load
.
html
"
;
await
openPageAndVerify
(
{
win
:
window
domain
:
TEST_DOMAIN_A
testURL
:
TEST_PAGE
visible
:
false
expected
:
"
OptOut
"
}
)
;
}
)
;
