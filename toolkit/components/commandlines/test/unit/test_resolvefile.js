"
use
strict
"
;
add_task
(
async
function
test_resolveFile
(
)
{
const
EXISTING_FILE
=
do_get_file
(
"
xpcshell
.
ini
"
)
;
let
cmdLine
=
Cu
.
createCommandLine
(
[
]
null
Ci
.
nsICommandLine
.
STATE_REMOTE_EXPLICIT
)
;
let
fileByPath
=
cmdLine
.
resolveFile
(
EXISTING_FILE
.
path
)
;
info
(
"
Resolved
:
"
+
fileByPath
.
path
)
;
Assert
.
ok
(
EXISTING_FILE
.
equals
(
fileByPath
)
"
Should
find
the
same
file
"
)
;
Assert
.
ok
(
!
cmdLine
.
resolveFile
(
"
xpcshell
.
ini
"
)
"
Should
get
null
for
relative
files
.
"
)
;
cmdLine
=
Cu
.
createCommandLine
(
[
]
EXISTING_FILE
.
parent
Ci
.
nsICommandLine
.
STATE_REMOTE_EXPLICIT
)
;
let
resolvedTxtFile
=
cmdLine
.
resolveFile
(
"
xpcshell
.
ini
"
)
;
info
(
"
Resolved
:
"
+
resolvedTxtFile
.
path
)
;
Assert
.
ok
(
EXISTING_FILE
.
equals
(
resolvedTxtFile
)
"
Should
resolve
relative
file
.
"
)
;
}
)
;
