#
include
"
Common
.
h
"
#
include
"
nsComponentManagerUtils
.
h
"
#
include
"
nsIConsoleService
.
h
"
#
include
"
nsIScriptError
.
h
"
#
include
"
nsServiceManagerUtils
.
h
"
namespace
mozilla
:
:
glean
{
void
LogToBrowserConsole
(
uint32_t
aLogLevel
const
nsAString
&
aMsg
)
{
nsCOMPtr
<
nsIConsoleService
>
console
(
do_GetService
(
"
mozilla
.
org
/
consoleservice
;
1
"
)
)
;
if
(
!
console
)
{
NS_WARNING
(
"
Failed
to
log
message
to
console
.
"
)
;
return
;
}
nsCOMPtr
<
nsIScriptError
>
error
(
do_CreateInstance
(
NS_SCRIPTERROR_CONTRACTID
)
)
;
error
-
>
Init
(
aMsg
u
"
"
_ns
u
"
"
_ns
0
0
aLogLevel
"
chrome
javascript
"
_ns
false
true
)
;
console
-
>
LogMessage
(
error
)
;
}
}
