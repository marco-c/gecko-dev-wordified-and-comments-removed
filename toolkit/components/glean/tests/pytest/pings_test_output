use
crate
:
:
private
:
:
Ping
;
use
once_cell
:
:
sync
:
:
Lazy
;
#
[
allow
(
non_upper_case_globals
)
]
pub
static
not_baseline
:
Lazy
<
Ping
>
=
Lazy
:
:
new
(
|
|
{
Ping
:
:
new
(
"
not
-
baseline
"
true
false
vec
!
[
"
background
"
.
into
(
)
"
dirty_startup
"
.
into
(
)
"
foreground
"
.
into
(
)
]
)
}
)
;
#
[
allow
(
non_upper_case_globals
)
]
pub
static
not_metrics
:
Lazy
<
Ping
>
=
Lazy
:
:
new
(
|
|
{
Ping
:
:
new
(
"
not
-
metrics
"
true
false
vec
!
[
"
overdue
"
.
into
(
)
"
reschedule
"
.
into
(
)
"
today
"
.
into
(
)
"
tomorrow
"
.
into
(
)
"
upgrade
"
.
into
(
)
]
)
}
)
;
#
[
allow
(
non_upper_case_globals
)
]
pub
static
not_events
:
Lazy
<
Ping
>
=
Lazy
:
:
new
(
|
|
{
Ping
:
:
new
(
"
not
-
events
"
true
false
vec
!
[
"
background
"
.
into
(
)
"
max_capacity
"
.
into
(
)
"
startup
"
.
into
(
)
]
)
}
)
;
#
[
allow
(
non_upper_case_globals
)
]
pub
static
not_deletion_request
:
Lazy
<
Ping
>
=
Lazy
:
:
new
(
|
|
{
Ping
:
:
new
(
"
not
-
deletion
-
request
"
true
true
vec
!
[
]
)
}
)
;
#
[
doc
(
hidden
)
]
pub
fn
register_pings
(
)
{
let
_
=
&
*
not_baseline
;
let
_
=
&
*
not_metrics
;
let
_
=
&
*
not_events
;
let
_
=
&
*
not_deletion_request
;
}
#
[
cfg
(
feature
=
"
with_gecko
"
)
]
pub
(
crate
)
fn
submit_ping_by_id
(
id
:
u32
reason
:
Option
<
&
str
>
)
{
match
id
{
1
=
>
not_baseline
.
submit
(
reason
)
2
=
>
not_metrics
.
submit
(
reason
)
3
=
>
not_events
.
submit
(
reason
)
4
=
>
not_deletion_request
.
submit
(
reason
)
_
=
>
{
log
:
:
error
!
(
"
Cannot
submit
unknown
ping
{
}
by
id
.
"
id
)
;
}
}
}
