macro_rules
!
metric_get
{
(
map
:
ident
id
:
ident
)
=
>
{
match
crate
:
:
metrics
:
:
__glean_metric_maps
:
:
map
.
get
(
&
id
.
into
(
)
)
{
Some
(
metric
)
=
>
metric
None
=
>
panic
!
(
"
No
metric
for
id
{
}
"
id
)
}
}
;
}
macro_rules
!
test_has
{
(
map
:
ident
id
:
ident
storage
:
ident
)
=
>
{
{
let
metric
=
metric_get
!
(
map
id
)
;
metric
.
test_get_value
(
storage
.
as_str
(
)
)
.
is_some
(
)
as
u8
}
}
;
}
macro_rules
!
test_get
{
(
map
:
ident
id
:
ident
storage
:
ident
)
=
>
{
{
let
metric
=
metric_get
!
(
map
id
)
;
metric
.
test_get_value
(
storage
.
as_str
(
)
)
.
unwrap
(
)
}
}
;
}
