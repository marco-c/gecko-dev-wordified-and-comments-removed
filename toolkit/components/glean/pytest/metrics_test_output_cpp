#
ifndef
mozilla_Metrics_h
#
define
mozilla_Metrics_h
#
include
"
mozilla
/
glean
/
bindings
/
MetricTypes
.
h
"
#
include
"
mozilla
/
Tuple
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
nsTArray
.
h
"
#
include
"
nsPrintfCString
.
h
"
namespace
mozilla
:
:
glean
{
struct
NoExtraKeys
;
namespace
test
{
constexpr
impl
:
:
BooleanMetric
boolean_metric
(
1
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
BooleanMetric
>
labeled_boolean_metric
(
2
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
BooleanMetric
>
labeled_boolean_metric_labels
(
3
)
;
constexpr
impl
:
:
CounterMetric
counter_metric
(
4
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
CounterMetric
>
labeled_counter_metric
(
5
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
CounterMetric
>
labeled_counter_metric_labels
(
6
)
;
constexpr
impl
:
:
StringMetric
string_metric
(
7
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
StringMetric
>
labeled_string_metric
(
8
)
;
constexpr
impl
:
:
Labeled
<
impl
:
:
StringMetric
>
labeled_string_metric_labels
(
9
)
;
constexpr
impl
:
:
StringListMetric
string_list_metric
(
10
)
;
constexpr
impl
:
:
TimespanMetric
timespan_metric
(
11
)
;
constexpr
impl
:
:
TimingDistributionMetric
timing_distribution_metric
(
12
)
;
constexpr
impl
:
:
MemoryDistributionMetric
memory_distribution_metric
(
13
)
;
constexpr
impl
:
:
CustomDistributionMetric
custom_distribution_metric
(
14
)
;
}
namespace
test_nested
{
constexpr
impl
:
:
UuidMetric
uuid_metric
(
15
)
;
constexpr
impl
:
:
DatetimeMetric
datetime_metric
(
16
)
;
constexpr
impl
:
:
EventMetric
<
NoExtraKeys
>
event_metric
(
17
)
;
struct
EventMetricWithExtraExtra
{
mozilla
:
:
Maybe
<
nsCString
>
anExtraKey
;
mozilla
:
:
Maybe
<
nsCString
>
anotherExtraKey
;
Tuple
<
nsTArray
<
uint32_t
>
nsTArray
<
nsCString
>
>
ToFfiExtra
(
)
const
{
nsTArray
<
uint32_t
>
extraKeys
;
nsTArray
<
nsCString
>
extraValues
;
if
(
anExtraKey
)
{
extraKeys
.
AppendElement
(
0
)
;
extraValues
.
EmplaceBack
(
anExtraKey
.
value
(
)
)
;
}
if
(
anotherExtraKey
)
{
extraKeys
.
AppendElement
(
1
)
;
extraValues
.
EmplaceBack
(
anotherExtraKey
.
value
(
)
)
;
}
return
MakeTuple
(
std
:
:
move
(
extraKeys
)
std
:
:
move
(
extraValues
)
)
;
}
}
;
constexpr
impl
:
:
EventMetric
<
EventMetricWithExtraExtra
>
event_metric_with_extra
(
18
)
;
constexpr
impl
:
:
QuantityMetric
quantity_metric
(
19
)
;
}
}
#
endif
