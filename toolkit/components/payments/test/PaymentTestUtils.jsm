"
use
strict
"
;
this
.
EXPORTED_SYMBOLS
=
[
"
PaymentTestUtils
"
]
;
this
.
PaymentTestUtils
=
{
ContentTasks
:
{
addCompletionHandler
:
async
(
)
=
>
{
let
response
=
await
content
.
showPromise
;
response
.
complete
(
)
;
return
{
response
:
response
.
toJSON
(
)
methodDetails
:
response
.
details
}
;
}
createRequest
:
(
{
methodData
details
options
}
)
=
>
{
const
rq
=
new
content
.
PaymentRequest
(
methodData
details
options
)
;
content
.
rq
=
rq
;
}
createAndShowRequest
:
(
{
methodData
details
options
}
)
=
>
{
const
rq
=
new
content
.
PaymentRequest
(
methodData
details
options
)
;
content
.
rq
=
rq
;
content
.
showPromise
=
rq
.
show
(
)
;
}
}
DialogContentTasks
:
{
manuallyClickCancel
:
(
)
=
>
{
content
.
document
.
getElementById
(
"
cancel
"
)
.
click
(
)
;
}
completePayment
:
(
)
=
>
{
content
.
document
.
getElementById
(
"
pay
"
)
.
click
(
)
;
}
setSecurityCode
:
(
{
securityCode
}
)
=
>
{
let
picker
=
Cu
.
waiveXrays
(
content
.
document
.
querySelector
(
"
payment
-
method
-
picker
"
)
)
;
Cu
.
unwaiveXrays
(
picker
.
securityCodeInput
)
.
setUserInput
(
securityCode
)
;
}
}
MethodData
:
{
basicCard
:
{
supportedMethods
:
"
basic
-
card
"
}
bobPay
:
{
supportedMethods
:
"
https
:
/
/
www
.
example
.
com
/
bobpay
"
}
}
Details
:
{
total60USD
:
{
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
60
.
00
"
}
}
}
twoDisplayItems
:
{
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
32
.
00
"
}
}
displayItems
:
[
{
label
:
"
First
"
amount
:
{
currency
:
"
USD
"
value
:
"
1
"
}
}
{
label
:
"
Second
"
amount
:
{
currency
:
"
USD
"
value
:
"
2
"
}
}
]
}
twoShippingOptions
:
{
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
2
.
00
"
}
}
shippingOptions
:
[
{
id
:
"
1
"
label
:
"
Meh
Unreliable
Shipping
"
amount
:
{
currency
:
"
USD
"
value
:
"
1
"
}
}
{
id
:
"
2
"
label
:
"
Premium
Slow
Shipping
"
amount
:
{
currency
:
"
USD
"
value
:
"
2
"
}
selected
:
true
}
]
}
bobPayPaymentModifier
:
{
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
2
.
00
"
}
}
displayItems
:
[
{
label
:
"
First
"
amount
:
{
currency
:
"
USD
"
value
:
"
1
"
}
}
]
modifiers
:
[
{
additionalDisplayItems
:
[
{
label
:
"
Credit
card
fee
"
amount
:
{
currency
:
"
USD
"
value
:
"
0
.
50
"
}
}
]
supportedMethods
:
"
basic
-
card
"
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
2
.
50
"
}
}
data
:
{
supportedTypes
:
"
credit
"
}
}
{
additionalDisplayItems
:
[
{
label
:
"
Bob
-
pay
fee
"
amount
:
{
currency
:
"
USD
"
value
:
"
1
.
50
"
}
}
]
supportedMethods
:
"
https
:
/
/
www
.
example
.
com
/
bobpay
"
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
3
.
50
"
}
}
}
]
}
}
}
;
