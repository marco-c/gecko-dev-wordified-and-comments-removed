"
use
strict
"
;
const
methodData
=
[
{
supportedMethods
:
[
"
basic
-
card
"
]
}
]
;
const
details
=
{
total
:
{
label
:
"
Total
due
"
amount
:
{
currency
:
"
USD
"
value
:
"
60
.
00
"
}
}
}
;
add_task
(
async
function
test_show_abort_dialog
(
)
{
await
BrowserTestUtils
.
withNewTab
(
{
gBrowser
url
:
BLANK_PAGE_URL
}
async
browser
=
>
{
await
ContentTask
.
spawn
(
browser
{
methodData
details
}
ContentTasks
.
createAndShowRequest
)
;
let
win
=
await
getDialogWindow
(
)
;
let
requestId
=
paymentUISrv
.
requestIdForWindow
(
win
)
;
ok
(
requestId
"
requestId
should
be
defined
"
)
;
ok
(
!
win
.
closed
"
dialog
should
not
be
closed
"
)
;
await
ContentTask
.
spawn
(
browser
null
async
(
)
=
>
content
.
rq
.
abort
(
)
)
;
ok
(
win
.
closed
"
dialog
should
be
closed
"
)
;
}
)
;
}
)
;
