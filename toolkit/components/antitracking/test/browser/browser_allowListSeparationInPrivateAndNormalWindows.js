"
use
strict
"
;
add_task
(
async
_
=
>
{
let
uri
=
Services
.
io
.
newURI
(
"
https
:
/
/
example
.
net
"
)
;
Services
.
perms
.
add
(
uri
"
trackingprotection
-
pb
"
Services
.
perms
.
ALLOW_ACTION
)
;
registerCleanupFunction
(
_
=
>
{
Services
.
perms
.
removeAll
(
)
;
}
)
;
}
)
;
AntiTracking
.
runTest
(
"
Test
that
we
don
'
t
honour
a
private
allow
list
exception
in
a
normal
window
"
async
_
=
>
{
document
.
cookie
=
"
name
=
value
"
;
}
async
_
=
>
{
}
async
_
=
>
{
await
new
Promise
(
resolve
=
>
{
Services
.
clearData
.
deleteData
(
Ci
.
nsIClearDataService
.
CLEAR_ALL
value
=
>
resolve
(
)
)
;
}
)
;
}
null
false
false
Ci
.
nsIWebProgressListener
.
STATE_COOKIES_BLOCKED_TRACKER
false
)
;
