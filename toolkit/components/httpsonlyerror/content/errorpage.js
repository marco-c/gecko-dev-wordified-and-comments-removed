"
use
strict
"
;
const
searchParams
=
new
URLSearchParams
(
document
.
documentURI
.
split
(
"
?
"
)
[
1
]
)
;
function
initPage
(
)
{
if
(
!
searchParams
.
get
(
"
e
"
)
)
{
document
.
getElementById
(
"
error
"
)
.
remove
(
)
;
}
const
explanation1
=
document
.
getElementById
(
"
insecure
-
explanation
-
unavailable
"
)
;
document
.
l10n
.
setAttributes
(
explanation1
"
about
-
httpsonly
-
insecure
-
explanation
-
unavailable
"
{
websiteUrl
:
window
.
location
.
hostname
}
)
;
document
.
getElementById
(
"
openInsecure
"
)
.
addEventListener
(
"
click
"
onOpenInsecureButtonClick
)
;
addAutofocus
(
"
#
goBack
"
"
beforeend
"
)
;
if
(
window
.
top
=
=
window
)
{
document
.
getElementById
(
"
goBack
"
)
.
addEventListener
(
"
click
"
onReturnButtonClick
)
;
}
else
{
document
.
getElementById
(
"
goBack
"
)
.
remove
(
)
;
}
}
function
onOpenInsecureButtonClick
(
)
{
RPMSendAsyncMessage
(
"
openInsecure
"
)
;
}
function
onReturnButtonClick
(
)
{
RPMSendAsyncMessage
(
"
goBack
"
)
;
}
function
addAutofocus
(
selector
position
=
"
afterbegin
"
)
{
if
(
window
.
top
!
=
window
)
{
return
;
}
var
button
=
document
.
querySelector
(
selector
)
;
var
parent
=
button
.
parentNode
;
button
.
remove
(
)
;
button
.
setAttribute
(
"
autofocus
"
"
true
"
)
;
parent
.
insertAdjacentElement
(
position
button
)
;
}
initPage
(
)
;
