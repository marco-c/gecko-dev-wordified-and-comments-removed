"
use
strict
"
;
add_setup
(
async
(
)
=
>
{
let
browser
=
gBrowser
.
selectedBrowser
;
BrowserTestUtils
.
loadURIString
(
browser
"
https
:
/
/
example
.
com
"
)
;
await
BrowserTestUtils
.
browserLoaded
(
browser
)
;
}
)
;
add_task
(
async
function
test_SHOW_MIGRATION_WIZARD
(
)
{
let
wizardOpened
=
BrowserTestUtils
.
waitForMigrationWizard
(
window
)
;
await
SMATestUtils
.
executeAndValidateAction
(
{
type
:
"
SHOW_MIGRATION_WIZARD
"
}
)
;
let
wizard
=
await
wizardOpened
;
ok
(
wizard
"
Migration
wizard
opened
"
)
;
await
BrowserTestUtils
.
closeMigrationWizard
(
wizard
)
;
}
)
;
add_task
(
async
function
test_SHOW_MIGRATION_WIZARD_WITH_SOURCE
(
)
{
let
wizardOpened
=
BrowserTestUtils
.
waitForMigrationWizard
(
window
)
;
await
SMATestUtils
.
executeAndValidateAction
(
{
type
:
"
SHOW_MIGRATION_WIZARD
"
data
:
{
source
:
"
chrome
"
}
}
)
;
let
wizard
=
await
wizardOpened
;
ok
(
wizard
"
Migrator
window
opened
when
source
param
specified
"
)
;
await
BrowserTestUtils
.
closeMigrationWizard
(
wizard
)
;
}
)
;
