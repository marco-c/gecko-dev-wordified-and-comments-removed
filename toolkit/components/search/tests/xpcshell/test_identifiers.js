"
use
strict
"
;
const
SEARCH_APP_DIR
=
1
;
function
run_test
(
)
{
do_load_manifest
(
"
data
/
chrome
.
manifest
"
)
;
configureToLoadJarEngines
(
)
;
run_next_test
(
)
;
}
add_test
(
function
test_identifier
(
)
{
Services
.
search
.
init
(
async
function
initComplete
(
aResult
)
{
do_print
(
"
init
'
d
search
service
"
)
;
do_check_true
(
Components
.
isSuccessCode
(
aResult
)
)
;
await
installTestEngine
(
)
;
let
profileEngine
=
Services
.
search
.
getEngineByName
(
kTestEngineName
)
;
let
jarEngine
=
Services
.
search
.
getEngineByName
(
"
bug645970
"
)
;
do_check_true
(
profileEngine
instanceof
Ci
.
nsISearchEngine
)
;
do_check_true
(
jarEngine
instanceof
Ci
.
nsISearchEngine
)
;
do_check_eq
(
profileEngine
.
identifier
null
)
;
do_check_eq
(
jarEngine
.
identifier
"
bug645970
"
)
;
run_next_test
(
)
;
}
)
;
}
)
;
