function
run_test
(
)
{
do_check_true
(
Services
.
search
.
getVisibleEngines
(
)
.
length
>
1
)
;
do_check_true
(
Services
.
search
.
isInitialized
)
;
let
currentEngine
=
Services
.
search
.
currentEngine
;
Services
.
search
.
removeEngine
(
currentEngine
)
;
do_check_neq
(
Services
.
search
.
currentEngine
.
name
currentEngine
.
name
)
;
do_check_true
(
currentEngine
.
hidden
)
;
Services
.
search
.
getVisibleEngines
(
)
.
forEach
(
Services
.
search
.
removeEngine
)
;
do_check_eq
(
Services
.
search
.
getVisibleEngines
(
)
.
length
0
)
;
do_check_eq
(
Services
.
search
.
currentEngine
.
name
currentEngine
.
name
)
;
do_check_false
(
currentEngine
.
hidden
)
;
do_check_eq
(
Services
.
search
.
getVisibleEngines
(
)
.
length
1
)
;
}
