function
run_test
(
)
{
Assert
.
ok
(
Services
.
search
.
getVisibleEngines
(
)
.
length
>
1
)
;
Assert
.
ok
(
Services
.
search
.
isInitialized
)
;
let
currentEngine
=
Services
.
search
.
defaultEngine
;
Services
.
search
.
removeEngine
(
currentEngine
)
;
Assert
.
notEqual
(
Services
.
search
.
defaultEngine
.
name
currentEngine
.
name
)
;
Assert
.
ok
(
currentEngine
.
hidden
)
;
Services
.
search
.
getVisibleEngines
(
)
.
forEach
(
Services
.
search
.
removeEngine
)
;
Assert
.
equal
(
Services
.
search
.
getVisibleEngines
(
)
.
length
0
)
;
Assert
.
equal
(
Services
.
search
.
defaultEngine
.
name
currentEngine
.
name
)
;
Assert
.
ok
(
!
currentEngine
.
hidden
)
;
Assert
.
equal
(
Services
.
search
.
getVisibleEngines
(
)
.
length
1
)
;
}
