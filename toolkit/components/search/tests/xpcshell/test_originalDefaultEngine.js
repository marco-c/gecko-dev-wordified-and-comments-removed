"
use
strict
"
;
add_task
(
async
function
setup
(
)
{
Region
.
_setHomeRegion
(
"
an
"
false
)
;
await
AddonTestUtils
.
promiseStartupManager
(
)
;
await
SearchTestUtils
.
useTestEngines
(
"
test
-
extensions
"
)
;
}
)
;
add_task
(
async
function
test_originalDefaultEngine
(
)
{
await
Promise
.
all
(
[
Services
.
search
.
init
(
)
promiseAfterSettings
(
)
]
)
;
Assert
.
equal
(
Services
.
search
.
originalDefaultEngine
.
name
"
Multilocale
AN
"
"
Should
have
returned
the
correct
original
default
engine
"
)
;
}
)
;
add_task
(
async
function
test_changeRegion
(
)
{
await
promiseSetHomeRegion
(
"
tr
"
)
;
Assert
.
equal
(
Services
.
search
.
originalDefaultEngine
.
name
"
Special
"
"
Should
have
returned
the
correct
engine
for
the
new
locale
"
)
;
}
)
;
