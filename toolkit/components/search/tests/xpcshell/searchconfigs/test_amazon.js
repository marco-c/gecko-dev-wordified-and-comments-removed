"
use
strict
"
;
const
test
=
new
SearchConfigTest
(
{
identifier
:
"
amazon
"
default
:
{
}
available
:
{
included
:
[
{
regions
:
[
"
us
"
"
jp
"
]
}
]
}
details
:
[
{
domain
:
"
amazon
.
co
.
jp
"
telemetryId
:
"
amazon
-
jp
"
aliases
:
[
"
amazon
"
]
included
:
[
{
regions
:
[
"
jp
"
]
}
]
searchUrlCode
:
"
tag
=
mozillajapan
-
fx
-
22
"
noSuggestionsURL
:
true
}
{
domain
:
"
amazon
.
com
"
telemetryId
:
"
amazondotcom
-
us
"
aliases
:
[
"
amazon
"
]
included
:
[
{
regions
:
[
"
us
"
]
}
]
noSuggestionsURL
:
true
}
]
}
)
;
add_setup
(
async
function
(
)
{
await
test
.
setup
(
"
89
.
0
"
)
;
}
)
;
add_task
(
async
function
test_searchConfig_amazon
(
)
{
await
test
.
run
(
)
;
}
)
;
add_task
(
{
skip_if
:
(
)
=
>
SearchUtils
.
newSearchConfigEnabled
}
async
function
test_searchConfig_amazon_pre89
(
)
{
const
version
=
"
88
.
0
"
;
AddonTestUtils
.
createAppInfo
(
"
xpcshell
tests
.
mozilla
.
org
"
"
XPCShell
"
version
version
)
;
let
details
=
test
.
_config
.
details
.
find
(
d
=
>
d
.
telemetryId
=
=
"
amazondotcom
-
us
"
)
;
details
.
telemetryId
=
"
amazondotcom
"
;
await
test
.
run
(
)
;
}
)
;
