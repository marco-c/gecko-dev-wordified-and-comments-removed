const
{
XPCOMUtils
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
function
nsSidebar
(
)
{
}
nsSidebar
.
prototype
=
{
init
(
window
)
{
this
.
window
=
window
;
this
.
mm
=
window
.
docShell
.
messageManager
;
}
AddSearchProvider
(
engineURL
)
{
if
(
!
Services
.
prefs
.
getBoolPref
(
"
dom
.
sidebar
.
enabled
"
false
)
)
{
return
;
}
if
(
!
this
.
mm
)
{
Cu
.
reportError
(
Installing
a
search
provider
from
this
context
is
not
currently
supported
:
{
Error
(
)
.
stack
}
.
)
;
return
;
}
this
.
mm
.
sendAsyncMessage
(
"
Search
:
AddEngine
"
{
pageURL
:
this
.
window
.
document
.
documentURIObject
.
spec
engineURL
}
)
;
}
IsSearchProviderInstalled
(
)
{
}
classID
:
Components
.
ID
(
"
{
22117140
-
9c6e
-
11d3
-
aaf1
-
00805f8a4905
}
"
)
QueryInterface
:
ChromeUtils
.
generateQI
(
[
Ci
.
nsIDOMGlobalPropertyInitializer
]
)
}
;
this
.
NSGetFactory
=
XPCOMUtils
.
generateNSGetFactory
(
[
nsSidebar
]
)
;
