#
ifndef
mozilla_dom_SessionStoreChild_h
#
define
mozilla_dom_SessionStoreChild_h
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
mozilla
/
dom
/
PSessionStoreChild
.
h
"
#
include
"
mozilla
/
dom
/
SessionStoreChangeListener
.
h
"
#
include
"
mozilla
/
dom
/
SessionStoreListener
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
nsCycleCollectionParticipant
.
h
"
namespace
mozilla
:
:
dom
{
class
BrowsingContext
;
class
SessionStoreChangeListener
;
class
TabListener
;
class
SessionStoreChild
final
:
public
PSessionStoreChild
{
public
:
static
already_AddRefed
<
SessionStoreChild
>
GetOrCreate
(
BrowsingContext
*
aBrowsingContext
Element
*
aOwnerElement
=
nullptr
)
;
static
SessionStoreChild
*
From
(
WindowGlobalChild
*
aWindowChild
)
;
void
SetEpoch
(
uint32_t
aEpoch
)
;
void
SetOwnerContent
(
Element
*
aElement
)
;
void
Stop
(
)
;
void
UpdateEventTargets
(
)
;
void
UpdateSessionStore
(
)
;
void
FlushSessionStore
(
)
;
void
UpdateSHistoryChanges
(
)
;
SessionStoreChangeListener
*
GetSessionStoreChangeListener
(
)
const
{
return
mSessionStoreChangeListener
;
}
mozilla
:
:
ipc
:
:
IPCResult
RecvFlushTabState
(
FlushTabStateResolver
&
&
aResolver
)
;
NS_INLINE_DECL_CYCLE_COLLECTING_NATIVE_REFCOUNTING
(
SessionStoreChild
)
NS_DECL_CYCLE_COLLECTION_NATIVE_CLASS
(
SessionStoreChild
)
private
:
SessionStoreChild
(
TabListener
*
aSessionStoreListener
SessionStoreChangeListener
*
aSessionStoreChangeListener
)
;
~
SessionStoreChild
(
)
=
default
;
RefPtr
<
TabListener
>
mSessionStoreListener
;
RefPtr
<
SessionStoreChangeListener
>
mSessionStoreChangeListener
;
}
;
}
#
endif
