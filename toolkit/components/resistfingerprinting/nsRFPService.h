#
ifndef
__nsRFPService_h__
#
define
__nsRFPService_h__
#
include
"
mozilla
/
Atomics
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsString
.
h
"
#
define
SPOOFED_APPNAME
"
Netscape
"
#
define
SPOOFED_APPVERSION
"
5
.
0
(
Windows
)
"
#
define
SPOOFED_OSCPU
"
Windows
NT
6
.
1
"
#
define
SPOOFED_PLATFORM
"
Win64
"
#
define
LEGACY_BUILD_ID
"
20100101
"
namespace
mozilla
{
class
nsRFPService
final
:
public
nsIObserver
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_NSIOBSERVER
static
nsRFPService
*
GetOrCreate
(
)
;
static
bool
IsResistFingerprintingEnabled
(
)
{
return
sPrivacyResistFingerprinting
;
}
static
double
ReduceTimePrecisionAsMSecs
(
double
aTime
)
;
static
double
ReduceTimePrecisionAsUSecs
(
double
aTime
)
;
static
double
ReduceTimePrecisionAsSecs
(
double
aTime
)
;
static
uint32_t
CalculateTargetVideoResolution
(
uint32_t
aVideoQuality
)
;
static
uint32_t
GetSpoofedTotalFrames
(
double
aTime
)
;
static
uint32_t
GetSpoofedDroppedFrames
(
double
aTime
uint32_t
aWidth
uint32_t
aHeight
)
;
static
uint32_t
GetSpoofedPresentedFrames
(
double
aTime
uint32_t
aWidth
uint32_t
aHeight
)
;
private
:
nsresult
Init
(
)
;
nsRFPService
(
)
{
}
~
nsRFPService
(
)
{
}
void
UpdatePref
(
)
;
void
StartShutdown
(
)
;
static
Atomic
<
bool
ReleaseAcquire
>
sPrivacyResistFingerprinting
;
nsCString
mInitialTZValue
;
}
;
}
#
endif
