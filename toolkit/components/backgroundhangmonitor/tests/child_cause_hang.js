function
ensureProfilerInitialized
(
)
{
if
(
Services
.
profiler
.
IsActive
(
)
)
{
return
;
}
let
features
=
[
"
stackwalk
"
]
;
Services
.
profiler
.
StartProfiler
(
1000
10
features
)
;
Services
.
profiler
.
StopProfiler
(
)
;
}
add_task
(
async
function
childCauseHang
(
)
{
ensureProfilerInitialized
(
)
;
executeSoon
(
(
)
=
>
{
let
startTime
=
Date
.
now
(
)
;
while
(
Date
.
now
(
)
-
startTime
<
2000
)
{
}
}
)
;
await
do_await_remote_message
(
"
bhr_hangs_detected
"
)
;
}
)
;
