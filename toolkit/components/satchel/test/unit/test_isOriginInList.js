const
{
isOriginInList
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
gre
/
modules
/
FirefoxRelay
.
sys
.
mjs
"
)
;
function
makeList
(
arr
)
{
return
arr
.
map
(
domain
=
>
(
{
domain
}
)
)
;
}
const
TESTS
=
[
[
"
google
.
com
"
"
https
:
/
/
google
.
com
"
true
]
[
"
google
.
com
"
"
https
:
/
/
www
.
google
.
com
"
true
]
[
"
www
.
google
.
com
"
"
https
:
/
/
www
.
google
.
com
"
true
]
[
"
google
.
com
.
ar
"
"
https
:
/
/
accounts
.
google
.
com
.
ar
"
true
]
[
"
google
.
com
.
ar
"
"
https
:
/
/
google
.
com
"
false
]
[
"
google
.
com
"
"
https
:
/
/
google
.
com
.
ar
"
true
]
[
"
mozilla
.
org
"
"
https
:
/
/
vpn
.
mozilla
.
org
"
true
]
[
"
vpn
.
mozilla
.
org
"
"
https
:
/
/
vpn
.
mozilla
.
org
"
true
]
[
"
substack
.
com
"
"
https
:
/
/
hunterharris
.
substack
.
com
"
true
]
[
"
hunterharris
.
substack
.
com
"
"
https
:
/
/
hunterharris
.
substack
.
com
"
true
]
[
"
hunterharris
.
substack
.
com
"
"
https
:
/
/
other
.
substack
.
com
"
false
]
[
"
example
.
co
.
uk
"
"
https
:
/
/
foo
.
example
.
co
.
uk
"
true
]
[
"
localhost
"
"
http
:
/
/
localhost
"
true
]
[
"
google
.
com
.
ar
"
"
https
:
/
/
mail
.
google
.
com
.
br
"
false
]
]
;
add_task
(
async
function
test_isOriginInList
(
)
{
for
(
let
[
listEntry
origin
expected
]
of
TESTS
)
{
let
list
=
makeList
(
[
listEntry
]
)
;
let
result
=
isOriginInList
(
list
origin
)
;
Assert
.
equal
(
result
expected
isOriginInList
(
[
{
listEntry
}
]
{
origin
}
)
=
=
=
{
expected
}
)
;
}
}
)
;
