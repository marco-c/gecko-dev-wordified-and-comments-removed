#
include
"
gtest
/
gtest
.
h
"
#
include
"
safebrowsing
.
pb
.
h
"
TEST
(
UrlClassifierProtobuf
Empty
)
{
using
namespace
mozilla
:
:
safebrowsing
;
const
std
:
:
string
CLIENT_ID
=
"
firefox
"
;
FetchThreatListUpdatesRequest
r
;
r
.
set_allocated_client
(
new
ClientInfo
(
)
)
;
r
.
mutable_client
(
)
-
>
set_client_id
(
CLIENT_ID
)
;
std
:
:
string
s
;
r
.
SerializeToString
(
&
s
)
;
FetchThreatListUpdatesRequest
r2
;
r2
.
ParseFromString
(
s
)
;
ASSERT_EQ
(
r2
.
client
(
)
.
client_id
(
)
CLIENT_ID
)
;
}
