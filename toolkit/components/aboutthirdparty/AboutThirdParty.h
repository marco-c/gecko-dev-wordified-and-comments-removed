#
ifndef
__AboutThirdParty_h__
#
define
__AboutThirdParty_h__
#
include
"
mozilla
/
MozPromise
.
h
"
#
include
"
nsIAboutThirdParty
.
h
"
namespace
mozilla
{
using
BackgroundThreadPromise
=
MozPromise
<
bool
nsresult
false
>
;
class
AboutThirdParty
final
:
public
nsIAboutThirdParty
{
enum
class
WorkerState
:
uint32_t
{
Init
Running
Done
}
;
Atomic
<
WorkerState
SequentiallyConsistent
>
mWorkerState
;
RefPtr
<
BackgroundThreadPromise
:
:
Private
>
mPromise
;
~
AboutThirdParty
(
)
=
default
;
void
BackgroundThread
(
)
;
public
:
static
already_AddRefed
<
AboutThirdParty
>
GetSingleton
(
)
;
AboutThirdParty
(
)
;
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIABOUTTHIRDPARTY
RefPtr
<
BackgroundThreadPromise
>
CollectSystemInfoAsync
(
)
;
}
;
}
#
endif
