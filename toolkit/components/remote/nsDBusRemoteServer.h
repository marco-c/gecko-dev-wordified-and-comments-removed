#
ifndef
__nsDBusRemoteServer_h__
#
define
__nsDBusRemoteServer_h__
#
include
"
nsRemoteServer
.
h
"
#
include
"
nsUnixRemoteServer
.
h
"
#
include
"
mozilla
/
DBusHelpers
.
h
"
class
nsDBusRemoteServer
final
:
public
nsRemoteServer
public
nsUnixRemoteServer
{
public
:
nsDBusRemoteServer
(
)
:
mConnection
(
nullptr
)
mAppName
(
nullptr
)
{
}
~
nsDBusRemoteServer
(
)
override
{
Shutdown
(
)
;
}
nsresult
Startup
(
const
char
*
aAppName
const
char
*
aProfileName
)
override
;
void
Shutdown
(
)
override
;
DBusHandlerResult
HandleDBusMessage
(
DBusConnection
*
aConnection
DBusMessage
*
msg
)
;
void
UnregisterDBusInterface
(
DBusConnection
*
aConnection
)
;
private
:
DBusHandlerResult
OpenURL
(
DBusMessage
*
msg
)
;
DBusHandlerResult
Introspect
(
DBusMessage
*
msg
)
;
RefPtr
<
DBusConnection
>
mConnection
;
nsCString
mAppName
;
nsCString
mPathName
;
}
;
#
endif
