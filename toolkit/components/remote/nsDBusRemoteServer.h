#
ifndef
__nsDBusRemoteServer_h__
#
define
__nsDBusRemoteServer_h__
#
include
"
nsRemoteServer
.
h
"
#
include
"
nsUnixRemoteServer
.
h
"
#
include
"
mozilla
/
DBusHelpers
.
h
"
#
include
<
gio
/
gio
.
h
>
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
mozilla
/
GRefPtr
.
h
"
class
nsDBusRemoteServer
final
:
public
nsRemoteServer
public
nsUnixRemoteServer
{
public
:
~
nsDBusRemoteServer
(
)
override
{
Shutdown
(
)
;
}
nsresult
Startup
(
const
char
*
aAppName
const
char
*
aProfileName
)
override
;
void
Shutdown
(
)
override
;
void
OnBusAcquired
(
GDBusConnection
*
aConnection
)
;
void
OnNameAcquired
(
GDBusConnection
*
aConnection
)
;
void
OnNameLost
(
GDBusConnection
*
aConnection
)
;
bool
HandleOpenURL
(
const
gchar
*
aInterfaceName
const
gchar
*
aMethodName
const
nsACString
&
aParam
)
;
private
:
uint
mDBusID
=
0
;
uint
mRegistrationId
=
0
;
GDBusConnection
*
mConnection
=
nullptr
;
RefPtr
<
GDBusNodeInfo
>
mIntrospectionData
;
nsCString
mAppName
;
nsCString
mPathName
;
}
;
#
endif
