#
ifndef
__WinRemoteMessage_h__
#
define
__WinRemoteMessage_h__
#
include
<
windows
.
h
>
#
include
"
nsICommandLineRunner
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsString
.
h
"
enum
class
WinRemoteMessageVersion
:
uint32_t
{
CommandLineAndWorkingDirInUtf16
=
2
NullSeparatedArguments
=
3
}
;
class
WinRemoteMessageSender
final
{
COPYDATASTRUCT
mData
;
public
:
WinRemoteMessageSender
(
int32_t
aArgc
const
char
*
*
aArgv
const
nsAString
&
aWorkingDir
)
;
WinRemoteMessageSender
(
const
WinRemoteMessageSender
&
)
=
delete
;
WinRemoteMessageSender
(
WinRemoteMessageSender
&
&
)
=
delete
;
WinRemoteMessageSender
&
operator
=
(
const
WinRemoteMessageSender
&
)
=
delete
;
WinRemoteMessageSender
&
operator
=
(
WinRemoteMessageSender
&
&
)
=
delete
;
COPYDATASTRUCT
*
CopyData
(
)
;
private
:
nsCString
mCmdLineBuffer
;
}
;
class
WinRemoteMessageReceiver
final
{
nsCOMPtr
<
nsICommandLineRunner
>
mCommandLine
;
nsresult
ParseV2
(
const
nsAString
&
aBuffer
)
;
nsresult
ParseV3
(
const
nsACString
&
aBuffer
)
;
public
:
WinRemoteMessageReceiver
(
)
=
default
;
WinRemoteMessageReceiver
(
const
WinRemoteMessageReceiver
&
)
=
delete
;
WinRemoteMessageReceiver
(
WinRemoteMessageReceiver
&
&
)
=
delete
;
WinRemoteMessageReceiver
&
operator
=
(
const
WinRemoteMessageReceiver
&
)
=
delete
;
WinRemoteMessageReceiver
&
operator
=
(
WinRemoteMessageReceiver
&
&
)
=
delete
;
nsresult
Parse
(
const
COPYDATASTRUCT
*
aMessageData
)
;
nsICommandLineRunner
*
CommandLineRunner
(
)
;
}
;
#
endif
