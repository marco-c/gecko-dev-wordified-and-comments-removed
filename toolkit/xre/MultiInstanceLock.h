#
ifndef
MULTIINSTANCELOCK_H
#
define
MULTIINSTANCELOCK_H
#
ifdef
XP_WIN
#
include
<
windows
.
h
>
#
endif
namespace
mozilla
{
#
ifdef
XP_WIN
using
MultiInstLockHandle
=
HANDLE
;
#
define
MULTI_INSTANCE_LOCK_HANDLE_ERROR
INVALID_HANDLE_VALUE
#
else
using
MultiInstLockHandle
=
int
;
#
define
MULTI_INSTANCE_LOCK_HANDLE_ERROR
-
1
#
endif
MultiInstLockHandle
OpenMultiInstanceLock
(
const
char
*
nameToken
const
char16_t
*
installPath
)
;
void
ReleaseMultiInstanceLock
(
MultiInstLockHandle
lock
)
;
bool
IsOtherInstanceRunning
(
MultiInstLockHandle
lock
bool
*
aResult
)
;
already_AddRefed
<
nsIFile
>
GetNormalizedAppFile
(
nsIFile
*
aAppFile
)
;
}
;
#
endif
