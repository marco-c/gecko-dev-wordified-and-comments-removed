#
ifndef
mozilla_PolicyChecks_h
#
define
mozilla_PolicyChecks_h
#
if
defined
(
XP_WIN
)
#
include
<
windows
.
h
>
#
define
POLICY_REGKEY_NAME
L
"
SOFTWARE
\
\
Policies
\
\
Mozilla
\
\
"
MOZ_APP_BASENAME
namespace
mozilla
{
inline
bool
PolicyHasRegValue
(
HKEY
aKey
LPCWSTR
aName
DWORD
*
aValue
)
{
DWORD
len
=
sizeof
(
DWORD
)
;
LONG
ret
=
:
:
RegGetValueW
(
aKey
POLICY_REGKEY_NAME
aName
RRF_RT_DWORD
nullptr
aValue
&
len
)
;
return
ret
=
=
ERROR_SUCCESS
;
}
inline
bool
PolicyCheckBoolean
(
LPCWSTR
aPolicyName
)
{
DWORD
value
;
if
(
PolicyHasRegValue
(
HKEY_LOCAL_MACHINE
aPolicyName
&
value
)
)
{
return
value
=
=
1
;
}
if
(
PolicyHasRegValue
(
HKEY_CURRENT_USER
aPolicyName
&
value
)
)
{
return
value
=
=
1
;
}
return
false
;
}
}
#
endif
#
endif
