#
ifndef
nsUpdateSyncManager_h__
#
define
nsUpdateSyncManager_h__
#
include
"
mozilla
/
AlreadyAddRefed
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsIUpdateService
.
h
"
#
include
"
MultiInstanceLock
.
h
"
class
nsUpdateSyncManager
final
:
public
nsIUpdateSyncManager
public
nsIObserver
{
public
:
explicit
nsUpdateSyncManager
(
nsIFile
*
anAppFile
=
nullptr
)
;
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIUPDATESYNCMANAGER
NS_DECL_NSIOBSERVER
static
already_AddRefed
<
nsUpdateSyncManager
>
GetSingleton
(
)
;
private
:
~
nsUpdateSyncManager
(
)
;
nsUpdateSyncManager
(
nsUpdateSyncManager
&
)
=
delete
;
nsUpdateSyncManager
(
nsUpdateSyncManager
&
&
)
=
delete
;
nsUpdateSyncManager
&
operator
=
(
nsUpdateSyncManager
&
)
=
delete
;
nsUpdateSyncManager
&
operator
=
(
nsUpdateSyncManager
&
&
)
=
delete
;
nsresult
OpenLock
(
nsIFile
*
anAppFile
=
nullptr
)
;
void
ReleaseLock
(
)
;
mozilla
:
:
MultiInstLockHandle
mLock
=
MULTI_INSTANCE_LOCK_HANDLE_ERROR
;
}
;
#
endif
