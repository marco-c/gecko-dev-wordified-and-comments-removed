#
ifndef
mozilla_DllPrefetchExperimentRegistryInfo_h
#
define
mozilla_DllPrefetchExperimentRegistryInfo_h
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
mozilla
/
WinHeaderOnlyUtils
.
h
"
#
include
"
nsWindowsHelpers
.
h
"
namespace
mozilla
{
enum
class
AlteredDllPrefetchMode
{
CurrentPrefetch
NoPrefetch
OptimizedPrefetch
}
;
class
DllPrefetchExperimentRegistryInfo
final
{
public
:
DllPrefetchExperimentRegistryInfo
(
)
:
mBinPath
(
GetFullBinaryPath
(
)
.
get
(
)
)
{
}
~
DllPrefetchExperimentRegistryInfo
(
)
{
}
Result
<
Ok
nsresult
>
ReflectPrefToRegistry
(
int32_t
aVal
)
;
Result
<
Ok
nsresult
>
ReadRegistryValueData
(
DWORD
expectedType
)
;
AlteredDllPrefetchMode
GetAlteredDllPrefetchMode
(
)
;
private
:
Result
<
Ok
nsresult
>
Open
(
)
;
nsAutoRegKey
mRegKey
;
nsString
mBinPath
;
int32_t
mPrefetchMode
;
static
const
wchar_t
kExperimentSubKeyPath
[
]
;
}
;
}
#
endif
