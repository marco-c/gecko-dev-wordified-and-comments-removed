var
profileDir
=
do_get_profile
(
)
;
async
function
cleanUp
(
)
{
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
let
files
=
[
"
places
.
sqlite
"
"
cookies
.
sqlite
"
"
signons
.
sqlite
"
]
;
for
(
let
i
=
0
;
i
<
files
.
length
;
i
+
+
)
{
let
file
=
Services
.
dirsvc
.
get
(
"
ProfD
"
Ci
.
nsIFile
)
;
file
.
append
(
files
[
i
]
)
;
if
(
file
.
exists
(
)
)
{
file
.
remove
(
false
)
;
}
}
await
new
Promise
(
resolve
=
>
{
Services
.
clearData
.
deleteData
(
Ci
.
nsIClearDataService
.
CLEAR_PERMISSIONS
value
=
>
resolve
(
)
)
;
}
)
;
}
cleanUp
(
)
;
