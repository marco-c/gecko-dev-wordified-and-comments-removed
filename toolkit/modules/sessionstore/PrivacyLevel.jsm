"
use
strict
"
;
this
.
EXPORTED_SYMBOLS
=
[
"
PrivacyLevel
"
]
;
const
Cu
=
Components
.
utils
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
const
PREF
=
"
browser
.
sessionstore
.
privacy_level
"
;
const
PRIVACY_NONE
=
0
;
const
PRIVACY_ENCRYPTED
=
1
;
const
PRIVACY_FULL
=
2
;
var
PrivacyLevel
=
Object
.
freeze
(
{
check
(
url
)
{
return
PrivacyLevel
.
canSave
(
{
isHttps
:
url
.
startsWith
(
"
https
:
"
)
}
)
;
}
canSave
(
{
isHttps
}
)
{
let
level
=
Services
.
prefs
.
getIntPref
(
PREF
)
;
if
(
level
=
=
PRIVACY_FULL
)
{
return
false
;
}
if
(
isHttps
&
&
level
=
=
PRIVACY_ENCRYPTED
)
{
return
false
;
}
return
true
;
}
}
)
;
