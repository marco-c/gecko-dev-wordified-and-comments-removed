print
(
"
child
process
is
running
"
)
;
registerCustomDirProvider
(
)
;
resetSyncManagerLock
(
)
;
var
updateMutex
=
Cc
[
"
mozilla
.
org
/
updates
/
update
-
mutex
;
1
"
]
.
createInstance
(
Ci
.
nsIUpdateMutex
)
;
if
(
!
updateMutex
.
tryLock
(
)
)
{
quit
(
EXIT_CODE
.
FAILED_TO_ACQUIRE_UPDATE_MUTEX
)
;
}
print
(
"
child
process
should
now
have
the
update
mutex
;
will
exit
in
60
seconds
"
)
;
simulateNoScriptActivity
(
60
)
;
print
(
"
child
process
exiting
now
"
)
;
updateMutex
.
unlock
(
)
;
