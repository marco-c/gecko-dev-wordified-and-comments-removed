"
use
strict
"
;
add_task
(
async
function
telemetry_sp_partialBadSize_complete_staged_applied
(
)
{
let
updateParams
=
"
"
;
await
runTelemetryUpdateTest
(
updateParams
"
update
-
downloaded
"
)
;
writeStatusFile
(
STATE_FAILED_CRC_ERROR
)
;
testPostUpdateProcessing
(
)
;
checkTelemetryUpdatePhaseEmpty
(
true
)
;
await
waitForEvent
(
"
update
-
downloaded
"
)
;
writeStatusFile
(
STATE_SUCCEEDED
)
;
testPostUpdateProcessing
(
)
;
let
expected
=
getTelemetryUpdatePhaseValues
(
{
}
)
;
checkTelemetryUpdatePhases
(
expected
)
;
checkTelemetryUpdatePhaseEmpty
(
false
)
;
}
)
;
