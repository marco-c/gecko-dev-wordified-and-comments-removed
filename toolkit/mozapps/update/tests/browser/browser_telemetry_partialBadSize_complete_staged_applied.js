"
use
strict
"
;
add_task
(
async
function
telemetry_partialBadSize_complete_staged_applied
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
PREF_APP_UPDATE_STAGING_ENABLED
true
]
]
}
)
;
let
updateParams
=
"
&
invalidPartialSize
=
1
"
;
await
runTelemetryUpdateTest
(
updateParams
"
update
-
staged
"
)
;
writeStatusFile
(
STATE_SUCCEEDED
)
;
testPostUpdateProcessing
(
)
;
let
expected
=
getTelemetryUpdatePhaseValues
(
{
partialBadSize
:
true
}
)
;
checkTelemetryUpdatePhases
(
expected
)
;
checkTelemetryUpdatePhaseEmpty
(
false
)
;
}
)
;
