#
include
"
nsWindowsHelpers
.
h
"
BOOL
StartServiceUpdate
(
LPCWSTR
installDir
)
;
DWORD
LaunchServiceSoftwareUpdateCommand
(
int
argc
LPCWSTR
*
argv
)
;
BOOL
WriteStatusFailure
(
LPCWSTR
updateDirPath
int
errorCode
nsAutoHandle
&
userToken
)
;
DWORD
WaitForServiceStop
(
LPCWSTR
serviceName
DWORD
maxWaitSeconds
)
;
DWORD
WaitForProcessExit
(
LPCWSTR
filename
DWORD
maxSeconds
)
;
DWORD
IsProcessRunning
(
LPCWSTR
filename
)
;
BOOL
DoesFallbackKeyExist
(
)
;
BOOL
IsLocalFile
(
LPCWSTR
file
BOOL
&
isLocal
)
;
DWORD
StartServiceCommand
(
int
argc
LPCWSTR
*
argv
)
;
BOOL
IsUnpromptedElevation
(
BOOL
&
isUnpromptedElevation
)
;
#
define
SVC_NAME
L
"
MozillaMaintenance
"
#
define
BASE_SERVICE_REG_KEY
L
"
SOFTWARE
\
\
Mozilla
\
\
MaintenanceService
"
#
ifndef
EARLY_BETA_OR_EARLIER
#
define
DISABLE_USER_IMPERSONATION
#
endif
#
define
USER_TOKEN_VAR_NAME
"
MOZ_USER_TOKEN
"
#
define
TEST_ONLY_FALLBACK_KEY_PATH
\
BASE_SERVICE_REG_KEY
L
"
\
\
3932ecacee736d366d6436db0f55bce4
"
