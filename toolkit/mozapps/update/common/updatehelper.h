BOOL
StartServiceUpdate
(
LPCWSTR
installDir
)
;
DWORD
LaunchServiceSoftwareUpdateCommand
(
int
argc
LPCWSTR
*
argv
)
;
BOOL
WriteStatusFailure
(
LPCWSTR
updateDirPath
int
errorCode
)
;
DWORD
WaitForServiceStop
(
LPCWSTR
serviceName
DWORD
maxWaitSeconds
)
;
DWORD
WaitForProcessExit
(
LPCWSTR
filename
DWORD
maxSeconds
)
;
DWORD
IsProcessRunning
(
LPCWSTR
filename
)
;
BOOL
DoesFallbackKeyExist
(
)
;
BOOL
IsLocalFile
(
LPCWSTR
file
BOOL
&
isLocal
)
;
DWORD
StartServiceCommand
(
int
argc
LPCWSTR
*
argv
)
;
BOOL
IsUnpromptedElevation
(
BOOL
&
isUnpromptedElevation
)
;
BOOL
GetSecureOutputDirectoryPath
(
LPWSTR
outBuf
)
;
BOOL
GetSecureOutputFilePath
(
LPCWSTR
patchDirPath
LPCWSTR
fileExt
LPWSTR
outBuf
)
;
BOOL
WriteSecureIDFile
(
LPCWSTR
patchDirPath
)
;
void
RemoveSecureOutputFiles
(
LPCWSTR
patchDirPath
)
;
#
define
PATCH_DIR_PATH
L
"
\
\
updates
\
\
0
"
#
define
SVC_NAME
L
"
MozillaMaintenance
"
#
define
BASE_SERVICE_REG_KEY
L
"
SOFTWARE
\
\
Mozilla
\
\
MaintenanceService
"
#
define
TEST_ONLY_FALLBACK_KEY_PATH
\
BASE_SERVICE_REG_KEY
L
"
\
\
3932ecacee736d366d6436db0f55bce4
"
