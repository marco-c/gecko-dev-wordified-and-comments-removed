function
testKeys
(
win
searchBox
)
{
let
doc
=
win
.
document
;
doc
.
firstElementChild
.
focus
(
)
;
isnot
(
doc
.
activeElement
searchBox
"
Search
box
is
not
focused
"
)
;
EventUtils
.
synthesizeKey
(
"
f
"
{
accelKey
:
true
}
win
)
;
is
(
searchBox
.
ownerDocument
.
activeElement
searchBox
"
ctrl
-
f
focuses
search
box
"
)
;
searchBox
.
blur
(
)
;
doc
.
firstElementChild
.
focus
(
)
;
isnot
(
doc
.
activeElement
searchBox
"
Search
box
is
not
focused
"
)
;
EventUtils
.
synthesizeKey
(
"
/
"
{
}
win
)
;
is
(
searchBox
.
ownerDocument
.
activeElement
searchBox
"
/
focuses
search
box
"
)
;
searchBox
.
blur
(
)
;
}
const
testHtmlKeys
=
(
.
.
.
args
)
=
>
testKeys
(
.
.
.
args
)
;
const
testXulKeys
=
(
.
.
.
args
)
=
>
testKeys
(
.
.
.
args
)
;
add_task
(
async
function
testSearchBarKeyboardAccess
(
)
{
let
win
=
await
loadInitialView
(
"
extension
"
)
;
let
doc
=
win
.
document
;
let
searchBox
=
doc
.
getElementById
(
"
search
-
addons
"
)
;
testHtmlKeys
(
win
searchBox
)
;
testXulKeys
(
win
.
managerWindow
searchBox
)
;
await
closeView
(
win
)
;
}
)
;
