ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
AddonManager
.
jsm
"
)
;
const
ADDON_ID
=
"
test_delay_update_complete
tests
.
mozilla
.
org
"
;
const
INSTALL_COMPLETE_PREF
=
"
bootstraptest
.
install_complete_done
"
;
let
gUpgrade
;
function
install
(
data
reason
)
{
}
function
startup
(
data
reason
)
{
if
(
data
.
hasOwnProperty
(
"
instanceID
"
)
&
&
data
.
instanceID
)
{
AddonManager
.
addUpgradeListener
(
data
.
instanceID
(
upgrade
)
=
>
{
gUpgrade
=
upgrade
;
}
)
;
}
else
{
throw
Error
(
"
no
instanceID
passed
to
bootstrap
startup
"
)
;
}
AddonManager
.
addAddonListener
(
{
onFakeEvent
:
(
)
=
>
{
gUpgrade
.
install
(
)
;
}
}
)
;
}
function
shutdown
(
data
reason
)
{
}
function
uninstall
(
data
reason
)
{
}
