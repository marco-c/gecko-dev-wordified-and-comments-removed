const
{
updateAppInfo
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
testing
-
common
/
AppInfo
.
sys
.
mjs
"
)
;
function
run_test
(
)
{
updateAppInfo
(
)
;
Services
.
appinfo
.
processType
=
Ci
.
nsIXULRuntime
.
PROCESS_TYPE_CONTENT
;
try
{
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
AddonManager
.
jsm
"
)
;
do_throw
(
"
AddonManager
should
have
refused
to
load
"
)
;
}
catch
(
ex
)
{
info
(
ex
.
message
)
;
Assert
.
ok
(
!
!
ex
.
message
)
;
}
}
