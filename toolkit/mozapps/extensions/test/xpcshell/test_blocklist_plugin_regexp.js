var
PLUGINS
=
[
{
name
:
"
test_bug468528_1
"
version
:
"
5
"
disabled
:
false
blocklisted
:
false
}
{
name
:
"
test_bug468528_2
"
version
:
"
5
"
disabled
:
false
blocklisted
:
false
}
{
name
:
"
test_bug468528_3
"
version
:
"
5
"
disabled
:
false
blocklisted
:
false
}
{
name
:
"
test_bug468528_4
"
version
:
"
5
"
disabled
:
false
blocklisted
:
false
}
]
;
add_task
(
async
function
checkBlocklistForRegexes
(
)
{
createAppInfo
(
"
xpcshell
tests
.
mozilla
.
org
"
"
XPCShell
"
"
1
"
"
1
.
9
"
)
;
copyBlocklistToProfile
(
do_get_file
(
"
data
/
test_bug468528
.
xml
"
)
)
;
var
{
blocklist
}
=
Services
;
executeSoon
(
(
)
=
>
{
void
Blocklist
;
}
)
;
Assert
.
equal
(
await
blocklist
.
getPluginBlocklistState
(
PLUGINS
[
0
]
"
1
"
"
1
.
9
"
)
blocklist
.
STATE_BLOCKED
)
;
Assert
.
equal
(
await
blocklist
.
getPluginBlocklistState
(
PLUGINS
[
1
]
"
1
"
"
1
.
9
"
)
blocklist
.
STATE_NOT_BLOCKED
)
;
Assert
.
equal
(
await
blocklist
.
getPluginBlocklistState
(
PLUGINS
[
2
]
"
1
"
"
1
.
9
"
)
blocklist
.
STATE_BLOCKED
)
;
Assert
.
equal
(
await
blocklist
.
getPluginBlocklistState
(
PLUGINS
[
3
]
"
1
"
"
1
.
9
"
)
blocklist
.
STATE_NOT_BLOCKED
)
;
}
)
;
