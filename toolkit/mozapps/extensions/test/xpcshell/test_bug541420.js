function
run_test
(
)
{
do_test_pending
(
)
;
createAppInfo
(
"
xpcshell
tests
.
mozilla
.
org
"
"
XPCShell
"
"
1
"
"
1
"
)
;
startupManager
(
)
;
installAllFiles
(
[
do_get_file
(
"
data
/
test_bug541420
.
xpi
"
)
]
function
(
)
{
restartManager
(
)
;
AddonManager
.
getAddonByID
(
"
bug541420
tests
.
mozilla
.
org
"
function
(
addon
)
{
Assert
.
notEqual
(
addon
null
)
;
Assert
.
ok
(
addon
.
hasResource
(
"
binary
"
)
)
;
let
uri
=
addon
.
getResourceURI
(
"
binary
"
)
;
Assert
.
ok
(
uri
instanceof
AM_Ci
.
nsIFileURL
)
;
let
file
=
uri
.
file
;
Assert
.
ok
(
file
.
exists
(
)
)
;
Assert
.
ok
(
file
.
isReadable
(
)
)
;
Assert
.
ok
(
file
.
isWritable
(
)
)
;
if
(
!
(
"
nsIWindowsRegKey
"
in
Components
.
interfaces
)
)
Assert
.
ok
(
(
file
.
permissions
&
0o100
)
=
=
0o100
)
;
executeSoon
(
do_test_finished
)
;
}
)
;
}
)
;
}
