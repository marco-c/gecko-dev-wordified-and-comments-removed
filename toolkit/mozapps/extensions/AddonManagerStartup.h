#
ifndef
AddonManagerStartup_h
#
define
AddonManagerStartup_h
#
include
"
amIAddonManagerStartup
.
h
"
#
include
"
mozilla
/
Result
.
h
"
#
include
"
nsCOMArray
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIFile
.
h
"
#
include
"
nsIObserver
.
h
"
#
include
"
nsISupports
.
h
"
#
include
"
jsapi
.
h
"
namespace
mozilla
{
class
Addon
;
class
AddonManagerStartup
final
:
public
amIAddonManagerStartup
public
nsIObserver
{
public
:
NS_DECL_ISUPPORTS
NS_DECL_AMIADDONMANAGERSTARTUP
NS_DECL_NSIOBSERVER
AddonManagerStartup
(
)
;
static
AddonManagerStartup
&
GetSingleton
(
)
;
static
already_AddRefed
<
AddonManagerStartup
>
GetInstance
(
)
{
RefPtr
<
AddonManagerStartup
>
inst
=
&
GetSingleton
(
)
;
return
inst
.
forget
(
)
;
}
const
nsCOMArray
<
nsIFile
>
&
ExtensionPaths
(
)
{
return
mExtensionPaths
;
}
const
nsCOMArray
<
nsIFile
>
&
ThemePaths
(
)
{
return
mExtensionPaths
;
}
private
:
Result
<
Ok
nsresult
>
AddInstallLocation
(
Addon
&
addon
)
;
nsIFile
*
ProfileDir
(
)
;
nsCOMPtr
<
nsIFile
>
mProfileDir
;
nsCOMArray
<
nsIFile
>
mExtensionPaths
;
nsCOMArray
<
nsIFile
>
mThemePaths
;
bool
mInitialized
;
protected
:
virtual
~
AddonManagerStartup
(
)
=
default
;
}
;
}
#
define
NS_ADDONMANAGERSTARTUP_CONTRACTID
\
"
mozilla
.
org
/
addons
/
addon
-
manager
-
startup
;
1
"
#
define
NS_ADDON_MANAGER_STARTUP_CID
\
{
0x17a59a6b
0x92b8
0x42e5
\
{
0xbc
0xe0
0xab
0x43
0x4c
0x7a
0x71
0x35
}
}
#
endif
