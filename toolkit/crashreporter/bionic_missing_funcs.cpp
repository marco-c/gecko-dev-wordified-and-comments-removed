#
include
<
errno
.
h
>
#
include
<
sys
/
syscall
.
h
>
#
include
<
unistd
.
h
>
#
include
"
mozilla
/
Assertions
.
h
"
extern
"
C
"
{
#
if
defined
(
__ANDROID_API__
)
&
&
(
__ANDROID_API__
<
28
)
int
syncfs
(
int
fd
)
{
MOZ_CRASH
(
"
syncfs
(
)
is
not
available
"
)
;
return
EPERM
;
}
#
endif
#
if
defined
(
__ANDROID_API__
)
&
&
(
__ANDROID_API__
<
24
)
int
getgrgid_r
(
gid_t
gid
struct
group
*
grp
char
*
buf
size_t
buflen
struct
group
*
*
result
)
{
MOZ_CRASH
(
"
getgrgid_r
(
)
is
not
available
"
)
;
return
EPERM
;
}
int
getgrnam_r
(
const
char
*
name
struct
group
*
grp
char
*
buf
size_t
buflen
struct
group
*
*
result
)
{
MOZ_CRASH
(
"
getgrnam_r
(
)
is
not
available
"
)
;
return
EPERM
;
}
#
endif
#
if
defined
(
__ANDROID_API__
)
&
&
(
__ANDROID_API__
<
23
)
ssize_t
process_vm_readv
(
pid_t
pid
const
struct
iovec
*
local_iov
unsigned
long
int
liovcnt
const
struct
iovec
*
remote_iov
unsigned
long
int
riovcnt
unsigned
long
int
flags
)
{
return
syscall
(
__NR_process_vm_readv
pid
local_iov
liovcnt
remote_iov
riovcnt
flags
)
;
}
ssize_t
process_vm_writev
(
pid_t
pid
const
struct
iovec
*
local_iov
unsigned
long
int
liovcnt
const
struct
iovec
*
remote_iov
unsigned
long
int
riovcnt
unsigned
long
int
flags
)
{
return
syscall
(
__NR_process_vm_writev
pid
local_iov
liovcnt
remote_iov
riovcnt
flags
)
;
}
#
endif
}
