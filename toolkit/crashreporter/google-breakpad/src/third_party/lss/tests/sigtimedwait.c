#
include
"
test_skel
.
h
"
int
main
(
int
argc
char
*
argv
[
]
)
{
struct
kernel_sigset_t
sigset
=
{
}
;
siginfo_t
siginfo
=
{
}
;
struct
timespec
timeout
=
{
}
;
timeout
.
tv_sec
=
-
1
;
assert
(
sys_sigtimedwait
(
&
sigset
&
siginfo
&
timeout
)
=
=
-
1
)
;
assert
(
errno
=
=
EINVAL
)
;
timeout
.
tv_sec
=
0
;
assert
(
sys_sigtimedwait
(
&
sigset
&
siginfo
&
timeout
)
=
=
-
1
)
;
assert
(
errno
=
=
EAGAIN
)
;
const
int
kTestSignal
=
SIGCONT
;
assert
(
sys_sigemptyset
(
&
sigset
)
=
=
0
)
;
assert
(
sys_sigaddset
(
&
sigset
kTestSignal
)
=
=
0
)
;
assert
(
sys_sigprocmask
(
SIG_BLOCK
&
sigset
NULL
)
=
=
0
)
;
assert
(
raise
(
kTestSignal
)
=
=
0
)
;
assert
(
sys_sigtimedwait
(
&
sigset
&
siginfo
&
timeout
)
=
=
kTestSignal
)
;
assert
(
siginfo
.
si_signo
=
=
kTestSignal
)
;
return
0
;
}
