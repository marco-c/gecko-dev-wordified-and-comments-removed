#
!
[
allow
(
dead_code
)
]
macro_rules
!
mocked_static
{
(
(
#
[
m
:
meta
]
)
*
vis
:
vis
static
name
:
ident
:
T
:
ty
=
init
:
expr
;
(
item
:
item
)
*
)
=
>
{
(
#
[
m
]
)
*
vis
static
name
:
T
=
init
;
}
}
pub
(
crate
)
use
mocked_static
;
#
[
inline
(
always
)
]
pub
fn
hook
<
T
:
std
:
:
any
:
:
Any
+
Send
+
Sync
+
Clone
>
(
normally
:
T
_name
:
&
'
static
str
)
-
>
T
{
normally
}
#
[
inline
(
always
)
]
pub
fn
try_hook
<
T
:
std
:
:
any
:
:
Any
+
Send
+
Sync
+
Clone
>
(
fallback
:
T
_name
:
&
'
static
str
)
-
>
T
{
fallback
}
#
[
inline
(
always
)
]
pub
fn
unwrap
<
T
>
(
value
:
T
)
-
>
T
{
value
}
