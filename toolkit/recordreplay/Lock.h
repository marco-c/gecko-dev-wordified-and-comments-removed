#
ifndef
mozilla_recordreplay_Lock_h
#
define
mozilla_recordreplay_Lock_h
#
include
"
mozilla
/
PodOperations
.
h
"
#
include
"
mozilla
/
Types
.
h
"
#
include
"
File
.
h
"
namespace
mozilla
{
namespace
recordreplay
{
class
Lock
{
size_t
mId
;
Atomic
<
size_t
SequentiallyConsistent
Behavior
:
:
DontPreserve
>
mOwner
;
public
:
explicit
Lock
(
size_t
aId
)
:
mId
(
aId
)
mOwner
(
0
)
{
MOZ_ASSERT
(
aId
)
;
}
size_t
Id
(
)
{
return
mId
;
}
void
Enter
(
)
;
void
Exit
(
)
;
static
void
New
(
void
*
aNativeLock
)
;
static
void
Destroy
(
void
*
aNativeLock
)
;
static
Lock
*
Find
(
void
*
aNativeLock
)
;
static
void
InitializeLocks
(
)
;
static
void
LockAquiresUpdated
(
size_t
aLockId
)
;
}
;
}
}
#
endif
