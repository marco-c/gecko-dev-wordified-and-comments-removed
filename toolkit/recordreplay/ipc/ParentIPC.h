#
ifndef
mozilla_recordreplay_ParentIPC_h
#
define
mozilla_recordreplay_ParentIPC_h
#
include
"
base
/
shared_memory
.
h
"
#
include
"
mozilla
/
ipc
/
MessageChannel
.
h
"
#
include
"
mozilla
/
ipc
/
ProcessChild
.
h
"
#
include
"
mozilla
/
ipc
/
ProtocolUtils
.
h
"
#
include
"
mozilla
/
ipc
/
ScopedXREEmbed
.
h
"
#
include
"
mozilla
/
ipc
/
Shmem
.
h
"
namespace
mozilla
{
namespace
recordreplay
{
namespace
parent
{
void
InitializeUIProcess
(
int
aArgc
char
*
*
aArgv
)
;
const
char
*
SaveAllRecordingsDirectory
(
)
;
base
:
:
ProcessId
ParentProcessId
(
)
;
bool
IsMiddlemanWithRecordingChild
(
)
;
void
SaveRecording
(
const
ipc
:
:
FileDescriptor
&
aFile
)
;
ipc
:
:
MessageChannel
*
ChannelToUIProcess
(
)
;
void
InitializeMiddleman
(
int
aArgc
char
*
aArgv
[
]
base
:
:
ProcessId
aParentPid
const
base
:
:
SharedMemoryHandle
&
aPrefsHandle
const
ipc
:
:
FileDescriptor
&
aPrefMapHandle
)
;
void
OpenChannel
(
base
:
:
ProcessId
aMiddlemanPid
uint32_t
aChannelId
ipc
:
:
FileDescriptor
*
aConnection
)
;
void
GetArgumentsForChildProcess
(
base
:
:
ProcessId
aMiddlemanPid
uint32_t
aChannelId
const
char
*
aRecordingFile
bool
aRecording
std
:
:
vector
<
std
:
:
string
>
&
aExtraArgs
)
;
bool
DebuggerRunsInMiddleman
(
)
;
}
}
}
#
endif
