"
"
"
GDB
Python
customization
auto
-
loader
for
libxul
"
"
"
import
re
from
os
.
path
import
abspath
dirname
exists
libxul_dir
=
dirname
(
__file__
)
objdir
=
None
for
relpath
in
(
"
.
.
/
.
.
/
.
.
"
"
.
.
/
.
.
"
)
:
    
candidate
=
abspath
(
libxul_dir
+
"
/
"
+
relpath
)
    
if
not
exists
(
candidate
+
"
/
build
/
.
gdbinit
"
)
:
        
continue
    
objdir
=
candidate
    
m
=
re
.
search
(
r
"
[
\
w
]
+
:
(
.
*
)
"
gdb
.
execute
(
"
show
directories
"
False
True
)
)
    
if
m
and
(
objdir
not
in
m
.
group
(
1
)
.
split
(
"
:
"
)
)
:
        
gdb
.
execute
(
f
"
set
directories
{
objdir
}
:
{
m
.
group
(
1
)
}
"
)
if
objdir
is
not
None
:
    
gdb
.
execute
(
"
source
-
s
build
/
.
gdbinit
.
loader
"
)
else
:
    
gdb
.
write
(
"
Warning
:
Gecko
objdir
not
found
\
n
"
)
