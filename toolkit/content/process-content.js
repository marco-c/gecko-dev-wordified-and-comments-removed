"
use
strict
"
;
var
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
}
=
Components
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
RemotePageManager
.
jsm
"
)
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
Services
.
cpmm
.
addMessageListener
(
"
gmp
-
plugin
-
crash
"
msg
=
>
{
let
gmpservice
=
Cc
[
"
mozilla
.
org
/
gecko
-
media
-
plugin
-
service
;
1
"
]
.
getService
(
Ci
.
mozIGeckoMediaPluginService
)
;
gmpservice
.
RunPluginCrashCallbacks
(
msg
.
data
.
pluginID
msg
.
data
.
pluginName
)
;
}
)
;
Services
.
obs
.
addObserver
(
(
subject
topic
data
)
=
>
{
let
innerWindowID
=
subject
.
QueryInterface
(
Ci
.
nsISupportsPRUint64
)
.
data
;
Services
.
cpmm
.
sendAsyncMessage
(
"
Toolkit
:
inner
-
window
-
destroyed
"
innerWindowID
)
;
}
"
inner
-
window
-
destroyed
"
false
)
;
