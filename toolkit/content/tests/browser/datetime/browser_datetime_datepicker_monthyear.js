"
use
strict
"
;
add_task
(
async
function
test_monthyear_close_date
(
)
{
info
(
"
Ensure
the
month
-
year
panel
of
a
date
input
handles
Space
and
Enter
appropriately
.
"
)
;
const
inputValue
=
"
2022
-
11
-
11
"
;
await
helper
.
openPicker
(
data
:
text
/
html
<
input
type
=
"
date
"
value
=
{
inputValue
}
>
)
;
let
pickerDoc
=
helper
.
panel
.
querySelector
(
"
#
dateTimePopupFrame
"
)
.
contentDocument
;
await
EventUtils
.
synthesizeKey
(
"
KEY_Tab
"
{
repeat
:
2
}
)
;
await
testKeyOnSpinners
(
"
KEY_Enter
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
KEY_Enter
"
pickerDoc
2
)
;
await
testKeyOnSpinners
(
"
"
pickerDoc
2
)
;
await
helper
.
tearDown
(
)
;
}
)
;
add_task
(
async
function
test_monthyear_close_datetime
(
)
{
info
(
"
Ensure
the
month
-
year
panel
of
a
datetime
-
local
input
handles
Space
and
Enter
appropriately
.
"
)
;
const
inputValue
=
"
2022
-
11
-
11T11
:
11
"
;
await
helper
.
openPicker
(
data
:
text
/
html
<
input
type
=
"
datetime
-
local
"
value
=
{
inputValue
}
>
)
;
let
pickerDoc
=
helper
.
panel
.
querySelector
(
"
#
dateTimePopupFrame
"
)
.
contentDocument
;
await
EventUtils
.
synthesizeKey
(
"
KEY_Tab
"
{
repeat
:
2
}
)
;
await
testKeyOnSpinners
(
"
KEY_Enter
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
KEY_Enter
"
pickerDoc
2
)
;
await
testKeyOnSpinners
(
"
"
pickerDoc
2
)
;
await
helper
.
tearDown
(
)
;
}
)
;
add_task
(
async
function
test_monthyear_escape_date
(
)
{
info
(
"
Ensure
the
month
-
year
panel
of
a
date
input
can
be
closed
with
Esc
.
"
)
;
const
inputValue
=
"
2022
-
12
-
12
"
;
await
helper
.
openPicker
(
data
:
text
/
html
<
input
type
=
"
date
"
value
=
{
inputValue
}
>
)
;
let
pickerDoc
=
helper
.
panel
.
querySelector
(
"
#
dateTimePopupFrame
"
)
.
contentDocument
;
EventUtils
.
synthesizeKey
(
"
KEY_Tab
"
{
repeat
:
2
}
)
;
await
testKeyOnSpinners
(
"
KEY_Escape
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
KEY_Escape
"
pickerDoc
2
)
;
await
helper
.
tearDown
(
)
;
}
)
;
add_task
(
async
function
test_monthyear_escape_datetime
(
)
{
info
(
"
Ensure
the
month
-
year
panel
of
a
datetime
-
local
input
can
be
closed
with
Esc
.
"
)
;
const
inputValue
=
"
2022
-
12
-
12
"
;
await
helper
.
openPicker
(
data
:
text
/
html
<
input
type
=
"
date
"
value
=
{
inputValue
}
>
)
;
let
pickerDoc
=
helper
.
panel
.
querySelector
(
"
#
dateTimePopupFrame
"
)
.
contentDocument
;
EventUtils
.
synthesizeKey
(
"
KEY_Tab
"
{
repeat
:
2
}
)
;
await
testKeyOnSpinners
(
"
KEY_Escape
"
pickerDoc
)
;
await
testKeyOnSpinners
(
"
KEY_Escape
"
pickerDoc
2
)
;
await
helper
.
tearDown
(
)
;
}
)
;
