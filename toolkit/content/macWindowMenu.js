function
macWindowMenuDidShow
(
)
{
let
windows
=
Services
.
wm
.
getEnumerator
(
"
"
)
;
let
frag
=
document
.
createDocumentFragment
(
)
;
while
(
windows
.
hasMoreElements
(
)
)
{
let
win
=
windows
.
getNext
(
)
;
if
(
win
.
document
.
documentElement
.
getAttribute
(
"
inwindowmenu
"
)
=
=
"
false
"
)
{
continue
;
}
let
item
=
document
.
createElement
(
"
menuitem
"
)
;
item
.
setAttribute
(
"
label
"
win
.
document
.
title
)
;
if
(
win
=
=
window
)
{
item
.
setAttribute
(
"
checked
"
"
true
"
)
;
}
item
.
addEventListener
(
"
command
"
(
)
=
>
{
if
(
win
.
windowState
=
=
window
.
STATE_MINIMIZED
)
{
win
.
restore
(
)
;
}
win
.
document
.
commandDispatcher
.
focusedWindow
.
focus
(
)
;
}
)
;
frag
.
appendChild
(
item
)
;
}
document
.
getElementById
(
"
windowPopup
"
)
.
appendChild
(
frag
)
;
}
function
macWindowMenuDidHide
(
)
{
let
sep
=
document
.
getElementById
(
"
sep
-
window
-
list
"
)
;
while
(
sep
.
nextElementSibling
)
{
sep
.
nextElementSibling
.
remove
(
)
;
}
}
function
zoomWindow
(
)
{
if
(
window
.
windowState
=
=
window
.
STATE_NORMAL
)
window
.
maximize
(
)
;
else
window
.
restore
(
)
;
}
