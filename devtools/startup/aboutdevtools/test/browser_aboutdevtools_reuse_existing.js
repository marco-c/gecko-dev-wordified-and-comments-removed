"
use
strict
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
enabled
"
false
)
;
info
(
"
Add
an
about
:
blank
tab
"
)
;
const
tab
=
await
addTab
(
"
about
:
blank
"
)
;
synthesizeToggleToolboxKey
(
)
;
info
(
"
Wait
for
the
about
:
devtools
tab
to
be
selected
"
)
;
await
waitUntil
(
(
)
=
>
isAboutDevtoolsTab
(
gBrowser
.
selectedTab
)
)
;
const
aboutDevtoolsTab
=
gBrowser
.
selectedTab
;
info
(
"
Select
the
about
:
blank
tab
again
"
)
;
gBrowser
.
selectedTab
=
tab
;
synthesizeToggleToolboxKey
(
)
;
info
(
"
Wait
for
the
about
:
devtools
tab
to
be
selected
"
)
;
await
waitUntil
(
(
)
=
>
isAboutDevtoolsTab
(
gBrowser
.
selectedTab
)
)
;
const
aboutDevtoolsTabs
=
[
.
.
.
gBrowser
.
tabs
]
.
filter
(
isAboutDevtoolsTab
)
;
ok
(
aboutDevtoolsTabs
.
length
=
=
=
1
"
Only
one
tab
of
about
:
devtools
was
opened
.
"
)
;
ok
(
aboutDevtoolsTabs
[
0
]
=
=
=
aboutDevtoolsTab
"
The
existing
about
:
devtools
tab
was
reused
.
"
)
;
await
removeTab
(
aboutDevtoolsTab
)
;
await
removeTab
(
tab
)
;
}
)
;
