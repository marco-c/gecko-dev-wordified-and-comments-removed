"
use
strict
"
;
add_task
(
async
function
(
)
{
pushPref
(
"
devtools
.
enabled
"
false
)
;
const
{
tab
doc
win
}
=
await
openAboutDevTools
(
)
;
const
installPage
=
doc
.
getElementById
(
"
install
-
page
"
)
;
const
welcomePage
=
doc
.
getElementById
(
"
welcome
-
page
"
)
;
info
(
"
Check
that
about
:
devtools
is
in
the
correct
state
with
devtools
.
enabled
=
false
"
)
;
ok
(
!
installPage
.
hasAttribute
(
"
hidden
"
)
"
install
screen
is
visible
"
)
;
ok
(
welcomePage
.
hasAttribute
(
"
hidden
"
)
"
welcome
screen
is
hidden
"
)
;
info
(
"
Click
on
the
install
button
to
enable
DevTools
.
"
)
;
const
installButton
=
doc
.
getElementById
(
"
install
"
)
;
EventUtils
.
synthesizeMouseAtCenter
(
installButton
{
}
win
)
;
info
(
"
Wait
until
the
UI
updates
"
)
;
await
waitUntil
(
(
)
=
>
installPage
.
hasAttribute
(
"
hidden
"
)
=
=
=
true
)
;
ok
(
!
welcomePage
.
hasAttribute
(
"
hidden
"
)
"
welcome
screen
is
visible
"
)
;
ok
(
Services
.
prefs
.
getBoolPref
(
"
devtools
.
enabled
"
)
"
The
preference
devtools
.
enabled
has
been
flipped
to
true
.
"
)
;
Services
.
prefs
.
setBoolPref
(
"
devtools
.
enabled
"
false
)
;
await
removeTab
(
tab
)
;
}
)
;
