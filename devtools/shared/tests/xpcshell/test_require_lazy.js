"
use
strict
"
;
const
{
loader
}
=
ChromeUtils
.
importESModule
(
"
resource
:
/
/
devtools
/
shared
/
loader
/
Loader
.
sys
.
mjs
"
)
;
function
run_test
(
)
{
const
name
=
"
asyncUtils
"
;
const
path
=
"
devtools
/
shared
/
async
-
utils
"
;
const
o
=
{
}
;
loader
.
lazyRequireGetter
(
o
name
path
)
;
const
asyncUtils
=
require
(
path
)
;
Assert
.
strictEqual
(
o
.
asyncUtils
asyncUtils
)
;
const
o2
=
{
}
;
const
loader2
=
new
DevToolsLoader
(
)
;
loader2
.
require
(
"
resource
:
/
/
devtools
/
shared
/
DevToolsUtils
.
js
"
)
;
loader2
.
lazyRequireGetter
(
o2
name
path
)
;
Assert
.
notStrictEqual
(
o2
.
asyncUtils
asyncUtils
)
;
const
exposeLoader
=
loader2
.
require
(
"
xpcshell
-
test
/
exposeLoader
"
)
;
const
o3
=
exposeLoader
.
exerciseLazyRequire
(
name
path
)
;
Assert
.
strictEqual
(
o3
.
asyncUtils
o2
.
asyncUtils
)
;
}
