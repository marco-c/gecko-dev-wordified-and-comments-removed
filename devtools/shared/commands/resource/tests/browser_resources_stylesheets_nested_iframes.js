"
use
strict
"
;
const
TEST_URI
=
URL_ROOT_SSL
+
"
stylesheets
-
nested
-
iframes
.
html
"
;
add_task
(
async
function
(
)
{
const
tab
=
await
addTab
(
TEST_URI
)
;
const
{
client
resourceCommand
targetCommand
}
=
await
initResourceCommand
(
tab
)
;
info
(
"
Check
whether
ResourceCommand
gets
existing
stylesheet
"
)
;
const
availableResources
=
[
]
;
await
resourceCommand
.
watchResources
(
[
resourceCommand
.
TYPES
.
STYLESHEET
]
{
onAvailable
:
resources
=
>
availableResources
.
push
(
.
.
.
resources
)
}
)
;
await
waitFor
(
(
)
=
>
availableResources
.
length
>
=
10
)
;
is
(
availableResources
.
length
10
"
Got
the
expected
number
of
stylesheets
even
with
documentless
iframes
"
)
;
targetCommand
.
destroy
(
)
;
await
client
.
close
(
)
;
}
)
;
