"
use
strict
"
;
const
Services
=
require
(
"
Services
"
)
;
const
PSEUDOURI
=
"
indexeddb
:
/
/
fx
-
devtools
"
;
const
principaluri
=
Services
.
io
.
newURI
(
PSEUDOURI
)
;
const
principal
=
Services
.
scriptSecurityManager
.
createCodebasePrincipal
(
principaluri
{
}
)
;
exports
.
createDevToolsIndexedDB
=
function
(
indexedDB
)
{
return
Object
.
freeze
(
{
open
(
name
version
)
{
let
options
=
{
storage
:
"
persistent
"
}
;
if
(
typeof
version
=
=
=
"
number
"
)
{
options
.
version
=
version
;
}
return
indexedDB
.
openForPrincipal
(
principal
name
options
)
;
}
deleteDatabase
(
name
)
{
return
indexedDB
.
deleteForPrincipal
(
principal
name
{
storage
:
"
persistent
"
}
)
;
}
cmp
:
indexedDB
.
cmp
.
bind
(
indexedDB
)
}
)
;
}
;
