"
use
strict
"
;
const
DevToolsUtils
=
require
(
"
devtools
/
toolkit
/
DevToolsUtils
"
)
;
const
{
DevToolsWorker
}
=
require
(
"
devtools
/
toolkit
/
shared
/
worker
.
js
"
)
;
const
WORKER_URL
=
"
resource
:
/
/
gre
/
modules
/
devtools
/
heapsnapshot
/
HeapAnalysesWorker
.
js
"
;
var
workerCounter
=
0
;
const
HeapAnalysesClient
=
module
.
exports
=
function
(
)
{
this
.
_worker
=
new
DevToolsWorker
(
WORKER_URL
{
name
:
HeapAnalyses
-
{
workerCounter
+
+
}
verbose
:
DevToolsUtils
.
dumpn
.
wantLogging
}
)
;
}
;
HeapAnalysesClient
.
prototype
.
destroy
=
function
(
)
{
this
.
_worker
.
destroy
(
)
;
}
;
HeapAnalysesClient
.
prototype
.
readHeapSnapshot
=
function
(
snapshotFilePath
)
{
return
this
.
_worker
.
performTask
(
"
readHeapSnapshot
"
{
snapshotFilePath
}
)
;
}
;
HeapAnalysesClient
.
prototype
.
takeCensus
=
function
(
snapshotFilePath
censusOptions
)
{
return
this
.
_worker
.
performTask
(
"
takeCensus
"
{
snapshotFilePath
censusOptions
}
)
;
}
;
