"
use
strict
"
;
add_task
(
async
function
(
)
{
const
browser
=
document
.
createXULElement
(
"
browser
"
)
;
browser
.
setAttribute
(
"
type
"
"
content
"
)
;
document
.
body
.
appendChild
(
browser
)
;
await
BrowserTestUtils
.
browserLoaded
(
browser
)
;
info
(
"
Save
heap
snapshot
"
)
;
const
result
=
await
SpecialPowers
.
spawn
(
browser
[
]
(
)
=
>
{
try
{
ChromeUtils
.
saveHeapSnapshot
(
{
runtime
:
true
}
)
;
}
catch
(
err
)
{
return
err
.
toString
(
)
;
}
return
"
"
;
}
)
;
is
(
result
"
"
"
result
of
saveHeapSnapshot
"
)
;
browser
.
remove
(
)
;
}
)
;
