"
use
strict
"
;
function
waitForThirtyMilliseconds
(
)
{
const
start
=
Date
.
now
(
)
;
while
(
Date
.
now
(
)
-
start
<
30
)
{
}
}
function
run_test
(
)
{
const
start
=
Date
.
now
(
)
*
1000
;
do_print
(
"
start
=
"
+
start
)
;
waitForThirtyMilliseconds
(
)
;
const
path
=
ChromeUtils
.
saveHeapSnapshot
(
{
runtime
:
true
}
)
;
waitForThirtyMilliseconds
(
)
;
const
end
=
Date
.
now
(
)
*
1000
;
do_print
(
"
end
=
"
+
end
)
;
const
snapshot
=
ChromeUtils
.
readHeapSnapshot
(
path
)
;
do_print
(
"
snapshot
.
creationTime
=
"
+
snapshot
.
creationTime
)
;
ok
(
snapshot
.
creationTime
>
=
start
)
;
ok
(
snapshot
.
creationTime
<
=
end
)
;
}
