"
use
strict
"
;
const
Services
=
require
(
"
Services
"
)
;
const
{
XPCOMUtils
}
=
require
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyServiceGetter
(
this
"
swm
"
"
mozilla
.
org
/
serviceworkers
/
manager
;
1
"
"
nsIServiceWorkerManager
"
)
;
function
canDebugServiceWorkers
(
)
{
const
isE10s
=
Services
.
appinfo
.
browserTabsRemoteAutostart
;
const
processCount
=
Services
.
appinfo
.
maxWebProcessCount
;
const
multiE10s
=
isE10s
&
&
processCount
>
1
;
const
isNewSWImplementation
=
swm
.
isParentInterceptEnabled
(
)
;
return
isNewSWImplementation
|
|
!
multiE10s
;
}
function
isParentInterceptEnabled
(
)
{
return
swm
.
isParentInterceptEnabled
(
)
;
}
module
.
exports
=
{
canDebugServiceWorkers
isParentInterceptEnabled
}
;
