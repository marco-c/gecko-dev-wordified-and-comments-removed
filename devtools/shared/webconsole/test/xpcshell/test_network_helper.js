"
use
strict
"
;
Object
.
defineProperty
(
this
"
NetworkHelper
"
{
get
(
)
{
return
require
(
"
devtools
/
shared
/
webconsole
/
network
-
helper
"
)
;
}
configurable
:
true
writeable
:
false
enumerable
:
true
}
)
;
function
run_test
(
)
{
test_isTextMimeType
(
)
;
test_parseCookieHeader
(
)
;
}
function
test_isTextMimeType
(
)
{
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
text
/
plain
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
javascript
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
json
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
text
/
css
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
text
/
html
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
image
/
svg
+
xml
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
xml
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
tent
.
posts
-
feed
.
v0
+
json
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
tent
.
posts
-
feed
.
v0
-
json
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
tent
.
posts
-
feed
.
v0
+
xml
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
tent
.
posts
-
feed
.
v0
-
xml
"
)
false
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
BIG
-
CORP
+
json
"
)
true
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
image
/
png
"
)
false
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
foo
-
+
json
"
)
false
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
-
foo
+
json
"
)
false
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
foo
-
-
bar
+
json
"
)
false
)
;
Assert
.
equal
(
NetworkHelper
.
isTextMimeType
(
"
application
/
vnd
.
google
.
safebrowsing
-
chunk
"
)
false
)
;
}
function
test_parseCookieHeader
(
)
{
let
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
Strict
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
Strict
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
strict
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
Strict
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
STRICT
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
Strict
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
None
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
None
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
NONE
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
None
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
lax
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
Lax
"
}
]
)
;
result
=
NetworkHelper
.
parseSetCookieHeader
(
"
Test
=
1
;
SameSite
=
Lax
"
)
;
Assert
.
deepEqual
(
result
[
{
name
:
"
Test
"
value
:
"
1
"
samesite
:
"
Lax
"
}
]
)
;
}
