"
use
strict
"
;
function
requireLazy
(
callback
)
{
let
cache
;
return
(
)
=
>
{
if
(
cache
=
=
=
undefined
)
{
cache
=
callback
(
)
;
}
return
cache
;
}
;
}
const
lazyServices
=
requireLazy
(
(
)
=
>
require
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
)
;
function
getActiveBrowsingContextID
(
)
{
const
{
Services
}
=
lazyServices
(
)
;
const
win
=
Services
.
wm
.
getMostRecentWindow
(
"
navigator
:
browser
"
)
;
if
(
win
&
&
win
.
gBrowser
&
&
win
.
gBrowser
.
selectedBrowser
&
&
win
.
gBrowser
.
selectedBrowser
.
browsingContext
&
&
win
.
gBrowser
.
selectedBrowser
.
browsingContext
.
id
)
{
return
win
.
gBrowser
.
selectedBrowser
.
browsingContext
.
id
;
}
console
.
error
(
"
Failed
to
get
the
active
BrowsingContext
ID
while
starting
the
profiler
.
"
)
;
return
0
;
}
module
.
exports
=
{
getActiveBrowsingContextID
}
;
