"
use
strict
"
;
function
requireLazy
(
callback
)
{
let
cache
;
return
(
)
=
>
{
if
(
cache
=
=
=
undefined
)
{
cache
=
callback
(
)
;
}
return
cache
;
}
;
}
const
lazyServices
=
requireLazy
(
(
)
=
>
require
(
"
Services
"
)
)
;
function
getActiveBrowserID
(
)
{
const
Services
=
lazyServices
(
)
;
const
win
=
Services
.
wm
.
getMostRecentWindow
(
"
navigator
:
browser
"
)
;
if
(
win
?
.
gBrowser
?
.
selectedBrowser
?
.
browsingContext
?
.
browserId
)
{
return
win
.
gBrowser
.
selectedBrowser
.
browsingContext
.
browserId
;
}
console
.
error
(
"
Failed
to
get
the
active
browserId
while
starting
the
profiler
.
"
)
;
return
0
;
}
module
.
exports
=
{
getActiveBrowserID
}
;
