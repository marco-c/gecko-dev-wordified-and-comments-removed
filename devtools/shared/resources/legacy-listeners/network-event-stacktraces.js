"
use
strict
"
;
const
{
ResourceWatcher
}
=
require
(
"
devtools
/
shared
/
resources
/
resource
-
watcher
"
)
;
module
.
exports
=
async
function
(
{
targetList
targetFront
isFissionEnabledOnContentToolbox
onAvailable
}
)
{
function
onNetworkEventStackTrace
(
packet
)
{
const
actor
=
packet
.
eventActor
;
onAvailable
(
[
{
resourceType
:
ResourceWatcher
.
TYPES
.
NETWORK_EVENT_STACKTRACE
channelId
:
actor
.
channelId
stacktrace
:
actor
.
cause
.
stacktraceAvailable
lastFrame
:
actor
.
cause
.
lastFrame
}
]
)
;
}
const
webConsoleFront
=
await
targetFront
.
getFront
(
"
console
"
)
;
webConsoleFront
.
on
(
"
serverNetworkStackTrace
"
onNetworkEventStackTrace
)
;
}
;
