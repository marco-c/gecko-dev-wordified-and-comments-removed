"
use
strict
"
;
var
EXPORTED_SYMBOLS
=
[
"
track
"
"
getAllNodeIds
"
"
clear
"
]
;
const
objects
=
[
]
;
function
track
(
obj
)
{
objects
.
push
(
Cu
.
getWeakReference
(
obj
)
)
;
}
function
getAllNodeIds
(
)
{
return
(
objects
.
map
(
weak
=
>
weak
.
get
(
)
)
.
filter
(
obj
=
>
!
!
obj
)
.
map
(
ChromeUtils
.
getObjectNodeId
)
)
;
}
function
clear
(
)
{
objects
.
length
=
0
;
}
