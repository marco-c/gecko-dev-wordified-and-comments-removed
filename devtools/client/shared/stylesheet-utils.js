"
use
strict
"
;
function
appendStyleSheet
(
xulDocument
url
)
{
const
styleSheetAttr
=
href
=
"
{
url
}
"
type
=
"
text
/
css
"
;
const
styleSheet
=
xulDocument
.
createProcessingInstruction
(
"
xml
-
stylesheet
"
styleSheetAttr
)
;
const
loadPromise
=
new
Promise
(
(
resolve
reject
)
=
>
{
function
onload
(
)
{
styleSheet
.
removeEventListener
(
"
load
"
onload
)
;
styleSheet
.
removeEventListener
(
"
error
"
onerror
)
;
resolve
(
)
;
}
function
onerror
(
)
{
styleSheet
.
removeEventListener
(
"
load
"
onload
)
;
styleSheet
.
removeEventListener
(
"
error
"
onerror
)
;
reject
(
"
Failed
to
load
theme
file
"
+
url
)
;
}
styleSheet
.
addEventListener
(
"
load
"
onload
)
;
styleSheet
.
addEventListener
(
"
error
"
onerror
)
;
}
)
;
xulDocument
.
insertBefore
(
styleSheet
xulDocument
.
documentElement
)
;
return
{
styleSheet
loadPromise
}
;
}
exports
.
appendStyleSheet
=
appendStyleSheet
;
