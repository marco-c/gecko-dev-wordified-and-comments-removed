"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
shared
/
test
/
helper_workers
.
js
"
this
)
;
(
"
use
strict
"
)
;
const
{
PromiseTestUtils
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
testing
-
common
/
PromiseTestUtils
.
jsm
"
)
;
PromiseTestUtils
.
whitelistRejectionsGlobally
(
/
connection
just
closed
/
)
;
const
TAB_URL
=
EXAMPLE_URL
+
"
doc_WorkerTargetActor
.
attachThread
-
tab
.
html
"
;
const
WORKER_URL
=
"
code_WorkerTargetActor
.
attachThread
-
worker
.
js
"
;
add_task
(
async
function
testPausedByConsole
(
)
{
const
{
client
tab
workerTargetFront
toolbox
}
=
await
initWorkerDebugger
(
TAB_URL
WORKER_URL
)
;
info
(
"
Check
Date
objects
can
be
used
in
the
console
"
)
;
const
jsterm
=
await
getSplitConsole
(
toolbox
)
;
let
executed
=
await
jsterm
.
execute
(
"
new
Date
(
2013
3
1
)
"
)
;
ok
(
executed
.
textContent
.
includes
(
"
Mon
Apr
01
2013
00
:
00
:
00
"
)
"
Date
object
has
expected
text
content
"
)
;
info
(
"
Check
RegExp
objects
can
be
used
in
the
console
"
)
;
executed
=
await
jsterm
.
execute
(
"
new
RegExp
(
'
.
*
'
)
"
)
;
ok
(
executed
.
textContent
.
includes
(
"
/
.
*
/
"
)
"
Text
for
message
appeared
correct
"
)
;
terminateWorkerInTab
(
tab
WORKER_URL
)
;
await
waitForWorkerClose
(
workerTargetFront
)
;
await
toolbox
.
destroy
(
)
;
await
close
(
client
)
;
await
removeTab
(
tab
)
;
}
)
;
