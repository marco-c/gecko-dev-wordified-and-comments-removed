"
use
strict
"
;
const
TEST_URI
=
TEST_URI_ROOT
+
"
dummy
.
html
"
;
const
{
openWebLink
openTrustedLink
}
=
require
(
"
devtools
/
client
/
shared
/
link
"
)
;
add_task
(
async
function
(
)
{
info
(
"
Open
web
link
to
example
.
com
test
page
"
)
;
openWebLink
(
TEST_URI
)
;
await
BrowserTestUtils
.
browserLoaded
(
gBrowser
.
selectedBrowser
)
;
is
(
gBrowser
.
selectedBrowser
.
currentURI
.
spec
TEST_URI
"
openWebLink
opened
a
tab
with
the
expected
url
"
)
;
info
(
"
Open
trusted
link
to
about
:
debugging
"
)
;
openTrustedLink
(
"
about
:
debugging
"
)
;
await
BrowserTestUtils
.
browserLoaded
(
gBrowser
.
selectedBrowser
)
;
is
(
gBrowser
.
selectedBrowser
.
currentURI
.
spec
"
about
:
debugging
"
"
openTrustedLink
opened
a
tab
with
the
expected
url
"
)
;
await
removeTab
(
gBrowser
.
selectedTab
)
;
await
removeTab
(
gBrowser
.
selectedTab
)
;
}
)
;
