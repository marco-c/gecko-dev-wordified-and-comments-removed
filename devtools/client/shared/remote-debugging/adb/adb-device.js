"
use
strict
"
;
const
{
shell
}
=
require
(
"
resource
:
/
/
devtools
/
client
/
shared
/
remote
-
debugging
/
adb
/
commands
/
index
.
js
"
)
;
class
AdbDevice
{
constructor
(
id
)
{
this
.
id
=
id
;
}
async
initialize
(
)
{
const
model
=
await
shell
(
this
.
id
"
getprop
ro
.
product
.
model
"
)
;
this
.
model
=
model
.
trim
(
)
;
}
get
name
(
)
{
return
this
.
model
|
|
this
.
id
;
}
async
getRuntimeSocketPaths
(
)
{
const
query
=
"
cat
/
proc
/
net
/
unix
"
;
const
rawSocketInfo
=
await
shell
(
this
.
id
query
)
;
let
socketInfos
=
rawSocketInfo
.
split
(
/
\
r
?
\
n
/
)
;
socketInfos
=
socketInfos
.
filter
(
l
=
>
l
.
includes
(
"
firefox
-
debugger
-
socket
"
)
)
;
const
socketPaths
=
new
Set
(
)
;
for
(
const
socketInfo
of
socketInfos
)
{
const
socketPath
=
socketInfo
.
split
(
"
"
)
.
pop
(
)
;
socketPaths
.
add
(
socketPath
)
;
}
return
socketPaths
;
}
}
module
.
exports
=
AdbDevice
;
