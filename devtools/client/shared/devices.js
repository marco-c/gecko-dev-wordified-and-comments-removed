"
use
strict
"
;
const
{
getJSON
}
=
require
(
"
devtools
/
client
/
shared
/
getjson
"
)
;
const
Services
=
require
(
"
Services
"
)
;
const
promise
=
require
(
"
promise
"
)
;
const
DEVICES_URL
=
"
devtools
.
devices
.
url
"
;
const
Strings
=
Services
.
strings
.
createBundle
(
"
chrome
:
/
/
devtools
/
locale
/
device
.
properties
"
)
;
var
localDevices
=
{
}
;
function
AddDevice
(
device
type
=
"
phones
"
)
{
let
list
=
localDevices
[
type
]
;
if
(
!
list
)
{
list
=
localDevices
[
type
]
=
[
]
;
}
list
.
push
(
device
)
;
}
exports
.
AddDevice
=
AddDevice
;
function
GetDevices
(
)
{
let
deferred
=
promise
.
defer
(
)
;
getJSON
(
DEVICES_URL
)
.
then
(
devices
=
>
{
for
(
let
type
in
localDevices
)
{
if
(
!
devices
[
type
]
)
{
devices
.
TYPES
.
push
(
type
)
;
devices
[
type
]
=
[
]
;
}
devices
[
type
]
=
localDevices
[
type
]
.
concat
(
devices
[
type
]
)
;
}
deferred
.
resolve
(
devices
)
;
}
)
;
return
deferred
.
promise
;
}
exports
.
GetDevices
=
GetDevices
;
function
GetDeviceString
(
deviceType
)
{
return
Strings
.
GetStringFromName
(
"
device
.
"
+
deviceType
)
;
}
exports
.
GetDeviceString
=
GetDeviceString
;
