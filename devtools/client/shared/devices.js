"
use
strict
"
;
const
{
getJSON
}
=
require
(
"
devtools
/
client
/
shared
/
getjson
"
)
;
const
DEVICES_URL
=
"
devtools
.
devices
.
url
"
;
const
{
LocalizationHelper
}
=
require
(
"
devtools
/
shared
/
l10n
"
)
;
const
L10N
=
new
LocalizationHelper
(
"
devtools
/
locale
/
device
.
properties
"
)
;
let
localDevices
=
{
}
;
function
addDevice
(
device
type
=
"
phones
"
)
{
let
list
=
localDevices
[
type
]
;
if
(
!
list
)
{
list
=
localDevices
[
type
]
=
[
]
;
}
list
.
push
(
device
)
;
}
exports
.
addDevice
=
addDevice
;
function
removeDevice
(
device
type
=
"
phones
"
)
{
let
list
=
localDevices
[
type
]
;
if
(
!
list
)
{
return
false
;
}
let
index
=
list
.
findIndex
(
item
=
>
device
)
;
if
(
index
=
=
=
-
1
)
{
return
false
;
}
list
.
splice
(
index
1
)
;
return
true
;
}
exports
.
removeDevice
=
removeDevice
;
function
getDevices
(
)
{
return
getJSON
(
DEVICES_URL
)
.
then
(
devices
=
>
{
for
(
let
type
in
localDevices
)
{
if
(
!
devices
[
type
]
)
{
devices
.
TYPES
.
push
(
type
)
;
devices
[
type
]
=
[
]
;
}
devices
[
type
]
=
localDevices
[
type
]
.
concat
(
devices
[
type
]
)
;
}
return
devices
;
}
)
;
}
exports
.
getDevices
=
getDevices
;
function
getDeviceString
(
deviceType
)
{
return
L10N
.
getStr
(
"
device
.
"
+
deviceType
)
;
}
exports
.
getDeviceString
=
getDeviceString
;
