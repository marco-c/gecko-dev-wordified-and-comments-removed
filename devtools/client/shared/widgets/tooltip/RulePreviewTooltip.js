"
use
strict
"
;
const
{
LocalizationHelper
}
=
require
(
"
devtools
/
shared
/
l10n
"
)
;
const
{
HTMLTooltip
}
=
require
(
"
devtools
/
client
/
shared
/
widgets
/
tooltip
/
HTMLTooltip
"
)
;
const
XHTML_NS
=
"
http
:
/
/
www
.
w3
.
org
/
1999
/
xhtml
"
;
const
L10N
=
new
LocalizationHelper
(
"
devtools
/
client
/
locales
/
inspector
.
properties
"
)
;
class
RulePreviewTooltip
{
constructor
(
doc
)
{
this
.
show
=
this
.
show
.
bind
(
this
)
;
this
.
destroy
=
this
.
destroy
.
bind
(
this
)
;
this
.
_tooltip
=
new
HTMLTooltip
(
doc
{
type
:
"
arrow
"
consumeOutsideClicks
:
true
useXulWrapper
:
true
}
)
;
this
.
container
=
doc
.
createElementNS
(
XHTML_NS
"
div
"
)
;
this
.
container
.
className
=
"
rule
-
preview
-
tooltip
-
container
"
;
this
.
message
=
doc
.
createElementNS
(
XHTML_NS
"
span
"
)
;
this
.
message
.
className
=
"
rule
-
preview
-
tooltip
-
message
"
;
this
.
footer
=
doc
.
createElementNS
(
XHTML_NS
"
span
"
)
;
this
.
footer
.
className
=
"
rule
-
preview
-
tooltip
-
source
-
rule
-
footer
"
;
this
.
footer
.
textContent
=
L10N
.
getStr
(
"
rulePreviewTooltip
.
jumpToRuleShortcut
"
)
;
this
.
_tooltip
.
panel
.
innerHTML
=
"
"
;
this
.
_tooltip
.
panel
.
appendChild
(
this
.
container
)
;
this
.
_tooltip
.
setContentSize
(
{
width
:
"
auto
"
height
:
"
auto
"
}
)
;
}
show
(
element
ruleText
)
{
this
.
message
.
textContent
=
ruleText
;
this
.
container
.
appendChild
(
this
.
message
)
;
this
.
container
.
appendChild
(
this
.
footer
)
;
this
.
_tooltip
.
startTogglingOnHover
(
element
)
;
}
destroy
(
)
{
this
.
_tooltip
.
destroy
(
)
;
this
.
container
=
null
;
this
.
message
=
null
;
this
.
footer
=
null
;
}
}
module
.
exports
=
RulePreviewTooltip
;
