"
use
strict
"
;
loader
.
lazyRequireGetter
(
this
"
openDocLink
"
"
resource
:
/
/
devtools
/
client
/
shared
/
link
.
js
"
true
)
;
class
InactiveCssTooltipHelper
{
constructor
(
)
{
this
.
addTab
=
this
.
addTab
.
bind
(
this
)
;
}
async
setContent
(
data
tooltip
)
{
const
fragment
=
this
.
getTemplate
(
data
tooltip
)
;
const
{
doc
}
=
tooltip
;
tooltip
.
panel
.
innerHTML
=
"
"
;
tooltip
.
panel
.
addEventListener
(
"
click
"
this
.
addTab
)
;
tooltip
.
once
(
"
hidden
"
(
)
=
>
{
tooltip
.
panel
.
removeEventListener
(
"
click
"
this
.
addTab
)
;
}
)
;
await
doc
.
l10n
.
translateFragment
(
fragment
)
;
doc
.
l10n
.
pauseObserving
(
)
;
tooltip
.
panel
.
appendChild
(
fragment
)
;
doc
.
l10n
.
resumeObserving
(
)
;
tooltip
.
setContentSize
(
{
width
:
267
height
:
Infinity
}
)
;
}
getTemplate
(
data
tooltip
)
{
const
XHTML_NS
=
"
http
:
/
/
www
.
w3
.
org
/
1999
/
xhtml
"
;
const
{
fixId
msgId
property
display
learnMoreURL
}
=
data
;
const
{
doc
}
=
tooltip
;
const
documentURL
=
learnMoreURL
|
|
https
:
/
/
developer
.
mozilla
.
org
/
docs
/
Web
/
CSS
/
{
property
}
;
this
.
_currentTooltip
=
tooltip
;
this
.
_currentUrl
=
{
documentURL
}
?
utm_source
=
devtools
&
utm_medium
=
inspector
-
inactive
-
css
;
const
templateNode
=
doc
.
createElementNS
(
XHTML_NS
"
template
"
)
;
templateNode
.
innerHTML
=
<
div
class
=
"
devtools
-
tooltip
-
inactive
-
css
"
>
<
p
data
-
l10n
-
id
=
"
{
msgId
}
"
data
-
l10n
-
args
=
'
{
JSON
.
stringify
(
{
property
display
}
)
}
'
>
<
/
p
>
<
p
data
-
l10n
-
id
=
"
{
fixId
}
"
>
<
span
data
-
l10n
-
name
=
"
link
"
class
=
"
link
"
>
<
/
span
>
<
/
p
>
<
/
div
>
;
return
doc
.
importNode
(
templateNode
.
content
true
)
;
}
addTab
(
event
)
{
if
(
event
.
target
.
className
!
=
=
"
link
"
)
{
return
;
}
const
tooltip
=
this
.
_currentTooltip
;
tooltip
.
hide
(
)
;
openDocLink
(
this
.
_currentUrl
)
;
}
destroy
(
)
{
this
.
_currentTooltip
=
null
;
this
.
_currentUrl
=
null
;
}
}
module
.
exports
=
InactiveCssTooltipHelper
;
