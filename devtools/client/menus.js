"
use
strict
"
;
const
{
Cu
}
=
require
(
"
chrome
"
)
;
loader
.
lazyRequireGetter
(
this
"
gDevToolsBrowser
"
"
devtools
/
client
/
framework
/
devtools
-
browser
"
true
)
;
loader
.
lazyRequireGetter
(
this
"
TargetFactory
"
"
devtools
/
client
/
framework
/
target
"
true
)
;
loader
.
lazyRequireGetter
(
this
"
ResponsiveUIManager
"
"
devtools
/
client
/
responsive
/
manager
"
)
;
loader
.
lazyRequireGetter
(
this
"
openDocLink
"
"
devtools
/
client
/
shared
/
link
"
true
)
;
loader
.
lazyImporter
(
this
"
BrowserToolboxLauncher
"
"
resource
:
/
/
devtools
/
client
/
framework
/
browser
-
toolbox
/
Launcher
.
jsm
"
)
;
loader
.
lazyImporter
(
this
"
ProfilerMenuButton
"
"
resource
:
/
/
devtools
/
client
/
performance
-
new
/
popup
/
menu
-
button
.
jsm
.
js
"
)
;
loader
.
lazyRequireGetter
(
this
"
ResponsiveUIManager
"
"
devtools
/
client
/
responsive
/
manager
"
)
;
exports
.
menuitems
=
[
{
id
:
"
menu_devToolbox
"
l10nKey
:
"
devToolboxMenuItem
"
async
oncommand
(
event
)
{
try
{
const
window
=
event
.
target
.
ownerDocument
.
defaultView
;
await
gDevToolsBrowser
.
toggleToolboxCommand
(
window
.
gBrowser
Cu
.
now
(
)
)
;
}
catch
(
e
)
{
console
.
error
(
Exception
while
opening
the
toolbox
:
{
e
}
\
n
{
e
.
stack
}
)
;
}
}
keyId
:
"
toggleToolbox
"
checkbox
:
true
}
{
id
:
"
menu_devtools_separator
"
separator
:
true
}
{
id
:
"
menu_devtools_remotedebugging
"
l10nKey
:
"
devtoolsRemoteDebugging
"
oncommand
(
event
)
{
const
window
=
event
.
target
.
ownerDocument
.
defaultView
;
gDevToolsBrowser
.
openAboutDebugging
(
window
.
gBrowser
)
;
}
}
{
id
:
"
menu_browserToolbox
"
l10nKey
:
"
browserToolboxMenu
"
oncommand
(
)
{
BrowserToolboxLauncher
.
init
(
)
;
}
keyId
:
"
browserToolbox
"
}
{
id
:
"
menu_browserContentToolbox
"
l10nKey
:
"
browserContentToolboxMenu
"
oncommand
(
event
)
{
const
window
=
event
.
target
.
ownerDocument
.
defaultView
;
gDevToolsBrowser
.
openContentProcessToolbox
(
window
.
gBrowser
)
;
}
}
{
id
:
"
menu_browserConsole
"
l10nKey
:
"
browserConsoleCmd
"
oncommand
(
)
{
const
{
BrowserConsoleManager
}
=
require
(
"
devtools
/
client
/
webconsole
/
browser
-
console
-
manager
"
)
;
BrowserConsoleManager
.
openBrowserConsoleOrFocus
(
)
;
}
keyId
:
"
browserConsole
"
}
{
id
:
"
menu_toggleProfilerButtonMenu
"
l10nKey
:
"
toggleProfilerButtonMenu
"
checkbox
:
true
oncommand
(
event
)
{
ProfilerMenuButton
.
toggle
(
event
.
target
.
ownerDocument
)
;
}
}
{
id
:
"
menu_responsiveUI
"
l10nKey
:
"
responsiveDesignMode
"
oncommand
(
event
)
{
const
window
=
event
.
target
.
ownerDocument
.
defaultView
;
ResponsiveUIManager
.
toggle
(
window
window
.
gBrowser
.
selectedTab
{
trigger
:
"
menu
"
}
)
;
}
keyId
:
"
responsiveDesignMode
"
checkbox
:
true
}
{
id
:
"
menu_eyedropper
"
l10nKey
:
"
eyedropper
"
async
oncommand
(
event
)
{
const
window
=
event
.
target
.
ownerDocument
.
defaultView
;
const
target
=
await
TargetFactory
.
forTab
(
window
.
gBrowser
.
selectedTab
)
;
await
target
.
attach
(
)
;
const
inspectorFront
=
await
target
.
getFront
(
"
inspector
"
)
;
if
(
ResponsiveUIManager
.
isActiveForTab
(
target
.
tab
)
&
&
target
.
actorHasMethod
(
"
emulation
"
"
setElementPickerState
"
)
)
{
const
ui
=
ResponsiveUIManager
.
getResponsiveUIForTab
(
target
.
tab
)
;
await
ui
.
emulationFront
.
setElementPickerState
(
true
)
;
inspectorFront
.
once
(
"
color
-
picked
"
async
(
)
=
>
{
await
ui
.
emulationFront
.
setElementPickerState
(
false
)
;
}
)
;
inspectorFront
.
once
(
"
color
-
pick
-
canceled
"
async
(
)
=
>
{
await
ui
.
emulationFront
.
setElementPickerState
(
false
)
;
}
)
;
}
inspectorFront
.
pickColorFromPage
(
{
copyOnSelect
:
true
fromMenu
:
true
}
)
;
}
checkbox
:
true
}
{
separator
:
true
id
:
"
devToolsEndSeparator
"
}
{
id
:
"
getMoreDevtools
"
l10nKey
:
"
getMoreDevtoolsCmd
"
oncommand
(
event
)
{
openDocLink
(
"
https
:
/
/
addons
.
mozilla
.
org
/
firefox
/
collections
/
mozilla
/
webdeveloper
/
"
)
;
}
}
]
;
