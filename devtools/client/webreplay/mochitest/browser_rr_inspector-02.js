"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
inspector
/
test
/
shared
-
head
.
js
"
this
)
;
add_task
(
async
function
(
)
{
const
dbg
=
await
attachRecordingDebugger
(
"
doc_inspector_basic
.
html
"
{
waitForRecording
:
true
}
)
;
const
{
threadClient
tab
toolbox
}
=
dbg
;
await
threadClient
.
interrupt
(
)
;
await
threadClient
.
resume
(
)
;
await
threadClient
.
interrupt
(
)
;
const
bp
=
await
setBreakpoint
(
threadClient
"
doc_inspector_basic
.
html
"
9
)
;
await
rewindToLine
(
threadClient
9
)
;
const
{
inspector
testActor
}
=
await
openInspector
(
)
;
info
(
"
Waiting
for
element
picker
to
become
active
.
"
)
;
toolbox
.
win
.
focus
(
)
;
await
toolbox
.
inspector
.
nodePicker
.
start
(
)
;
info
(
"
Moving
mouse
over
div
.
"
)
;
await
moveMouseOver
(
"
#
maindiv
"
1
1
)
;
info
(
"
Performing
checks
"
)
;
await
testActor
.
isNodeCorrectlyHighlighted
(
"
#
maindiv
"
is
)
;
await
threadClient
.
removeBreakpoint
(
bp
)
;
await
toolbox
.
closeToolbox
(
)
;
await
gBrowser
.
removeTab
(
tab
)
;
function
moveMouseOver
(
selector
x
y
)
{
info
(
"
Waiting
for
element
"
+
selector
+
"
to
be
highlighted
"
)
;
testActor
.
synthesizeMouse
(
{
selector
x
y
options
:
{
type
:
"
mousemove
"
}
}
)
;
return
inspector
.
inspector
.
nodePicker
.
once
(
"
picker
-
node
-
hovered
"
)
;
}
}
)
;
