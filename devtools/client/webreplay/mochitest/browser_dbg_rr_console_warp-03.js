"
use
strict
"
;
const
BrowserTest
=
{
gTestPath
ok
registerCleanupFunction
waitForExplicitFinish
BrowserTestUtils
}
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
webconsole
/
test
/
browser
/
head
.
js
"
BrowserTest
)
;
add_task
(
async
function
(
)
{
const
dbg
=
await
attachRecordingDebugger
(
"
doc_rr_error
.
html
"
{
waitForRecording
:
true
}
)
;
const
{
toolbox
}
=
dbg
;
const
console
=
await
toolbox
.
selectTool
(
"
webconsole
"
)
;
const
hud
=
console
.
hud
;
await
warpToMessage
(
hud
dbg
"
Number
5
"
)
;
BrowserTest
.
execute
(
hud
"
Error
(
'
helo
'
)
"
)
;
await
waitFor
(
(
)
=
>
findMessage
(
hud
"
helo
"
)
)
;
BrowserTest
.
execute
(
hud
function
f
(
)
{
throw
Error
(
"
there
"
)
;
}
f
(
)
;
)
;
await
BrowserTest
.
checkMessageStack
(
hud
"
Error
:
there
"
[
3
5
]
)
;
await
shutdownDebugger
(
dbg
)
;
}
)
;
