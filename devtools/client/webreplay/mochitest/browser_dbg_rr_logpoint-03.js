"
use
strict
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
debugger
.
features
.
log
-
event
-
breakpoints
"
true
)
;
const
dbg
=
await
attachRecordingDebugger
(
"
doc_events
.
html
"
{
waitForRecording
:
true
}
)
;
const
console
=
await
getDebuggerSplitConsole
(
dbg
)
;
const
hud
=
console
.
hud
;
await
dbg
.
actions
.
addEventListenerBreakpoints
(
[
"
event
.
mouse
.
mousedown
"
]
)
;
await
dbg
.
actions
.
toggleEventLogging
(
)
;
const
msg
=
await
waitForMessage
(
hud
"
mousedown
"
)
;
const
regexps
=
[
/
target
:
HTMLDivElement
/
/
clientX
:
\
d
+
/
/
clientY
:
\
d
+
/
/
layerX
:
\
d
+
/
/
layerY
:
\
d
+
/
]
;
for
(
const
regexp
of
regexps
)
{
ok
(
regexp
.
test
(
msg
.
textContent
)
Message
text
includes
{
regexp
}
)
;
}
await
checkMessageObjectContents
(
msg
[
"
altKey
:
false
"
"
bubbles
:
true
"
]
)
;
await
shutdownDebugger
(
dbg
)
;
}
)
;
