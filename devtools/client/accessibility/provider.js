"
use
strict
"
;
const
{
fetchChildren
}
=
require
(
"
devtools
/
client
/
accessibility
/
actions
/
accessibles
"
)
;
class
Provider
{
constructor
(
accessibles
filtered
dispatch
)
{
this
.
accessibles
=
accessibles
;
this
.
filtered
=
filtered
;
this
.
dispatch
=
dispatch
;
}
getChildren
(
accessible
)
{
if
(
!
accessible
|
|
!
accessible
.
actorID
|
|
accessible
.
childCount
=
=
=
0
)
{
return
[
]
;
}
const
obj
=
this
.
accessibles
.
get
(
accessible
.
actorID
)
;
if
(
!
obj
|
|
!
obj
.
children
)
{
return
this
.
dispatch
(
fetchChildren
(
accessible
)
)
;
}
return
obj
.
children
;
}
hasChildren
(
accessible
)
{
return
accessible
.
childCount
>
0
;
}
getValue
(
accessible
)
{
return
accessible
.
name
|
|
"
"
;
}
getLabel
(
accessible
)
{
return
accessible
.
role
;
}
getKey
(
accessible
)
{
return
accessible
.
actorID
;
}
getType
(
accessible
)
{
return
accessible
.
typeName
;
}
getLevel
(
accessible
defaultLevel
)
{
return
this
.
filtered
?
0
:
defaultLevel
;
}
}
exports
.
Provider
=
Provider
;
