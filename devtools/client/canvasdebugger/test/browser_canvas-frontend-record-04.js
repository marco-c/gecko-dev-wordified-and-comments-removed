async
function
ifTestingSupported
(
)
{
const
{
target
panel
}
=
await
initCanvasDebuggerFrontend
(
RAF_BEGIN_URL
)
;
const
{
window
EVENTS
gFront
SnapshotsListView
}
=
panel
.
panelWin
;
loadFrameScriptUtils
(
)
;
await
reload
(
target
)
;
const
recordingFinished
=
once
(
window
EVENTS
.
SNAPSHOT_RECORDING_FINISHED
)
;
SnapshotsListView
.
_onRecordButtonClick
(
)
;
await
waitUntil
(
async
function
(
)
{
return
!
(
await
gFront
.
isRecording
(
)
)
;
}
)
;
evalInDebuggee
(
"
start
(
)
;
"
)
;
await
recordingFinished
;
ok
(
true
"
Finished
recording
a
snapshot
of
the
animation
loop
.
"
)
;
await
removeTab
(
target
.
tab
)
;
finish
(
)
;
}
