"
use
strict
"
;
add_task
(
async
function
test
(
)
{
info
(
"
Test
that
about
:
profiling
presets
configure
the
profiler
"
)
;
if
(
!
Services
.
profiler
.
GetFeatures
(
)
.
includes
(
"
stackwalk
"
)
)
{
ok
(
true
"
This
platform
does
not
support
stackwalking
skip
this
test
.
"
)
;
return
;
}
PrefsPresets
.
changePreset
(
"
aboutprofiling
"
"
web
-
developer
"
Services
.
profiler
.
GetFeatures
(
)
)
;
await
withDevToolsPanel
(
async
document
=
>
{
{
const
presets
=
await
getNearestInputFromText
(
document
"
Settings
"
)
;
is
(
presets
.
value
"
web
-
developer
"
"
The
presets
default
to
webdev
mode
.
"
)
;
ok
(
!
(
await
devToolsActiveConfigurationHasFeature
(
document
"
stackwalk
"
)
)
"
Stack
walking
is
not
used
in
Web
Developer
mode
.
"
)
;
}
{
const
presets
=
await
getNearestInputFromText
(
document
"
Settings
"
)
;
setReactFriendlyInputValue
(
presets
"
firefox
-
platform
"
)
;
is
(
presets
.
value
"
firefox
-
platform
"
"
The
preset
was
changed
to
Firefox
Platform
"
)
;
ok
(
await
devToolsActiveConfigurationHasFeature
(
document
"
stackwalk
"
)
"
Stack
walking
is
used
in
Firefox
Platform
mode
.
"
)
;
}
}
)
;
}
)
;
