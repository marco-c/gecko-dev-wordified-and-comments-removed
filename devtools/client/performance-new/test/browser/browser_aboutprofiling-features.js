"
use
strict
"
;
add_task
(
async
function
test
(
)
{
info
(
"
Test
that
about
:
profiling
can
be
loaded
and
the
features
changed
.
"
)
;
ok
(
Services
.
profiler
.
GetFeatures
(
)
.
includes
(
"
js
"
)
"
This
test
assumes
that
the
JavaScript
feature
is
available
on
every
platform
.
"
)
;
await
withAboutProfiling
(
async
document
=
>
{
const
jsInput
=
await
getNearestInputFromText
(
document
"
JavaScript
"
)
;
ok
(
activeConfigurationHasFeature
(
"
js
"
)
"
By
default
the
JS
feature
is
always
enabled
.
"
)
;
ok
(
jsInput
.
checked
"
The
JavaScript
input
is
checked
when
enabled
.
"
)
;
jsInput
.
click
(
)
;
ok
(
!
activeConfigurationHasFeature
(
"
js
"
)
"
The
JS
feature
can
be
toggled
off
.
"
)
;
ok
(
!
jsInput
.
checked
"
The
JS
feature
'
s
input
element
is
also
toggled
off
.
"
)
;
}
)
;
const
{
revertRecordingPreferences
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
devtools
/
client
/
performance
-
new
/
popup
/
background
.
jsm
.
js
"
)
;
revertRecordingPreferences
(
)
;
}
)
;
