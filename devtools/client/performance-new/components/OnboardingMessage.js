"
use
strict
"
;
const
{
PureComponent
createFactory
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
{
b
button
div
p
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
Localized
=
createFactory
(
require
(
"
devtools
/
client
/
shared
/
vendor
/
fluent
-
react
"
)
.
Localized
)
;
const
Services
=
require
(
"
Services
"
)
;
const
{
openDocLink
}
=
require
(
"
devtools
/
client
/
shared
/
link
"
)
;
const
LEARN_MORE_URL
=
"
https
:
/
/
developer
.
mozilla
.
org
/
docs
/
Mozilla
/
Performance
/
Profiling_with_the_Built
-
in_Profiler
"
;
const
ONBOARDING_PREF
=
"
devtools
.
performance
.
new
-
panel
-
onboarding
"
;
class
OnboardingMessage
extends
PureComponent
{
constructor
(
props
)
{
super
(
props
)
;
const
isOnboardingEnabled
=
Services
.
prefs
.
getBoolPref
(
ONBOARDING_PREF
true
)
;
this
.
state
=
{
isOnboardingEnabled
}
;
}
componentDidMount
(
)
{
Services
.
prefs
.
addObserver
(
ONBOARDING_PREF
this
.
onPreferenceUpdated
)
;
}
componentWillUnmount
(
)
{
Services
.
prefs
.
removeObserver
(
ONBOARDING_PREF
this
.
onPreferenceUpdated
)
;
}
handleCloseIconClick
=
(
)
=
>
{
Services
.
prefs
.
setBoolPref
(
ONBOARDING_PREF
false
)
;
}
;
handleLearnMoreClick
=
(
)
=
>
{
openDocLink
(
LEARN_MORE_URL
{
}
)
;
}
;
handleSettingsClick
=
(
)
=
>
{
const
anyWindow
=
window
;
const
{
gToolbox
}
=
anyWindow
;
gToolbox
.
selectTool
(
"
options
"
)
;
}
;
onPreferenceUpdated
=
(
)
=
>
{
const
value
=
Services
.
prefs
.
getBoolPref
(
ONBOARDING_PREF
true
)
;
this
.
setState
(
{
isOnboardingEnabled
:
value
}
)
;
}
;
render
(
)
{
const
{
isOnboardingEnabled
}
=
this
.
state
;
if
(
!
isOnboardingEnabled
)
{
return
null
;
}
const
learnMoreLink
=
button
(
{
className
:
"
perf
-
external
-
link
"
onClick
:
this
.
handleLearnMoreClick
}
)
;
const
settingsLink
=
button
(
{
className
:
"
perf
-
external
-
link
"
onClick
:
this
.
handleSettingsClick
}
)
;
const
closeButton
=
Localized
(
{
id
:
"
perftools
-
onboarding
-
close
-
button
"
attrs
:
{
"
aria
-
label
"
:
true
}
}
button
(
{
className
:
"
perf
-
onboarding
-
close
-
button
perf
-
photon
-
button
perf
-
photon
-
button
-
ghost
"
onClick
:
this
.
handleCloseIconClick
}
)
)
;
return
div
(
{
className
:
"
perf
-
onboarding
"
}
div
(
{
className
:
"
perf
-
onboarding
-
message
"
}
Localized
(
{
id
:
"
perftools
-
onboarding
-
message
"
b
:
b
(
)
a
:
learnMoreLink
}
p
(
{
className
:
"
perf
-
onboarding
-
message
-
row
"
}
)
)
Localized
(
{
id
:
"
perftools
-
onboarding
-
reenable
-
old
-
panel
"
a
:
settingsLink
}
p
(
{
className
:
"
perf
-
onboarding
-
message
-
row
"
}
)
)
)
closeButton
)
;
}
}
module
.
exports
=
OnboardingMessage
;
