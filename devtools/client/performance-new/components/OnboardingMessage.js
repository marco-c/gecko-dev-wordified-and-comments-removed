"
use
strict
"
;
const
{
PureComponent
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
{
b
button
div
p
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
Services
=
require
(
"
Services
"
)
;
const
{
openDocLink
}
=
require
(
"
devtools
/
client
/
shared
/
link
"
)
;
const
LEARN_MORE_URL
=
"
https
:
/
/
developer
.
mozilla
.
org
/
docs
/
Mozilla
/
Performance
/
Profiling_with_the_Built
-
in_Profiler
"
;
const
ONBOARDING_PREF
=
"
devtools
.
performance
.
new
-
panel
-
onboarding
"
;
class
OnboardingMessage
extends
PureComponent
{
constructor
(
props
)
{
super
(
props
)
;
const
isOnboardingEnabled
=
Services
.
prefs
.
getBoolPref
(
ONBOARDING_PREF
true
)
;
this
.
state
=
{
isOnboardingEnabled
}
;
}
componentDidMount
(
)
{
Services
.
prefs
.
addObserver
(
ONBOARDING_PREF
this
.
onPreferenceUpdated
)
;
}
componentWillUnmount
(
)
{
Services
.
prefs
.
removeObserver
(
ONBOARDING_PREF
this
.
onPreferenceUpdated
)
;
}
handleCloseIconClick
=
(
)
=
>
{
Services
.
prefs
.
setBoolPref
(
ONBOARDING_PREF
false
)
;
}
;
handleLearnMoreClick
=
(
)
=
>
{
openDocLink
(
LEARN_MORE_URL
{
}
)
;
}
;
handleSettingsClick
=
(
)
=
>
{
const
anyWindow
=
window
;
const
{
gToolbox
}
=
anyWindow
;
gToolbox
.
selectTool
(
"
options
"
)
;
}
;
onPreferenceUpdated
=
(
)
=
>
{
const
value
=
Services
.
prefs
.
getBoolPref
(
ONBOARDING_PREF
true
)
;
this
.
setState
(
{
isOnboardingEnabled
:
value
}
)
;
}
;
render
(
)
{
const
{
isOnboardingEnabled
}
=
this
.
state
;
if
(
!
isOnboardingEnabled
)
{
return
null
;
}
const
learnMoreLink
=
button
(
{
className
:
"
perf
-
external
-
link
"
onClick
:
this
.
handleLearnMoreClick
}
"
Learn
more
"
)
;
const
settingsLink
=
button
(
{
className
:
"
perf
-
external
-
link
"
onClick
:
this
.
handleSettingsClick
}
"
Settings
>
Advanced
"
)
;
const
closeButton
=
button
(
{
"
aria
-
label
"
:
"
Close
the
onboarding
message
"
className
:
"
perf
-
onboarding
-
close
-
button
perf
-
photon
-
button
perf
-
photon
-
button
-
ghost
"
onClick
:
this
.
handleCloseIconClick
}
)
;
return
div
(
{
className
:
"
perf
-
onboarding
"
}
div
(
{
className
:
"
perf
-
onboarding
-
message
"
}
p
(
{
className
:
"
perf
-
onboarding
-
message
-
row
"
}
b
(
{
}
"
New
"
)
"
:
Firefox
Profiler
is
now
integrated
into
Developer
Tools
.
"
learnMoreLink
"
about
this
powerful
new
tool
.
"
)
p
(
{
className
:
"
perf
-
onboarding
-
message
-
row
"
}
"
(
For
a
limited
time
you
can
access
the
original
Performance
panel
via
"
settingsLink
"
)
"
)
)
closeButton
)
;
}
}
module
.
exports
=
OnboardingMessage
;
