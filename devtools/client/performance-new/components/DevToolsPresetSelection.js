"
use
strict
"
;
const
{
PureComponent
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
{
div
select
option
button
ul
li
span
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
{
connect
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
redux
"
)
;
const
actions
=
require
(
"
devtools
/
client
/
performance
-
new
/
store
/
actions
"
)
;
const
selectors
=
require
(
"
devtools
/
client
/
performance
-
new
/
store
/
selectors
"
)
;
const
{
featureDescriptions
}
=
require
(
"
devtools
/
client
/
performance
-
new
/
utils
"
)
;
class
DevToolsPresetSelection
extends
PureComponent
{
constructor
(
props
)
{
super
(
props
)
;
this
.
onPresetChange
=
this
.
onPresetChange
.
bind
(
this
)
;
this
.
featureDescriptionMap
=
{
}
;
for
(
const
feature
of
featureDescriptions
)
{
this
.
featureDescriptionMap
[
feature
.
value
]
=
feature
;
}
}
onPresetChange
(
event
)
{
const
{
presets
}
=
this
.
props
;
this
.
props
.
changePreset
(
presets
event
.
target
.
value
)
;
}
render
(
)
{
const
{
presetName
presets
openAboutProfiling
}
=
this
.
props
;
let
presetDescription
;
const
currentPreset
=
presets
[
presetName
]
;
if
(
currentPreset
)
{
presetDescription
=
currentPreset
.
description
;
}
else
{
const
{
interval
threads
features
}
=
this
.
props
;
presetDescription
=
div
(
null
ul
(
{
className
:
"
perf
-
presets
-
custom
"
}
li
(
null
span
(
{
className
:
"
perf
-
presets
-
custom
-
bold
"
}
"
Interval
:
"
)
{
interval
}
ms
)
li
(
null
span
(
{
className
:
"
perf
-
presets
-
custom
-
bold
"
}
"
Threads
:
"
)
threads
.
join
(
"
"
)
)
features
.
map
(
feature
=
>
{
const
description
=
this
.
featureDescriptionMap
[
feature
]
;
if
(
!
description
)
{
throw
new
Error
(
"
Could
not
find
the
feature
description
for
"
+
feature
)
;
}
return
li
(
{
key
:
feature
}
description
?
description
.
name
:
feature
)
;
}
)
)
button
(
{
className
:
"
perf
-
external
-
link
"
onClick
:
openAboutProfiling
}
"
Edit
Settings
"
)
)
;
}
return
div
(
{
className
:
"
perf
-
presets
"
}
div
(
{
className
:
"
perf
-
presets
-
settings
"
}
"
Settings
"
)
div
(
{
className
:
"
perf
-
presets
-
details
"
}
div
(
{
className
:
"
perf
-
presets
-
details
-
row
"
}
select
(
{
className
:
"
perf
-
presets
-
select
"
onChange
:
this
.
onPresetChange
value
:
presetName
}
Object
.
entries
(
presets
)
.
map
(
(
[
name
preset
]
)
=
>
option
(
{
key
:
name
value
:
name
}
preset
.
label
)
)
option
(
{
value
:
"
custom
"
}
"
Custom
"
)
)
)
div
(
{
className
:
"
perf
-
presets
-
details
-
row
perf
-
presets
-
description
"
}
presetDescription
)
)
)
;
}
}
function
mapStateToProps
(
state
)
{
return
{
presetName
:
selectors
.
getPresetName
(
state
)
presets
:
selectors
.
getPresets
(
state
)
interval
:
selectors
.
getInterval
(
state
)
threads
:
selectors
.
getThreads
(
state
)
features
:
selectors
.
getFeatures
(
state
)
openAboutProfiling
:
selectors
.
getOpenAboutProfiling
(
state
)
}
;
}
const
mapDispatchToProps
=
{
changePreset
:
actions
.
changePreset
}
;
module
.
exports
=
connect
(
mapStateToProps
mapDispatchToProps
)
(
DevToolsPresetSelection
)
;
