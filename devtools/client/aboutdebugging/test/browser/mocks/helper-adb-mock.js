"
use
strict
"
;
function
enableAdbMock
(
mock
)
{
const
{
setMockedModule
}
=
require
(
"
devtools
/
shared
/
loader
/
browser
-
loader
-
mocks
"
)
;
setMockedModule
(
mock
"
devtools
/
client
/
shared
/
remote
-
debugging
/
adb
/
adb
"
)
;
}
function
disableAdbMock
(
)
{
const
{
removeMockedModule
}
=
require
(
"
devtools
/
shared
/
loader
/
browser
-
loader
-
mocks
"
)
;
removeMockedModule
(
"
devtools
/
client
/
shared
/
remote
-
debugging
/
adb
/
adb
"
)
;
}
function
createAdbMock
(
)
{
const
adbMock
=
{
}
;
adbMock
.
registerListener
=
function
(
listener
)
{
console
.
log
(
"
MOCKED
METHOD
registerListener
"
)
;
}
;
adbMock
.
getRuntimes
=
function
(
)
{
console
.
log
(
"
MOCKED
METHOD
getRuntimes
"
)
;
}
;
adbMock
.
getDevices
=
function
(
)
{
console
.
log
(
"
MOCKED
METHOD
getDevices
"
)
;
}
;
adbMock
.
updateRuntimes
=
function
(
)
{
console
.
log
(
"
MOCKED
METHOD
updateRuntimes
"
)
;
}
;
adbMock
.
unregisterListener
=
function
(
listener
)
{
console
.
log
(
"
MOCKED
METHOD
unregisterListener
"
)
;
}
;
adbMock
.
once
=
function
(
)
{
console
.
log
(
"
MOCKED
METHOD
once
"
)
;
}
;
adbMock
.
isProcessStarted
=
function
(
)
{
console
.
log
(
"
MOCKED
METHOD
isProcessStarted
"
)
;
}
;
return
{
adb
:
adbMock
}
;
}
function
addObserverMock
(
adbMock
)
{
const
EventEmitter
=
require
(
"
devtools
/
shared
/
event
-
emitter
"
)
;
const
observerMock
=
{
}
;
EventEmitter
.
decorate
(
observerMock
)
;
adbMock
.
registerListener
=
function
(
listener
)
{
console
.
log
(
"
MOCKED
METHOD
registerListener
with
mock
scanner
"
)
;
observerMock
.
on
(
"
runtime
-
list
-
updated
"
listener
)
;
}
;
return
observerMock
;
}
function
createAdbProcessMock
(
)
{
const
EventEmitter
=
require
(
"
devtools
/
shared
/
event
-
emitter
"
)
;
const
mock
=
{
}
;
EventEmitter
.
decorate
(
mock
)
;
mock
.
ready
=
false
;
mock
.
start
=
async
(
)
=
>
{
console
.
log
(
"
MOCKED
METHOD
start
"
)
;
mock
.
ready
=
true
;
mock
.
emit
(
"
adb
-
ready
"
)
;
}
;
return
{
adbProcess
:
mock
}
;
}
function
enableAdbProcessMock
(
mock
)
{
const
{
setMockedModule
}
=
require
(
"
devtools
/
shared
/
loader
/
browser
-
loader
-
mocks
"
)
;
setMockedModule
(
mock
"
devtools
/
client
/
shared
/
remote
-
debugging
/
adb
/
adb
-
process
"
)
;
}
function
disableAdbProcessMock
(
)
{
const
{
removeMockedModule
}
=
require
(
"
devtools
/
shared
/
loader
/
browser
-
loader
-
mocks
"
)
;
removeMockedModule
(
"
devtools
/
client
/
shared
/
remote
-
debugging
/
adb
/
adb
-
process
"
)
;
}
