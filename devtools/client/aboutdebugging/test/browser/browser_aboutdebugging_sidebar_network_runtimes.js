"
use
strict
"
;
const
networkLocationsModule
=
require
(
"
resource
:
/
/
devtools
/
client
/
aboutdebugging
/
src
/
modules
/
network
-
locations
.
js
"
)
;
add_task
(
async
function
(
)
{
registerCleanupFunction
(
(
)
=
>
{
Services
.
prefs
.
clearUserPref
(
"
devtools
.
aboutdebugging
.
network
-
locations
"
)
;
}
)
;
const
{
document
tab
}
=
await
openAboutDebugging
(
)
;
const
noDevicesElement
=
document
.
querySelector
(
"
.
qa
-
sidebar
-
no
-
devices
"
)
;
ok
(
noDevicesElement
"
Sidebar
shows
the
'
no
devices
'
element
"
)
;
info
(
"
Add
a
network
location
"
)
;
networkLocationsModule
.
addNetworkLocation
(
"
localhost
:
6080
"
)
;
info
(
"
Wait
for
'
no
devices
'
element
to
disappear
"
)
;
waitUntil
(
(
)
=
>
!
document
.
querySelector
(
"
.
qa
-
sidebar
-
no
-
devices
"
)
)
;
ok
(
findSidebarItemByText
(
"
localhost
:
6080
"
document
)
"
Found
a
sidebar
item
for
localhost
:
6080
"
)
;
info
(
"
Remove
the
network
location
"
)
;
networkLocationsModule
.
removeNetworkLocation
(
"
localhost
:
6080
"
)
;
info
(
"
Wait
for
'
no
devices
'
element
to
reappear
"
)
;
waitUntil
(
(
)
=
>
document
.
querySelector
(
"
.
qa
-
sidebar
-
no
-
devices
"
)
)
;
ok
(
!
findSidebarItemByText
(
"
localhost
:
6080
"
document
)
"
Sidebar
item
for
localhost
:
6080
removed
"
)
;
await
removeTab
(
tab
)
;
}
)
;
