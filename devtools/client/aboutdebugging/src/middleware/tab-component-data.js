"
use
strict
"
;
const
{
DEBUG_TARGETS
REQUEST_TABS_SUCCESS
}
=
require
(
"
devtools
/
client
/
aboutdebugging
/
src
/
constants
"
)
;
const
tabComponentDataMiddleware
=
store
=
>
next
=
>
action
=
>
{
switch
(
action
.
type
)
{
case
REQUEST_TABS_SUCCESS
:
{
action
.
tabs
=
toComponentData
(
action
.
tabs
)
;
break
;
}
}
return
next
(
action
)
;
}
;
function
toComponentData
(
tabs
)
{
return
tabs
.
map
(
tab
=
>
{
const
type
=
DEBUG_TARGETS
.
TAB
;
const
id
=
tab
.
outerWindowID
;
const
icon
=
tab
.
favicon
?
data
:
image
/
png
;
base64
{
btoa
(
String
.
fromCharCode
.
apply
(
String
tab
.
favicon
)
)
}
:
"
chrome
:
/
/
devtools
/
skin
/
images
/
globe
.
svg
"
;
const
name
=
tab
.
title
|
|
tab
.
url
;
const
url
=
tab
.
url
;
return
{
name
icon
id
type
details
:
{
url
}
}
;
}
)
;
}
module
.
exports
=
tabComponentDataMiddleware
;
