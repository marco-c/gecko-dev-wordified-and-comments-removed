"
use
strict
"
;
const
{
DEBUG_TARGET_PANE
PREFERENCES
RUNTIMES
}
=
require
(
"
devtools
/
client
/
aboutdebugging
/
src
/
constants
"
)
;
const
Services
=
require
(
"
Services
"
)
;
function
isProcessDebuggingSupported
(
)
{
return
Services
.
prefs
.
getBoolPref
(
PREFERENCES
.
PROCESS_DEBUGGING_ENABLED
false
)
;
}
function
isLocalTabDebuggingSupported
(
)
{
return
Services
.
prefs
.
getBoolPref
(
PREFERENCES
.
LOCAL_TAB_DEBUGGING_ENABLED
false
)
;
}
function
isLocalProcessDebuggingSupported
(
)
{
return
Services
.
prefs
.
getBoolPref
(
"
devtools
.
aboutdebugging
.
test
-
local
-
process
-
debugging
"
false
)
;
}
function
isTemporaryExtensionSupported
(
)
{
return
Services
.
prefs
.
getBoolPref
(
PREFERENCES
.
XPINSTALL_ENABLED
true
)
;
}
const
ALL_DEBUG_TARGET_PANES
=
[
DEBUG_TARGET_PANE
.
INSTALLED_EXTENSION
.
.
.
(
isProcessDebuggingSupported
(
)
?
[
DEBUG_TARGET_PANE
.
PROCESSES
]
:
[
]
)
DEBUG_TARGET_PANE
.
OTHER_WORKER
DEBUG_TARGET_PANE
.
SERVICE_WORKER
DEBUG_TARGET_PANE
.
SHARED_WORKER
DEBUG_TARGET_PANE
.
TAB
.
.
.
(
isTemporaryExtensionSupported
(
)
?
[
DEBUG_TARGET_PANE
.
TEMPORARY_EXTENSION
]
:
[
]
)
]
;
const
REMOTE_DEBUG_TARGET_PANES
=
[
.
.
.
ALL_DEBUG_TARGET_PANES
]
;
const
THIS_FIREFOX_DEBUG_TARGET_PANES
=
ALL_DEBUG_TARGET_PANES
.
filter
(
p
=
>
p
!
=
=
DEBUG_TARGET_PANE
.
PROCESSES
|
|
isLocalProcessDebuggingSupported
(
)
)
.
filter
(
p
=
>
p
!
=
=
DEBUG_TARGET_PANE
.
TAB
|
|
isLocalTabDebuggingSupported
(
)
)
;
const
SUPPORTED_TARGET_PANE_BY_RUNTIME
=
{
[
RUNTIMES
.
THIS_FIREFOX
]
:
THIS_FIREFOX_DEBUG_TARGET_PANES
[
RUNTIMES
.
USB
]
:
REMOTE_DEBUG_TARGET_PANES
[
RUNTIMES
.
NETWORK
]
:
REMOTE_DEBUG_TARGET_PANES
}
;
function
isSupportedDebugTargetPane
(
runtimeType
debugTargetPaneKey
)
{
return
SUPPORTED_TARGET_PANE_BY_RUNTIME
[
runtimeType
]
.
includes
(
debugTargetPaneKey
)
;
}
exports
.
isSupportedDebugTargetPane
=
isSupportedDebugTargetPane
;
function
supportsTemporaryExtensionInstaller
(
runtimeType
)
{
return
runtimeType
=
=
=
RUNTIMES
.
THIS_FIREFOX
;
}
exports
.
supportsTemporaryExtensionInstaller
=
supportsTemporaryExtensionInstaller
;
function
supportsTemporaryExtensionAdditionalActions
(
runtimeType
)
{
return
runtimeType
=
=
=
RUNTIMES
.
THIS_FIREFOX
;
}
exports
.
supportsTemporaryExtensionAdditionalActions
=
supportsTemporaryExtensionAdditionalActions
;
