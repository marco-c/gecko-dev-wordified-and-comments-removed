"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
inspector
/
rules
/
test
/
head
.
js
"
this
)
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
shared
/
test
/
shared
-
redux
-
head
.
js
"
this
)
;
Services
.
prefs
.
setBoolPref
(
"
devtools
.
inspector
.
three
-
pane
-
enabled
"
true
)
;
registerCleanupFunction
(
(
)
=
>
{
Services
.
prefs
.
clearUserPref
(
"
devtools
.
inspector
.
three
-
pane
-
enabled
"
)
;
}
)
;
function
getDeclarations
(
panelDoc
selector
=
"
"
containerNode
=
null
)
{
const
els
=
panelDoc
.
querySelectorAll
(
#
sidebar
-
panel
-
changes
.
declaration
{
selector
}
)
;
return
[
.
.
.
els
]
.
filter
(
el
=
>
{
return
containerNode
?
containerNode
.
contains
(
el
)
:
true
;
}
)
.
map
(
el
=
>
{
return
{
property
:
el
.
querySelector
(
"
.
declaration
-
name
"
)
.
textContent
value
:
el
.
querySelector
(
"
.
declaration
-
value
"
)
.
textContent
}
;
}
)
;
}
function
getAddedDeclarations
(
panelDoc
containerNode
)
{
return
getDeclarations
(
panelDoc
"
.
diff
-
add
"
containerNode
)
;
}
function
getRemovedDeclarations
(
panelDoc
containerNode
)
{
return
getDeclarations
(
panelDoc
"
.
diff
-
remove
"
containerNode
)
;
}
