"
use
strict
"
;
const
{
createElement
createFactory
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
{
Provider
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
redux
"
)
;
const
ExtensionSidebarComponent
=
createFactory
(
require
(
"
.
/
components
/
ExtensionSidebar
"
)
)
;
const
{
updateObjectTreeView
removeExtensionSidebar
}
=
require
(
"
.
/
actions
/
sidebar
"
)
;
class
ExtensionSidebar
{
constructor
(
inspector
{
id
title
}
)
{
this
.
inspector
=
inspector
;
this
.
store
=
inspector
.
store
;
this
.
id
=
id
;
this
.
title
=
title
;
this
.
destroyed
=
false
;
}
get
provider
(
)
{
if
(
!
this
.
_provider
)
{
this
.
_provider
=
createElement
(
Provider
{
store
:
this
.
store
key
:
this
.
id
}
ExtensionSidebarComponent
(
{
id
:
this
.
id
}
)
)
;
}
return
this
.
_provider
;
}
destroy
(
)
{
if
(
this
.
destroyed
)
{
throw
new
Error
(
ExtensionSidebar
instances
cannot
be
destroyed
more
than
once
)
;
}
this
.
store
.
dispatch
(
removeExtensionSidebar
(
this
.
id
)
)
;
this
.
inspector
=
null
;
this
.
store
=
null
;
this
.
_provider
=
null
;
this
.
destroyed
=
true
;
}
setObject
(
object
)
{
if
(
this
.
removed
)
{
throw
new
Error
(
"
Unable
to
set
an
object
preview
on
a
removed
ExtensionSidebar
"
)
;
}
this
.
store
.
dispatch
(
updateObjectTreeView
(
this
.
id
object
)
)
;
}
}
module
.
exports
=
ExtensionSidebar
;
