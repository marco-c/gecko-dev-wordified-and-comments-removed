"
use
strict
"
;
const
TEST_URL
=
about
:
preferences
;
function
hexToCSS
(
hex
)
{
if
(
!
hex
)
{
return
null
;
}
const
rgba
=
InspectorUtils
.
colorToRGBA
(
hex
)
;
info
(
rgba
:
'
{
JSON
.
stringify
(
rgba
)
}
'
)
;
return
rgb
(
{
rgba
.
r
}
{
rgba
.
g
}
{
rgba
.
b
}
)
;
}
add_task
(
async
function
(
)
{
const
{
inspector
toolbox
}
=
await
openInspectorForURL
(
TEST_URL
)
;
info
(
"
Select
the
main
content
node
"
)
;
await
selectNode
(
"
.
main
-
content
"
inspector
)
;
let
pageBackgroundColor
=
await
getComputedStyleProperty
(
"
:
root
"
null
"
background
-
color
"
)
;
pageBackgroundColor
=
pageBackgroundColor
.
trim
(
)
;
info
(
"
Take
a
screenshot
of
the
element
and
verify
it
looks
as
expected
"
)
;
const
image
=
await
takeNodeScreenshot
(
inspector
)
;
await
checkImageColorAt
(
{
image
x
:
0
y
:
0
expectedColor
:
hexToCSS
(
pageBackgroundColor
)
label
:
"
The
screenshot
was
taken
"
}
)
;
await
toolbox
.
destroy
(
)
;
}
)
;
