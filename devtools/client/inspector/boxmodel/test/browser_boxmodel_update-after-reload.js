"
use
strict
"
;
add_task
(
function
*
(
)
{
yield
addTab
(
URL_ROOT
+
"
doc_boxmodel_iframe1
.
html
"
)
;
let
{
inspector
boxmodel
testActor
}
=
yield
openLayoutView
(
)
;
info
(
"
Test
that
the
box
model
view
works
on
the
first
page
"
)
;
yield
assertBoxModelView
(
inspector
boxmodel
testActor
)
;
info
(
"
Reload
the
page
"
)
;
let
onMarkupLoaded
=
waitForMarkupLoaded
(
inspector
)
;
yield
testActor
.
reload
(
)
;
yield
onMarkupLoaded
;
info
(
"
Test
that
the
box
model
view
works
on
the
reloaded
page
"
)
;
yield
assertBoxModelView
(
inspector
boxmodel
testActor
)
;
}
)
;
function
*
assertBoxModelView
(
inspector
boxmodel
testActor
)
{
yield
selectNode
(
"
p
"
inspector
)
;
info
(
"
Checking
that
the
box
model
view
shows
the
right
value
"
)
;
let
paddingElt
=
boxmodel
.
document
.
querySelector
(
"
.
boxmodel
-
padding
.
boxmodel
-
top
>
span
"
)
;
is
(
paddingElt
.
textContent
"
50
"
)
;
info
(
"
Listening
for
box
model
view
changes
and
modifying
the
padding
"
)
;
let
onUpdated
=
waitForUpdate
(
inspector
)
;
yield
setStyle
(
testActor
"
p
"
"
padding
"
"
20px
"
)
;
yield
onUpdated
;
ok
(
true
"
Box
model
view
got
updated
"
)
;
info
(
"
Checking
that
the
box
model
view
shows
the
right
value
after
update
"
)
;
is
(
paddingElt
.
textContent
"
20
"
)
;
}
