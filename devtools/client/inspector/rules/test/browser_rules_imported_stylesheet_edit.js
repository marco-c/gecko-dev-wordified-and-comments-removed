"
use
strict
"
;
const
TEST_URI
=
URL_ROOT
+
"
doc_rules_imported_stylesheet_edit
.
html
"
;
const
SJS_URI
=
URL_ROOT
+
"
sjs_imported_stylesheet_edit
.
sjs
"
;
add_task
(
async
function
(
)
{
info
(
"
Call
?
setup
on
the
test
sjs
"
)
;
await
fetch
(
SJS_URI
+
"
?
setup
"
)
;
info
(
"
Add
the
test
tab
open
the
rule
-
view
and
select
the
test
node
"
)
;
await
addTab
(
TEST_URI
)
;
const
{
inspector
view
}
=
await
openRuleView
(
)
;
await
selectNode
(
"
div
"
inspector
)
;
const
redColorProp
=
getTextProperty
(
view
1
{
color
:
"
red
"
}
)
;
ok
(
redColorProp
"
RuleView
displays
a
color
:
red
property
"
)
;
info
(
"
Call
?
update
-
stylesheet
on
the
test
sjs
"
)
;
await
fetch
(
SJS_URI
+
"
?
update
-
stylesheet
"
)
;
info
(
"
Reload
the
page
to
restore
the
initial
state
"
)
;
await
navigateTo
(
TEST_URI
)
;
info
(
"
Wait
until
a
rule
is
displayed
at
index
1
"
)
;
await
waitFor
(
(
)
=
>
view
.
element
.
children
[
1
]
)
;
info
(
"
Check
that
the
displayed
rule
has
been
correctly
updated
.
"
)
;
const
goldColorProp
=
getTextProperty
(
view
1
{
color
:
"
gold
"
}
)
;
ok
(
goldColorProp
"
RuleView
displays
a
color
:
gold
property
"
)
;
}
)
;
