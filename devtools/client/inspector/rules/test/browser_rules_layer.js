"
use
strict
"
;
const
TEST_URI
=
<
style
type
=
"
text
/
css
"
>
import
url
(
{
URL_ROOT_COM_SSL
}
doc_imported_anonymous_layer
.
css
)
layer
;
import
url
(
{
URL_ROOT_COM_SSL
}
doc_imported_named_layer
.
css
)
layer
(
importedLayer
)
;
layer
myLayer
{
h1
{
background
-
color
:
tomato
;
color
:
lightgreen
;
}
}
layer
{
h1
{
color
:
green
;
font
-
variant
:
small
-
caps
}
}
<
/
style
>
<
h1
>
Hello
layer
!
<
/
h1
>
;
add_task
(
async
function
(
)
{
await
addTab
(
"
https
:
/
/
example
.
com
/
document
-
builder
.
sjs
?
html
=
"
+
encodeURIComponent
(
TEST_URI
)
)
;
const
{
inspector
view
}
=
await
openRuleView
(
)
;
await
selectNode
(
"
h1
"
inspector
)
;
is
(
getRuleViewParentDataTextByIndex
(
view
1
)
"
layer
"
"
text
at
index
1
contains
anonymous
layer
.
"
)
;
is
(
getRuleViewParentDataTextByIndex
(
view
2
)
"
layer
myLayer
"
"
text
at
index
2
contains
named
layer
.
"
)
;
is
(
getRuleViewParentDataTextByIndex
(
view
3
)
"
layer
importedLayer
media
screen
"
"
text
at
index
3
contains
imported
stylesheet
named
layer
.
"
)
;
is
(
getRuleViewParentDataTextByIndex
(
view
4
)
"
layer
in
-
imported
-
stylesheet
"
"
text
at
index
4
only
contains
the
last
layer
it
'
s
in
.
"
)
;
is
(
getRuleViewParentDataTextByIndex
(
view
5
)
"
layer
"
"
text
at
index
5
contains
imported
stylesheet
anonymous
layer
.
"
)
;
}
)
;
function
getRuleViewParentDataElementByIndex
(
view
ruleIndex
)
{
return
view
.
styleDocument
.
querySelector
(
.
ruleview
-
rule
:
nth
-
of
-
type
(
{
ruleIndex
+
1
}
)
.
ruleview
-
rule
-
parent
-
data
)
;
}
function
getRuleViewParentDataTextByIndex
(
view
ruleIndex
)
{
return
getRuleViewParentDataElementByIndex
(
view
ruleIndex
)
?
.
textContent
;
}
