"
use
strict
"
;
const
{
setBaseCssDocsUrl
}
=
require
(
"
devtools
/
client
/
shared
/
widgets
/
MdnDocsWidget
"
)
;
const
PROPERTYNAME
=
"
color
"
;
const
TEST_URI
=
<
html
>
<
body
>
<
div
style
=
"
color
:
red
"
>
Test
"
Show
MDN
Docs
"
closes
on
escape
<
/
div
>
<
/
body
>
<
/
html
>
;
add_task
(
function
*
(
)
{
yield
addTab
(
"
data
:
text
/
html
;
charset
=
utf8
"
+
encodeURIComponent
(
TEST_URI
)
)
;
let
{
inspector
view
}
=
yield
openRuleView
(
)
;
yield
selectNode
(
"
div
"
inspector
)
;
setBaseCssDocsUrl
(
URL_ROOT
)
;
info
(
"
Retrieve
a
valid
anchor
for
the
CssDocs
tooltip
"
)
;
let
{
nameSpan
}
=
getRuleViewProperty
(
view
"
element
"
PROPERTYNAME
)
;
info
(
"
Showing
the
MDN
docs
tooltip
"
)
;
let
cssDocs
=
view
.
tooltips
.
getTooltip
(
"
cssDocs
"
)
;
let
onShown
=
cssDocs
.
tooltip
.
once
(
"
shown
"
)
;
cssDocs
.
show
(
nameSpan
PROPERTYNAME
)
;
yield
onShown
;
ok
(
true
"
The
MDN
docs
tooltip
was
shown
"
)
;
info
(
"
Simulate
pressing
the
'
Escape
'
key
"
)
;
let
onHidden
=
cssDocs
.
tooltip
.
once
(
"
hidden
"
)
;
EventUtils
.
sendKey
(
"
escape
"
)
;
yield
onHidden
;
ok
(
true
"
The
MDN
docs
tooltip
was
hidden
on
pressing
'
escape
'
"
)
;
}
)
;
