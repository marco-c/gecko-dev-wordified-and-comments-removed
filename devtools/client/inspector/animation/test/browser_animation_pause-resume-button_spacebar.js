"
use
strict
"
;
add_task
(
async
function
(
)
{
await
addTab
(
URL_ROOT
+
"
doc_custom_playback_rate
.
html
"
)
;
const
{
animationInspector
panel
}
=
await
openAnimationInspector
(
)
;
info
(
"
Checking
spacebar
makes
animations
to
pause
"
)
;
await
testPauseAndResumeBySpacebar
(
animationInspector
panel
)
;
info
(
"
Checking
spacebar
makes
animations
to
pause
when
the
button
has
the
focus
"
)
;
const
pauseResumeButton
=
panel
.
querySelector
(
"
.
pause
-
resume
-
button
"
)
;
await
testPauseAndResumeBySpacebar
(
animationInspector
pauseResumeButton
)
;
info
(
"
Checking
spacebar
works
with
other
UI
components
"
)
;
clickOnPauseResumeButton
(
animationInspector
panel
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
paused
"
)
;
sendSpaceKeyEvent
(
animationInspector
panel
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
running
"
)
;
clickOnCurrentTimeScrubberController
(
animationInspector
panel
0
.
5
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
paused
"
)
;
clickOnPauseResumeButton
(
animationInspector
panel
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
running
"
)
;
sendSpaceKeyEvent
(
animationInspector
panel
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
paused
"
)
;
ok
(
true
"
All
components
that
can
make
animations
pause
/
resume
works
fine
"
)
;
}
)
;
async
function
testPauseAndResumeBySpacebar
(
animationInspector
element
)
{
await
sendSpaceKeyEvent
(
animationInspector
element
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
paused
"
)
;
ok
(
true
"
Space
key
can
pause
animations
"
)
;
await
sendSpaceKeyEvent
(
animationInspector
element
)
;
await
waitUntilAnimationsPlayState
(
animationInspector
"
running
"
)
;
ok
(
true
"
Space
key
can
resume
animations
"
)
;
}
