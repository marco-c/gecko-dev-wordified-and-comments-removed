"
use
strict
"
;
add_task
(
async
function
(
)
{
await
addTab
(
URL_ROOT
+
"
doc_negative_animation
.
html
"
)
;
const
{
controller
panel
}
=
await
openAnimationInspector
(
)
;
const
timeline
=
panel
.
animationsTimelineComponent
;
const
areTracksReady
=
(
)
=
>
timeline
.
animations
.
every
(
a
=
>
{
return
timeline
.
componentsMap
[
a
.
actorID
]
;
}
)
;
while
(
controller
.
animationPlayers
.
length
<
3
|
|
!
areTracksReady
(
)
)
{
await
waitForAnimationTimelineRendering
(
panel
)
;
}
await
waitForAllAnimationTargets
(
panel
)
;
is
(
panel
.
animationsTimelineComponent
.
animations
.
length
3
"
The
timeline
shows
3
animations
too
"
)
;
const
nodeFronts
=
new
Set
(
getAnimationTargetNodes
(
panel
)
.
map
(
n
=
>
n
.
previewer
.
nodeFront
)
)
;
is
(
nodeFronts
.
size
3
"
The
animations
are
applied
to
3
different
node
fronts
"
)
;
}
)
;
