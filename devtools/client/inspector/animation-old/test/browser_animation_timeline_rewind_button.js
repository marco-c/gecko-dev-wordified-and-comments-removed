"
use
strict
"
;
requestLongerTimeout
(
2
)
;
add_task
(
async
function
(
)
{
await
addTab
(
URL_ROOT
+
"
doc_simple_animation
.
html
"
)
;
let
{
panel
controller
}
=
await
openAnimationInspector
(
)
;
let
players
=
controller
.
animationPlayers
;
let
btn
=
panel
.
rewindTimelineButtonEl
;
ok
(
btn
"
The
rewind
button
exists
"
)
;
info
(
"
Click
on
the
button
to
rewind
all
timeline
animations
"
)
;
await
clickTimelineRewindButton
(
panel
)
;
info
(
"
Check
that
the
scrubber
has
stopped
moving
"
)
;
await
assertScrubberMoving
(
panel
false
)
;
ok
(
players
.
every
(
(
{
state
}
)
=
>
state
.
currentTime
=
=
=
0
)
"
All
animations
'
currentTimes
have
been
set
to
0
"
)
;
ok
(
players
.
every
(
(
{
state
}
)
=
>
state
.
playState
=
=
=
"
paused
"
)
"
All
animations
have
been
paused
"
)
;
info
(
"
Play
the
animations
again
"
)
;
await
clickTimelinePlayPauseButton
(
panel
)
;
info
(
"
And
pause
them
after
a
short
while
"
)
;
await
new
Promise
(
r
=
>
setTimeout
(
r
200
)
)
;
info
(
"
Check
that
rewinding
when
animations
are
paused
works
too
"
)
;
await
clickTimelineRewindButton
(
panel
)
;
info
(
"
Check
that
the
scrubber
has
stopped
moving
"
)
;
await
assertScrubberMoving
(
panel
false
)
;
ok
(
players
.
every
(
(
{
state
}
)
=
>
state
.
currentTime
=
=
=
0
)
"
All
animations
'
currentTimes
have
been
set
to
0
"
)
;
ok
(
players
.
every
(
(
{
state
}
)
=
>
state
.
playState
=
=
=
"
paused
"
)
"
All
animations
have
been
paused
"
)
;
}
)
;
