"
use
strict
"
;
const
TEST_URI
=
URL_ROOT
+
"
doc_browser_fontinspector
.
html
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
inspector
.
fonteditor
.
enabled
"
true
)
;
const
{
inspector
view
}
=
await
openFontInspectorForURL
(
TEST_URI
)
;
const
viewDoc
=
view
.
document
;
const
otherFontsAccordion
=
getOtherFontsAccordion
(
viewDoc
)
;
ok
(
otherFontsAccordion
"
There
'
s
an
accordion
in
the
panel
"
)
;
is
(
otherFontsAccordion
.
textContent
"
Other
fonts
in
page
"
"
It
has
the
right
title
"
)
;
await
expandAccordion
(
otherFontsAccordion
)
;
let
otherFontsEls
=
getOtherFontsEls
(
viewDoc
)
;
is
(
otherFontsEls
.
length
1
"
There
is
one
font
listed
in
the
other
fonts
section
"
)
;
const
name
=
getName
(
otherFontsEls
[
0
]
)
;
ok
(
name
=
=
=
"
Times
New
Roman
"
|
|
name
=
=
=
"
Liberation
Serif
"
"
The
other
font
listed
is
the
right
one
"
)
;
info
(
"
Checking
that
fonts
of
the
current
element
aren
'
t
listed
"
)
;
await
selectNode
(
"
.
bold
-
text
"
inspector
)
;
await
expandOtherFontsAccordion
(
viewDoc
)
;
otherFontsEls
=
getOtherFontsEls
(
viewDoc
)
;
for
(
const
otherFontEl
of
otherFontsEls
)
{
ok
(
!
[
.
.
.
getUsedFontsEls
(
viewDoc
)
]
.
some
(
el
=
>
getName
(
el
)
=
=
=
getName
(
otherFontEl
)
)
"
Other
font
isn
'
t
listed
in
the
main
fonts
section
"
)
;
}
}
)
;
