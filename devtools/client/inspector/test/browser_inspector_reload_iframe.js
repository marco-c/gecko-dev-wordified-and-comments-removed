"
use
strict
"
;
const
IMG_URL
=
URL_ROOT_COM_SSL
+
"
sjs_slow
-
loading
-
image
.
sjs
"
;
const
FRAME_URI
=
"
data
:
text
/
html
;
charset
=
utf
-
8
"
+
encodeURI
(
<
div
id
=
"
in
-
frame
"
>
div
in
the
iframe
<
/
div
>
<
img
src
=
"
{
IMG_URL
}
"
>
<
/
img
>
)
;
const
HTML
=
<
iframe
src
=
"
{
FRAME_URI
}
"
>
<
/
iframe
>
;
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf
-
8
"
+
encodeURI
(
HTML
)
;
add_task
(
async
function
(
)
{
const
{
inspector
}
=
await
openInspectorForURL
(
TEST_URI
)
;
await
selectNodeInFrames
(
[
"
iframe
"
"
#
in
-
frame
"
]
inspector
)
;
const
markupLoaded
=
inspector
.
once
(
"
markuploaded
"
)
;
info
(
"
Reloading
page
.
"
)
;
await
navigateTo
(
TEST_URI
)
;
info
(
"
Waiting
for
markupview
to
load
after
reload
.
"
)
;
await
markupLoaded
;
const
reloadedNodeFront
=
await
getNodeFrontInFrames
(
[
"
iframe
"
"
#
in
-
frame
"
]
inspector
)
;
is
(
inspector
.
selection
.
nodeFront
reloadedNodeFront
"
#
in
-
frame
selected
after
reload
.
"
)
;
}
)
;
