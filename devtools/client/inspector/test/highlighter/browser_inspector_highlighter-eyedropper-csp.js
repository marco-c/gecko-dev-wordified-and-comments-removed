"
use
strict
"
;
const
TEST_URI
=
URL_ROOT
+
"
doc_inspector_csp
.
html
"
;
add_task
(
async
function
(
)
{
const
{
inspector
highlighterTestFront
}
=
await
openInspectorForURL
(
TEST_URI
)
;
const
toggleButton
=
inspector
.
panelDoc
.
querySelector
(
"
#
inspector
-
eyedropper
-
toggle
"
)
;
toggleButton
.
click
(
)
;
await
TestUtils
.
waitForCondition
(
(
)
=
>
highlighterTestFront
.
isEyeDropperVisible
(
)
)
;
ok
(
true
"
Eye
dropper
is
visible
"
)
;
await
checkEyeDropperColorAt
(
highlighterTestFront
5
5
"
#
ff0000
"
"
The
eyedropper
holds
the
expected
color
for
the
top
-
level
element
"
)
;
info
(
"
Hide
the
eyedropper
"
)
;
toggleButton
.
click
(
)
;
await
TestUtils
.
waitForCondition
(
async
(
)
=
>
{
const
visible
=
await
highlighterTestFront
.
isEyeDropperVisible
(
)
;
return
!
visible
;
}
)
;
}
)
;
