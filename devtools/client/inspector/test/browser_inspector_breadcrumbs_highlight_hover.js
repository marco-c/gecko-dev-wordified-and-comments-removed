"
use
strict
"
;
add_task
(
async
function
(
)
{
info
(
"
Loading
the
test
document
and
opening
the
inspector
"
)
;
const
{
inspector
highlighterTestFront
}
=
await
openInspectorForURL
(
"
data
:
text
/
html
;
charset
=
utf
-
8
<
h1
>
foo
<
/
h1
>
<
span
>
bar
<
/
span
>
"
)
;
const
{
waitForHighlighterTypeShown
waitForHighlighterTypeHidden
}
=
getHighlighterTestHelpers
(
inspector
)
;
info
(
"
Selecting
the
test
node
"
)
;
await
selectNode
(
"
span
"
inspector
)
;
const
bcButtons
=
inspector
.
breadcrumbs
.
container
;
let
onNodeHighlighted
=
waitForHighlighterTypeShown
(
inspector
.
highlighters
.
TYPES
.
BOXMODEL
)
;
let
button
=
bcButtons
.
childNodes
[
1
]
;
EventUtils
.
synthesizeMouseAtCenter
(
button
{
type
:
"
mousemove
"
}
button
.
ownerDocument
.
defaultView
)
;
await
onNodeHighlighted
;
let
isVisible
=
await
highlighterTestFront
.
isHighlighting
(
)
;
ok
(
isVisible
"
The
highlighter
is
shown
on
a
markup
container
hover
"
)
;
ok
(
await
highlighterTestFront
.
assertHighlightedNode
(
"
body
"
)
"
The
highlighter
highlights
the
right
node
"
)
;
const
onNodeUnhighlighted
=
waitForHighlighterTypeHidden
(
inspector
.
highlighters
.
TYPES
.
BOXMODEL
)
;
EventUtils
.
synthesizeMouseAtCenter
(
inspector
.
addNodeButton
{
type
:
"
mousemove
"
}
inspector
.
addNodeButton
.
ownerDocument
.
defaultView
)
;
await
onNodeUnhighlighted
;
onNodeHighlighted
=
waitForHighlighterTypeShown
(
inspector
.
highlighters
.
TYPES
.
BOXMODEL
)
;
button
=
bcButtons
.
childNodes
[
2
]
;
EventUtils
.
synthesizeMouseAtCenter
(
button
{
type
:
"
mousemove
"
}
button
.
ownerDocument
.
defaultView
)
;
await
onNodeHighlighted
;
isVisible
=
await
highlighterTestFront
.
isHighlighting
(
)
;
ok
(
isVisible
"
The
highlighter
is
shown
on
a
markup
container
hover
"
)
;
ok
(
await
highlighterTestFront
.
assertHighlightedNode
(
"
span
"
)
"
The
highlighter
highlights
the
right
node
"
)
;
}
)
;
