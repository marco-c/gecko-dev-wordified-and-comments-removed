"
use
strict
"
;
add_task
(
async
function
(
)
{
info
(
"
Switch
to
2
pane
inspector
and
back
to
3
pane
to
test
whether
the
selected
tab
is
used
"
)
;
await
pushPref
(
"
devtools
.
inspector
.
three
-
pane
-
enabled
"
true
)
;
const
{
inspector
}
=
await
openInspectorForURL
(
"
about
:
blank
"
)
;
inspector
.
sidebar
.
select
(
"
changesview
"
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
changesview
"
"
Changes
view
should
be
the
active
sidebar
"
)
;
info
(
"
Click
on
the
toggle
button
to
toggle
OFF
3
pane
inspector
"
)
;
await
toggleSidebar
(
inspector
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
ruleview
"
"
Rules
view
should
be
the
active
sidebar
on
toggle
to
2
pane
"
)
;
info
(
"
Click
on
the
toggle
button
to
toggle
ON
3
pane
inspector
"
)
;
await
toggleSidebar
(
inspector
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
changesview
"
"
Changes
view
should
be
the
active
sidebar
again
"
)
;
}
)
;
add_task
(
async
function
(
)
{
info
(
"
Switch
to
3
pane
to
test
whether
the
selected
pane
is
preserved
"
)
;
await
pushPref
(
"
devtools
.
inspector
.
three
-
pane
-
enabled
"
false
)
;
const
{
inspector
}
=
await
openInspectorForURL
(
"
about
:
blank
"
)
;
inspector
.
sidebar
.
select
(
"
changesview
"
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
changesview
"
"
Changes
view
should
be
the
active
sidebar
"
)
;
info
(
"
Click
on
the
toggle
button
to
toggle
ON
3
pane
inspector
"
)
;
await
toggleSidebar
(
inspector
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
changesview
"
"
Changes
view
should
still
be
the
active
sidebar
"
)
;
}
)
;
add_task
(
async
function
(
)
{
info
(
"
Switch
to
3
pane
to
test
whether
the
selected
pane
is
layout
view
"
)
;
await
pushPref
(
"
devtools
.
inspector
.
three
-
pane
-
enabled
"
false
)
;
const
{
inspector
}
=
await
openInspectorForURL
(
"
about
:
blank
"
)
;
inspector
.
sidebar
.
select
(
"
ruleview
"
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
ruleview
"
"
Rules
view
should
be
the
active
sidebar
in
2
pane
"
)
;
info
(
"
Click
on
the
toggle
button
to
toggle
ON
3
pane
inspector
"
)
;
await
toggleSidebar
(
inspector
)
;
is
(
inspector
.
sidebar
.
getCurrentTabID
(
)
"
layoutview
"
"
Layout
view
should
be
the
active
sidebar
in
3
pane
"
)
;
}
)
;
const
toggleSidebar
=
async
inspector
=
>
{
const
{
panelDoc
:
doc
}
=
inspector
;
const
button
=
doc
.
querySelector
(
"
.
sidebar
-
toggle
"
)
;
const
onRuleViewAdded
=
inspector
.
once
(
"
ruleview
-
added
"
)
;
EventUtils
.
synthesizeMouseAtCenter
(
button
{
}
inspector
.
panelDoc
.
defaultView
)
;
await
onRuleViewAdded
;
}
;
