"
use
strict
"
;
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf
-
8
"
+
"
<
p
>
testing
the
highlighter
goes
away
on
destroy
<
/
p
>
"
;
add_task
(
async
function
(
)
{
const
{
inspector
toolbox
}
=
await
openInspectorForURL
(
TEST_URI
)
;
const
pickerStopped
=
toolbox
.
once
(
"
picker
-
stopped
"
)
;
await
selectNode
(
"
p
"
inspector
)
;
info
(
"
Inspector
displayed
and
ready
starting
the
picker
.
"
)
;
await
startPicker
(
toolbox
)
;
info
(
"
Destroying
the
toolbox
.
"
)
;
await
toolbox
.
destroy
(
)
;
info
(
"
Waiting
for
the
picker
-
stopped
event
that
should
be
fired
when
the
"
+
"
toolbox
is
destroyed
.
"
)
;
await
pickerStopped
;
ok
(
true
"
picker
-
stopped
event
fired
after
switch
tools
so
picker
is
closed
"
)
;
}
)
;
