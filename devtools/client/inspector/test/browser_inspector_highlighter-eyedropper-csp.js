"
use
strict
"
;
const
HIGHLIGHTER_TYPE
=
"
EyeDropper
"
;
const
ID
=
"
eye
-
dropper
-
"
;
const
TEST_URI
=
URL_ROOT
+
"
doc_inspector_csp
.
html
"
;
add_task
(
async
function
(
)
{
const
helper
=
await
openInspectorForURL
(
TEST_URI
)
.
then
(
getHighlighterHelperFor
(
HIGHLIGHTER_TYPE
)
)
;
helper
.
prefix
=
ID
;
const
{
show
hide
finalize
isElementHidden
waitForElementAttributeSet
}
=
helper
;
info
(
"
Try
to
display
the
eyedropper
"
)
;
await
show
(
"
html
"
)
;
const
hidden
=
await
isElementHidden
(
"
root
"
)
;
ok
(
!
hidden
"
The
eyedropper
is
now
shown
"
)
;
info
(
"
Wait
until
the
eyedropper
is
done
taking
a
screenshot
of
the
page
"
)
;
await
waitForElementAttributeSet
(
"
root
"
"
drawn
"
helper
)
;
ok
(
true
"
The
image
data
was
retrieved
successfully
from
the
window
"
)
;
await
hide
(
)
;
finalize
(
)
;
}
)
;
