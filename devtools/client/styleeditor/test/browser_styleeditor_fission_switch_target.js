"
use
strict
"
;
const
PARENT_PROCESS_URI
=
"
about
:
robots
"
;
const
CONTENT_PROCESS_URI
=
TEST_BASE_HTTPS
+
"
simple
.
html
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
target
-
switching
.
enabled
"
true
)
;
info
(
"
Open
a
page
that
runs
in
the
parent
process
"
)
;
const
{
toolbox
ui
}
=
await
openStyleEditorForURL
(
PARENT_PROCESS_URI
)
;
await
waitUntil
(
(
)
=
>
ui
.
editors
.
length
=
=
=
3
)
;
ok
(
true
Three
style
sheets
for
{
PARENT_PROCESS_URI
}
)
;
info
(
"
Navigate
to
a
page
that
runs
in
the
child
process
"
)
;
const
onEditorReady
=
ui
.
editors
[
0
]
.
getSourceEditor
(
)
;
const
onTargetSwitched
=
toolbox
.
once
(
"
switched
-
target
"
)
;
await
navigateToAndWaitForStyleSheets
(
CONTENT_PROCESS_URI
ui
)
;
await
onTargetSwitched
;
await
waitUntil
(
(
)
=
>
ui
.
editors
.
length
=
=
=
2
)
;
ok
(
true
Two
sheets
present
for
{
CONTENT_PROCESS_URI
}
)
;
info
(
"
Wait
until
the
editor
is
ready
"
)
;
await
onEditorReady
;
}
)
;
