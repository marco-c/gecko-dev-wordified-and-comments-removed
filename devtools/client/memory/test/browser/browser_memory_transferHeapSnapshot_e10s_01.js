"
use
strict
"
;
const
TEST_URL
=
"
data
:
text
/
html
<
html
>
<
body
>
<
/
body
>
<
/
html
>
"
;
this
.
test
=
makeMemoryTest
(
TEST_URL
async
function
(
{
tab
panel
}
)
{
const
memoryFront
=
panel
.
panelWin
.
gStore
.
getState
(
)
.
front
;
ok
(
memoryFront
"
Should
get
the
MemoryFront
"
)
;
const
snapshotFilePath
=
await
memoryFront
.
saveHeapSnapshot
(
{
forceCopy
:
true
}
)
;
ok
(
!
!
(
await
OS
.
File
.
stat
(
snapshotFilePath
)
)
"
Should
have
the
heap
snapshot
file
"
)
;
const
snapshot
=
ChromeUtils
.
readHeapSnapshot
(
snapshotFilePath
)
;
ok
(
snapshot
instanceof
HeapSnapshot
"
And
we
should
be
able
to
read
a
HeapSnapshot
instance
from
the
file
"
)
;
}
)
;
