"
use
strict
"
;
const
{
assert
}
=
require
(
"
devtools
/
shared
/
DevToolsUtils
"
)
;
const
{
actions
}
=
require
(
"
.
.
/
constants
"
)
;
const
{
findSelectedSnapshot
}
=
require
(
"
.
.
/
utils
"
)
;
const
refresh
=
require
(
"
.
/
refresh
"
)
;
const
changeView
=
(
exports
.
changeView
=
function
(
view
)
{
return
function
(
dispatch
getState
)
{
dispatch
(
{
type
:
actions
.
CHANGE_VIEW
newViewState
:
view
oldDiffing
:
getState
(
)
.
diffing
oldSelected
:
findSelectedSnapshot
(
getState
(
)
)
}
)
;
}
;
}
)
;
const
popView
=
(
exports
.
popView
=
function
(
)
{
return
function
(
dispatch
getState
)
{
const
{
previous
}
=
getState
(
)
.
view
;
assert
(
previous
)
;
dispatch
(
{
type
:
actions
.
POP_VIEW
previousView
:
previous
}
)
;
}
;
}
)
;
exports
.
changeViewAndRefresh
=
function
(
view
heapWorker
)
{
return
async
function
(
dispatch
getState
)
{
dispatch
(
changeView
(
view
)
)
;
await
dispatch
(
refresh
.
refresh
(
heapWorker
)
)
;
}
;
}
;
exports
.
popViewAndRefresh
=
function
(
heapWorker
)
{
return
async
function
(
dispatch
getState
)
{
dispatch
(
popView
(
)
)
;
await
dispatch
(
refresh
.
refresh
(
heapWorker
)
)
;
}
;
}
;
