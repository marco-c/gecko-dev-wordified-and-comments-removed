const
DevToolsUtils
=
require
(
"
devtools
/
shared
/
DevToolsUtils
"
)
;
const
{
snapshotState
:
states
}
=
require
(
"
.
/
constants
"
)
;
const
SAVING_SNAPSHOT_TEXT
=
"
Saving
snapshot
.
.
.
"
;
const
READING_SNAPSHOT_TEXT
=
"
Reading
snapshot
.
.
.
"
;
const
SAVING_CENSUS_TEXT
=
"
Taking
heap
census
.
.
.
"
;
exports
.
assert
=
function
(
condition
message
)
{
if
(
!
condition
)
{
const
err
=
new
Error
(
"
Assertion
failure
:
"
+
message
)
;
DevToolsUtils
.
reportException
(
"
DevToolsUtils
.
assert
"
err
)
;
throw
err
;
}
}
;
exports
.
getSnapshotStatusText
=
function
(
snapshot
)
{
switch
(
snapshot
&
&
snapshot
.
state
)
{
case
states
.
SAVING
:
return
SAVING_SNAPSHOT_TEXT
;
case
states
.
SAVED
:
case
states
.
READING
:
return
READING_SNAPSHOT_TEXT
;
case
states
.
READ
:
case
states
.
SAVING_CENSUS
:
return
SAVING_CENSUS_TEXT
;
}
return
"
"
;
}
exports
.
getSnapshot
=
function
getSnapshot
(
snapshots
snapshot
)
{
let
found
=
snapshots
.
find
(
s
=
>
s
.
id
=
=
=
snapshot
.
id
)
;
if
(
!
found
)
{
DevToolsUtils
.
reportException
(
No
matching
snapshot
found
for
{
snapshot
.
id
}
)
;
}
return
found
|
|
null
;
}
;
let
INC_ID
=
0
;
exports
.
createSnapshot
=
function
createSnapshot
(
)
{
let
id
=
+
+
INC_ID
;
return
{
id
state
:
states
.
SAVING
census
:
null
path
:
null
}
;
}
;
