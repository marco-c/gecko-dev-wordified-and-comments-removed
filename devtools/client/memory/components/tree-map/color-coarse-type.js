"
use
strict
"
;
const
TYPES
=
[
"
objects
"
"
other
"
"
strings
"
"
scripts
"
"
domNode
"
]
;
const
TYPE_FACTOR
=
TYPES
.
length
*
3
;
const
DEPTH_FACTOR
=
-
10
;
const
H
=
0
.
5
;
const
S
=
0
.
6
;
const
L
=
0
.
9
;
function
findCoarseTypeIndex
(
node
)
{
const
index
=
TYPES
.
indexOf
(
node
.
name
)
;
if
(
node
.
parent
)
{
return
index
=
=
=
-
1
?
findCoarseTypeIndex
(
node
.
parent
)
:
index
;
}
return
TYPES
.
indexOf
(
"
other
"
)
;
}
function
depthColorFactor
(
node
)
{
return
Math
.
min
(
1
node
.
depth
/
DEPTH_FACTOR
)
;
}
function
typeColorFactor
(
node
)
{
return
findCoarseTypeIndex
(
node
)
/
TYPE_FACTOR
;
}
module
.
exports
=
function
colorCoarseType
(
node
)
{
const
h
=
Math
.
min
(
1
H
+
typeColorFactor
(
node
)
)
;
const
s
=
Math
.
min
(
1
S
)
;
const
l
=
Math
.
min
(
1
L
+
depthColorFactor
(
node
)
)
;
return
[
h
s
l
]
;
}
;
