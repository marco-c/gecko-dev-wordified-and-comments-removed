"
use
strict
"
;
const
TEST_JSON_URL
=
URL_ROOT
+
"
valid_json
.
json
"
;
add_task
(
async
function
(
)
{
info
(
"
Test
valid
JSON
started
"
)
;
await
addJsonViewTab
(
TEST_JSON_URL
)
;
await
selectJsonViewContentTab
(
"
headers
"
)
;
let
count
=
await
getElementCount
(
"
.
headersPanelBox
.
netHeadersGroup
"
)
;
is
(
count
2
"
There
must
be
two
header
groups
"
)
;
let
text
=
await
getElementText
(
"
.
headersPanelBox
.
netInfoHeadersTable
"
)
;
isnot
(
text
"
"
"
Headers
text
must
not
be
empty
"
)
;
let
browser
=
gBrowser
.
selectedBrowser
;
await
waitForClipboardPromise
(
function
setup
(
)
{
BrowserTestUtils
.
synthesizeMouseAtCenter
(
"
.
headersPanelBox
.
toolbar
button
.
copy
"
{
}
browser
)
;
}
function
validator
(
value
)
{
return
value
.
indexOf
(
"
application
/
json
"
)
>
0
;
}
)
;
}
)
;
