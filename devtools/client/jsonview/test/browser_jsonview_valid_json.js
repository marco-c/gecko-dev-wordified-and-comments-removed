"
use
strict
"
;
const
TEST_JSON_URL
=
URL_ROOT
+
"
valid_json
.
json
"
;
add_task
(
async
function
(
)
{
info
(
"
Test
valid
JSON
started
"
)
;
const
tab
=
await
addJsonViewTab
(
TEST_JSON_URL
)
;
ok
(
tab
.
linkedBrowser
.
contentPrincipal
.
isNullPrincipal
"
Should
have
null
principal
"
)
;
is
(
await
countRows
(
)
3
"
There
must
be
three
rows
"
)
;
const
objectCellCount
=
await
getElementCount
(
"
.
jsonPanelBox
.
treeTable
.
objectCell
"
)
;
is
(
objectCellCount
1
"
There
must
be
one
object
cell
"
)
;
const
objectCellText
=
await
getElementText
(
"
.
jsonPanelBox
.
treeTable
.
objectCell
"
)
;
is
(
objectCellText
"
"
"
The
summary
is
hidden
when
object
is
expanded
"
)
;
await
clickJsonNode
(
"
.
jsonPanelBox
.
treeTable
.
treeValueCell
"
)
;
is
(
await
countRows
(
)
3
"
There
must
still
be
three
rows
"
)
;
await
clickJsonNode
(
"
.
jsonPanelBox
.
treeTable
.
treeLabel
"
)
;
is
(
await
countRows
(
)
1
"
There
must
be
one
row
"
)
;
await
selectJsonViewContentTab
(
"
headers
"
)
;
await
selectJsonViewContentTab
(
"
json
"
)
;
is
(
await
countRows
(
)
1
"
There
must
still
be
one
row
"
)
;
}
)
;
function
countRows
(
)
{
return
getElementCount
(
"
.
jsonPanelBox
.
treeTable
.
treeRow
"
)
;
}
