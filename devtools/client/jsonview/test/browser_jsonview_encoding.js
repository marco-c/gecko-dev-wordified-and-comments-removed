"
use
strict
"
;
add_task
(
function
*
(
)
{
info
(
"
Test
JSON
encoding
started
"
)
;
const
bom
=
"
%
EF
%
BB
%
BF
"
;
const
tests
=
[
{
input
:
bom
output
:
"
"
}
{
input
:
"
%
FE
%
FF
"
output
:
"
\
uFFFD
\
uFFFD
"
}
{
input
:
"
%
FF
%
FE
"
output
:
"
\
uFFFD
\
uFFFD
"
}
{
input
:
bom
+
"
%
30
"
output
:
"
0
"
}
{
input
:
bom
+
bom
output
:
"
\
uFEFF
"
}
{
input
:
"
%
00
%
61
"
output
:
"
\
u0000a
"
}
{
input
:
"
%
61
%
00
"
output
:
"
a
\
u0000
"
}
{
input
:
"
%
30
%
FF
"
output
:
"
0
\
uFFFD
"
}
{
input
:
"
%
C3
%
A0
"
output
:
"
\
u00E0
"
}
{
input
:
"
%
E2
%
9D
%
A4
"
output
:
"
\
u2764
"
}
{
input
:
"
%
F0
%
9F
%
9A
%
80
"
output
:
"
\
uD83D
\
uDE80
"
}
]
;
for
(
let
{
input
output
}
of
tests
)
{
info
(
"
Test
decoding
of
"
+
JSON
.
stringify
(
input
)
+
"
.
"
)
;
yield
addJsonViewTab
(
"
data
:
application
/
json
"
+
input
)
;
yield
selectJsonViewContentTab
(
"
rawdata
"
)
;
let
data
=
yield
getElementText
(
"
.
textPanelBox
.
data
"
)
;
is
(
data
output
"
The
right
data
has
been
received
.
"
)
;
}
}
)
;
