"
use
strict
"
;
const
React
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
ReactDOM
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
"
)
;
const
{
Provider
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
redux
"
)
;
const
{
combineReducers
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
redux
"
)
;
const
MainFrame
=
React
.
createFactory
(
require
(
"
.
/
components
/
MainFrame
"
)
)
;
const
createStore
=
require
(
"
devtools
/
client
/
shared
/
redux
/
create
-
store
"
)
(
{
log
:
false
}
)
;
const
{
reducers
}
=
require
(
"
.
/
reducers
/
index
"
)
;
const
store
=
createStore
(
combineReducers
(
reducers
)
)
;
function
DomView
(
localStore
)
{
addEventListener
(
"
devtools
/
chrome
/
message
"
this
.
onMessage
.
bind
(
this
)
true
)
;
this
.
store
=
localStore
;
}
DomView
.
prototype
=
{
initialize
:
function
(
rootGrip
)
{
const
content
=
document
.
querySelector
(
"
#
content
"
)
;
const
mainFrame
=
MainFrame
(
{
object
:
rootGrip
}
)
;
const
provider
=
React
.
createElement
(
Provider
{
store
:
this
.
store
}
mainFrame
)
;
this
.
mainFrame
=
ReactDOM
.
render
(
provider
content
)
;
}
onMessage
:
function
(
event
)
{
const
data
=
event
.
data
;
const
method
=
data
.
type
;
if
(
typeof
this
[
method
]
=
=
"
function
"
)
{
this
[
method
]
(
data
.
args
)
;
}
}
}
;
window
.
view
=
new
DomView
(
store
)
;
