"
use
strict
"
;
const
PARENT_PROCESS_URI
=
"
about
:
robots
"
;
const
CONTENT_PROCESS_URI
=
URL_ROOT
+
"
page_basic
.
html
"
;
add_task
(
async
function
(
)
{
info
(
"
Open
a
page
that
runs
in
the
parent
process
"
)
;
const
{
panel
}
=
await
addTestTab
(
PARENT_PROCESS_URI
)
;
let
_aProperty
=
getRowByLabel
(
panel
"
_a
"
)
;
let
buttonProperty
=
getRowByLabel
(
panel
"
button
"
)
;
ok
(
!
_aProperty
"
There
is
no
_a
property
on
the
about
:
robots
page
"
)
;
ok
(
buttonProperty
"
There
is
however
a
button
property
on
this
page
"
)
;
info
(
"
Navigate
to
a
page
that
runs
in
the
content
process
"
)
;
const
toolbox
=
panel
.
getToolbox
(
)
;
const
onPropertiesFetched
=
waitForDispatch
(
panel
"
FETCH_PROPERTIES
"
)
;
const
onTargetSwitched
=
toolbox
.
targetList
.
once
(
"
switched
-
target
"
)
;
await
toolbox
.
target
.
navigateTo
(
{
url
:
CONTENT_PROCESS_URI
}
)
;
await
Promise
.
all
(
[
onPropertiesFetched
onTargetSwitched
]
)
;
_aProperty
=
getRowByLabel
(
panel
"
_a
"
)
;
buttonProperty
=
getRowByLabel
(
panel
"
button
"
)
;
ok
(
_aProperty
"
This
time
the
_a
property
exists
on
this
content
process
page
"
)
;
ok
(
!
buttonProperty
"
There
is
however
no
more
button
property
on
this
page
"
)
;
}
)
;
