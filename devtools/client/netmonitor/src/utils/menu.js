"
use
strict
"
;
const
Menu
=
require
(
"
devtools
/
client
/
framework
/
menu
"
)
;
const
MenuItem
=
require
(
"
devtools
/
client
/
framework
/
menu
-
item
"
)
;
function
showMenu
(
items
options
)
{
if
(
items
.
length
=
=
=
0
)
{
return
;
}
let
menu
=
new
Menu
(
)
;
items
.
forEach
(
(
item
)
=
>
{
let
menuItem
=
new
MenuItem
(
item
)
;
let
subItems
=
item
.
submenu
;
if
(
subItems
)
{
let
subMenu
=
new
Menu
(
)
;
subItems
.
forEach
(
(
subItem
)
=
>
{
subMenu
.
append
(
new
MenuItem
(
subItem
)
)
;
}
)
;
menuItem
.
submenu
=
subMenu
;
}
menu
.
append
(
menuItem
)
;
}
)
;
let
screenX
=
options
.
screenX
;
let
screenY
=
options
.
screenY
;
if
(
options
.
button
)
{
const
button
=
options
.
button
;
const
rect
=
button
.
getBoundingClientRect
(
)
;
const
defaultView
=
button
.
ownerDocument
.
defaultView
;
screenX
=
rect
.
left
+
defaultView
.
mozInnerScreenX
;
screenY
=
rect
.
bottom
+
defaultView
.
mozInnerScreenY
;
}
menu
.
popup
(
screenX
screenY
{
doc
:
window
.
parent
.
document
}
)
;
}
module
.
exports
=
{
showMenu
}
;
