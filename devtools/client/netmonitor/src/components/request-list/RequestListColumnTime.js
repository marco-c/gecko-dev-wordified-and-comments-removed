"
use
strict
"
;
const
{
Component
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
dom
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
PropTypes
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
prop
-
types
"
)
;
const
{
getFormattedTime
}
=
require
(
"
.
.
/
.
.
/
utils
/
format
-
utils
"
)
;
const
{
fetchNetworkUpdatePacket
getResponseTime
getStartTime
getEndTime
}
=
require
(
"
.
.
/
.
.
/
utils
/
request
-
utils
"
)
;
class
RequestListColumnTime
extends
Component
{
static
get
propTypes
(
)
{
return
{
connector
:
PropTypes
.
object
.
isRequired
firstRequestStartedMs
:
PropTypes
.
number
.
isRequired
item
:
PropTypes
.
object
.
isRequired
type
:
PropTypes
.
oneOf
(
[
"
start
"
"
end
"
"
response
"
"
duration
"
"
latency
"
]
)
.
isRequired
}
;
}
componentDidMount
(
)
{
const
{
item
connector
}
=
this
.
props
;
fetchNetworkUpdatePacket
(
connector
.
requestData
item
[
"
eventTimings
"
]
)
;
}
componentWillReceiveProps
(
nextProps
)
{
const
{
item
connector
}
=
nextProps
;
fetchNetworkUpdatePacket
(
connector
.
requestData
item
[
"
eventTimings
"
]
)
;
}
shouldComponentUpdate
(
nextProps
)
{
return
this
.
getTime
(
this
.
props
)
!
=
=
this
.
getTime
(
nextProps
)
;
}
getTime
(
props
)
{
const
{
firstRequestStartedMs
item
type
}
=
props
;
switch
(
type
)
{
case
"
start
"
:
return
getStartTime
(
item
firstRequestStartedMs
)
;
case
"
end
"
:
return
getEndTime
(
item
firstRequestStartedMs
)
;
case
"
response
"
:
return
getResponseTime
(
item
firstRequestStartedMs
)
;
case
"
duration
"
:
return
item
.
totalTime
;
case
"
latency
"
:
return
item
.
eventTimings
?
item
.
eventTimings
.
timings
.
wait
:
undefined
;
}
return
0
;
}
render
(
)
{
const
{
type
}
=
this
.
props
;
const
time
=
getFormattedTime
(
this
.
getTime
(
this
.
props
)
)
;
return
dom
.
td
(
{
className
:
"
requests
-
list
-
column
requests
-
list
-
"
+
type
+
"
-
time
"
title
:
time
}
time
)
;
}
}
module
.
exports
=
RequestListColumnTime
;
