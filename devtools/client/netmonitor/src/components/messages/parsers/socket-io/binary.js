"
use
strict
"
;
exports
.
reconstructPacket
=
function
(
packet
buffers
)
{
packet
.
data
=
_reconstructPacket
(
packet
.
data
buffers
)
;
packet
.
attachments
=
undefined
;
return
packet
;
}
;
function
_reconstructPacket
(
data
buffers
)
{
if
(
!
data
)
{
return
data
;
}
if
(
data
&
&
data
.
_placeholder
)
{
return
buffers
[
data
.
num
]
;
}
else
if
(
Array
.
isArray
(
data
)
)
{
for
(
let
i
=
0
;
i
<
data
.
length
;
i
+
+
)
{
data
[
i
]
=
_reconstructPacket
(
data
[
i
]
buffers
)
;
}
}
else
if
(
typeof
data
=
=
=
"
object
"
)
{
for
(
const
key
in
data
)
{
data
[
key
]
=
_reconstructPacket
(
data
[
key
]
buffers
)
;
}
}
return
data
;
}
