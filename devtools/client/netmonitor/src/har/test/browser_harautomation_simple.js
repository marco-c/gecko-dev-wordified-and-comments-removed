"
use
strict
"
;
const
HAR_FILENAME
=
"
test_filename
.
har
"
;
const
HAR_PATH
=
[
"
har
"
"
logs
"
HAR_FILENAME
]
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
netmonitor
.
har
.
defaultFileName
"
"
test_filename
"
)
;
const
tab
=
await
addTab
(
SIMPLE_URL
)
;
const
target
=
await
TargetFactory
.
forTab
(
tab
)
;
const
toolbox
=
await
gDevTools
.
showToolbox
(
target
"
inspector
"
)
;
tab
.
linkedBrowser
.
reload
(
)
;
info
(
"
Wait
until
the
HAR
file
is
created
in
the
profile
directory
"
)
;
await
waitUntil
(
(
)
=
>
FileUtils
.
getFile
(
"
ProfD
"
HAR_PATH
)
.
exists
(
)
)
;
const
harFile
=
FileUtils
.
getFile
(
"
ProfD
"
HAR_PATH
)
;
ok
(
harFile
.
exists
(
)
"
HAR
file
was
automatically
created
"
)
;
await
toolbox
.
destroy
(
)
;
await
removeTab
(
tab
)
;
}
)
;
