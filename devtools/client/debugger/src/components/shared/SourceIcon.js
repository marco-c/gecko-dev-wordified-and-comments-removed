import
React
{
PureComponent
}
from
"
react
"
;
import
PropTypes
from
"
prop
-
types
"
;
import
{
connect
}
from
"
.
.
/
.
.
/
utils
/
connect
"
;
import
AccessibleImage
from
"
.
/
AccessibleImage
"
;
import
{
getSourceClassnames
isPretty
}
from
"
.
.
/
.
.
/
utils
/
source
"
;
import
{
getFramework
}
from
"
.
.
/
.
.
/
utils
/
tabs
"
;
import
{
getSymbols
getTabs
isSourceBlackBoxed
}
from
"
.
.
/
.
.
/
selectors
"
;
import
"
.
/
SourceIcon
.
css
"
;
class
SourceIcon
extends
PureComponent
{
static
get
propTypes
(
)
{
return
{
framework
:
PropTypes
.
string
.
isRequired
modifier
:
PropTypes
.
func
.
isRequired
source
:
PropTypes
.
object
.
isRequired
symbols
:
PropTypes
.
object
}
;
}
render
(
)
{
const
{
modifier
source
symbols
framework
isBlackBoxed
}
=
this
.
props
;
let
iconClass
=
"
"
;
if
(
isPretty
(
source
)
)
{
iconClass
=
"
prettyPrint
"
;
}
else
{
iconClass
=
framework
?
framework
.
toLowerCase
(
)
:
getSourceClassnames
(
source
symbols
isBlackBoxed
)
;
}
if
(
modifier
)
{
const
modified
=
modifier
(
iconClass
)
;
if
(
!
modified
)
{
return
null
;
}
iconClass
=
modified
;
}
return
<
AccessibleImage
className
=
{
source
-
icon
{
iconClass
}
}
/
>
;
}
}
export
default
connect
(
(
state
props
)
=
>
(
{
symbols
:
getSymbols
(
state
props
.
source
)
isBlackBoxed
:
props
.
source
?
isSourceBlackBoxed
(
state
props
.
source
)
:
null
framework
:
getFramework
(
getTabs
(
state
)
props
.
source
.
url
)
}
)
)
(
SourceIcon
)
;
