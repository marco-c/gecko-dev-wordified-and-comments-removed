import
React
{
PureComponent
}
from
"
react
"
;
import
PropTypes
from
"
prop
-
types
"
;
import
{
connect
}
from
"
.
.
/
.
.
/
utils
/
connect
"
;
import
AccessibleImage
from
"
.
/
AccessibleImage
"
;
import
{
getSourceClassnames
}
from
"
.
.
/
.
.
/
utils
/
source
"
;
import
{
getSymbols
isSourceBlackBoxed
hasPrettyTab
}
from
"
.
.
/
.
.
/
selectors
"
;
import
"
.
/
SourceIcon
.
css
"
;
class
SourceIcon
extends
PureComponent
{
static
get
propTypes
(
)
{
return
{
modifier
:
PropTypes
.
func
.
isRequired
location
:
PropTypes
.
object
.
isRequired
iconClass
:
PropTypes
.
string
forTab
:
PropTypes
.
bool
}
;
}
render
(
)
{
const
{
modifier
}
=
this
.
props
;
let
{
iconClass
}
=
this
.
props
;
if
(
modifier
)
{
const
modified
=
modifier
(
iconClass
)
;
if
(
!
modified
)
{
return
null
;
}
iconClass
=
modified
;
}
return
<
AccessibleImage
className
=
{
source
-
icon
{
iconClass
}
}
/
>
;
}
}
export
default
connect
(
(
state
props
)
=
>
{
const
{
forTab
location
}
=
props
;
if
(
!
location
.
source
.
isOriginal
&
&
!
location
.
sourceActor
)
{
return
"
file
"
;
}
const
symbols
=
getSymbols
(
state
location
)
;
const
isBlackBoxed
=
isSourceBlackBoxed
(
state
location
.
source
)
;
const
hasMatchingPrettyTab
=
!
forTab
&
&
hasPrettyTab
(
state
location
.
source
.
url
)
;
const
iconClass
=
getSourceClassnames
(
location
.
source
symbols
isBlackBoxed
hasMatchingPrettyTab
)
;
return
{
iconClass
}
;
}
)
(
SourceIcon
)
;
