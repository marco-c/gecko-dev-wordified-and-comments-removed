import
{
createStore
applyMiddleware
}
from
"
redux
"
;
import
{
waitUntilService
}
from
"
.
/
middleware
/
wait
-
service
"
;
import
{
log
}
from
"
.
/
middleware
/
log
"
;
import
{
promise
}
from
"
.
/
middleware
/
promise
"
;
import
{
thunk
}
from
"
.
/
middleware
/
thunk
"
;
import
{
timing
}
from
"
.
/
middleware
/
timing
"
;
import
{
context
}
from
"
.
/
middleware
/
context
"
;
const
configureStore
=
(
opts
=
{
}
)
=
>
{
const
middleware
=
[
thunk
(
opts
.
makeThunkArgs
)
context
promise
waitUntilService
]
;
if
(
opts
.
middleware
)
{
opts
.
middleware
.
forEach
(
fn
=
>
middleware
.
push
(
fn
)
)
;
}
if
(
opts
.
log
)
{
middleware
.
push
(
log
)
;
}
if
(
opts
.
timing
)
{
middleware
.
push
(
timing
)
;
}
const
devtoolsExt
=
typeof
window
=
=
=
"
object
"
&
&
window
.
devToolsExtension
?
window
.
devToolsExtension
(
)
:
f
=
>
f
;
return
applyMiddleware
(
.
.
.
middleware
)
(
devtoolsExt
(
createStore
)
)
;
}
;
export
default
configureStore
;
