import
{
getSelectedSource
getSelectedFrame
getClosestBreakpointPosition
getBreakpoint
getCurrentThread
}
from
"
.
.
/
.
.
/
selectors
"
;
import
{
createLocation
}
from
"
.
.
/
.
.
/
utils
/
location
"
;
import
{
addHiddenBreakpoint
}
from
"
.
.
/
breakpoints
"
;
import
{
setBreakpointPositions
}
from
"
.
.
/
breakpoints
/
breakpointPositions
"
;
import
{
resume
}
from
"
.
/
commands
"
;
export
function
continueToHere
(
location
)
{
return
async
function
(
{
dispatch
getState
}
)
{
const
{
line
column
}
=
location
;
const
thread
=
getCurrentThread
(
getState
(
)
)
;
const
selectedSource
=
getSelectedSource
(
getState
(
)
)
;
const
selectedFrame
=
getSelectedFrame
(
getState
(
)
thread
)
;
if
(
!
selectedFrame
|
|
!
selectedSource
)
{
return
;
}
const
debugLine
=
selectedFrame
.
location
.
line
;
if
(
!
column
&
&
debugLine
=
=
line
)
{
return
;
}
await
dispatch
(
setBreakpointPositions
(
location
)
)
;
const
position
=
getClosestBreakpointPosition
(
getState
(
)
location
)
;
if
(
column
&
&
!
position
)
{
return
;
}
const
pauseLocation
=
column
&
&
position
?
position
.
location
:
location
;
if
(
!
getBreakpoint
(
getState
(
)
pauseLocation
)
)
{
await
dispatch
(
addHiddenBreakpoint
(
createLocation
(
{
source
:
selectedSource
line
:
pauseLocation
.
line
column
:
pauseLocation
.
column
}
)
)
)
;
}
dispatch
(
resume
(
)
)
;
}
;
}
