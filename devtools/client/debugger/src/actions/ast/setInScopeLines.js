import
{
hasInScopeLines
getSourceTextContentForLocation
getVisibleSelectedFrame
}
from
"
.
.
/
.
.
/
selectors
/
index
"
;
import
{
isFulfilled
}
from
"
.
.
/
.
.
/
utils
/
async
-
value
"
;
export
function
setInScopeLines
(
editor
)
{
return
async
thunkArgs
=
>
{
const
{
getState
dispatch
}
=
thunkArgs
;
const
visibleFrame
=
getVisibleSelectedFrame
(
getState
(
)
)
;
if
(
!
visibleFrame
)
{
return
;
}
const
{
location
}
=
visibleFrame
;
const
sourceTextContent
=
getSourceTextContentForLocation
(
getState
(
)
location
)
;
if
(
hasInScopeLines
(
getState
(
)
location
)
|
|
!
sourceTextContent
|
|
!
isFulfilled
(
sourceTextContent
)
|
|
!
editor
)
{
return
;
}
const
lines
=
await
editor
.
getInScopeLines
(
location
)
;
dispatch
(
{
type
:
"
IN_SCOPE_LINES
"
location
lines
}
)
;
}
;
}
