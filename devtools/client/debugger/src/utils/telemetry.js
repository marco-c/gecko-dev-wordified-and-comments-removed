import
{
isNode
}
from
"
.
/
environment
"
;
let
telemetry
;
if
(
isNode
(
)
)
{
const
Telemetry
=
require
(
"
devtools
/
client
/
shared
/
telemetry
"
)
;
telemetry
=
new
Telemetry
(
)
;
}
export
function
setToolboxTelemetry
(
toolboxTelemetry
)
{
telemetry
=
toolboxTelemetry
;
}
export
function
recordEvent
(
eventName
fields
=
{
}
)
{
telemetry
.
recordEvent
(
eventName
"
debugger
"
null
fields
)
;
if
(
isNode
(
)
)
{
const
{
events
}
=
window
.
dbg
.
_telemetry
;
if
(
!
events
[
eventName
]
)
{
events
[
eventName
]
=
[
]
;
}
events
[
eventName
]
.
push
(
fields
)
;
}
}
