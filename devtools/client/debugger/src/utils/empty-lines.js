import
{
xor
range
}
from
"
lodash
"
;
import
{
getSelectedLocation
}
from
"
.
/
source
-
maps
"
;
import
type
{
BreakpointPositions
Source
}
from
"
.
.
/
types
"
;
export
function
findEmptyLines
(
source
:
Source
breakpointPositions
:
BreakpointPositions
)
:
number
[
]
{
if
(
!
breakpointPositions
|
|
source
.
isWasm
)
{
return
[
]
;
}
const
sourceText
=
source
.
text
|
|
"
"
;
const
lineCount
=
sourceText
.
split
(
"
\
n
"
)
.
length
;
const
sourceLines
=
range
(
1
lineCount
+
1
)
;
const
breakpointLines
=
breakpointPositions
.
map
(
point
=
>
getSelectedLocation
(
point
source
)
.
line
)
.
filter
(
line
=
>
line
<
=
lineCount
)
;
return
xor
(
sourceLines
breakpointLines
)
;
}
