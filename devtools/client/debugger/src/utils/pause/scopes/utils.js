import
type
{
Why
}
from
"
.
.
/
.
.
/
.
.
/
types
"
;
import
type
{
NamedValue
}
from
"
.
/
types
"
;
export
function
getFramePopVariables
(
why
:
Why
path
:
string
)
:
NamedValue
[
]
{
const
vars
:
Array
<
NamedValue
>
=
[
]
;
if
(
why
&
&
why
.
frameFinished
)
{
const
{
frameFinished
}
=
why
;
/
/
Always
display
a
throw
property
if
present
even
if
it
is
falsy
.
if
(
Object
.
prototype
.
hasOwnProperty
.
call
(
frameFinished
"
throw
"
)
)
{
vars
.
push
(
{
name
:
"
<
exception
>
"
path
:
{
path
}
/
<
exception
>
contents
:
{
value
:
frameFinished
.
throw
}
}
)
;
}
if
(
Object
.
prototype
.
hasOwnProperty
.
call
(
frameFinished
"
return
"
)
)
{
const
returned
=
frameFinished
.
return
;
if
(
typeof
returned
!
=
=
"
object
"
|
|
returned
.
type
!
=
=
"
undefined
"
)
{
vars
.
push
(
{
name
:
"
<
return
>
"
path
:
{
path
}
/
<
return
>
contents
:
{
value
:
returned
}
}
)
;
}
}
}
return
vars
;
}
export
function
getThisVariable
(
this_
:
any
path
:
string
)
:
?
NamedValue
{
if
(
!
this_
)
{
return
null
;
}
return
{
name
:
"
<
this
>
"
path
:
{
path
}
/
<
this
>
contents
:
{
value
:
this_
}
}
;
}
export
function
getScopeItemPath
(
item
:
Object
)
:
string
{
return
item
.
path
.
toString
(
)
;
}
