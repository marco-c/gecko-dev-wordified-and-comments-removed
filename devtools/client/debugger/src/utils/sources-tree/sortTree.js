import
{
nodeHasChildren
isExactUrlMatch
}
from
"
.
/
utils
"
;
import
type
{
TreeDirectory
}
from
"
.
/
types
"
;
import
type
{
URL
}
from
"
.
.
/
.
.
/
types
"
;
export
function
sortTree
(
tree
:
TreeDirectory
debuggeeUrl
:
URL
=
"
"
)
:
number
{
return
(
tree
.
contents
:
any
)
.
sort
(
(
previousNode
currentNode
)
=
>
{
const
currentNodeIsDir
=
nodeHasChildren
(
currentNode
)
;
const
previousNodeIsDir
=
nodeHasChildren
(
previousNode
)
;
if
(
currentNode
.
name
=
=
=
"
(
index
)
"
)
{
return
1
;
}
else
if
(
previousNode
.
name
=
=
=
"
(
index
)
"
)
{
return
-
1
;
}
else
if
(
isExactUrlMatch
(
currentNode
.
name
debuggeeUrl
)
)
{
return
1
;
}
else
if
(
isExactUrlMatch
(
previousNode
.
name
debuggeeUrl
)
)
{
return
-
1
;
}
else
if
(
previousNodeIsDir
&
&
!
currentNodeIsDir
)
{
return
-
1
;
}
else
if
(
!
previousNodeIsDir
&
&
currentNodeIsDir
)
{
return
1
;
}
return
previousNode
.
name
.
localeCompare
(
currentNode
.
name
)
;
}
)
;
}
