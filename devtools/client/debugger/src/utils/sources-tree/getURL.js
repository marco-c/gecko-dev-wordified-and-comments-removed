import
{
parse
}
from
"
.
.
/
url
"
;
const
{
getUnicodeHostname
getUnicodeUrlPath
}
=
require
(
"
resource
:
/
/
devtools
/
client
/
shared
/
unicode
-
url
.
js
"
)
;
export
function
getFilenameFromPath
(
pathname
)
{
let
filename
=
"
"
;
if
(
pathname
)
{
filename
=
pathname
.
substring
(
pathname
.
lastIndexOf
(
"
/
"
)
+
1
)
;
if
(
filename
=
=
"
"
)
{
filename
=
"
(
index
)
"
;
}
else
if
(
filename
=
=
"
:
formatted
"
)
{
filename
=
"
(
index
:
formatted
)
"
;
}
}
return
filename
;
}
function
getFileExtension
(
path
)
{
if
(
!
path
)
{
return
"
"
;
}
const
lastIndex
=
path
.
lastIndexOf
(
"
.
"
)
;
return
lastIndex
!
=
=
-
1
?
path
.
slice
(
lastIndex
+
1
)
.
toLowerCase
(
)
:
"
"
;
}
const
bundlerGroups
=
{
"
webpack
:
"
:
"
Webpack
"
"
ng
:
"
:
"
Angular
"
"
turbopack
:
"
:
"
Turbopack
"
}
;
const
NoDomain
=
"
(
no
domain
)
"
;
const
def
=
{
path
:
"
"
search
:
"
"
group
:
"
"
filename
:
"
"
fileExtension
:
"
"
}
;
export
function
getDisplayURL
(
url
extensionName
=
null
)
{
if
(
!
url
)
{
return
def
;
}
let
{
pathname
search
protocol
host
origin
}
=
parse
(
url
)
;
pathname
=
getUnicodeUrlPath
(
pathname
)
;
search
=
getUnicodeUrlPath
(
search
)
;
host
=
getUnicodeHostname
(
host
)
;
const
filename
=
getFilenameFromPath
(
pathname
)
;
switch
(
protocol
)
{
case
"
javascript
:
"
:
return
def
;
case
"
moz
-
extension
:
"
:
return
{
.
.
.
def
path
:
pathname
search
filename
fileExtension
:
getFileExtension
(
pathname
)
group
:
extensionName
|
|
{
protocol
}
/
/
{
host
}
origin
:
{
protocol
}
/
/
{
host
}
}
;
case
"
resource
:
"
:
return
{
.
.
.
def
path
:
pathname
search
filename
fileExtension
:
getFileExtension
(
pathname
)
group
:
{
protocol
}
/
/
{
host
|
|
"
"
}
origin
:
{
protocol
}
/
/
{
host
|
|
"
"
}
}
;
case
"
about
:
"
:
return
{
.
.
.
def
path
:
"
/
"
search
filename
fileExtension
:
getFileExtension
(
"
/
"
)
group
:
getUnicodeUrlPath
(
url
)
origin
:
getUnicodeUrlPath
(
url
)
}
;
case
"
data
:
"
:
return
{
.
.
.
def
path
:
"
/
"
search
filename
:
url
fileExtension
:
getFileExtension
(
"
/
"
)
group
:
NoDomain
origin
:
protocol
}
;
case
"
"
:
if
(
pathname
&
&
pathname
.
startsWith
(
"
/
"
)
)
{
return
{
.
.
.
def
path
:
pathname
search
filename
fileExtension
:
getFileExtension
(
pathname
)
group
:
"
file
:
/
/
"
origin
:
"
file
:
/
/
"
}
;
}
else
if
(
!
host
)
{
return
{
.
.
.
def
path
:
pathname
search
filename
fileExtension
:
getFileExtension
(
pathname
)
group
:
"
"
origin
:
"
"
}
;
}
break
;
case
"
http
:
"
:
case
"
https
:
"
:
return
{
.
.
.
def
path
:
pathname
search
filename
fileExtension
:
getFileExtension
(
pathname
)
group
:
host
origin
}
;
}
return
{
.
.
.
def
path
:
host
+
pathname
search
fileExtension
:
getFileExtension
(
pathname
)
filename
:
filename
?
filename
:
host
group
:
protocol
?
bundlerGroups
[
protocol
]
|
|
{
protocol
}
/
/
:
"
"
origin
:
origin
&
&
origin
!
=
=
"
null
"
?
origin
:
{
protocol
}
/
/
{
host
|
|
"
"
}
}
;
}
