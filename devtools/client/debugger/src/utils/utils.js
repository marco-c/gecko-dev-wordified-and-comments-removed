import
type
{
SourceContent
}
from
"
.
.
/
types
"
;
import
{
DevToolsUtils
}
from
"
devtools
-
modules
"
;
export
function
handleError
(
err
:
any
)
{
console
.
log
(
"
ERROR
:
"
err
)
;
}
export
function
promisify
(
context
:
any
method
:
any
.
.
.
args
:
any
)
:
Promise
<
mixed
>
{
return
new
Promise
(
(
resolve
reject
)
=
>
{
args
.
push
(
response
=
>
{
if
(
response
.
error
)
{
reject
(
response
)
;
}
else
{
resolve
(
response
)
;
}
}
)
;
method
.
apply
(
context
args
)
;
}
)
;
}
export
function
endTruncateStr
(
str
:
any
size
:
number
)
{
if
(
str
.
length
>
size
)
{
return
{
str
.
slice
(
str
.
length
-
size
)
}
;
}
return
str
;
}
export
function
waitForMs
(
ms
:
number
)
:
Promise
<
void
>
{
return
new
Promise
(
resolve
=
>
setTimeout
(
resolve
ms
)
)
;
}
export
function
downloadFile
(
content
:
SourceContent
fileName
:
string
)
{
if
(
content
.
type
!
=
=
"
text
"
)
{
return
;
}
const
data
=
new
TextEncoder
(
)
.
encode
(
content
.
value
)
;
DevToolsUtils
.
saveAs
(
window
data
fileName
)
;
}
