import
type
{
SourceTreeAction
}
from
"
.
.
/
actions
/
types
"
;
export
type
SourceTreeState
=
{
expanded
:
{
[
string
]
:
Set
<
string
>
}
}
;
export
function
InitialState
(
)
:
SourceTreeState
{
return
{
expanded
:
{
}
}
;
}
export
default
function
update
(
state
:
SourceTreeState
=
InitialState
(
)
action
:
SourceTreeAction
)
:
SourceTreeState
{
switch
(
action
.
type
)
{
case
"
SET_EXPANDED_STATE
"
:
return
updateExpanded
(
state
action
)
;
}
return
state
;
}
function
updateExpanded
(
state
action
)
{
return
{
.
.
.
state
expanded
:
{
.
.
.
state
.
expanded
[
action
.
thread
]
:
new
Set
(
action
.
expanded
)
}
}
;
}
type
OuterState
=
{
sourceTree
:
SourceTreeState
}
;
export
function
getExpandedState
(
state
:
OuterState
thread
:
string
)
{
return
state
.
sourceTree
.
expanded
[
thread
]
;
}
