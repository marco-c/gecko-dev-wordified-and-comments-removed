"
use
strict
"
;
const
punycode
=
require
(
"
punycode
"
)
;
function
getUnicodeHostname
(
hostname
)
{
try
{
return
punycode
.
toUnicode
(
hostname
)
;
}
catch
(
err
)
{
}
return
hostname
;
}
function
getUnicodeUrlPath
(
urlPath
)
{
try
{
return
decodeURIComponent
(
urlPath
)
;
}
catch
(
err
)
{
}
return
urlPath
;
}
function
getUnicodeUrl
(
url
)
{
try
{
const
{
protocol
hostname
}
=
new
URL
(
url
)
;
if
(
protocol
=
=
=
"
data
:
"
)
{
return
url
;
}
const
readableHostname
=
getUnicodeHostname
(
hostname
)
;
url
=
decodeURIComponent
(
url
)
;
return
url
.
replace
(
hostname
readableHostname
)
;
}
catch
(
err
)
{
}
return
url
;
}
module
.
exports
=
{
getUnicodeHostname
getUnicodeUrlPath
getUnicodeUrl
}
;
