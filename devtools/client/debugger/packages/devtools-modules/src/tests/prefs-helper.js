const
{
PrefsHelper
}
=
require
(
"
.
.
/
prefs
"
)
;
const
Services
=
require
(
"
devtools
-
services
"
)
;
const
pref
=
Services
.
pref
;
describe
(
"
prefs
helper
"
(
)
=
>
{
beforeEach
(
(
)
=
>
{
}
)
;
afterEach
(
(
)
=
>
{
localStorage
.
clear
(
)
;
}
)
;
it
(
"
supports
fallback
values
"
(
)
=
>
{
pref
(
"
devtools
.
valid
"
"
{
\
"
valid
\
"
:
true
}
"
)
;
pref
(
"
devtools
.
invalid
"
"
{
not
valid
at
all
]
"
)
;
pref
(
"
devtools
.
nodefault
"
"
{
not
valid
at
all
]
"
)
;
pref
(
"
devtools
.
validnodefault
"
"
{
\
"
nodefault
\
"
:
true
}
"
)
;
const
prefs
=
new
PrefsHelper
(
"
devtools
"
{
valid
:
[
"
Json
"
"
valid
"
{
valid
:
true
}
]
invalid
:
[
"
Json
"
"
invalid
"
{
}
]
nodefault
:
[
"
Json
"
"
nodefault
"
]
validnodefault
:
[
"
Json
"
"
validnodefault
"
]
}
)
;
expect
(
prefs
.
valid
)
.
toEqual
(
{
valid
:
true
}
)
;
expect
(
prefs
.
invalid
)
.
toEqual
(
{
}
)
;
expect
(
(
)
=
>
prefs
.
nodefault
)
.
toThrow
(
)
;
expect
(
prefs
.
validnodefault
)
.
toEqual
(
{
nodefault
:
true
}
)
;
}
)
;
}
)
;
