const
{
SourceMapConsumer
}
=
require
(
"
source
-
map
"
)
;
let
root
;
function
setAssetRootURL
(
assetRoot
:
string
)
:
void
{
root
=
assetRoot
.
replace
(
/
\
/
/
"
"
)
;
SourceMapConsumer
.
initialize
(
{
"
lib
/
mappings
.
wasm
"
:
{
root
}
/
source
-
map
-
mappings
.
wasm
}
)
;
}
async
function
getDwarfToWasmData
(
name
:
string
)
:
Promise
<
ArrayBuffer
>
{
if
(
!
root
)
{
throw
new
Error
(
No
wasm
path
-
Unable
to
resolve
{
name
}
)
;
}
const
response
=
await
fetch
(
{
root
}
/
dwarf_to_json
.
wasm
)
;
return
response
.
arrayBuffer
(
)
;
}
module
.
exports
=
{
setAssetRootURL
getDwarfToWasmData
}
;
