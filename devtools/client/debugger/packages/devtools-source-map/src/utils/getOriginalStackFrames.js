import
type
{
OriginalFrame
SourceLocation
}
from
"
debugger
-
html
"
;
const
{
getWasmXScopes
}
=
require
(
"
devtools
-
wasm
-
dwarf
"
)
;
const
{
getSourceMap
}
=
require
(
"
.
/
sourceMapRequests
"
)
;
const
{
generatedToOriginalId
}
=
require
(
"
.
/
index
"
)
;
async
function
getOriginalStackFrames
(
generatedLocation
:
SourceLocation
)
:
Promise
<
?
Array
<
OriginalFrame
>
>
{
const
wasmXScopes
=
await
getWasmXScopes
(
generatedLocation
.
sourceId
{
getSourceMap
generatedToOriginalId
}
)
;
if
(
!
wasmXScopes
)
{
return
null
;
}
const
scopes
=
wasmXScopes
.
search
(
generatedLocation
)
;
if
(
scopes
.
length
=
=
=
0
)
{
console
.
warn
(
"
Something
wrong
with
debug
data
:
none
original
frames
found
"
)
;
return
null
;
}
return
scopes
;
}
module
.
exports
=
{
getOriginalStackFrames
}
;
