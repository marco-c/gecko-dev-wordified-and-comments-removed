add_task
(
async
function
(
)
{
await
addTab
(
EXAMPLE_URL
+
"
different_html
.
sjs
"
)
;
const
cacheStorageSrv
=
SpecialPowers
.
Cc
[
"
mozilla
.
org
/
netwerk
/
cache
-
storage
-
service
;
1
"
]
.
getService
(
Ci
.
nsICacheStorageService
)
;
cacheStorageSrv
.
clear
(
)
;
const
toolbox
=
await
openToolboxForTab
(
gBrowser
.
selectedTab
"
jsdebugger
"
)
;
const
dbg
=
createDebuggerContext
(
toolbox
)
;
await
selectSource
(
dbg
"
different_html
.
sjs
"
)
;
await
waitForLoadedSource
(
dbg
"
different_html
.
sjs
"
)
;
const
contents
=
findSourceContent
(
dbg
"
different_html
.
sjs
"
)
;
ok
(
contents
.
value
.
includes
(
"
Incorrect
contents
fetched
"
)
"
Error
message
is
shown
"
)
;
}
)
;
