const
TAB_URL
=
EXAMPLE_URL
+
"
doc_breakpoints
-
reload
.
html
"
;
var
test
=
Task
.
async
(
function
*
(
)
{
requestLongerTimeout
(
4
)
;
const
options
=
{
source
:
TAB_URL
line
:
1
}
;
const
[
tab
panel
]
=
yield
initDebugger
(
TAB_URL
options
)
;
const
actions
=
bindActionCreators
(
panel
)
;
const
sources
=
panel
.
panelWin
.
DebuggerView
.
Sources
;
yield
actions
.
addBreakpoint
(
{
actor
:
sources
.
selectedValue
line
:
10
}
)
;
const
paused
=
waitForThreadEvents
(
panel
"
paused
"
)
;
yield
reloadActiveTab
(
panel
panel
.
panelWin
.
EVENTS
.
SOURCE_SHOWN
)
;
const
packet
=
yield
paused
;
is
(
packet
.
why
.
type
"
breakpoint
"
"
Should
have
hit
the
breakpoint
after
the
reload
"
)
;
is
(
packet
.
frame
.
where
.
line
10
"
Should
have
stopped
at
line
10
where
we
set
the
breakpoint
"
)
;
yield
resumeDebuggerThenCloseAndFinish
(
panel
)
;
}
)
;
