const
TAB_URL
=
EXAMPLE_URL
+
"
doc_pretty
-
print
.
html
"
;
function
test
(
)
{
let
options
=
{
source
:
EXAMPLE_URL
+
"
code_ugly
.
js
"
line
:
2
}
;
initDebugger
(
TAB_URL
options
)
.
then
(
(
[
aTab
aPanel
]
)
=
>
{
const
gTab
=
aTab
;
const
gPanel
=
aPanel
;
const
gDebugger
=
gPanel
.
panelWin
;
Task
.
spawn
(
function
*
(
)
{
yield
doResume
(
gPanel
)
;
const
paused
=
waitForPause
(
gDebugger
.
gThreadClient
)
;
callInTab
(
gTab
"
foo
"
)
;
yield
paused
;
const
finished
=
promise
.
all
(
[
waitForSourceShown
(
gPanel
"
code_ugly
.
js
"
)
waitForCaretUpdated
(
gPanel
7
)
]
)
;
gDebugger
.
document
.
getElementById
(
"
pretty
-
print
"
)
.
click
(
)
;
yield
finished
;
resumeDebuggerThenCloseAndFinish
(
gPanel
)
;
}
)
;
}
)
;
}
