const
ADDON_ID
=
"
jid1
-
ami3akps3baaeg
jetpack
"
;
const
ADDON_PATH
=
"
addon3
.
xpi
"
;
var
gAddon
gClient
gThreadClient
gDebugger
gSources
;
var
PREFS
=
[
[
"
devtools
.
canvasdebugger
.
enabled
"
true
]
[
"
devtools
.
shadereditor
.
enabled
"
true
]
[
"
devtools
.
performance
.
enabled
"
true
]
[
"
devtools
.
netmonitor
.
enabled
"
true
]
[
"
devtools
.
scratchpad
.
enabled
"
true
]
]
;
function
test
(
)
{
Task
.
spawn
(
function
*
(
)
{
yield
pushPrefs
(
.
.
.
PREFS
)
;
let
addon
=
yield
addTemporaryAddon
(
ADDON_PATH
)
;
let
addonDebugger
=
yield
initAddonDebugger
(
ADDON_ID
)
;
let
tabs
=
addonDebugger
.
frame
.
contentDocument
.
querySelectorAll
(
"
.
toolbox
-
tabs
button
"
)
let
expectedTabs
=
[
"
webconsole
"
"
jsdebugger
"
"
scratchpad
"
]
;
is
(
tabs
.
length
expectedTabs
.
length
"
displaying
only
"
+
expectedTabs
.
length
+
"
tabs
in
addon
debugger
"
)
;
Array
.
forEach
(
tabs
(
tab
i
)
=
>
{
let
toolName
=
expectedTabs
[
i
]
;
is
(
tab
.
getAttribute
(
"
data
-
id
"
)
toolName
"
displaying
"
+
toolName
)
;
}
)
;
let
buttons
=
addonDebugger
.
frame
.
contentDocument
.
querySelectorAll
(
"
#
toolbox
-
buttons
-
end
button
"
)
;
is
(
buttons
.
length
0
"
no
toolbox
buttons
for
the
addon
debugger
"
)
;
yield
addonDebugger
.
destroy
(
)
;
yield
removeAddon
(
addon
)
;
finish
(
)
;
}
)
;
}
