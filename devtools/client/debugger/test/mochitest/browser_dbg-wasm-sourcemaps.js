requestLongerTimeout
(
2
)
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebugger
(
"
doc
-
wasm
-
sourcemaps
.
html
"
)
;
await
reload
(
dbg
)
;
await
waitForPaused
(
dbg
)
;
await
resume
(
dbg
)
;
await
waitForSources
(
dbg
"
doc
-
wasm
-
sourcemaps
.
html
"
"
fib
.
c
"
)
;
ok
(
true
"
Original
sources
exist
"
)
;
await
selectSource
(
dbg
"
fib
.
c
"
)
;
await
addBreakpoint
(
dbg
"
fib
.
c
"
10
)
;
reload
(
dbg
)
;
await
waitForPaused
(
dbg
)
;
await
selectSource
(
dbg
"
fib
.
c
"
)
;
resume
(
dbg
)
;
await
waitForPaused
(
dbg
"
fib
.
c
"
)
;
const
frames
=
findAllElements
(
dbg
"
frames
"
)
;
const
firstFrameTitle
=
frames
[
0
]
.
querySelector
(
"
.
title
"
)
.
textContent
;
is
(
firstFrameTitle
"
(
wasmcall
)
"
"
It
shall
be
a
wasm
call
"
)
;
const
firstFrameLocation
=
frames
[
0
]
.
querySelector
(
"
.
location
"
)
.
textContent
;
is
(
firstFrameLocation
.
includes
(
"
fib
.
c
"
)
true
"
It
shall
be
fib
.
c
source
"
)
;
}
)
;
