"
use
strict
"
;
const
TEST_COM_URI
=
{
URL_ROOT_COM_SSL
}
examples
/
doc_dbg
-
fission
-
frame
-
sources
.
html
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebuggerWithAbsoluteURL
(
TEST_COM_URI
"
simple1
.
js
"
"
simple2
.
js
"
)
;
const
{
selectors
:
{
getSelectedSource
}
}
=
dbg
;
await
selectSource
(
dbg
"
simple2
.
js
"
)
;
await
addBreakpoint
(
dbg
"
simple2
.
js
"
7
)
;
const
onBreakpoint
=
waitForDispatch
(
dbg
.
store
"
SET_BREAKPOINT
"
)
;
info
(
"
Reload
the
page
to
hit
the
breakpoint
on
load
"
)
;
const
onReloaded
=
reload
(
dbg
)
;
await
onBreakpoint
;
await
waitForSelectedSource
(
dbg
"
simple2
.
js
"
)
;
ok
(
getSelectedSource
(
)
.
url
.
includes
(
"
simple2
.
js
"
)
"
Selected
source
is
simple2
.
js
"
)
;
await
waitForPaused
(
dbg
)
;
assertPausedAtSourceAndLine
(
dbg
findSource
(
dbg
"
simple2
.
js
"
)
.
id
7
)
;
await
stepIn
(
dbg
)
;
assertPausedAtSourceAndLine
(
dbg
findSource
(
dbg
"
simple2
.
js
"
)
.
id
7
)
;
await
dbg
.
actions
.
stepIn
(
)
;
assertNotPaused
(
dbg
"
Stepping
in
two
times
resumes
"
)
;
info
(
"
Wait
for
reload
to
complete
after
resume
"
)
;
await
onReloaded
;
await
dbg
.
toolbox
.
closeToolbox
(
)
;
}
)
;
