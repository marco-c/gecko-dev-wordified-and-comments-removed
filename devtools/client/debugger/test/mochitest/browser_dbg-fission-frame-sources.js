"
use
strict
"
;
const
TEST_COM_URI
=
{
URL_ROOT_COM_SSL
}
examples
/
doc_dbg
-
fission
-
frame
-
sources
.
html
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebuggerWithAbsoluteURL
(
TEST_COM_URI
"
simple1
.
js
"
"
simple2
.
js
"
)
;
const
rootNodes
=
dbg
.
win
.
document
.
querySelectorAll
(
selectors
.
sourceTreeRootNode
)
;
info
(
"
Expands
the
main
root
node
"
)
;
await
expandAllSourceNodes
(
dbg
rootNodes
[
0
]
)
;
info
(
"
Waiting
for
simple1
.
js
from
example
.
com
(
parent
page
)
"
)
;
await
waitUntil
(
(
)
=
>
findSourceNodeWithText
(
dbg
"
simple1
.
js
"
)
)
;
is
(
rootNodes
.
length
2
"
Found
2
sourceview
root
nodes
when
iframe
has
dedicated
target
"
)
;
info
(
"
Expands
the
remote
frame
root
node
"
)
;
await
expandAllSourceNodes
(
dbg
rootNodes
[
1
]
)
;
info
(
"
Waiting
for
simple2
.
js
from
example
.
org
(
frame
)
"
)
;
await
waitUntil
(
(
)
=
>
findSourceNodeWithText
(
dbg
"
simple2
.
js
"
)
)
;
await
dbg
.
toolbox
.
closeToolbox
(
)
;
}
)
;
