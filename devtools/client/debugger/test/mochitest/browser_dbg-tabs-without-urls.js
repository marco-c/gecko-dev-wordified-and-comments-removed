"
use
strict
"
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebugger
(
"
doc
-
scripts
.
html
"
"
simple1
.
js
"
"
simple2
.
js
"
)
;
await
selectSource
(
dbg
"
simple1
.
js
"
)
;
is
(
countTabs
(
dbg
)
1
"
Only
the
simple
.
js
source
tab
exists
"
)
;
invokeInTab
(
"
doEval
"
)
;
await
waitForPaused
(
dbg
)
;
is
(
countTabs
(
dbg
)
2
"
The
new
eval
tab
is
now
added
"
)
;
info
(
"
Assert
that
the
eval
source
the
tab
source
name
correctly
"
)
;
ok
(
/
source
\
d
+
/
g
.
test
(
getTabContent
(
dbg
0
)
)
"
The
tab
name
pattern
is
correct
"
)
;
await
resume
(
dbg
)
;
await
reload
(
dbg
"
simple1
.
js
"
"
simple2
.
js
"
)
;
is
(
countTabs
(
dbg
)
1
"
The
eval
source
tab
is
no
longer
available
"
)
;
}
)
;
function
getTabContent
(
dbg
index
)
{
const
tabs
=
findElement
(
dbg
"
sourceTabs
"
)
.
children
;
return
tabs
[
index
]
?
.
innerText
|
|
"
"
;
}
