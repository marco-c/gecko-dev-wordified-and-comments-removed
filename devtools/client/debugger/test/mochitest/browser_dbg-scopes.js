"
use
strict
"
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebugger
(
"
doc
-
script
-
switching
.
html
"
)
;
const
ready
=
Promise
.
all
(
[
waitForPaused
(
dbg
)
waitForLoadedSource
(
dbg
"
script
-
switching
-
02
.
js
"
)
waitForDispatch
(
dbg
.
store
"
MAP_FRAMES
"
)
]
)
;
invokeInTab
(
"
firstCall
"
)
;
await
ready
;
is
(
getLabel
(
dbg
1
)
"
secondCall
"
)
;
is
(
getLabel
(
dbg
2
)
"
<
this
>
"
)
;
is
(
getLabel
(
dbg
4
)
"
foo
(
)
"
)
;
await
toggleScopeNode
(
dbg
4
)
;
is
(
getLabel
(
dbg
5
)
"
arguments
"
)
;
await
stepOver
(
dbg
)
;
is
(
getLabel
(
dbg
4
)
"
foo
(
)
"
)
;
is
(
getLabel
(
dbg
5
)
"
Window
"
)
;
}
)
;
function
getLabel
(
dbg
index
)
{
return
findElement
(
dbg
"
scopeNode
"
index
)
.
innerText
;
}
