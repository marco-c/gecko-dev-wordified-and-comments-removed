"
use
strict
"
;
add_task
(
async
function
(
)
{
const
dbg
=
await
initDebugger
(
"
doc
-
scripts
.
html
"
"
long
.
js
"
)
;
const
{
selectors
:
{
getSettledSourceTextContent
}
}
=
dbg
;
await
selectSource
(
dbg
"
long
.
js
"
66
)
;
info
(
"
Select
line
16
and
make
sure
the
editor
scrolled
.
"
)
;
await
selectSource
(
dbg
"
long
.
js
"
16
)
;
await
waitForElementWithSelector
(
dbg
"
.
CodeMirror
-
code
>
.
highlight
-
line
"
)
;
assertHighlightLocation
(
dbg
"
long
.
js
"
16
)
;
info
(
"
Select
several
locations
and
check
that
we
have
one
highlight
"
)
;
await
selectSource
(
dbg
"
long
.
js
"
17
)
;
await
selectSource
(
dbg
"
long
.
js
"
18
)
;
assertHighlightLocation
(
dbg
"
long
.
js
"
18
)
;
info
(
"
Select
an
unloaded
source
"
)
;
const
onSourceSelected
=
selectSource
(
dbg
"
simple1
.
js
"
6
)
;
const
simple1
=
findSource
(
dbg
"
simple1
.
js
"
)
;
const
location
=
createLocation
(
{
source
:
simple1
}
)
;
is
(
getSettledSourceTextContent
(
location
)
null
)
;
await
onSourceSelected
;
ok
(
getSettledSourceTextContent
(
location
)
.
value
.
value
)
;
assertHighlightLocation
(
dbg
"
simple1
.
js
"
6
)
;
}
)
;
