const
TAB_URL
=
EXAMPLE_URL
+
"
doc_conditional
-
breakpoints
.
html
"
;
function
test
(
)
{
let
options
=
{
source
:
TAB_URL
line
:
1
}
;
initDebugger
(
TAB_URL
options
)
.
then
(
(
[
aTab
aPanel
]
)
=
>
{
const
gTab
=
aTab
;
const
gPanel
=
aPanel
;
const
gDebugger
=
gPanel
.
panelWin
;
const
gSources
=
gDebugger
.
DebuggerView
.
Sources
;
const
queries
=
gDebugger
.
require
(
"
.
/
content
/
queries
"
)
;
const
constants
=
gDebugger
.
require
(
"
.
/
content
/
constants
"
)
;
const
actions
=
bindActionCreators
(
gPanel
)
;
const
getState
=
gDebugger
.
DebuggerController
.
getState
;
var
client
=
gPanel
.
target
.
client
;
client
.
mainRoot
.
traits
.
conditionalBreakpoints
=
false
;
Task
.
spawn
(
function
*
(
)
{
let
onCaretUpdated
=
waitForCaretAndScopes
(
gPanel
17
)
;
callInTab
(
gTab
"
ermahgerd
"
)
;
yield
onCaretUpdated
;
const
location
=
{
actor
:
gSources
.
selectedValue
line
:
18
}
;
yield
actions
.
addBreakpoint
(
location
"
"
)
;
yield
actions
.
disableBreakpoint
(
location
)
;
yield
actions
.
addBreakpoint
(
location
)
;
const
bp
=
queries
.
getBreakpoint
(
getState
(
)
location
)
;
is
(
bp
.
condition
"
"
"
The
conditional
expression
is
correct
.
"
)
;
client
.
mainRoot
.
traits
.
conditionalBreakpoints
=
true
;
resumeDebuggerThenCloseAndFinish
(
gPanel
)
;
}
)
;
}
)
;
}
