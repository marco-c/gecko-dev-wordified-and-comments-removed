"
use
strict
"
;
async
function
waitForLink
(
toolbox
)
{
const
{
hud
}
=
toolbox
.
getPanel
(
"
webconsole
"
)
;
return
waitFor
(
(
)
=
>
hud
.
ui
.
outputNode
.
querySelector
(
"
.
frame
-
link
-
source
"
)
)
;
}
add_task
(
async
function
(
)
{
const
toolbox
=
await
initPane
(
"
doc
-
script
-
switching
.
html
"
"
webconsole
"
)
;
const
node
=
await
waitForLink
(
toolbox
)
;
node
.
click
(
)
;
await
waitFor
(
(
)
=
>
toolbox
.
getPanel
(
"
jsdebugger
"
)
)
;
const
dbg
=
createDebuggerContext
(
toolbox
)
;
await
waitForElementWithSelector
(
dbg
"
.
CodeMirror
-
code
>
.
highlight
-
line
"
)
;
assertHighlightLocation
(
dbg
"
script
-
switching
-
02
"
14
)
;
}
)
;
