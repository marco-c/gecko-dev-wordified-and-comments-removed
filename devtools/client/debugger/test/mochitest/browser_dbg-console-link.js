"
use
strict
"
;
add_task
(
async
function
(
)
{
const
toolbox
=
await
initPane
(
"
doc
-
script
-
switching
.
html
"
"
webconsole
"
)
;
const
node
=
await
waitForLink
(
toolbox
"
hi
"
)
;
node
.
click
(
)
;
await
waitFor
(
(
)
=
>
toolbox
.
getPanel
(
"
jsdebugger
"
)
)
;
const
dbg
=
createDebuggerContext
(
toolbox
)
;
await
waitForElementWithSelector
(
dbg
"
.
CodeMirror
-
code
>
.
highlight
-
line
"
)
;
assertHighlightLocation
(
dbg
"
script
-
switching
-
02
.
js
"
14
)
;
}
)
;
async
function
waitForLink
(
toolbox
messageText
)
{
return
waitFor
(
async
(
)
=
>
{
const
[
message
]
=
await
findConsoleMessages
(
toolbox
messageText
)
;
if
(
!
message
)
{
return
false
;
}
return
message
.
querySelector
(
"
.
frame
-
link
-
source
"
)
;
}
)
;
}
