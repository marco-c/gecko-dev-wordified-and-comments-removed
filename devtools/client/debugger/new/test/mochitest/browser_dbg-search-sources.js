add_task
(
function
*
(
)
{
const
dbg
=
yield
initDebugger
(
"
doc
-
script
-
switching
.
html
"
)
;
pressKey
(
dbg
"
sourceSearch
"
)
;
is
(
dbg
.
selectors
.
getActiveSearchState
(
dbg
.
getState
(
)
)
"
source
"
)
;
pressKey
(
dbg
"
Escape
"
)
;
is
(
dbg
.
selectors
.
getActiveSearchState
(
dbg
.
getState
(
)
)
null
)
;
pressKey
(
dbg
"
sourceSearch
"
)
;
yield
waitForElement
(
dbg
"
input
"
)
;
findElementWithSelector
(
dbg
"
input
"
)
.
focus
(
)
;
type
(
dbg
"
sw
"
)
;
pressKey
(
dbg
"
Enter
"
)
;
yield
waitForDispatch
(
dbg
"
LOAD_SOURCE_TEXT
"
)
;
let
source
=
dbg
.
selectors
.
getSelectedSource
(
dbg
.
getState
(
)
)
;
ok
(
source
.
get
(
"
url
"
)
.
match
(
/
switching
-
01
/
)
"
first
source
is
selected
"
)
;
pressKey
(
dbg
"
sourceSearch
"
)
;
findElementWithSelector
(
dbg
"
input
"
)
.
focus
(
)
;
type
(
dbg
"
sw
"
)
;
pressKey
(
dbg
"
Down
"
)
;
pressKey
(
dbg
"
Enter
"
)
;
yield
waitForDispatch
(
dbg
"
LOAD_SOURCE_TEXT
"
)
;
source
=
dbg
.
selectors
.
getSelectedSource
(
dbg
.
getState
(
)
)
;
ok
(
source
.
get
(
"
url
"
)
.
match
(
/
switching
-
02
/
)
"
second
source
is
selected
"
)
;
}
)
;
