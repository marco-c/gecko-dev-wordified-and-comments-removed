add_task
(
function
*
(
)
{
const
dbg
=
yield
initDebugger
(
"
doc
-
sourcemaps2
.
html
"
)
;
const
{
selectors
:
{
getBreakpoint
getBreakpoints
}
getState
}
=
dbg
;
yield
waitForSources
(
dbg
"
main
.
js
"
"
main
.
min
.
js
"
)
;
ok
(
true
"
Original
sources
exist
"
)
;
const
mainSrc
=
findSource
(
dbg
"
main
.
js
"
)
;
yield
selectSource
(
dbg
mainSrc
)
;
yield
addBreakpoint
(
dbg
mainSrc
4
)
;
is
(
getBreakpoints
(
getState
(
)
)
.
size
1
"
One
breakpoint
exists
"
)
;
ok
(
getBreakpoint
(
getState
(
)
{
sourceId
:
mainSrc
.
id
line
:
4
}
)
"
Breakpoint
has
correct
line
"
)
;
invokeInTab
(
"
logMessage
"
)
;
yield
waitForPaused
(
dbg
)
;
assertPausedLocation
(
dbg
"
main
.
js
"
4
)
;
}
)
;
