import
{
isStepping
getPauseReason
getThreadContext
}
from
"
.
.
/
.
.
/
selectors
"
;
import
{
evaluateExpressions
}
from
"
.
.
/
expressions
"
;
import
{
inDebuggerEval
}
from
"
.
.
/
.
.
/
utils
/
pause
"
;
import
type
{
ThunkArgs
}
from
"
.
.
/
types
"
;
import
type
{
ResumedPacket
}
from
"
.
.
/
.
.
/
client
/
firefox
/
types
"
;
export
function
resumed
(
packet
:
ResumedPacket
)
{
return
async
(
{
dispatch
client
getState
}
:
ThunkArgs
)
=
>
{
const
thread
=
packet
.
from
;
const
why
=
getPauseReason
(
getState
(
)
thread
)
;
const
wasPausedInEval
=
inDebuggerEval
(
why
)
;
const
wasStepping
=
isStepping
(
getState
(
)
thread
)
;
client
.
onPauseChange
(
thread
false
)
;
dispatch
(
{
type
:
"
RESUME
"
thread
wasStepping
}
)
;
const
cx
=
getThreadContext
(
getState
(
)
)
;
if
(
!
wasStepping
&
&
!
wasPausedInEval
&
&
cx
.
thread
=
=
thread
)
{
await
dispatch
(
evaluateExpressions
(
cx
)
)
;
}
}
;
}
