import
type
{
LocalFrame
}
from
"
.
.
/
.
.
/
.
.
/
components
/
SecondaryPanes
/
Frames
/
types
"
;
import
{
getFilename
}
from
"
.
.
/
.
.
/
source
"
;
import
{
endTruncateStr
}
from
"
.
.
/
.
.
/
.
.
/
utils
/
utils
"
;
const
objectProperty
=
/
(
[
\
w
\
d
]
+
)
/
;
const
arrayProperty
=
/
\
[
(
.
*
?
)
\
]
/
;
const
functionProperty
=
/
(
[
\
w
\
d
]
+
)
[
\
/
\
.
<
]
*
?
/
;
const
annonymousProperty
=
/
(
[
\
w
\
d
]
+
)
\
(
\
^
\
)
/
;
export
function
simplifyDisplayName
(
displayName
:
string
)
{
if
(
/
\
s
/
.
exec
(
displayName
)
)
{
return
displayName
;
}
const
scenarios
=
[
objectProperty
arrayProperty
functionProperty
annonymousProperty
]
;
for
(
const
reg
of
scenarios
)
{
const
match
=
reg
.
exec
(
displayName
)
;
if
(
match
)
{
return
match
[
1
]
;
}
}
return
displayName
;
}
const
displayNameMap
=
{
Babel
:
{
tryCatch
:
"
Async
"
}
Backbone
:
{
"
extend
/
child
"
:
"
Create
Class
"
"
.
create
"
:
"
Create
Model
"
}
jQuery
:
{
"
jQuery
.
event
.
dispatch
"
:
"
Dispatch
Event
"
}
React
:
{
"
ReactCompositeComponent
.
_renderValidatedComponentWithoutOwnerOrContext
/
renderedElement
<
"
:
"
Render
"
_renderValidatedComponentWithoutOwnerOrContext
:
"
Render
"
}
VueJS
:
{
"
renderMixin
/
Vue
.
prototype
.
_render
"
:
"
Render
"
}
Webpack
:
{
__webpack_require__
:
"
Bootstrap
"
}
}
;
function
mapDisplayNames
(
frame
library
)
{
const
{
displayName
}
=
frame
;
return
(
(
displayNameMap
[
library
]
&
&
displayNameMap
[
library
]
[
displayName
]
)
|
|
displayName
)
;
}
type
formatDisplayNameParams
=
{
shouldMapDisplayName
:
boolean
maxLength
:
number
}
;
export
function
formatDisplayName
(
frame
:
LocalFrame
{
shouldMapDisplayName
=
true
maxLength
=
25
}
:
formatDisplayNameParams
=
{
}
)
{
let
{
displayName
originalDisplayName
library
}
=
frame
;
displayName
=
originalDisplayName
|
|
displayName
;
if
(
library
&
&
shouldMapDisplayName
)
{
displayName
=
mapDisplayNames
(
frame
library
)
;
}
displayName
=
simplifyDisplayName
(
displayName
)
;
return
Number
.
isInteger
(
maxLength
)
?
endTruncateStr
(
displayName
maxLength
)
:
displayName
;
}
export
function
formatCopyName
(
frame
:
LocalFrame
)
{
const
displayName
=
formatDisplayName
(
frame
)
;
const
fileName
=
getFilename
(
frame
.
source
)
;
const
frameLocation
=
frame
.
location
.
line
;
return
{
displayName
}
(
{
fileName
}
#
{
frameLocation
}
)
;
}
