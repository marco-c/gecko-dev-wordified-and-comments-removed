"
use
strict
"
;
add_task
(
function
*
setup
(
)
{
yield
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
dom
.
ipc
.
processCount
"
1
]
]
}
)
;
}
)
;
add_task
(
function
*
(
)
{
yield
addTab
(
URL_ROOT
+
"
doc_simple_animation
.
html
"
)
;
let
{
panel
inspector
window
controller
}
=
yield
openAnimationInspector
(
)
;
let
{
toggleAllButtonEl
}
=
panel
;
yield
selectNodeAndWaitForAnimations
(
"
.
still
"
inspector
)
;
window
.
focus
(
)
;
info
(
"
Simulate
spacebar
stroke
and
check
toggleAll
button
"
+
"
is
in
paused
state
"
)
;
let
onToggled
=
once
(
controller
controller
.
ALL_ANIMATIONS_TOGGLED_EVENT
)
;
EventUtils
.
sendKey
(
"
SPACE
"
window
)
;
yield
onToggled
;
ok
(
toggleAllButtonEl
.
classList
.
contains
(
"
paused
"
)
"
The
toggle
all
button
is
in
its
paused
state
"
)
;
info
(
"
Simulate
spacebar
stroke
and
check
toggleAll
button
"
+
"
is
in
playing
state
"
)
;
onToggled
=
once
(
controller
controller
.
ALL_ANIMATIONS_TOGGLED_EVENT
)
;
EventUtils
.
sendKey
(
"
SPACE
"
window
)
;
yield
onToggled
;
ok
(
!
toggleAllButtonEl
.
classList
.
contains
(
"
paused
"
)
"
The
toggle
all
button
is
in
its
playing
state
again
"
)
;
}
)
;
