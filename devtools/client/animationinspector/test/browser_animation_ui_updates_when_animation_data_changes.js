"
use
strict
"
;
requestLongerTimeout
(
2
)
;
add_task
(
async
function
(
)
{
await
addTab
(
URL_ROOT
+
"
doc_simple_animation
.
html
"
)
;
let
{
panel
controller
inspector
}
=
await
openAnimationInspector
(
)
;
info
(
"
Select
the
test
node
"
)
;
await
selectNodeAndWaitForAnimations
(
"
.
animated
"
inspector
)
;
let
animation
=
controller
.
animationPlayers
[
0
]
;
await
setStyle
(
animation
panel
"
animationDuration
"
"
5
.
5s
"
"
.
animated
"
)
;
await
setStyle
(
animation
panel
"
animationIterationCount
"
"
300
"
"
.
animated
"
)
;
await
setStyle
(
animation
panel
"
animationDelay
"
"
45s
"
"
.
animated
"
)
;
let
animationsEl
=
panel
.
animationsTimelineComponent
.
animationsEl
;
let
timeBlockEl
=
animationsEl
.
querySelector
(
"
.
time
-
block
"
)
;
let
expectedTotalDuration
=
1695
*
1000
;
let
delayWidth
=
parseFloat
(
timeBlockEl
.
querySelector
(
"
.
delay
"
)
.
style
.
width
)
;
is
(
Math
.
round
(
delayWidth
*
expectedTotalDuration
/
100
)
45
*
1000
"
The
timeline
has
the
right
delay
"
)
;
}
)
;
