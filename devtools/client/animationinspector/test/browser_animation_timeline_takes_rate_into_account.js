"
use
strict
"
;
add_task
(
function
*
(
)
{
yield
new
Promise
(
resolve
=
>
{
SpecialPowers
.
pushPrefEnv
(
{
"
set
"
:
[
[
"
dom
.
animations
-
api
.
core
.
enabled
"
true
]
]
}
resolve
)
;
}
)
;
yield
addTab
(
TEST_URL_ROOT
+
"
doc_modify_playbackRate
.
html
"
)
;
let
{
panel
}
=
yield
openAnimationInspector
(
)
;
let
timelineEl
=
panel
.
animationsTimelineComponent
.
rootWrapperEl
;
let
timeBlocks
=
timelineEl
.
querySelectorAll
(
"
.
time
-
block
"
)
;
is
(
timeBlocks
.
length
2
"
2
animations
are
displayed
"
)
;
info
(
"
The
first
animation
has
its
rate
set
to
1
let
'
s
measure
it
"
)
;
let
el
=
timeBlocks
[
0
]
;
let
duration
=
parseInt
(
el
.
querySelector
(
"
.
iterations
"
)
.
style
.
width
10
)
;
let
delay
=
parseInt
(
el
.
querySelector
(
"
.
delay
"
)
.
style
.
width
10
)
;
info
(
"
The
second
animation
has
its
rate
set
to
2
so
should
be
shorter
"
)
;
let
el2
=
timeBlocks
[
1
]
;
let
duration2
=
parseInt
(
el2
.
querySelector
(
"
.
iterations
"
)
.
style
.
width
10
)
;
let
delay2
=
parseInt
(
el2
.
querySelector
(
"
.
delay
"
)
.
style
.
width
10
)
;
let
durationDelta
=
(
2
*
duration2
)
-
duration
;
ok
(
durationDelta
<
=
1
"
The
duration
width
is
correct
"
)
;
let
delayDelta
=
(
2
*
delay2
)
-
delay
;
ok
(
delayDelta
<
=
1
"
The
delay
width
is
correct
"
)
;
}
)
;
