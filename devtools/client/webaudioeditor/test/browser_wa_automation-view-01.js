add_task
(
async
function
(
)
{
let
{
target
panel
}
=
await
initWebAudioEditor
(
AUTOMATION_URL
)
;
let
{
panelWin
}
=
panel
;
let
{
gFront
EVENTS
}
=
panelWin
;
let
started
=
once
(
gFront
"
start
-
context
"
)
;
let
events
=
Promise
.
all
(
[
get3
(
gFront
"
create
-
node
"
)
waitForGraphRendered
(
panelWin
3
2
)
]
)
;
reload
(
target
)
;
let
[
actors
]
=
await
events
;
let
nodeIds
=
actors
.
map
(
actor
=
>
actor
.
actorID
)
;
let
tabbox
=
(
"
#
web
-
audio
-
editor
-
tabs
"
)
;
click
(
panelWin
findGraphNode
(
panelWin
nodeIds
[
1
]
)
)
;
await
waitForInspectorRender
(
panelWin
EVENTS
)
;
tabbox
.
selectedIndex
=
1
;
ok
(
isVisible
(
(
"
#
automation
-
graph
-
container
"
)
)
"
graph
container
should
be
visible
"
)
;
ok
(
isVisible
(
(
"
#
automation
-
content
"
)
)
"
automation
content
should
be
visible
"
)
;
ok
(
!
isVisible
(
(
"
#
automation
-
no
-
events
"
)
)
"
no
-
events
panel
should
not
be
visible
"
)
;
ok
(
!
isVisible
(
(
"
#
automation
-
empty
"
)
)
"
empty
panel
should
not
be
visible
"
)
;
click
(
panelWin
findGraphNode
(
panelWin
nodeIds
[
2
]
)
)
;
await
waitForInspectorRender
(
panelWin
EVENTS
)
;
tabbox
.
selectedIndex
=
1
;
ok
(
!
isVisible
(
(
"
#
automation
-
graph
-
container
"
)
)
"
graph
container
should
not
be
visible
"
)
;
ok
(
isVisible
(
(
"
#
automation
-
content
"
)
)
"
automation
content
should
be
visible
"
)
;
ok
(
isVisible
(
(
"
#
automation
-
no
-
events
"
)
)
"
no
-
events
panel
should
be
visible
"
)
;
ok
(
!
isVisible
(
(
"
#
automation
-
empty
"
)
)
"
empty
panel
should
not
be
visible
"
)
;
click
(
panelWin
findGraphNode
(
panelWin
nodeIds
[
0
]
)
)
;
await
waitForInspectorRender
(
panelWin
EVENTS
)
;
tabbox
.
selectedIndex
=
1
;
ok
(
!
isVisible
(
(
"
#
automation
-
graph
-
container
"
)
)
"
graph
container
should
not
be
visible
"
)
;
ok
(
!
isVisible
(
(
"
#
automation
-
content
"
)
)
"
automation
content
should
not
be
visible
"
)
;
ok
(
!
isVisible
(
(
"
#
automation
-
no
-
events
"
)
)
"
no
-
events
panel
should
not
be
visible
"
)
;
ok
(
isVisible
(
(
"
#
automation
-
empty
"
)
)
"
empty
panel
should
be
visible
"
)
;
await
teardown
(
target
)
;
}
)
;
