"
use
strict
"
;
this
.
EXPORTED_SYMBOLS
=
[
"
gDevTools
"
"
gDevToolsBrowser
"
]
;
const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
}
=
Components
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
Cu
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
const
{
loader
}
=
Cu
.
import
(
"
resource
:
/
/
devtools
/
shared
/
Loader
.
jsm
"
{
}
)
;
Object
.
defineProperty
(
this
"
require
"
{
get
(
)
{
let
{
require
}
=
Cu
.
import
(
"
resource
:
/
/
devtools
/
shared
/
Loader
.
jsm
"
{
}
)
;
return
require
;
}
}
)
;
Object
.
defineProperty
(
this
"
devtools
"
{
get
(
)
{
return
require
(
"
devtools
/
client
/
framework
/
devtools
"
)
.
gDevTools
;
}
}
)
;
Object
.
defineProperty
(
this
"
browser
"
{
get
(
)
{
return
require
(
"
devtools
/
client
/
framework
/
devtools
-
browser
"
)
.
gDevToolsBrowser
;
}
}
)
;
let
gDevToolsMethods
=
[
"
reload
"
"
showToolbox
"
"
closeToolbox
"
"
getToolbox
"
"
registerTool
"
"
registerTheme
"
"
unregisterTool
"
"
unregisterTheme
"
"
getToolDefinitionArray
"
"
getThemeDefinitionArray
"
"
getThemeDefinition
"
"
emit
"
"
on
"
"
off
"
"
once
"
"
getToolDefinitionMap
"
"
getThemeDefinitionMap
"
"
getDefaultTools
"
"
getAdditionalTools
"
"
getToolDefinition
"
]
;
this
.
gDevTools
=
{
get
_toolboxes
(
)
{
return
devtools
.
_toolboxes
;
}
get
_tools
(
)
{
return
devtools
.
_tools
;
}
*
[
Symbol
.
iterator
]
(
)
{
for
(
let
toolbox
of
this
.
_toolboxes
)
{
yield
toolbox
;
}
}
}
;
gDevToolsMethods
.
forEach
(
name
=
>
{
this
.
gDevTools
[
name
]
=
(
.
.
.
args
)
=
>
{
return
devtools
[
name
]
.
apply
(
devtools
args
)
;
}
;
}
)
;
let
gDevToolsBrowserMethods
=
[
"
toggleToolboxCommand
"
"
selectToolCommand
"
"
openConnectScreen
"
"
openWebIDE
"
"
openContentProcessToolbox
"
"
moveWebIDEWidgetInNavbar
"
"
registerBrowserWindow
"
"
hasToolboxOpened
"
"
forgetBrowserWindow
"
]
;
this
.
gDevToolsBrowser
=
{
get
isWebIDEInitialized
(
)
{
return
browser
.
isWebIDEInitialized
;
}
get
_trackedBrowserWindows
(
)
{
return
browser
.
_trackedBrowserWindows
;
}
}
;
gDevToolsBrowserMethods
.
forEach
(
name
=
>
{
this
.
gDevToolsBrowser
[
name
]
=
(
.
.
.
args
)
=
>
{
return
browser
[
name
]
.
apply
(
browser
args
)
;
}
;
}
)
;
