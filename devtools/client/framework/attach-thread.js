const
Services
=
require
(
"
Services
"
)
;
async
function
attachThread
(
target
)
{
const
threadOptions
=
{
autoBlackBox
:
false
ignoreFrameEnvironment
:
true
pauseOnExceptions
:
Services
.
prefs
.
getBoolPref
(
"
devtools
.
debugger
.
pause
-
on
-
exceptions
"
)
ignoreCaughtExceptions
:
Services
.
prefs
.
getBoolPref
(
"
devtools
.
debugger
.
ignore
-
caught
-
exceptions
"
)
}
;
const
[
threadClient
]
=
await
target
.
attachThread
(
threadOptions
)
;
if
(
!
threadClient
.
paused
)
{
throw
new
Error
(
"
Thread
in
wrong
state
when
starting
up
should
be
paused
.
"
)
;
}
return
threadClient
;
}
module
.
exports
=
{
attachThread
}
;
