"
use
strict
"
;
loader
.
lazyRequireGetter
(
this
"
CommandsFactory
"
"
resource
:
/
/
devtools
/
shared
/
commands
/
commands
-
factory
.
js
"
true
)
;
const
commandsMap
=
new
WeakMap
(
)
;
exports
.
LocalTabCommandsFactory
=
{
async
createCommandsForTab
(
tab
)
{
let
commands
=
commandsMap
.
get
(
tab
)
;
if
(
commands
)
{
return
commands
;
}
const
promise
=
CommandsFactory
.
forTab
(
tab
)
;
commandsMap
.
set
(
tab
promise
)
;
commands
=
await
promise
;
commandsMap
.
set
(
tab
commands
)
;
commands
.
descriptorFront
.
once
(
"
descriptor
-
destroyed
"
(
)
=
>
{
commandsMap
.
delete
(
tab
)
;
}
)
;
return
commands
;
}
async
getCommandsForTab
(
tab
)
{
return
commandsMap
.
get
(
tab
)
;
}
}
;
