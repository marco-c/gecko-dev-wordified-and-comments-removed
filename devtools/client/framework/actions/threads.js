"
use
strict
"
;
exports
.
registerThread
=
registerThread
;
function
registerThread
(
targetFront
)
{
return
async
function
(
dispatch
)
{
const
threadFront
=
await
targetFront
.
getFront
(
"
thread
"
)
;
const
thread
=
{
actor
:
threadFront
.
actor
url
:
targetFront
.
url
type
:
getTargetType
(
targetFront
)
name
:
targetFront
.
name
serviceWorkerStatus
:
targetFront
.
debuggerServiceWorkerStatus
_targetFront
:
targetFront
}
;
dispatch
(
{
type
:
"
ADD_THREAD
"
thread
}
)
;
}
;
}
exports
.
clearThread
=
clearThread
;
function
clearThread
(
target
)
{
return
{
type
:
"
CLEAR_THREAD
"
target
}
;
}
exports
.
selectThread
=
selectThread
;
function
selectThread
(
thread
)
{
return
function
(
dispatch
)
{
dispatch
(
{
type
:
"
SELECT_THREAD
"
thread
}
)
;
}
;
}
function
getTargetType
(
target
)
{
if
(
target
.
isWorkerTarget
)
{
return
"
worker
"
;
}
if
(
target
.
isContentProcess
)
{
return
"
contentProcess
"
;
}
return
"
mainThread
"
;
}
