"
use
strict
"
;
const
{
gDevToolsBrowser
}
=
require
(
"
devtools
/
client
/
framework
/
devtools
-
browser
"
)
;
add_task
(
async
function
(
)
{
registerCleanupFunction
(
(
)
=
>
{
Services
.
prefs
.
clearUserPref
(
"
devtools
.
toolbox
.
selectedTool
"
)
;
}
)
;
const
initialTabsOrderOnDevTools
=
Services
.
prefs
.
getCharPref
(
"
devtools
.
toolbox
.
tabsOrder
"
)
;
info
(
"
Prepare
the
toolbox
on
browser
content
toolbox
"
)
;
await
addTab
(
{
URL_ROOT
}
doc_empty
-
tab
-
01
.
html
)
;
Services
.
prefs
.
setCharPref
(
"
devtools
.
toolbox
.
selectedTool
"
"
memory
"
)
;
const
toolbox
=
await
gDevToolsBrowser
.
openContentProcessToolbox
(
gBrowser
)
;
info
(
"
Check
whether
the
value
of
devtools
.
toolbox
.
tabsOrder
was
not
affected
after
closed
"
)
;
const
onToolboxDestroyed
=
toolbox
.
once
(
"
destroyed
"
)
;
toolbox
.
topWindow
.
close
(
)
;
await
onToolboxDestroyed
;
is
(
Services
.
prefs
.
getCharPref
(
"
devtools
.
toolbox
.
tabsOrder
"
)
initialTabsOrderOnDevTools
"
The
preference
of
devtools
.
toolbox
.
tabsOrder
should
not
be
affected
"
)
;
}
)
;
