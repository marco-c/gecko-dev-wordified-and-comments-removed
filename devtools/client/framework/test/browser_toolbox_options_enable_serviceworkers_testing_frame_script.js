"
use
strict
"
;
function
addMessageForwarder
(
name
)
{
addMessageListener
(
name
function
(
_
)
{
var
channel
=
new
MessageChannel
(
)
;
content
.
postMessage
(
name
"
*
"
[
channel
.
port2
]
)
;
channel
.
port1
.
onmessage
=
function
(
msg
)
{
sendAsyncMessage
(
name
msg
.
data
)
;
channel
.
port1
.
close
(
)
;
}
;
}
)
;
}
const
messages
=
[
"
devtools
:
sw
-
test
:
register
"
"
devtools
:
sw
-
test
:
unregister
"
"
devtools
:
sw
-
test
:
iframe
:
register
-
and
-
unregister
"
]
;
for
(
var
msg
of
messages
)
{
addMessageForwarder
(
msg
)
;
}
