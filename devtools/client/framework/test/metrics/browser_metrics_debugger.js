"
use
strict
"
;
const
TEST_URL
=
"
data
:
text
/
html
;
charset
=
UTF
-
8
<
div
>
Debugger
modules
load
test
<
/
div
>
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
dom
.
ipc
.
processPrelaunch
.
enabled
"
false
)
;
const
toolbox
=
await
openNewTabAndToolbox
(
TEST_URL
"
jsdebugger
"
)
;
const
toolboxBrowserLoader
=
toolbox
.
win
.
getBrowserLoaderForWindow
(
)
;
const
panel
=
toolbox
.
getCurrentPanel
(
)
;
const
debuggerLoader
=
panel
.
panelWin
.
getBrowserLoaderForWindow
(
)
;
const
loaders
=
[
loader
.
loader
toolboxBrowserLoader
.
loader
debuggerLoader
.
loader
]
;
const
allowedDupes
=
[
"
loader
/
unload
.
js
"
"
loader
/
options
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
vendor
/
fluent
-
react
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
vendor
/
react
-
redux
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
vendor
/
redux
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
redux
/
subscriber
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
redux
/
middleware
/
ignore
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
redux
/
middleware
/
promise
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
redux
/
middleware
/
thunk
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
redux
/
middleware
/
wait
-
service
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
components
/
menu
/
MenuButton
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
components
/
menu
/
MenuItem
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
components
/
menu
/
MenuList
.
js
"
"
resource
:
/
/
devtools
/
client
/
shared
/
components
/
AppErrorBoundary
.
js
"
]
;
runDuplicatedModulesTest
(
loaders
allowedDupes
)
;
runMetricsTest
(
{
filterString
:
"
devtools
/
client
/
debugger
"
loaders
panelName
:
"
debugger
"
}
)
;
info
(
"
Wait
for
all
pending
requests
to
settle
on
the
DevToolsClient
"
)
;
await
toolbox
.
commands
.
client
.
waitForRequestsToSettle
(
)
;
}
)
;
