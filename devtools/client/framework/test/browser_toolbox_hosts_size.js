const
URL
=
"
data
:
text
/
html
;
charset
=
utf8
test
for
host
sizes
"
;
var
{
Toolbox
}
=
require
(
"
devtools
/
client
/
framework
/
toolbox
"
)
;
add_task
(
async
function
(
)
{
Services
.
prefs
.
setIntPref
(
"
devtools
.
toolbox
.
footer
.
height
"
10000
)
;
Services
.
prefs
.
setIntPref
(
"
devtools
.
toolbox
.
sidebar
.
width
"
10000
)
;
const
tab
=
await
addTab
(
URL
)
;
const
nbox
=
gBrowser
.
getNotificationBox
(
)
;
const
{
clientHeight
:
nboxHeight
clientWidth
:
nboxWidth
}
=
nbox
;
const
toolbox
=
await
gDevTools
.
showToolbox
(
TargetFactory
.
forTab
(
tab
)
)
;
is
(
nbox
.
clientHeight
nboxHeight
"
Opening
the
toolbox
hasn
'
t
changed
the
height
of
the
nbox
"
)
;
is
(
nbox
.
clientWidth
nboxWidth
"
Opening
the
toolbox
hasn
'
t
changed
the
width
of
the
nbox
"
)
;
let
iframe
=
document
.
getAnonymousElementByAttribute
(
nbox
"
class
"
"
devtools
-
toolbox
-
bottom
-
iframe
"
)
;
is
(
iframe
.
clientHeight
nboxHeight
-
25
"
The
iframe
fits
within
the
available
space
"
)
;
await
toolbox
.
switchHost
(
Toolbox
.
HostType
.
SIDE
)
;
iframe
=
document
.
getAnonymousElementByAttribute
(
nbox
"
class
"
"
devtools
-
toolbox
-
side
-
iframe
"
)
;
iframe
.
style
.
minWidth
=
"
1px
"
;
is
(
iframe
.
clientWidth
nboxWidth
-
25
"
The
iframe
fits
within
the
available
space
"
)
;
await
cleanup
(
toolbox
)
;
}
)
;
add_task
(
async
function
(
)
{
Services
.
prefs
.
setIntPref
(
"
devtools
.
toolbox
.
footer
.
height
"
100
)
;
Services
.
prefs
.
setIntPref
(
"
devtools
.
toolbox
.
sidebar
.
width
"
100
)
;
const
tab
=
await
addTab
(
URL
)
;
const
nbox
=
gBrowser
.
getNotificationBox
(
)
;
const
{
clientHeight
:
nboxHeight
clientWidth
:
nboxWidth
}
=
nbox
;
const
toolbox
=
await
gDevTools
.
showToolbox
(
TargetFactory
.
forTab
(
tab
)
)
;
is
(
nbox
.
clientHeight
nboxHeight
"
Opening
the
toolbox
hasn
'
t
changed
the
height
of
the
nbox
"
)
;
is
(
nbox
.
clientWidth
nboxWidth
"
Opening
the
toolbox
hasn
'
t
changed
the
width
of
the
nbox
"
)
;
let
iframe
=
document
.
getAnonymousElementByAttribute
(
nbox
"
class
"
"
devtools
-
toolbox
-
bottom
-
iframe
"
)
;
is
(
iframe
.
clientHeight
100
"
The
iframe
is
resized
properly
"
)
;
await
toolbox
.
switchHost
(
Toolbox
.
HostType
.
SIDE
)
;
iframe
=
document
.
getAnonymousElementByAttribute
(
nbox
"
class
"
"
devtools
-
toolbox
-
side
-
iframe
"
)
;
iframe
.
style
.
minWidth
=
"
1px
"
;
is
(
iframe
.
clientWidth
100
"
The
iframe
is
resized
properly
"
)
;
await
cleanup
(
toolbox
)
;
}
)
;
async
function
cleanup
(
toolbox
)
{
Services
.
prefs
.
clearUserPref
(
"
devtools
.
toolbox
.
host
"
)
;
Services
.
prefs
.
clearUserPref
(
"
devtools
.
toolbox
.
footer
.
height
"
)
;
Services
.
prefs
.
clearUserPref
(
"
devtools
.
toolbox
.
sidebar
.
width
"
)
;
await
toolbox
.
destroy
(
)
;
gBrowser
.
removeCurrentTab
(
)
;
}
