"
use
strict
"
;
const
{
Component
createFactory
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
dom
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
PropTypes
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
prop
-
types
"
)
;
const
{
div
button
}
=
dom
;
const
ToolboxTab
=
createFactory
(
require
(
"
devtools
/
client
/
framework
/
components
/
toolbox
-
tab
"
)
)
;
const
ToolboxTabs
=
createFactory
(
require
(
"
devtools
/
client
/
framework
/
components
/
toolbox
-
tabs
"
)
)
;
class
ToolboxToolbar
extends
Component
{
static
get
propTypes
(
)
{
return
{
focusedButton
:
PropTypes
.
string
toolboxButtons
:
PropTypes
.
array
currentToolId
:
PropTypes
.
string
highlightedTools
:
PropTypes
.
object
panelDefinitions
:
PropTypes
.
array
selectTool
:
PropTypes
.
func
focusButton
:
PropTypes
.
func
optionsPanel
:
PropTypes
.
object
canRender
:
PropTypes
.
bool
L10N
:
PropTypes
.
object
toolbox
:
PropTypes
.
object
}
;
}
render
(
)
{
const
containerProps
=
{
className
:
"
devtools
-
tabbar
"
}
;
return
this
.
props
.
canRender
?
(
div
(
containerProps
renderToolboxButtonsStart
(
this
.
props
)
ToolboxTabs
(
this
.
props
)
renderToolboxButtonsEnd
(
this
.
props
)
renderOptions
(
this
.
props
)
renderSeparator
(
)
renderDockButtons
(
this
.
props
)
)
)
:
div
(
containerProps
)
;
}
}
module
.
exports
=
ToolboxToolbar
;
function
renderToolboxButtonsStart
(
props
)
{
return
renderToolboxButtons
(
props
true
)
;
}
function
renderToolboxButtonsEnd
(
props
)
{
return
renderToolboxButtons
(
props
false
)
;
}
function
renderToolboxButtons
(
{
toolboxButtons
focusedButton
focusButton
}
isStart
)
{
const
visibleButtons
=
toolboxButtons
.
filter
(
command
=
>
{
const
{
isVisible
isInStartContainer
}
=
command
;
return
isVisible
&
&
(
isStart
?
isInStartContainer
:
!
isInStartContainer
)
;
}
)
;
if
(
visibleButtons
.
length
=
=
=
0
)
{
return
null
;
}
return
div
(
{
id
:
toolbox
-
buttons
-
{
isStart
?
"
start
"
:
"
end
"
}
}
.
.
.
visibleButtons
.
map
(
command
=
>
{
const
{
id
description
disabled
onClick
isChecked
className
:
buttonClass
onKeyDown
}
=
command
;
return
button
(
{
id
title
:
description
disabled
className
:
(
"
command
-
button
devtools
-
button
"
+
buttonClass
+
(
isChecked
?
"
checked
"
:
"
"
)
)
onClick
:
(
event
)
=
>
{
onClick
(
event
)
;
focusButton
(
id
)
;
}
onFocus
:
(
)
=
>
focusButton
(
id
)
tabIndex
:
id
=
=
=
focusedButton
?
"
0
"
:
"
-
1
"
onKeyDown
:
(
event
)
=
>
{
onKeyDown
(
event
)
;
}
}
)
;
}
)
isStart
?
div
(
{
className
:
"
devtools
-
separator
"
}
)
:
null
)
;
}
function
renderOptions
(
{
optionsPanel
currentToolId
selectTool
focusedButton
focusButton
highlightedTools
}
)
{
return
div
(
{
id
:
"
toolbox
-
option
-
container
"
}
ToolboxTab
(
{
panelDefinition
:
optionsPanel
currentToolId
selectTool
highlightedTools
focusedButton
focusButton
}
)
)
;
}
function
renderSeparator
(
)
{
return
div
(
{
className
:
"
devtools
-
separator
"
}
)
;
}
function
renderDockButtons
(
props
)
{
const
{
focusedButton
closeToolbox
hostTypes
focusButton
L10N
areDockButtonsEnabled
canCloseToolbox
}
=
props
;
let
buttons
=
[
]
;
if
(
areDockButtonsEnabled
)
{
hostTypes
.
forEach
(
hostType
=
>
{
const
id
=
"
toolbox
-
dock
-
"
+
hostType
.
position
;
buttons
.
push
(
button
(
{
id
onFocus
:
(
)
=
>
focusButton
(
id
)
className
:
"
toolbox
-
dock
-
button
devtools
-
button
"
title
:
L10N
.
getStr
(
toolboxDockButtons
.
{
hostType
.
position
}
.
tooltip
)
onClick
:
e
=
>
{
hostType
.
switchHost
(
)
;
focusButton
(
id
)
;
}
tabIndex
:
focusedButton
=
=
=
id
?
"
0
"
:
"
-
1
"
}
)
)
;
}
)
;
}
const
closeButtonId
=
"
toolbox
-
close
"
;
const
closeButton
=
canCloseToolbox
?
button
(
{
id
:
closeButtonId
onFocus
:
(
)
=
>
focusButton
(
closeButtonId
)
className
:
"
devtools
-
button
"
title
:
L10N
.
getStr
(
"
toolbox
.
closebutton
.
tooltip
"
)
onClick
:
(
)
=
>
{
closeToolbox
(
)
;
focusButton
(
closeButtonId
)
;
}
tabIndex
:
focusedButton
=
=
=
"
toolbox
-
close
"
?
"
0
"
:
"
-
1
"
}
)
:
null
;
return
div
(
{
id
:
"
toolbox
-
controls
"
}
div
(
{
id
:
"
toolbox
-
dock
-
buttons
"
}
.
.
.
buttons
)
closeButton
)
;
}
