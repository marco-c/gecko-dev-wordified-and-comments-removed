"
use
strict
"
;
const
{
PureComponent
createFactory
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
PropTypes
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
prop
-
types
"
)
;
const
dom
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
{
hr
}
=
dom
;
loader
.
lazyGetter
(
this
"
MenuItem
"
function
(
)
{
return
createFactory
(
require
(
"
devtools
/
client
/
shared
/
components
/
menu
/
MenuItem
"
)
)
;
}
)
;
loader
.
lazyGetter
(
this
"
MenuList
"
function
(
)
{
return
createFactory
(
require
(
"
devtools
/
client
/
shared
/
components
/
menu
/
MenuList
"
)
)
;
}
)
;
loader
.
lazyRequireGetter
(
this
"
openDocLink
"
"
devtools
/
client
/
shared
/
link
"
true
)
;
loader
.
lazyRequireGetter
(
this
"
assert
"
"
devtools
/
shared
/
DevToolsUtils
"
true
)
;
const
openDevToolsDocsLink
=
(
)
=
>
{
openDocLink
(
"
https
:
/
/
firefox
-
source
-
docs
.
mozilla
.
org
/
devtools
-
user
/
"
)
;
}
;
const
openCommunityLink
=
(
)
=
>
{
openDocLink
(
"
https
:
/
/
discourse
.
mozilla
.
org
/
c
/
devtools
?
utm_source
=
devtools
&
utm_medium
=
tabbar
-
menu
"
)
;
}
;
class
MeatballMenu
extends
PureComponent
{
static
get
propTypes
(
)
{
return
{
currentToolId
:
PropTypes
.
string
hostTypes
:
PropTypes
.
arrayOf
(
PropTypes
.
shape
(
{
position
:
PropTypes
.
string
.
isRequired
switchHost
:
PropTypes
.
func
.
isRequired
}
)
)
currentHostType
:
PropTypes
.
string
isSplitConsoleActive
:
PropTypes
.
bool
disableAutohide
:
PropTypes
.
bool
pseudoLocale
:
PropTypes
.
string
toggleOptions
:
PropTypes
.
func
.
isRequired
toggleSplitConsole
:
PropTypes
.
func
toggleNoAutohide
:
PropTypes
.
func
disablePseudoLocale
:
PropTypes
.
func
enableAccentedPseudoLocale
:
PropTypes
.
func
enableBidiPseudoLocale
:
PropTypes
.
func
L10N
:
PropTypes
.
object
.
isRequired
onResize
:
PropTypes
.
func
}
;
}
componentDidUpdate
(
prevProps
)
{
if
(
!
this
.
props
.
onResize
)
{
return
;
}
const
didChange
=
typeof
this
.
props
.
disableAutohide
!
=
=
typeof
prevProps
.
disableAutohide
|
|
this
.
props
.
pseudoLocale
!
=
=
prevProps
.
pseudoLocale
|
|
this
.
props
.
currentToolId
!
=
=
prevProps
.
currentToolId
|
|
this
.
props
.
isSplitConsoleActive
!
=
=
prevProps
.
isSplitConsoleActive
;
if
(
didChange
)
{
this
.
props
.
onResize
(
)
;
}
}
render
(
)
{
const
items
=
[
]
;
for
(
const
hostType
of
this
.
props
.
hostTypes
)
{
let
l10nID
;
switch
(
hostType
.
position
)
{
case
"
window
"
:
l10nID
=
"
toolbox
-
meatball
-
menu
-
dock
-
separate
-
window
-
label
"
;
break
;
case
"
bottom
"
:
l10nID
=
"
toolbox
-
meatball
-
menu
-
dock
-
bottom
-
label
"
;
break
;
case
"
left
"
:
l10nID
=
"
toolbox
-
meatball
-
menu
-
dock
-
left
-
label
"
;
break
;
case
"
right
"
:
l10nID
=
"
toolbox
-
meatball
-
menu
-
dock
-
right
-
label
"
;
break
;
default
:
assert
(
false
Unexpected
hostType
.
position
:
{
hostType
.
position
}
)
;
break
;
}
items
.
push
(
MenuItem
(
{
id
:
toolbox
-
meatball
-
menu
-
dock
-
{
hostType
.
position
}
key
:
dock
-
{
hostType
.
position
}
l10nID
onClick
:
hostType
.
switchHost
checked
:
hostType
.
position
=
=
=
this
.
props
.
currentHostType
className
:
"
iconic
"
}
)
)
;
}
if
(
items
.
length
)
{
items
.
push
(
hr
(
{
key
:
"
dock
-
separator
"
}
)
)
;
}
if
(
this
.
props
.
currentToolId
!
=
=
"
webconsole
"
)
{
const
l10nID
=
this
.
props
.
isSplitConsoleActive
?
"
toolbox
-
meatball
-
menu
-
hideconsole
-
label
"
:
"
toolbox
-
meatball
-
menu
-
splitconsole
-
label
"
;
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
splitconsole
"
key
:
"
splitconsole
"
l10nID
accelerator
:
"
Esc
"
onClick
:
this
.
props
.
toggleSplitConsole
className
:
"
iconic
"
}
)
)
;
}
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
settings
"
key
:
"
settings
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
settings
-
label
"
accelerator
:
this
.
props
.
L10N
.
getStr
(
"
toolbox
.
help
.
key
"
)
onClick
:
this
.
props
.
toggleOptions
className
:
"
iconic
"
}
)
)
;
if
(
typeof
this
.
props
.
disableAutohide
!
=
=
"
undefined
"
|
|
typeof
this
.
props
.
pseudoLocale
!
=
=
"
undefined
"
)
{
items
.
push
(
hr
(
{
key
:
"
docs
-
separator
-
1
"
}
)
)
;
}
if
(
typeof
this
.
props
.
disableAutohide
!
=
=
"
undefined
"
)
{
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
noautohide
"
key
:
"
noautohide
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
noautohide
-
label
"
type
:
"
checkbox
"
checked
:
this
.
props
.
disableAutohide
onClick
:
this
.
props
.
toggleNoAutohide
className
:
"
iconic
"
}
)
)
;
}
if
(
typeof
this
.
props
.
pseudoLocale
!
=
=
"
undefined
"
)
{
const
{
pseudoLocale
enableAccentedPseudoLocale
enableBidiPseudoLocale
disablePseudoLocale
}
=
this
.
props
;
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
pseudo
-
locale
-
accented
"
key
:
"
pseudo
-
locale
-
accented
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
pseudo
-
locale
-
accented
"
type
:
"
checkbox
"
checked
:
pseudoLocale
=
=
=
"
accented
"
onClick
:
pseudoLocale
=
=
=
"
accented
"
?
disablePseudoLocale
:
enableAccentedPseudoLocale
className
:
"
iconic
"
}
)
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
pseudo
-
locale
-
bidi
"
key
:
"
pseudo
-
locale
-
bidi
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
pseudo
-
locale
-
bidi
"
type
:
"
checkbox
"
checked
:
pseudoLocale
=
=
=
"
bidi
"
onClick
:
pseudoLocale
=
=
=
"
bidi
"
?
disablePseudoLocale
:
enableBidiPseudoLocale
className
:
"
iconic
"
}
)
)
;
}
items
.
push
(
hr
(
{
key
:
"
docs
-
separator
-
2
"
}
)
)
;
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
documentation
"
key
:
"
documentation
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
documentation
-
label
"
onClick
:
openDevToolsDocsLink
}
)
)
;
items
.
push
(
MenuItem
(
{
id
:
"
toolbox
-
meatball
-
menu
-
community
"
key
:
"
community
"
l10nID
:
"
toolbox
-
meatball
-
menu
-
community
-
label
"
onClick
:
openCommunityLink
}
)
)
;
return
MenuList
(
{
id
:
"
toolbox
-
meatball
-
menu
"
}
items
)
;
}
}
module
.
exports
=
MeatballMenu
;
