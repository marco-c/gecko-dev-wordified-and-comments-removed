"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
CHROME_URL_ROOT
+
"
helper
-
collapsibilities
.
js
"
this
)
;
add_task
(
async
function
(
)
{
info
(
"
Force
all
debug
target
panes
to
be
expanded
"
)
;
prepareCollapsibilitiesTest
(
)
;
const
{
document
tab
window
}
=
await
openAboutDebugging
(
)
;
await
selectThisFirefoxPage
(
document
window
.
AboutDebugging
.
store
)
;
const
{
devtoolsDocument
devtoolsTab
devtoolsWindow
}
=
await
openAboutDevtoolsToolbox
(
document
tab
window
)
;
info
(
"
Select
inspector
tool
"
)
;
const
toolbox
=
getToolbox
(
devtoolsWindow
)
;
await
toolbox
.
selectTool
(
"
inspector
"
)
;
info
(
"
Show
context
menu
of
markup
view
"
)
;
const
markupDocument
=
toolbox
.
getPanel
(
"
inspector
"
)
.
markup
.
doc
;
EventUtils
.
synthesizeMouseAtCenter
(
markupDocument
.
body
{
type
:
"
contextmenu
"
}
markupDocument
.
ownerGlobal
)
;
info
(
"
Check
whether
proper
context
menu
of
markup
view
will
be
shown
"
)
;
await
waitUntil
(
(
)
=
>
devtoolsDocument
.
querySelector
(
"
#
node
-
menu
-
edithtml
"
)
)
;
ok
(
true
"
Context
menu
of
markup
view
should
be
shown
"
)
;
await
closeAboutDevtoolsToolbox
(
devtoolsTab
window
)
;
await
removeTab
(
tab
)
;
}
)
;
