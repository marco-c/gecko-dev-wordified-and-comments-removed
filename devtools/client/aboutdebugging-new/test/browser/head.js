"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
client
/
shared
/
test
/
shared
-
head
.
js
"
this
)
;
Services
.
scriptloader
.
loadSubScript
(
CHROME_URL_ROOT
+
"
debug
-
target
-
pane_collapsibilities_head
.
js
"
this
)
;
async
function
enableNewAboutDebugging
(
)
{
await
pushPref
(
"
devtools
.
aboutdebugging
.
new
-
enabled
"
true
)
;
}
async
function
openAboutDebugging
(
page
win
)
{
await
enableNewAboutDebugging
(
)
;
info
(
"
opening
about
:
debugging
"
)
;
const
tab
=
await
addTab
(
"
about
:
debugging
"
{
window
:
win
}
)
;
const
browser
=
tab
.
linkedBrowser
;
const
document
=
browser
.
contentDocument
;
const
window
=
browser
.
contentWindow
;
info
(
"
Wait
until
the
main
about
debugging
container
is
available
"
)
;
await
waitUntil
(
(
)
=
>
document
.
querySelector
(
"
.
app
"
)
)
;
info
(
"
Wait
until
the
client
connection
was
established
"
)
;
await
waitUntil
(
(
)
=
>
document
.
querySelector
(
"
.
js
-
runtime
-
page
"
)
)
;
return
{
tab
document
window
}
;
}
function
findSidebarItemByText
(
text
document
)
{
const
sidebarItems
=
document
.
querySelectorAll
(
"
.
js
-
sidebar
-
item
"
)
;
return
[
.
.
.
sidebarItems
]
.
find
(
element
=
>
{
return
element
.
textContent
.
includes
(
text
)
;
}
)
;
}
