"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
CHROME_URL_ROOT
+
"
helper
-
telemetry
.
js
"
this
)
;
add_task
(
async
function
(
)
{
setupTelemetryTest
(
)
;
const
{
tab
}
=
await
openAboutDebugging
(
)
;
const
openEvents
=
readAboutDebuggingEvents
(
)
.
filter
(
e
=
>
e
.
method
=
=
=
"
open_adbg
"
)
;
is
(
openEvents
.
length
1
"
Exactly
one
open
event
was
logged
for
about
:
debugging
"
)
;
const
sessionId
=
openEvents
[
0
]
.
extras
.
session_id
;
ok
(
!
isNaN
(
sessionId
)
"
Open
event
has
a
valid
session
id
"
)
;
await
removeTab
(
tab
)
;
const
closeEvents
=
readAboutDebuggingEvents
(
)
.
filter
(
e
=
>
e
.
method
=
=
=
"
close_adbg
"
)
;
is
(
closeEvents
.
length
1
"
Exactly
one
close
event
was
logged
for
about
:
debugging
"
)
;
is
(
closeEvents
[
0
]
.
extras
.
session_id
sessionId
"
Close
event
has
the
same
session
id
as
the
open
event
"
)
;
}
)
;
