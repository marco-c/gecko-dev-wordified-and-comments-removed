"
use
strict
"
;
const
{
l10n
}
=
require
(
"
.
.
/
modules
/
l10n
"
)
;
const
{
DEBUG_TARGETS
REQUEST_PROCESSES_SUCCESS
}
=
require
(
"
.
.
/
constants
"
)
;
const
processComponentDataMiddleware
=
store
=
>
next
=
>
action
=
>
{
switch
(
action
.
type
)
{
case
REQUEST_PROCESSES_SUCCESS
:
{
const
mainProcessComponentData
=
toMainProcessComponentData
(
action
.
mainProcess
)
;
action
.
processes
=
[
mainProcessComponentData
]
;
break
;
}
}
return
next
(
action
)
;
}
;
function
toMainProcessComponentData
(
process
)
{
const
type
=
DEBUG_TARGETS
.
PROCESS
;
const
id
=
process
.
processFront
.
actorID
;
const
icon
=
"
chrome
:
/
/
devtools
/
skin
/
images
/
aboutdebugging
-
process
-
icon
.
svg
"
;
const
name
=
l10n
.
getString
(
"
about
-
debugging
-
main
-
process
-
name
"
)
;
const
description
=
l10n
.
getString
(
"
about
-
debugging
-
main
-
process
-
description2
"
)
;
return
{
name
icon
id
type
details
:
{
description
processId
:
process
.
id
}
}
;
}
module
.
exports
=
processComponentDataMiddleware
;
