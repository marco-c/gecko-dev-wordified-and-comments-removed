"
use
strict
"
;
const
{
check
}
=
require
(
"
devtools
/
shared
/
adb
/
adb
-
running
-
checker
"
)
;
const
{
ADBScanner
}
=
require
(
"
devtools
/
shared
/
adb
/
adb
-
scanner
"
)
;
const
{
GetAvailableAddons
}
=
require
(
"
devtools
/
client
/
webide
/
modules
/
addons
"
)
;
function
addUSBRuntimesObserver
(
listener
)
{
ADBScanner
.
on
(
"
runtime
-
list
-
updated
"
listener
)
;
}
exports
.
addUSBRuntimesObserver
=
addUSBRuntimesObserver
;
function
disableUSBRuntimes
(
)
{
ADBScanner
.
disable
(
)
;
}
exports
.
disableUSBRuntimes
=
disableUSBRuntimes
;
async
function
enableUSBRuntimes
(
)
{
const
{
adb
}
=
GetAvailableAddons
(
)
;
if
(
adb
.
status
=
=
=
"
uninstalled
"
|
|
!
(
await
check
(
)
)
)
{
console
.
error
(
"
ADB
extension
is
not
installed
"
)
;
return
;
}
ADBScanner
.
enable
(
)
;
}
exports
.
enableUSBRuntimes
=
enableUSBRuntimes
;
function
getUSBRuntimes
(
)
{
return
ADBScanner
.
listRuntimes
(
)
;
}
exports
.
getUSBRuntimes
=
getUSBRuntimes
;
function
removeUSBRuntimesObserver
(
listener
)
{
ADBScanner
.
off
(
"
runtime
-
list
-
updated
"
listener
)
;
}
exports
.
removeUSBRuntimesObserver
=
removeUSBRuntimesObserver
;
