"
use
strict
"
;
const
{
TAKE_SCREENSHOT_START
TAKE_SCREENSHOT_END
}
=
require
(
"
devtools
/
client
/
responsive
/
actions
/
index
"
)
;
const
message
=
require
(
"
devtools
/
client
/
responsive
/
utils
/
message
"
)
;
const
animationFrame
=
(
)
=
>
new
Promise
(
resolve
=
>
{
window
.
requestAnimationFrame
(
resolve
)
;
}
)
;
module
.
exports
=
{
takeScreenshot
(
)
{
return
async
function
(
{
dispatch
}
)
{
await
dispatch
(
{
type
:
TAKE_SCREENSHOT_START
}
)
;
await
animationFrame
(
)
;
window
.
postMessage
(
{
type
:
"
screenshot
"
}
"
*
"
)
;
await
message
.
wait
(
window
"
screenshot
-
captured
"
)
;
dispatch
(
{
type
:
TAKE_SCREENSHOT_END
}
)
;
}
;
}
}
;
