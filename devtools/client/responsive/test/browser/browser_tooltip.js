"
use
strict
"
;
const
TEST_CONTENT
=
<
h1
title
=
"
test
title
"
>
test
h1
<
/
h1
>
;
const
TEST_URL
=
data
:
text
/
html
;
charset
=
utf
-
8
{
TEST_CONTENT
}
;
addRDMTask
(
TEST_URL
async
(
{
ui
}
)
=
>
{
info
(
"
Show
a
tooltip
"
)
;
await
spawnViewportTask
(
ui
{
}
async
(
)
=
>
{
const
target
=
content
.
document
.
querySelector
(
"
h1
"
)
;
await
EventUtils
.
synthesizeMouse
(
target
1
1
{
type
:
"
mouseover
"
isSynthesized
:
false
}
content
)
;
await
EventUtils
.
synthesizeMouse
(
target
2
1
{
type
:
"
mousemove
"
isSynthesized
:
false
}
content
)
;
await
EventUtils
.
synthesizeMouse
(
target
3
1
{
type
:
"
mousemove
"
isSynthesized
:
false
}
content
)
;
}
)
;
info
(
"
Wait
for
showing
the
tooltip
"
)
;
const
tooltip
=
ui
.
browserWindow
.
gBrowser
.
ownerDocument
.
getElementById
(
"
remoteBrowserTooltip
"
)
;
await
waitUntil
(
(
)
=
>
tooltip
.
state
=
=
=
"
open
"
)
;
info
(
"
Test
the
X
coordinate
of
the
tooltip
"
)
;
isnot
(
tooltip
.
screenX
0
"
The
X
coordinate
of
tooltip
should
not
be
0
"
)
;
}
)
;
