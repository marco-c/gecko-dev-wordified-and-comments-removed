"
use
strict
"
;
const
TEST_NETWORK_REQUEST_URI
=
"
http
:
/
/
example
.
com
/
browser
/
devtools
/
client
/
webconsole
/
test
/
"
+
"
test
-
network
-
request
.
html
"
;
add_task
(
function
*
(
)
{
let
finishedRequest
=
waitForFinishedRequest
(
(
{
request
}
)
=
>
{
return
request
.
url
.
endsWith
(
"
test
-
network
-
request
.
html
"
)
;
}
)
;
const
hud
=
yield
loadPageAndGetHud
(
TEST_NETWORK_REQUEST_URI
)
;
let
request
=
yield
finishedRequest
;
yield
hud
.
ui
.
openNetworkPanel
(
request
.
actor
)
;
let
toolbox
=
gDevTools
.
getToolbox
(
hud
.
target
)
;
is
(
toolbox
.
currentToolId
"
netmonitor
"
"
Network
panel
was
opened
"
)
;
let
panel
=
toolbox
.
getCurrentPanel
(
)
;
let
{
gStore
windowRequire
}
=
panel
.
panelWin
;
let
Actions
=
windowRequire
(
"
devtools
/
client
/
netmonitor
/
src
/
actions
/
index
"
)
;
let
{
NetMonitorController
}
=
windowRequire
(
"
devtools
/
client
/
netmonitor
/
src
/
netmonitor
-
controller
"
)
;
let
{
getSelectedRequest
}
=
windowRequire
(
"
devtools
/
client
/
netmonitor
/
src
/
selectors
/
index
"
)
;
let
selected
=
getSelectedRequest
(
gStore
.
getState
(
)
)
;
is
(
selected
.
method
request
.
request
.
method
"
The
correct
request
is
selected
"
)
;
is
(
selected
.
url
request
.
request
.
url
"
The
correct
request
is
definitely
selected
"
)
;
}
)
;
