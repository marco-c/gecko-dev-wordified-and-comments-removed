"
use
strict
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
browserconsole
.
contentMessages
"
true
)
;
const
hud
=
await
HUDService
.
toggleBrowserConsole
(
)
;
await
hud
.
ui
.
clearOutput
(
)
;
const
expectedMessages
=
[
Cu
.
reportError
]
;
const
jsterm
=
hud
.
jsterm
;
await
jsterm
.
execute
(
Cu
.
reportError
(
"
Cu
.
reportError
"
)
;
)
;
info
(
"
Wait
for
expected
message
are
shown
on
browser
console
"
)
;
await
waitFor
(
(
)
=
>
expectedMessages
.
every
(
expectedMessage
=
>
findMessage
(
hud
expectedMessage
)
)
)
;
ok
(
true
"
Expected
messages
are
displayed
in
the
browser
console
"
)
;
info
(
"
Uncheck
the
Show
content
messages
checkbox
"
)
;
const
checkbox
=
hud
.
ui
.
outputNode
.
querySelector
(
"
.
webconsole
-
filterbar
-
primary
.
filter
-
checkbox
"
)
;
checkbox
.
click
(
)
;
await
jsterm
.
execute
(
await
new
Promise
(
res
=
>
setTimeout
(
res
1000
)
)
;
)
;
info
(
"
Check
the
expected
messages
are
still
visiable
in
the
browser
console
"
)
;
for
(
const
expectedMessage
of
expectedMessages
)
{
ok
(
findMessage
(
hud
expectedMessage
)
"
{
expectedMessage
}
"
should
be
still
visiable
)
;
}
}
)
;
