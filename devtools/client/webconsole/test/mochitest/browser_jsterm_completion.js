"
use
strict
"
;
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf8
<
p
>
test
code
completion
"
;
add_task
(
async
function
(
)
{
const
{
jsterm
ui
}
=
await
openNewTabAndConsole
(
TEST_URI
)
;
const
input
=
jsterm
.
inputNode
;
await
jstermSetValueAndComplete
(
jsterm
"
docu
"
)
;
is
(
input
.
value
"
docu
"
"
'
docu
'
completion
(
input
.
value
)
"
)
;
is
(
jsterm
.
completeNode
.
value
"
ment
"
"
'
docu
'
completion
(
completeNode
)
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
docu
"
undefined
jsterm
.
COMPLETE_FORWARD
)
;
is
(
input
.
value
"
document
"
"
'
docu
'
tab
completion
"
)
;
is
(
input
.
selectionStart
8
"
start
selection
is
alright
"
)
;
is
(
input
.
selectionEnd
8
"
end
selection
is
alright
"
)
;
is
(
jsterm
.
completeNode
.
value
.
replace
(
/
/
g
"
"
)
"
"
"
'
docu
'
completed
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
window
.
Ob
"
undefined
jsterm
.
COMPLETE_FORWARD
)
;
is
(
input
.
value
"
window
.
Object
"
"
'
window
.
Ob
'
tab
completion
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
document
.
getElem
"
undefined
jsterm
.
COMPLETE_FORWARD
)
;
is
(
input
.
value
"
document
.
getElem
"
"
'
document
.
getElem
'
completion
"
)
;
is
(
jsterm
.
completeNode
.
value
"
entsByTagNameNS
"
"
'
document
.
getElem
'
completion
"
)
;
await
jsterm
.
complete
(
jsterm
.
COMPLETE_FORWARD
)
;
is
(
input
.
value
"
document
.
getElem
"
"
'
document
.
getElem
'
completion
"
)
;
is
(
jsterm
.
completeNode
.
value
"
entsByTagName
"
"
'
document
.
getElem
'
another
tab
completion
"
)
;
await
jstermComplete
(
jsterm
jsterm
.
COMPLETE_BACKWARD
)
;
is
(
input
.
value
"
document
.
getElem
"
"
'
document
.
getElem
'
untab
completion
"
)
;
is
(
jsterm
.
completeNode
.
value
"
entsByTagNameNS
"
"
'
document
.
getElem
'
completion
"
)
;
ui
.
clearOutput
(
)
;
await
jstermSetValueAndComplete
(
jsterm
"
docu
"
)
;
is
(
jsterm
.
completeNode
.
value
"
ment
"
"
'
docu
'
completion
"
)
;
await
jsterm
.
execute
(
)
;
is
(
jsterm
.
completeNode
.
value
"
"
"
clear
completion
on
execute
(
)
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
console
.
log
(
'
one
'
)
;
\
nconsol
"
)
;
is
(
jsterm
.
completeNode
.
value
"
\
n
e
"
"
multi
-
line
completion
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
Object
.
name
.
sl
"
)
;
is
(
jsterm
.
completeNode
.
value
"
ice
"
"
non
-
object
completion
"
)
;
await
jstermSetValueAndComplete
(
jsterm
"
'
Asimov
'
.
sl
"
)
;
is
(
jsterm
.
completeNode
.
value
"
ice
"
"
string
literal
completion
"
)
;
}
)
;
