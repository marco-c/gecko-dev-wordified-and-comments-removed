"
use
strict
"
;
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf
-
8
Test
for
jsterm
multine
input
"
;
add_task
(
async
function
(
)
{
await
pushPref
(
"
devtools
.
webconsole
.
jsterm
.
codeMirror
"
false
)
;
await
performTests
(
)
;
await
pushPref
(
"
devtools
.
webconsole
.
jsterm
.
codeMirror
"
true
)
;
await
performTests
(
)
;
}
)
;
async
function
performTests
(
)
{
const
{
jsterm
ui
}
=
await
openNewTabAndConsole
(
TEST_URI
)
;
const
inputContainer
=
ui
.
window
.
document
.
querySelector
(
"
.
jsterm
-
input
-
container
"
)
;
const
ordinaryHeight
=
inputContainer
.
clientHeight
;
jsterm
.
setInputValue
(
"
hello
\
nworld
\
n
"
)
;
ok
(
inputContainer
.
clientHeight
>
ordinaryHeight
"
the
input
expanded
"
)
;
info
(
"
Erase
the
value
and
test
if
the
inputNode
shrinks
again
"
)
;
jsterm
.
setInputValue
(
"
"
)
;
is
(
inputContainer
.
clientHeight
ordinaryHeight
"
the
input
'
s
height
is
normal
again
"
)
;
}
