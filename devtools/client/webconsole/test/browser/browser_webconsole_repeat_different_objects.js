"
use
strict
"
;
const
TEST_URI
=
"
data
:
text
/
html
<
!
DOCTYPE
html
>
Test
repeated
objects
"
;
add_task
(
async
function
(
)
{
const
hud
=
await
openNewTabAndConsole
(
TEST_URI
)
;
const
onMessages
=
waitForMessages
(
{
hud
messages
:
[
{
text
:
"
abba
"
}
{
text
:
"
abba
"
}
{
text
:
"
abba
"
}
]
}
)
;
SpecialPowers
.
spawn
(
gBrowser
.
selectedBrowser
[
]
(
)
=
>
{
for
(
let
i
=
0
;
i
<
3
;
i
+
+
)
{
const
o
=
{
id
:
"
abba
"
}
;
content
.
console
.
log
(
"
abba
"
o
)
;
}
}
)
;
info
(
"
waiting
for
3
console
.
log
objects
with
the
exact
same
text
content
"
)
;
const
messages
=
await
onMessages
;
is
(
messages
.
length
3
"
There
are
3
messages
as
expected
.
"
)
;
}
)
;
