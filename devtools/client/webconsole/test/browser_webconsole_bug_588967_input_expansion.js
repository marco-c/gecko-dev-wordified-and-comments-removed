"
use
strict
"
;
const
TEST_URI
=
"
http
:
/
/
example
.
com
/
browser
/
devtools
/
client
/
webconsole
/
"
+
"
test
/
test
-
console
.
html
"
;
add_task
(
function
*
(
)
{
yield
loadTab
(
TEST_URI
)
;
let
hud
=
yield
openConsole
(
)
;
testInputExpansion
(
hud
)
;
}
)
;
function
testInputExpansion
(
hud
)
{
let
input
=
hud
.
jsterm
.
inputNode
;
input
.
focus
(
)
;
is
(
input
.
getAttribute
(
"
multiline
"
)
"
true
"
"
multiline
is
enabled
"
)
;
let
ordinaryHeight
=
input
.
clientHeight
;
input
.
value
=
"
hello
\
nworld
\
n
"
;
let
length
=
input
.
value
.
length
;
input
.
selectionEnd
=
length
;
input
.
selectionStart
=
length
;
EventUtils
.
sendString
(
"
d
"
)
;
ok
(
input
.
clientHeight
>
ordinaryHeight
"
the
input
expanded
"
)
;
input
.
value
=
"
"
;
EventUtils
.
sendString
(
"
d
"
)
;
is
(
input
.
clientHeight
ordinaryHeight
"
the
input
'
s
height
is
normal
again
"
)
;
input
=
length
=
null
;
}
