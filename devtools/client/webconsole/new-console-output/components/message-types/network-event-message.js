"
use
strict
"
;
const
{
createFactory
DOM
:
dom
PropTypes
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
MessageIcon
=
createFactory
(
require
(
"
devtools
/
client
/
webconsole
/
new
-
console
-
output
/
components
/
message
-
icon
"
)
.
MessageIcon
)
;
const
CollapseButton
=
createFactory
(
require
(
"
devtools
/
client
/
webconsole
/
new
-
console
-
output
/
components
/
collapse
-
button
"
)
.
CollapseButton
)
;
const
{
l10n
}
=
require
(
"
devtools
/
client
/
webconsole
/
new
-
console
-
output
/
utils
/
messages
"
)
;
const
actions
=
require
(
"
devtools
/
client
/
webconsole
/
new
-
console
-
output
/
actions
/
index
"
)
;
NetworkEventMessage
.
displayName
=
"
NetworkEventMessage
"
;
NetworkEventMessage
.
propTypes
=
{
message
:
PropTypes
.
object
.
isRequired
openNetworkPanel
:
PropTypes
.
func
.
isRequired
openLink
:
PropTypes
.
func
.
isRequired
open
:
PropTypes
.
bool
.
isRequired
}
;
function
NetworkEventMessage
(
props
)
{
const
{
dispatch
message
openNetworkPanel
open
}
=
props
;
const
{
actor
source
type
level
request
response
isXHR
totalTime
}
=
message
;
let
{
method
url
}
=
request
;
let
{
httpVersion
status
statusText
}
=
response
;
let
classes
=
[
"
message
"
"
cm
-
s
-
mozilla
"
]
;
classes
.
push
(
source
)
;
classes
.
push
(
type
)
;
classes
.
push
(
level
)
;
if
(
open
)
{
classes
.
push
(
"
open
"
)
;
}
let
statusInfo
=
"
[
]
"
;
if
(
httpVersion
&
&
status
&
&
statusText
&
&
totalTime
)
{
statusInfo
=
[
{
httpVersion
}
{
status
}
{
statusText
}
{
totalTime
}
ms
]
;
}
let
xhr
=
l10n
.
getStr
(
"
webConsoleXhrIndicator
"
)
;
function
onUrlClick
(
)
{
openNetworkPanel
(
actor
)
;
}
return
dom
.
div
(
{
className
:
classes
.
join
(
"
"
)
}
MessageIcon
(
{
level
}
)
dom
.
span
(
{
className
:
"
message
-
body
-
wrapper
message
-
body
devtools
-
monospace
"
"
aria
-
haspopup
"
:
"
true
"
}
dom
.
span
(
{
className
:
"
method
"
}
method
)
isXHR
?
dom
.
span
(
{
className
:
"
xhr
"
}
xhr
)
:
null
dom
.
a
(
{
className
:
"
url
"
title
:
url
onClick
:
onUrlClick
}
url
.
replace
(
/
\
?
.
+
/
"
"
)
)
)
)
;
}
module
.
exports
.
NetworkEventMessage
=
NetworkEventMessage
;
