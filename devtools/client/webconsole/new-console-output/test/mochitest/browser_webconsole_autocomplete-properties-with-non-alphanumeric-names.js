"
use
strict
"
;
add_task
(
function
*
(
)
{
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf8
test
autocompletion
with
"
+
"
or
_
"
;
yield
loadTab
(
TEST_URI
)
;
function
*
autocomplete
(
term
)
{
let
deferred
=
defer
(
)
;
jsterm
.
setInputValue
(
term
)
;
jsterm
.
complete
(
jsterm
.
COMPLETE_HINT_ONLY
deferred
.
resolve
)
;
yield
deferred
.
promise
;
ok
(
popup
.
itemCount
>
0
"
There
'
s
"
+
popup
.
itemCount
+
"
suggestions
for
'
"
+
term
+
"
'
"
)
;
}
let
{
jsterm
}
=
yield
openConsole
(
)
;
let
popup
=
jsterm
.
autocompletePopup
;
yield
jsterm
.
execute
(
"
var
testObject
=
{
aaab
:
'
'
aaac
:
'
'
}
"
)
;
yield
autocomplete
(
"
Object
.
__d
"
)
;
yield
autocomplete
(
"
testObject
.
a
"
)
;
yield
autocomplete
(
"
Object
.
__de
"
)
;
yield
autocomplete
(
"
testObject
.
aa
"
)
;
yield
jsterm
.
execute
(
"
let
foobar
=
{
a
:
'
'
}
;
const
blargh
=
{
a
:
1
}
;
"
)
;
yield
autocomplete
(
"
foobar
"
)
;
yield
autocomplete
(
"
blargh
"
)
;
yield
autocomplete
(
"
foobar
.
a
"
)
;
yield
autocomplete
(
"
blargh
.
a
"
)
;
}
)
;
