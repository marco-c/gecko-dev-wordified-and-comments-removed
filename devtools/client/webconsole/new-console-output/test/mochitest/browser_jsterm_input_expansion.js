"
use
strict
"
;
const
TEST_URI
=
"
data
:
text
/
html
;
charset
=
utf
-
8
Test
for
jsterm
multine
input
"
;
add_task
(
async
function
(
)
{
let
hud
=
await
openNewTabAndConsole
(
TEST_URI
)
;
let
input
=
hud
.
jsterm
.
inputNode
;
info
(
"
Focus
the
jsterm
input
"
)
;
input
.
focus
(
)
;
let
ordinaryHeight
=
input
.
clientHeight
;
input
.
value
=
"
hello
\
nworld
\
n
"
;
let
length
=
input
.
value
.
length
;
input
.
selectionEnd
=
length
;
input
.
selectionStart
=
length
;
info
(
"
Type
'
d
'
in
jsterm
to
trigger
height
change
for
the
input
"
)
;
EventUtils
.
sendString
(
"
d
"
)
;
ok
(
input
.
clientHeight
>
ordinaryHeight
"
the
input
expanded
"
)
;
info
(
"
Erase
the
value
and
test
if
the
inputNode
shrinks
again
"
)
;
input
.
value
=
"
"
;
EventUtils
.
sendString
(
"
d
"
)
;
is
(
input
.
clientHeight
ordinaryHeight
"
the
input
'
s
height
is
normal
again
"
)
;
}
)
;
