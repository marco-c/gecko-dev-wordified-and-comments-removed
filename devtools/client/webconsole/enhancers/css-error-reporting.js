"
use
strict
"
;
const
{
INITIALIZE
FILTER_TOGGLE
FILTERS
}
=
require
(
"
devtools
/
client
/
webconsole
/
constants
"
)
;
function
ensureCSSErrorReportingEnabled
(
webConsoleUI
)
{
let
watchingCSSMessages
=
false
;
return
next
=
>
(
reducer
initialState
enhancer
)
=
>
{
function
ensureErrorReportingEnhancer
(
state
action
)
{
state
=
reducer
(
state
action
)
;
if
(
!
webConsoleUI
|
|
watchingCSSMessages
|
|
!
state
.
filters
.
css
)
{
return
state
;
}
const
cssFilterToggled
=
action
.
type
=
=
FILTER_TOGGLE
&
&
action
.
filter
=
=
FILTERS
.
CSS
;
if
(
cssFilterToggled
|
|
action
.
type
=
=
INITIALIZE
)
{
watchingCSSMessages
=
true
;
webConsoleUI
.
watchCssMessages
(
)
;
}
return
state
;
}
return
next
(
ensureErrorReportingEnhancer
initialState
enhancer
)
;
}
;
}
module
.
exports
=
ensureCSSErrorReportingEnabled
;
