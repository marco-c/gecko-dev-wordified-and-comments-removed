"
use
strict
"
;
const
{
Component
createFactory
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
PropTypes
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
prop
-
types
"
)
;
const
dom
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
-
factories
"
)
;
const
{
l10n
}
=
require
(
"
devtools
/
client
/
webconsole
/
utils
/
messages
"
)
;
const
actions
=
require
(
"
devtools
/
client
/
webconsole
/
actions
/
index
"
)
;
const
Message
=
createFactory
(
require
(
"
devtools
/
client
/
webconsole
/
components
/
Output
/
Message
"
)
)
;
loader
.
lazyRequireGetter
(
this
"
GripMessageBody
"
"
devtools
/
client
/
webconsole
/
components
/
Output
/
GripMessageBody
"
)
;
class
CSSWarning
extends
Component
{
static
get
propTypes
(
)
{
return
{
dispatch
:
PropTypes
.
func
.
isRequired
inWarningGroup
:
PropTypes
.
bool
.
isRequired
message
:
PropTypes
.
object
.
isRequired
open
:
PropTypes
.
bool
cssMatchingElements
:
PropTypes
.
object
repeat
:
PropTypes
.
any
serviceContainer
:
PropTypes
.
object
timestampsVisible
:
PropTypes
.
bool
.
isRequired
setExpanded
:
PropTypes
.
func
}
;
}
static
get
defaultProps
(
)
{
return
{
open
:
false
}
;
}
static
get
displayName
(
)
{
return
"
CSSWarning
"
;
}
constructor
(
props
)
{
super
(
props
)
;
this
.
onToggle
=
this
.
onToggle
.
bind
(
this
)
;
}
onToggle
(
messageId
)
{
const
{
dispatch
message
cssMatchingElements
open
}
=
this
.
props
;
if
(
open
)
{
dispatch
(
actions
.
messageClose
(
messageId
)
)
;
}
else
if
(
cssMatchingElements
)
{
dispatch
(
actions
.
messageOpen
(
messageId
)
)
;
}
else
{
dispatch
(
actions
.
messageGetMatchingElements
(
message
)
)
;
dispatch
(
actions
.
messageOpen
(
messageId
)
)
;
}
}
render
(
)
{
const
{
dispatch
message
open
cssMatchingElements
repeat
serviceContainer
timestampsVisible
inWarningGroup
setExpanded
}
=
this
.
props
;
const
{
id
:
messageId
indent
cssSelectors
source
type
level
messageText
frame
exceptionDocURL
timeStamp
notes
}
=
message
;
let
messageBody
;
if
(
typeof
messageText
=
=
=
"
string
"
)
{
messageBody
=
messageText
;
}
else
if
(
typeof
messageText
=
=
=
"
object
"
&
&
messageText
.
type
=
=
=
"
longString
"
)
{
messageBody
=
{
message
.
messageText
.
initial
}
;
}
const
attachment
=
open
&
&
cssMatchingElements
!
=
=
undefined
&
&
dom
.
div
(
{
className
:
"
devtools
-
monospace
"
}
dom
.
div
(
{
className
:
"
elements
-
label
"
}
l10n
.
getFormatStr
(
"
webconsole
.
cssWarningElements
.
label
"
[
cssSelectors
]
)
)
GripMessageBody
(
{
dispatch
escapeWhitespace
:
false
grip
:
cssMatchingElements
serviceContainer
setExpanded
}
)
)
;
return
Message
(
{
attachment
collapsible
:
!
!
cssSelectors
.
length
dispatch
exceptionDocURL
frame
indent
inWarningGroup
level
messageBody
messageId
notes
open
onToggle
:
this
.
onToggle
repeat
serviceContainer
source
timeStamp
timestampsVisible
topLevelClasses
:
[
]
type
message
}
)
;
}
}
module
.
exports
=
createFactory
(
CSSWarning
)
;
