"
use
strict
"
;
add_task
(
function
*
(
)
{
let
newWindowPromise
=
BrowserTestUtils
.
waitForNewWindow
(
)
;
window
.
open
(
"
about
:
blank
"
"
_blank
"
)
;
let
newWindow
=
yield
newWindowPromise
;
newWindow
.
focus
(
)
;
yield
once
(
newWindow
.
gBrowser
"
load
"
true
)
;
let
tab
=
newWindow
.
gBrowser
.
selectedTab
;
yield
ResponsiveUIManager
.
openIfNeeded
(
newWindow
tab
)
;
ok
(
ResponsiveUIManager
.
isActiveForTab
(
tab
)
"
ResponsiveUI
should
be
active
for
tab
when
the
window
is
closed
"
)
;
let
offPromise
=
once
(
ResponsiveUIManager
"
off
"
)
;
yield
BrowserTestUtils
.
closeWindow
(
newWindow
)
;
yield
offPromise
;
}
)
;
