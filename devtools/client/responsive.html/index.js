"
use
strict
"
;
const
{
utils
:
Cu
}
=
Components
;
const
{
BrowserLoader
}
=
Cu
.
import
(
"
resource
:
/
/
devtools
/
client
/
shared
/
browser
-
loader
.
js
"
{
}
)
;
const
{
require
}
=
BrowserLoader
(
"
resource
:
/
/
devtools
/
client
/
responsive
.
html
/
"
this
)
;
const
Telemetry
=
require
(
"
devtools
/
client
/
shared
/
telemetry
"
)
;
const
{
createFactory
createElement
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
"
)
;
const
ReactDOM
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
dom
"
)
;
const
{
Provider
}
=
require
(
"
devtools
/
client
/
shared
/
vendor
/
react
-
redux
"
)
;
const
App
=
createFactory
(
require
(
"
.
/
app
"
)
)
;
const
Store
=
require
(
"
.
/
store
"
)
;
const
{
changeLocation
}
=
require
(
"
.
/
actions
/
location
"
)
;
const
{
addViewport
}
=
require
(
"
.
/
actions
/
viewports
"
)
;
let
bootstrap
=
{
telemetry
:
new
Telemetry
(
)
store
:
null
init
(
)
{
this
.
telemetry
.
toolOpened
(
"
responsive
"
)
;
let
store
=
this
.
store
=
Store
(
)
;
let
app
=
createElement
(
App
)
;
let
provider
=
createElement
(
Provider
{
store
}
app
)
;
ReactDOM
.
render
(
provider
document
.
querySelector
(
"
#
app
"
)
)
;
}
destroy
(
)
{
this
.
store
=
null
;
this
.
telemetry
.
toolClosed
(
"
responsive
"
)
;
this
.
telemetry
=
null
;
}
dispatch
(
action
)
{
this
.
store
.
dispatch
(
action
)
;
}
}
;
window
.
addEventListener
(
"
load
"
function
onLoad
(
)
{
window
.
removeEventListener
(
"
load
"
onLoad
)
;
bootstrap
.
init
(
)
;
}
)
;
window
.
addEventListener
(
"
unload
"
function
onUnload
(
)
{
window
.
removeEventListener
(
"
unload
"
onUnload
)
;
bootstrap
.
destroy
(
)
;
}
)
;
window
.
dispatch
=
action
=
>
bootstrap
.
dispatch
(
action
)
;
window
.
addInitialViewport
=
contentURI
=
>
{
try
{
bootstrap
.
dispatch
(
changeLocation
(
contentURI
)
)
;
bootstrap
.
dispatch
(
addViewport
(
)
)
;
}
catch
(
e
)
{
console
.
error
(
e
)
;
}
}
;
