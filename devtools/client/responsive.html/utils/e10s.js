"
use
strict
"
;
const
promise
=
require
(
"
promise
"
)
;
module
.
exports
=
{
waitForMessage
(
mm
message
)
{
let
deferred
=
promise
.
defer
(
)
;
let
onMessage
=
event
=
>
{
mm
.
removeMessageListener
(
message
onMessage
)
;
deferred
.
resolve
(
)
;
}
;
mm
.
addMessageListener
(
message
onMessage
)
;
return
deferred
.
promise
;
}
}
;
