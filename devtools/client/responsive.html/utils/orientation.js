"
use
strict
"
;
const
{
PORTRAIT_PRIMARY
LANDSCAPE_PRIMARY
}
=
require
(
"
.
.
/
constants
"
)
;
function
getOrientation
(
device
viewport
angleToRotateTo
=
null
)
{
const
{
width
:
deviceWidth
height
:
deviceHeight
}
=
device
;
const
{
width
:
viewportWidth
height
:
viewportHeight
}
=
viewport
;
const
primaryOrientation
=
deviceHeight
>
=
deviceWidth
?
PORTRAIT_PRIMARY
:
LANDSCAPE_PRIMARY
;
const
currentOrientation
=
viewportHeight
>
=
viewportWidth
?
PORTRAIT_PRIMARY
:
LANDSCAPE_PRIMARY
;
let
angle
;
if
(
typeof
angleToRotateTo
=
=
=
"
number
"
)
{
angle
=
angleToRotateTo
;
}
else
if
(
currentOrientation
!
=
=
primaryOrientation
)
{
angle
=
90
;
}
else
{
angle
=
0
;
}
let
orientationType
=
currentOrientation
;
if
(
currentOrientation
!
=
=
primaryOrientation
&
&
angleToRotateTo
=
=
=
0
)
{
orientationType
=
primaryOrientation
;
}
else
if
(
angleToRotateTo
=
=
=
90
|
|
angleToRotateTo
=
=
=
270
)
{
if
(
currentOrientation
.
includes
(
"
portrait
"
)
)
{
orientationType
=
LANDSCAPE_PRIMARY
;
}
else
if
(
currentOrientation
.
includes
(
"
landscape
"
)
)
{
orientationType
=
PORTRAIT_PRIMARY
;
}
}
return
{
type
:
orientationType
angle
}
;
}
exports
.
getOrientation
=
getOrientation
;
