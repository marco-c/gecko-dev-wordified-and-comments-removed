"
use
strict
"
;
const
TEST_URL
=
"
data
:
text
/
html
;
charset
=
utf
-
8
"
;
const
Types
=
require
(
"
devtools
/
client
/
responsive
.
html
/
types
"
)
;
const
{
getStr
}
=
require
(
"
devtools
/
client
/
responsive
.
html
/
utils
/
l10n
"
)
;
add_task
(
async
function
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
devtools
.
devices
.
url
"
TEST_URI_ROOT
+
"
wrong_devices_file
.
json
"
]
]
}
)
;
}
)
;
addRDMTask
(
TEST_URL
async
function
(
{
ui
}
)
{
const
{
store
document
}
=
ui
.
toolWindow
;
const
select
=
document
.
querySelector
(
"
.
viewport
-
device
-
selector
"
)
;
await
waitUntilState
(
store
state
=
>
state
.
viewports
.
length
=
=
1
&
&
state
.
devices
.
listState
=
=
Types
.
loadableState
.
ERROR
)
;
const
placeholder
=
select
.
options
[
select
.
selectedIndex
]
.
innerHTML
;
ok
(
placeholder
=
=
getStr
(
"
responsive
.
deviceListError
"
)
"
Device
selector
indicates
an
error
"
)
;
ok
(
select
.
disabled
"
Device
selector
is
disabled
"
)
;
}
)
;
