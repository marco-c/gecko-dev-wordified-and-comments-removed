"
use
strict
"
;
add_task
(
async
function
(
)
{
const
win
=
await
BrowserTestUtils
.
openNewBrowserWindow
(
{
private
:
true
}
)
;
const
tab
=
win
.
gBrowser
.
selectedBrowser
;
const
systemPrincipal
=
Services
.
scriptSecurityManager
.
getSystemPrincipal
(
)
;
tab
.
loadURI
(
MAIN_DOMAIN
+
"
storage
-
cache
-
error
.
html
"
{
triggeringPrincipal
:
systemPrincipal
}
)
;
await
BrowserTestUtils
.
browserLoaded
(
tab
)
;
const
target
=
await
TargetFactory
.
forTab
(
win
.
gBrowser
.
selectedTab
)
;
await
openStoragePanel
(
null
target
)
;
const
cacheItemId
=
[
"
Cache
"
"
http
:
/
/
test2
.
example
.
org
"
]
;
await
selectTreeItem
(
cacheItemId
)
;
ok
(
gUI
.
tree
.
isSelected
(
cacheItemId
)
The
item
{
cacheItemId
.
join
(
"
>
"
)
}
is
present
in
the
tree
)
;
await
BrowserTestUtils
.
closeWindow
(
win
)
;
}
)
;
