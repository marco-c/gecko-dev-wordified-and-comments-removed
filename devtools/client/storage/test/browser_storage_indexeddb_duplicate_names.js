"
use
strict
"
;
add_task
(
async
function
(
)
{
await
SpecialPowers
.
pushPrefEnv
(
{
set
:
[
[
"
dom
.
indexedDB
.
storageOption
.
enabled
"
true
]
]
}
)
;
const
TESTPAGE
=
MAIN_DOMAIN
+
"
storage
-
indexeddb
-
duplicate
-
names
.
html
"
;
setPermission
(
TESTPAGE
"
indexedDB
"
)
;
await
openTabAndSetupStorage
(
TESTPAGE
)
;
await
checkState
(
[
[
[
"
indexedDB
"
"
http
:
/
/
test1
.
example
.
org
"
]
[
"
idb1
(
default
)
"
"
idb1
(
temporary
)
"
"
idb1
(
persistent
)
"
"
idb2
(
default
)
"
"
idb2
(
temporary
)
"
"
idb2
(
persistent
)
"
]
]
]
)
;
await
finishTests
(
)
;
}
)
;
