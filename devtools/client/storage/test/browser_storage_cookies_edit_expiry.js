"
use
strict
"
;
add_task
(
async
function
(
)
{
await
openTabAndSetupStorage
(
MAIN_DOMAIN
+
"
storage
-
cookies
.
html
"
)
;
showAllColumns
(
true
)
;
showColumn
(
"
uniqueKey
"
false
)
;
const
date
=
new
Date
(
)
;
const
futureExpires
=
date
.
setDate
(
date
.
getDate
(
)
+
2000
)
;
const
id
=
getCookieId
(
"
test4
"
"
test1
.
example
.
org
"
"
/
browser
"
)
;
const
originalExpires
=
Date
.
parse
(
getRowValues
(
id
)
.
expires
)
;
await
editCell
(
id
"
expires
"
date
.
toGMTString
(
)
false
)
;
const
capExpires
=
Date
.
parse
(
getRowValues
(
id
)
.
expires
)
;
Assert
.
greater
(
futureExpires
originalExpires
"
We
have
tried
to
set
an
expires
greater
than
the
original
one
"
)
;
Assert
.
greater
(
capExpires
originalExpires
"
The
final
expires
is
greater
than
the
original
one
"
)
;
Assert
.
greater
(
futureExpires
capExpires
"
But
still
lower
than
the
future
value
"
)
;
}
)
;
