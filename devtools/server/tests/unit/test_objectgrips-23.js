"
use
strict
"
;
Services
.
prefs
.
setBoolPref
(
"
security
.
allow_eval_with_system_principal
"
true
)
;
registerCleanupFunction
(
(
)
=
>
{
Services
.
prefs
.
clearUserPref
(
"
security
.
allow_eval_with_system_principal
"
)
;
}
)
;
add_task
(
threadFrontTest
(
async
(
{
threadFront
debuggee
}
)
=
>
{
await
new
Promise
(
function
(
resolve
)
{
threadFront
.
once
(
"
paused
"
async
function
(
packet
)
{
const
[
grip
]
=
packet
.
frame
.
arguments
;
strictEqual
(
grip
.
class
"
Function
"
Grip
has
expected
value
for
"
class
"
property
)
;
strictEqual
(
grip
.
isClassConstructor
true
Grip
has
expected
value
for
"
isClassConstructor
"
property
)
;
await
threadFront
.
resume
(
)
;
resolve
(
)
;
}
)
;
debuggee
.
eval
(
class
MyClass
{
}
;
stopMe
(
MyClass
)
;
function
stopMe
(
arg1
)
{
debugger
;
}
)
;
}
)
;
}
)
)
;
