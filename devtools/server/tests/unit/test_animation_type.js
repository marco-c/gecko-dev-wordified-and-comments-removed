"
use
strict
"
;
const
{
ANIMATION_TYPES
AnimationPlayerActor
}
=
require
(
"
devtools
/
server
/
actors
/
animation
"
)
;
function
run_test
(
)
{
let
window
=
{
MutationObserver
:
function
(
)
{
this
.
observe
=
(
)
=
>
{
}
;
}
Animation
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
CSSAnimation
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
CSSTransition
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
}
;
window
.
CSSAnimation
.
prototype
=
Object
.
create
(
window
.
Animation
.
prototype
)
;
window
.
CSSTransition
.
prototype
=
Object
.
create
(
window
.
Animation
.
prototype
)
;
function
getMockNode
(
)
{
return
{
ownerDocument
:
{
defaultView
:
window
}
}
;
}
const
TEST_DATA
=
[
{
desc
:
"
Test
CSSAnimation
type
"
animation
:
new
window
.
CSSAnimation
(
)
expectedType
:
ANIMATION_TYPES
.
CSS_ANIMATION
}
{
desc
:
"
Test
CSSTransition
type
"
animation
:
new
window
.
CSSTransition
(
)
expectedType
:
ANIMATION_TYPES
.
CSS_TRANSITION
}
{
desc
:
"
Test
ScriptAnimation
type
"
animation
:
new
window
.
Animation
(
)
expectedType
:
ANIMATION_TYPES
.
SCRIPT_ANIMATION
}
{
desc
:
"
Test
unknown
type
"
animation
:
{
effect
:
{
target
:
getMockNode
(
)
}
}
expectedType
:
ANIMATION_TYPES
.
UNKNOWN
}
]
;
for
(
let
{
desc
animation
expectedType
}
of
TEST_DATA
)
{
do_print
(
desc
)
;
let
actor
=
AnimationPlayerActor
(
{
}
animation
)
;
do_check_eq
(
actor
.
getType
(
)
expectedType
)
;
}
}
