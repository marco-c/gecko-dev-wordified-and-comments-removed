"
use
strict
"
;
const
{
AnimationPlayerActor
}
=
require
(
"
devtools
/
server
/
actors
/
animation
"
)
;
function
run_test
(
)
{
let
window
=
{
MutationObserver
:
function
(
)
{
this
.
observe
=
(
)
=
>
{
}
;
}
Animation
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
CSSAnimation
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
CSSTransition
:
function
(
)
{
this
.
effect
=
{
target
:
getMockNode
(
)
}
;
}
}
;
function
getMockNode
(
)
{
return
{
ownerDocument
:
{
defaultView
:
window
}
}
;
}
const
TEST_DATA
=
[
{
desc
:
"
Animation
with
an
id
"
animation
:
new
window
.
Animation
(
)
props
:
{
id
:
"
animation
-
id
"
}
expectedName
:
"
animation
-
id
"
}
{
desc
:
"
CSSTransition
with
an
id
"
animation
:
new
window
.
CSSTransition
(
)
props
:
{
id
:
"
transition
-
with
-
id
"
transitionProperty
:
"
width
"
}
expectedName
:
"
transition
-
with
-
id
"
}
{
desc
:
"
CSSAnimation
with
an
id
"
animation
:
new
window
.
CSSAnimation
(
)
props
:
{
id
:
"
animation
-
with
-
id
"
animationName
:
"
move
"
}
expectedName
:
"
animation
-
with
-
id
"
}
{
desc
:
"
CSSTransition
without
an
id
"
animation
:
new
window
.
CSSTransition
(
)
props
:
{
transitionProperty
:
"
width
"
}
expectedName
:
"
width
"
}
{
desc
:
"
CSSAnimation
without
an
id
"
animation
:
new
window
.
CSSAnimation
(
)
props
:
{
animationName
:
"
move
"
}
expectedName
:
"
move
"
}
]
;
for
(
let
{
desc
animation
props
expectedName
}
of
TEST_DATA
)
{
do_print
(
desc
)
;
for
(
let
key
in
props
)
{
animation
[
key
]
=
props
[
key
]
;
}
let
actor
=
AnimationPlayerActor
(
{
}
animation
)
;
do_check_eq
(
actor
.
getName
(
)
expectedName
)
;
}
}
