"
use
strict
"
;
add_task
(
function
*
(
)
{
let
{
client
walker
animations
}
=
yield
initAnimationsFrontForUrl
(
MAIN_DOMAIN
+
"
animation
.
html
"
)
;
yield
playerHasCompleteStateAtAllTimes
(
walker
animations
)
;
yield
closeDebuggerClient
(
client
)
;
gBrowser
.
removeCurrentTab
(
)
;
}
)
;
function
*
playerHasCompleteStateAtAllTimes
(
walker
animations
)
{
let
node
=
yield
walker
.
querySelector
(
walker
.
rootNode
"
.
simple
-
animation
"
)
;
let
[
player
]
=
yield
animations
.
getAnimationPlayersForNode
(
node
)
;
yield
player
.
ready
(
)
;
let
keys
=
Object
.
keys
(
player
.
initialState
)
;
for
(
let
i
=
0
;
i
<
10
;
i
+
+
)
{
let
state
=
yield
player
.
getCurrentState
(
)
;
keys
.
forEach
(
key
=
>
{
ok
(
typeof
state
[
key
]
!
=
=
"
undefined
"
"
The
state
retrieved
has
key
"
+
key
)
;
}
)
;
}
}
