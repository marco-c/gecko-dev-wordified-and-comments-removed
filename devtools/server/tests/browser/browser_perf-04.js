"
use
strict
"
;
add_task
(
async
function
(
)
{
const
{
front
client
}
=
await
initPerfFront
(
)
;
is
(
await
front
.
isSupportedPlatform
(
)
true
"
This
test
only
runs
on
supported
platforms
.
"
)
;
is
(
await
front
.
isLockedForPrivateBrowsing
(
)
false
"
The
browser
is
not
in
private
browsing
mode
.
"
)
;
is
(
await
front
.
isActive
(
)
false
"
The
profiler
is
not
active
yet
.
"
)
;
front
.
once
(
"
profiler
-
started
"
(
entries
interval
features
duration
)
=
>
{
is
(
entries
1024
"
Should
apply
entries
by
startProfiler
"
)
;
is
(
interval
0
.
1
"
Should
apply
interval
by
startProfiler
"
)
;
is
(
typeof
features
"
number
"
"
Should
apply
features
by
startProfiler
"
)
;
is
(
duration
2
"
Should
apply
duration
by
startProfiler
"
)
;
}
)
;
await
front
.
startProfiler
(
{
entries
:
1000
duration
:
2
interval
:
0
.
1
features
:
[
"
js
"
"
stackwalk
"
]
}
)
;
is
(
await
front
.
isActive
(
)
true
"
The
profiler
is
active
.
"
)
;
await
front
.
stopProfilerAndDiscardProfile
(
)
;
await
front
.
destroy
(
)
;
await
client
.
close
(
)
;
}
)
;
