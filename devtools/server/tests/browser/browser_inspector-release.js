"
use
strict
"
;
Services
.
scriptloader
.
loadSubScript
(
"
chrome
:
/
/
mochitests
/
content
/
browser
/
devtools
/
server
/
tests
/
browser
/
inspector
-
helpers
.
js
"
this
)
;
add_task
(
async
function
loadNewChild
(
)
{
const
{
target
walker
}
=
await
initInspectorFront
(
MAIN_DOMAIN
+
"
inspector
-
traversal
-
data
.
html
"
)
;
let
originalOwnershipSize
=
0
;
let
longlist
=
null
;
let
firstChild
=
null
;
const
list
=
await
walker
.
querySelectorAll
(
walker
.
rootNode
"
#
longlist
div
"
)
;
is
(
list
.
length
26
"
Expect
26
div
children
.
"
)
;
const
items
=
await
list
.
items
(
)
;
originalOwnershipSize
=
await
assertOwnershipTrees
(
walker
)
;
is
(
originalOwnershipSize
56
"
Correct
number
of
items
in
ownership
tree
"
)
;
firstChild
=
items
[
0
]
.
actorID
;
const
node
=
await
walker
.
querySelector
(
walker
.
rootNode
"
#
longlist
"
)
;
longlist
=
node
.
actorID
;
await
walker
.
releaseNode
(
node
)
;
const
newOwnershipSize
=
await
assertOwnershipTrees
(
walker
)
;
is
(
newOwnershipSize
originalOwnershipSize
-
53
"
Ownership
tree
should
be
lower
"
)
;
await
checkMissing
(
target
longlist
)
;
await
checkMissing
(
target
firstChild
)
;
}
)
;
