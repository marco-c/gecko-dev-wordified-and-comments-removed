"
use
strict
"
;
add_task
(
async
function
(
)
{
const
{
front
client
}
=
await
initPerfFront
(
)
;
const
geckoProfiler
=
Cc
[
"
mozilla
.
org
/
tools
/
profiler
;
1
"
]
.
getService
(
Ci
.
nsIProfiler
)
;
is
(
await
front
.
isActive
(
)
false
"
The
profiler
hasn
'
t
been
started
yet
.
"
)
;
await
front
.
startProfiler
(
)
;
is
(
await
front
.
isActive
(
)
true
"
The
profiler
was
started
.
"
)
;
const
profilerStopped
=
once
(
front
"
profiler
-
stopped
"
)
;
geckoProfiler
.
StopProfiler
(
)
;
await
profilerStopped
;
is
(
await
front
.
isActive
(
)
false
"
The
profiler
was
stopped
by
another
tool
.
"
)
;
await
front
.
destroy
(
)
;
await
client
.
close
(
)
;
}
)
;
