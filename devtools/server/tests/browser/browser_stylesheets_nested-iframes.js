"
use
strict
"
;
const
{
StyleSheetsFront
}
=
require
(
"
devtools
/
server
/
actors
/
stylesheets
"
)
;
add_task
(
function
*
(
)
{
let
browser
=
yield
addTab
(
MAIN_DOMAIN
+
"
stylesheets
-
nested
-
iframes
.
html
"
)
;
let
doc
=
browser
.
contentDocument
;
info
(
"
Initialising
the
debugger
server
and
client
.
"
)
;
initDebuggerServer
(
)
;
let
client
=
new
DebuggerClient
(
DebuggerServer
.
connectPipe
(
)
)
;
let
form
=
yield
connectDebuggerClient
(
client
)
;
info
(
"
Attaching
to
the
active
tab
.
"
)
;
yield
client
.
attachTab
(
form
.
actor
)
;
let
front
=
StyleSheetsFront
(
client
form
)
;
ok
(
front
"
The
StyleSheetsFront
was
created
.
"
)
;
let
sheets
=
yield
front
.
getStyleSheets
(
)
;
ok
(
sheets
"
getStyleSheets
(
)
succeeded
even
with
documentless
iframes
.
"
)
;
ok
(
sheets
.
length
>
2
sheets
.
length
+
"
sheets
found
(
expected
3
or
more
)
.
"
)
;
yield
closeDebuggerClient
(
client
)
;
}
)
;
