"
use
strict
"
;
add_task
(
async
function
(
)
{
const
{
client
walker
animations
}
=
await
initAnimationsFrontForUrl
(
MAIN_DOMAIN
+
"
animation
.
html
"
)
;
await
theRightNumberOfPlayersIsReturned
(
walker
animations
)
;
await
client
.
close
(
)
;
gBrowser
.
removeCurrentTab
(
)
;
}
)
;
async
function
theRightNumberOfPlayersIsReturned
(
walker
animations
)
{
let
node
=
await
walker
.
querySelector
(
walker
.
rootNode
"
.
not
-
animated
"
)
;
let
players
=
await
animations
.
getAnimationPlayersForNode
(
node
)
;
is
(
players
.
length
0
"
0
players
were
returned
for
the
unanimated
node
"
)
;
node
=
await
walker
.
querySelector
(
walker
.
rootNode
"
.
simple
-
animation
"
)
;
players
=
await
animations
.
getAnimationPlayersForNode
(
node
)
;
is
(
players
.
length
1
"
One
animation
player
was
returned
"
)
;
node
=
await
walker
.
querySelector
(
walker
.
rootNode
"
.
multiple
-
animations
"
)
;
players
=
await
animations
.
getAnimationPlayersForNode
(
node
)
;
is
(
players
.
length
2
"
Two
animation
players
were
returned
"
)
;
node
=
await
walker
.
querySelector
(
walker
.
rootNode
"
.
transition
"
)
;
players
=
await
animations
.
getAnimationPlayersForNode
(
node
)
;
is
(
players
.
length
1
"
One
animation
player
was
returned
for
the
transitioned
node
"
)
;
}
