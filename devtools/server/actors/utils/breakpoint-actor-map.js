"
use
strict
"
;
const
{
BreakpointActor
}
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
breakpoint
.
js
"
)
;
class
BreakpointActorMap
{
constructor
(
threadActor
)
{
this
.
_threadActor
=
threadActor
;
this
.
_actors
=
{
}
;
}
_locationKey
(
location
)
{
const
{
sourceUrl
sourceId
line
column
}
=
location
;
return
{
sourceUrl
}
:
{
sourceId
}
:
{
line
}
:
{
column
}
;
}
findActors
(
)
{
return
Object
.
values
(
this
.
_actors
)
;
}
listKeys
(
)
{
return
Object
.
keys
(
this
.
_actors
)
;
}
getOrCreateBreakpointActor
(
location
)
{
const
key
=
this
.
_locationKey
(
location
)
;
if
(
!
this
.
_actors
[
key
]
)
{
this
.
_actors
[
key
]
=
new
BreakpointActor
(
this
.
_threadActor
location
)
;
}
return
this
.
_actors
[
key
]
;
}
get
(
location
)
{
const
key
=
this
.
_locationKey
(
location
)
;
return
this
.
_actors
[
key
]
;
}
deleteActor
(
location
)
{
const
key
=
this
.
_locationKey
(
location
)
;
delete
this
.
_actors
[
key
]
;
}
removeAllBreakpoints
(
)
{
for
(
const
bpActor
of
Object
.
values
(
this
.
_actors
)
)
{
bpActor
.
removeScripts
(
)
;
}
this
.
_actors
=
{
}
;
}
}
exports
.
BreakpointActorMap
=
BreakpointActorMap
;
