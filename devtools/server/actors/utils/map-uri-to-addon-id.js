"
use
strict
"
;
const
{
Cu
}
=
require
(
"
chrome
"
)
;
const
DevToolsUtils
=
require
(
"
devtools
/
shared
/
DevToolsUtils
"
)
;
const
Services
=
require
(
"
Services
"
)
;
const
{
WebExtensionPolicy
}
=
Cu
.
getGlobalForObject
(
Services
)
;
const
B2G_ID
=
"
{
3c2e2abc
-
06d4
-
11e1
-
ac3b
-
374f68613e61
}
"
;
const
GRAPHENE_ID
=
"
{
d1bfe7d9
-
c01e
-
4237
-
998b
-
7b5f960a4314
}
"
;
if
(
!
Services
.
appinfo
|
|
Services
.
appinfo
.
processType
=
=
Services
.
appinfo
.
PROCESS_TYPE_CONTENT
|
|
Services
.
appinfo
.
ID
=
=
=
undefined
|
|
Services
.
appinfo
.
ID
=
=
B2G_ID
|
|
Services
.
appinfo
.
ID
=
=
GRAPHENE_ID
|
|
!
WebExtensionPolicy
)
{
module
.
exports
=
function
mapURIToAddonId
(
uri
)
{
return
false
;
}
;
}
else
{
module
.
exports
=
function
mapURIToAddonId
(
uri
)
{
try
{
const
policy
=
WebExtensionPolicy
.
getByURI
(
uri
)
;
return
policy
&
&
policy
.
id
;
}
catch
(
e
)
{
DevToolsUtils
.
reportException
(
"
mapURIToAddonId
"
e
)
;
return
false
;
}
}
;
}
