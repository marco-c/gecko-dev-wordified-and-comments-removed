"
use
strict
"
;
const
protocol
=
require
(
"
devtools
/
shared
/
protocol
"
)
;
const
{
symbolIteratorSpec
}
=
require
(
"
devtools
/
shared
/
specs
/
symbol
-
iterator
"
)
;
const
DevToolsUtils
=
require
(
"
devtools
/
shared
/
DevToolsUtils
"
)
;
const
SymbolIteratorActor
=
protocol
.
ActorClassWithSpec
(
symbolIteratorSpec
{
initialize
(
objectActor
)
{
protocol
.
Actor
.
prototype
.
initialize
.
call
(
this
)
;
let
symbols
=
[
]
;
if
(
DevToolsUtils
.
isSafeDebuggerObject
(
objectActor
.
obj
)
)
{
try
{
symbols
=
objectActor
.
obj
.
getOwnPropertySymbols
(
)
;
}
catch
(
err
)
{
}
}
this
.
iterator
=
{
size
:
symbols
.
length
symbolDescription
(
index
)
{
const
symbol
=
symbols
[
index
]
;
return
{
name
:
symbol
.
toString
(
)
descriptor
:
objectActor
.
_propertyDescriptor
(
symbol
)
}
;
}
}
;
}
form
(
)
{
return
{
type
:
this
.
typeName
actor
:
this
.
actorID
count
:
this
.
iterator
.
size
}
;
}
slice
(
{
start
count
}
)
{
const
ownSymbols
=
[
]
;
for
(
let
i
=
start
m
=
start
+
count
;
i
<
m
;
i
+
+
)
{
ownSymbols
.
push
(
this
.
iterator
.
symbolDescription
(
i
)
)
;
}
return
{
ownSymbols
}
;
}
all
(
)
{
return
this
.
slice
(
{
start
:
0
count
:
this
.
iterator
.
size
}
)
;
}
}
)
;
exports
.
SymbolIteratorActor
=
SymbolIteratorActor
;
