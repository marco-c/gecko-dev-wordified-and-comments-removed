"
use
strict
"
;
const
{
isNodeValid
addPseudoClassLock
removePseudoClassLock
}
=
require
(
"
devtools
/
server
/
actors
/
highlighters
/
utils
/
markup
"
)
;
const
{
loadSheet
}
=
require
(
"
devtools
/
shared
/
layout
/
utils
"
)
;
const
HIGHLIGHTED_PSEUDO_CLASS
=
"
:
-
moz
-
devtools
-
highlighted
"
;
const
SIMPLE_OUTLINE_SHEET
=
"
data
:
text
/
css
;
charset
=
utf
-
8
"
+
encodeURIComponent
(
.
__fx
-
devtools
-
hide
-
shortcut__
{
visibility
:
hidden
!
important
}
{
HIGHLIGHTED_PSEUDO_CLASS
}
{
outline
:
2px
dashed
#
F06
!
important
;
outline
-
offset
:
-
2px
!
important
}
)
;
function
SimpleOutlineHighlighter
(
highlighterEnv
)
{
this
.
chromeDoc
=
highlighterEnv
.
document
;
}
SimpleOutlineHighlighter
.
prototype
=
{
destroy
:
function
(
)
{
this
.
hide
(
)
;
this
.
chromeDoc
=
null
;
}
show
:
function
(
node
)
{
if
(
isNodeValid
(
node
)
&
&
(
!
this
.
currentNode
|
|
node
!
=
=
this
.
currentNode
)
)
{
this
.
hide
(
)
;
this
.
currentNode
=
node
;
loadSheet
(
node
.
ownerGlobal
SIMPLE_OUTLINE_SHEET
)
;
addPseudoClassLock
(
node
HIGHLIGHTED_PSEUDO_CLASS
)
;
}
return
true
;
}
hide
:
function
(
)
{
if
(
this
.
currentNode
)
{
removePseudoClassLock
(
this
.
currentNode
HIGHLIGHTED_PSEUDO_CLASS
)
;
this
.
currentNode
=
null
;
}
}
}
;
exports
.
SimpleOutlineHighlighter
=
SimpleOutlineHighlighter
;
