"
use
strict
"
;
const
{
TYPES
:
{
EXTENSION_STORAGE
}
}
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
resources
/
index
.
js
"
)
;
const
ParentProcessStorage
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
resources
/
utils
/
parent
-
process
-
storage
.
js
"
)
;
const
{
ExtensionStorageActor
}
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
resources
/
storage
/
extension
-
storage
.
js
"
)
;
class
ExtensionStorageWatcher
extends
ParentProcessStorage
{
constructor
(
)
{
super
(
ExtensionStorageActor
"
extensionStorage
"
EXTENSION_STORAGE
)
;
}
async
watch
(
watcherActor
{
onAvailable
}
)
{
if
(
watcherActor
.
sessionContext
.
type
!
=
"
webextension
"
)
{
throw
new
Error
(
"
EXTENSION_STORAGE
should
only
be
listened
when
debugging
a
webextension
"
)
;
}
return
super
.
watch
(
watcherActor
{
onAvailable
}
)
;
}
}
module
.
exports
=
ExtensionStorageWatcher
;
