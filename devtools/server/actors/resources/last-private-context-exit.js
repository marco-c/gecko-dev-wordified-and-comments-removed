"
use
strict
"
;
const
{
TYPES
:
{
LAST_PRIVATE_CONTEXT_EXIT
}
}
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
resources
/
index
.
js
"
)
;
class
LastPrivateContextExitWatcher
{
#
onAvailable
;
async
watch
(
watcherActor
{
onAvailable
}
)
{
this
.
#
onAvailable
=
onAvailable
;
Services
.
obs
.
addObserver
(
this
"
last
-
pb
-
context
-
exited
"
)
;
}
observe
(
subject
topic
)
{
if
(
topic
=
=
=
"
last
-
pb
-
context
-
exited
"
)
{
this
.
#
onAvailable
(
[
{
resourceType
:
LAST_PRIVATE_CONTEXT_EXIT
}
]
)
;
}
}
destroy
(
)
{
Services
.
obs
.
removeObserver
(
this
"
last
-
pb
-
context
-
exited
"
)
;
}
}
module
.
exports
=
LastPrivateContextExitWatcher
;
