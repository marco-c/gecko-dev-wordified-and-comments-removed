"
use
strict
"
;
const
{
TYPES
:
{
TRACING_STATE
}
}
=
require
(
"
resource
:
/
/
devtools
/
server
/
actors
/
resources
/
index
.
js
"
)
;
class
TracingStateWatcher
{
async
watch
(
targetActor
{
onAvailable
}
)
{
this
.
onAvailable
=
onAvailable
;
const
tracerActor
=
targetActor
.
getTargetScopedActor
(
"
tracer
"
)
;
if
(
!
tracerActor
|
|
!
tracerActor
.
isTracing
(
)
)
{
return
;
}
this
.
onTracingToggled
(
true
tracerActor
.
getLogMethod
(
)
)
;
}
destroy
(
)
{
}
onTracingToggled
(
enabled
logMethod
)
{
this
.
onAvailable
(
[
{
resourceType
:
TRACING_STATE
enabled
logMethod
}
]
)
;
}
}
module
.
exports
=
TracingStateWatcher
;
