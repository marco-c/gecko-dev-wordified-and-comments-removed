#
ifndef
js_CompilationAndEvaluation_h
#
define
js_CompilationAndEvaluation_h
#
include
<
stddef
.
h
>
#
include
<
stdio
.
h
>
#
include
"
jstypes
.
h
"
#
include
"
js
/
CompileOptions
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
struct
JSContext
;
class
JSFunction
;
class
JSObject
;
class
JSScript
;
namespace
JS
{
template
<
typename
T
>
class
AutoVector
;
class
SourceBufferHolder
;
union
Value
;
}
extern
JS_PUBLIC_API
(
bool
)
JS_BufferIsCompilableUnit
(
JSContext
*
cx
JS
:
:
Handle
<
JSObject
*
>
obj
const
char
*
utf8
size_t
length
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_ExecuteScript
(
JSContext
*
cx
JS
:
:
Handle
<
JSScript
*
>
script
JS
:
:
MutableHandle
<
JS
:
:
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_ExecuteScript
(
JSContext
*
cx
JS
:
:
Handle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_ExecuteScript
(
JSContext
*
cx
JS
:
:
AutoVector
<
JSObject
*
>
&
envChain
JS
:
:
Handle
<
JSScript
*
>
script
JS
:
:
MutableHandle
<
JS
:
:
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_ExecuteScript
(
JSContext
*
cx
JS
:
:
AutoVector
<
JSObject
*
>
&
envChain
JS
:
:
Handle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_CompileScript
(
JSContext
*
cx
const
char
*
bytes
size_t
length
const
JS
:
:
CompileOptions
&
options
JS
:
:
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_CompileUCScript
(
JSContext
*
cx
JS
:
:
SourceBufferHolder
&
srcBuf
const
JS
:
:
CompileOptions
&
options
JS
:
:
MutableHandle
<
JSScript
*
>
script
)
;
namespace
JS
{
extern
JS_PUBLIC_API
(
bool
)
CloneAndExecuteScript
(
JSContext
*
cx
Handle
<
JSScript
*
>
script
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
CloneAndExecuteScript
(
JSContext
*
cx
AutoVector
<
JSObject
*
>
&
envChain
Handle
<
JSScript
*
>
script
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
Evaluate
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
SourceBufferHolder
&
srcBuf
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
Evaluate
(
JSContext
*
cx
AutoVector
<
JSObject
*
>
&
envChain
const
ReadOnlyCompileOptions
&
options
SourceBufferHolder
&
srcBuf
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
Evaluate
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
bytes
size_t
length
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
Evaluate
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
filename
MutableHandle
<
Value
>
rval
)
;
extern
JS_PUBLIC_API
(
bool
)
Compile
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
SourceBufferHolder
&
srcBuf
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileUtf8
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
bytes
size_t
length
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileLatin1
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
bytes
size_t
length
MutableHandle
<
JSScript
*
>
script
)
;
inline
bool
Compile
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
bytes
size_t
length
MutableHandle
<
JSScript
*
>
script
)
{
return
options
.
utf8
?
CompileUtf8
(
cx
options
bytes
length
script
)
:
CompileLatin1
(
cx
options
bytes
length
script
)
;
}
extern
JS_PUBLIC_API
(
bool
)
CompileUtf8File
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
FILE
*
file
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
Compile
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
filename
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileForNonSyntacticScope
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
SourceBufferHolder
&
srcBuf
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileLatin1ForNonSyntacticScope
(
JSContext
*
cx
const
ReadOnlyCompileOptions
&
options
const
char
*
bytes
size_t
length
MutableHandle
<
JSScript
*
>
script
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileFunction
(
JSContext
*
cx
AutoVector
<
JSObject
*
>
&
envChain
const
ReadOnlyCompileOptions
&
options
const
char
*
name
unsigned
nargs
const
char
*
const
*
argnames
SourceBufferHolder
&
srcBuf
MutableHandle
<
JSFunction
*
>
fun
)
;
extern
JS_PUBLIC_API
(
bool
)
CompileFunction
(
JSContext
*
cx
AutoVector
<
JSObject
*
>
&
envChain
const
ReadOnlyCompileOptions
&
options
const
char
*
name
unsigned
nargs
const
char
*
const
*
argnames
const
char
*
bytes
size_t
length
MutableHandle
<
JSFunction
*
>
fun
)
;
extern
JS_PUBLIC_API
(
bool
)
InitScriptSourceElement
(
JSContext
*
cx
Handle
<
JSScript
*
>
script
Handle
<
JSObject
*
>
element
Handle
<
JSString
*
>
elementAttrName
=
nullptr
)
;
extern
JS_PUBLIC_API
(
void
)
ExposeScriptToDebugger
(
JSContext
*
cx
Handle
<
JSScript
*
>
script
)
;
}
#
endif
