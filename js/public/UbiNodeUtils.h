#
ifndef
js_UbiNodeUtils_h
#
define
js_UbiNodeUtils_h
#
include
"
jspubtd
.
h
"
#
include
"
js
/
UbiNode
.
h
"
#
include
"
js
/
UniquePtr
.
h
"
using
JS
:
:
ubi
:
:
Edge
;
using
JS
:
:
ubi
:
:
EdgeRange
;
using
JS
:
:
ubi
:
:
EdgeVector
;
namespace
JS
{
namespace
ubi
{
class
SimpleEdgeRange
:
public
EdgeRange
{
EdgeVector
edges
;
size_t
i
;
protected
:
void
settle
(
)
{
front_
=
i
<
edges
.
length
(
)
?
&
edges
[
i
]
:
nullptr
;
}
public
:
explicit
SimpleEdgeRange
(
)
:
edges
(
)
i
(
0
)
{
}
bool
addTracerEdges
(
JSRuntime
*
rt
void
*
thing
JS
:
:
TraceKind
kind
bool
wantNames
)
;
bool
addEdge
(
Edge
edge
)
{
if
(
!
edge
.
name
|
|
!
edges
.
append
(
std
:
:
move
(
edge
)
)
)
return
false
;
settle
(
)
;
return
true
;
}
void
popFront
(
)
override
{
i
+
+
;
settle
(
)
;
}
}
;
}
}
#
endif
