#
ifndef
js_AllocationRecording_h
#
define
js_AllocationRecording_h
#
include
"
js
/
TypeDecls
.
h
"
#
include
"
js
/
Utility
.
h
"
namespace
JS
{
struct
RecordAllocationInfo
{
RecordAllocationInfo
(
const
char16_t
*
typeName
const
char
*
className
const
char16_t
*
descriptiveTypeName
const
char
*
scriptFilename
const
char
*
coarseType
uint64_t
size
bool
inNursery
)
:
typeName
(
typeName
)
className
(
className
)
descriptiveTypeName
(
descriptiveTypeName
)
scriptFilename
(
scriptFilename
)
coarseType
(
coarseType
)
size
(
size
)
inNursery
(
inNursery
)
{
}
const
char16_t
*
typeName
;
const
char
*
className
;
const
char16_t
*
descriptiveTypeName
;
const
char
*
scriptFilename
;
const
char
*
coarseType
;
uint64_t
size
;
bool
inNursery
;
}
;
typedef
void
(
*
RecordAllocationsCallback
)
(
RecordAllocationInfo
&
&
info
)
;
JS_FRIEND_API
void
EnableRecordingAllocations
(
JSContext
*
cx
RecordAllocationsCallback
callback
double
probability
)
;
JS_FRIEND_API
void
DisableRecordingAllocations
(
JSContext
*
cx
)
;
}
#
endif
