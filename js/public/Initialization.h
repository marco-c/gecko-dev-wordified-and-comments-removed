#
ifndef
js_Initialization_h
#
define
js_Initialization_h
#
include
"
jstypes
.
h
"
namespace
JS
{
namespace
detail
{
enum
class
InitState
{
Uninitialized
=
0
Running
ShutDown
}
;
extern
JS_PUBLIC_DATA
(
InitState
)
libraryInitState
;
extern
JS_PUBLIC_API
(
const
char
*
)
InitWithFailureDiagnostic
(
bool
isDebugBuild
)
;
}
}
typedef
void
*
(
*
JS_ICUAllocFn
)
(
const
void
*
size_t
size
)
;
typedef
void
*
(
*
JS_ICUReallocFn
)
(
const
void
*
void
*
p
size_t
size
)
;
typedef
void
(
*
JS_ICUFreeFn
)
(
const
void
*
void
*
p
)
;
extern
JS_PUBLIC_API
(
bool
)
JS_SetICUMemoryFunctions
(
JS_ICUAllocFn
allocFn
JS_ICUReallocFn
reallocFn
JS_ICUFreeFn
freeFn
)
;
inline
bool
JS_Init
(
void
)
{
#
ifdef
DEBUG
return
!
JS
:
:
detail
:
:
InitWithFailureDiagnostic
(
true
)
;
#
else
return
!
JS
:
:
detail
:
:
InitWithFailureDiagnostic
(
false
)
;
#
endif
}
inline
const
char
*
JS_InitWithFailureDiagnostic
(
void
)
{
#
ifdef
DEBUG
return
JS
:
:
detail
:
:
InitWithFailureDiagnostic
(
true
)
;
#
else
return
JS
:
:
detail
:
:
InitWithFailureDiagnostic
(
false
)
;
#
endif
}
inline
bool
JS_IsInitialized
(
void
)
{
return
JS
:
:
detail
:
:
libraryInitState
!
=
JS
:
:
detail
:
:
InitState
:
:
Uninitialized
;
}
extern
JS_PUBLIC_API
(
void
)
JS_ShutDown
(
void
)
;
#
endif
