#
ifndef
js_friend_DOMProxy_h
#
define
js_friend_DOMProxy_h
#
include
<
stddef
.
h
>
#
include
<
stdint
.
h
>
#
include
"
jstypes
.
h
"
#
include
"
js
/
Id
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
#
include
"
js
/
Value
.
h
"
struct
JS_PUBLIC_API
JSContext
;
class
JS_PUBLIC_API
JSObject
;
namespace
JS
{
struct
ExpandoAndGeneration
{
ExpandoAndGeneration
(
)
:
expando
(
JS
:
:
UndefinedValue
(
)
)
generation
(
0
)
{
}
void
OwnerUnlinked
(
)
{
+
+
generation
;
}
static
constexpr
size_t
offsetOfExpando
(
)
{
return
offsetof
(
ExpandoAndGeneration
expando
)
;
}
static
constexpr
size_t
offsetOfGeneration
(
)
{
return
offsetof
(
ExpandoAndGeneration
generation
)
;
}
Heap
<
Value
>
expando
;
uint64_t
generation
;
}
;
enum
class
DOMProxyShadowsResult
{
ShadowCheckFailed
Shadows
DoesntShadow
DoesntShadowUnique
ShadowsViaDirectExpando
ShadowsViaIndirectExpando
}
;
using
DOMProxyShadowsCheck
=
DOMProxyShadowsResult
(
*
)
(
JSContext
*
Handle
<
JSObject
*
>
Handle
<
JS
:
:
PropertyKey
>
)
;
extern
JS_FRIEND_API
void
SetDOMProxyInformation
(
const
void
*
domProxyHandlerFamily
DOMProxyShadowsCheck
domProxyShadowsCheck
const
void
*
domRemoteProxyHandlerFamily
)
;
}
#
endif
