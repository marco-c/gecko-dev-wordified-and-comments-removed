#
ifndef
js_friend_UsageStatistics_h
#
define
js_friend_UsageStatistics_h
#
include
<
stdint
.
h
>
#
include
"
jstypes
.
h
"
struct
JS_PUBLIC_API
JSContext
;
class
JS_PUBLIC_API
JSObject
;
#
define
FOR_EACH_JS_METRIC
(
_
)
\
_
(
GC_REASON_2
)
\
_
(
GC_IS_COMPARTMENTAL
)
\
_
(
GC_MS
)
\
_
(
GC_BUDGET_MS_2
)
\
_
(
GC_BUDGET_WAS_INCREASED
)
\
_
(
GC_SLICE_WAS_LONG
)
\
_
(
GC_BUDGET_OVERRUN
)
\
_
(
GC_ANIMATION_MS
)
\
_
(
GC_MAX_PAUSE_MS_2
)
\
_
(
GC_PREPARE_MS
)
\
_
(
GC_MARK_MS
)
\
_
(
GC_SWEEP_MS
)
\
_
(
GC_COMPACT_MS
)
\
_
(
GC_MARK_ROOTS_US
)
\
_
(
GC_MARK_GRAY_MS_2
)
\
_
(
GC_MARK_WEAK_MS
)
\
_
(
GC_SLICE_MS
)
\
_
(
GC_SLOW_PHASE
)
\
_
(
GC_SLOW_TASK
)
\
_
(
GC_MMU_50
)
\
_
(
GC_RESET
)
\
_
(
GC_RESET_REASON
)
\
_
(
GC_NON_INCREMENTAL
)
\
_
(
GC_NON_INCREMENTAL_REASON
)
\
_
(
GC_MINOR_REASON
)
\
_
(
GC_MINOR_REASON_LONG
)
\
_
(
GC_MINOR_US
)
\
_
(
GC_NURSERY_BYTES_2
)
\
_
(
GC_PRETENURE_COUNT_2
)
\
_
(
GC_NURSERY_PROMOTION_RATE
)
\
_
(
GC_TENURED_SURVIVAL_RATE
)
\
_
(
GC_MARK_RATE_2
)
\
_
(
GC_TIME_BETWEEN_S
)
\
_
(
GC_TIME_BETWEEN_SLICES_MS
)
\
_
(
GC_SLICE_COUNT
)
\
_
(
DESERIALIZE_BYTES
)
\
_
(
DESERIALIZE_ITEMS
)
\
_
(
DESERIALIZE_US
)
\
_
(
GC_EFFECTIVENESS
)
#
define
ENUM_DEF
(
NAME
)
NAME
enum
class
JSMetric
{
FOR_EACH_JS_METRIC
(
ENUM_DEF
)
Count
}
;
#
undef
ENUM_DEF
using
JSAccumulateTelemetryDataCallback
=
void
(
*
)
(
JSMetric
uint32_t
)
;
extern
JS_PUBLIC_API
void
JS_SetAccumulateTelemetryCallback
(
JSContext
*
cx
JSAccumulateTelemetryDataCallback
callback
)
;
enum
class
JSUseCounter
{
ASMJS
WASM
}
;
using
JSSetUseCounterCallback
=
void
(
*
)
(
JSObject
*
JSUseCounter
)
;
extern
JS_PUBLIC_API
void
JS_SetSetUseCounterCallback
(
JSContext
*
cx
JSSetUseCounterCallback
callback
)
;
#
endif
