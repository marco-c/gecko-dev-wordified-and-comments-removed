function
run_test
(
)
{
let
sb1
=
new
Cu
.
Sandbox
(
"
https
:
/
/
example
.
org
"
)
;
let
throwingFunc
=
Cu
.
evalInSandbox
(
"
new
Function
(
'
throw
new
Error
'
)
"
sb1
)
;
let
sb2
=
new
Cu
.
Sandbox
(
"
https
:
/
/
example
.
com
"
)
;
Cu
.
exportFunction
(
function
(
)
{
throwingFunc
(
)
;
}
sb2
{
defineAs
:
"
func
"
}
)
;
let
threw
=
Cu
.
evalInSandbox
(
"
var
threw
;
try
{
func
(
)
;
threw
=
false
;
}
catch
(
e
)
{
threw
=
true
}
threw
"
sb2
)
;
Assert
.
ok
(
threw
)
;
}
