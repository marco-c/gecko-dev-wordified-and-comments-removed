function
test_BrokenFile
(
path
shouldThrow
expectedName
)
{
var
didThrow
=
false
;
try
{
ChromeUtils
.
import
(
path
)
;
}
catch
(
ex
)
{
var
exceptionName
=
ex
.
name
;
print
(
"
ex
:
"
+
ex
+
"
;
name
=
"
+
ex
.
name
)
;
didThrow
=
true
;
}
Assert
.
equal
(
didThrow
shouldThrow
)
;
if
(
didThrow
)
Assert
.
equal
(
exceptionName
expectedName
)
;
}
function
run_test
(
)
{
test_BrokenFile
(
"
resource
:
/
/
test
/
bogus_exports_type
.
jsm
"
true
"
Error
"
)
;
test_BrokenFile
(
"
resource
:
/
/
test
/
bogus_element_type
.
jsm
"
true
"
Error
"
)
;
test_BrokenFile
(
"
resource
:
/
/
test
/
non_existing
.
jsm
"
true
"
NS_ERROR_FILE_NOT_FOUND
"
)
;
test_BrokenFile
(
"
chrome
:
/
/
test
/
content
/
test
.
jsm
"
true
"
NS_ERROR_FILE_NOT_FOUND
"
)
;
Assert
.
equal
(
typeof
(
ChromeUtils
.
import
(
"
resource
:
/
/
test
/
bogus_exports_type
.
jsm
"
null
)
)
"
object
"
)
;
Assert
.
equal
(
typeof
(
ChromeUtils
.
import
(
"
resource
:
/
/
test
/
bogus_element_type
.
jsm
"
null
)
)
"
object
"
)
;
}
