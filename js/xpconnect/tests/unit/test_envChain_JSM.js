"
use
strict
"
;
add_task
(
async
function
(
)
{
const
{
envs
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
test
/
envChain
.
jsm
"
)
;
Assert
.
equal
(
envs
.
length
4
)
;
let
i
=
0
env
;
env
=
envs
[
i
]
;
i
+
+
;
Assert
.
equal
(
env
.
type
"
NonSyntacticLexicalEnvironmentObject
"
)
;
Assert
.
equal
(
env
.
qualified
false
)
;
Assert
.
equal
(
env
.
lexical
true
"
lexical
must
live
in
the
NSLEO
"
)
;
Assert
.
equal
(
env
.
prop
false
)
;
env
=
envs
[
i
]
;
i
+
+
;
Assert
.
equal
(
env
.
type
"
NonSyntacticVariablesObject
"
)
;
Assert
.
equal
(
env
.
qualified
true
"
qualified
var
must
live
in
the
NSVO
"
)
;
Assert
.
equal
(
env
.
lexical
false
)
;
Assert
.
equal
(
env
.
prop
true
"
prop
var
must
live
in
the
NSVO
"
)
;
env
=
envs
[
i
]
;
i
+
+
;
Assert
.
equal
(
env
.
type
"
GlobalLexicalEnvironmentObject
"
)
;
Assert
.
equal
(
env
.
qualified
false
)
;
Assert
.
equal
(
env
.
lexical
false
)
;
Assert
.
equal
(
env
.
prop
false
)
;
env
=
envs
[
i
]
;
i
+
+
;
Assert
.
equal
(
env
.
type
"
*
BackstagePass
*
"
)
;
Assert
.
equal
(
env
.
qualified
false
)
;
Assert
.
equal
(
env
.
lexical
false
)
;
Assert
.
equal
(
env
.
prop
false
)
;
}
)
;
