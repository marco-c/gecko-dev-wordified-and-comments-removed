#
ifndef
wasm_wasm_baseline_memory_h
#
define
wasm_wasm_baseline_memory_h
#
include
"
wasm
/
WasmBCDefs
.
h
"
#
include
"
wasm
/
WasmBCRegDefs
.
h
"
namespace
js
{
namespace
wasm
{
struct
BaseCompiler
;
template
<
size_t
Count
>
struct
Atomic32Temps
:
mozilla
:
:
Array
<
RegI32
Count
>
{
void
allocate
(
BaseCompiler
*
bc
size_t
allocate
=
Count
)
;
void
maybeFree
(
BaseCompiler
*
bc
)
;
}
;
#
if
defined
(
JS_CODEGEN_MIPS64
)
using
AtomicRMW32Temps
=
Atomic32Temps
<
3
>
;
#
else
using
AtomicRMW32Temps
=
Atomic32Temps
<
1
>
;
#
endif
#
if
defined
(
JS_CODEGEN_MIPS64
)
using
AtomicCmpXchg32Temps
=
Atomic32Temps
<
3
>
;
#
else
using
AtomicCmpXchg32Temps
=
Atomic32Temps
<
0
>
;
#
endif
#
if
defined
(
JS_CODEGEN_MIPS64
)
using
AtomicXchg32Temps
=
Atomic32Temps
<
3
>
;
#
else
using
AtomicXchg32Temps
=
Atomic32Temps
<
0
>
;
#
endif
}
}
#
endif
