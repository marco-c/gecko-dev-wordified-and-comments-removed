#
include
"
wasm
/
WasmContext
.
h
"
#
include
"
wasm
/
WasmCompileArgs
.
h
"
#
include
"
wasm
/
WasmTypeDef
.
h
"
using
namespace
js
;
using
namespace
wasm
;
bool
wasm
:
:
Context
:
:
ensureTypeContext
(
JSContext
*
cx
)
{
if
(
typeContext
)
{
return
true
;
}
FeatureOptions
options
;
typeContext
=
js_new
<
TypeContext
>
(
FeatureArgs
:
:
build
(
cx
options
)
TypeDefVector
(
)
)
;
return
!
!
typeContext
;
}
size_t
wasm
:
:
Context
:
:
sizeOfExcludingThis
(
mozilla
:
:
MallocSizeOf
mallocSizeOf
)
const
{
return
typeContext
?
typeContext
-
>
sizeOfExcludingThis
(
mallocSizeOf
)
:
0
;
}
