#
ifndef
wasm_compartment_h
#
define
wasm_compartment_h
#
include
"
wasm
/
WasmJS
.
h
"
namespace
js
{
namespace
wasm
{
class
Compartment
{
JSRuntime
*
runtime_
;
InstanceVector
instances_
;
public
:
explicit
Compartment
(
JSRuntime
*
rt
)
;
~
Compartment
(
)
;
bool
registerInstance
(
JSContext
*
cx
HandleWasmInstanceObject
instanceObj
)
;
void
unregisterInstance
(
Instance
&
instance
)
;
const
InstanceVector
&
instances
(
)
const
{
return
instances_
;
}
void
ensureProfilingLabels
(
bool
profilingEnabled
)
;
void
addSizeOfExcludingThis
(
mozilla
:
:
MallocSizeOf
mallocSizeOf
size_t
*
compartmentTables
)
;
}
;
extern
void
InterruptRunningCode
(
JSContext
*
cx
)
;
void
ResetInterruptState
(
JSContext
*
cx
)
;
}
}
#
endif
