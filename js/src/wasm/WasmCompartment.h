#
ifndef
wasm_compartment_h
#
define
wasm_compartment_h
#
include
"
wasm
/
WasmJS
.
h
"
namespace
js
{
namespace
wasm
{
typedef
Vector
<
Instance
*
0
SystemAllocPolicy
>
InstanceVector
;
class
Compartment
{
InstanceVector
instances_
;
public
:
explicit
Compartment
(
Zone
*
zone
)
;
~
Compartment
(
)
;
bool
registerInstance
(
JSContext
*
cx
HandleWasmInstanceObject
instanceObj
)
;
void
unregisterInstance
(
Instance
&
instance
)
;
const
InstanceVector
&
instances
(
)
const
{
return
instances_
;
}
void
ensureProfilingLabels
(
bool
profilingEnabled
)
;
void
addSizeOfExcludingThis
(
mozilla
:
:
MallocSizeOf
mallocSizeOf
size_t
*
compartmentTables
)
;
}
;
}
}
#
endif
