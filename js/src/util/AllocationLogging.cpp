#
include
"
js
/
AllocationLogging
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
static
JS
:
:
LogCtorDtor
sLogCtor
=
nullptr
;
static
JS
:
:
LogCtorDtor
sLogDtor
=
nullptr
;
void
JS
:
:
SetLogCtorDtorFunctions
(
LogCtorDtor
ctor
LogCtorDtor
dtor
)
{
MOZ_ASSERT
(
!
sLogCtor
&
&
!
sLogDtor
)
;
MOZ_ASSERT
(
ctor
&
&
dtor
)
;
sLogCtor
=
ctor
;
sLogDtor
=
dtor
;
}
void
JS
:
:
LogCtor
(
void
*
self
const
char
*
type
uint32_t
sz
)
{
if
(
LogCtorDtor
fun
=
sLogCtor
)
{
fun
(
self
type
sz
)
;
}
}
void
JS
:
:
LogDtor
(
void
*
self
const
char
*
type
uint32_t
sz
)
{
if
(
LogCtorDtor
fun
=
sLogDtor
)
{
fun
(
self
type
sz
)
;
}
}
