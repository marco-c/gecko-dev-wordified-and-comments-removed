#
ifndef
util_DiagnosticAssertions_h
#
define
util_DiagnosticAssertions_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
Likely
.
h
"
#
include
"
jstypes
.
h
"
#
if
defined
(
DEBUG
)
|
|
defined
(
NIGHTLY_BUILD
)
#
define
JS_CRASH_DIAGNOSTICS
1
#
endif
#
if
defined
(
JS_DEBUG
)
#
define
JS_DIAGNOSTICS_ASSERT
(
expr
)
MOZ_ASSERT
(
expr
)
#
elif
defined
(
JS_CRASH_DIAGNOSTICS
)
#
define
JS_DIAGNOSTICS_ASSERT
(
expr
)
\
do
{
\
if
(
MOZ_UNLIKELY
(
!
(
expr
)
)
)
MOZ_CRASH
(
)
;
\
}
while
(
0
)
#
else
#
define
JS_DIAGNOSTICS_ASSERT
(
expr
)
(
(
void
)
0
)
#
endif
#
endif
