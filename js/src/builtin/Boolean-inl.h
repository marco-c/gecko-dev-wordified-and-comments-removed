#
ifndef
builtin_Boolean_inl_h
#
define
builtin_Boolean_inl_h
#
include
"
builtin
/
Boolean
.
h
"
#
include
"
vm
/
JSContext
.
h
"
#
include
"
vm
/
WrapperObject
.
h
"
namespace
js
{
inline
bool
EmulatesUndefined
(
JSObject
*
obj
)
{
AutoUnsafeCallWithABI
unsafe
(
UnsafeABIStrictness
:
:
AllowPendingExceptions
)
;
JSObject
*
actual
=
MOZ_LIKELY
(
!
obj
-
>
is
<
WrapperObject
>
(
)
)
?
obj
:
UncheckedUnwrapWithoutExpose
(
obj
)
;
return
actual
-
>
getClass
(
)
-
>
emulatesUndefined
(
)
;
}
inline
bool
EmulatesUndefinedCheckFuse
(
JSObject
*
obj
size_t
fuseValue
)
{
AutoUnsafeCallWithABI
unsafe
(
UnsafeABIStrictness
:
:
AllowPendingExceptions
)
;
JSObject
*
actual
=
MOZ_LIKELY
(
!
obj
-
>
is
<
WrapperObject
>
(
)
)
?
obj
:
UncheckedUnwrapWithoutExpose
(
obj
)
;
bool
emulatesUndefined
=
actual
-
>
getClass
(
)
-
>
emulatesUndefined
(
)
;
if
(
emulatesUndefined
)
{
MOZ_RELEASE_ASSERT
(
fuseValue
!
=
0
)
;
}
return
emulatesUndefined
;
}
}
#
endif
