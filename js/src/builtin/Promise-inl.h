#
ifndef
builtin_Promise_inl_h
#
define
builtin_Promise_inl_h
#
include
"
js
/
Promise
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
#
include
"
vm
/
JSContext
.
h
"
#
include
"
vm
/
PromiseObject
.
h
"
namespace
js
{
inline
void
SetSettledPromiseIsHandled
(
JSContext
*
cx
JS
:
:
Handle
<
PromiseObject
*
>
unwrappedPromise
)
{
MOZ_ASSERT
(
unwrappedPromise
-
>
state
(
)
!
=
JS
:
:
PromiseState
:
:
Pending
)
;
unwrappedPromise
-
>
setHandled
(
)
;
cx
-
>
runtime
(
)
-
>
removeUnhandledRejectedPromise
(
cx
unwrappedPromise
)
;
}
inline
void
SetAnyPromiseIsHandled
(
JSContext
*
cx
JS
:
:
Handle
<
PromiseObject
*
>
unwrappedPromise
)
{
if
(
unwrappedPromise
-
>
state
(
)
!
=
JS
:
:
PromiseState
:
:
Pending
)
{
cx
-
>
runtime
(
)
-
>
removeUnhandledRejectedPromise
(
cx
unwrappedPromise
)
;
}
unwrappedPromise
-
>
setHandled
(
)
;
}
}
#
endif
