#
ifndef
builtin_temporal_Duration_h
#
define
builtin_temporal_Duration_h
#
include
<
stdint
.
h
>
#
include
"
builtin
/
temporal
/
TemporalTypes
.
h
"
#
include
"
builtin
/
temporal
/
Wrapped
.
h
"
#
include
"
js
/
RootingAPI
.
h
"
#
include
"
js
/
TypeDecls
.
h
"
#
include
"
js
/
Value
.
h
"
#
include
"
vm
/
NativeObject
.
h
"
namespace
js
{
struct
ClassSpec
;
}
namespace
js
:
:
temporal
{
class
DurationObject
:
public
NativeObject
{
public
:
static
const
JSClass
class_
;
static
const
JSClass
&
protoClass_
;
static
constexpr
uint32_t
YEARS_SLOT
=
0
;
static
constexpr
uint32_t
MONTHS_SLOT
=
1
;
static
constexpr
uint32_t
WEEKS_SLOT
=
2
;
static
constexpr
uint32_t
DAYS_SLOT
=
3
;
static
constexpr
uint32_t
HOURS_SLOT
=
4
;
static
constexpr
uint32_t
MINUTES_SLOT
=
5
;
static
constexpr
uint32_t
SECONDS_SLOT
=
6
;
static
constexpr
uint32_t
MILLISECONDS_SLOT
=
7
;
static
constexpr
uint32_t
MICROSECONDS_SLOT
=
8
;
static
constexpr
uint32_t
NANOSECONDS_SLOT
=
9
;
static
constexpr
uint32_t
SLOT_COUNT
=
10
;
double
years
(
)
const
{
return
getFixedSlot
(
YEARS_SLOT
)
.
toNumber
(
)
;
}
double
months
(
)
const
{
return
getFixedSlot
(
MONTHS_SLOT
)
.
toNumber
(
)
;
}
double
weeks
(
)
const
{
return
getFixedSlot
(
WEEKS_SLOT
)
.
toNumber
(
)
;
}
double
days
(
)
const
{
return
getFixedSlot
(
DAYS_SLOT
)
.
toNumber
(
)
;
}
double
hours
(
)
const
{
return
getFixedSlot
(
HOURS_SLOT
)
.
toNumber
(
)
;
}
double
minutes
(
)
const
{
return
getFixedSlot
(
MINUTES_SLOT
)
.
toNumber
(
)
;
}
double
seconds
(
)
const
{
return
getFixedSlot
(
SECONDS_SLOT
)
.
toNumber
(
)
;
}
double
milliseconds
(
)
const
{
return
getFixedSlot
(
MILLISECONDS_SLOT
)
.
toNumber
(
)
;
}
double
microseconds
(
)
const
{
return
getFixedSlot
(
MICROSECONDS_SLOT
)
.
toNumber
(
)
;
}
double
nanoseconds
(
)
const
{
return
getFixedSlot
(
NANOSECONDS_SLOT
)
.
toNumber
(
)
;
}
private
:
static
const
ClassSpec
classSpec_
;
}
;
inline
Duration
ToDuration
(
const
DurationObject
*
duration
)
{
return
{
duration
-
>
years
(
)
duration
-
>
months
(
)
duration
-
>
weeks
(
)
duration
-
>
days
(
)
duration
-
>
hours
(
)
duration
-
>
minutes
(
)
duration
-
>
seconds
(
)
duration
-
>
milliseconds
(
)
duration
-
>
microseconds
(
)
duration
-
>
nanoseconds
(
)
}
;
}
class
Increment
;
class
CalendarRecord
;
class
PlainDateObject
;
class
TimeZoneRecord
;
class
ZonedDateTime
;
class
ZonedDateTimeObject
;
enum
class
TemporalRoundingMode
;
enum
class
TemporalUnit
;
int32_t
DurationSign
(
const
Duration
&
duration
)
;
bool
IsValidDuration
(
const
Duration
&
duration
)
;
bool
ThrowIfInvalidDuration
(
JSContext
*
cx
const
Duration
&
duration
)
;
DurationObject
*
CreateTemporalDuration
(
JSContext
*
cx
const
Duration
&
duration
)
;
Wrapped
<
DurationObject
*
>
ToTemporalDuration
(
JSContext
*
cx
JS
:
:
Handle
<
JS
:
:
Value
>
item
)
;
bool
ToTemporalDuration
(
JSContext
*
cx
JS
:
:
Handle
<
JS
:
:
Value
>
item
Duration
*
result
)
;
bool
ToTemporalDurationRecord
(
JSContext
*
cx
JS
:
:
Handle
<
JS
:
:
Value
>
temporalDurationLike
Duration
*
result
)
;
bool
BalanceTimeDuration
(
JSContext
*
cx
const
Duration
&
duration
TemporalUnit
largestUnit
TimeDuration
*
result
)
;
bool
BalanceTimeDuration
(
JSContext
*
cx
const
InstantSpan
&
nanoseconds
TemporalUnit
largestUnit
TimeDuration
*
result
)
;
bool
BalanceDateDurationRelative
(
JSContext
*
cx
const
Duration
&
duration
TemporalUnit
largestUnit
JS
:
:
Handle
<
Wrapped
<
PlainDateObject
*
>
>
plainRelativeTo
JS
:
:
Handle
<
CalendarRecord
>
calendar
DateDuration
*
result
)
;
bool
AdjustRoundedDurationDays
(
JSContext
*
cx
const
Duration
&
duration
Increment
increment
TemporalUnit
unit
TemporalRoundingMode
roundingMode
JS
:
:
Handle
<
ZonedDateTime
>
relativeTo
JS
:
:
Handle
<
CalendarRecord
>
calendar
JS
:
:
MutableHandle
<
TimeZoneRecord
>
timeZone
const
PlainDateTime
&
precalculatedPlainDateTime
Duration
*
result
)
;
bool
RoundDuration
(
JSContext
*
cx
const
Duration
&
duration
Increment
increment
TemporalUnit
unit
TemporalRoundingMode
roundingMode
Duration
*
result
)
;
bool
RoundDuration
(
JSContext
*
cx
const
Duration
&
duration
Increment
increment
TemporalUnit
unit
TemporalRoundingMode
roundingMode
JS
:
:
Handle
<
Wrapped
<
PlainDateObject
*
>
>
plainRelativeTo
JS
:
:
Handle
<
CalendarRecord
>
calendar
Duration
*
result
)
;
bool
RoundDuration
(
JSContext
*
cx
const
Duration
&
duration
Increment
increment
TemporalUnit
unit
TemporalRoundingMode
roundingMode
JS
:
:
Handle
<
PlainDateObject
*
>
plainRelativeTo
JS
:
:
Handle
<
CalendarRecord
>
calendar
JS
:
:
Handle
<
ZonedDateTime
>
zonedRelativeTo
JS
:
:
MutableHandle
<
TimeZoneRecord
>
timeZone
const
PlainDateTime
&
precalculatedPlainDateTime
Duration
*
result
)
;
int32_t
DaysUntil
(
const
PlainDate
&
earlier
const
PlainDate
&
later
)
;
}
#
endif
