#
include
"
builtin
/
streams
/
WritableStreamWriterOperations
.
h
"
#
include
"
builtin
/
streams
/
WritableStream
.
h
"
#
include
"
builtin
/
streams
/
WritableStreamDefaultController
.
h
"
#
include
"
builtin
/
streams
/
WritableStreamDefaultControllerOperations
.
h
"
#
include
"
builtin
/
streams
/
WritableStreamDefaultWriter
.
h
"
#
include
"
js
/
Value
.
h
"
#
include
"
builtin
/
streams
/
WritableStreamDefaultWriter
-
inl
.
h
"
#
include
"
vm
/
Compartment
-
inl
.
h
"
using
JS
:
:
Int32Value
;
using
JS
:
:
NullValue
;
using
JS
:
:
NumberValue
;
using
JS
:
:
Value
;
Value
js
:
:
WritableStreamDefaultWriterGetDesiredSize
(
const
WritableStreamDefaultWriter
*
unwrappedWriter
)
{
const
WritableStream
*
unwrappedStream
=
unwrappedWriter
-
>
stream
(
)
;
if
(
unwrappedStream
-
>
errored
(
)
|
|
unwrappedStream
-
>
erroring
(
)
)
{
return
NullValue
(
)
;
}
if
(
unwrappedStream
-
>
closed
(
)
)
{
return
Int32Value
(
0
)
;
}
return
NumberValue
(
WritableStreamDefaultControllerGetDesiredSize
(
unwrappedStream
-
>
controller
(
)
)
)
;
}
