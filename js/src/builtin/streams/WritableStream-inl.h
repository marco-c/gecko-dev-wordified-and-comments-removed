#
ifndef
builtin_streams_WritableStream_inl_h
#
define
builtin_streams_WritableStream_inl_h
#
include
"
builtin
/
streams
/
WritableStream
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
builtin
/
Promise
.
h
"
#
include
"
builtin
/
streams
/
WritableStreamDefaultWriter
.
h
"
#
include
"
js
/
Value
.
h
"
inline
js
:
:
WritableStreamDefaultWriter
*
js
:
:
WritableStream
:
:
writer
(
)
const
{
MOZ_ASSERT
(
hasWriter
(
)
)
;
return
&
getFixedSlot
(
Slot_Writer
)
.
toObject
(
)
.
as
<
WritableStreamDefaultWriter
>
(
)
;
}
inline
void
js
:
:
WritableStream
:
:
setWriter
(
WritableStreamDefaultWriter
*
writer
)
{
setFixedSlot
(
Slot_Writer
JS
:
:
ObjectValue
(
*
writer
)
)
;
}
inline
void
js
:
:
WritableStream
:
:
setCloseRequest
(
PromiseObject
*
closeRequest
)
{
MOZ_ASSERT
(
!
haveCloseRequestOrInFlightCloseRequest
(
)
)
;
setFixedSlot
(
Slot_CloseRequest
JS
:
:
ObjectValue
(
*
closeRequest
)
)
;
MOZ_ASSERT
(
!
haveInFlightCloseRequest
(
)
)
;
}
#
endif
