function
WeakSetConstructorInit
(
iterable
)
{
var
set
=
this
;
var
adder
=
set
.
add
;
if
(
!
IsCallable
(
adder
)
)
ThrowTypeError
(
JSMSG_NOT_FUNCTION
typeof
adder
)
;
for
(
var
nextValue
of
allowContentIter
(
iterable
)
)
callContentFunction
(
adder
set
nextValue
)
;
}
function
WeakSet_add
(
value
)
{
var
S
=
this
;
if
(
!
IsObject
(
S
)
|
|
!
IsWeakSet
(
S
)
)
return
callFunction
(
CallWeakSetMethodIfWrapped
this
value
"
WeakSet_add
"
)
;
let
entries
=
UnsafeGetReservedSlot
(
this
WEAKSET_MAP_SLOT
)
;
if
(
!
entries
)
ThrowTypeError
(
JSMSG_INCOMPATIBLE_PROTO
"
WeakSet
"
"
add
"
typeof
S
)
;
if
(
!
IsObject
(
value
)
)
ThrowTypeError
(
JSMSG_NOT_NONNULL_OBJECT
DecompileArg
(
0
value
)
)
;
callFunction
(
std_WeakMap_set
entries
value
true
)
;
return
S
;
}
function
WeakSet_delete
(
value
)
{
var
S
=
this
;
if
(
!
IsObject
(
S
)
|
|
!
IsWeakSet
(
S
)
)
return
callFunction
(
CallWeakSetMethodIfWrapped
this
value
"
WeakSet_delete
"
)
;
let
entries
=
UnsafeGetReservedSlot
(
this
WEAKSET_MAP_SLOT
)
;
if
(
!
entries
)
ThrowTypeError
(
JSMSG_INCOMPATIBLE_PROTO
"
WeakSet
"
"
delete
"
typeof
S
)
;
if
(
!
IsObject
(
value
)
)
return
false
;
return
callFunction
(
std_WeakMap_delete
entries
value
)
;
}
function
WeakSet_has
(
value
)
{
var
S
=
this
;
if
(
!
IsObject
(
S
)
|
|
!
IsWeakSet
(
S
)
)
return
callFunction
(
CallWeakSetMethodIfWrapped
this
value
"
WeakSet_has
"
)
;
let
entries
=
UnsafeGetReservedSlot
(
this
WEAKSET_MAP_SLOT
)
;
if
(
!
entries
)
ThrowTypeError
(
JSMSG_INCOMPATIBLE_PROTO
"
WeakSet
"
"
has
"
typeof
S
)
;
if
(
!
IsObject
(
value
)
)
return
false
;
return
callFunction
(
std_WeakMap_has
entries
value
)
;
}
