#
include
"
proxy
/
DeadObjectProxy
.
h
"
#
include
"
jsapi
.
h
"
#
include
"
jsfun
.
h
"
#
include
"
vm
/
ProxyObject
.
h
"
using
namespace
js
;
using
namespace
js
:
:
gc
;
static
void
ReportDead
(
JSContext
*
cx
)
{
JS_ReportErrorNumberASCII
(
cx
GetErrorMessage
nullptr
JSMSG_DEAD_OBJECT
)
;
}
bool
DeadObjectProxy
:
:
getOwnPropertyDescriptor
(
JSContext
*
cx
HandleObject
wrapper
HandleId
id
MutableHandle
<
PropertyDescriptor
>
desc
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
defineProperty
(
JSContext
*
cx
HandleObject
wrapper
HandleId
id
Handle
<
PropertyDescriptor
>
desc
ObjectOpResult
&
result
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
ownPropertyKeys
(
JSContext
*
cx
HandleObject
wrapper
AutoIdVector
&
props
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
delete_
(
JSContext
*
cx
HandleObject
wrapper
HandleId
id
ObjectOpResult
&
result
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
getPrototype
(
JSContext
*
cx
HandleObject
proxy
MutableHandleObject
protop
)
const
{
protop
.
set
(
nullptr
)
;
return
true
;
}
bool
DeadObjectProxy
:
:
getPrototypeIfOrdinary
(
JSContext
*
cx
HandleObject
proxy
bool
*
isOrdinary
MutableHandleObject
protop
)
const
{
*
isOrdinary
=
false
;
return
true
;
}
bool
DeadObjectProxy
:
:
preventExtensions
(
JSContext
*
cx
HandleObject
proxy
ObjectOpResult
&
result
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
isExtensible
(
JSContext
*
cx
HandleObject
proxy
bool
*
extensible
)
const
{
*
extensible
=
true
;
return
true
;
}
bool
DeadObjectProxy
:
:
call
(
JSContext
*
cx
HandleObject
wrapper
const
CallArgs
&
args
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
construct
(
JSContext
*
cx
HandleObject
wrapper
const
CallArgs
&
args
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
nativeCall
(
JSContext
*
cx
IsAcceptableThis
test
NativeImpl
impl
const
CallArgs
&
args
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
hasInstance
(
JSContext
*
cx
HandleObject
proxy
MutableHandleValue
v
bool
*
bp
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
getBuiltinClass
(
JSContext
*
cx
HandleObject
proxy
ESClass
*
cls
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
bool
DeadObjectProxy
:
:
isArray
(
JSContext
*
cx
HandleObject
obj
JS
:
:
IsArrayAnswer
*
answer
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
const
char
*
DeadObjectProxy
:
:
className
(
JSContext
*
cx
HandleObject
wrapper
)
const
{
return
"
DeadObject
"
;
}
JSString
*
DeadObjectProxy
:
:
fun_toString
(
JSContext
*
cx
HandleObject
proxy
unsigned
indent
)
const
{
ReportDead
(
cx
)
;
return
nullptr
;
}
bool
DeadObjectProxy
:
:
regexp_toShared
(
JSContext
*
cx
HandleObject
proxy
MutableHandle
<
RegExpShared
*
>
shared
)
const
{
ReportDead
(
cx
)
;
return
false
;
}
const
char
DeadObjectProxy
:
:
family
=
0
;
const
DeadObjectProxy
DeadObjectProxy
:
:
singleton
;
bool
js
:
:
IsDeadProxyObject
(
JSObject
*
obj
)
{
return
IsDerivedProxyObject
(
obj
&
DeadObjectProxy
:
:
singleton
)
;
}
