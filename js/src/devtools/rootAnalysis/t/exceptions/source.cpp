#
define
ANNOTATE
(
property
)
__attribute__
(
(
tag
(
property
)
)
)
struct
Cell
{
int
f
;
}
ANNOTATE
(
"
GC
Thing
"
)
;
extern
void
GC
(
)
ANNOTATE
(
"
GC
Call
"
)
;
void
GC
(
)
{
asm
(
"
"
)
;
}
class
RAII_GC
{
public
:
RAII_GC
(
)
{
}
~
RAII_GC
(
)
{
GC
(
)
;
}
}
;
class
AutoSomething
{
RAII_GC
gc
;
public
:
AutoSomething
(
)
:
gc
(
)
{
asm
(
"
"
)
;
}
~
AutoSomething
(
)
{
asm
(
"
"
)
;
}
}
;
extern
void
usevar
(
Cell
*
cell
)
;
void
f
(
)
{
Cell
*
thing
=
nullptr
;
{
AutoSomething
smth
;
usevar
(
thing
)
;
}
}
