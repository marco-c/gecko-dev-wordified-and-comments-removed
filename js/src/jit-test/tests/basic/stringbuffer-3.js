gczeal
(
0
)
;
let
g
=
newGlobal
(
{
newCompartment
:
true
}
)
;
let
s1
=
newString
(
"
abcdefghijklmnopqrstuvwxyz
"
{
newStringBuffer
:
true
tenured
:
true
}
)
;
assertEq
(
JSON
.
parse
(
stringRepresentation
(
s1
)
)
.
bufferRefCount
1
)
;
g
.
s2
=
s1
;
assertEq
(
JSON
.
parse
(
stringRepresentation
(
s1
)
)
.
bufferRefCount
2
)
;
let
s3
=
g
.
s2
;
assertEq
(
JSON
.
parse
(
stringRepresentation
(
s1
)
)
.
bufferRefCount
3
)
;
