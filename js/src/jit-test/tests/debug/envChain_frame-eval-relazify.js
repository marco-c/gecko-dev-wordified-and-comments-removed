function
func
(
doEval
)
{
if
(
doEval
)
{
const
dbg
=
this
.
newGlobal
(
{
sameZoneAs
:
{
}
}
)
.
Debugger
(
{
}
)
;
dbg
.
getNewestFrame
(
)
.
eval
(
function
reaction
(
)
{
/
/
Access
global
variable
to
walk
through
the
environment
chain
.
return
Map
;
}
;
Promise
.
resolve
(
1
)
.
then
(
reaction
)
;
)
;
}
}
assertEq
(
isLazyFunction
(
func
)
true
)
;
assertEq
(
isRelazifiableFunction
(
func
)
false
)
;
func
(
false
)
;
assertEq
(
isLazyFunction
(
func
)
false
)
;
assertEq
(
isRelazifiableFunction
(
func
)
true
)
;
func
(
true
)
;
assertEq
(
isLazyFunction
(
func
)
false
)
;
assertEq
(
isRelazifiableFunction
(
func
)
false
)
;
relazifyFunctions
(
)
;
relazifyFunctions
(
)
;
assertEq
(
isLazyFunction
(
func
)
false
)
;
assertEq
(
isRelazifiableFunction
(
func
)
false
)
;
drainJobQueue
(
)
;
