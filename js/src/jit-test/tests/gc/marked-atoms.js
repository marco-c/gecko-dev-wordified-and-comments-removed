gczeal
(
0
)
;
let
global
=
newGlobal
(
{
newCompartment
:
true
}
)
;
global
.
eval
(
'
var
x
=
{
}
'
)
;
gc
(
)
;
let
atom
=
Symbol
(
)
;
assertEq
(
isAtomMarked
(
this
atom
)
true
)
;
assertEq
(
isAtomMarked
(
global
atom
)
false
)
;
global
.
x
[
atom
]
=
0
;
assertEq
(
isAtomMarked
(
global
atom
)
true
)
;
let
sym
=
Symbol
(
"
baz
"
)
;
assertEq
(
isAtomMarked
(
this
sym
)
true
)
;
assertEq
(
isAtomMarked
(
global
sym
)
false
)
;
global
.
x
[
sym
]
=
0
;
assertEq
(
isAtomMarked
(
global
sym
)
true
)
;
