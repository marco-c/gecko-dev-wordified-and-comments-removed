let
0
=
instantiate
(
(
module
(
type
ft
(
func
)
)
(
type
st
(
struct
)
)
(
type
at
(
array
i8
)
)
(
global
externref
(
extern
.
convert_any
(
ref
.
null
any
)
)
)
(
global
anyref
(
any
.
convert_extern
(
ref
.
null
extern
)
)
)
(
table
10
anyref
)
(
elem
declare
func
f
)
(
func
f
)
(
func
(
export
"
init
"
)
(
param
x
externref
)
(
table
.
set
(
i32
.
const
0
)
(
ref
.
null
any
)
)
(
table
.
set
(
i32
.
const
1
)
(
ref
.
i31
(
i32
.
const
7
)
)
)
(
table
.
set
(
i32
.
const
2
)
(
struct
.
new_default
st
)
)
(
table
.
set
(
i32
.
const
3
)
(
array
.
new_default
at
(
i32
.
const
0
)
)
)
(
table
.
set
(
i32
.
const
4
)
(
any
.
convert_extern
(
local
.
get
x
)
)
)
)
(
func
(
export
"
internalize
"
)
(
param
externref
)
(
result
anyref
)
(
any
.
convert_extern
(
local
.
get
0
)
)
)
(
func
(
export
"
externalize
"
)
(
param
anyref
)
(
result
externref
)
(
extern
.
convert_any
(
local
.
get
0
)
)
)
(
func
(
export
"
externalize
-
i
"
)
(
param
i32
)
(
result
externref
)
(
extern
.
convert_any
(
table
.
get
(
local
.
get
0
)
)
)
)
(
func
(
export
"
externalize
-
ii
"
)
(
param
i32
)
(
result
anyref
)
(
any
.
convert_extern
(
extern
.
convert_any
(
table
.
get
(
local
.
get
0
)
)
)
)
)
)
)
;
invoke
(
0
init
[
externref
(
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
internalize
[
externref
(
1
)
]
)
[
new
HostRefResult
(
1
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
internalize
[
null
]
)
[
value
(
'
anyref
'
null
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
[
hostref
(
2
)
]
)
[
new
ExternRefResult
(
2
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
[
null
]
)
[
value
(
'
externref
'
null
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
0
]
)
[
value
(
'
externref
'
null
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
1
]
)
[
new
RefWithType
(
'
externref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
2
]
)
[
new
RefWithType
(
'
externref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
3
]
)
[
new
RefWithType
(
'
externref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
4
]
)
[
new
RefWithType
(
'
externref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
i
[
5
]
)
[
value
(
'
externref
'
null
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
0
]
)
[
value
(
'
anyref
'
null
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
1
]
)
[
new
RefWithType
(
'
i31ref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
2
]
)
[
new
RefWithType
(
'
structref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
3
]
)
[
new
RefWithType
(
'
arrayref
'
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
4
]
)
[
new
HostRefResult
(
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
0
externalize
-
ii
[
5
]
)
[
value
(
'
anyref
'
null
)
]
)
;
