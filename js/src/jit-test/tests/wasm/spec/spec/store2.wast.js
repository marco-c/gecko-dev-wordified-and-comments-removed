let
0
=
instantiate
(
(
module
(
memory
(
export
"
mem
"
)
2
)
)
)
;
register
(
0
M
)
;
let
1
=
instantiate
(
(
module
(
memory
\
mem1
(
import
"
M
"
"
mem
"
)
2
)
(
memory
\
mem2
3
)
(
data
(
memory
\
mem1
)
(
i32
.
const
20
)
"
\
\
01
\
\
02
\
\
03
\
\
04
\
\
05
"
)
(
data
(
memory
\
mem2
)
(
i32
.
const
50
)
"
\
\
0A
\
\
0B
\
\
0C
\
\
0D
\
\
0E
"
)
(
func
(
export
"
read1
"
)
(
param
i32
)
(
result
i32
)
(
i32
.
load8_u
\
mem1
(
local
.
get
0
)
)
)
(
func
(
export
"
read2
"
)
(
param
i32
)
(
result
i32
)
(
i32
.
load8_u
\
mem2
(
local
.
get
0
)
)
)
(
func
(
export
"
copy
-
1
-
to
-
2
"
)
(
local
\
i
i32
)
(
local
.
set
\
i
(
i32
.
const
20
)
)
(
loop
\
cont
(
br_if
1
(
i32
.
eq
(
local
.
get
\
i
)
(
i32
.
const
23
)
)
)
(
i32
.
store8
\
mem2
(
local
.
get
\
i
)
(
i32
.
load8_u
\
mem1
(
local
.
get
\
i
)
)
)
(
local
.
set
\
i
(
i32
.
add
(
local
.
get
\
i
)
(
i32
.
const
1
)
)
)
(
br
\
cont
)
)
)
(
func
(
export
"
copy
-
2
-
to
-
1
"
)
(
local
\
i
i32
)
(
local
.
set
\
i
(
i32
.
const
50
)
)
(
loop
\
cont
(
br_if
1
(
i32
.
eq
(
local
.
get
\
i
)
(
i32
.
const
54
)
)
)
(
i32
.
store8
\
mem1
(
local
.
get
\
i
)
(
i32
.
load8_u
\
mem2
(
local
.
get
\
i
)
)
)
(
local
.
set
\
i
(
i32
.
add
(
local
.
get
\
i
)
(
i32
.
const
1
)
)
)
(
br
\
cont
)
)
)
)
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
20
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
21
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
22
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
23
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
24
]
)
[
value
(
"
i32
"
0
)
]
)
;
invoke
(
1
copy
-
1
-
to
-
2
[
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
20
]
)
[
value
(
"
i32
"
1
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
21
]
)
[
value
(
"
i32
"
2
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
22
]
)
[
value
(
"
i32
"
3
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
23
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read2
[
24
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
50
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
51
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
52
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
53
]
)
[
value
(
"
i32
"
0
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
54
]
)
[
value
(
"
i32
"
0
)
]
)
;
invoke
(
1
copy
-
2
-
to
-
1
[
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
50
]
)
[
value
(
"
i32
"
10
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
51
]
)
[
value
(
"
i32
"
11
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
52
]
)
[
value
(
"
i32
"
12
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
53
]
)
[
value
(
"
i32
"
13
)
]
)
;
assert_return
(
(
)
=
>
invoke
(
1
read1
[
54
]
)
[
value
(
"
i32
"
0
)
]
)
;
