let
memory
=
new
WebAssembly
.
Memory
(
{
initial
:
1
}
)
;
let
bytes
=
new
Uint8Array
(
memory
.
buffer
)
;
let
module
=
wasmBuiltinI8VecMul
(
)
;
let
instance
=
new
WebAssembly
.
Instance
(
module
{
"
"
:
{
"
memory
"
:
memory
}
}
)
;
let
{
i8vecmul
}
=
instance
.
exports
;
{
for
(
let
i
=
0
;
i
<
4
;
i
+
+
)
{
bytes
[
i
]
=
i
;
bytes
[
4
+
i
]
=
i
*
2
;
}
i8vecmul
(
8
0
4
4
)
;
for
(
let
i
=
0
;
i
<
4
;
i
+
+
)
{
assertEq
(
bytes
[
8
+
i
]
i
*
i
*
2
)
;
}
}
{
let
linkInstance
=
wasmEvalText
(
(
module
(
import
"
"
"
i8vecmul
"
(
func
(
param
i32
i32
i32
i32
)
)
)
)
{
"
"
:
instance
.
exports
}
)
;
}
