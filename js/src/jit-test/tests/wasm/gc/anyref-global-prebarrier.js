opts
=
getJitCompilerOptions
(
)
;
if
(
opts
[
'
ion
.
enable
'
]
|
|
opts
[
'
baseline
.
enable
'
]
)
quit
(
)
;
const
{
startProfiling
endProfiling
assertEqPreciseStacks
isSingleStepProfilingEnabled
}
=
WasmHelpers
;
let
e
=
wasmEvalText
(
(
module
(
gc_feature_opt_in
3
)
(
global
g
(
mut
anyref
)
(
ref
.
null
)
)
(
func
(
export
"
set
"
)
(
param
anyref
)
get_local
0
set_global
g
)
)
)
.
exports
;
let
obj
=
{
field
:
null
}
;
gczeal
(
4
1
)
;
e
.
set
(
obj
)
;
e
.
set
(
null
)
;
gczeal
(
0
)
;
if
(
!
isSingleStepProfilingEnabled
)
{
quit
(
0
)
;
}
enableGeckoProfiling
(
)
;
startProfiling
(
)
;
gczeal
(
4
1
)
;
e
.
set
(
obj
)
;
gczeal
(
0
)
;
assertEqPreciseStacks
(
endProfiling
(
)
[
[
'
'
'
!
>
'
'
0
!
>
'
'
<
0
!
>
'
'
filtering
GC
postbarrier
0
!
>
'
'
<
0
!
>
'
'
0
!
>
'
'
!
>
'
'
'
]
[
'
'
'
!
>
'
'
0
!
>
'
'
<
0
!
>
'
'
GC
postbarrier
0
!
>
'
'
<
0
!
>
'
'
0
!
>
'
'
!
>
'
'
'
]
[
'
'
'
!
>
'
'
0
!
>
'
'
!
>
'
'
'
]
]
)
;
startProfiling
(
)
;
gczeal
(
4
1
)
;
e
.
set
(
null
)
;
gczeal
(
0
)
;
assertEqPreciseStacks
(
endProfiling
(
)
[
[
'
'
'
!
>
'
'
0
!
>
'
'
'
'
0
!
>
'
'
<
0
!
>
'
'
filtering
GC
postbarrier
0
!
>
'
'
<
0
!
>
'
'
0
!
>
'
'
!
>
'
'
'
]
[
'
'
'
!
>
'
'
0
!
>
'
'
'
'
0
!
>
'
'
!
>
'
'
'
]
]
)
;
