load
(
libdir
+
"
asserts
.
js
"
)
;
var
g
=
newGlobal
(
{
newCompartment
:
true
}
)
var
thrower
=
g
.
Function
(
throw
0
;
)
;
function
*
throwAndYield
(
)
{
try
{
thrower
(
)
;
}
finally
{
yield
;
}
}
assertThrowsValue
(
(
)
=
>
[
.
.
.
throwAndYield
(
)
]
0
)
;
function
*
throwAndNuke
(
)
{
try
{
thrower
(
)
;
}
finally
{
nukeAllCCWs
(
)
;
yield
;
}
}
assertThrowsValue
(
(
)
=
>
[
.
.
.
throwAndNuke
(
)
]
0
)
;
