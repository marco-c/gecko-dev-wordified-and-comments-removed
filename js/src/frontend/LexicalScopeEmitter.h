#
ifndef
frontend_LexicalScopeEmitter_h
#
define
frontend_LexicalScopeEmitter_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
#
include
"
frontend
/
EmitterScope
.
h
"
#
include
"
frontend
/
TDZCheckCache
.
h
"
#
include
"
vm
/
Scope
.
h
"
namespace
js
{
namespace
frontend
{
struct
BytecodeEmitter
;
class
MOZ_STACK_CLASS
LexicalScopeEmitter
{
BytecodeEmitter
*
bce_
;
mozilla
:
:
Maybe
<
TDZCheckCache
>
tdzCache_
;
mozilla
:
:
Maybe
<
EmitterScope
>
emitterScope_
;
#
ifdef
DEBUG
enum
class
State
{
Start
Scope
End
}
;
State
state_
=
State
:
:
Start
;
#
endif
public
:
explicit
LexicalScopeEmitter
(
BytecodeEmitter
*
bce
)
;
const
EmitterScope
&
emitterScope
(
)
const
{
return
*
emitterScope_
;
}
[
[
nodiscard
]
]
bool
emitScope
(
ScopeKind
kind
LexicalScope
:
:
ParserData
*
bindings
#
ifdef
ENABLE_EXPLICIT_RESOURCE_MANAGEMENT
EmitterScope
:
:
BlockKind
blockKind
=
EmitterScope
:
:
BlockKind
:
:
Other
#
endif
)
;
[
[
nodiscard
]
]
bool
emitEmptyScope
(
)
;
[
[
nodiscard
]
]
bool
emitEnd
(
)
;
}
;
}
}
#
endif
