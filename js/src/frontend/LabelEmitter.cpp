#
include
"
frontend
/
LabelEmitter
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
frontend
/
BytecodeEmitter
.
h
"
using
namespace
js
;
using
namespace
js
:
:
frontend
;
void
LabelEmitter
:
:
emitLabel
(
HandleAtom
name
)
{
MOZ_ASSERT
(
state_
=
=
State
:
:
Start
)
;
controlInfo_
.
emplace
(
bce_
name
bce_
-
>
bytecodeSection
(
)
.
offset
(
)
)
;
#
ifdef
DEBUG
state_
=
State
:
:
Label
;
#
endif
}
bool
LabelEmitter
:
:
emitEnd
(
)
{
MOZ_ASSERT
(
state_
=
=
State
:
:
Label
)
;
if
(
!
controlInfo_
-
>
patchBreaks
(
bce_
)
)
{
return
false
;
}
controlInfo_
.
reset
(
)
;
#
ifdef
DEBUG
state_
=
State
:
:
End
;
#
endif
return
true
;
}
