#
ifndef
frontend_StencilXdr_h
#
define
frontend_StencilXdr_h
#
include
"
frontend
/
ObjLiteral
.
h
"
#
include
"
frontend
/
Stencil
.
h
"
#
include
"
vm
/
Scope
.
h
"
#
include
"
vm
/
Xdr
.
h
"
namespace
js
{
namespace
frontend
{
template
<
typename
DataT
>
struct
CanCopyDataToDisk
{
#
ifdef
__cpp_lib_has_unique_object_representations
static
constexpr
bool
unique_repr
=
std
:
:
has_unique_object_representations
<
DataT
>
(
)
;
#
else
static
constexpr
bool
unique_repr
=
true
;
#
endif
static
constexpr
bool
no_pointer
=
alignof
(
DataT
)
<
alignof
(
void
*
)
|
|
sizeof
(
void
*
)
=
=
sizeof
(
uint32_t
)
;
static
constexpr
bool
value
=
unique_repr
&
&
no_pointer
;
}
;
class
StencilXDR
{
public
:
template
<
XDRMode
mode
>
static
XDRResult
ScopeData
(
XDRState
<
mode
>
*
xdr
ScopeStencil
&
stencil
BaseParserScopeData
*
&
baseScopeData
)
;
template
<
XDRMode
mode
>
static
XDRResult
ObjLiteral
(
XDRState
<
mode
>
*
xdr
ObjLiteralStencil
&
stencil
)
;
template
<
XDRMode
mode
>
static
XDRResult
BigInt
(
XDRState
<
mode
>
*
xdr
BigIntStencil
&
stencil
)
;
template
<
XDRMode
mode
>
static
XDRResult
SharedData
(
js
:
:
XDRState
<
mode
>
*
xdr
RefPtr
<
SharedImmutableScriptData
>
&
sisd
)
;
}
;
}
}
#
endif
