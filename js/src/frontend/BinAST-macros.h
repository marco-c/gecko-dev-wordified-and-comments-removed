#
ifndef
frontend_BinAST_macros_h
#
define
frontend_BinAST_macros_h
#
include
"
vm
/
JSContext
.
h
"
#
define
BINJS_TRY
(
EXPR
)
\
do
{
\
if
(
!
EXPR
)
return
cx_
-
>
alreadyReportedError
(
)
;
\
}
while
(
false
)
#
define
BINJS_TRY_VAR
(
VAR
EXPR
)
\
do
{
\
VAR
=
EXPR
;
\
if
(
!
VAR
)
return
cx_
-
>
alreadyReportedError
(
)
;
\
}
while
(
false
)
#
define
BINJS_TRY_DECL
(
VAR
EXPR
)
\
auto
VAR
=
EXPR
;
\
if
(
!
VAR
)
return
cx_
-
>
alreadyReportedError
(
)
;
#
define
BINJS_TRY_EMPL
(
VAR
EXPR
)
\
do
{
\
auto
_tryEmplResult
=
EXPR
;
\
if
(
!
_tryEmplResult
)
return
cx_
-
>
alreadyReportedError
(
)
;
\
VAR
.
emplace
(
_tryEmplResult
.
unwrap
(
)
)
;
\
}
while
(
false
)
#
define
BINJS_MOZ_TRY_EMPLACE
(
VAR
EXPR
)
\
do
{
\
auto
_tryEmplResult
=
EXPR
;
\
if
(
_tryEmplResult
.
isErr
(
)
)
\
return
:
:
mozilla
:
:
Err
(
_tryEmplResult
.
unwrapErr
(
)
)
;
\
VAR
.
emplace
(
_tryEmplResult
.
unwrap
(
)
)
;
\
}
while
(
false
)
#
define
BINJS_MOZ_TRY_DECL
(
VAR
EXPR
)
\
auto
_
#
#
VAR
=
EXPR
;
\
if
(
_
#
#
VAR
.
isErr
(
)
)
return
:
:
mozilla
:
:
Err
(
_
#
#
VAR
.
unwrapErr
(
)
)
;
\
auto
VAR
=
_
#
#
VAR
.
unwrap
(
)
;
#
endif
