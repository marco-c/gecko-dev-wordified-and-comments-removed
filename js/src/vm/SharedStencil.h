#
ifndef
vm_SharedStencil_h
#
define
vm_SharedStencil_h
#
include
<
stddef
.
h
>
#
include
<
stdint
.
h
>
#
include
"
jstypes
.
h
"
namespace
js
{
namespace
frontend
{
class
ImmutableScriptFlags
{
public
:
enum
ScriptFlags
:
uint32_t
{
NoScriptRval
=
1
<
<
0
SelfHosted
=
1
<
<
1
TreatAsRunOnce
=
1
<
<
2
Strict
=
1
<
<
3
HasNonSyntacticScope
=
1
<
<
4
BindingsAccessedDynamically
=
1
<
<
5
FunHasExtensibleScope
=
1
<
<
6
HasCallSiteObj
=
1
<
<
7
HasModuleGoal
=
1
<
<
8
FunctionHasThisBinding
=
1
<
<
9
FunctionHasExtraBodyVarScope
=
1
<
<
10
HasMappedArgsObj
=
1
<
<
11
HasInnerFunctions
=
1
<
<
12
NeedsHomeObject
=
1
<
<
13
IsDerivedClassConstructor
=
1
<
<
14
IsDefaultClassConstructor
=
1
<
<
15
IsLikelyConstructorWrapper
=
1
<
<
16
IsGenerator
=
1
<
<
17
IsAsync
=
1
<
<
18
HasRest
=
1
<
<
19
ArgumentsHasVarBinding
=
1
<
<
20
IsForEval
=
1
<
<
21
IsModule
=
1
<
<
22
NeedsFunctionEnvironmentObjects
=
1
<
<
23
ShouldDeclareArguments
=
1
<
<
24
IsFunction
=
1
<
<
25
HasDirectEval
=
1
<
<
26
IsLazyScript
=
1
<
<
27
}
;
uint32_t
scriptFlags_
=
0
;
public
:
ImmutableScriptFlags
(
)
:
scriptFlags_
(
)
{
static_assert
(
sizeof
(
ImmutableScriptFlags
)
=
=
sizeof
(
scriptFlags_
)
"
No
extra
members
allowed
"
)
;
static_assert
(
offsetof
(
ImmutableScriptFlags
scriptFlags_
)
=
=
0
"
Required
for
JIT
flag
access
"
)
;
}
MOZ_IMPLICIT
ImmutableScriptFlags
(
ScriptFlags
sf
)
:
scriptFlags_
(
sf
)
{
}
MOZ_IMPLICIT
ImmutableScriptFlags
(
int32_t
flags
)
:
scriptFlags_
(
ScriptFlags
(
flags
)
)
{
}
operator
uint32_t
(
)
const
{
return
scriptFlags_
;
}
void
operator
=
(
uint32_t
flag
)
{
scriptFlags_
=
flag
;
}
uint32_t
toRaw
(
)
const
{
return
scriptFlags_
;
}
}
;
}
}
#
endif
