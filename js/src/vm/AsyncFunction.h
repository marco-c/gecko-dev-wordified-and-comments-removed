#
ifndef
vm_AsyncFunction_h
#
define
vm_AsyncFunction_h
#
include
"
js
/
Class
.
h
"
#
include
"
vm
/
AsyncFunctionResolveKind
.
h
"
#
include
"
vm
/
GeneratorObject
.
h
"
#
include
"
vm
/
JSObject
.
h
"
#
include
"
vm
/
PromiseObject
.
h
"
namespace
js
{
class
AsyncFunctionGeneratorObject
;
extern
const
JSClass
AsyncFunctionClass
;
[
[
nodiscard
]
]
bool
AsyncFunctionAwaitedFulfilled
(
JSContext
*
cx
Handle
<
AsyncFunctionGeneratorObject
*
>
generator
HandleValue
value
)
;
[
[
nodiscard
]
]
bool
AsyncFunctionAwaitedRejected
(
JSContext
*
cx
Handle
<
AsyncFunctionGeneratorObject
*
>
generator
HandleValue
reason
)
;
JSObject
*
AsyncFunctionResolve
(
JSContext
*
cx
Handle
<
AsyncFunctionGeneratorObject
*
>
generator
HandleValue
valueOrReason
AsyncFunctionResolveKind
resolveKind
)
;
class
AsyncFunctionGeneratorObject
:
public
AbstractGeneratorObject
{
public
:
enum
{
PROMISE_SLOT
=
AbstractGeneratorObject
:
:
RESERVED_SLOTS
RESERVED_SLOTS
}
;
static
const
JSClass
class_
;
static
const
JSClassOps
classOps_
;
static
AsyncFunctionGeneratorObject
*
create
(
JSContext
*
cx
HandleFunction
asyncGen
)
;
static
AsyncFunctionGeneratorObject
*
create
(
JSContext
*
cx
Handle
<
ModuleObject
*
>
module
)
;
PromiseObject
*
promise
(
)
{
return
&
getFixedSlot
(
PROMISE_SLOT
)
.
toObject
(
)
.
as
<
PromiseObject
>
(
)
;
}
}
;
}
#
endif
