#
ifndef
vm_StringObject_inl_h
#
define
vm_StringObject_inl_h
#
include
"
vm
/
StringObject
.
h
"
#
include
"
vm
/
JSObject
-
inl
.
h
"
#
include
"
vm
/
Shape
-
inl
.
h
"
namespace
js
{
inline
bool
StringObject
:
:
init
(
JSContext
*
cx
Handle
<
StringObject
*
>
obj
HandleString
str
)
{
MOZ_ASSERT
(
obj
-
>
numFixedSlots
(
)
=
=
2
)
;
if
(
!
SharedShape
:
:
ensureInitialCustomShape
<
StringObject
>
(
cx
obj
)
)
{
return
false
;
}
MOZ_ASSERT
(
obj
-
>
lookup
(
cx
NameToId
(
cx
-
>
names
(
)
.
length
)
)
-
>
slot
(
)
=
=
LENGTH_SLOT
)
;
obj
-
>
setStringThis
(
str
)
;
return
true
;
}
inline
StringObject
*
StringObject
:
:
create
(
JSContext
*
cx
HandleString
str
HandleObject
proto
NewObjectKind
newKind
)
{
Rooted
<
StringObject
*
>
obj
(
cx
NewObjectWithClassProtoAndKind
<
StringObject
>
(
cx
proto
newKind
)
)
;
if
(
!
obj
)
{
return
nullptr
;
}
if
(
!
StringObject
:
:
init
(
cx
obj
str
)
)
{
return
nullptr
;
}
return
obj
;
}
}
#
endif
