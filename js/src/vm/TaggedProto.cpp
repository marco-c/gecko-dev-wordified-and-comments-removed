#
include
"
vm
/
TaggedProto
.
h
"
#
include
"
gc
/
Barrier
.
h
"
#
include
"
vm
/
JSFunction
.
h
"
#
include
"
vm
/
JSObject
.
h
"
namespace
js
{
void
InternalBarrierMethods
<
TaggedProto
>
:
:
preBarrier
(
TaggedProto
&
proto
)
{
InternalBarrierMethods
<
JSObject
*
>
:
:
preBarrier
(
proto
.
toObjectOrNull
(
)
)
;
}
void
InternalBarrierMethods
<
TaggedProto
>
:
:
postBarrier
(
TaggedProto
*
vp
TaggedProto
prev
TaggedProto
next
)
{
JSObject
*
prevObj
=
prev
.
isObject
(
)
?
prev
.
toObject
(
)
:
nullptr
;
JSObject
*
nextObj
=
next
.
isObject
(
)
?
next
.
toObject
(
)
:
nullptr
;
InternalBarrierMethods
<
JSObject
*
>
:
:
postBarrier
(
reinterpret_cast
<
JSObject
*
*
>
(
vp
)
prevObj
nextObj
)
;
}
void
InternalBarrierMethods
<
TaggedProto
>
:
:
readBarrier
(
const
TaggedProto
&
proto
)
{
InternalBarrierMethods
<
JSObject
*
>
:
:
readBarrier
(
proto
.
toObjectOrNull
(
)
)
;
}
}
