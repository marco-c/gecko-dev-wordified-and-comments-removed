#
include
"
js
/
CallAndConstruct
.
h
"
#
include
"
js
/
Exception
.
h
"
#
include
"
jsapi
-
tests
/
tests
.
h
"
BEGIN_TEST
(
testErrorCopying_columnCopied
)
{
EXEC
(
"
function
check
(
)
{
Object
;
foo
;
}
"
)
;
JS
:
:
RootedValue
rval
(
cx
)
;
CHECK
(
!
JS_CallFunctionName
(
cx
global
"
check
"
JS
:
:
HandleValueArray
:
:
empty
(
)
&
rval
)
)
;
JS
:
:
ExceptionStack
exnStack
(
cx
)
;
CHECK
(
JS
:
:
StealPendingExceptionStack
(
cx
&
exnStack
)
)
;
JS
:
:
ErrorReportBuilder
report
(
cx
)
;
CHECK
(
report
.
init
(
cx
exnStack
JS
:
:
ErrorReportBuilder
:
:
WithSideEffects
)
)
;
CHECK_EQUAL
(
report
.
report
(
)
-
>
column
28u
)
;
return
true
;
}
END_TEST
(
testErrorCopying_columnCopied
)
