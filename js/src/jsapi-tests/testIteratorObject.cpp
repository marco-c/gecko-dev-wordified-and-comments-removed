#
include
"
jsapi
-
tests
/
tests
.
h
"
BEGIN_TEST
(
testIteratorObject
)
{
using
namespace
js
;
JS
:
:
RootedValue
result
(
cx
)
;
EVAL
(
"
new
Map
(
[
[
'
key1
'
'
value1
'
]
[
'
key2
'
'
value2
'
]
]
)
.
entries
(
)
"
&
result
)
;
CHECK
(
result
.
isObject
(
)
)
;
JS
:
:
RootedObject
obj1
(
cx
&
result
.
toObject
(
)
)
;
ESClassValue
class1
=
ESClass_Other
;
CHECK
(
GetBuiltinClass
(
cx
obj1
&
class1
)
)
;
CHECK
(
class1
=
=
ESClass_MapIterator
)
;
EVAL
(
"
new
Set
(
[
'
value1
'
'
value2
'
]
)
.
entries
(
)
"
&
result
)
;
CHECK
(
result
.
isObject
(
)
)
;
JS
:
:
RootedObject
obj2
(
cx
&
result
.
toObject
(
)
)
;
ESClassValue
class2
=
ESClass_Other
;
CHECK
(
GetBuiltinClass
(
cx
obj2
&
class2
)
)
;
CHECK
(
class2
=
=
ESClass_SetIterator
)
;
return
true
;
}
END_TEST
(
testIteratorObject
)
