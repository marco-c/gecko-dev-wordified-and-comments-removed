#
include
"
asmjs
/
WasmTable
.
h
"
using
namespace
js
;
using
namespace
js
:
:
wasm
;
SharedTable
Table
:
:
create
(
JSContext
*
cx
TableKind
kind
uint32_t
length
)
{
SharedTable
table
=
js_new
<
Table
>
(
)
;
if
(
!
table
)
return
nullptr
;
table
-
>
array_
.
reset
(
js_pod_calloc
<
void
*
>
(
length
)
)
;
if
(
!
table
-
>
array_
)
return
nullptr
;
table
-
>
kind_
=
kind
;
table
-
>
length_
=
length
;
return
table
;
}
size_t
Table
:
:
sizeOfExcludingThis
(
MallocSizeOf
mallocSizeOf
)
const
{
return
mallocSizeOf
(
array_
.
get
(
)
)
;
}
