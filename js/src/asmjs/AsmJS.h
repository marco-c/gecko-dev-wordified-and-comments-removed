#
ifndef
asmjs_asmjs_h
#
define
asmjs_asmjs_h
#
include
"
NamespaceImports
.
h
"
namespace
js
{
class
ExclusiveContext
;
namespace
frontend
{
template
<
typename
ParseHandler
>
class
Parser
;
template
<
typename
ParseHandler
>
struct
ParseContext
;
class
FullParseHandler
;
class
ParseNode
;
}
typedef
frontend
:
:
Parser
<
frontend
:
:
FullParseHandler
>
AsmJSParser
;
typedef
frontend
:
:
ParseContext
<
frontend
:
:
FullParseHandler
>
AsmJSParseContext
;
extern
bool
CompileAsmJS
(
ExclusiveContext
*
cx
AsmJSParser
&
parser
frontend
:
:
ParseNode
*
stmtList
bool
*
validated
)
;
extern
bool
IsAsmJSModuleNative
(
JSNative
native
)
;
extern
bool
IsAsmJSModule
(
JSFunction
*
fun
)
;
extern
bool
IsAsmJSFunction
(
JSFunction
*
fun
)
;
extern
bool
IsAsmJSCompilationAvailable
(
JSContext
*
cx
unsigned
argc
JS
:
:
Value
*
vp
)
;
extern
bool
IsAsmJSModule
(
JSContext
*
cx
unsigned
argc
JS
:
:
Value
*
vp
)
;
extern
bool
IsAsmJSModuleLoadedFromCache
(
JSContext
*
cx
unsigned
argc
Value
*
vp
)
;
extern
bool
IsAsmJSFunction
(
JSContext
*
cx
unsigned
argc
JS
:
:
Value
*
vp
)
;
extern
JSString
*
AsmJSFunctionToString
(
JSContext
*
cx
HandleFunction
fun
)
;
extern
JSString
*
AsmJSModuleToString
(
JSContext
*
cx
HandleFunction
fun
bool
addParenToLambda
)
;
extern
bool
IsValidAsmJSHeapLength
(
uint32_t
length
)
;
extern
uint32_t
RoundUpToNextValidAsmJSHeapLength
(
uint32_t
length
)
;
#
ifdef
_MIPS_ARCH_LOONGSON3A
static
const
size_t
AsmJSPageSize
=
16384
;
#
else
static
const
size_t
AsmJSPageSize
=
4096
;
#
endif
#
if
defined
(
ASMJS_MAY_USE_SIGNAL_HANDLERS_FOR_OOB
)
extern
const
size_t
AsmJSMappedSize
;
#
endif
}
#
endif
