var
BUGNUMBER
=
50447
;
var
summary
=
'
Test
(
non
-
ECMA
)
Error
object
properties
fileName
lineNumber
'
;
test
(
)
;
function
test
(
)
{
printBugNumber
(
BUGNUMBER
)
;
printStatus
(
summary
)
;
testRealError
(
)
;
test1
(
)
;
test2
(
)
;
test3
(
)
;
test4
(
)
;
}
function
normalize
(
filename
)
{
return
filename
.
replace
(
/
\
\
{
1
2
}
/
g
'
/
'
)
;
}
function
testRealError
(
)
{
try
{
blabla
;
}
catch
(
e
)
{
if
(
e
.
fileName
.
search
(
/
-
50447
-
1
\
.
js
/
i
)
=
=
-
1
)
reportCompare
(
'
PASS
'
'
FAIL
'
"
expected
fileName
to
end
with
'
-
50447
-
1
.
js
'
"
)
;
reportCompare
(
60
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
}
function
test1
(
)
{
var
e
=
new
InternalError
(
"
msg
"
"
file
"
2
)
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
file
\
"
2
)
)
"
e
.
toSource
(
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
"
file
"
e
.
fileName
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
2
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test2
(
)
{
var
expectedLine
=
109
;
var
expectedFileName
=
'
js1_5
/
extensions
/
regress
-
50447
-
1
.
js
'
;
if
(
typeof
document
!
=
"
undefined
"
)
{
expectedFileName
=
document
.
location
.
href
.
replace
(
/
[
^
\
/
]
*
(
\
?
.
*
)
/
'
'
)
+
expectedFileName
;
}
var
e
=
new
InternalError
(
"
msg
"
)
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
"
+
expectedFileName
+
"
\
"
"
+
expectedLine
+
"
)
)
"
normalize
(
e
.
toSource
(
)
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
expectedFileName
normalize
(
e
.
fileName
)
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
expectedLine
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test3
(
)
{
var
expectedFileName
=
'
js1_5
/
extensions
/
regress
-
50447
-
1
.
js
'
;
if
(
typeof
document
!
=
"
undefined
"
)
{
expectedFileName
=
document
.
location
.
href
.
replace
(
/
[
^
\
/
]
*
(
\
?
.
*
)
/
'
'
)
+
expectedFileName
;
}
var
e
=
new
InternalError
(
"
msg
"
)
;
e
.
lineNumber
=
10
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
"
+
expectedFileName
+
"
\
"
10
)
)
"
normalize
(
e
.
toSource
(
)
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
expectedFileName
normalize
(
e
.
fileName
)
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
10
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test4
(
)
{
var
expectedLine
=
163
;
var
e
=
new
InternalError
(
"
msg
"
"
file
"
)
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
file
\
"
"
+
expectedLine
+
"
)
)
"
e
.
toSource
(
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
"
file
"
e
.
fileName
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
expectedLine
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
