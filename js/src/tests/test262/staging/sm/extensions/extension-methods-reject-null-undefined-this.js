var
ClassToMethodMap
=
{
Object
:
[
"
toSource
"
]
Function
:
[
"
toSource
"
]
Array
:
[
"
toSource
"
]
String
:
[
"
toSource
"
]
Boolean
:
[
"
toSource
"
]
Number
:
[
"
toSource
"
]
Date
:
[
"
toSource
"
]
RegExp
:
[
"
toSource
"
]
Error
:
[
"
toSource
"
]
}
;
var
badThisValues
=
[
null
undefined
]
;
function
testMethod
(
Class
className
method
)
{
var
expr
;
for
(
var
i
=
0
sz
=
badThisValues
.
length
;
i
<
sz
;
i
+
+
)
{
var
badThis
=
badThisValues
[
i
]
;
expr
=
className
+
"
.
prototype
.
"
+
method
+
"
.
call
(
"
+
badThis
+
"
)
"
;
assert
.
throws
(
TypeError
function
(
)
{
Class
.
prototype
[
method
]
.
call
(
badThis
)
;
}
"
wrong
error
for
"
+
expr
)
;
expr
=
className
+
"
.
prototype
.
"
+
method
+
"
.
apply
(
"
+
badThis
+
"
)
"
;
assert
.
throws
(
TypeError
function
(
)
{
Class
.
prototype
[
method
]
.
apply
(
badThis
)
;
}
"
wrong
error
for
"
+
expr
)
;
}
expr
=
"
(
0
"
+
className
+
"
.
prototype
.
"
+
method
+
"
)
(
)
"
assert
.
throws
(
TypeError
function
(
)
{
(
0
Class
.
prototype
[
method
]
)
(
)
;
}
"
wrong
error
for
"
+
expr
)
;
}
for
(
var
className
in
ClassToMethodMap
)
{
var
Class
=
this
[
className
]
;
var
methodNames
=
ClassToMethodMap
[
className
]
;
for
(
var
i
=
0
sz
=
methodNames
.
length
;
i
<
sz
;
i
+
+
)
{
var
method
=
methodNames
[
i
]
;
testMethod
(
Class
className
method
)
;
}
}
reportCompare
(
0
0
)
;
