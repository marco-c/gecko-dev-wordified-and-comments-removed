function
test
(
)
{
var
returnCalled
=
0
;
var
returnCalledExpected
=
0
;
var
iterable
=
{
}
;
iterable
[
Symbol
.
iterator
]
=
function
(
)
{
return
{
next
(
)
{
return
{
done
:
true
}
;
}
return
(
)
{
returnCalled
+
+
;
return
{
}
;
}
}
;
}
;
var
[
]
=
iterable
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
iterable
[
Symbol
.
iterator
]
=
function
(
)
{
return
{
next
(
)
{
return
{
done
:
false
}
;
}
return
(
)
{
returnCalled
+
+
;
return
{
}
;
}
}
;
}
;
var
[
]
=
iterable
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
var
[
a
b
]
=
iterable
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
var
[
c
]
=
iterable
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
function
throwlhs
(
)
{
throw
"
in
lhs
"
;
}
assertThrowsValue
(
function
(
)
{
0
[
.
.
.
{
}
[
throwlhs
(
)
]
]
=
iterable
;
}
"
in
lhs
"
)
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
iterable
[
Symbol
.
iterator
]
=
function
(
)
{
return
{
next
(
)
{
return
{
}
;
}
return
(
)
{
returnCalled
+
+
;
return
{
}
;
}
}
;
}
;
assertThrowsValue
(
function
(
)
{
0
[
.
.
.
{
}
[
throwlhs
(
)
]
]
=
iterable
;
}
"
in
lhs
"
)
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
iterable
[
Symbol
.
iterator
]
=
function
(
)
{
return
{
next
(
)
{
throw
"
in
next
"
;
}
return
(
)
{
returnCalled
+
+
;
return
{
}
;
}
}
;
}
;
assertThrowsValue
(
function
(
)
{
var
[
d
]
=
iterable
;
}
"
in
next
"
)
;
assert
.
sameValue
(
returnCalled
returnCalledExpected
)
;
iterable
[
Symbol
.
iterator
]
=
function
(
)
{
return
{
next
(
)
{
return
{
done
:
false
}
;
}
return
(
)
{
returnCalled
+
+
;
return
42
;
}
}
;
}
;
assert
.
throws
(
TypeError
function
(
)
{
var
[
]
=
iterable
;
}
)
;
assert
.
sameValue
(
returnCalled
+
+
returnCalledExpected
)
;
}
test
(
)
;
reportCompare
(
0
0
)
;
