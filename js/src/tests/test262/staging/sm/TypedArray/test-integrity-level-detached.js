const
EMPTY
=
0
;
const
INLINE_STORAGE
=
10
;
const
NON_INLINE_STORAGE
=
1024
;
class
DetachedInt32Array
extends
Int32Array
{
constructor
(
.
.
.
args
)
{
super
(
.
.
.
args
)
;
262
.
detachArrayBuffer
(
this
.
buffer
)
;
}
}
{
let
ta
=
new
DetachedInt32Array
(
EMPTY
)
;
Object
.
seal
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
for
(
let
length
of
[
INLINE_STORAGE
NON_INLINE_STORAGE
]
)
{
let
ta
=
new
DetachedInt32Array
(
length
)
;
Object
.
seal
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
{
let
ta
=
new
DetachedInt32Array
(
EMPTY
)
;
Object
.
freeze
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
for
(
let
length
of
[
INLINE_STORAGE
NON_INLINE_STORAGE
]
)
{
let
ta
=
new
DetachedInt32Array
(
length
)
;
Object
.
freeze
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
{
let
ta
=
new
DetachedInt32Array
(
EMPTY
)
;
Object
.
preventExtensions
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
for
(
let
length
of
[
INLINE_STORAGE
NON_INLINE_STORAGE
]
)
{
let
ta
=
new
DetachedInt32Array
(
length
)
;
Object
.
preventExtensions
(
ta
)
;
assert
.
sameValue
(
Object
.
isExtensible
(
ta
)
false
)
;
assert
.
sameValue
(
Object
.
isSealed
(
ta
)
true
)
;
assert
.
sameValue
(
Object
.
isFrozen
(
ta
)
true
)
;
}
reportCompare
(
0
0
)
;
