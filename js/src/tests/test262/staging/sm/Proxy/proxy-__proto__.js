var
protoDesc
=
Object
.
getOwnPropertyDescriptor
(
Object
.
prototype
"
__proto__
"
)
;
var
protoGetter
=
protoDesc
.
get
;
var
protoSetter
=
protoDesc
.
set
;
function
testProxy
(
target
initialProto
)
{
var
pobj
=
new
Proxy
(
target
{
}
)
;
assert
.
sameValue
(
Object
.
getPrototypeOf
(
pobj
)
initialProto
)
;
assert
.
sameValue
(
protoGetter
.
call
(
pobj
)
initialProto
)
;
protoSetter
.
call
(
pobj
null
)
;
assert
.
sameValue
(
Object
.
getPrototypeOf
(
pobj
)
null
)
;
assert
.
sameValue
(
protoGetter
.
call
(
pobj
)
null
)
;
assert
.
sameValue
(
Object
.
getPrototypeOf
(
target
)
null
)
;
}
var
nonNullProto
=
{
toString
:
function
(
)
{
return
"
non
-
null
prototype
"
;
}
}
;
var
target
=
Object
.
create
(
nonNullProto
)
;
testProxy
(
target
nonNullProto
)
;
target
=
Object
.
create
(
null
)
;
target
.
toString
=
function
(
)
{
return
"
null
prototype
"
}
;
testProxy
(
target
null
)
;
var
callForCallOnly
=
function
(
)
{
}
;
callForCallOnly
.
toString
=
function
(
)
{
return
"
callable
target
"
;
}
;
testProxy
(
callForCallOnly
Function
.
prototype
)
;
reportCompare
(
0
0
)
;
