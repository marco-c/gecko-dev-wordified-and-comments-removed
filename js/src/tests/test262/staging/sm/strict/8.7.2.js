assert
.
sameValue
(
testLenientAndStrict
(
'
undeclared
=
1
'
completesNormally
raisesException
(
ReferenceError
)
)
true
)
;
assert
.
sameValue
(
testLenientAndStrict
(
'
var
var_declared
;
var_declared
=
1
'
completesNormally
completesNormally
)
true
)
;
assert
.
sameValue
(
testLenientAndStrict
(
'
undeclared_at_compiletime
=
1
'
parsesSuccessfully
parsesSuccessfully
)
true
)
;
function
obj
(
)
{
var
o
=
{
x
:
1
y
:
1
}
;
Object
.
defineProperty
(
o
'
x
'
{
writable
:
false
}
)
;
return
o
;
}
function
in_strict_with
(
expr
)
{
return
"
with
(
obj
(
)
)
{
(
function
(
)
{
'
use
strict
'
;
"
+
expr
+
"
}
)
(
)
;
}
"
;
}
assert
.
sameValue
(
raisesException
(
TypeError
)
(
in_strict_with
(
'
x
=
2
;
y
=
2
;
'
)
)
true
)
;
assert
.
sameValue
(
raisesException
(
TypeError
)
(
in_strict_with
(
'
x
+
+
;
'
)
)
true
)
;
assert
.
sameValue
(
raisesException
(
TypeError
)
(
in_strict_with
(
'
+
+
x
;
'
)
)
true
)
;
assert
.
sameValue
(
raisesException
(
TypeError
)
(
in_strict_with
(
'
x
-
-
;
'
)
)
true
)
;
assert
.
sameValue
(
raisesException
(
TypeError
)
(
in_strict_with
(
'
-
-
x
;
'
)
)
true
)
;
reportCompare
(
0
0
)
;
