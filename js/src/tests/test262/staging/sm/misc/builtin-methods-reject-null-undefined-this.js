var
ClassToMethodMap
=
{
Object
:
[
"
toLocaleString
"
"
valueOf
"
"
hasOwnProperty
"
"
__defineGetter__
"
"
__defineSetter__
"
"
__lookupGetter__
"
"
__lookupSetter__
"
]
Array
:
[
"
toString
"
"
toLocaleString
"
"
concat
"
"
join
"
"
pop
"
"
push
"
"
reverse
"
"
shift
"
"
slice
"
"
sort
"
"
splice
"
"
unshift
"
"
indexOf
"
"
lastIndexOf
"
"
every
"
"
some
"
"
forEach
"
"
map
"
"
filter
"
"
reduce
"
"
reduceRight
"
]
String
:
[
"
toString
"
"
valueOf
"
"
charAt
"
"
charCodeAt
"
"
concat
"
"
indexOf
"
"
lastIndexOf
"
"
localeCompare
"
"
match
"
"
replace
"
"
search
"
"
slice
"
"
split
"
"
substring
"
"
toLowerCase
"
"
toLocaleLowerCase
"
"
toUpperCase
"
"
toLocaleUpperCase
"
"
trim
"
"
bold
"
"
italics
"
"
fixed
"
"
fontsize
"
"
fontcolor
"
"
link
"
"
anchor
"
"
strike
"
"
small
"
"
big
"
"
blink
"
"
sup
"
"
sub
"
"
substr
"
"
trimLeft
"
"
trimRight
"
]
Boolean
:
[
"
toString
"
"
valueOf
"
]
Number
:
[
"
toString
"
"
toLocaleString
"
"
valueOf
"
"
toFixed
"
"
toExponential
"
"
toPrecision
"
]
Date
:
[
"
toDateString
"
"
toTimeString
"
"
toLocaleString
"
"
toLocaleDateString
"
"
toLocaleTimeString
"
"
valueOf
"
"
getTime
"
"
getFullYear
"
"
getUTCFullYear
"
"
getMonth
"
"
getUTCMonth
"
"
getDate
"
"
getUTCDate
"
"
getDay
"
"
getUTCDay
"
"
getHours
"
"
getUTCHours
"
"
getMinutes
"
"
getUTCMinutes
"
"
getSeconds
"
"
getUTCSeconds
"
"
getMilliseconds
"
"
getUTCMilliseconds
"
"
setTime
"
"
getTimezoneOffset
"
"
setMilliseconds
"
"
setUTCMilliseconds
"
"
setSeconds
"
"
setUTCSeconds
"
"
setMinutes
"
"
setUTCMinutes
"
"
setHours
"
"
setUTCHours
"
"
setDate
"
"
setUTCDate
"
"
setMonth
"
"
setUTCMonth
"
"
setFullYear
"
"
setUTCFullYear
"
"
toUTCString
"
"
toISOString
"
"
toJSON
"
"
getYear
"
"
setYear
"
"
toGMTString
"
]
RegExp
:
[
"
exec
"
"
test
"
"
toString
"
]
Error
:
[
"
toString
"
]
}
;
var
badThisValues
=
[
null
undefined
]
;
function
testMethod
(
Class
className
method
)
{
var
expr
;
for
(
var
i
=
0
sz
=
badThisValues
.
length
;
i
<
sz
;
i
+
+
)
{
var
badThis
=
badThisValues
[
i
]
;
expr
=
className
+
"
.
prototype
.
"
+
method
+
"
.
call
(
"
+
badThis
+
"
)
"
;
assert
.
throws
(
TypeError
function
(
)
{
Class
.
prototype
[
method
]
.
call
(
badThis
)
;
}
"
wrong
error
for
"
+
expr
)
;
expr
=
className
+
"
.
prototype
.
"
+
method
+
"
.
apply
(
"
+
badThis
+
"
)
"
;
assert
.
throws
(
TypeError
function
(
)
{
Class
.
prototype
[
method
]
.
apply
(
badThis
)
;
}
"
wrong
error
for
"
+
expr
)
;
}
expr
=
"
(
0
"
+
className
+
"
.
prototype
.
"
+
method
+
"
)
(
)
"
;
assert
.
throws
(
TypeError
function
(
)
{
(
0
Class
.
prototype
[
method
]
)
(
)
;
}
"
wrong
error
for
"
+
expr
)
;
}
for
(
var
className
in
ClassToMethodMap
)
{
var
Class
=
this
[
className
]
;
var
methodNames
=
ClassToMethodMap
[
className
]
;
for
(
var
i
=
0
sz
=
methodNames
.
length
;
i
<
sz
;
i
+
+
)
{
var
method
=
methodNames
[
i
]
;
testMethod
(
Class
className
method
)
;
}
}
reportCompare
(
0
0
)
;
