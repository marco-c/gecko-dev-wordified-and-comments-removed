var
zdt
=
Temporal
.
ZonedDateTime
.
from
(
"
1976
-
11
-
18T15
:
23
:
30
.
123456789
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
throws
(
TypeError
(
)
=
>
zdt
.
round
(
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
roundingIncrement
:
1
roundingMode
:
"
ceil
"
}
)
)
;
[
"
era
"
"
year
"
"
month
"
"
week
"
"
years
"
"
months
"
"
weeks
"
"
nonsense
"
]
.
forEach
(
smallestUnit
=
>
{
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
smallestUnit
)
)
;
}
)
;
var
incrementOneNearest
=
[
[
"
day
"
"
1976
-
11
-
19T00
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
hour
"
"
1976
-
11
-
18T15
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
minute
"
"
1976
-
11
-
18T15
:
24
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
second
"
"
1976
-
11
-
18T15
:
23
:
30
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
millisecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
microsecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123457
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
nanosecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123456789
+
01
:
00
[
Europe
/
Vienna
]
"
]
]
;
incrementOneNearest
.
forEach
(
(
[
smallestUnit
expected
]
)
=
>
{
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
roundingMode
:
"
halfExpand
"
}
)
}
expected
)
;
}
)
;
var
incrementOneCeil
=
[
[
"
day
"
"
1976
-
11
-
19T00
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
hour
"
"
1976
-
11
-
18T16
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
minute
"
"
1976
-
11
-
18T15
:
24
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
second
"
"
1976
-
11
-
18T15
:
23
:
31
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
millisecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
124
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
microsecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123457
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
nanosecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123456789
+
01
:
00
[
Europe
/
Vienna
]
"
]
]
;
incrementOneCeil
.
forEach
(
(
[
smallestUnit
expected
]
)
=
>
{
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
roundingMode
:
"
ceil
"
}
)
}
expected
)
;
}
)
;
var
incrementOneFloor
=
[
[
"
day
"
"
1976
-
11
-
18T00
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
hour
"
"
1976
-
11
-
18T15
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
minute
"
"
1976
-
11
-
18T15
:
23
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
second
"
"
1976
-
11
-
18T15
:
23
:
30
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
millisecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
microsecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123456
+
01
:
00
[
Europe
/
Vienna
]
"
]
[
"
nanosecond
"
"
1976
-
11
-
18T15
:
23
:
30
.
123456789
+
01
:
00
[
Europe
/
Vienna
]
"
]
]
;
incrementOneFloor
.
forEach
(
(
[
smallestUnit
expected
]
)
=
>
{
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
roundingMode
:
"
floor
"
}
)
}
expected
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
roundingMode
:
"
trunc
"
}
)
}
expected
)
;
}
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
hour
"
roundingIncrement
:
4
}
)
}
"
1976
-
11
-
18T16
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
minute
"
roundingIncrement
:
15
}
)
}
"
1976
-
11
-
18T15
:
30
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
second
"
roundingIncrement
:
30
}
)
}
"
1976
-
11
-
18T15
:
23
:
30
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
millisecond
"
roundingIncrement
:
10
}
)
}
"
1976
-
11
-
18T15
:
23
:
30
.
12
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
microsecond
"
roundingIncrement
:
10
}
)
}
"
1976
-
11
-
18T15
:
23
:
30
.
12346
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
nanosecond
"
roundingIncrement
:
10
}
)
}
"
1976
-
11
-
18T15
:
23
:
30
.
12345679
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
assert
.
sameValue
(
{
zdt
.
round
(
{
smallestUnit
:
"
day
"
roundingIncrement
:
1
}
)
}
"
1976
-
11
-
19T00
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
var
smallestUnit
=
"
hour
"
;
[
1
2
3
4
6
8
12
]
.
forEach
(
roundingIncrement
=
>
{
assert
(
zdt
.
round
(
{
smallestUnit
roundingIncrement
}
)
instanceof
Temporal
.
ZonedDateTime
)
;
}
)
;
[
"
minute
"
"
second
"
]
.
forEach
(
smallestUnit
=
>
{
[
1
2
3
4
5
6
10
12
15
20
30
]
.
forEach
(
roundingIncrement
=
>
{
assert
(
zdt
.
round
(
{
smallestUnit
roundingIncrement
}
)
instanceof
Temporal
.
ZonedDateTime
)
;
}
)
;
}
)
;
[
"
millisecond
"
"
microsecond
"
"
nanosecond
"
]
.
forEach
(
smallestUnit
=
>
{
[
1
2
4
5
8
10
20
25
40
50
100
125
200
250
500
]
.
forEach
(
roundingIncrement
=
>
{
assert
(
zdt
.
round
(
{
smallestUnit
roundingIncrement
}
)
instanceof
Temporal
.
ZonedDateTime
)
;
}
)
;
}
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
day
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
hour
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
minute
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
second
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
millisecond
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
microsecond
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
nanosecond
"
roundingIncrement
:
29
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
hour
"
roundingIncrement
:
24
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
minute
"
roundingIncrement
:
60
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
second
"
roundingIncrement
:
60
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
millisecond
"
roundingIncrement
:
1000
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
microsecond
"
roundingIncrement
:
1000
}
)
)
;
assert
.
throws
(
RangeError
(
)
=
>
zdt
.
round
(
{
smallestUnit
:
"
nanosecond
"
roundingIncrement
:
1000
}
)
)
;
var
bal
=
Temporal
.
ZonedDateTime
.
from
(
"
1976
-
11
-
18T23
:
59
:
59
.
999999999
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
[
"
day
"
"
hour
"
"
minute
"
"
second
"
"
millisecond
"
"
microsecond
"
]
.
forEach
(
smallestUnit
=
>
{
assert
.
sameValue
(
{
bal
.
round
(
{
smallestUnit
}
)
}
"
1976
-
11
-
19T00
:
00
:
00
+
01
:
00
[
Europe
/
Vienna
]
"
)
;
}
)
;
var
roundTo
=
{
smallestUnit
:
"
day
"
}
;
var
roundMeDown
=
Temporal
.
ZonedDateTime
.
from
(
"
2020
-
11
-
01T12
:
29
:
59
-
08
:
00
[
America
/
Vancouver
]
"
)
;
assert
.
sameValue
(
{
roundMeDown
.
round
(
roundTo
)
}
"
2020
-
11
-
01T00
:
00
:
00
-
07
:
00
[
America
/
Vancouver
]
"
)
;
var
roundMeUp
=
Temporal
.
ZonedDateTime
.
from
(
"
2020
-
11
-
01T12
:
30
:
01
-
08
:
00
[
America
/
Vancouver
]
"
)
;
assert
.
sameValue
(
{
roundMeUp
.
round
(
roundTo
)
}
"
2020
-
11
-
02T00
:
00
:
00
-
08
:
00
[
America
/
Vancouver
]
"
)
;
var
roundTo
=
{
smallestUnit
:
"
day
"
}
;
var
roundMeDown
=
Temporal
.
ZonedDateTime
.
from
(
"
2020
-
03
-
08T11
:
29
:
59
-
07
:
00
[
America
/
Vancouver
]
"
)
;
assert
.
sameValue
(
{
roundMeDown
.
round
(
roundTo
)
}
"
2020
-
03
-
08T00
:
00
:
00
-
08
:
00
[
America
/
Vancouver
]
"
)
;
var
roundMeUp
=
Temporal
.
ZonedDateTime
.
from
(
"
2020
-
03
-
08T11
:
30
:
01
-
07
:
00
[
America
/
Vancouver
]
"
)
;
assert
.
sameValue
(
{
roundMeUp
.
round
(
roundTo
)
}
"
2020
-
03
-
09T00
:
00
:
00
-
07
:
00
[
America
/
Vancouver
]
"
)
;
var
almostSkipped
=
Temporal
.
ZonedDateTime
.
from
(
"
2018
-
11
-
03T23
:
59
:
59
.
999999999
-
03
:
00
[
America
/
Sao_Paulo
]
"
)
;
var
rounded
=
almostSkipped
.
round
(
{
smallestUnit
:
"
microsecond
"
roundingMode
:
"
halfExpand
"
}
)
;
assert
.
sameValue
(
{
rounded
}
"
2018
-
11
-
04T01
:
00
:
00
-
02
:
00
[
America
/
Sao_Paulo
]
"
)
;
assert
.
sameValue
(
rounded
.
epochNanoseconds
-
almostSkipped
.
epochNanoseconds
1n
)
;
reportCompare
(
0
0
)
;
