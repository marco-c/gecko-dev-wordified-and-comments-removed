let
tz
=
new
Temporal
.
TimeZone
(
"
Europe
/
Paris
"
)
;
let
zdt
=
new
Temporal
.
PlainDateTime
(
1800
1
1
)
.
toZonedDateTime
(
tz
)
;
assert
.
sameValue
(
zdt
.
toString
(
)
"
1800
-
01
-
01T00
:
00
:
00
+
00
:
09
[
Europe
/
Paris
]
"
)
;
assert
.
sameValue
(
zdt
.
offsetNanoseconds
(
9
*
60
+
21
)
*
1_000_000_000
)
;
let
first
=
tz
.
getNextTransition
(
zdt
)
;
assert
.
sameValue
(
first
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39Z
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
first
.
epochNanoseconds
tz
)
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39
+
00
:
00
[
Europe
/
Paris
]
"
)
;
let
next
;
let
firstMinus1s
=
first
.
add
(
{
seconds
:
-
1
}
)
;
assert
.
sameValue
(
firstMinus1s
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
38Z
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
firstMinus1s
.
epochNanoseconds
tz
)
.
toString
(
)
"
1911
-
03
-
10T23
:
59
:
59
+
00
:
09
[
Europe
/
Paris
]
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
firstMinus1s
.
epochNanoseconds
tz
)
.
offsetNanoseconds
(
9
*
60
+
21
)
*
1_000_000_000
)
;
next
=
tz
.
getNextTransition
(
firstMinus1s
)
;
assert
.
sameValue
(
next
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39Z
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
next
.
epochNanoseconds
tz
)
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39
+
00
:
00
[
Europe
/
Paris
]
"
)
;
let
firstMinus1ns
=
first
.
add
(
{
nanoseconds
:
-
1
}
)
;
assert
.
sameValue
(
firstMinus1ns
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
38
.
999999999Z
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
firstMinus1ns
.
epochNanoseconds
tz
)
.
toString
(
)
"
1911
-
03
-
10T23
:
59
:
59
.
999999999
+
00
:
09
[
Europe
/
Paris
]
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
firstMinus1ns
.
epochNanoseconds
tz
)
.
offsetNanoseconds
(
9
*
60
+
21
)
*
1_000_000_000
)
;
next
=
tz
.
getNextTransition
(
firstMinus1ns
)
;
assert
.
sameValue
(
next
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39Z
"
)
;
assert
.
sameValue
(
new
Temporal
.
ZonedDateTime
(
next
.
epochNanoseconds
tz
)
.
toString
(
)
"
1911
-
03
-
10T23
:
50
:
39
+
00
:
00
[
Europe
/
Paris
]
"
)
;
reportCompare
(
0
0
)
;
