function
formatDuration
(
locale
duration
dfOpts
)
{
let
result
=
[
]
;
for
(
const
unit
in
duration
)
{
let
nfUnit
=
unit
.
substring
(
0
unit
.
length
-
1
)
;
let
nf
=
new
Intl
.
NumberFormat
(
locale
{
style
:
"
unit
"
unit
:
nfUnit
unitDisplay
:
dfOpts
[
unit
]
}
)
;
result
.
push
(
nf
.
format
(
duration
[
unit
]
)
)
;
}
for
(
const
baseStyle
of
[
"
long
"
"
short
"
"
narrow
"
]
)
{
let
lf
=
new
Intl
.
ListFormat
(
locale
{
type
:
"
unit
"
style
:
baseStyle
}
)
;
let
expected
=
lf
.
format
(
result
)
;
dfOpts
.
style
=
baseStyle
;
let
df
=
new
Intl
.
DurationFormat
(
locale
dfOpts
)
;
let
actual
=
df
.
format
(
duration
)
;
assert
.
sameValue
(
actual
expected
)
;
}
}
const
duration
=
{
years
:
1
months
:
2
weeks
:
3
days
:
0
hours
:
4
minutes
:
5
seconds
:
6
milliseconds
:
7
microseconds
:
8
nanoseconds
:
9
}
;
const
locale
=
"
es
"
;
formatDuration
(
locale
duration
{
years
:
"
narrow
"
months
:
"
narrow
"
weeks
:
"
narrow
"
days
:
"
short
"
hours
:
"
short
"
minutes
:
"
short
"
seconds
:
"
long
"
milliseconds
:
"
long
"
microseconds
:
"
long
"
nanoseconds
:
"
narrow
"
}
)
;
formatDuration
(
locale
duration
{
years
:
"
long
"
months
:
"
short
"
weeks
:
"
narrow
"
days
:
"
long
"
hours
:
"
short
"
minutes
:
"
narrow
"
seconds
:
"
long
"
milliseconds
:
"
short
"
microseconds
:
"
narrow
"
nanoseconds
:
"
long
"
}
)
;
reportCompare
(
0
0
)
;
