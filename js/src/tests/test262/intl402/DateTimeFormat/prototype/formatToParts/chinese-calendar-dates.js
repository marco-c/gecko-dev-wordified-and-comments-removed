const
calendar
=
"
chinese
"
;
function
compareFormatToPartsSnapshot
(
isoString
expectedComponents
)
{
const
date
=
new
Date
(
isoString
)
;
const
formatter
=
new
Intl
.
DateTimeFormat
(
en
-
US
-
u
-
ca
-
{
calendar
}
{
timeZone
:
"
UTC
"
}
)
;
const
actualComponents
=
formatter
.
formatToParts
(
date
)
;
for
(
let
[
expectedType
expectedValue
]
of
Object
.
entries
(
expectedComponents
)
)
{
const
part
=
actualComponents
.
find
(
(
{
type
}
)
=
>
type
=
=
=
expectedType
)
;
const
contextMessage
=
{
expectedType
}
component
of
{
isoString
}
formatted
in
{
calendar
}
;
assert
.
notSameValue
(
part
undefined
contextMessage
)
;
if
(
typeof
part
.
value
=
=
=
"
string
"
)
assert
(
part
.
value
=
=
=
expectedValue
|
|
(
expectedValue
.
length
=
=
=
1
&
&
part
.
value
=
=
=
'
0
'
+
expectedValue
)
)
;
else
assert
.
sameValue
(
part
.
value
{
expectedValue
}
contextMessage
)
;
}
}
compareFormatToPartsSnapshot
(
"
2000
-
01
-
01T00
:
00Z
"
{
relatedYear
:
1999
month
:
11
day
:
25
}
)
;
compareFormatToPartsSnapshot
(
"
1900
-
01
-
01T00
:
00Z
"
{
relatedYear
:
1899
month
:
12
day
:
1
}
)
;
compareFormatToPartsSnapshot
(
"
2100
-
01
-
01T00
:
00Z
"
{
relatedYear
:
2099
month
:
11
day
:
21
}
)
;
reportCompare
(
0
0
)
;
