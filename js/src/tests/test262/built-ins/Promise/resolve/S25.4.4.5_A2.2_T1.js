var
resolveP1
p1
=
new
Promise
(
function
(
resolve
)
{
resolveP1
=
resolve
;
}
)
p2
=
Promise
.
resolve
(
p1
)
arg
=
{
}
;
assert
.
sameValue
(
p1
p2
'
The
value
of
p1
is
expected
to
equal
the
value
of
p2
'
)
;
p2
.
then
(
function
(
result
)
{
assert
.
sameValue
(
result
arg
'
The
value
of
result
is
expected
to
equal
the
value
of
arg
'
)
;
}
)
.
then
(
DONE
DONE
)
;
resolveP1
(
arg
)
;
