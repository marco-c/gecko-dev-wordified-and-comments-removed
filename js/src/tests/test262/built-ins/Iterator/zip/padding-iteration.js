function
makeProxyWithGetHandler
(
log
name
obj
)
{
return
new
Proxy
(
obj
allowProxyTraps
(
{
get
(
target
propertyKey
receiver
)
{
log
.
push
(
{
name
}
:
:
{
String
(
propertyKey
)
}
)
;
return
Reflect
.
get
(
target
propertyKey
receiver
)
;
}
}
)
)
;
}
assert
.
throws
(
TypeError
function
(
)
{
Iterator
.
zip
(
[
]
{
mode
:
"
longest
"
padding
:
{
}
}
)
;
}
)
;
for
(
var
n
=
0
;
n
<
=
5
;
+
+
n
)
{
var
iterables
=
Array
(
n
)
.
fill
(
[
]
)
;
for
(
var
k
=
0
;
k
<
=
n
+
2
;
+
+
k
)
{
var
elements
=
Array
(
k
)
.
fill
(
0
)
;
var
elementsIter
=
elements
.
values
(
)
;
var
log
=
[
]
;
var
padding
=
makeProxyWithGetHandler
(
log
"
padding
"
{
[
Symbol
.
iterator
]
(
)
{
log
.
push
(
"
call
iterator
"
)
;
assert
.
sameValue
(
this
padding
)
;
assert
.
sameValue
(
arguments
.
length
0
)
;
return
this
;
}
next
(
)
{
log
.
push
(
"
call
next
"
)
;
assert
.
sameValue
(
this
padding
)
;
assert
.
sameValue
(
arguments
.
length
0
)
;
return
elementsIter
.
next
(
)
;
}
return
(
)
{
log
.
push
(
"
call
return
"
)
;
assert
.
sameValue
(
this
padding
)
;
assert
.
sameValue
(
arguments
.
length
0
)
;
return
{
}
;
}
}
)
;
Iterator
.
zip
(
iterables
{
mode
:
"
longest
"
padding
}
)
;
var
expected
=
[
"
padding
:
:
Symbol
(
Symbol
.
iterator
)
"
"
call
iterator
"
"
padding
:
:
next
"
]
;
for
(
var
i
=
0
;
i
<
Math
.
min
(
n
k
)
;
+
+
i
)
{
expected
.
push
(
"
call
next
"
)
;
}
if
(
n
>
k
)
{
expected
.
push
(
"
call
next
"
)
;
}
else
{
expected
.
push
(
"
padding
:
:
return
"
"
call
return
"
)
;
}
assert
.
compareArray
(
log
expected
)
;
}
}
reportCompare
(
0
0
)
;
