function
*
g
(
)
{
yield
0
;
}
function
*
h
(
)
{
yield
0
;
yield
1
;
yield
2
;
}
let
iter
=
g
(
)
.
flatMap
(
v
=
>
{
let
n
=
h
(
)
;
return
{
[
Symbol
.
iterator
]
:
0
next
:
(
)
=
>
n
.
next
(
)
}
;
}
)
;
assert
.
throws
(
TypeError
function
(
)
{
iter
.
next
(
)
;
}
)
;
iter
=
g
(
)
.
flatMap
(
v
=
>
{
let
n
=
h
(
)
;
return
{
[
Symbol
.
iterator
]
:
null
next
:
(
)
=
>
n
.
next
(
)
}
;
}
)
;
assert
.
compareArray
(
Array
.
from
(
iter
)
[
0
1
2
]
)
;
iter
=
g
(
)
.
flatMap
(
v
=
>
{
let
n
=
h
(
)
;
return
{
[
Symbol
.
iterator
]
:
undefined
next
:
(
)
=
>
n
.
next
(
)
}
;
}
)
;
assert
.
compareArray
(
Array
.
from
(
iter
)
[
0
1
2
]
)
;
reportCompare
(
0
0
)
;
