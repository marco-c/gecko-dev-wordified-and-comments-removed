const
obj1
=
{
}
;
const
obj2
=
{
}
;
const
obj3
=
{
}
;
const
obj4
=
{
}
;
const
map
=
new
WeakMap
(
)
;
map
.
set
(
obj1
0
)
;
let
callbackCalls
=
0
;
function
callback
(
)
{
callbackCalls
+
=
1
;
throw
new
Error
(
'
Callbackfn
should
not
be
evaluated
if
key
is
present
'
)
;
}
assert
.
sameValue
(
map
.
getOrInsertComputed
(
obj1
callback
)
0
)
;
map
.
set
(
obj2
1
)
;
assert
.
sameValue
(
map
.
getOrInsertComputed
(
obj2
callback
)
1
)
;
map
.
set
(
obj3
2
)
;
assert
.
sameValue
(
map
.
getOrInsertComputed
(
obj3
callback
)
2
)
;
assert
.
throws
(
Error
function
(
)
{
map
.
getOrInsertComputed
(
obj4
callback
)
}
Error
)
;
assert
.
sameValue
(
callbackCalls
1
)
;
reportCompare
(
0
0
)
;
