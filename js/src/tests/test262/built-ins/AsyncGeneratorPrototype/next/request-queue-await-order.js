var
yieldorder
=
0
;
var
resolveLatePromise
;
function
resolveLater
(
)
{
return
new
Promise
(
resolve
=
>
{
resolveLatePromise
=
resolve
;
}
)
;
}
async
function
*
g
(
)
{
yield
resolveLater
(
)
;
yield
+
+
yieldorder
;
}
var
iter
=
g
(
)
;
assert
.
sameValue
(
yieldorder
0
)
;
var
item1
=
iter
.
next
(
)
;
var
item2
=
iter
.
next
(
)
;
var
item3
=
iter
.
next
(
)
;
async
function
awaitnexts
(
)
{
assert
.
sameValue
(
(
await
item3
)
.
value
undefined
)
assert
.
sameValue
(
yieldorder
2
"
All
next
requests
have
been
proccessed
.
"
)
assert
.
sameValue
(
(
await
item2
)
.
value
2
)
assert
.
sameValue
(
(
await
item1
)
.
value
1
)
}
asyncTest
(
awaitnexts
)
;
resolveLatePromise
(
+
+
yieldorder
)
;
