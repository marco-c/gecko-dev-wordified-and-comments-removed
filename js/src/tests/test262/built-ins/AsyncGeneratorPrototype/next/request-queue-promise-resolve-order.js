var
yieldorder
=
0
;
var
resolveLatePromise
;
function
resolveLater
(
)
{
return
new
Promise
(
resolve
=
>
{
resolveLatePromise
=
resolve
;
}
)
;
}
async
function
*
g
(
)
{
yield
resolveLater
(
)
;
yield
+
+
yieldorder
;
}
var
iter
=
g
(
)
;
var
item1
=
iter
.
next
(
)
;
var
item2
=
iter
.
next
(
)
;
var
item3
=
iter
.
next
(
)
;
var
resolvedorder
=
0
;
Promise
.
all
(
[
item3
.
then
(
function
(
result
)
{
resolvedorder
+
+
;
assert
.
sameValue
(
resolvedorder
3
)
;
assert
.
sameValue
(
result
.
value
undefined
)
;
assert
.
sameValue
(
result
.
done
true
)
;
}
)
item2
.
then
(
function
(
result
)
{
resolvedorder
+
+
;
assert
.
sameValue
(
resolvedorder
2
)
;
assert
.
sameValue
(
result
.
value
2
)
;
assert
.
sameValue
(
result
.
done
false
)
;
}
)
item1
.
then
(
function
(
result
)
{
resolvedorder
+
+
;
assert
.
sameValue
(
resolvedorder
1
)
;
assert
.
sameValue
(
result
.
value
1
)
;
assert
.
sameValue
(
result
.
done
false
)
;
}
)
]
)
.
then
(
function
(
)
{
DONE
(
)
;
}
DONE
)
;
resolveLatePromise
(
+
+
yieldorder
)
;
