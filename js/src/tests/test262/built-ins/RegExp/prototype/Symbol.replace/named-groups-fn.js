var
matchGroups
;
var
re
=
/
.
/
;
re
.
exec
=
function
(
)
{
return
{
length
:
1
0
:
"
a
"
index
:
0
groups
:
matchGroups
}
;
}
;
var
replacerCalls
=
0
;
var
replacerLastArg
;
var
replacer
=
function
(
)
{
replacerCalls
+
+
;
replacerLastArg
=
arguments
[
arguments
.
length
-
1
]
;
}
;
matchGroups
=
null
;
re
[
Symbol
.
replace
]
(
"
a
"
replacer
)
;
assert
.
sameValue
(
replacerCalls
1
)
;
assert
.
sameValue
(
replacerLastArg
matchGroups
)
;
matchGroups
=
undefined
;
re
[
Symbol
.
replace
]
(
"
a
"
replacer
)
;
assert
.
sameValue
(
replacerCalls
2
)
;
assert
.
sameValue
(
replacerLastArg
"
a
"
)
;
matchGroups
=
10
;
re
[
Symbol
.
replace
]
(
"
a
"
replacer
)
;
assert
.
sameValue
(
replacerCalls
3
)
;
assert
.
sameValue
(
replacerLastArg
matchGroups
)
;
matchGroups
=
{
}
;
re
[
Symbol
.
replace
]
(
"
a
"
replacer
)
;
assert
.
sameValue
(
replacerCalls
4
)
;
assert
.
sameValue
(
replacerLastArg
matchGroups
)
;
reportCompare
(
0
0
)
;
