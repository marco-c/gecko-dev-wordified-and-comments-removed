var
target
=
new
String
(
'
target
'
)
;
var
originalSearch
=
RegExp
.
prototype
[
Symbol
.
search
]
;
var
returnVal
=
{
}
;
var
result
thisVal
args
;
target
[
Symbol
.
search
]
=
undefined
;
assert
.
notSameValue
(
originalSearch
undefined
)
;
RegExp
.
prototype
[
Symbol
.
search
]
=
function
(
)
{
thisVal
=
this
;
args
=
arguments
;
return
returnVal
;
}
;
try
{
result
=
target
.
search
(
'
string
source
'
)
;
assert
(
thisVal
instanceof
RegExp
)
;
assert
.
sameValue
(
thisVal
.
source
'
string
source
'
)
;
assert
.
sameValue
(
thisVal
.
flags
'
'
)
;
assert
.
sameValue
(
args
.
length
1
)
;
assert
.
sameValue
(
args
[
0
]
'
target
'
)
;
assert
.
sameValue
(
result
returnVal
)
;
}
finally
{
RegExp
.
prototype
[
Symbol
.
search
]
=
originalSearch
;
}
reportCompare
(
0
0
)
;
