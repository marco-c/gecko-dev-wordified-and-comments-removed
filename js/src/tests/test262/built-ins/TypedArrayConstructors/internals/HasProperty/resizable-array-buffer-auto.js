assert
.
sameValue
(
typeof
ArrayBuffer
.
prototype
.
resize
"
function
"
)
;
function
inspect
(
array
)
{
return
[
Reflect
.
has
(
array
0
)
Reflect
.
has
(
array
1
)
Reflect
.
has
(
array
2
)
Reflect
.
has
(
array
3
)
Reflect
.
has
(
array
4
)
]
.
join
(
"
"
)
;
}
testWithTypedArrayConstructors
(
function
(
TA
)
{
var
BPE
=
TA
.
BYTES_PER_ELEMENT
;
var
ab
=
new
ArrayBuffer
(
BPE
*
4
{
maxByteLength
:
BPE
*
5
}
)
;
var
array
=
new
TA
(
ab
BPE
)
;
var
expected
=
"
true
true
true
false
false
"
;
assert
.
sameValue
(
inspect
(
array
)
expected
"
initial
"
)
;
try
{
ab
.
resize
(
BPE
*
5
)
;
expected
=
"
true
true
true
true
false
"
;
}
catch
(
_
)
{
}
assert
.
sameValue
(
inspect
(
array
)
expected
"
following
grow
"
)
;
try
{
ab
.
resize
(
BPE
*
3
)
;
expected
=
"
true
true
false
false
false
"
;
}
catch
(
_
)
{
}
assert
.
sameValue
(
inspect
(
array
)
expected
"
following
shrink
(
within
bounds
)
"
)
;
try
{
ab
.
resize
(
BPE
)
;
expected
=
"
false
false
false
false
false
"
;
}
catch
(
_
)
{
}
assert
.
sameValue
(
inspect
(
array
)
expected
"
following
shrink
(
on
boundary
)
"
)
;
try
{
ab
.
resize
(
0
)
;
expected
=
"
false
false
false
false
false
"
;
}
catch
(
_
)
{
}
assert
.
sameValue
(
inspect
(
array
)
expected
"
following
shrink
(
out
of
bounds
)
"
)
;
}
)
;
reportCompare
(
0
0
)
;
