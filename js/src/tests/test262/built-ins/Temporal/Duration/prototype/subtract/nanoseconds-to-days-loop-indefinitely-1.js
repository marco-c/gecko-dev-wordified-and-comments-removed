const
calls
=
[
]
;
const
duration
=
Temporal
.
Duration
.
from
(
{
days
:
1
}
)
;
const
other
=
Temporal
.
Duration
.
from
(
{
hours
:
1
}
)
;
function
createRelativeTo
(
count
)
{
const
tz
=
new
Temporal
.
TimeZone
(
"
UTC
"
)
;
TemporalHelpers
.
observeMethod
(
calls
tz
"
getPossibleInstantsFor
"
)
;
const
cal
=
new
Temporal
.
Calendar
(
"
iso8601
"
)
;
TemporalHelpers
.
substituteMethod
(
cal
"
dateUntil
"
[
TemporalHelpers
.
SUBSTITUTE_SKIP
Temporal
.
Duration
.
from
(
{
days
:
count
}
)
]
)
;
return
new
Temporal
.
ZonedDateTime
(
0n
tz
cal
)
;
}
let
zdt
=
createRelativeTo
(
200
)
;
calls
.
splice
(
0
)
;
duration
.
subtract
(
other
{
relativeTo
:
zdt
}
)
;
assert
.
sameValue
(
calls
.
length
200
+
2
"
Expected
duration
.
subtract
to
call
getPossibleInstantsFor
correct
number
of
times
"
)
;
zdt
=
createRelativeTo
(
300
)
;
calls
.
splice
(
0
)
;
duration
.
subtract
(
other
{
relativeTo
:
zdt
}
)
;
assert
.
sameValue
(
calls
.
length
300
+
2
"
Expected
duration
.
subtract
to
call
getPossibleInstantsFor
correct
number
of
times
"
)
;
reportCompare
(
0
0
)
;
