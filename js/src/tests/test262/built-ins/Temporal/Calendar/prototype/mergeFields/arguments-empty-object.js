const
calendar
=
new
Temporal
.
Calendar
(
"
iso8601
"
)
;
let
calls
=
0
;
const
yearObserver
=
{
get
year
(
)
{
calls
+
+
;
return
2021
;
}
}
;
const
result1
=
calendar
.
mergeFields
(
yearObserver
{
}
)
;
assert
.
sameValue
(
calls
1
"
property
copied
"
)
;
assert
.
compareArray
(
Object
.
keys
(
result1
)
[
"
year
"
]
)
;
assert
.
sameValue
(
result1
.
year
2021
)
;
assert
.
sameValue
(
calls
1
"
result
has
a
data
property
"
)
;
calls
=
0
;
const
result2
=
calendar
.
mergeFields
(
{
}
yearObserver
)
;
assert
.
sameValue
(
calls
1
"
property
copied
"
)
;
assert
.
compareArray
(
Object
.
keys
(
result2
)
[
"
year
"
]
)
;
assert
.
sameValue
(
result2
.
year
2021
)
;
assert
.
sameValue
(
calls
1
"
result
has
a
data
property
"
)
;
reportCompare
(
0
0
)
;
