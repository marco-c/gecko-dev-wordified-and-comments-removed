let
calls
=
0
;
class
CustomCalendar
extends
Temporal
.
Calendar
{
constructor
(
)
{
super
(
"
iso8601
"
)
;
}
dateAdd
(
plainDate
duration
options
)
{
+
+
calls
;
TemporalHelpers
.
assertPlainDate
(
plainDate
2020
3
"
M03
"
14
"
plainDate
argument
"
)
;
TemporalHelpers
.
assertDuration
(
duration
0
10
0
0
0
0
0
0
0
0
"
duration
argument
"
)
;
assert
.
sameValue
(
typeof
options
"
object
"
"
options
argument
:
type
"
)
;
assert
.
sameValue
(
Object
.
getPrototypeOf
(
options
)
null
"
options
argument
:
prototype
"
)
;
return
super
.
dateAdd
(
plainDate
duration
options
)
;
}
}
const
zonedDateTime
=
new
Temporal
.
ZonedDateTime
(
1584189296_987654321n
new
Temporal
.
TimeZone
(
"
UTC
"
)
new
CustomCalendar
(
)
)
;
const
result
=
zonedDateTime
.
add
(
{
months
:
10
hours
:
14
}
)
;
assert
.
sameValue
(
result
.
epochNanoseconds
1610678096_987654321n
)
;
assert
.
sameValue
(
calls
1
"
should
have
called
dateAdd
"
)
;
reportCompare
(
0
0
)
;
