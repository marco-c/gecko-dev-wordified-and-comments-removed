let
calls
=
0
;
class
CustomCalendar
extends
Temporal
.
Calendar
{
constructor
(
)
{
super
(
"
iso8601
"
)
;
}
dateAdd
(
plainDate
duration
options
)
{
+
+
calls
;
if
(
calls
=
=
3
)
{
TemporalHelpers
.
assertPlainDate
(
plainDate
2000
3
"
M03
"
31
"
plainDate
argument
"
)
;
TemporalHelpers
.
assertDuration
(
duration
0
-
10
0
0
0
0
0
0
0
0
"
duration
argument
"
)
;
assert
.
sameValue
(
typeof
options
"
object
"
"
options
argument
:
type
"
)
;
assert
.
sameValue
(
Object
.
getPrototypeOf
(
options
)
null
"
options
argument
:
prototype
"
)
;
}
return
super
.
dateAdd
(
plainDate
duration
options
)
;
}
}
const
plainYearMonth
=
new
Temporal
.
PlainYearMonth
(
2000
3
new
CustomCalendar
(
)
)
;
const
result
=
plainYearMonth
.
subtract
(
{
months
:
10
}
)
;
TemporalHelpers
.
assertPlainYearMonth
(
result
1999
5
"
M05
"
)
;
assert
.
sameValue
(
calls
3
"
should
have
called
dateAdd
3
times
"
)
;
reportCompare
(
0
0
)
;
