let
calendar
=
TemporalHelpers
.
calendarFromFieldsUndefinedOptions
(
)
;
let
instance
=
new
Temporal
.
PlainYearMonth
(
2000
5
calendar
)
;
instance
.
since
(
{
year
:
2000
month
:
6
calendar
}
)
;
assert
.
sameValue
(
calendar
.
yearMonthFromFieldsCallCount
1
)
;
const
realYearMonthFromFields
=
Temporal
.
Calendar
.
prototype
.
yearMonthFromFields
;
let
yearMonthFromFieldsCallCount
=
0
;
Temporal
.
Calendar
.
prototype
.
yearMonthFromFields
=
function
(
fields
options
)
{
yearMonthFromFieldsCallCount
+
+
;
assert
.
sameValue
(
options
undefined
"
yearMonthFromFields
shouldn
'
t
be
called
with
options
"
)
;
return
realYearMonthFromFields
.
call
(
this
fields
options
)
;
}
calendar
=
new
Temporal
.
Calendar
(
"
iso8601
"
)
;
instance
=
new
Temporal
.
PlainYearMonth
(
2000
5
calendar
)
;
instance
.
since
(
"
2000
-
06
-
01
"
)
;
assert
.
sameValue
(
yearMonthFromFieldsCallCount
1
)
;
Temporal
.
Calendar
.
prototype
.
yearMonthFromFields
=
realYearMonthFromFields
;
reportCompare
(
0
0
)
;
