'
use
strict
'
;
class
TrojanBase
{
constructor
(
obj
)
{
return
obj
;
}
}
class
ClassWithPrivateField
extends
TrojanBase
{
#
val
;
constructor
(
obj
)
{
super
(
obj
)
;
this
.
#
val
=
42
;
}
static
val
(
obj
)
{
return
obj
.
#
val
;
}
}
const
t
=
new
ClassWithPrivateField
(
{
}
)
;
assert
.
sameValue
(
ClassWithPrivateField
.
val
(
t
)
42
)
;
assert
.
throws
(
TypeError
function
(
)
{
new
ClassWithPrivateField
(
Object
.
preventExtensions
(
{
}
)
)
;
}
)
;
class
ClassWithPrivateMethod
extends
TrojanBase
{
constructor
(
obj
)
{
super
(
obj
)
;
}
#
privateMethod
(
)
{
return
42
;
}
;
static
val
(
obj
)
{
return
obj
.
#
privateMethod
(
)
;
}
}
const
m
=
new
ClassWithPrivateMethod
(
{
}
)
;
assert
.
sameValue
(
ClassWithPrivateMethod
.
val
(
m
)
42
)
;
assert
.
throws
(
TypeError
function
(
)
{
new
ClassWithPrivateMethod
(
Object
.
preventExtensions
(
{
}
)
)
;
}
)
;
class
ClassWithPrivateAccessor
extends
TrojanBase
{
constructor
(
obj
)
{
super
(
obj
)
;
}
get
#
privateAccessor
(
)
{
return
42
;
}
;
static
val
(
obj
)
{
return
obj
.
#
privateAccessor
;
}
}
const
a
=
new
ClassWithPrivateAccessor
(
{
}
)
;
assert
.
sameValue
(
ClassWithPrivateAccessor
.
val
(
a
)
42
)
;
assert
.
throws
(
TypeError
function
(
)
{
new
ClassWithPrivateAccessor
(
Object
.
preventExtensions
(
{
}
)
)
;
}
)
;
reportCompare
(
0
0
)
;
