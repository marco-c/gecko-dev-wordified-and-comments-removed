if
(
!
this
.
SharedArrayBuffer
)
{
reportCompare
(
true
true
)
;
quit
(
0
)
;
}
var
sab
=
new
SharedArrayBuffer
(
4096
)
;
var
dv
=
new
DataView
(
sab
)
;
assertEq
(
sab
dv
.
buffer
)
;
assertEq
(
dv
.
byteLength
sab
.
byteLength
)
;
assertEq
(
ArrayBuffer
.
isView
(
dv
)
true
)
;
var
dv2
=
new
DataView
(
sab
1075
2048
)
;
assertEq
(
sab
dv2
.
buffer
)
;
assertEq
(
dv2
.
byteLength
2048
)
;
assertEq
(
dv2
.
byteOffset
1075
)
;
assertEq
(
ArrayBuffer
.
isView
(
dv2
)
true
)
;
dv
.
setInt8
(
1075
37
)
;
assertEq
(
dv2
.
getInt8
(
0
)
37
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv
.
setInt32
(
4098
-
1
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv
.
setInt32
(
4094
-
1
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv
.
setInt32
(
-
1
-
1
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv2
.
setInt32
(
2080
-
1
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv2
.
setInt32
(
2046
-
1
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
dv2
.
setInt32
(
-
1
-
1
)
RangeError
)
;
reportCompare
(
true
true
)
;
