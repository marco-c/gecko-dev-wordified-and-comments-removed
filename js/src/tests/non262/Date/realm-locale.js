const
defaultLocale
=
"
en
-
US
"
;
assertEq
(
getDefaultLocale
(
)
defaultLocale
)
;
function
timeZoneComment
(
date
)
{
return
date
.
toString
(
)
.
match
(
/
\
(
(
.
*
?
)
\
)
/
)
[
1
]
;
}
function
test
(
locale
timeZoneName
)
{
assertEq
(
getRealmLocale
(
)
defaultLocale
)
;
var
g
=
newGlobal
(
{
locale
}
)
;
var
initialLocale
=
locale
?
?
defaultLocale
;
assertEq
(
g
.
getRealmLocale
(
)
initialLocale
)
;
var
d
=
new
g
.
Date
(
0
)
;
assertEq
(
timeZoneComment
(
d
)
timeZoneName
)
;
g
.
setRealmLocale
(
"
fr
"
)
;
assertEq
(
g
.
getRealmLocale
(
)
"
fr
"
)
;
assertEq
(
getRealmLocale
(
)
defaultLocale
)
;
assertEq
(
timeZoneComment
(
d
)
"
heure
normale
du
Pacifique
nord
-
am
ricain
"
)
;
g
.
setRealmLocale
(
undefined
)
;
assertEq
(
g
.
getRealmLocale
(
)
defaultLocale
)
;
assertEq
(
timeZoneComment
(
d
)
"
Pacific
Standard
Time
"
)
;
}
test
(
undefined
"
Pacific
Standard
Time
"
)
;
test
(
"
de
"
"
Nordamerikanische
Westk
sten
-
Normalzeit
"
)
;
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
