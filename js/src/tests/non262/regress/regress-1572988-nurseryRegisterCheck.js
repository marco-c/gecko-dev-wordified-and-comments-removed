var
x
=
0
;
function
makeString
(
)
{
x
+
=
1
;
const
extensible
=
ensureFlatString
(
"
aaaaaaaaaaaaaaaaaaaaaaaaaaaaa
"
+
x
)
;
return
ensureFlatString
(
newRope
(
extensible
"
bbbbbbbbbbbbbbb
"
)
)
;
}
function
f
(
arr
)
{
for
(
let
i
=
0
;
i
<
1000
;
i
+
+
)
arr
.
push
(
makeString
(
)
)
;
return
arr
;
}
var
globalStore
=
[
]
;
function
ff
(
)
{
globalStore
.
push
(
f
(
[
]
)
)
;
}
oomTest
(
ff
)
;
reportCompare
(
true
true
"
nursery
malloc
buffer
registration
failure
"
)
;
