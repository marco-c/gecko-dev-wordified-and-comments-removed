const
INT32_MAX
=
2
*
*
31
-
1
;
const
SIXTEENGB
=
16
*
1024
*
1024
*
1024
;
function
tooLarge
(
elementSize
)
{
if
(
largeArrayBufferSupported
(
)
)
{
return
(
SIXTEENGB
/
elementSize
)
+
1
;
}
return
(
INT32_MAX
+
1
)
/
elementSize
;
}
for
(
let
TA
of
typedArrayConstructors
)
{
assertThrowsInstanceOf
(
(
)
=
>
new
TA
(
tooLarge
(
1
)
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
new
TA
(
tooLarge
(
TA
.
BYTES_PER_ELEMENT
)
)
RangeError
)
;
}
for
(
let
TA
of
typedArrayConstructors
)
{
assertThrowsInstanceOf
(
(
)
=
>
new
TA
(
{
length
:
tooLarge
(
1
)
}
)
RangeError
)
;
assertThrowsInstanceOf
(
(
)
=
>
new
TA
(
{
length
:
tooLarge
(
TA
.
BYTES_PER_ELEMENT
)
}
)
RangeError
)
;
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
