if
(
typeof
getBuildConfiguration
=
=
=
"
undefined
"
)
{
var
getBuildConfiguration
=
SpecialPowers
.
Cu
.
getJSTestingFunctions
(
)
.
getBuildConfiguration
;
}
if
(
typeof
getRealmConfiguration
=
=
=
"
undefined
"
)
{
var
getRealmConfiguration
=
SpecialPowers
.
Cu
.
getJSTestingFunctions
(
)
.
getRealmConfiguration
;
}
if
(
getBuildConfiguration
(
)
[
'
new
-
set
-
methods
'
]
&
&
getRealmConfiguration
(
)
.
enableNewSetMethods
)
{
assertEq
(
typeof
Set
.
prototype
.
union
'
function
'
)
;
assertEq
(
Set
.
prototype
.
union
.
length
1
)
;
assertEq
(
Set
.
prototype
.
union
.
name
'
union
'
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
1
true
null
]
)
.
union
(
new
Set
(
)
)
[
1
true
null
]
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
1
true
null
]
)
.
union
(
[
1
true
null
]
)
[
1
true
null
]
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
1
2
3
]
)
.
union
(
[
2
3
4
]
)
[
1
2
3
4
]
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
1
2
3
]
)
.
union
(
[
4
]
)
[
1
2
3
4
]
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
1
2
3
]
)
.
union
(
makeArrayIterator
(
[
3
4
]
)
)
[
1
2
3
4
]
)
;
assertSetContainsExactOrderedItems
(
new
Set
(
[
'
a
'
]
)
.
union
(
'
abc
'
)
[
'
a
'
'
b
'
'
c
'
]
)
;
assertSetContainsExactOrderedItems
(
Set
.
prototype
.
union
.
call
(
makeArrayIterator
(
[
1
2
3
3
2
]
)
[
4
5
6
]
)
[
1
2
3
4
5
6
]
)
;
const
set
=
new
Set
(
[
1
]
)
;
assertEq
(
set
.
union
(
[
2
]
)
!
=
=
set
true
)
;
assertThrowsInstanceOf
(
function
(
)
{
const
set
=
new
Set
(
)
;
set
.
union
(
)
;
}
TypeError
)
;
for
(
const
arg
of
[
null
{
}
true
1
undefined
NaN
Symbol
(
)
]
)
{
assertThrowsInstanceOf
(
function
(
)
{
const
set
=
new
Set
(
)
;
set
.
union
(
arg
)
;
}
TypeError
)
;
}
for
(
const
arg
of
[
null
undefined
Symbol
(
)
]
)
{
assertThrowsInstanceOf
(
function
(
)
{
Set
.
prototype
.
union
.
call
(
arg
[
]
)
;
}
TypeError
)
;
}
assertThrowsInstanceOf
(
function
(
)
{
Set
.
prototype
.
union
.
call
(
{
}
[
]
)
;
}
TypeError
)
;
}
else
{
assertEq
(
typeof
Set
.
prototype
.
union
'
undefined
'
)
;
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
