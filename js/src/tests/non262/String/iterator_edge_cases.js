function
TestStringIteratorPrototypeConfusion
(
)
{
var
iter
=
"
"
[
Symbol
.
iterator
]
(
)
;
assertThrowsInstanceOfWithMessage
(
(
)
=
>
iter
.
next
.
call
(
Object
.
getPrototypeOf
(
iter
)
)
TypeError
"
next
method
called
on
incompatible
String
Iterator
"
)
;
}
TestStringIteratorPrototypeConfusion
(
)
;
function
TestStringIteratorWrappers
(
)
{
var
iter
=
"
"
[
Symbol
.
iterator
]
(
)
;
assertDeepEq
(
iter
.
next
.
call
(
newGlobal
(
)
.
eval
(
'
"
x
"
[
Symbol
.
iterator
]
(
)
'
)
)
{
value
:
"
x
"
done
:
false
}
)
}
if
(
typeof
newGlobal
=
=
=
"
function
"
)
{
TestStringIteratorWrappers
(
)
;
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
