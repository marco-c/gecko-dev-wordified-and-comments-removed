if
(
typeof
getAvailableLocalesOf
=
=
=
"
undefined
"
)
{
var
getAvailableLocalesOf
=
SpecialPowers
.
Cu
.
getJSTestingFunctions
(
)
.
getAvailableLocalesOf
;
}
function
IsIntlService
(
c
)
{
return
typeof
c
=
=
=
"
function
"
&
&
c
.
hasOwnProperty
(
"
prototype
"
)
&
&
c
.
prototype
.
hasOwnProperty
(
"
resolvedOptions
"
)
;
}
const
intlConstructors
=
Object
.
getOwnPropertyNames
(
Intl
)
.
map
(
name
=
>
Intl
[
name
]
)
.
filter
(
IsIntlService
)
;
for
(
let
intlConstructor
of
intlConstructors
)
{
let
available
=
getAvailableLocalesOf
(
intlConstructor
.
name
)
;
let
options
=
{
localeMatcher
:
"
lookup
"
}
;
if
(
intlConstructor
=
=
=
Intl
.
DisplayNames
)
{
options
.
type
=
"
language
"
;
}
for
(
let
locale
of
available
)
{
let
obj
=
new
intlConstructor
(
locale
options
)
;
let
resolved
=
obj
.
resolvedOptions
(
)
;
assertEq
(
resolved
.
locale
locale
)
;
}
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
