const
locales
=
[
"
en
"
"
ar
"
"
ar
-
SA
"
"
ar
-
EG
"
]
;
const
deprecated
=
[
"
islamic
"
]
;
const
supportedCalendars
=
Intl
.
supportedValuesOf
(
"
calendar
"
)
;
function
test
(
calendar
locale
options
=
undefined
)
{
enableLastWarning
(
)
;
let
dtf
=
new
Intl
.
DateTimeFormat
(
locale
options
)
;
let
resolved
=
dtf
.
resolvedOptions
(
)
;
if
(
deprecated
.
includes
(
calendar
)
)
{
let
warning
=
getLastWarning
(
)
;
assertEq
(
warning
!
=
=
null
true
missing
warning
for
{
locale
}
)
;
assertEq
(
warning
.
message
.
includes
(
calendar
)
true
warning
"
{
warning
}
"
doesn
'
t
include
calendar
"
{
calendar
}
"
)
;
assertEq
(
resolved
.
calendar
"
islamic
-
tbla
"
bad
resolved
fallback
calendar
for
{
locale
}
)
;
}
else
{
let
warning
=
getLastWarning
(
)
;
assertEq
(
warning
=
=
=
null
true
unexpected
warning
for
{
locale
}
)
;
assertEq
(
resolved
.
calendar
calendar
bad
resolved
calendar
for
{
locale
}
)
;
}
disableLastWarning
(
)
;
}
for
(
let
calendar
of
[
.
.
.
deprecated
.
.
.
supportedCalendars
]
)
{
if
(
deprecated
.
includes
(
calendar
)
)
{
assertEq
(
supportedCalendars
.
includes
(
calendar
)
false
{
calendar
}
is
deprecated
)
;
}
for
(
let
locale
of
locales
)
{
test
(
calendar
locale
{
calendar
}
)
;
test
(
calendar
locale
+
"
-
u
-
ca
-
"
+
calendar
)
;
test
(
calendar
locale
{
calendar
:
calendar
.
toUpperCase
(
)
}
)
;
test
(
calendar
locale
+
"
-
u
-
ca
-
"
+
calendar
.
toUpperCase
(
)
)
;
}
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
