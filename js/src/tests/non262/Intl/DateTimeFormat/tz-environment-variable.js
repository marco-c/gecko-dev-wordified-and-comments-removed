function
inTimeZone
(
tzname
fn
)
{
setTimeZone
(
tzname
)
;
try
{
fn
(
)
;
}
finally
{
setTimeZone
(
"
PST8PDT
"
)
;
}
}
const
timeZones
=
[
{
id
:
"
EST5EDT
"
normalized
:
"
America
/
New_York
"
}
{
id
:
"
CST6CDT
"
normalized
:
"
America
/
Chicago
"
}
{
id
:
"
MST7MDT
"
normalized
:
"
America
/
Denver
"
}
{
id
:
"
PST8PDT
"
normalized
:
"
America
/
Los_Angeles
"
}
{
id
:
"
UCT
"
normalized
:
"
UTC
"
}
{
id
:
"
UTC
"
normalized
:
"
UTC
"
}
{
id
:
"
GMT
"
normalized
:
"
UTC
"
}
]
;
for
(
let
{
id
normalized
=
id
}
of
timeZones
)
{
inTimeZone
(
id
(
)
=
>
{
let
opts
=
new
Intl
.
DateTimeFormat
(
)
.
resolvedOptions
(
)
;
assertEq
(
opts
.
timeZone
normalized
)
;
}
)
;
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
0
0
"
ok
"
)
;
