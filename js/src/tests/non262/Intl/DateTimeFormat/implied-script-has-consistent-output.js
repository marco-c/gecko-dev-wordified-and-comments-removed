if
(
typeof
getAvailableLocalesOf
=
=
=
"
undefined
"
)
{
var
getAvailableLocalesOf
=
SpecialPowers
.
Cu
.
getJSTestingFunctions
(
)
.
getAvailableLocalesOf
;
}
const
available
=
getAvailableLocalesOf
(
"
DateTimeFormat
"
)
;
const
options
=
[
{
hour
:
"
2
-
digit
"
minute
:
"
2
-
digit
"
timeZone
:
"
UTC
"
}
{
timeZoneName
:
"
long
"
timeZone
:
"
America
/
Los_Angeles
"
}
]
;
const
date
=
Date
.
UTC
(
2021
6
-
1
7
15
0
)
;
available
.
map
(
x
=
>
{
return
new
Intl
.
Locale
(
x
)
;
}
)
.
filter
(
loc
=
>
{
return
loc
.
script
&
&
loc
.
region
;
}
)
.
filter
(
loc
=
>
{
return
!
(
loc
.
language
=
=
=
"
sd
"
&
&
loc
.
script
=
=
=
"
Deva
"
&
&
loc
.
region
=
=
=
"
IN
"
)
;
}
)
.
forEach
(
loc
=
>
{
let
noScript
=
new
Intl
.
Locale
(
{
loc
.
language
}
-
{
loc
.
region
}
)
;
let
maximized
=
noScript
.
maximize
(
)
;
for
(
let
opt
of
options
)
{
let
df1
=
new
Intl
.
DateTimeFormat
(
noScript
opt
)
;
let
df2
=
new
Intl
.
DateTimeFormat
(
maximized
opt
)
;
assertEq
(
df1
.
format
(
date
)
df2
.
format
(
date
)
Mismatch
for
locale
"
{
noScript
}
"
)
;
}
}
)
;
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
0
0
"
ok
"
)
;
