var
BUGNUMBER
=
50447
;
var
summary
=
'
Test
(
non
-
ECMA
)
Error
object
properties
fileName
lineNumber
'
;
test
(
)
;
function
test
(
)
{
printBugNumber
(
BUGNUMBER
)
;
printStatus
(
summary
)
;
testRealError
(
)
;
test1
(
)
;
test2
(
)
;
test3
(
)
;
test4
(
)
;
}
function
normalize
(
filename
)
{
return
filename
.
replace
(
/
\
\
{
1
2
}
/
g
'
/
'
)
;
}
function
testRealError
(
)
{
try
{
blabla
;
}
catch
(
e
)
{
if
(
e
.
fileName
.
search
(
/
-
50447
-
1
\
.
js
/
i
)
=
=
-
1
)
reportCompare
(
'
PASS
'
'
FAIL
'
"
expected
fileName
to
end
with
'
-
50447
-
1
.
js
'
"
)
;
reportCompare
(
60
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
}
function
test1
(
)
{
var
e
=
new
InternalError
(
"
msg
"
"
file
"
2
)
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
file
\
"
2
)
)
"
e
.
toSource
(
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
"
file
"
e
.
fileName
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
2
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test2
(
)
{
var
expectedLine
=
106
;
var
expectedFileName
=
'
non262
/
extensions
/
regress
-
50447
-
1
.
js
'
;
var
expectedSource
=
/
\
(
new
InternalError
\
(
"
msg
"
"
(
[
^
"
]
+
)
"
(
[
0
-
9
]
+
)
\
)
\
)
/
;
var
e
=
new
InternalError
(
"
msg
"
)
;
var
actual
=
expectedSource
.
exec
(
e
.
toSource
(
)
)
;
reportCompare
(
normalize
(
actual
[
1
]
)
.
endsWith
(
expectedFileName
)
true
"
toSource
(
)
returned
unexpected
result
(
filename
)
.
"
)
;
reportCompare
(
actual
[
2
]
String
(
expectedLine
)
"
toSource
(
)
returned
unexpected
result
(
line
)
.
"
)
;
reportCompare
(
normalize
(
e
.
fileName
)
.
endsWith
(
expectedFileName
)
true
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
expectedLine
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test3
(
)
{
var
expectedLine
=
10
;
var
expectedFileName
=
'
non262
/
extensions
/
regress
-
50447
-
1
.
js
'
;
var
expectedSource
=
/
\
(
new
InternalError
\
(
"
msg
"
"
(
[
^
"
]
+
)
"
(
[
0
-
9
]
+
)
\
)
\
)
/
;
var
e
=
new
InternalError
(
"
msg
"
)
;
e
.
lineNumber
=
expectedLine
;
var
actual
=
expectedSource
.
exec
(
e
.
toSource
(
)
)
;
reportCompare
(
normalize
(
actual
[
1
]
)
.
endsWith
(
expectedFileName
)
true
"
toSource
(
)
returned
unexpected
result
(
filename
)
.
"
)
;
reportCompare
(
actual
[
2
]
String
(
expectedLine
)
"
toSource
(
)
returned
unexpected
result
(
line
)
.
"
)
;
reportCompare
(
normalize
(
e
.
fileName
)
.
endsWith
(
expectedFileName
)
true
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
expectedLine
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
function
test4
(
)
{
var
expectedLine
=
161
;
var
e
=
new
InternalError
(
"
msg
"
"
file
"
)
;
reportCompare
(
"
(
new
InternalError
(
\
"
msg
\
"
\
"
file
\
"
"
+
expectedLine
+
"
)
)
"
e
.
toSource
(
)
"
toSource
(
)
returned
unexpected
result
.
"
)
;
reportCompare
(
"
file
"
e
.
fileName
"
fileName
property
returned
unexpected
value
.
"
)
;
reportCompare
(
expectedLine
e
.
lineNumber
"
lineNumber
property
returned
unexpected
value
.
"
)
;
}
