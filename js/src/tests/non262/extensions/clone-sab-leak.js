if
(
!
this
.
SharedArrayBuffer
|
|
!
this
.
sharedArrayRawBufferCount
)
{
reportCompare
(
true
true
)
;
quit
(
0
)
;
}
var
k
=
sharedArrayRawBufferCount
(
)
;
var
sab
=
new
SharedArrayBuffer
(
4096
)
;
if
(
sharedArrayRawBufferCount
(
)
=
=
0
)
{
reportCompare
(
true
true
)
;
quit
(
0
)
;
}
assertEq
(
sharedArrayRawBufferCount
(
)
1
+
k
)
;
var
y
=
serialize
(
sab
[
]
{
SharedArrayBuffer
:
'
allow
'
}
)
assertEq
(
sharedArrayRawBufferCount
(
)
1
+
k
)
;
sab
=
null
;
gc
(
)
;
gc
(
)
;
assertEq
(
sharedArrayRawBufferCount
(
)
1
+
k
)
;
y
=
null
;
gc
(
)
;
gc
(
)
;
assertEq
(
sharedArrayRawBufferCount
(
)
0
+
k
)
;
reportCompare
(
true
true
)
;
