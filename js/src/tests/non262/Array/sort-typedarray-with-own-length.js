function
sortTypedArray
(
comparator
)
{
var
ta
=
new
Int8Array
(
[
3
2
1
]
)
;
Object
.
defineProperty
(
ta
"
length
"
{
value
:
2
}
)
;
Array
.
prototype
.
sort
.
call
(
ta
comparator
)
;
return
ta
;
}
function
optimizedComparator
(
a
b
)
{
return
a
-
b
;
}
function
nonOptimizedComparator
(
a
b
)
{
var
d
=
a
-
b
;
return
d
;
}
assertEq
(
sortTypedArray
(
optimizedComparator
)
.
toString
(
)
"
2
3
1
"
)
;
assertEq
(
sortTypedArray
(
nonOptimizedComparator
)
.
toString
(
)
"
2
3
1
"
)
;
if
(
typeof
reportCompare
=
=
=
'
function
'
)
reportCompare
(
0
0
)
;
