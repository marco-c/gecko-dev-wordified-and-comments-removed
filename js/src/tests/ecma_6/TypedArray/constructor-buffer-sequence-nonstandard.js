const
otherGlobal
=
newGlobal
(
)
;
function
*
createBuffers
(
)
{
var
lengths
=
[
0
8
]
;
for
(
let
length
of
lengths
)
{
let
buffer
=
new
ArrayBuffer
(
length
)
;
yield
{
buffer
detach
:
(
)
=
>
detachArrayBuffer
(
buffer
)
}
;
}
for
(
let
length
of
lengths
)
{
let
buffer
=
new
otherGlobal
.
ArrayBuffer
(
length
)
;
yield
{
buffer
detach
:
(
)
=
>
otherGlobal
.
detachArrayBuffer
(
buffer
)
}
;
}
}
for
(
let
{
buffer
detach
}
of
createBuffers
(
)
)
{
let
length
=
{
valueOf
(
)
{
detach
(
)
;
return
0
;
}
}
;
assertThrowsInstanceOf
(
(
)
=
>
new
Int32Array
(
buffer
0
length
)
TypeError
)
;
}
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
