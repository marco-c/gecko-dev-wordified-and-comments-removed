try
{
eval
(
'
new
.
target
'
)
;
assertEq
(
false
true
)
;
}
catch
(
e
)
{
if
(
!
(
e
instanceof
SyntaxError
)
)
throw
e
;
}
assertThrowsInstanceOf
(
(
)
=
>
eval
(
'
new
.
target
'
)
SyntaxError
)
;
let
ieval
=
eval
;
try
{
(
function
(
)
{
return
ieval
(
'
new
.
target
'
)
;
}
)
(
)
;
assertEq
(
false
true
)
;
}
catch
(
e
)
{
if
(
!
(
e
instanceof
SyntaxError
)
)
throw
e
;
}
function
assertNewTarget
(
expected
)
{
assertEq
(
eval
(
'
new
.
target
'
)
expected
)
;
assertEq
(
(
(
)
=
>
eval
(
'
new
.
target
'
)
)
(
)
expected
)
;
assertEq
(
eval
(
'
eval
(
"
new
.
target
"
)
'
)
expected
)
;
assertEq
(
eval
(
"
eval
(
'
eval
(
new
.
target
)
'
)
"
)
expected
)
;
}
const
ITERATIONS
=
550
;
for
(
let
i
=
0
;
i
<
ITERATIONS
;
i
+
+
)
assertNewTarget
(
undefined
)
;
for
(
let
i
=
0
;
i
<
ITERATIONS
;
i
+
+
)
new
assertNewTarget
(
assertNewTarget
)
;
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
0
0
"
OK
"
)
;
