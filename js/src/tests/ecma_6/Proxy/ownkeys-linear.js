var
gTestfile
=
'
ownkeys
-
linear
.
js
'
;
var
BUGNUMBER
=
1257779
;
var
summary
=
"
Scripted
proxies
'
[
[
OwnPropertyKeys
]
]
should
have
linear
complexity
"
;
print
(
BUGNUMBER
+
"
:
"
+
summary
)
;
const
HALF_COUNT
=
5e4
;
var
configurables
=
[
]
;
for
(
var
i
=
0
;
i
<
HALF_COUNT
;
i
+
+
)
configurables
.
push
(
"
conf
"
+
i
)
;
var
nonconfigurables
=
[
]
;
for
(
var
i
=
0
;
i
<
HALF_COUNT
;
i
+
+
)
nonconfigurables
.
push
(
"
nonconf
"
+
i
)
;
var
target
=
{
}
;
for
(
var
name
of
configurables
)
Object
.
defineProperty
(
target
name
{
configurable
:
false
value
:
0
}
)
;
for
(
var
name
of
nonconfigurables
)
Object
.
defineProperty
(
target
name
{
configurable
:
true
value
:
0
}
)
;
var
handler
=
{
ownKeys
(
t
)
{
assertEq
(
t
target
"
target
mismatch
!
"
)
;
var
trapResult
=
[
]
;
for
(
var
i
=
nonconfigurables
.
length
;
i
>
0
;
i
-
-
)
trapResult
.
push
(
nonconfigurables
[
i
-
1
]
)
;
for
(
var
i
=
configurables
.
length
;
i
>
0
;
i
-
-
)
trapResult
.
push
(
configurables
[
i
-
1
]
)
;
return
trapResult
;
}
}
;
var
p
=
new
Proxy
(
target
handler
)
;
assertEq
(
Object
.
getOwnPropertyNames
(
p
)
.
length
HALF_COUNT
*
2
)
;
if
(
typeof
reportCompare
=
=
=
"
function
"
)
reportCompare
(
true
true
)
;
print
(
"
Tests
complete
"
)
;
