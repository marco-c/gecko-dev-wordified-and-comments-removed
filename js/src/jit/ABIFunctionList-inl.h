#
ifndef
jit_ABIFunctionList_inl_h
#
define
jit_ABIFunctionList_inl_h
#
include
"
mozilla
/
MacroArgs
.
h
"
#
include
"
mozilla
/
SIMD
.
h
"
#
include
"
jslibmath
.
h
"
#
include
"
jsmath
.
h
"
#
include
"
jsnum
.
h
"
#
include
"
builtin
/
Array
.
h
"
#
include
"
builtin
/
MapObject
.
h
"
#
include
"
builtin
/
Object
.
h
"
#
include
"
builtin
/
RegExp
.
h
"
#
include
"
builtin
/
Sorting
.
h
"
#
include
"
builtin
/
TestingFunctions
.
h
"
#
include
"
builtin
/
WeakMapObject
.
h
"
#
include
"
builtin
/
WeakSetObject
.
h
"
#
include
"
irregexp
/
RegExpAPI
.
h
"
#
include
"
jit
/
ABIFunctions
.
h
"
#
include
"
jit
/
Bailouts
.
h
"
#
include
"
jit
/
Ion
.
h
"
#
include
"
jit
/
JitFrames
.
h
"
#
include
"
jit
/
VMFunctions
.
h
"
#
include
"
js
/
CallArgs
.
h
"
#
include
"
js
/
Conversions
.
h
"
#
include
"
js
/
experimental
/
JitInfo
.
h
"
#
include
"
proxy
/
Proxy
.
h
"
#
include
"
vm
/
ArgumentsObject
.
h
"
#
include
"
vm
/
Interpreter
.
h
"
#
include
"
vm
/
NativeObject
.
h
"
#
include
"
vm
/
RegExpShared
.
h
"
#
include
"
vm
/
TypedArrayObject
.
h
"
#
include
"
wasm
/
WasmBuiltins
.
h
"
#
include
"
builtin
/
Boolean
-
inl
.
h
"
namespace
js
{
namespace
wasm
{
class
AnyRef
;
}
namespace
jit
{
#
if
JS_GC_PROBES
#
define
ABIFUNCTION_JS_GC_PROBES_LIST
(
_
)
_
(
js
:
:
jit
:
:
TraceCreateObject
)
#
else
#
define
ABIFUNCTION_JS_GC_PROBES_LIST
(
_
)
#
endif
#
if
defined
(
JS_CODEGEN_ARM
)
#
define
ABIFUNCTION_JS_CODEGEN_ARM_LIST
(
_
)
\
_
(
__aeabi_idivmod
)
\
_
(
__aeabi_uidivmod
)
#
else
#
define
ABIFUNCTION_JS_CODEGEN_ARM_LIST
(
_
)
#
endif
#
ifdef
WASM_CODEGEN_DEBUG
#
define
ABIFUNCTION_WASM_CODEGEN_DEBUG_LIST
(
_
)
\
_
(
js
:
:
wasm
:
:
PrintF32
)
\
_
(
js
:
:
wasm
:
:
PrintF64
)
\
_
(
js
:
:
wasm
:
:
PrintI32
)
\
_
(
js
:
:
wasm
:
:
PrintPtr
)
\
_
(
js
:
:
wasm
:
:
PrintText
)
#
else
#
define
ABIFUNCTION_WASM_CODEGEN_DEBUG_LIST
(
_
)
#
endif
#
ifdef
FUZZING_JS_FUZZILLI
#
define
ABIFUNCTION_FUZZILLI_LIST
(
_
)
_
(
js
:
:
FuzzilliHashBigInt
)
#
else
#
define
ABIFUNCTION_FUZZILLI_LIST
(
_
)
#
endif
#
define
ABIFUNCTION_LIST
(
_
)
\
ABIFUNCTION_JS_GC_PROBES_LIST
(
_
)
\
ABIFUNCTION_JS_CODEGEN_ARM_LIST
(
_
)
\
ABIFUNCTION_WASM_CODEGEN_DEBUG_LIST
(
_
)
\
_
(
js
:
:
ArgumentsObject
:
:
finishForIonPure
)
\
_
(
js
:
:
ArgumentsObject
:
:
finishInlineForIonPure
)
\
_
(
js
:
:
ArrayShiftMoveElements
)
\
_
(
js
:
:
ArraySortData
:
:
sortArrayWithComparator
)
\
_
(
js
:
:
ArraySortData
:
:
sortTypedArrayWithComparator
)
\
_
(
js
:
:
ArraySortFromJit
)
\
_
(
js
:
:
ecmaAtan2
)
\
_
(
js
:
:
ecmaHypot
)
\
_
(
js
:
:
ecmaPow
)
\
_
(
js
:
:
EmulatesUndefined
)
\
_
(
js
:
:
EmulatesUndefinedCheckFuse
)
\
_
(
js
:
:
ExecuteRegExpAtomRaw
)
\
_
(
js
:
:
hypot3
)
\
_
(
js
:
:
hypot4
)
\
_
(
js
:
:
Interpret
)
\
_
(
js
:
:
Int32ToStringPure
)
\
_
(
js
:
:
irregexp
:
:
CaseInsensitiveCompareNonUnicode
)
\
_
(
js
:
:
irregexp
:
:
CaseInsensitiveCompareUnicode
)
\
_
(
js
:
:
irregexp
:
:
GrowBacktrackStack
)
\
_
(
js
:
:
irregexp
:
:
IsCharacterInRangeArray
)
\
_
(
js
:
:
jit
:
:
AllocateAndInitTypedArrayBuffer
)
\
_
(
js
:
:
jit
:
:
AllocateBigIntNoGC
)
\
_
(
js
:
:
jit
:
:
AllocateFatInlineString
)
\
_
(
js
:
:
jit
:
:
AllocateDependentString
)
\
_
(
js
:
:
jit
:
:
AssertMapObjectHash
)
\
_
(
js
:
:
jit
:
:
AssertPropertyLookup
)
\
_
(
js
:
:
jit
:
:
AssertSetObjectHash
)
\
_
(
js
:
:
jit
:
:
AssertValidBigIntPtr
)
\
_
(
js
:
:
jit
:
:
AssertValidObjectPtr
)
\
_
(
js
:
:
jit
:
:
AssertValidStringPtr
)
\
_
(
js
:
:
jit
:
:
AssertValidSymbolPtr
)
\
_
(
js
:
:
jit
:
:
AssertValidValue
)
\
_
(
js
:
:
jit
:
:
AssumeUnreachable
)
\
_
(
js
:
:
jit
:
:
AtomicsStore64
)
\
_
(
js
:
:
jit
:
:
AtomizeStringNoGC
)
\
_
(
js
:
:
jit
:
:
Bailout
)
\
_
(
js
:
:
jit
:
:
BigIntNumberEqual
<
js
:
:
jit
:
:
EqualityKind
:
:
Equal
>
)
\
_
(
js
:
:
jit
:
:
BigIntNumberEqual
<
js
:
:
jit
:
:
EqualityKind
:
:
NotEqual
>
)
\
_
(
js
:
:
jit
:
:
BigIntNumberCompare
<
js
:
:
jit
:
:
ComparisonKind
:
:
LessThan
>
)
\
_
(
js
:
:
jit
:
:
NumberBigIntCompare
<
js
:
:
jit
:
:
ComparisonKind
:
:
LessThan
>
)
\
_
(
js
:
:
jit
:
:
NumberBigIntCompare
<
js
:
:
jit
:
:
ComparisonKind
:
:
GreaterThanOrEqual
>
)
\
_
(
js
:
:
jit
:
:
BigIntNumberCompare
<
js
:
:
jit
:
:
ComparisonKind
:
:
GreaterThanOrEqual
>
)
\
_
(
js
:
:
jit
:
:
DateFillLocalTimeSlots
)
\
_
(
js
:
:
jit
:
:
EqualStringsHelperPure
)
\
_
(
js
:
:
jit
:
:
FinishBailoutToBaseline
)
\
_
(
js
:
:
jit
:
:
Float16ToFloat32
)
\
_
(
js
:
:
jit
:
:
Float32ToFloat16
)
\
_
(
js
:
:
jit
:
:
FrameIsDebuggeeCheck
)
\
_
(
js
:
:
jit
:
:
GetContextSensitiveInterpreterStub
)
\
_
(
js
:
:
jit
:
:
GetIndexFromString
)
\
_
(
js
:
:
jit
:
:
GetInt32FromStringPure
)
\
_
(
js
:
:
jit
:
:
GetNativeDataPropertyPure
)
\
_
(
js
:
:
jit
:
:
GetNativeDataPropertyPureWithCacheLookup
)
\
_
(
js
:
:
jit
:
:
GetNativeDataPropertyByValuePure
)
\
_
(
js
:
:
jit
:
:
GlobalHasLiveOnDebuggerStatement
)
\
_
(
js
:
:
jit
:
:
HandleCodeCoverageAtPC
)
\
_
(
js
:
:
jit
:
:
HandleCodeCoverageAtPrologue
)
\
_
(
js
:
:
jit
:
:
HandleException
)
\
_
(
js
:
:
jit
:
:
HasNativeDataPropertyPure
<
false
>
)
\
_
(
js
:
:
jit
:
:
HasNativeDataPropertyPure
<
true
>
)
\
_
(
js
:
:
jit
:
:
HasNativeElementPure
)
\
_
(
js
:
:
jit
:
:
InitBaselineFrameForOsr
)
\
_
(
js
:
:
jit
:
:
InvalidationBailout
)
\
_
(
js
:
:
jit
:
:
InvokeFromInterpreterStub
)
\
_
(
js
:
:
jit
:
:
LazyLinkTopActivation
)
\
_
(
js
:
:
jit
:
:
LinearizeForCharAccessPure
)
\
_
(
js
:
:
jit
:
:
ObjectHasGetterSetterPure
)
\
_
(
js
:
:
jit
:
:
ObjectIsCallable
)
\
_
(
js
:
:
jit
:
:
ObjectIsConstructor
)
\
_
(
js
:
:
jit
:
:
PostGlobalWriteBarrier
)
\
_
(
js
:
:
jit
:
:
PostWriteBarrier
)
\
_
(
js
:
:
jit
:
:
PostWriteElementBarrier
)
\
_
(
js
:
:
jit
:
:
Printf0
)
\
_
(
js
:
:
jit
:
:
Printf1
)
\
_
(
js
:
:
jit
:
:
StringFromCharCodeNoGC
)
\
_
(
js
:
:
jit
:
:
StringTrimEndIndex
)
\
_
(
js
:
:
jit
:
:
StringTrimStartIndex
)
\
_
(
js
:
:
jit
:
:
TypeOfNameObject
)
\
_
(
js
:
:
jit
:
:
TypeOfEqObject
)
\
_
(
js
:
:
jit
:
:
WrapObjectPure
)
\
ABIFUNCTION_FUZZILLI_LIST
(
_
)
\
_
(
js
:
:
MapIteratorObject
:
:
next
)
\
_
(
js
:
:
NativeObject
:
:
addDenseElementPure
)
\
_
(
js
:
:
NativeObject
:
:
growSlotsPure
)
\
_
(
js
:
:
NumberMod
)
\
_
(
js
:
:
NumberToStringPure
)
\
_
(
js
:
:
ObjectClassToString
)
\
_
(
js
:
:
powi
)
\
_
(
js
:
:
ProxyGetProperty
)
\
_
(
js
:
:
RoundFloat16
)
\
_
(
js
:
:
SetIteratorObject
:
:
next
)
\
_
(
js
:
:
StringToNumberPure
)
\
_
(
js
:
:
TypedArraySetInfallible
)
\
_
(
js
:
:
TypedArraySortFromJit
)
\
_
(
js
:
:
TypeOfObject
)
\
_
(
js
:
:
WeakMapObject
:
:
getObject
)
\
_
(
js
:
:
WeakMapObject
:
:
hasObject
)
\
_
(
js
:
:
WeakSetObject
:
:
hasObject
)
\
_
(
mozilla
:
:
SIMD
:
:
memchr16
)
\
_
(
mozilla
:
:
SIMD
:
:
memchr2x16
)
\
_
(
mozilla
:
:
SIMD
:
:
memchr2x8
)
\
_
(
mozilla
:
:
SIMD
:
:
memchr8
)
#
define
ABIFUNCTION_AND_TYPE_LIST
(
_
)
\
_
(
JS
:
:
ToInt32
int32_t
(
*
)
(
double
)
)
\
_
(
js
:
:
jit
:
:
RoundFloat16ToFloat32
float
(
*
)
(
int32_t
)
)
\
_
(
js
:
:
jit
:
:
RoundFloat16ToFloat32
float
(
*
)
(
float
)
)
\
_
(
js
:
:
jit
:
:
RoundFloat16ToFloat32
float
(
*
)
(
double
)
)
#
define
ABIFUNCTIONSIG_LIST
(
_
)
\
_
(
AtomicsCompareExchangeFn
)
\
_
(
AtomicsReadWriteModifyFn
)
\
_
(
bool
(
*
)
(
BigInt
*
BigInt
*
)
)
\
_
(
bool
(
*
)
(
BigInt
*
double
)
)
\
_
(
bool
(
*
)
(
double
BigInt
*
)
)
\
_
(
float
(
*
)
(
float
)
)
\
_
(
JSJitGetterOp
)
\
_
(
JSJitMethodOp
)
\
_
(
JSJitSetterOp
)
\
_
(
JSNative
)
\
_
(
js
:
:
UnaryMathFunctionType
)
\
_
(
void
(
*
)
(
js
:
:
gc
:
:
StoreBuffer
*
js
:
:
gc
:
:
Cell
*
*
)
)
\
_
(
void
(
*
)
(
JSRuntime
*
rt
JSObject
*
*
objp
)
)
\
_
(
void
(
*
)
(
JSRuntime
*
rt
JSString
*
*
stringp
)
)
\
_
(
void
(
*
)
(
JSRuntime
*
rt
Shape
*
*
shapep
)
)
\
_
(
void
(
*
)
(
JSRuntime
*
rt
wasm
:
:
AnyRef
*
refp
)
)
\
_
(
void
(
*
)
(
JSRuntime
*
rt
Value
*
vp
)
)
#
if
MOZ_IS_GCC
#
pragma
GCC
diagnostic
push
#
pragma
GCC
diagnostic
ignored
"
-
Wignored
-
attributes
"
#
endif
#
define
DEF_TEMPLATE
(
fp
)
\
template
<
>
\
struct
ABIFunctionData
<
decltype
(
&
fp
)
fp
>
{
\
static
constexpr
bool
registered
=
true
;
\
}
;
ABIFUNCTION_LIST
(
DEF_TEMPLATE
)
#
undef
DEF_TEMPLATE
#
define
DEF_TEMPLATE
(
fp
.
.
.
)
\
template
<
>
\
struct
ABIFunctionData
<
__VA_ARGS__
fp
>
{
\
static
constexpr
bool
registered
=
true
;
\
}
;
ABIFUNCTION_AND_TYPE_LIST
(
DEF_TEMPLATE
)
#
undef
DEF_TEMPLATE
#
define
DEF_TEMPLATE
(
.
.
.
)
\
template
<
>
\
struct
ABIFunctionSignatureData
<
__VA_ARGS__
>
{
\
static
constexpr
bool
registered
=
true
;
\
}
;
ABIFUNCTIONSIG_LIST
(
DEF_TEMPLATE
)
#
undef
DEF_TEMPLATE
#
if
MOZ_IS_GCC
#
pragma
GCC
diagnostic
pop
#
endif
}
}
namespace
check_fully_qualified
{
#
define
CHECK_NS_VISIBILITY
(
fp
)
\
[
[
maybe_unused
]
]
static
constexpr
decltype
(
&
fp
)
MOZ_CONCAT
(
\
fp_
__COUNTER__
)
=
nullptr
;
ABIFUNCTION_LIST
(
CHECK_NS_VISIBILITY
)
#
undef
CHECK_NS_VISIBILITY
}
#
endif
