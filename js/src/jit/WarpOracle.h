#
ifndef
jit_WarpOracle_h
#
define
jit_WarpOracle_h
#
include
"
jit
/
JitContext
.
h
"
namespace
js
{
namespace
jit
{
class
MIRGenerator
;
class
WarpScriptSnapshot
{
JSScript
*
script_
;
public
:
explicit
WarpScriptSnapshot
(
JSScript
*
script
)
:
script_
(
script
)
{
}
JSScript
*
script
(
)
const
{
return
script_
;
}
}
;
class
WarpSnapshot
{
WarpScriptSnapshot
*
script_
;
public
:
explicit
WarpSnapshot
(
WarpScriptSnapshot
*
script
)
:
script_
(
script
)
{
}
WarpScriptSnapshot
*
script
(
)
const
{
return
script_
;
}
}
;
class
MOZ_STACK_CLASS
WarpOracle
{
JSContext
*
cx_
;
MIRGenerator
&
mirGen_
;
TempAllocator
&
alloc_
;
HandleScript
script_
;
mozilla
:
:
GenericErrorResult
<
AbortReason
>
abort
(
AbortReason
r
)
;
mozilla
:
:
GenericErrorResult
<
AbortReason
>
abort
(
AbortReason
r
const
char
*
message
.
.
.
)
;
AbortReasonOr
<
WarpScriptSnapshot
*
>
createScriptSnapshot
(
HandleScript
script
)
;
public
:
WarpOracle
(
JSContext
*
cx
MIRGenerator
&
mirGen
HandleScript
script
)
;
AbortReasonOr
<
WarpSnapshot
*
>
createSnapshot
(
)
;
}
;
}
}
#
endif
