#
include
"
jit
/
Bailouts
.
h
"
#
include
"
jit
/
JitFrames
.
h
"
#
include
"
jit
/
SafepointIndex
.
h
"
#
include
"
vm
/
JSScript
-
inl
.
h
"
using
namespace
js
;
using
namespace
js
:
:
jit
;
BailoutFrameInfo
:
:
BailoutFrameInfo
(
const
JitActivationIterator
&
activations
InvalidationBailoutStack
*
bailout
)
:
machine_
(
bailout
-
>
machine
(
)
)
{
framePointer_
=
(
uint8_t
*
)
bailout
-
>
fp
(
)
;
topFrameSize_
=
framePointer_
-
bailout
-
>
sp
(
)
;
topIonScript_
=
bailout
-
>
ionScript
(
)
;
attachOnJitActivation
(
activations
)
;
uint8_t
*
returnAddressToFp_
=
bailout
-
>
osiPointReturnAddress
(
)
;
const
OsiIndex
*
osiIndex
=
topIonScript_
-
>
getOsiIndex
(
returnAddressToFp_
)
;
snapshotOffset_
=
osiIndex
-
>
snapshotOffset
(
)
;
}
