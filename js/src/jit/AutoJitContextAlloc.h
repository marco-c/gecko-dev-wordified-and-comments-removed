#
ifndef
jit_AutoJitContextAlloc_h
#
define
jit_AutoJitContextAlloc_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
jit
/
JitAllocPolicy
.
h
"
#
include
"
jit
/
JitContext
.
h
"
#
include
"
vm
/
JSContext
.
h
"
namespace
js
:
:
jit
{
class
AutoJitContextAlloc
{
TempAllocator
tempAlloc_
;
JitContext
*
jcx_
;
TempAllocator
*
prevAlloc_
;
public
:
explicit
AutoJitContextAlloc
(
JSContext
*
cx
)
:
tempAlloc_
(
&
cx
-
>
tempLifoAlloc
(
)
)
jcx_
(
GetJitContext
(
)
)
prevAlloc_
(
jcx_
-
>
temp
)
{
jcx_
-
>
temp
=
&
tempAlloc_
;
}
~
AutoJitContextAlloc
(
)
{
MOZ_ASSERT
(
jcx_
-
>
temp
=
=
&
tempAlloc_
)
;
jcx_
-
>
temp
=
prevAlloc_
;
}
}
;
}
#
endif
