#
ifndef
jit_InvalidationScriptSet_h
#
define
jit_InvalidationScriptSet_h
#
include
"
gc
/
Barrier
.
h
"
#
include
"
jit
/
Invalidation
.
h
"
#
include
"
jit
/
IonTypes
.
h
"
#
include
"
js
/
AllocPolicy
.
h
"
#
include
"
js
/
GCVector
.
h
"
#
include
"
js
/
SweepingAPI
.
h
"
class
JSScript
;
namespace
js
:
:
jit
{
using
WeakScriptSet
=
GCHashSet
<
WeakHeapPtr
<
JSScript
*
>
StableCellHasher
<
WeakHeapPtr
<
JSScript
*
>
>
js
:
:
SystemAllocPolicy
>
;
using
WeakScriptCache
=
JS
:
:
WeakCache
<
WeakScriptSet
>
;
void
InvalidateAndClearScriptSet
(
JSContext
*
cx
WeakScriptCache
&
scripts
const
char
*
reason
)
;
bool
AddScriptToSet
(
WeakScriptCache
&
scripts
const
IonScriptKey
&
ionScript
)
;
void
RemoveFromScriptSet
(
WeakScriptCache
&
scripts
JSScript
*
script
)
;
}
#
endif
