#
include
"
jit
/
BaselineIC
.
h
"
#
include
"
jit
/
SharedICHelpers
.
h
"
using
namespace
js
;
using
namespace
js
:
:
jit
;
namespace
js
{
namespace
jit
{
bool
ICCompare_Int32
:
:
Compiler
:
:
generateStubCode
(
MacroAssembler
&
masm
)
{
Label
failure
;
masm
.
branchTestInt32
(
Assembler
:
:
NotEqual
R0
&
failure
)
;
masm
.
branchTestInt32
(
Assembler
:
:
NotEqual
R1
&
failure
)
;
ScratchRegisterScope
scratch
(
masm
)
;
Assembler
:
:
Condition
cond
=
JSOpToCondition
(
op
true
)
;
masm
.
mov
(
ImmWord
(
0
)
scratch
)
;
masm
.
cmp32
(
R0
.
valueReg
(
)
R1
.
valueReg
(
)
)
;
masm
.
setCC
(
cond
scratch
)
;
masm
.
boxValue
(
JSVAL_TYPE_BOOLEAN
scratch
R0
.
valueReg
(
)
)
;
EmitReturnFromIC
(
masm
)
;
masm
.
bind
(
&
failure
)
;
EmitStubGuardFailure
(
masm
)
;
return
true
;
}
}
}
