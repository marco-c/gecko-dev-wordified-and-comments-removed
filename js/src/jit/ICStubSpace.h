#
ifndef
jit_ICStubSpace_h
#
define
jit_ICStubSpace_h
#
include
"
ds
/
LifoAlloc
.
h
"
namespace
js
{
namespace
jit
{
class
ICStubSpace
{
static
constexpr
size_t
DefaultChunkSize
=
4096
;
LifoAlloc
allocator_
{
DefaultChunkSize
js
:
:
BackgroundMallocArena
}
;
public
:
inline
void
*
alloc
(
size_t
size
)
{
return
allocator_
.
alloc
(
size
)
;
}
JS_DECLARE_NEW_METHODS
(
allocate
alloc
inline
)
void
freeAllAfterMinorGC
(
JS
:
:
Zone
*
zone
)
;
void
transferFrom
(
ICStubSpace
&
other
)
{
allocator_
.
transferFrom
(
&
other
.
allocator_
)
;
}
size_t
sizeOfExcludingThis
(
mozilla
:
:
MallocSizeOf
mallocSizeOf
)
const
{
return
allocator_
.
sizeOfExcludingThis
(
mallocSizeOf
)
;
}
}
;
}
}
#
endif
