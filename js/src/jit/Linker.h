#
ifndef
jit_Linker_h
#
define
jit_Linker_h
#
include
"
jit
/
ExecutableAllocator
.
h
"
#
include
"
jit
/
IonCode
.
h
"
#
include
"
jit
/
JitCompartment
.
h
"
#
include
"
jit
/
MacroAssembler
.
h
"
#
include
"
vm
/
JSCompartment
.
h
"
#
include
"
vm
/
JSContext
.
h
"
namespace
js
{
namespace
jit
{
class
Linker
{
MacroAssembler
&
masm
;
mozilla
:
:
Maybe
<
AutoWritableJitCode
>
awjc
;
JitCode
*
fail
(
JSContext
*
cx
)
{
ReportOutOfMemory
(
cx
)
;
return
nullptr
;
}
public
:
explicit
Linker
(
MacroAssembler
&
masm
)
:
masm
(
masm
)
{
MOZ_ASSERT
(
masm
.
isRooted
(
)
)
;
masm
.
finish
(
)
;
}
Linker
(
MacroAssembler
&
masm
JS
:
:
AutoRequireNoGC
&
nogc
)
:
masm
(
masm
)
{
masm
.
finish
(
)
;
}
JitCode
*
newCode
(
JSContext
*
cx
CodeKind
kind
bool
hasPatchableBackedges
=
false
)
;
}
;
}
}
#
endif
