"
use
strict
"
;
if
(
!
window
.
wrappedJSObject
.
serviceWorker
)
{
const
win
=
window
.
wrappedJSObject
;
const
emptyArr
=
new
win
.
Array
(
)
;
const
emptyMsg
=
cloneInto
(
{
message
:
"
"
}
window
)
;
const
idb
=
{
open
:
(
)
=
>
win
.
Promise
.
reject
(
emptyMsg
)
}
;
const
sw
=
{
addEventListener
(
)
{
}
getRegistrations
:
(
)
=
>
win
.
Promise
.
resolve
(
emptyArr
)
register
:
(
)
=
>
win
.
Promise
.
reject
(
emptyMsg
)
}
;
Object
.
defineProperty
(
win
"
indexedDB
"
{
value
:
cloneInto
(
idb
window
{
cloneFunctions
:
true
}
)
}
)
;
Object
.
defineProperty
(
navigator
.
wrappedJSObject
"
serviceWorker
"
{
value
:
cloneInto
(
sw
window
{
cloneFunctions
:
true
}
)
}
)
;
}
