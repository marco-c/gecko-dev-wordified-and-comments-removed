package
org
.
mozilla
.
telemetry
.
measurement
;
import
androidx
.
annotation
.
NonNull
;
import
androidx
.
annotation
.
VisibleForTesting
;
import
java
.
util
.
Calendar
;
import
java
.
util
.
concurrent
.
TimeUnit
;
public
class
TimezoneOffsetMeasurement
extends
TelemetryMeasurement
{
private
static
final
String
FIELD_NAME
=
"
tz
"
;
public
TimezoneOffsetMeasurement
(
)
{
super
(
FIELD_NAME
)
;
}
Override
public
Object
flush
(
)
{
return
getTimezoneOffsetInMinutesForGivenDate
(
now
(
)
)
;
}
private
static
int
getTimezoneOffsetInMinutesForGivenDate
(
NonNull
final
Calendar
calendar
)
{
return
(
int
)
TimeUnit
.
MILLISECONDS
.
toMinutes
(
calendar
.
get
(
Calendar
.
ZONE_OFFSET
)
+
calendar
.
get
(
Calendar
.
DST_OFFSET
)
)
;
}
VisibleForTesting
Calendar
now
(
)
{
return
Calendar
.
getInstance
(
)
;
}
}
