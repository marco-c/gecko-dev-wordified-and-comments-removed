package
org
.
mozilla
.
gecko
.
tests
;
import
org
.
json
.
JSONObject
;
public
class
testCheck3
extends
PixelTest
{
Override
protected
Type
getTestType
(
)
{
return
Type
.
TALOS
;
}
public
void
testCheck3
(
)
{
String
url
=
getAbsoluteUrl
(
"
/
facebook
.
com
/
www
.
facebook
.
com
/
barackobama
.
html
"
)
;
setPreferenceAndWaitForChange
(
"
browser
.
ui
.
zoom
.
force
-
user
-
scalable
"
true
)
;
blockForGeckoReady
(
)
;
loadAndPaint
(
url
)
;
mDriver
.
setupScrollHandling
(
)
;
MotionEventReplayer
mer
=
new
MotionEventReplayer
(
getInstrumentation
(
)
mDriver
.
getGeckoLeft
(
)
mDriver
.
getGeckoTop
(
)
mDriver
.
getGeckoWidth
(
)
mDriver
.
getGeckoHeight
(
)
)
;
float
completeness
=
0
.
0f
;
mDriver
.
startCheckerboardRecording
(
)
;
try
{
mer
.
replayEvents
(
getAsset
(
"
testcheck2
-
motionevents
"
)
)
;
Thread
.
sleep
(
1000
)
;
completeness
=
mDriver
.
stopCheckerboardRecording
(
)
;
}
catch
(
Exception
e
)
{
e
.
printStackTrace
(
)
;
mAsserter
.
ok
(
false
"
Exception
while
replaying
events
"
e
.
toString
(
)
)
;
}
mAsserter
.
dumpLog
(
"
__start_report
"
+
completeness
+
"
__end_report
"
)
;
System
.
out
.
println
(
"
Completeness
score
:
"
+
completeness
)
;
long
msecs
=
System
.
currentTimeMillis
(
)
;
mAsserter
.
dumpLog
(
"
__startTimestamp
"
+
msecs
+
"
__endTimestamp
"
)
;
}
}
