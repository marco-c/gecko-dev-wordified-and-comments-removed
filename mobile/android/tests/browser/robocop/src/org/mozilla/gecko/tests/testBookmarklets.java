package
org
.
mozilla
.
gecko
.
tests
;
import
org
.
mozilla
.
gecko
.
Actions
;
import
com
.
jayway
.
android
.
robotium
.
solo
.
Condition
;
public
class
testBookmarklets
extends
BaseTest
{
public
void
testBookmarklets
(
)
{
final
String
url
=
getAbsoluteUrl
(
mStringHelper
.
ROBOCOP_BLANK_PAGE_01_URL
)
;
final
String
title
=
"
alertBookmarklet
"
;
final
String
js
=
"
javascript
:
alert
(
12
+
10
)
"
;
final
String
expected
=
"
22
"
;
boolean
alerted
;
blockForGeckoReady
(
)
;
loadUrlAndWait
(
url
)
;
enterUrl
(
js
)
;
mActions
.
sendSpecialKey
(
Actions
.
SpecialKey
.
ENTER
)
;
alerted
=
waitForCondition
(
new
Condition
(
)
{
Override
public
boolean
isSatisfied
(
)
{
return
mSolo
.
searchButton
(
"
OK
"
true
)
|
|
mSolo
.
searchText
(
expected
true
)
;
}
}
3000
)
;
mAsserter
.
is
(
alerted
false
"
Alert
was
not
shown
for
user
-
entered
bookmarklet
"
)
;
loadUrl
(
js
)
;
alerted
=
waitForCondition
(
new
Condition
(
)
{
Override
public
boolean
isSatisfied
(
)
{
return
mSolo
.
searchButton
(
"
OK
"
true
)
&
&
mSolo
.
searchText
(
expected
true
)
;
}
}
3000
)
;
mAsserter
.
is
(
alerted
true
"
Alert
was
shown
for
bookmarklet
"
)
;
}
}
