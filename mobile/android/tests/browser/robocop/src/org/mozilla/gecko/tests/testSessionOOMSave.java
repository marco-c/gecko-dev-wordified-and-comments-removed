package
org
.
mozilla
.
gecko
.
tests
;
import
android
.
util
.
Log
;
import
org
.
mozilla
.
gecko
.
Actions
;
public
class
testSessionOOMSave
extends
SessionTest
{
public
void
testSessionOOMSave
(
)
{
final
Actions
.
EventExpecter
pageShowExpecter
=
mActions
.
expectGlobalEvent
(
Actions
.
EventType
.
UI
"
Content
:
PageShow
"
)
;
pageShowExpecter
.
blockForEvent
(
)
;
pageShowExpecter
.
unregisterListener
(
)
;
final
Session
session
=
createTestSession
(
1
)
;
loadSessionTabs
(
session
)
;
VerifyJSONCondition
verifyJSONCondition
=
new
VerifyJSONCondition
(
session
)
;
boolean
success
=
mSolo
.
waitForCondition
(
verifyJSONCondition
SESSION_TIMEOUT
)
;
if
(
success
)
{
mAsserter
.
ok
(
true
"
verified
session
JSON
"
null
)
;
}
else
{
mAsserter
.
ok
(
false
"
failed
to
verify
session
JSON
"
Log
.
getStackTraceString
(
verifyJSONCondition
.
getLastException
(
)
)
)
;
}
}
}
