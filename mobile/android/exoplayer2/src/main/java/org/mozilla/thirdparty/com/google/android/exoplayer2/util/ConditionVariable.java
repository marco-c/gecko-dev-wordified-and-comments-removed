package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
;
public
final
class
ConditionVariable
{
private
boolean
isOpen
;
public
synchronized
boolean
open
(
)
{
if
(
isOpen
)
{
return
false
;
}
isOpen
=
true
;
notifyAll
(
)
;
return
true
;
}
public
synchronized
boolean
close
(
)
{
boolean
wasOpen
=
isOpen
;
isOpen
=
false
;
return
wasOpen
;
}
public
synchronized
void
block
(
)
throws
InterruptedException
{
while
(
!
isOpen
)
{
wait
(
)
;
}
}
public
synchronized
boolean
block
(
long
timeout
)
throws
InterruptedException
{
long
now
=
android
.
os
.
SystemClock
.
elapsedRealtime
(
)
;
long
end
=
now
+
timeout
;
while
(
!
isOpen
&
&
now
<
end
)
{
wait
(
end
-
now
)
;
now
=
android
.
os
.
SystemClock
.
elapsedRealtime
(
)
;
}
return
isOpen
;
}
public
synchronized
boolean
isOpen
(
)
{
return
isOpen
;
}
}
