package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
hls
;
import
android
.
net
.
Uri
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
import
java
.
util
.
LinkedHashMap
;
import
java
.
util
.
Map
;
final
class
FullSegmentEncryptionKeyCache
{
private
final
LinkedHashMap
<
Uri
byte
[
]
>
backingMap
;
public
FullSegmentEncryptionKeyCache
(
int
maxSize
)
{
backingMap
=
new
LinkedHashMap
<
Uri
byte
[
]
>
(
maxSize
+
1
1
false
)
{
Override
protected
boolean
removeEldestEntry
(
Map
.
Entry
<
Uri
byte
[
]
>
eldest
)
{
return
size
(
)
>
maxSize
;
}
}
;
}
Nullable
public
byte
[
]
get
(
Nullable
Uri
uri
)
{
if
(
uri
=
=
null
)
{
return
null
;
}
return
backingMap
.
get
(
uri
)
;
}
Nullable
public
byte
[
]
put
(
Uri
uri
byte
[
]
encryptionKey
)
{
return
backingMap
.
put
(
Assertions
.
checkNotNull
(
uri
)
Assertions
.
checkNotNull
(
encryptionKey
)
)
;
}
public
boolean
containsUri
(
Uri
uri
)
{
return
backingMap
.
containsKey
(
Assertions
.
checkNotNull
(
uri
)
)
;
}
Nullable
public
byte
[
]
remove
(
Uri
uri
)
{
return
backingMap
.
remove
(
Assertions
.
checkNotNull
(
uri
)
)
;
}
}
