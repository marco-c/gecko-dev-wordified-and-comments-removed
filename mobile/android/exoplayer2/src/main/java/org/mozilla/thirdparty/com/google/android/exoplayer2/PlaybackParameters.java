package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
public
final
class
PlaybackParameters
{
public
static
final
PlaybackParameters
DEFAULT
=
new
PlaybackParameters
(
1f
)
;
public
final
float
speed
;
public
final
float
pitch
;
public
final
boolean
skipSilence
;
private
final
int
scaledUsPerMs
;
public
PlaybackParameters
(
float
speed
)
{
this
(
speed
1f
false
)
;
}
public
PlaybackParameters
(
float
speed
float
pitch
)
{
this
(
speed
pitch
false
)
;
}
public
PlaybackParameters
(
float
speed
float
pitch
boolean
skipSilence
)
{
Assertions
.
checkArgument
(
speed
>
0
)
;
Assertions
.
checkArgument
(
pitch
>
0
)
;
this
.
speed
=
speed
;
this
.
pitch
=
pitch
;
this
.
skipSilence
=
skipSilence
;
scaledUsPerMs
=
Math
.
round
(
speed
*
1000f
)
;
}
public
long
getMediaTimeUsForPlayoutTimeMs
(
long
timeMs
)
{
return
timeMs
*
scaledUsPerMs
;
}
Override
public
boolean
equals
(
Nullable
Object
obj
)
{
if
(
this
=
=
obj
)
{
return
true
;
}
if
(
obj
=
=
null
|
|
getClass
(
)
!
=
obj
.
getClass
(
)
)
{
return
false
;
}
PlaybackParameters
other
=
(
PlaybackParameters
)
obj
;
return
this
.
speed
=
=
other
.
speed
&
&
this
.
pitch
=
=
other
.
pitch
&
&
this
.
skipSilence
=
=
other
.
skipSilence
;
}
Override
public
int
hashCode
(
)
{
int
result
=
17
;
result
=
31
*
result
+
Float
.
floatToRawIntBits
(
speed
)
;
result
=
31
*
result
+
Float
.
floatToRawIntBits
(
pitch
)
;
result
=
31
*
result
+
(
skipSilence
?
1
:
0
)
;
return
result
;
}
}
