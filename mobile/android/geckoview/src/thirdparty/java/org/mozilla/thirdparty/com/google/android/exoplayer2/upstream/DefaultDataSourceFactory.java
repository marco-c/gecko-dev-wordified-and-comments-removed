package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
upstream
;
import
android
.
content
.
Context
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
upstream
.
DataSource
.
Factory
;
public
final
class
DefaultDataSourceFactory
implements
Factory
{
private
final
Context
context
;
Nullable
private
final
TransferListener
listener
;
private
final
DataSource
.
Factory
baseDataSourceFactory
;
public
DefaultDataSourceFactory
(
Context
context
String
userAgent
)
{
this
(
context
userAgent
null
)
;
}
public
DefaultDataSourceFactory
(
Context
context
String
userAgent
Nullable
TransferListener
listener
)
{
this
(
context
listener
new
DefaultHttpDataSourceFactory
(
userAgent
listener
)
)
;
}
public
DefaultDataSourceFactory
(
Context
context
DataSource
.
Factory
baseDataSourceFactory
)
{
this
(
context
null
baseDataSourceFactory
)
;
}
public
DefaultDataSourceFactory
(
Context
context
Nullable
TransferListener
listener
DataSource
.
Factory
baseDataSourceFactory
)
{
this
.
context
=
context
.
getApplicationContext
(
)
;
this
.
listener
=
listener
;
this
.
baseDataSourceFactory
=
baseDataSourceFactory
;
}
Override
public
DefaultDataSource
createDataSource
(
)
{
DefaultDataSource
dataSource
=
new
DefaultDataSource
(
context
baseDataSourceFactory
.
createDataSource
(
)
)
;
if
(
listener
!
=
null
)
{
dataSource
.
addTransferListener
(
listener
)
;
}
return
dataSource
;
}
}
