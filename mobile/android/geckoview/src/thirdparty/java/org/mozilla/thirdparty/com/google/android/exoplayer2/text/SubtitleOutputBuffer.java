package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
Format
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
decoder
.
OutputBuffer
;
import
java
.
util
.
List
;
public
abstract
class
SubtitleOutputBuffer
extends
OutputBuffer
implements
Subtitle
{
private
Subtitle
subtitle
;
private
long
subsampleOffsetUs
;
public
void
setContent
(
long
timeUs
Subtitle
subtitle
long
subsampleOffsetUs
)
{
this
.
timeUs
=
timeUs
;
this
.
subtitle
=
subtitle
;
this
.
subsampleOffsetUs
=
subsampleOffsetUs
=
=
Format
.
OFFSET_SAMPLE_RELATIVE
?
this
.
timeUs
:
subsampleOffsetUs
;
}
Override
public
int
getEventTimeCount
(
)
{
return
subtitle
.
getEventTimeCount
(
)
;
}
Override
public
long
getEventTime
(
int
index
)
{
return
subtitle
.
getEventTime
(
index
)
+
subsampleOffsetUs
;
}
Override
public
int
getNextEventTimeIndex
(
long
timeUs
)
{
return
subtitle
.
getNextEventTimeIndex
(
timeUs
-
subsampleOffsetUs
)
;
}
Override
public
List
<
Cue
>
getCues
(
long
timeUs
)
{
return
subtitle
.
getCues
(
timeUs
-
subsampleOffsetUs
)
;
}
Override
public
abstract
void
release
(
)
;
Override
public
void
clear
(
)
{
super
.
clear
(
)
;
subtitle
=
null
;
}
}
