package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
C
;
public
final
class
CompositeSequenceableLoader
implements
SequenceableLoader
{
private
final
SequenceableLoader
[
]
loaders
;
public
CompositeSequenceableLoader
(
SequenceableLoader
[
]
loaders
)
{
this
.
loaders
=
loaders
;
}
Override
public
long
getNextLoadPositionUs
(
)
{
long
nextLoadPositionUs
=
Long
.
MAX_VALUE
;
for
(
SequenceableLoader
loader
:
loaders
)
{
long
loaderNextLoadPositionUs
=
loader
.
getNextLoadPositionUs
(
)
;
if
(
loaderNextLoadPositionUs
!
=
C
.
TIME_END_OF_SOURCE
)
{
nextLoadPositionUs
=
Math
.
min
(
nextLoadPositionUs
loaderNextLoadPositionUs
)
;
}
}
return
nextLoadPositionUs
=
=
Long
.
MAX_VALUE
?
C
.
TIME_END_OF_SOURCE
:
nextLoadPositionUs
;
}
Override
public
boolean
continueLoading
(
long
positionUs
)
{
boolean
madeProgress
=
false
;
boolean
madeProgressThisIteration
;
do
{
madeProgressThisIteration
=
false
;
long
nextLoadPositionUs
=
getNextLoadPositionUs
(
)
;
if
(
nextLoadPositionUs
=
=
C
.
TIME_END_OF_SOURCE
)
{
break
;
}
for
(
SequenceableLoader
loader
:
loaders
)
{
if
(
loader
.
getNextLoadPositionUs
(
)
=
=
nextLoadPositionUs
)
{
madeProgressThisIteration
|
=
loader
.
continueLoading
(
positionUs
)
;
}
}
madeProgress
|
=
madeProgressThisIteration
;
}
while
(
madeProgressThisIteration
)
;
return
madeProgress
;
}
}
