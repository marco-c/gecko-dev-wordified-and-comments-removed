package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
chunk
;
import
android
.
util
.
Log
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
extractor
.
DefaultTrackOutput
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
extractor
.
DummyTrackOutput
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
extractor
.
TrackOutput
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
chunk
.
ChunkExtractorWrapper
.
TrackOutputProvider
;
final
class
BaseMediaChunkOutput
implements
TrackOutputProvider
{
private
static
final
String
TAG
=
"
BaseMediaChunkOutput
"
;
private
final
int
[
]
trackTypes
;
private
final
DefaultTrackOutput
[
]
trackOutputs
;
public
BaseMediaChunkOutput
(
int
[
]
trackTypes
DefaultTrackOutput
[
]
trackOutputs
)
{
this
.
trackTypes
=
trackTypes
;
this
.
trackOutputs
=
trackOutputs
;
}
Override
public
TrackOutput
track
(
int
id
int
type
)
{
for
(
int
i
=
0
;
i
<
trackTypes
.
length
;
i
+
+
)
{
if
(
type
=
=
trackTypes
[
i
]
)
{
return
trackOutputs
[
i
]
;
}
}
Log
.
e
(
TAG
"
Unmatched
track
of
type
:
"
+
type
)
;
return
new
DummyTrackOutput
(
)
;
}
public
int
[
]
getWriteIndices
(
)
{
int
[
]
writeIndices
=
new
int
[
trackOutputs
.
length
]
;
for
(
int
i
=
0
;
i
<
trackOutputs
.
length
;
i
+
+
)
{
if
(
trackOutputs
[
i
]
!
=
null
)
{
writeIndices
[
i
]
=
trackOutputs
[
i
]
.
getWriteIndex
(
)
;
}
}
return
writeIndices
;
}
public
void
setSampleOffsetUs
(
long
sampleOffsetUs
)
{
for
(
DefaultTrackOutput
trackOutput
:
trackOutputs
)
{
if
(
trackOutput
!
=
null
)
{
trackOutput
.
setSampleOffsetUs
(
sampleOffsetUs
)
;
}
}
}
}
