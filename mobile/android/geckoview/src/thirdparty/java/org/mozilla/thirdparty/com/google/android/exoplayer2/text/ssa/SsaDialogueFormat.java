package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
.
ssa
;
import
static
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
.
ssa
.
SsaDecoder
.
FORMAT_LINE_PREFIX
;
import
android
.
text
.
TextUtils
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
C
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
Util
;
final
class
SsaDialogueFormat
{
public
final
int
startTimeIndex
;
public
final
int
endTimeIndex
;
public
final
int
styleIndex
;
public
final
int
textIndex
;
public
final
int
length
;
private
SsaDialogueFormat
(
int
startTimeIndex
int
endTimeIndex
int
styleIndex
int
textIndex
int
length
)
{
this
.
startTimeIndex
=
startTimeIndex
;
this
.
endTimeIndex
=
endTimeIndex
;
this
.
styleIndex
=
styleIndex
;
this
.
textIndex
=
textIndex
;
this
.
length
=
length
;
}
Nullable
public
static
SsaDialogueFormat
fromFormatLine
(
String
formatLine
)
{
int
startTimeIndex
=
C
.
INDEX_UNSET
;
int
endTimeIndex
=
C
.
INDEX_UNSET
;
int
styleIndex
=
C
.
INDEX_UNSET
;
int
textIndex
=
C
.
INDEX_UNSET
;
Assertions
.
checkArgument
(
formatLine
.
startsWith
(
FORMAT_LINE_PREFIX
)
)
;
String
[
]
keys
=
TextUtils
.
split
(
formatLine
.
substring
(
FORMAT_LINE_PREFIX
.
length
(
)
)
"
"
)
;
for
(
int
i
=
0
;
i
<
keys
.
length
;
i
+
+
)
{
switch
(
Util
.
toLowerInvariant
(
keys
[
i
]
.
trim
(
)
)
)
{
case
"
start
"
:
startTimeIndex
=
i
;
break
;
case
"
end
"
:
endTimeIndex
=
i
;
break
;
case
"
style
"
:
styleIndex
=
i
;
break
;
case
"
text
"
:
textIndex
=
i
;
break
;
}
}
return
(
startTimeIndex
!
=
C
.
INDEX_UNSET
&
&
endTimeIndex
!
=
C
.
INDEX_UNSET
)
?
new
SsaDialogueFormat
(
startTimeIndex
endTimeIndex
styleIndex
textIndex
keys
.
length
)
:
null
;
}
}
