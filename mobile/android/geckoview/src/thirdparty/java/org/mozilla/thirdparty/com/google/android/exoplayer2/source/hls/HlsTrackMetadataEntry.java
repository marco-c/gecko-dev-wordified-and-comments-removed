package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
hls
;
import
android
.
os
.
Parcel
;
import
android
.
os
.
Parcelable
;
import
android
.
text
.
TextUtils
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
metadata
.
Metadata
;
import
java
.
util
.
ArrayList
;
import
java
.
util
.
Collections
;
import
java
.
util
.
List
;
public
final
class
HlsTrackMetadataEntry
implements
Metadata
.
Entry
{
public
static
final
class
VariantInfo
implements
Parcelable
{
public
final
long
bitrate
;
Nullable
public
final
String
videoGroupId
;
Nullable
public
final
String
audioGroupId
;
Nullable
public
final
String
subtitleGroupId
;
Nullable
public
final
String
captionGroupId
;
public
VariantInfo
(
long
bitrate
Nullable
String
videoGroupId
Nullable
String
audioGroupId
Nullable
String
subtitleGroupId
Nullable
String
captionGroupId
)
{
this
.
bitrate
=
bitrate
;
this
.
videoGroupId
=
videoGroupId
;
this
.
audioGroupId
=
audioGroupId
;
this
.
subtitleGroupId
=
subtitleGroupId
;
this
.
captionGroupId
=
captionGroupId
;
}
VariantInfo
(
Parcel
in
)
{
bitrate
=
in
.
readLong
(
)
;
videoGroupId
=
in
.
readString
(
)
;
audioGroupId
=
in
.
readString
(
)
;
subtitleGroupId
=
in
.
readString
(
)
;
captionGroupId
=
in
.
readString
(
)
;
}
Override
public
boolean
equals
(
Nullable
Object
other
)
{
if
(
this
=
=
other
)
{
return
true
;
}
if
(
other
=
=
null
|
|
getClass
(
)
!
=
other
.
getClass
(
)
)
{
return
false
;
}
VariantInfo
that
=
(
VariantInfo
)
other
;
return
bitrate
=
=
that
.
bitrate
&
&
TextUtils
.
equals
(
videoGroupId
that
.
videoGroupId
)
&
&
TextUtils
.
equals
(
audioGroupId
that
.
audioGroupId
)
&
&
TextUtils
.
equals
(
subtitleGroupId
that
.
subtitleGroupId
)
&
&
TextUtils
.
equals
(
captionGroupId
that
.
captionGroupId
)
;
}
Override
public
int
hashCode
(
)
{
int
result
=
(
int
)
(
bitrate
^
(
bitrate
>
>
>
32
)
)
;
result
=
31
*
result
+
(
videoGroupId
!
=
null
?
videoGroupId
.
hashCode
(
)
:
0
)
;
result
=
31
*
result
+
(
audioGroupId
!
=
null
?
audioGroupId
.
hashCode
(
)
:
0
)
;
result
=
31
*
result
+
(
subtitleGroupId
!
=
null
?
subtitleGroupId
.
hashCode
(
)
:
0
)
;
result
=
31
*
result
+
(
captionGroupId
!
=
null
?
captionGroupId
.
hashCode
(
)
:
0
)
;
return
result
;
}
Override
public
int
describeContents
(
)
{
return
0
;
}
Override
public
void
writeToParcel
(
Parcel
dest
int
flags
)
{
dest
.
writeLong
(
bitrate
)
;
dest
.
writeString
(
videoGroupId
)
;
dest
.
writeString
(
audioGroupId
)
;
dest
.
writeString
(
subtitleGroupId
)
;
dest
.
writeString
(
captionGroupId
)
;
}
public
static
final
Parcelable
.
Creator
<
VariantInfo
>
CREATOR
=
new
Parcelable
.
Creator
<
VariantInfo
>
(
)
{
Override
public
VariantInfo
createFromParcel
(
Parcel
in
)
{
return
new
VariantInfo
(
in
)
;
}
Override
public
VariantInfo
[
]
newArray
(
int
size
)
{
return
new
VariantInfo
[
size
]
;
}
}
;
}
Nullable
public
final
String
groupId
;
Nullable
public
final
String
name
;
public
final
List
<
VariantInfo
>
variantInfos
;
public
HlsTrackMetadataEntry
(
Nullable
String
groupId
Nullable
String
name
List
<
VariantInfo
>
variantInfos
)
{
this
.
groupId
=
groupId
;
this
.
name
=
name
;
this
.
variantInfos
=
Collections
.
unmodifiableList
(
new
ArrayList
<
>
(
variantInfos
)
)
;
}
HlsTrackMetadataEntry
(
Parcel
in
)
{
groupId
=
in
.
readString
(
)
;
name
=
in
.
readString
(
)
;
int
variantInfoSize
=
in
.
readInt
(
)
;
ArrayList
<
VariantInfo
>
variantInfos
=
new
ArrayList
<
>
(
variantInfoSize
)
;
for
(
int
i
=
0
;
i
<
variantInfoSize
;
i
+
+
)
{
variantInfos
.
add
(
in
.
readParcelable
(
VariantInfo
.
class
.
getClassLoader
(
)
)
)
;
}
this
.
variantInfos
=
Collections
.
unmodifiableList
(
variantInfos
)
;
}
Override
public
String
toString
(
)
{
return
"
HlsTrackMetadataEntry
"
+
(
groupId
!
=
null
?
(
"
[
"
+
groupId
+
"
"
+
name
+
"
]
"
)
:
"
"
)
;
}
Override
public
boolean
equals
(
Nullable
Object
other
)
{
if
(
this
=
=
other
)
{
return
true
;
}
if
(
other
=
=
null
|
|
getClass
(
)
!
=
other
.
getClass
(
)
)
{
return
false
;
}
HlsTrackMetadataEntry
that
=
(
HlsTrackMetadataEntry
)
other
;
return
TextUtils
.
equals
(
groupId
that
.
groupId
)
&
&
TextUtils
.
equals
(
name
that
.
name
)
&
&
variantInfos
.
equals
(
that
.
variantInfos
)
;
}
Override
public
int
hashCode
(
)
{
int
result
=
groupId
!
=
null
?
groupId
.
hashCode
(
)
:
0
;
result
=
31
*
result
+
(
name
!
=
null
?
name
.
hashCode
(
)
:
0
)
;
result
=
31
*
result
+
variantInfos
.
hashCode
(
)
;
return
result
;
}
Override
public
int
describeContents
(
)
{
return
0
;
}
Override
public
void
writeToParcel
(
Parcel
dest
int
flags
)
{
dest
.
writeString
(
groupId
)
;
dest
.
writeString
(
name
)
;
int
variantInfosSize
=
variantInfos
.
size
(
)
;
dest
.
writeInt
(
variantInfosSize
)
;
for
(
int
i
=
0
;
i
<
variantInfosSize
;
i
+
+
)
{
dest
.
writeParcelable
(
variantInfos
.
get
(
i
)
0
)
;
}
}
public
static
final
Parcelable
.
Creator
<
HlsTrackMetadataEntry
>
CREATOR
=
new
Parcelable
.
Creator
<
HlsTrackMetadataEntry
>
(
)
{
Override
public
HlsTrackMetadataEntry
createFromParcel
(
Parcel
in
)
{
return
new
HlsTrackMetadataEntry
(
in
)
;
}
Override
public
HlsTrackMetadataEntry
[
]
newArray
(
int
size
)
{
return
new
HlsTrackMetadataEntry
[
size
]
;
}
}
;
}
