package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
.
dvb
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
.
SimpleSubtitleDecoder
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
text
.
Subtitle
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
ParsableByteArray
;
import
java
.
util
.
List
;
public
final
class
DvbDecoder
extends
SimpleSubtitleDecoder
{
private
final
DvbParser
parser
;
public
DvbDecoder
(
List
<
byte
[
]
>
initializationData
)
{
super
(
"
DvbDecoder
"
)
;
ParsableByteArray
data
=
new
ParsableByteArray
(
initializationData
.
get
(
0
)
)
;
int
subtitleCompositionPage
=
data
.
readUnsignedShort
(
)
;
int
subtitleAncillaryPage
=
data
.
readUnsignedShort
(
)
;
parser
=
new
DvbParser
(
subtitleCompositionPage
subtitleAncillaryPage
)
;
}
Override
protected
Subtitle
decode
(
byte
[
]
data
int
length
boolean
reset
)
{
if
(
reset
)
{
parser
.
reset
(
)
;
}
return
new
DvbSubtitle
(
parser
.
decode
(
data
length
)
)
;
}
}
