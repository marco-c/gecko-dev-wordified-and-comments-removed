package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
chunk
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
C
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
Format
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
upstream
.
DataSource
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
upstream
.
DataSpec
;
public
abstract
class
BaseMediaChunk
extends
MediaChunk
{
public
final
long
clippedStartTimeUs
;
public
final
long
clippedEndTimeUs
;
private
BaseMediaChunkOutput
output
;
private
int
[
]
firstSampleIndices
;
public
BaseMediaChunk
(
DataSource
dataSource
DataSpec
dataSpec
Format
trackFormat
int
trackSelectionReason
Nullable
Object
trackSelectionData
long
startTimeUs
long
endTimeUs
long
clippedStartTimeUs
long
clippedEndTimeUs
long
chunkIndex
)
{
super
(
dataSource
dataSpec
trackFormat
trackSelectionReason
trackSelectionData
startTimeUs
endTimeUs
chunkIndex
)
;
this
.
clippedStartTimeUs
=
clippedStartTimeUs
;
this
.
clippedEndTimeUs
=
clippedEndTimeUs
;
}
public
void
init
(
BaseMediaChunkOutput
output
)
{
this
.
output
=
output
;
firstSampleIndices
=
output
.
getWriteIndices
(
)
;
}
public
final
int
getFirstSampleIndex
(
int
trackIndex
)
{
return
firstSampleIndices
[
trackIndex
]
;
}
protected
final
BaseMediaChunkOutput
getOutput
(
)
{
return
output
;
}
}
