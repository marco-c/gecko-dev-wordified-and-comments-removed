package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
;
import
java
.
util
.
Arrays
;
public
final
class
LibraryLoader
{
private
static
final
String
TAG
=
"
LibraryLoader
"
;
private
String
[
]
nativeLibraries
;
private
boolean
loadAttempted
;
private
boolean
isAvailable
;
public
LibraryLoader
(
String
.
.
.
libraries
)
{
nativeLibraries
=
libraries
;
}
public
synchronized
void
setLibraries
(
String
.
.
.
libraries
)
{
Assertions
.
checkState
(
!
loadAttempted
"
Cannot
set
libraries
after
loading
"
)
;
nativeLibraries
=
libraries
;
}
public
synchronized
boolean
isAvailable
(
)
{
if
(
loadAttempted
)
{
return
isAvailable
;
}
loadAttempted
=
true
;
try
{
for
(
String
lib
:
nativeLibraries
)
{
System
.
loadLibrary
(
lib
)
;
}
isAvailable
=
true
;
}
catch
(
UnsatisfiedLinkError
exception
)
{
Log
.
w
(
TAG
"
Failed
to
load
"
+
Arrays
.
toString
(
nativeLibraries
)
)
;
}
return
isAvailable
;
}
}
