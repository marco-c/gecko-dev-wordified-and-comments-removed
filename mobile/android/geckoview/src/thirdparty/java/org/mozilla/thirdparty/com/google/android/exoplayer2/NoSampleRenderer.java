package
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
;
import
androidx
.
annotation
.
Nullable
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
source
.
SampleStream
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
import
org
.
mozilla
.
thirdparty
.
com
.
google
.
android
.
exoplayer2
.
util
.
MediaClock
;
import
java
.
io
.
IOException
;
import
org
.
checkerframework
.
checker
.
nullness
.
qual
.
MonotonicNonNull
;
public
abstract
class
NoSampleRenderer
implements
Renderer
RendererCapabilities
{
MonotonicNonNull
private
RendererConfiguration
configuration
;
private
int
index
;
private
int
state
;
Nullable
private
SampleStream
stream
;
private
boolean
streamIsFinal
;
Override
public
final
int
getTrackType
(
)
{
return
C
.
TRACK_TYPE_NONE
;
}
Override
public
final
RendererCapabilities
getCapabilities
(
)
{
return
this
;
}
Override
public
final
void
setIndex
(
int
index
)
{
this
.
index
=
index
;
}
Override
Nullable
public
MediaClock
getMediaClock
(
)
{
return
null
;
}
Override
public
final
int
getState
(
)
{
return
state
;
}
Override
public
final
void
enable
(
RendererConfiguration
configuration
Format
[
]
formats
SampleStream
stream
long
positionUs
boolean
joining
long
offsetUs
)
throws
ExoPlaybackException
{
Assertions
.
checkState
(
state
=
=
STATE_DISABLED
)
;
this
.
configuration
=
configuration
;
state
=
STATE_ENABLED
;
onEnabled
(
joining
)
;
replaceStream
(
formats
stream
offsetUs
)
;
onPositionReset
(
positionUs
joining
)
;
}
Override
public
final
void
start
(
)
throws
ExoPlaybackException
{
Assertions
.
checkState
(
state
=
=
STATE_ENABLED
)
;
state
=
STATE_STARTED
;
onStarted
(
)
;
}
Override
public
final
void
replaceStream
(
Format
[
]
formats
SampleStream
stream
long
offsetUs
)
throws
ExoPlaybackException
{
Assertions
.
checkState
(
!
streamIsFinal
)
;
this
.
stream
=
stream
;
onRendererOffsetChanged
(
offsetUs
)
;
}
Override
Nullable
public
final
SampleStream
getStream
(
)
{
return
stream
;
}
Override
public
final
boolean
hasReadStreamToEnd
(
)
{
return
true
;
}
Override
public
long
getReadingPositionUs
(
)
{
return
C
.
TIME_END_OF_SOURCE
;
}
Override
public
final
void
setCurrentStreamFinal
(
)
{
streamIsFinal
=
true
;
}
Override
public
final
boolean
isCurrentStreamFinal
(
)
{
return
streamIsFinal
;
}
Override
public
final
void
maybeThrowStreamError
(
)
throws
IOException
{
}
Override
public
final
void
resetPosition
(
long
positionUs
)
throws
ExoPlaybackException
{
streamIsFinal
=
false
;
onPositionReset
(
positionUs
false
)
;
}
Override
public
final
void
stop
(
)
throws
ExoPlaybackException
{
Assertions
.
checkState
(
state
=
=
STATE_STARTED
)
;
state
=
STATE_ENABLED
;
onStopped
(
)
;
}
Override
public
final
void
disable
(
)
{
Assertions
.
checkState
(
state
=
=
STATE_ENABLED
)
;
state
=
STATE_DISABLED
;
stream
=
null
;
streamIsFinal
=
false
;
onDisabled
(
)
;
}
Override
public
final
void
reset
(
)
{
Assertions
.
checkState
(
state
=
=
STATE_DISABLED
)
;
onReset
(
)
;
}
Override
public
boolean
isReady
(
)
{
return
true
;
}
Override
public
boolean
isEnded
(
)
{
return
true
;
}
Override
Capabilities
public
int
supportsFormat
(
Format
format
)
throws
ExoPlaybackException
{
return
RendererCapabilities
.
create
(
FORMAT_UNSUPPORTED_TYPE
)
;
}
Override
AdaptiveSupport
public
int
supportsMixedMimeTypeAdaptation
(
)
throws
ExoPlaybackException
{
return
ADAPTIVE_NOT_SUPPORTED
;
}
Override
public
void
handleMessage
(
int
what
Nullable
Object
object
)
throws
ExoPlaybackException
{
}
protected
void
onEnabled
(
boolean
joining
)
throws
ExoPlaybackException
{
}
protected
void
onRendererOffsetChanged
(
long
offsetUs
)
throws
ExoPlaybackException
{
}
protected
void
onPositionReset
(
long
positionUs
boolean
joining
)
throws
ExoPlaybackException
{
}
protected
void
onStarted
(
)
throws
ExoPlaybackException
{
}
protected
void
onStopped
(
)
throws
ExoPlaybackException
{
}
protected
void
onDisabled
(
)
{
}
protected
void
onReset
(
)
{
}
Nullable
protected
final
RendererConfiguration
getConfiguration
(
)
{
return
configuration
;
}
protected
final
int
getIndex
(
)
{
return
index
;
}
}
