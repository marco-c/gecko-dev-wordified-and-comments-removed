package
com
.
google
.
android
.
exoplayer2
.
upstream
;
import
com
.
google
.
android
.
exoplayer2
.
C
;
import
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
import
java
.
io
.
ByteArrayOutputStream
;
import
java
.
io
.
IOException
;
public
final
class
ByteArrayDataSink
implements
DataSink
{
private
ByteArrayOutputStream
stream
;
Override
public
void
open
(
DataSpec
dataSpec
)
throws
IOException
{
if
(
dataSpec
.
length
=
=
C
.
LENGTH_UNSET
)
{
stream
=
new
ByteArrayOutputStream
(
)
;
}
else
{
Assertions
.
checkArgument
(
dataSpec
.
length
<
=
Integer
.
MAX_VALUE
)
;
stream
=
new
ByteArrayOutputStream
(
(
int
)
dataSpec
.
length
)
;
}
}
Override
public
void
close
(
)
throws
IOException
{
stream
.
close
(
)
;
}
Override
public
void
write
(
byte
[
]
buffer
int
offset
int
length
)
throws
IOException
{
stream
.
write
(
buffer
offset
length
)
;
}
public
byte
[
]
getData
(
)
{
return
stream
=
=
null
?
null
:
stream
.
toByteArray
(
)
;
}
}
