package
com
.
google
.
android
.
exoplayer2
.
upstream
.
cache
;
import
java
.
io
.
File
;
import
java
.
io
.
IOException
;
import
java
.
util
.
NavigableSet
;
import
java
.
util
.
Set
;
public
interface
Cache
{
interface
Listener
{
void
onSpanAdded
(
Cache
cache
CacheSpan
span
)
;
void
onSpanRemoved
(
Cache
cache
CacheSpan
span
)
;
void
onSpanTouched
(
Cache
cache
CacheSpan
oldSpan
CacheSpan
newSpan
)
;
}
class
CacheException
extends
IOException
{
public
CacheException
(
String
message
)
{
super
(
message
)
;
}
public
CacheException
(
IOException
cause
)
{
super
(
cause
)
;
}
}
NavigableSet
<
CacheSpan
>
addListener
(
String
key
Listener
listener
)
;
void
removeListener
(
String
key
Listener
listener
)
;
NavigableSet
<
CacheSpan
>
getCachedSpans
(
String
key
)
;
Set
<
String
>
getKeys
(
)
;
long
getCacheSpace
(
)
;
CacheSpan
startReadWrite
(
String
key
long
position
)
throws
InterruptedException
CacheException
;
CacheSpan
startReadWriteNonBlocking
(
String
key
long
position
)
throws
CacheException
;
File
startFile
(
String
key
long
position
long
maxLength
)
throws
CacheException
;
void
commitFile
(
File
file
)
throws
CacheException
;
void
releaseHoleSpan
(
CacheSpan
holeSpan
)
;
void
removeSpan
(
CacheSpan
span
)
throws
CacheException
;
boolean
isCached
(
String
key
long
position
long
length
)
;
long
getCachedBytes
(
String
key
long
position
long
length
)
;
void
setContentLength
(
String
key
long
length
)
throws
CacheException
;
long
getContentLength
(
String
key
)
;
}
