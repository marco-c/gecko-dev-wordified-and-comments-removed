package
com
.
google
.
android
.
exoplayer2
.
text
.
subrip
;
import
com
.
google
.
android
.
exoplayer2
.
C
;
import
com
.
google
.
android
.
exoplayer2
.
text
.
Cue
;
import
com
.
google
.
android
.
exoplayer2
.
text
.
Subtitle
;
import
com
.
google
.
android
.
exoplayer2
.
util
.
Assertions
;
import
com
.
google
.
android
.
exoplayer2
.
util
.
Util
;
import
java
.
util
.
Collections
;
import
java
.
util
.
List
;
final
class
SubripSubtitle
implements
Subtitle
{
private
final
Cue
[
]
cues
;
private
final
long
[
]
cueTimesUs
;
public
SubripSubtitle
(
Cue
[
]
cues
long
[
]
cueTimesUs
)
{
this
.
cues
=
cues
;
this
.
cueTimesUs
=
cueTimesUs
;
}
Override
public
int
getNextEventTimeIndex
(
long
timeUs
)
{
int
index
=
Util
.
binarySearchCeil
(
cueTimesUs
timeUs
false
false
)
;
return
index
<
cueTimesUs
.
length
?
index
:
C
.
INDEX_UNSET
;
}
Override
public
int
getEventTimeCount
(
)
{
return
cueTimesUs
.
length
;
}
Override
public
long
getEventTime
(
int
index
)
{
Assertions
.
checkArgument
(
index
>
=
0
)
;
Assertions
.
checkArgument
(
index
<
cueTimesUs
.
length
)
;
return
cueTimesUs
[
index
]
;
}
Override
public
List
<
Cue
>
getCues
(
long
timeUs
)
{
int
index
=
Util
.
binarySearchFloor
(
cueTimesUs
timeUs
true
false
)
;
if
(
index
=
=
-
1
|
|
cues
[
index
]
=
=
null
)
{
return
Collections
.
emptyList
(
)
;
}
else
{
return
Collections
.
singletonList
(
cues
[
index
]
)
;
}
}
}
