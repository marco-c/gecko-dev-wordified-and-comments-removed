package
org
.
mozilla
.
geckoview
.
test
.
rdp
;
import
android
.
support
.
annotation
.
NonNull
;
import
android
.
support
.
annotation
.
Nullable
;
import
org
.
json
.
JSONObject
;
public
final
class
Tab
extends
Actor
{
private
final
ReplyParser
<
Void
>
TAB_STATE_PARSER
=
new
ReplyParser
<
Void
>
(
)
{
Override
public
boolean
canParse
(
NonNull
JSONObject
packet
)
{
return
packet
.
has
(
"
type
"
)
;
}
Override
public
Nullable
Void
parse
(
NonNull
JSONObject
packet
)
{
return
null
;
}
}
;
public
final
String
title
;
public
final
String
url
;
public
final
long
outerWindowID
;
private
final
JSONObject
mTab
;
Tab
(
final
RDPConnection
connection
final
JSONObject
tab
)
{
super
(
connection
tab
)
;
title
=
tab
.
optString
(
"
title
"
null
)
;
url
=
tab
.
optString
(
"
url
"
null
)
;
outerWindowID
=
tab
.
optLong
(
"
outerWindowID
"
-
1
)
;
mTab
=
tab
;
attach
(
)
;
}
private
void
attach
(
)
{
sendPacket
(
"
{
\
"
type
\
"
:
\
"
attach
\
"
}
"
TAB_STATE_PARSER
)
.
get
(
)
;
}
public
void
detach
(
)
{
sendPacket
(
"
{
\
"
type
\
"
:
\
"
detach
\
"
}
"
TAB_STATE_PARSER
)
.
get
(
)
;
}
public
Console
getConsole
(
)
{
final
String
name
=
mTab
.
optString
(
"
consoleActor
"
null
)
;
final
Actor
console
=
connection
.
getActor
(
name
)
;
return
(
console
!
=
null
)
?
(
Console
)
console
:
new
Console
(
connection
name
)
;
}
}
