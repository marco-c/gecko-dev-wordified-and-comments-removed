package
org
.
mozilla
.
geckoview
;
import
android
.
support
.
annotation
.
NonNull
;
import
android
.
util
.
Log
;
import
org
.
mozilla
.
gecko
.
EventDispatcher
;
import
org
.
mozilla
.
gecko
.
util
.
GeckoBundle
;
import
org
.
mozilla
.
gecko
.
util
.
EventCallback
;
public
final
class
RuntimeTelemetry
{
private
final
static
String
LOGTAG
=
"
GeckoViewTelemetry
"
;
private
final
static
boolean
DEBUG
=
false
;
private
final
GeckoRuntime
mRuntime
;
private
final
EventDispatcher
mEventDispatcher
;
RuntimeTelemetry
(
final
NonNull
GeckoRuntime
runtime
)
{
mRuntime
=
runtime
;
mEventDispatcher
=
EventDispatcher
.
getInstance
(
)
;
}
public
void
getSnapshots
(
final
boolean
clear
final
NonNull
GeckoResponse
<
GeckoBundle
>
response
)
{
final
GeckoBundle
msg
=
new
GeckoBundle
(
1
)
;
msg
.
putBoolean
(
"
clear
"
clear
)
;
mEventDispatcher
.
dispatch
(
"
GeckoView
:
TelemetrySnapshots
"
msg
new
EventCallback
(
)
{
Override
public
void
sendSuccess
(
final
Object
result
)
{
response
.
respond
(
(
GeckoBundle
)
result
)
;
}
Override
public
void
sendError
(
final
Object
error
)
{
Log
.
e
(
LOGTAG
"
getSnapshots
failed
:
"
+
error
)
;
response
.
respond
(
null
)
;
}
}
)
;
}
}
