package
org
.
mozilla
.
geckoview
;
import
android
.
os
.
Parcel
;
import
android
.
os
.
ParcelFormatException
;
import
android
.
os
.
Parcelable
;
import
androidx
.
annotation
.
NonNull
;
import
androidx
.
annotation
.
Nullable
;
import
androidx
.
annotation
.
UiThread
;
import
org
.
mozilla
.
gecko
.
GeckoAppShell
;
import
org
.
mozilla
.
gecko
.
annotation
.
WrapForJNI
;
import
org
.
mozilla
.
gecko
.
util
.
ThreadUtils
;
public
class
WebNotification
implements
Parcelable
{
public
final
Nullable
String
title
;
public
final
NonNull
String
tag
;
private
final
Nullable
String
mCookie
;
public
final
Nullable
String
text
;
public
final
Nullable
String
imageUrl
;
public
final
Nullable
String
textDirection
;
public
final
Nullable
String
lang
;
public
final
NonNull
boolean
requireInteraction
;
public
final
Nullable
String
source
;
public
final
boolean
silent
;
public
final
NonNull
int
[
]
vibrate
;
WrapForJNI
WebNotification
(
Nullable
final
String
title
NonNull
final
String
tag
Nullable
final
String
cookie
Nullable
final
String
text
Nullable
final
String
imageUrl
Nullable
final
String
textDirection
Nullable
final
String
lang
NonNull
final
boolean
requireInteraction
NonNull
final
String
source
final
boolean
silent
NonNull
final
int
[
]
vibrate
)
{
this
.
tag
=
tag
;
this
.
mCookie
=
cookie
;
this
.
title
=
title
;
this
.
text
=
text
;
this
.
imageUrl
=
imageUrl
;
this
.
textDirection
=
textDirection
;
this
.
lang
=
lang
;
this
.
requireInteraction
=
requireInteraction
;
this
.
source
=
"
"
.
equals
(
source
)
?
null
:
source
;
this
.
silent
=
silent
;
this
.
vibrate
=
vibrate
;
}
UiThread
public
void
click
(
)
{
ThreadUtils
.
assertOnUiThread
(
)
;
GeckoAppShell
.
onNotificationClick
(
tag
mCookie
)
;
}
UiThread
public
void
dismiss
(
)
{
ThreadUtils
.
assertOnUiThread
(
)
;
GeckoAppShell
.
onNotificationClose
(
tag
mCookie
)
;
}
private
static
final
int
VERSION
=
1
;
private
static
final
int
IMAGE_URL_LENGTH_MAX
=
150
;
Override
public
int
describeContents
(
)
{
return
0
;
}
Override
public
void
writeToParcel
(
final
Parcel
dest
final
int
flags
)
{
dest
.
writeInt
(
VERSION
)
;
dest
.
writeString
(
title
)
;
dest
.
writeString
(
tag
)
;
dest
.
writeString
(
mCookie
)
;
dest
.
writeString
(
text
)
;
if
(
imageUrl
.
length
(
)
<
IMAGE_URL_LENGTH_MAX
)
{
dest
.
writeString
(
imageUrl
)
;
}
else
{
dest
.
writeString
(
null
)
;
}
dest
.
writeString
(
textDirection
)
;
dest
.
writeString
(
lang
)
;
dest
.
writeInt
(
requireInteraction
?
1
:
0
)
;
dest
.
writeString
(
source
)
;
dest
.
writeInt
(
silent
?
1
:
0
)
;
dest
.
writeIntArray
(
vibrate
)
;
}
private
WebNotification
(
final
Parcel
in
)
{
title
=
in
.
readString
(
)
;
tag
=
in
.
readString
(
)
;
mCookie
=
in
.
readString
(
)
;
text
=
in
.
readString
(
)
;
imageUrl
=
in
.
readString
(
)
;
textDirection
=
in
.
readString
(
)
;
lang
=
in
.
readString
(
)
;
requireInteraction
=
in
.
readInt
(
)
=
=
1
;
source
=
in
.
readString
(
)
;
silent
=
in
.
readInt
(
)
=
=
1
;
vibrate
=
in
.
createIntArray
(
)
;
}
public
static
final
Creator
<
WebNotification
>
CREATOR
=
new
Creator
<
>
(
)
{
Override
public
WebNotification
createFromParcel
(
final
Parcel
in
)
{
final
int
version
=
in
.
readInt
(
)
;
if
(
version
!
=
VERSION
)
{
throw
new
ParcelFormatException
(
"
Mismatched
version
:
"
+
version
+
"
expected
:
"
+
VERSION
)
;
}
return
new
WebNotification
(
in
)
;
}
Override
public
WebNotification
[
]
newArray
(
final
int
size
)
{
return
new
WebNotification
[
size
]
;
}
}
;
}
