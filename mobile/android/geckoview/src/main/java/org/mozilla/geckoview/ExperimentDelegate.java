package
org
.
mozilla
.
geckoview
;
import
static
org
.
mozilla
.
geckoview
.
ExperimentDelegate
.
ExperimentException
.
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
;
import
androidx
.
annotation
.
AnyThread
;
import
androidx
.
annotation
.
IntDef
;
import
androidx
.
annotation
.
NonNull
;
import
java
.
lang
.
annotation
.
Retention
;
import
java
.
lang
.
annotation
.
RetentionPolicy
;
import
org
.
json
.
JSONObject
;
public
interface
ExperimentDelegate
{
AnyThread
default
NonNull
GeckoResult
<
JSONObject
>
onGetExperimentFeature
(
NonNull
String
feature
)
{
final
GeckoResult
<
JSONObject
>
result
=
new
GeckoResult
<
>
(
)
;
result
.
completeExceptionally
(
new
ExperimentException
(
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
)
)
;
return
result
;
}
AnyThread
default
NonNull
GeckoResult
<
Void
>
onRecordExposureEvent
(
NonNull
String
feature
)
{
final
GeckoResult
<
Void
>
result
=
new
GeckoResult
<
>
(
)
;
result
.
completeExceptionally
(
new
ExperimentException
(
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
)
)
;
return
result
;
}
AnyThread
default
NonNull
GeckoResult
<
Void
>
onRecordExperimentExposureEvent
(
NonNull
String
feature
NonNull
String
slug
)
{
final
GeckoResult
<
Void
>
result
=
new
GeckoResult
<
>
(
)
;
result
.
completeExceptionally
(
new
ExperimentException
(
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
)
)
;
return
result
;
}
AnyThread
default
NonNull
GeckoResult
<
Void
>
onRecordMalformedConfigurationEvent
(
NonNull
String
feature
NonNull
String
part
)
{
final
GeckoResult
<
Void
>
result
=
new
GeckoResult
<
>
(
)
;
result
.
completeExceptionally
(
new
ExperimentException
(
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
)
)
;
return
result
;
}
class
ExperimentException
extends
Exception
{
public
ExperimentException
(
final
Codes
int
code
)
{
this
.
code
=
code
;
}
public
static
final
int
ERROR_UNKNOWN
=
-
1
;
public
static
final
int
ERROR_FEATURE_NOT_FOUND
=
-
2
;
public
static
final
int
ERROR_EXPERIMENT_SLUG_NOT_FOUND
=
-
3
;
public
static
final
int
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
=
-
4
;
Retention
(
RetentionPolicy
.
SOURCE
)
IntDef
(
value
=
{
ERROR_UNKNOWN
ERROR_FEATURE_NOT_FOUND
ERROR_EXPERIMENT_SLUG_NOT_FOUND
ERROR_EXPERIMENT_DELEGATE_NOT_IMPLEMENTED
}
)
public
interface
Codes
{
}
public
final
Codes
int
code
;
Override
public
String
toString
(
)
{
return
"
ExperimentException
:
"
+
code
;
}
}
}
