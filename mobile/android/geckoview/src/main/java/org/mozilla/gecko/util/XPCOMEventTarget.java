package
org
.
mozilla
.
gecko
.
util
;
import
org
.
mozilla
.
gecko
.
annotation
.
WrapForJNI
;
import
org
.
mozilla
.
gecko
.
mozglue
.
JNIObject
;
WrapForJNI
public
final
class
XPCOMEventTarget
extends
JNIObject
{
public
void
dispatch
(
Runnable
runnable
)
{
dispatchNative
(
new
JNIRunnable
(
runnable
)
)
;
}
public
static
synchronized
XPCOMEventTarget
mainThread
(
)
{
if
(
mMainThread
=
=
null
)
{
mMainThread
=
createWrapper
(
"
main
"
)
;
}
return
mMainThread
;
}
private
static
XPCOMEventTarget
mMainThread
=
null
;
public
static
synchronized
XPCOMEventTarget
launcherThread
(
)
{
if
(
mLauncherThread
=
=
null
)
{
mLauncherThread
=
createWrapper
(
"
launcher
"
)
;
}
return
mLauncherThread
;
}
private
static
XPCOMEventTarget
mLauncherThread
=
null
;
public
native
boolean
isOnCurrentThread
(
)
;
private
native
void
dispatchNative
(
JNIRunnable
runnable
)
;
private
static
native
XPCOMEventTarget
createWrapper
(
String
name
)
;
Override
protected
native
void
disposeNative
(
)
;
WrapForJNI
final
class
JNIRunnable
{
JNIRunnable
(
Runnable
inner
)
{
mInner
=
inner
;
}
WrapForJNI
void
run
(
)
{
mInner
.
run
(
)
;
}
private
Runnable
mInner
;
}
}
