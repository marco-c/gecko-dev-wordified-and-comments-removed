package
org
.
mozilla
.
gecko
;
import
java
.
util
.
concurrent
.
SynchronousQueue
;
import
org
.
mozilla
.
gecko
.
annotation
.
WrapForJNI
;
import
org
.
mozilla
.
gecko
.
util
.
ThreadUtils
;
import
android
.
content
.
ClipboardManager
;
import
android
.
content
.
ClipData
;
import
android
.
content
.
Context
;
import
android
.
text
.
TextUtils
;
public
final
class
Clipboard
{
private
final
static
String
LOGTAG
=
"
GeckoClipboard
"
;
private
Clipboard
(
)
{
}
WrapForJNI
(
calledFrom
=
"
gecko
"
)
public
static
String
getText
(
final
Context
context
)
{
final
ClipboardManager
cm
=
(
ClipboardManager
)
context
.
getSystemService
(
Context
.
CLIPBOARD_SERVICE
)
;
if
(
cm
.
hasPrimaryClip
(
)
)
{
ClipData
clip
=
cm
.
getPrimaryClip
(
)
;
if
(
clip
!
=
null
&
&
clip
.
getItemCount
(
)
>
0
)
{
ClipData
.
Item
item
=
clip
.
getItemAt
(
0
)
;
return
item
.
coerceToText
(
context
)
.
toString
(
)
;
}
}
return
null
;
}
WrapForJNI
(
calledFrom
=
"
gecko
"
)
public
static
void
setText
(
final
Context
context
final
CharSequence
text
)
{
final
ClipboardManager
cm
=
(
ClipboardManager
)
context
.
getSystemService
(
Context
.
CLIPBOARD_SERVICE
)
;
try
{
cm
.
setPrimaryClip
(
ClipData
.
newPlainText
(
"
Text
"
text
)
)
;
}
catch
(
NullPointerException
e
)
{
}
}
WrapForJNI
(
calledFrom
=
"
gecko
"
)
public
static
boolean
hasText
(
final
Context
context
)
{
return
!
TextUtils
.
isEmpty
(
getText
(
context
)
)
;
}
WrapForJNI
(
calledFrom
=
"
gecko
"
)
public
static
void
clearText
(
final
Context
context
)
{
setText
(
context
null
)
;
}
}
