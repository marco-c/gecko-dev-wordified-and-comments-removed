package
org
.
mozilla
.
geckoview
;
import
org
.
mozilla
.
gecko
.
annotation
.
WrapForJNI
;
import
android
.
support
.
annotation
.
AnyThread
;
import
android
.
support
.
annotation
.
NonNull
;
import
android
.
support
.
annotation
.
Nullable
;
import
java
.
io
.
InputStream
;
WrapForJNI
AnyThread
public
class
WebResponse
extends
WebMessage
{
public
static
final
long
DEFAULT_READ_TIMEOUT_MS
=
30000
;
public
final
int
statusCode
;
public
final
boolean
redirected
;
public
final
Nullable
InputStream
body
;
protected
WebResponse
(
final
NonNull
Builder
builder
)
{
super
(
builder
)
;
this
.
statusCode
=
builder
.
mStatusCode
;
this
.
redirected
=
builder
.
mRedirected
;
this
.
body
=
builder
.
mBody
;
this
.
setReadTimeoutMillis
(
DEFAULT_READ_TIMEOUT_MS
)
;
}
public
void
setReadTimeoutMillis
(
final
long
millis
)
{
if
(
this
.
body
!
=
null
&
&
this
.
body
instanceof
GeckoInputStream
)
{
(
(
GeckoInputStream
)
this
.
body
)
.
setReadTimeoutMillis
(
millis
)
;
}
}
WrapForJNI
AnyThread
public
static
class
Builder
extends
WebMessage
.
Builder
{
int
mStatusCode
;
boolean
mRedirected
;
InputStream
mBody
;
public
Builder
(
final
NonNull
String
uri
)
{
super
(
uri
)
;
}
Override
public
NonNull
Builder
uri
(
final
NonNull
String
uri
)
{
super
.
uri
(
uri
)
;
return
this
;
}
Override
public
NonNull
Builder
header
(
final
NonNull
String
key
final
NonNull
String
value
)
{
super
.
header
(
key
value
)
;
return
this
;
}
Override
public
NonNull
Builder
addHeader
(
final
NonNull
String
key
final
NonNull
String
value
)
{
super
.
addHeader
(
key
value
)
;
return
this
;
}
public
NonNull
Builder
body
(
final
NonNull
InputStream
stream
)
{
mBody
=
stream
;
return
this
;
}
public
NonNull
Builder
statusCode
(
final
int
code
)
{
mStatusCode
=
code
;
return
this
;
}
public
NonNull
Builder
redirected
(
final
boolean
redirected
)
{
mRedirected
=
redirected
;
return
this
;
}
public
NonNull
WebResponse
build
(
)
{
return
new
WebResponse
(
this
)
;
}
}
}
