package
org
.
mozilla
.
gecko
;
import
android
.
support
.
v4
.
app
.
Fragment
;
import
android
.
os
.
Bundle
;
import
android
.
os
.
Parcelable
;
import
android
.
util
.
Log
;
import
android
.
util
.
SparseArray
;
import
android
.
view
.
LayoutInflater
;
import
android
.
view
.
View
;
import
android
.
view
.
ViewGroup
;
public
class
GeckoViewFragment
extends
android
.
support
.
v4
.
app
.
Fragment
{
private
static
final
String
LOGTAG
=
"
GeckoViewFragment
"
;
private
static
Parcelable
state
=
null
;
private
static
GeckoViewFragment
lastUsed
=
null
;
private
GeckoView
geckoView
=
null
;
Override
public
void
onCreate
(
Bundle
savedInstanceState
)
{
setRetainInstance
(
true
)
;
super
.
onCreate
(
savedInstanceState
)
;
}
Override
public
View
onCreateView
(
LayoutInflater
inflater
ViewGroup
container
Bundle
savedInstanceState
)
{
geckoView
=
new
GeckoView
(
getContext
(
)
)
;
return
geckoView
;
}
Override
public
void
onResume
(
)
{
if
(
state
!
=
null
&
&
lastUsed
!
=
this
)
{
geckoView
.
onRestoreInstanceState
(
state
)
;
state
=
null
;
}
super
.
onResume
(
)
;
}
Override
public
void
onPause
(
)
{
state
=
geckoView
.
onSaveInstanceState
(
)
;
lastUsed
=
this
;
super
.
onPause
(
)
;
}
}
