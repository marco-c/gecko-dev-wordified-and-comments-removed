package
org
.
mozilla
.
gecko
;
import
android
.
support
.
v4
.
app
.
Fragment
;
import
android
.
os
.
Bundle
;
import
android
.
os
.
Parcelable
;
import
android
.
util
.
Log
;
import
android
.
util
.
SparseArray
;
import
android
.
view
.
LayoutInflater
;
import
android
.
view
.
View
;
import
android
.
view
.
ViewGroup
;
public
class
GeckoViewFragment
extends
android
.
support
.
v4
.
app
.
Fragment
{
private
static
final
String
LOGTAG
=
"
GeckoViewFragment
"
;
private
static
Parcelable
mSavedState
=
null
;
private
static
GeckoViewFragment
mLastUsed
=
null
;
private
GeckoView
mGeckoView
=
null
;
Override
public
void
onCreate
(
Bundle
savedInstanceState
)
{
setRetainInstance
(
true
)
;
super
.
onCreate
(
savedInstanceState
)
;
}
Override
public
View
onCreateView
(
LayoutInflater
inflater
ViewGroup
container
Bundle
savedInstanceState
)
{
mGeckoView
=
new
GeckoView
(
getContext
(
)
)
;
return
mGeckoView
;
}
Override
public
void
onResume
(
)
{
if
(
mSavedState
!
=
null
&
&
mLastUsed
!
=
this
)
{
mGeckoView
.
onRestoreInstanceState
(
mSavedState
)
;
mSavedState
=
null
;
}
super
.
onResume
(
)
;
}
Override
public
void
onPause
(
)
{
mSavedState
=
mGeckoView
.
onSaveInstanceState
(
)
;
mLastUsed
=
this
;
super
.
onPause
(
)
;
}
}
