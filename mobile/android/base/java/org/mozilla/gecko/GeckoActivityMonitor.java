package
org
.
mozilla
.
gecko
;
import
android
.
annotation
.
SuppressLint
;
import
android
.
app
.
Activity
;
import
android
.
app
.
Application
;
import
android
.
os
.
Bundle
;
public
class
GeckoActivityMonitor
implements
Application
.
ActivityLifecycleCallbacks
{
private
static
final
String
LOGTAG
=
"
GeckoActivityMonitor
"
;
SuppressLint
(
"
StaticFieldLeak
"
)
private
static
final
GeckoActivityMonitor
instance
=
new
GeckoActivityMonitor
(
)
;
private
Activity
currentActivity
;
public
static
GeckoActivityMonitor
getInstance
(
)
{
return
instance
;
}
private
GeckoActivityMonitor
(
)
{
}
public
Activity
getCurrentActivity
(
)
{
return
currentActivity
;
}
Override
public
void
onActivityCreated
(
Activity
activity
Bundle
savedInstanceState
)
{
currentActivity
=
activity
;
}
public
void
onActivityNewIntent
(
Activity
activity
)
{
currentActivity
=
activity
;
}
Override
public
void
onActivityStarted
(
Activity
activity
)
{
currentActivity
=
activity
;
}
Override
public
void
onActivityResumed
(
Activity
activity
)
{
currentActivity
=
activity
;
}
Override
public
void
onActivityPaused
(
Activity
activity
)
{
releaseIfCurrentActivity
(
activity
)
;
}
Override
public
void
onActivityStopped
(
Activity
activity
)
{
releaseIfCurrentActivity
(
activity
)
;
}
Override
public
void
onActivitySaveInstanceState
(
Activity
activity
Bundle
outState
)
{
}
Override
public
void
onActivityDestroyed
(
Activity
activity
)
{
releaseIfCurrentActivity
(
activity
)
;
}
private
void
releaseIfCurrentActivity
(
Activity
activity
)
{
if
(
currentActivity
=
=
activity
)
{
currentActivity
=
null
;
}
}
}
