package
org
.
mozilla
.
gecko
.
mma
;
import
android
.
app
.
Application
;
import
android
.
content
.
Context
;
import
org
.
mozilla
.
gecko
.
MmaConstants
;
import
org
.
mozilla
.
gecko
.
PrefsHelper
;
public
class
MmaDelegate
{
private
static
final
String
ENABLE_PREF
=
"
mma
.
enabled
"
;
private
static
MmaInterface
mmaHelper
=
MmaConstants
.
getMma
(
)
;
private
static
final
String
[
]
prefs
=
{
ENABLE_PREF
}
;
public
static
void
init
(
Application
application
)
{
setupPrefHandler
(
application
)
;
}
public
static
void
stop
(
)
{
mmaHelper
.
stop
(
)
;
}
private
static
void
setupPrefHandler
(
final
Application
application
)
{
PrefsHelper
.
PrefHandler
handler
=
new
PrefsHelper
.
PrefHandlerBase
(
)
{
Override
public
void
prefValue
(
String
pref
boolean
value
)
{
if
(
pref
.
equals
(
ENABLE_PREF
)
)
{
if
(
value
)
{
mmaHelper
.
init
(
application
)
;
}
else
{
mmaHelper
.
stop
(
)
;
}
}
}
}
;
PrefsHelper
.
addObserver
(
prefs
handler
)
;
}
}
