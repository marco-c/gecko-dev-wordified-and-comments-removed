package
org
.
mozilla
.
gecko
.
home
.
activitystream
.
model
;
import
android
.
database
.
Cursor
;
import
android
.
support
.
annotation
.
Nullable
;
import
android
.
text
.
format
.
DateUtils
;
import
org
.
mozilla
.
gecko
.
activitystream
.
Utils
;
import
org
.
mozilla
.
gecko
.
db
.
BrowserContract
;
public
class
Highlight
{
private
final
String
title
;
private
final
String
url
;
private
final
Utils
.
HighlightSource
source
;
private
final
long
time
;
private
Metadata
metadata
;
private
Nullable
Boolean
isPinned
;
private
Nullable
Boolean
isBookmarked
;
public
static
Highlight
fromCursor
(
Cursor
cursor
)
{
return
new
Highlight
(
cursor
)
;
}
private
Highlight
(
Cursor
cursor
)
{
title
=
cursor
.
getString
(
cursor
.
getColumnIndexOrThrow
(
BrowserContract
.
History
.
TITLE
)
)
;
url
=
cursor
.
getString
(
cursor
.
getColumnIndexOrThrow
(
BrowserContract
.
Combined
.
URL
)
)
;
source
=
Utils
.
highlightSource
(
cursor
)
;
time
=
cursor
.
getLong
(
cursor
.
getColumnIndexOrThrow
(
BrowserContract
.
Highlights
.
DATE
)
)
;
metadata
=
Metadata
.
fromCursor
(
cursor
)
;
updateState
(
)
;
}
private
void
updateState
(
)
{
switch
(
source
)
{
case
BOOKMARKED
:
isBookmarked
=
true
;
isPinned
=
null
;
break
;
case
VISITED
:
isBookmarked
=
null
;
isPinned
=
null
;
break
;
default
:
throw
new
IllegalArgumentException
(
"
Unknown
source
:
"
+
source
)
;
}
}
public
String
getTitle
(
)
{
return
title
;
}
public
String
getUrl
(
)
{
return
url
;
}
public
Metadata
getMetadata
(
)
{
return
metadata
;
}
public
Boolean
isBookmarked
(
)
{
return
isBookmarked
;
}
public
Boolean
isPinned
(
)
{
return
isPinned
;
}
public
String
getRelativeTimeSpan
(
)
{
return
DateUtils
.
getRelativeTimeSpanString
(
time
System
.
currentTimeMillis
(
)
DateUtils
.
MINUTE_IN_MILLIS
0
)
.
toString
(
)
;
}
public
Utils
.
HighlightSource
getSource
(
)
{
return
source
;
}
}
