package
org
.
mozilla
.
gecko
.
updater
;
import
android
.
content
.
Intent
;
import
android
.
support
.
annotation
.
NonNull
;
import
org
.
mozilla
.
gecko
.
updater
.
UpdateServiceHelper
.
AutoDownloadPolicy
;
public
class
UpdatesRegisterService
extends
UpdaterService
{
Override
protected
void
onHandleWork
(
NonNull
Intent
intent
)
{
AutoDownloadPolicy
policy
=
AutoDownloadPolicy
.
get
(
intent
.
getIntExtra
(
UpdateServiceHelper
.
EXTRA_AUTODOWNLOAD_NAME
AutoDownloadPolicy
.
NONE
.
value
)
)
;
if
(
policy
!
=
AutoDownloadPolicy
.
NONE
)
{
prefs
.
setAutoDownloadPolicy
(
policy
)
;
}
String
url
=
intent
.
getStringExtra
(
UpdateServiceHelper
.
EXTRA_UPDATE_URL_NAME
)
;
if
(
url
!
=
null
)
{
prefs
.
setUpdateUrl
(
url
)
;
}
updater
.
registerForUpdates
(
false
)
;
}
}
