package
org
.
mozilla
.
gecko
.
prompts
;
import
org
.
mozilla
.
gecko
.
EventDispatcher
;
import
org
.
mozilla
.
gecko
.
GeckoApp
;
import
org
.
mozilla
.
gecko
.
GeckoAppShell
;
import
org
.
mozilla
.
gecko
.
util
.
BundleEventListener
;
import
org
.
mozilla
.
gecko
.
util
.
EventCallback
;
import
org
.
mozilla
.
gecko
.
util
.
GeckoBundle
;
import
org
.
mozilla
.
gecko
.
util
.
ThreadUtils
;
import
android
.
content
.
Context
;
import
android
.
util
.
Log
;
public
class
PromptService
implements
BundleEventListener
{
private
static
final
String
LOGTAG
=
"
GeckoPromptService
"
;
private
final
GeckoApp
mGeckoApp
;
public
PromptService
(
GeckoApp
geckoApp
)
{
mGeckoApp
=
geckoApp
;
mGeckoApp
.
getAppEventDispatcher
(
)
.
registerUiThreadListener
(
this
"
Prompt
:
Show
"
"
Prompt
:
ShowTop
"
)
;
}
public
void
destroy
(
)
{
mGeckoApp
.
getAppEventDispatcher
(
)
.
unregisterUiThreadListener
(
this
"
Prompt
:
Show
"
"
Prompt
:
ShowTop
"
)
;
}
Override
public
void
handleMessage
(
final
String
event
final
GeckoBundle
message
final
EventCallback
callback
)
{
Prompt
p
;
p
=
new
Prompt
(
mGeckoApp
new
Prompt
.
PromptCallback
(
)
{
Override
public
void
onPromptFinished
(
final
GeckoBundle
result
)
{
callback
.
sendSuccess
(
result
)
;
}
}
)
;
p
.
show
(
message
)
;
}
}
