package
org
.
mozilla
.
gecko
.
activitystream
;
import
android
.
content
.
Context
;
import
android
.
content
.
Intent
;
import
android
.
preference
.
SwitchPreference
;
import
android
.
util
.
AttributeSet
;
import
org
.
mozilla
.
gecko
.
AppConstants
;
import
org
.
mozilla
.
gecko
.
GeckoApplication
;
import
org
.
mozilla
.
gecko
.
util
.
ThreadUtils
;
public
class
ActivityStreamPreference
extends
SwitchPreference
{
SuppressWarnings
(
"
unused
"
)
public
ActivityStreamPreference
(
Context
context
AttributeSet
attrs
int
defStyleAttr
int
defStyleRes
)
{
super
(
context
attrs
defStyleAttr
defStyleRes
)
;
init
(
context
)
;
}
SuppressWarnings
(
"
unused
"
)
public
ActivityStreamPreference
(
Context
context
AttributeSet
attrs
int
defStyleAttr
)
{
super
(
context
attrs
defStyleAttr
)
;
init
(
context
)
;
}
SuppressWarnings
(
"
unused
"
)
public
ActivityStreamPreference
(
Context
context
AttributeSet
attrs
)
{
super
(
context
attrs
)
;
init
(
context
)
;
}
SuppressWarnings
(
"
unused
"
)
public
ActivityStreamPreference
(
Context
context
)
{
super
(
context
)
;
init
(
context
)
;
}
private
void
init
(
Context
context
)
{
setPersistent
(
false
)
;
setChecked
(
ActivityStream
.
isEnabled
(
context
)
)
;
}
Override
public
boolean
isPersistent
(
)
{
return
false
;
}
Override
protected
void
onClick
(
)
{
super
.
onClick
(
)
;
ActivityStream
.
setUserEnabled
(
getContext
(
)
isChecked
(
)
)
;
ThreadUtils
.
postDelayedToUiThread
(
new
Runnable
(
)
{
Override
public
void
run
(
)
{
final
Intent
restartIntent
=
new
Intent
(
Intent
.
ACTION_MAIN
)
;
restartIntent
.
setClassName
(
getContext
(
)
.
getApplicationContext
(
)
AppConstants
.
MOZ_ANDROID_BROWSER_INTENT_CLASS
)
;
GeckoApplication
.
shutdown
(
restartIntent
)
;
}
}
1000
)
;
}
}
