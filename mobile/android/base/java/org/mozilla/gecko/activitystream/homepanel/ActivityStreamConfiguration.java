package
org
.
mozilla
.
gecko
.
activitystream
.
homepanel
;
import
android
.
content
.
Context
;
import
android
.
support
.
annotation
.
VisibleForTesting
;
import
org
.
mozilla
.
gecko
.
BrowserLocaleManager
;
import
org
.
mozilla
.
gecko
.
Locales
;
import
java
.
util
.
Collections
;
import
java
.
util
.
HashSet
;
import
java
.
util
.
Locale
;
import
java
.
util
.
Set
;
public
class
ActivityStreamConfiguration
{
private
static
final
Set
<
Locale
>
pocketEnabledLocales
;
VisibleForTesting
static
final
String
[
]
pocketEnabledLocaleTags
=
new
String
[
]
{
"
de
"
"
de
-
AT
"
"
de
-
CH
"
"
de
-
DE
"
"
en
-
GB
"
"
en
-
US
"
"
en
-
ZA
"
}
;
static
{
final
Set
<
Locale
>
mutableEnabledLocales
=
new
HashSet
<
>
(
)
;
for
(
final
String
enabledLocaleTag
:
pocketEnabledLocaleTags
)
{
mutableEnabledLocales
.
add
(
Locales
.
parseLocaleCode
(
enabledLocaleTag
)
)
;
}
pocketEnabledLocales
=
Collections
.
unmodifiableSet
(
mutableEnabledLocales
)
;
}
private
ActivityStreamConfiguration
(
)
{
}
public
static
boolean
isPocketEnabledByLocale
(
final
Context
context
)
{
final
Locale
currentLocale
;
final
Locale
userOverriddenLocale
=
BrowserLocaleManager
.
getInstance
(
)
.
getCurrentLocale
(
context
)
;
if
(
userOverriddenLocale
!
=
null
)
{
currentLocale
=
userOverriddenLocale
;
}
else
{
currentLocale
=
context
.
getResources
(
)
.
getConfiguration
(
)
.
locale
;
}
return
isPocketEnabledByLocaleInner
(
currentLocale
)
;
}
VisibleForTesting
static
boolean
isPocketEnabledByLocaleInner
(
final
Locale
locale
)
{
return
pocketEnabledLocales
.
contains
(
locale
)
;
}
}
