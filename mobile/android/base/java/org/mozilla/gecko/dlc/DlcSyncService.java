package
org
.
mozilla
.
gecko
.
dlc
;
import
android
.
content
.
Context
;
import
android
.
content
.
Intent
;
import
android
.
support
.
annotation
.
NonNull
;
import
android
.
support
.
v4
.
app
.
JobIntentService
;
import
org
.
mozilla
.
gecko
.
JobIdsConstants
;
import
org
.
mozilla
.
gecko
.
dlc
.
catalog
.
DownloadContentCatalog
;
public
class
DlcSyncService
extends
JobIntentService
{
private
static
final
String
LOGTAG
=
"
GeckoDlcSyncService
"
;
Override
protected
void
onHandleWork
(
NonNull
Intent
intent
)
{
if
(
!
DlcHelper
.
isDlcPossible
(
LOGTAG
)
)
{
return
;
}
final
DownloadContentCatalog
catalog
=
new
DownloadContentCatalog
(
this
)
;
new
SyncAction
(
)
.
perform
(
this
catalog
)
;
catalog
.
persistChanges
(
)
;
new
VerifyAction
(
)
.
perform
(
this
catalog
)
;
catalog
.
persistChanges
(
)
;
}
public
static
void
enqueueServiceWork
(
NonNull
final
Context
context
)
{
enqueueWork
(
context
DlcSyncService
.
class
JobIdsConstants
.
getIdForDlcSynchronizeJob
(
)
new
Intent
(
)
)
;
}
}
