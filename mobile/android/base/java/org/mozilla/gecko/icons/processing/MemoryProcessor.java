package
org
.
mozilla
.
gecko
.
icons
.
processing
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
icons
.
IconResponse
;
import
org
.
mozilla
.
gecko
.
icons
.
storage
.
MemoryStorage
;
public
class
MemoryProcessor
implements
Processor
{
private
final
MemoryStorage
storage
;
public
MemoryProcessor
(
)
{
storage
=
MemoryStorage
.
get
(
)
;
}
Override
public
void
process
(
IconRequest
request
IconResponse
response
)
{
if
(
request
.
shouldSkipMemory
(
)
|
|
request
.
getIconCount
(
)
=
=
0
|
|
response
.
isGenerated
(
)
)
{
return
;
}
final
String
iconUrl
=
request
.
getBestIcon
(
)
.
getUrl
(
)
;
if
(
iconUrl
.
startsWith
(
"
data
:
image
/
"
)
)
{
return
;
}
storage
.
putMapping
(
request
iconUrl
)
;
storage
.
putIcon
(
iconUrl
response
)
;
}
}
