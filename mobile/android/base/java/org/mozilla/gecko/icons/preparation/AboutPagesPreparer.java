package
org
.
mozilla
.
gecko
.
icons
.
preparation
;
import
org
.
mozilla
.
gecko
.
AboutPages
;
import
org
.
mozilla
.
gecko
.
icons
.
IconDescriptor
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
util
.
GeckoJarReader
;
import
java
.
util
.
Collections
;
import
java
.
util
.
HashSet
;
import
java
.
util
.
Set
;
public
class
AboutPagesPreparer
implements
Preparer
{
private
Set
<
String
>
aboutUrls
;
public
AboutPagesPreparer
(
)
{
aboutUrls
=
new
HashSet
<
>
(
AboutPages
.
DEFAULT_ICON_PAGES
)
;
}
Override
public
void
prepare
(
IconRequest
request
)
{
if
(
aboutUrls
.
contains
(
request
.
getPageUrl
(
)
)
)
{
final
String
iconUrl
=
GeckoJarReader
.
getJarURL
(
request
.
getContext
(
)
"
chrome
/
chrome
/
content
/
branding
/
favicon64
.
png
"
)
;
request
.
modify
(
)
.
icon
(
IconDescriptor
.
createLookupIcon
(
iconUrl
)
)
.
deferBuild
(
)
;
}
}
}
