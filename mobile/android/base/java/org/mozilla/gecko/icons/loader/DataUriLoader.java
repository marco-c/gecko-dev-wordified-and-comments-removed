package
org
.
mozilla
.
gecko
.
icons
.
loader
;
import
org
.
mozilla
.
gecko
.
favicons
.
decoders
.
FaviconDecoder
;
import
org
.
mozilla
.
gecko
.
favicons
.
decoders
.
LoadFaviconResult
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
icons
.
IconResponse
;
public
class
DataUriLoader
implements
IconLoader
{
Override
public
IconResponse
load
(
IconRequest
request
)
{
final
String
iconUrl
=
request
.
getBestIcon
(
)
.
getUrl
(
)
;
if
(
!
iconUrl
.
startsWith
(
"
data
:
image
/
"
)
)
{
return
null
;
}
LoadFaviconResult
loadFaviconResult
=
FaviconDecoder
.
decodeDataURI
(
request
.
getContext
(
)
iconUrl
)
;
if
(
loadFaviconResult
=
=
null
)
{
return
null
;
}
return
IconResponse
.
create
(
loadFaviconResult
.
getBestBitmap
(
request
.
getTargetSize
(
)
)
)
;
}
}
