package
org
.
mozilla
.
gecko
.
icons
.
preparation
;
import
org
.
mozilla
.
gecko
.
icons
.
IconDescriptor
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
icons
.
storage
.
FailureCache
;
import
java
.
util
.
Iterator
;
public
class
FilterKnownFailureUrls
implements
Preparer
{
Override
public
void
prepare
(
IconRequest
request
)
{
final
FailureCache
failureCache
=
FailureCache
.
get
(
)
;
final
Iterator
<
IconDescriptor
>
iterator
=
request
.
getIconIterator
(
)
;
while
(
iterator
.
hasNext
(
)
)
{
final
IconDescriptor
descriptor
=
iterator
.
next
(
)
;
if
(
failureCache
.
isKnownFailure
(
descriptor
.
getUrl
(
)
)
)
{
iterator
.
remove
(
)
;
}
}
}
}
