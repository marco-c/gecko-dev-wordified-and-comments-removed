package
org
.
mozilla
.
gecko
.
icons
.
preparation
;
import
android
.
text
.
TextUtils
;
import
org
.
mozilla
.
gecko
.
icons
.
IconDescriptor
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
icons
.
IconsHelper
;
import
java
.
util
.
Iterator
;
public
class
FilterMimeTypes
implements
Preparer
{
Override
public
void
prepare
(
IconRequest
request
)
{
final
Iterator
<
IconDescriptor
>
iterator
=
request
.
getIconIterator
(
)
;
while
(
iterator
.
hasNext
(
)
)
{
final
IconDescriptor
descriptor
=
iterator
.
next
(
)
;
final
String
mimeType
=
descriptor
.
getMimeType
(
)
;
if
(
TextUtils
.
isEmpty
(
mimeType
)
)
{
return
;
}
if
(
!
IconsHelper
.
canDecodeType
(
mimeType
)
)
{
iterator
.
remove
(
)
;
}
}
}
}
