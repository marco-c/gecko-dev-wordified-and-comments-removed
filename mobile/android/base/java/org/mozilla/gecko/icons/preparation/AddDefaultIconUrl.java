package
org
.
mozilla
.
gecko
.
icons
.
preparation
;
import
android
.
text
.
TextUtils
;
import
org
.
mozilla
.
gecko
.
icons
.
IconDescriptor
;
import
org
.
mozilla
.
gecko
.
icons
.
IconRequest
;
import
org
.
mozilla
.
gecko
.
icons
.
IconsHelper
;
import
org
.
mozilla
.
gecko
.
util
.
StringUtils
;
public
class
AddDefaultIconUrl
implements
Preparer
{
Override
public
void
prepare
(
IconRequest
request
)
{
if
(
!
StringUtils
.
isHttpOrHttps
(
request
.
getPageUrl
(
)
)
)
{
return
;
}
final
String
defaultFaviconUrl
=
IconsHelper
.
guessDefaultFaviconURL
(
request
.
getPageUrl
(
)
)
;
if
(
TextUtils
.
isEmpty
(
defaultFaviconUrl
)
)
{
return
;
}
request
.
modify
(
)
.
icon
(
IconDescriptor
.
createGenericIcon
(
defaultFaviconUrl
)
)
.
deferBuild
(
)
;
}
}
