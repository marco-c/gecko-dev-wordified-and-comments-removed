package
org
.
mozilla
.
gecko
;
import
android
.
app
.
Activity
;
import
android
.
content
.
Intent
;
import
android
.
os
.
Bundle
;
import
android
.
text
.
TextUtils
;
import
org
.
mozilla
.
gecko
.
db
.
BrowserContract
;
import
org
.
mozilla
.
gecko
.
tabqueue
.
TabQueueHelper
;
import
org
.
mozilla
.
gecko
.
tabqueue
.
TabQueueService
;
public
class
LauncherActivity
extends
Activity
{
Override
protected
void
onCreate
(
Bundle
savedInstanceState
)
{
super
.
onCreate
(
savedInstanceState
)
;
GeckoAppShell
.
ensureCrashHandling
(
)
;
if
(
isViewIntent
(
)
)
{
dispatchViewIntent
(
)
;
}
else
{
dispatchNormalIntent
(
)
;
}
finish
(
)
;
}
private
void
dispatchViewIntent
(
)
{
if
(
TabQueueHelper
.
TAB_QUEUE_ENABLED
&
&
TabQueueHelper
.
isTabQueueEnabled
(
this
)
&
&
!
getIntent
(
)
.
getBooleanExtra
(
BrowserContract
.
SKIP_TAB_QUEUE_FLAG
false
)
)
{
dispatchTabQueueIntent
(
)
;
}
else
{
dispatchNormalIntent
(
)
;
}
}
private
void
dispatchTabQueueIntent
(
)
{
Intent
intent
=
new
Intent
(
getIntent
(
)
)
;
intent
.
setClass
(
getApplicationContext
(
)
TabQueueService
.
class
)
;
startService
(
intent
)
;
}
private
void
dispatchNormalIntent
(
)
{
Intent
intent
=
new
Intent
(
getIntent
(
)
)
;
intent
.
setClassName
(
getApplicationContext
(
)
AppConstants
.
MOZ_ANDROID_BROWSER_INTENT_CLASS
)
;
startActivity
(
intent
)
;
}
private
boolean
isViewIntent
(
)
{
final
String
action
=
getIntent
(
)
.
getAction
(
)
;
return
Intent
.
ACTION_VIEW
.
equals
(
action
)
;
}
}
