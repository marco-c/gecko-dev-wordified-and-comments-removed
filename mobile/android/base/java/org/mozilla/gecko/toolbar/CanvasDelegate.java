package
org
.
mozilla
.
gecko
.
toolbar
;
import
org
.
mozilla
.
gecko
.
AppConstants
.
Versions
;
import
android
.
graphics
.
Bitmap
;
import
android
.
graphics
.
Canvas
;
import
android
.
graphics
.
Paint
;
import
android
.
graphics
.
Path
;
import
android
.
graphics
.
PorterDuff
.
Mode
;
import
android
.
graphics
.
PorterDuffXfermode
;
import
android
.
graphics
.
Shader
;
class
CanvasDelegate
{
Paint
mPaint
;
PorterDuffXfermode
mMode
;
DrawManager
mDrawManager
;
static
interface
DrawManager
{
public
void
defaultDraw
(
Canvas
canvas
)
;
}
CanvasDelegate
(
DrawManager
drawManager
Mode
mode
Paint
paint
)
{
mDrawManager
=
drawManager
;
mMode
=
new
PorterDuffXfermode
(
mode
)
;
mPaint
=
paint
;
}
void
draw
(
Canvas
canvas
Path
path
int
width
int
height
)
{
int
count
=
canvas
.
saveLayer
(
0
0
width
height
null
Canvas
.
MATRIX_SAVE_FLAG
|
Canvas
.
CLIP_SAVE_FLAG
|
Canvas
.
HAS_ALPHA_LAYER_SAVE_FLAG
|
Canvas
.
FULL_COLOR_LAYER_SAVE_FLAG
|
Canvas
.
CLIP_TO_LAYER_SAVE_FLAG
)
;
mDrawManager
.
defaultDraw
(
canvas
)
;
if
(
path
!
=
null
&
&
!
path
.
isEmpty
(
)
)
{
mPaint
.
setXfermode
(
mMode
)
;
canvas
.
drawPath
(
path
mPaint
)
;
}
canvas
.
restoreToCount
(
count
)
;
}
void
setShader
(
Shader
shader
)
{
mPaint
.
setShader
(
shader
)
;
}
}
