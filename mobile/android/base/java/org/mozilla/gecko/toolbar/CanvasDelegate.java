package
org
.
mozilla
.
gecko
.
toolbar
;
import
org
.
mozilla
.
gecko
.
AppConstants
.
Versions
;
import
android
.
graphics
.
Bitmap
;
import
android
.
graphics
.
Canvas
;
import
android
.
graphics
.
Color
;
import
android
.
graphics
.
Paint
;
import
android
.
graphics
.
Path
;
import
android
.
graphics
.
PorterDuff
.
Mode
;
import
android
.
graphics
.
PorterDuffXfermode
;
import
android
.
graphics
.
Shader
;
class
CanvasDelegate
{
Paint
mPaint
;
PorterDuffXfermode
mMode
;
DrawManager
mDrawManager
;
static
interface
DrawManager
{
public
void
defaultDraw
(
Canvas
canvas
)
;
}
CanvasDelegate
(
DrawManager
drawManager
Mode
mode
Paint
paint
)
{
mDrawManager
=
drawManager
;
mMode
=
new
PorterDuffXfermode
(
mode
)
;
mPaint
=
paint
;
}
void
draw
(
Canvas
canvas
Path
path
int
width
int
height
)
{
if
(
width
<
=
0
|
|
height
<
=
0
)
{
return
;
}
Bitmap
offscreen
=
Bitmap
.
createBitmap
(
width
height
Bitmap
.
Config
.
ARGB_8888
)
;
Canvas
offscreenCanvas
=
new
Canvas
(
offscreen
)
;
mDrawManager
.
defaultDraw
(
offscreenCanvas
)
;
if
(
path
!
=
null
&
&
!
path
.
isEmpty
(
)
)
{
mPaint
.
setXfermode
(
mMode
)
;
offscreenCanvas
.
drawPath
(
path
mPaint
)
;
}
offscreen
.
prepareToDraw
(
)
;
canvas
.
drawBitmap
(
offscreen
0
0
null
)
;
}
void
setShader
(
Shader
shader
)
{
mPaint
.
setShader
(
shader
)
;
}
}
