package
org
.
mozilla
.
gecko
.
preferences
;
import
android
.
content
.
Context
;
import
android
.
content
.
Intent
;
import
android
.
util
.
AttributeSet
;
import
android
.
widget
.
Toast
;
import
org
.
mozilla
.
gecko
.
AppConstants
;
import
org
.
mozilla
.
gecko
.
R
;
import
org
.
mozilla
.
gecko
.
util
.
PackageUtil
;
public
class
DefaultBrowserPreference
extends
LinkPreference
{
public
DefaultBrowserPreference
(
Context
context
AttributeSet
attrs
)
{
super
(
context
attrs
)
;
}
public
DefaultBrowserPreference
(
Context
context
AttributeSet
attrs
int
defStyle
)
{
super
(
context
attrs
defStyle
)
;
}
Override
protected
void
onClick
(
)
{
if
(
GeckoPreferences
.
PREFS_DEFAULT_BROWSER
.
equals
(
getKey
(
)
)
&
&
AppConstants
.
Versions
.
feature24Plus
)
{
if
(
PackageUtil
.
isNoDefaultBrowserSet
(
this
.
getContext
(
)
)
)
{
PackageUtil
.
showInstalledBrowsers
(
this
.
getContext
(
)
)
;
}
else
if
(
!
PackageUtil
.
isDefaultBrowser
(
this
.
getContext
(
)
)
)
{
Toast
.
makeText
(
this
.
getContext
(
)
this
.
getContext
(
)
.
getString
(
R
.
string
.
default_browser_system_settings_toast
)
Toast
.
LENGTH_LONG
)
.
show
(
)
;
Intent
changeDefaultApps
=
new
Intent
(
"
android
.
settings
.
MANAGE_DEFAULT_APPS_SETTINGS
"
)
;
getContext
(
)
.
startActivity
(
changeDefaultApps
)
;
}
}
else
{
super
.
onClick
(
)
;
}
}
}
