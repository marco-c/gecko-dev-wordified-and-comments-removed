package
com
.
leanplum
;
import
android
.
os
.
Build
;
import
com
.
google
.
android
.
gms
.
iid
.
InstanceIDListenerService
;
import
com
.
leanplum
.
internal
.
Log
;
public
class
LeanplumPushInstanceIDService
extends
InstanceIDListenerService
{
Override
public
void
onTokenRefresh
(
)
{
try
{
if
(
Build
.
VERSION
.
SDK_INT
<
26
)
{
LeanplumNotificationHelper
.
startPushRegistrationService
(
this
"
GCM
"
)
;
}
else
{
LeanplumNotificationHelper
.
scheduleJobService
(
this
LeanplumGcmRegistrationJobService
.
class
LeanplumGcmRegistrationJobService
.
JOB_ID
)
;
}
}
catch
(
Throwable
t
)
{
Log
.
e
(
"
Failed
to
update
GCM
token
.
"
t
)
;
}
}
}
