package
com
.
leanplum
;
import
android
.
content
.
BroadcastReceiver
;
import
android
.
content
.
Context
;
import
android
.
content
.
Intent
;
import
com
.
leanplum
.
internal
.
Constants
;
import
com
.
leanplum
.
internal
.
LeanplumManifestHelper
;
import
com
.
leanplum
.
internal
.
Log
;
import
com
.
leanplum
.
internal
.
Util
;
public
class
LeanplumPushReceiver
extends
BroadcastReceiver
{
Override
public
void
onReceive
(
Context
context
Intent
intent
)
{
try
{
if
(
intent
=
=
null
)
{
Log
.
e
(
"
Received
a
null
intent
.
"
)
;
return
;
}
String
receiver
=
LeanplumManifestHelper
.
parseNotificationMetadata
(
)
;
if
(
receiver
=
=
null
)
{
Log
.
d
(
"
Custom
broadcast
receiver
class
not
set
using
default
one
.
"
)
;
LeanplumPushService
.
openNotification
(
context
intent
)
;
}
else
{
Log
.
d
(
"
Custom
broadcast
receiver
class
found
using
it
to
handle
push
notifications
.
"
)
;
Intent
forwardIntent
=
new
Intent
(
)
;
forwardIntent
.
setAction
(
LeanplumPushService
.
LEANPLUM_NOTIFICATION
)
;
forwardIntent
.
setClassName
(
context
receiver
)
;
forwardIntent
.
putExtras
(
intent
.
getExtras
(
)
)
;
context
.
sendBroadcast
(
forwardIntent
)
;
}
}
catch
(
Throwable
t
)
{
Util
.
handleException
(
t
)
;
}
Leanplum
.
countAggregator
(
)
.
incrementCount
(
"
did_receive_remote_notification
"
)
;
}
}
