package
com
.
leanplum
.
messagetemplates
;
import
android
.
app
.
Activity
;
import
android
.
content
.
Context
;
import
com
.
leanplum
.
ActionContext
;
import
com
.
leanplum
.
Leanplum
;
import
com
.
leanplum
.
LeanplumActivityHelper
;
import
com
.
leanplum
.
callbacks
.
ActionCallback
;
import
com
.
leanplum
.
callbacks
.
PostponableAction
;
public
class
WebInterstitial
extends
BaseMessageDialog
{
private
static
final
String
NAME
=
"
Web
Interstitial
"
;
public
WebInterstitial
(
Activity
activity
WebInterstitialOptions
options
)
{
super
(
activity
true
null
options
null
)
;
this
.
webOptions
=
options
;
}
public
static
void
register
(
)
{
Leanplum
.
defineAction
(
NAME
Leanplum
.
ACTION_KIND_MESSAGE
|
Leanplum
.
ACTION_KIND_ACTION
WebInterstitialOptions
.
toArgs
(
)
new
ActionCallback
(
)
{
Override
public
boolean
onResponse
(
final
ActionContext
context
)
{
LeanplumActivityHelper
.
queueActionUponActive
(
new
PostponableAction
(
)
{
Override
public
void
run
(
)
{
Activity
activity
=
LeanplumActivityHelper
.
getCurrentActivity
(
)
;
if
(
activity
=
=
null
)
{
return
;
}
WebInterstitial
webInterstitial
=
new
WebInterstitial
(
activity
new
WebInterstitialOptions
(
context
)
)
;
if
(
!
activity
.
isFinishing
(
)
)
{
webInterstitial
.
show
(
)
;
}
}
}
)
;
return
true
;
}
}
)
;
}
}
