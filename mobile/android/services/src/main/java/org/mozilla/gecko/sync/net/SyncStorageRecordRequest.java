package
org
.
mozilla
.
gecko
.
sync
.
net
;
import
org
.
json
.
simple
.
JSONArray
;
import
org
.
json
.
simple
.
JSONObject
;
import
org
.
mozilla
.
gecko
.
sync
.
CryptoRecord
;
import
java
.
io
.
UnsupportedEncodingException
;
import
java
.
net
.
URI
;
import
java
.
net
.
URISyntaxException
;
public
class
SyncStorageRecordRequest
extends
SyncStorageRequest
{
public
class
SyncStorageRecordResourceDelegate
extends
SyncStorageResourceDelegate
{
SyncStorageRecordResourceDelegate
(
SyncStorageRequest
request
)
{
super
(
request
)
;
}
}
public
SyncStorageRecordRequest
(
URI
uri
)
{
super
(
uri
)
;
}
public
SyncStorageRecordRequest
(
String
url
)
throws
URISyntaxException
{
this
(
new
URI
(
url
)
)
;
}
Override
protected
BaseResourceDelegate
makeResourceDelegate
(
SyncStorageRequest
request
)
{
return
new
SyncStorageRecordResourceDelegate
(
request
)
;
}
SuppressWarnings
(
"
unchecked
"
)
public
void
post
(
JSONObject
body
)
{
final
JSONArray
toPOST
=
new
JSONArray
(
)
;
toPOST
.
add
(
body
)
;
try
{
this
.
resource
.
post
(
toPOST
)
;
}
catch
(
UnsupportedEncodingException
e
)
{
this
.
delegate
.
handleRequestError
(
e
)
;
}
}
public
void
post
(
JSONArray
body
)
{
try
{
this
.
resource
.
post
(
body
)
;
}
catch
(
UnsupportedEncodingException
e
)
{
this
.
delegate
.
handleRequestError
(
e
)
;
}
}
public
void
put
(
JSONObject
body
)
{
try
{
this
.
resource
.
put
(
body
)
;
}
catch
(
UnsupportedEncodingException
e
)
{
this
.
delegate
.
handleRequestError
(
e
)
;
}
}
public
void
post
(
CryptoRecord
record
)
{
this
.
post
(
record
.
toJSONObject
(
)
)
;
}
public
void
put
(
CryptoRecord
record
)
{
this
.
put
(
record
.
toJSONObject
(
)
)
;
}
}
