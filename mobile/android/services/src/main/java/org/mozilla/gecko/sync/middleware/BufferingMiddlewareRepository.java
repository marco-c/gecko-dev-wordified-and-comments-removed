package
org
.
mozilla
.
gecko
.
sync
.
middleware
;
import
android
.
content
.
Context
;
import
org
.
mozilla
.
gecko
.
sync
.
SessionCreateException
;
import
org
.
mozilla
.
gecko
.
sync
.
middleware
.
storage
.
BufferStorage
;
import
org
.
mozilla
.
gecko
.
sync
.
repositories
.
Repository
;
import
org
.
mozilla
.
gecko
.
sync
.
repositories
.
RepositorySession
;
public
class
BufferingMiddlewareRepository
extends
Repository
{
private
final
long
syncDeadline
;
private
final
Repository
inner
;
private
final
BufferStorage
bufferStorage
;
public
BufferingMiddlewareRepository
(
long
syncDeadline
BufferStorage
bufferStore
Repository
wrappedRepository
)
{
this
.
syncDeadline
=
syncDeadline
;
this
.
inner
=
wrappedRepository
;
this
.
bufferStorage
=
bufferStore
;
}
Override
public
RepositorySession
createSession
(
Context
context
)
throws
SessionCreateException
{
final
RepositorySession
innerSession
=
this
.
inner
.
createSession
(
context
)
;
return
new
BufferingMiddlewareRepositorySession
(
innerSession
this
syncDeadline
bufferStorage
)
;
}
}
