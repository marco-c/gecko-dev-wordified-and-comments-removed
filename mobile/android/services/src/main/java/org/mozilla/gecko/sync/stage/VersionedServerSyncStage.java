package
org
.
mozilla
.
gecko
.
sync
.
stage
;
import
android
.
net
.
Uri
;
import
android
.
os
.
Bundle
;
import
org
.
mozilla
.
gecko
.
background
.
common
.
log
.
Logger
;
import
org
.
mozilla
.
gecko
.
db
.
BrowserContract
;
abstract
class
VersionedServerSyncStage
extends
ServerSyncStage
{
abstract
Uri
getLocalDataUri
(
)
;
Override
protected
void
resetLocal
(
)
{
super
.
resetLocal
(
)
;
final
Bundle
result
=
session
.
getContext
(
)
.
getContentResolver
(
)
.
call
(
getLocalDataUri
(
)
BrowserContract
.
METHOD_RESET_RECORD_VERSIONS
getLocalDataUri
(
)
.
toString
(
)
null
)
;
if
(
result
=
=
null
)
{
Logger
.
error
(
LOG_TAG
"
Failed
to
get
a
result
bundle
while
resetting
record
versions
for
"
+
getCollection
(
)
)
;
}
else
{
final
int
recordsChanged
=
(
int
)
result
.
getSerializable
(
BrowserContract
.
METHOD_RESULT
)
;
Logger
.
info
(
LOG_TAG
"
Reset
versions
for
records
in
"
+
getCollection
(
)
+
"
:
"
+
recordsChanged
)
;
}
}
}
