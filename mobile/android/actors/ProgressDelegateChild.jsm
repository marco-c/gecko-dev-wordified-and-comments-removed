const
{
GeckoViewActorChild
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
GeckoViewActorChild
.
jsm
"
)
;
const
{
XPCOMUtils
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
const
EXPORTED_SYMBOLS
=
[
"
ProgressDelegateChild
"
]
;
class
ProgressDelegateChild
extends
GeckoViewActorChild
{
handleEvent
(
aEvent
)
{
debug
handleEvent
:
{
aEvent
.
type
}
;
if
(
!
this
.
isContentWindow
)
{
return
;
}
switch
(
aEvent
.
type
)
{
case
"
DOMContentLoaded
"
:
case
"
MozAfterPaint
"
:
case
"
pageshow
"
:
{
const
target
=
aEvent
.
originalTarget
;
const
uri
=
target
?
.
location
.
href
;
this
.
sendAsyncMessage
(
aEvent
.
type
{
uri
}
)
;
}
}
}
}
const
{
debug
warn
}
=
ProgressDelegateChild
.
initLogging
(
"
ProgressDelegate
"
)
;
