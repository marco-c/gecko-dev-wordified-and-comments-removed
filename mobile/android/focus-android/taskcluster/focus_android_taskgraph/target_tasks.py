from
taskgraph
.
target_tasks
import
_target_task
filter_for_tasks_for
_target_task
(
'
default
'
)
def
target_tasks_default
(
full_task_graph
parameters
graph_config
)
:
    
"
"
"
Target
the
tasks
which
have
indicated
they
should
be
run
on
this
project
    
via
the
run_on_projects
attributes
.
"
"
"
    
def
releases
(
task
parameters
)
:
        
return
task
.
attributes
.
get
(
"
release
-
type
"
"
"
)
=
=
'
release
'
    
_filter
=
filter_for_tasks_for
    
if
parameters
[
"
tasks_for
"
]
=
=
"
github
-
release
"
:
        
_filter
=
releases
    
return
[
l
for
l
t
in
full_task_graph
.
tasks
.
items
(
)
if
_filter
(
t
parameters
)
]
_target_task
(
'
release
'
)
def
target_tasks_default
(
full_task_graph
parameters
graph_config
)
:
    
def
filter
(
task
parameters
)
:
        
if
task
.
kind
=
=
"
mark
-
as
-
shipped
"
and
parameters
[
"
tasks_for
"
]
=
=
"
github
-
release
"
:
            
return
False
        
return
task
.
attributes
.
get
(
"
release
-
type
"
"
"
)
=
=
parameters
[
"
release_type
"
]
    
return
[
l
for
l
t
in
full_task_graph
.
tasks
.
items
(
)
if
filter
(
t
parameters
)
]
_target_task
(
'
nightly
'
)
def
target_tasks_nightly
(
full_task_graph
parameters
graph_config
)
:
    
"
"
"
Select
the
set
of
tasks
required
for
a
nightly
build
.
"
"
"
    
def
filter
(
task
)
:
        
return
task
.
attributes
.
get
(
"
nightly
-
task
"
False
)
    
return
[
l
for
l
t
in
full_task_graph
.
tasks
.
items
(
)
if
filter
(
t
)
]
