package
org
.
mozilla
.
focus
.
locale
;
import
android
.
app
.
Application
;
import
android
.
content
.
res
.
Configuration
;
public
class
LocaleAwareApplication
extends
Application
{
private
boolean
mInBackground
;
Override
public
void
onCreate
(
)
{
Locales
.
initializeLocale
(
this
)
;
super
.
onCreate
(
)
;
}
Override
public
void
onConfigurationChanged
(
Configuration
config
)
{
if
(
mInBackground
)
{
super
.
onConfigurationChanged
(
config
)
;
return
;
}
try
{
LocaleManager
.
getInstance
(
)
.
correctLocale
(
this
getResources
(
)
config
)
;
}
catch
(
IllegalStateException
ex
)
{
}
super
.
onConfigurationChanged
(
config
)
;
}
public
void
onActivityPause
(
)
{
mInBackground
=
true
;
}
public
void
onActivityResume
(
)
{
mInBackground
=
true
;
}
}
