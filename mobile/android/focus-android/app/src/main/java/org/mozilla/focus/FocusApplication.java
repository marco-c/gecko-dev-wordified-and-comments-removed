package
org
.
mozilla
.
focus
;
import
android
.
os
.
StrictMode
;
import
android
.
preference
.
PreferenceManager
;
import
org
.
mozilla
.
focus
.
locale
.
LocaleAwareApplication
;
import
org
.
mozilla
.
focus
.
search
.
SearchEngineManager
;
import
org
.
mozilla
.
focus
.
telemetry
.
TelemetryWrapper
;
import
org
.
mozilla
.
focus
.
utils
.
AdjustHelper
;
import
org
.
mozilla
.
focus
.
utils
.
AppConstants
;
public
class
FocusApplication
extends
LocaleAwareApplication
{
Override
public
void
onCreate
(
)
{
super
.
onCreate
(
)
;
PreferenceManager
.
setDefaultValues
(
this
R
.
xml
.
settings
false
)
;
enableStrictMode
(
)
;
SearchEngineManager
.
getInstance
(
)
.
init
(
this
)
;
TelemetryWrapper
.
init
(
this
)
;
AdjustHelper
.
setupAdjustIfNeeded
(
this
)
;
}
private
void
enableStrictMode
(
)
{
if
(
AppConstants
.
isReleaseBuild
(
)
)
{
return
;
}
final
StrictMode
.
ThreadPolicy
.
Builder
threadPolicyBuilder
=
new
StrictMode
.
ThreadPolicy
.
Builder
(
)
.
detectAll
(
)
;
final
StrictMode
.
VmPolicy
.
Builder
vmPolicyBuilder
=
new
StrictMode
.
VmPolicy
.
Builder
(
)
.
detectAll
(
)
;
if
(
AppConstants
.
isBetaBuild
(
)
)
{
threadPolicyBuilder
.
penaltyDialog
(
)
;
vmPolicyBuilder
.
penaltyLog
(
)
;
}
else
{
threadPolicyBuilder
.
penaltyDialog
(
)
;
vmPolicyBuilder
.
penaltyLog
(
)
.
penaltyDeath
(
)
;
}
StrictMode
.
setThreadPolicy
(
threadPolicyBuilder
.
build
(
)
)
;
StrictMode
.
setVmPolicy
(
vmPolicyBuilder
.
build
(
)
)
;
}
}
