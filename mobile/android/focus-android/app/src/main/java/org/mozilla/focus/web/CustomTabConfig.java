package
org
.
mozilla
.
focus
.
web
;
import
android
.
content
.
Intent
;
import
android
.
graphics
.
Bitmap
;
import
android
.
support
.
annotation
.
ColorInt
;
import
android
.
support
.
annotation
.
NonNull
;
import
android
.
support
.
annotation
.
Nullable
;
import
android
.
support
.
customtabs
.
CustomTabsIntent
;
import
org
.
mozilla
.
focus
.
utils
.
SafeIntent
;
public
class
CustomTabConfig
{
public
final
Nullable
ColorInt
Integer
toolbarColor
;
public
final
Nullable
Bitmap
closeButtonIcon
;
public
final
boolean
disableUrlbarHiding
;
CustomTabConfig
(
final
Nullable
ColorInt
Integer
toolbarColor
final
Nullable
Bitmap
closeButtonIcon
final
boolean
disableUrlbarHiding
)
{
this
.
toolbarColor
=
toolbarColor
;
this
.
closeButtonIcon
=
closeButtonIcon
;
this
.
disableUrlbarHiding
=
disableUrlbarHiding
;
}
static
boolean
isCustomTabIntent
(
final
NonNull
Intent
intent
)
{
return
intent
.
hasExtra
(
CustomTabsIntent
.
EXTRA_SESSION
)
;
}
static
CustomTabConfig
parseCustomTabIntent
(
final
NonNull
SafeIntent
intent
)
{
ColorInt
Integer
toolbarColor
=
null
;
if
(
intent
.
hasExtra
(
CustomTabsIntent
.
EXTRA_TOOLBAR_COLOR
)
)
{
toolbarColor
=
intent
.
getIntExtra
(
CustomTabsIntent
.
EXTRA_TOOLBAR_COLOR
-
1
)
;
}
Bitmap
closeButtonIcon
=
null
;
if
(
intent
.
hasExtra
(
CustomTabsIntent
.
EXTRA_CLOSE_BUTTON_ICON
)
)
{
closeButtonIcon
=
intent
.
getParcelableExtra
(
CustomTabsIntent
.
EXTRA_CLOSE_BUTTON_ICON
)
;
}
boolean
disableUrlbarHiding
=
!
intent
.
getBooleanExtra
(
CustomTabsIntent
.
EXTRA_ENABLE_URLBAR_HIDING
true
)
;
return
new
CustomTabConfig
(
toolbarColor
closeButtonIcon
disableUrlbarHiding
)
;
}
}
