package
org
.
mozilla
.
focus
.
web
;
import
java
.
lang
.
ref
.
WeakReference
;
public
class
BrowsingSession
{
private
static
BrowsingSession
instance
;
public
interface
TrackingCountListener
{
void
onTrackingCountChanged
(
int
trackingCount
)
;
}
public
static
synchronized
BrowsingSession
getInstance
(
)
{
if
(
instance
=
=
null
)
{
instance
=
new
BrowsingSession
(
)
;
}
return
instance
;
}
private
boolean
isActive
;
private
int
blockedTrackers
;
private
WeakReference
<
TrackingCountListener
>
listenerWeakReference
;
private
BrowsingSession
(
)
{
listenerWeakReference
=
new
WeakReference
<
>
(
null
)
;
}
public
void
start
(
)
{
isActive
=
true
;
}
public
void
stop
(
)
{
isActive
=
false
;
}
public
boolean
isActive
(
)
{
return
isActive
;
}
public
void
countBlockedTracker
(
)
{
blockedTrackers
+
+
;
final
TrackingCountListener
listener
=
listenerWeakReference
.
get
(
)
;
if
(
listener
!
=
null
)
{
listener
.
onTrackingCountChanged
(
blockedTrackers
)
;
}
}
public
void
setTrackingCountListener
(
TrackingCountListener
listener
)
{
listenerWeakReference
=
new
WeakReference
<
>
(
listener
)
;
listener
.
onTrackingCountChanged
(
blockedTrackers
)
;
}
public
void
resetTrackerCount
(
)
{
blockedTrackers
=
0
;
}
}
