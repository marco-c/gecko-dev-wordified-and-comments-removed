package
org
.
mozilla
.
focus
.
telemetry
;
import
android
.
content
.
Context
;
import
android
.
content
.
res
.
Resources
;
import
org
.
mozilla
.
focus
.
R
;
import
org
.
mozilla
.
focus
.
search
.
SearchEngineManager
;
import
org
.
mozilla
.
focus
.
utils
.
Browsers
;
import
org
.
mozilla
.
telemetry
.
TelemetryHolder
;
import
org
.
mozilla
.
telemetry
.
measurement
.
SettingsMeasurement
;
class
TelemetrySettingsProvider
extends
SettingsMeasurement
.
SharedPreferenceSettingsProvider
{
private
final
Context
context
;
private
final
String
prefKeyDefaultBrowser
;
private
final
String
prefKeySearchEngine
;
TelemetrySettingsProvider
(
Context
context
)
{
this
.
context
=
context
;
final
Resources
resources
=
context
.
getResources
(
)
;
prefKeyDefaultBrowser
=
resources
.
getString
(
R
.
string
.
pref_key_default_browser
)
;
prefKeySearchEngine
=
resources
.
getString
(
R
.
string
.
pref_key_search_engine
)
;
}
public
boolean
containsKey
(
String
key
)
{
if
(
key
.
equals
(
prefKeyDefaultBrowser
)
)
{
return
true
;
}
if
(
key
.
equals
(
prefKeySearchEngine
)
)
{
return
true
;
}
return
super
.
containsKey
(
key
)
;
}
Override
public
java
.
lang
.
Object
getValue
(
String
key
)
{
if
(
key
.
equals
(
prefKeyDefaultBrowser
)
)
{
final
Context
context
=
TelemetryHolder
.
get
(
)
.
getConfiguration
(
)
.
getContext
(
)
;
final
Browsers
browsers
=
new
Browsers
(
context
Browsers
.
TRADITIONAL_BROWSER_URL
)
;
return
Boolean
.
toString
(
browsers
.
isDefaultBrowser
(
context
)
)
;
}
if
(
key
.
equals
(
prefKeySearchEngine
)
)
{
java
.
lang
.
Object
value
=
super
.
getValue
(
key
)
;
if
(
value
=
=
null
)
{
value
=
SearchEngineManager
.
getInstance
(
)
.
getDefaultSearchEngine
(
context
)
.
getName
(
)
;
}
return
value
;
}
return
super
.
getValue
(
key
)
;
}
}
