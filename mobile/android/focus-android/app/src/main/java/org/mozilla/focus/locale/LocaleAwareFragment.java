package
org
.
mozilla
.
focus
.
locale
;
import
android
.
arch
.
lifecycle
.
LifecycleFragment
;
import
java
.
util
.
Locale
;
public
abstract
class
LocaleAwareFragment
extends
LifecycleFragment
{
private
Locale
cachedLocale
=
null
;
public
abstract
void
applyLocale
(
)
;
Override
public
void
onResume
(
)
{
super
.
onResume
(
)
;
LocaleManager
.
getInstance
(
)
.
correctLocale
(
getContext
(
)
getResources
(
)
getResources
(
)
.
getConfiguration
(
)
)
;
if
(
cachedLocale
=
=
null
)
{
cachedLocale
=
Locale
.
getDefault
(
)
;
}
else
{
Locale
newLocale
=
LocaleManager
.
getInstance
(
)
.
getCurrentLocale
(
getActivity
(
)
.
getApplicationContext
(
)
)
;
if
(
newLocale
=
=
null
)
{
newLocale
=
Locale
.
getDefault
(
)
;
}
if
(
!
newLocale
.
equals
(
cachedLocale
)
)
{
cachedLocale
=
newLocale
;
applyLocale
(
)
;
}
}
}
}
