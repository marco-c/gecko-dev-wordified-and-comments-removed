package
org
.
mozilla
.
focus
.
locale
;
import
android
.
content
.
res
.
Configuration
;
import
android
.
support
.
v4
.
app
.
Fragment
;
import
java
.
util
.
Locale
;
public
abstract
class
LocaleAwareFragment
extends
Fragment
{
private
Locale
cachedLocale
=
null
;
public
abstract
void
applyLocale
(
)
;
Override
public
void
onResume
(
)
{
super
.
onResume
(
)
;
if
(
cachedLocale
=
=
null
)
{
cachedLocale
=
Locale
.
getDefault
(
)
;
}
else
{
Locale
newLocale
=
LocaleManager
.
getInstance
(
)
.
getCurrentLocale
(
getActivity
(
)
.
getApplicationContext
(
)
)
;
if
(
newLocale
=
=
null
)
{
newLocale
=
Locale
.
getDefault
(
)
;
}
if
(
!
newLocale
.
equals
(
cachedLocale
)
)
{
cachedLocale
=
newLocale
;
applyLocale
(
)
;
}
}
}
}
