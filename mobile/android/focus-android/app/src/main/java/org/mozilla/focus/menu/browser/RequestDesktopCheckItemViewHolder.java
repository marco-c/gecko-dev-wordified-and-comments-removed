package
org
.
mozilla
.
focus
.
menu
.
browser
;
import
android
.
view
.
View
;
import
android
.
widget
.
CheckBox
;
import
android
.
widget
.
CompoundButton
;
import
org
.
mozilla
.
focus
.
R
;
import
org
.
mozilla
.
focus
.
fragment
.
BrowserFragment
;
import
org
.
mozilla
.
focus
.
telemetry
.
TelemetryWrapper
;
import
org
.
mozilla
.
focus
.
utils
.
UrlUtils
;
import
mozilla
.
components
.
support
.
utils
.
ThreadUtils
;
class
RequestDesktopCheckItemViewHolder
extends
BrowserMenuViewHolder
implements
CheckBox
.
OnCheckedChangeListener
{
static
final
int
LAYOUT_ID
=
R
.
layout
.
request_desktop_check_menu_item
;
private
final
BrowserFragment
fragment
;
private
CheckBox
checkbox
;
RequestDesktopCheckItemViewHolder
(
View
itemView
final
BrowserFragment
fragment
)
{
super
(
itemView
)
;
this
.
fragment
=
fragment
;
checkbox
=
itemView
.
findViewById
(
R
.
id
.
check_menu_item_checkbox
)
;
checkbox
.
setChecked
(
fragment
.
getSession
(
)
.
shouldRequestDesktopSite
(
)
)
;
checkbox
.
setOnCheckedChangeListener
(
this
)
;
}
Override
public
void
onCheckedChanged
(
CompoundButton
buttonView
boolean
isChecked
)
{
fragment
.
setShouldRequestDesktop
(
isChecked
)
;
TelemetryWrapper
.
desktopRequestCheckEvent
(
isChecked
)
;
ThreadUtils
.
INSTANCE
.
postToMainThreadDelayed
(
new
Runnable
(
)
{
Override
public
void
run
(
)
{
getMenu
(
)
.
dismiss
(
)
;
fragment
.
loadUrl
(
UrlUtils
.
stripSchemeAndSubDomain
(
fragment
.
getUrl
(
)
)
)
;
}
}
250
)
;
}
}
