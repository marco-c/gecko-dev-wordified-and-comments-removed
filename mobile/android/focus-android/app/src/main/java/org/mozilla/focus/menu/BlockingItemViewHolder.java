package
org
.
mozilla
.
focus
.
menu
;
import
android
.
view
.
View
;
import
android
.
widget
.
CompoundButton
;
import
android
.
widget
.
Switch
;
import
org
.
mozilla
.
focus
.
R
;
import
org
.
mozilla
.
focus
.
fragment
.
BrowserFragment
;
import
org
.
mozilla
.
focus
.
telemetry
.
TelemetryWrapper
;
import
org
.
mozilla
.
focus
.
utils
.
ThreadUtils
;
class
BlockingItemViewHolder
extends
BrowserMenuViewHolder
implements
CompoundButton
.
OnCheckedChangeListener
{
static
final
int
LAYOUT_ID
=
R
.
layout
.
menu_blocking_switch
;
private
BrowserFragment
fragment
;
BlockingItemViewHolder
(
View
itemView
BrowserFragment
fragment
)
{
super
(
itemView
)
;
this
.
fragment
=
fragment
;
final
Switch
switchView
=
(
Switch
)
itemView
;
(
(
Switch
)
itemView
)
.
setChecked
(
fragment
.
isBlockingEnabled
(
)
)
;
switchView
.
setOnCheckedChangeListener
(
this
)
;
}
Override
public
void
onCheckedChanged
(
CompoundButton
buttonView
boolean
isChecked
)
{
fragment
.
setBlockingEnabled
(
isChecked
)
;
TelemetryWrapper
.
blockingSwitchEvent
(
isChecked
)
;
ThreadUtils
.
postToMainThreadDelayed
(
new
Runnable
(
)
{
Override
public
void
run
(
)
{
getMenu
(
)
.
dismiss
(
)
;
fragment
.
reload
(
)
;
}
}
250
)
;
}
}
