package
org
.
mozilla
.
focus
.
activity
.
helpers
;
import
android
.
content
.
Context
;
import
android
.
preference
.
PreferenceManager
;
import
android
.
support
.
annotation
.
CallSuper
;
import
android
.
support
.
test
.
InstrumentationRegistry
;
import
android
.
support
.
test
.
rule
.
ActivityTestRule
;
import
org
.
mozilla
.
focus
.
activity
.
MainActivity
;
import
static
org
.
mozilla
.
focus
.
fragment
.
FirstrunFragment
.
FIRSTRUN_PREF
;
public
class
MainActivityWithoutFirstrunTestRule
extends
ActivityTestRule
<
MainActivity
>
{
public
MainActivityWithoutFirstrunTestRule
(
)
{
super
(
MainActivity
.
class
)
;
}
CallSuper
Override
protected
void
beforeActivityLaunched
(
)
{
super
.
beforeActivityLaunched
(
)
;
Context
appContext
=
InstrumentationRegistry
.
getInstrumentation
(
)
.
getTargetContext
(
)
.
getApplicationContext
(
)
;
PreferenceManager
.
getDefaultSharedPreferences
(
appContext
)
.
edit
(
)
.
putBoolean
(
FIRSTRUN_PREF
true
)
.
apply
(
)
;
}
Override
protected
void
afterActivityFinished
(
)
{
super
.
afterActivityFinished
(
)
;
getActivity
(
)
.
finishAndRemoveTask
(
)
;
}
}
