package
org
.
mozilla
.
focus
.
activity
;
import
android
.
content
.
Context
;
import
android
.
preference
.
PreferenceManager
;
import
android
.
support
.
test
.
InstrumentationRegistry
;
import
android
.
support
.
test
.
rule
.
ActivityTestRule
;
import
android
.
support
.
test
.
runner
.
AndroidJUnit4
;
import
android
.
support
.
test
.
uiautomator
.
UiObject
;
import
android
.
support
.
test
.
uiautomator
.
UiObjectNotFoundException
;
import
android
.
support
.
test
.
uiautomator
.
UiSelector
;
import
org
.
junit
.
After
;
import
org
.
junit
.
Rule
;
import
org
.
junit
.
Test
;
import
org
.
junit
.
runner
.
RunWith
;
import
org
.
mozilla
.
focus
.
helpers
.
TestHelper
;
import
static
junit
.
framework
.
Assert
.
assertTrue
;
import
static
org
.
mozilla
.
focus
.
fragment
.
FirstrunFragment
.
FIRSTRUN_PREF
;
import
static
org
.
mozilla
.
focus
.
helpers
.
EspressoHelper
.
openSettings
;
import
static
org
.
mozilla
.
focus
.
helpers
.
TestHelper
.
waitingTime
;
RunWith
(
AndroidJUnit4
.
class
)
public
class
AccessSettingsTest
{
Rule
public
ActivityTestRule
<
MainActivity
>
mActivityTestRule
=
new
ActivityTestRule
<
MainActivity
>
(
MainActivity
.
class
)
{
Override
protected
void
beforeActivityLaunched
(
)
{
super
.
beforeActivityLaunched
(
)
;
Context
appContext
=
InstrumentationRegistry
.
getInstrumentation
(
)
.
getTargetContext
(
)
.
getApplicationContext
(
)
;
PreferenceManager
.
getDefaultSharedPreferences
(
appContext
)
.
edit
(
)
.
putBoolean
(
FIRSTRUN_PREF
true
)
.
apply
(
)
;
TestHelper
.
selectGeckoForKlar
(
)
;
}
}
;
After
public
void
tearDown
(
)
{
mActivityTestRule
.
getActivity
(
)
.
finishAndRemoveTask
(
)
;
}
Test
public
void
AccessSettingsTest
(
)
throws
UiObjectNotFoundException
{
UiObject
generalHeading
=
TestHelper
.
mDevice
.
findObject
(
new
UiSelector
(
)
.
text
(
"
General
"
)
.
resourceId
(
"
android
:
id
/
title
"
)
)
;
UiObject
privacyHeading
=
TestHelper
.
mDevice
.
findObject
(
new
UiSelector
(
)
.
text
(
"
Privacy
&
Security
"
)
.
resourceId
(
"
android
:
id
/
title
"
)
)
;
UiObject
searchHeading
=
TestHelper
.
mDevice
.
findObject
(
new
UiSelector
(
)
.
text
(
"
Search
"
)
.
resourceId
(
"
android
:
id
/
title
"
)
)
;
UiObject
mozHeading
=
TestHelper
.
mDevice
.
findObject
(
new
UiSelector
(
)
.
text
(
"
Mozilla
"
)
.
resourceId
(
"
android
:
id
/
title
"
)
)
;
TestHelper
.
inlineAutocompleteEditText
.
waitForExists
(
waitingTime
)
;
openSettings
(
)
;
generalHeading
.
waitForExists
(
waitingTime
)
;
assertTrue
(
generalHeading
.
exists
(
)
)
;
assertTrue
(
searchHeading
.
exists
(
)
)
;
assertTrue
(
privacyHeading
.
exists
(
)
)
;
assertTrue
(
mozHeading
.
exists
(
)
)
;
}
}
