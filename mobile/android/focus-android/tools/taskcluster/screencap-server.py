from
BaseHTTPServer
import
BaseHTTPRequestHandler
HTTPServer
from
os
import
curdir
sep
import
subprocess
class
ScreenshotHandler
(
BaseHTTPRequestHandler
)
:
    
def
do_GET
(
self
)
:
        
self
.
send_response
(
200
)
        
self
.
send_header
(
'
Content
-
type
'
'
text
/
plain
'
)
        
self
.
end_headers
(
)
    	
print
"
*
Taking
screenshot
"
        
command
=
"
adb
shell
screencap
-
p
/
data
/
data
/
org
.
mozilla
.
focus
.
debug
/
files
/
temp_screen
.
png
"
        
process
=
subprocess
.
Popen
(
command
shell
=
True
stdout
=
subprocess
.
PIPE
)
        
process
.
wait
(
)
        
self
.
wfile
.
write
(
"
screenshot
exit
=
"
+
str
(
process
.
returncode
)
)
        
print
"
*
Done
(
exit
=
"
process
.
returncode
"
)
"
if
__name__
=
=
"
__main__
"
:
    
httpd
=
HTTPServer
(
(
'
0
.
0
.
0
.
0
'
9771
)
ScreenshotHandler
)
    
print
'
Starting
httpd
.
.
.
'
    
httpd
.
serve_forever
(
)
