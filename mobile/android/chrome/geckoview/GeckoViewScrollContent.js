const
{
classes
:
Cc
interfaces
:
Ci
utils
:
Cu
}
=
Components
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
GeckoViewContentModule
.
jsm
"
)
;
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
XPCOMUtils
.
jsm
"
)
;
XPCOMUtils
.
defineLazyGetter
(
this
"
dump
"
(
)
=
>
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
AndroidLog
.
jsm
"
{
}
)
.
AndroidLog
.
d
.
bind
(
null
"
ViewScrollContent
"
)
)
;
function
debug
(
aMsg
)
{
}
class
GeckoViewScrollContent
extends
GeckoViewContentModule
{
register
(
)
{
debug
(
"
register
"
)
;
addEventListener
(
"
scroll
"
this
false
)
;
}
unregister
(
)
{
debug
(
"
unregister
"
)
;
removeEventListener
(
"
scroll
"
this
)
;
}
handleEvent
(
aEvent
)
{
if
(
aEvent
.
originalTarget
.
defaultView
!
=
content
)
{
return
;
}
debug
(
"
handleEvent
"
+
aEvent
.
type
)
;
switch
(
aEvent
.
type
)
{
case
"
scroll
"
:
this
.
eventDispatcher
.
sendRequest
(
{
type
:
"
GeckoView
:
ScrollChanged
"
scrollX
:
Math
.
round
(
content
.
scrollX
)
scrollY
:
Math
.
round
(
content
.
scrollY
)
}
)
;
break
;
}
}
}
var
scrollListener
=
new
GeckoViewScrollContent
(
"
GeckoViewScroll
"
this
)
;
