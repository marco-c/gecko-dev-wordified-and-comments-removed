"
use
strict
"
;
const
{
RootActor
}
=
require
(
"
devtools
/
server
/
actors
/
root
"
)
;
const
{
ActorRegistry
}
=
require
(
"
devtools
/
server
/
actor
-
registry
"
)
;
const
{
BrowserTabList
BrowserAddonList
sendShutdownEvent
}
=
require
(
"
devtools
/
server
/
actors
/
webbrowser
"
)
;
exports
.
createRootActor
=
function
createRootActor
(
aConnection
)
{
let
parameters
=
{
tabList
:
new
MobileTabList
(
aConnection
)
addonList
:
new
BrowserAddonList
(
aConnection
)
globalActorFactories
:
ActorRegistry
.
globalActorFactories
onShutdown
:
sendShutdownEvent
}
;
return
new
RootActor
(
aConnection
parameters
)
;
}
;
function
MobileTabList
(
aConnection
)
{
BrowserTabList
.
call
(
this
aConnection
)
;
}
MobileTabList
.
prototype
=
Object
.
create
(
BrowserTabList
.
prototype
)
;
MobileTabList
.
prototype
.
constructor
=
MobileTabList
;
MobileTabList
.
prototype
.
_getSelectedBrowser
=
function
(
aWindow
)
{
return
aWindow
.
BrowserApp
.
selectedBrowser
;
}
;
MobileTabList
.
prototype
.
_getChildren
=
function
(
aWindow
)
{
return
aWindow
.
BrowserApp
.
tabs
.
map
(
tab
=
>
tab
.
browser
)
;
}
;
