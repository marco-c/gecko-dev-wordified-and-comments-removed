"
use
strict
"
;
const
{
RootActor
}
=
require
(
"
devtools
/
server
/
actors
/
root
"
)
;
const
{
ActorRegistry
}
=
require
(
"
devtools
/
server
/
actors
/
utils
/
actor
-
registry
"
)
;
const
{
BrowserTabList
BrowserAddonList
sendShutdownEvent
}
=
require
(
"
devtools
/
server
/
actors
/
webbrowser
"
)
;
const
{
ServiceWorkerRegistrationActorList
}
=
require
(
"
devtools
/
server
/
actors
/
worker
/
service
-
worker
-
registration
-
list
"
)
;
const
{
WorkerDescriptorActorList
}
=
require
(
"
devtools
/
server
/
actors
/
worker
/
worker
-
descriptor
-
actor
-
list
"
)
;
const
{
ProcessActorList
}
=
require
(
"
devtools
/
server
/
actors
/
process
"
)
;
exports
.
createRootActor
=
function
createRootActor
(
aConnection
)
{
const
parameters
=
{
tabList
:
new
MobileTabList
(
aConnection
)
addonList
:
new
BrowserAddonList
(
aConnection
)
workerList
:
new
WorkerDescriptorActorList
(
aConnection
{
}
)
serviceWorkerRegistrationList
:
new
ServiceWorkerRegistrationActorList
(
aConnection
)
processList
:
new
ProcessActorList
(
)
globalActorFactories
:
ActorRegistry
.
globalActorFactories
onShutdown
:
sendShutdownEvent
}
;
return
new
RootActor
(
aConnection
parameters
)
;
}
;
function
MobileTabList
(
aConnection
)
{
BrowserTabList
.
call
(
this
aConnection
)
;
}
MobileTabList
.
prototype
=
Object
.
create
(
BrowserTabList
.
prototype
)
;
MobileTabList
.
prototype
.
constructor
=
MobileTabList
;
MobileTabList
.
prototype
.
_getSelectedBrowser
=
function
(
aWindow
)
{
return
aWindow
.
browser
;
}
;
MobileTabList
.
prototype
.
_getChildren
=
function
(
aWindow
)
{
return
[
aWindow
.
browser
]
;
}
;
