#
ifndef
nsStartupCacheUtils_h_
#
define
nsStartupCacheUtils_h_
#
include
"
nsString
.
h
"
#
include
"
nsIStorageStream
.
h
"
#
include
"
nsIObjectInputStream
.
h
"
#
include
"
nsIObjectOutputStream
.
h
"
#
include
"
mozilla
/
UniquePtr
.
h
"
class
nsIURI
;
namespace
mozilla
{
namespace
scache
{
nsresult
NewObjectInputStreamFromBuffer
(
const
char
*
buffer
uint32_t
len
nsIObjectInputStream
*
*
stream
)
;
nsresult
NewObjectOutputWrappedStorageStream
(
nsIObjectOutputStream
*
*
wrapperStream
nsIStorageStream
*
*
stream
bool
wantDebugStream
)
;
nsresult
NewBufferFromStorageStream
(
nsIStorageStream
*
storageStream
UniquePtr
<
char
[
]
>
*
buffer
uint32_t
*
len
)
;
nsresult
ResolveURI
(
nsIURI
*
in
nsIURI
*
*
out
)
;
nsresult
PathifyURI
(
const
char
*
loaderType
size_t
loaderTypeLength
nsIURI
*
in
nsACString
&
out
)
;
template
<
int
N
>
nsresult
PathifyURI
(
const
char
(
&
loaderType
)
[
N
]
nsIURI
*
in
nsACString
&
out
)
{
return
PathifyURI
(
loaderType
N
-
1
in
out
)
;
}
}
}
#
endif
