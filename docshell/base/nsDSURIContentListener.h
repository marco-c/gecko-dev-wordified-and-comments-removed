#
ifndef
nsDSURIContentListener_h__
#
define
nsDSURIContentListener_h__
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsIURIContentListener
.
h
"
#
include
"
nsWeakReference
.
h
"
class
nsDocShell
;
class
nsIWebNavigationInfo
;
class
nsDSURIContentListener
final
:
public
nsIURIContentListener
public
nsSupportsWeakReference
{
friend
class
nsDocShell
;
public
:
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIURICONTENTLISTENER
nsresult
Init
(
)
;
protected
:
explicit
nsDSURIContentListener
(
nsDocShell
*
aDocShell
)
;
virtual
~
nsDSURIContentListener
(
)
;
void
DropDocShellReference
(
)
{
mDocShell
=
nullptr
;
mExistingJPEGRequest
=
nullptr
;
mExistingJPEGStreamListener
=
nullptr
;
}
protected
:
nsDocShell
*
mDocShell
;
nsCOMPtr
<
nsIStreamListener
>
mExistingJPEGStreamListener
;
nsCOMPtr
<
nsIChannel
>
mExistingJPEGRequest
;
nsWeakPtr
mWeakParentContentListener
;
nsIURIContentListener
*
mParentContentListener
;
nsCOMPtr
<
nsIWebNavigationInfo
>
mNavInfo
;
}
;
#
endif
