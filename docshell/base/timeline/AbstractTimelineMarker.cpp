#
include
"
AbstractTimelineMarker
.
h
"
#
include
"
mozilla
/
TimeStamp
.
h
"
namespace
mozilla
{
AbstractTimelineMarker
:
:
AbstractTimelineMarker
(
const
char
*
aName
MarkerTracingType
aTracingType
)
:
mName
(
aName
)
mTracingType
(
aTracingType
)
{
MOZ_COUNT_CTOR
(
AbstractTimelineMarker
)
;
SetCurrentTime
(
)
;
}
AbstractTimelineMarker
:
:
AbstractTimelineMarker
(
const
char
*
aName
const
TimeStamp
&
aTime
MarkerTracingType
aTracingType
)
:
mName
(
aName
)
mTracingType
(
aTracingType
)
{
MOZ_COUNT_CTOR
(
AbstractTimelineMarker
)
;
SetCustomTime
(
aTime
)
;
}
AbstractTimelineMarker
:
:
~
AbstractTimelineMarker
(
)
{
MOZ_COUNT_DTOR
(
AbstractTimelineMarker
)
;
}
void
AbstractTimelineMarker
:
:
SetCurrentTime
(
)
{
TimeStamp
now
=
TimeStamp
:
:
Now
(
)
;
SetCustomTime
(
now
)
;
}
void
AbstractTimelineMarker
:
:
SetCustomTime
(
const
TimeStamp
&
aTime
)
{
bool
isInconsistent
=
false
;
mTime
=
(
aTime
-
TimeStamp
:
:
ProcessCreation
(
isInconsistent
)
)
.
ToMilliseconds
(
)
;
}
}
