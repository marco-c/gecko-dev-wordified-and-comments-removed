#
ifndef
nsSHEntryShared_h__
#
define
nsSHEntryShared_h__
#
include
"
nsAutoPtr
.
h
"
#
include
"
nsCOMArray
.
h
"
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsExpirationTracker
.
h
"
#
include
"
nsIBFCacheEntry
.
h
"
#
include
"
nsIWeakReferenceUtils
.
h
"
#
include
"
nsRect
.
h
"
#
include
"
nsString
.
h
"
#
include
"
nsStubMutationObserver
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
class
nsSHEntry
;
class
nsISHEntry
;
class
nsIContentViewer
;
class
nsIDocShellTreeItem
;
class
nsILayoutHistoryState
;
class
nsDocShellEditorData
;
class
nsIMutableArray
;
namespace
mozilla
{
namespace
dom
{
class
Document
;
}
}
class
nsSHEntryShared
final
:
public
nsIBFCacheEntry
public
nsStubMutationObserver
{
public
:
static
void
EnsureHistoryTracker
(
)
;
static
void
Shutdown
(
)
;
nsSHEntryShared
(
)
;
NS_DECL_ISUPPORTS
NS_DECL_NSIBFCACHEENTRY
NS_DECL_NSIMUTATIONOBSERVER_CHARACTERDATACHANGED
NS_DECL_NSIMUTATIONOBSERVER_ATTRIBUTECHANGED
NS_DECL_NSIMUTATIONOBSERVER_CONTENTAPPENDED
NS_DECL_NSIMUTATIONOBSERVER_CONTENTINSERTED
NS_DECL_NSIMUTATIONOBSERVER_CONTENTREMOVED
nsExpirationState
*
GetExpirationState
(
)
{
return
&
mExpirationState
;
}
private
:
~
nsSHEntryShared
(
)
;
friend
class
nsSHEntry
;
static
already_AddRefed
<
nsSHEntryShared
>
Duplicate
(
nsSHEntryShared
*
aEntry
)
;
void
RemoveFromExpirationTracker
(
)
;
void
SyncPresentationState
(
)
;
void
DropPresentationState
(
)
;
nsresult
SetContentViewer
(
nsIContentViewer
*
aViewer
)
;
nsID
mDocShellID
;
nsCOMArray
<
nsIDocShellTreeItem
>
mChildShells
;
nsCOMPtr
<
nsIPrincipal
>
mTriggeringPrincipal
;
nsCOMPtr
<
nsIPrincipal
>
mPrincipalToInherit
;
nsCOMPtr
<
nsIPrincipal
>
mStoragePrincipalToInherit
;
nsCOMPtr
<
nsIContentSecurityPolicy
>
mCsp
;
nsCString
mContentType
;
uint32_t
mCacheKey
;
uint32_t
mLastTouched
;
uint64_t
mID
;
nsCOMPtr
<
nsIContentViewer
>
mContentViewer
;
RefPtr
<
mozilla
:
:
dom
:
:
Document
>
mDocument
;
nsCOMPtr
<
nsILayoutHistoryState
>
mLayoutHistoryState
;
nsCOMPtr
<
nsISupports
>
mWindowState
;
nsIntRect
mViewerBounds
;
nsCOMPtr
<
nsIMutableArray
>
mRefreshURIList
;
nsExpirationState
mExpirationState
;
nsAutoPtr
<
nsDocShellEditorData
>
mEditorData
;
nsWeakPtr
mSHistory
;
bool
mIsFrameNavigation
;
bool
mSaveLayoutState
;
bool
mSticky
;
bool
mDynamicallyCreated
;
bool
mExpired
;
}
;
#
endif
