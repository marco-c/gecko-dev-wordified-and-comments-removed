#
ifndef
nsSHEntryShared_h__
#
define
nsSHEntryShared_h__
#
include
"
nsCOMPtr
.
h
"
#
include
"
nsAutoPtr
.
h
"
#
include
"
nsCOMArray
.
h
"
#
include
"
nsIBFCacheEntry
.
h
"
#
include
"
nsIMutationObserver
.
h
"
#
include
"
nsExpirationTracker
.
h
"
#
include
"
nsRect
.
h
"
#
include
"
nsString
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
class
nsSHEntry
;
class
nsISHEntry
;
class
nsIDocument
;
class
nsIContentViewer
;
class
nsIDocShellTreeItem
;
class
nsILayoutHistoryState
;
class
nsDocShellEditorData
;
class
nsIMutableArray
;
class
nsSHEntryShared
final
:
public
nsIBFCacheEntry
public
nsIMutationObserver
{
public
:
static
void
EnsureHistoryTracker
(
)
;
static
void
Shutdown
(
)
;
nsSHEntryShared
(
)
;
NS_DECL_ISUPPORTS
NS_DECL_NSIMUTATIONOBSERVER
NS_DECL_NSIBFCACHEENTRY
nsExpirationState
*
GetExpirationState
(
)
{
return
&
mExpirationState
;
}
private
:
~
nsSHEntryShared
(
)
;
friend
class
nsSHEntry
;
friend
class
HistoryTracker
;
static
already_AddRefed
<
nsSHEntryShared
>
Duplicate
(
nsSHEntryShared
*
aEntry
)
;
void
RemoveFromExpirationTracker
(
)
;
void
Expire
(
)
;
nsresult
SyncPresentationState
(
)
;
void
DropPresentationState
(
)
;
nsresult
SetContentViewer
(
nsIContentViewer
*
aViewer
)
;
nsID
mDocShellID
;
nsCOMArray
<
nsIDocShellTreeItem
>
mChildShells
;
nsCOMPtr
<
nsIPrincipal
>
mTriggeringPrincipal
;
nsCOMPtr
<
nsIPrincipal
>
mPrincipalToInherit
;
nsCString
mContentType
;
bool
mIsFrameNavigation
;
bool
mSaveLayoutState
;
bool
mSticky
;
bool
mDynamicallyCreated
;
nsCOMPtr
<
nsISupports
>
mCacheKey
;
uint32_t
mLastTouched
;
uint64_t
mID
;
nsCOMPtr
<
nsIContentViewer
>
mContentViewer
;
nsCOMPtr
<
nsIDocument
>
mDocument
;
nsCOMPtr
<
nsILayoutHistoryState
>
mLayoutHistoryState
;
bool
mExpired
;
nsCOMPtr
<
nsISupports
>
mWindowState
;
nsIntRect
mViewerBounds
;
nsCOMPtr
<
nsIMutableArray
>
mRefreshURIList
;
nsExpirationState
mExpirationState
;
nsAutoPtr
<
nsDocShellEditorData
>
mEditorData
;
}
;
#
endif
