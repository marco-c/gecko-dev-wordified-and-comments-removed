#
ifndef
mozilla_Fuzzing_h
#
define
mozilla_Fuzzing_h
#
ifdef
FUZZING_SNAPSHOT
#
include
"
mozilla
/
fuzzing
/
NyxWrapper
.
h
"
#
ifdef
__cplusplus
#
include
"
mozilla
/
fuzzing
/
Nyx
.
h
"
#
include
"
mozilla
/
ScopeExit
.
h
"
#
define
MOZ_FUZZING_NYX_RELEASE
(
id
)
\
if
(
mozilla
:
:
fuzzing
:
:
Nyx
:
:
instance
(
)
.
is_enabled
(
id
)
)
{
\
mozilla
:
:
fuzzing
:
:
Nyx
:
:
instance
(
)
.
release
(
)
;
\
}
#
define
MOZ_FUZZING_NYX_GUARD
(
id
)
\
auto
nyxGuard
=
mozilla
:
:
MakeScopeExit
(
[
&
]
{
\
if
(
mozilla
:
:
fuzzing
:
:
Nyx
:
:
instance
(
)
.
is_enabled
(
id
)
)
{
\
mozilla
:
:
fuzzing
:
:
Nyx
:
:
instance
(
)
.
release
(
)
;
\
}
\
}
)
;
#
endif
#
define
MOZ_FUZZING_HANDLE_CRASH_EVENT2
(
aType
aReason
)
\
do
{
\
nyx_handle_event
(
aType
__FILE__
__LINE__
aReason
)
;
\
}
while
(
false
)
#
define
MOZ_FUZZING_HANDLE_CRASH_EVENT4
(
aType
aFilename
aLine
aReason
)
\
do
{
\
nyx_handle_event
(
aType
aFilename
aLine
aReason
)
;
\
}
while
(
false
)
#
else
#
define
MOZ_FUZZING_NYX_RELEASE
(
id
)
#
define
MOZ_FUZZING_NYX_GUARD
(
id
)
#
define
MOZ_FUZZING_HANDLE_CRASH_EVENT2
(
aType
aReason
)
\
do
{
\
}
while
(
false
)
#
define
MOZ_FUZZING_HANDLE_CRASH_EVENT4
(
aType
aFilename
aLine
aReason
)
\
do
{
\
}
while
(
false
)
#
endif
#
endif
