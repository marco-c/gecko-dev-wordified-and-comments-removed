#
ifndef
mozilla_ResultExtensions_h
#
define
mozilla_ResultExtensions_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
nscore
.
h
"
#
include
"
prtypes
.
h
"
namespace
mozilla
{
template
<
>
class
MOZ_MUST_USE_TYPE
GenericErrorResult
<
nsresult
>
{
nsresult
mErrorValue
;
template
<
typename
V
typename
E2
>
friend
class
Result
;
public
:
explicit
GenericErrorResult
(
nsresult
aErrorValue
)
:
mErrorValue
(
aErrorValue
)
{
MOZ_ASSERT
(
NS_FAILED
(
aErrorValue
)
)
;
}
operator
nsresult
(
)
{
return
mErrorValue
;
}
}
;
inline
Result
<
Ok
nsresult
>
ToResult
(
PRStatus
aValue
)
;
}
#
include
"
mozilla
/
Result
.
h
"
namespace
mozilla
{
inline
Result
<
Ok
nsresult
>
ToResult
(
nsresult
aValue
)
{
if
(
NS_FAILED
(
aValue
)
)
{
return
Err
(
aValue
)
;
}
return
Ok
(
)
;
}
inline
Result
<
Ok
nsresult
>
ToResult
(
PRStatus
aValue
)
{
if
(
aValue
=
=
PR_SUCCESS
)
{
return
Ok
(
)
;
}
return
Err
(
NS_ERROR_FAILURE
)
;
}
}
#
endif
