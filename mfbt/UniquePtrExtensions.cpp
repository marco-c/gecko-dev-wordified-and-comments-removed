#
include
"
UniquePtrExtensions
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
DebugOnly
.
h
"
#
ifdef
XP_WIN
#
include
<
windows
.
h
>
#
else
#
include
<
errno
.
h
>
#
include
<
unistd
.
h
>
#
endif
namespace
mozilla
{
namespace
detail
{
void
FileHandleDeleter
:
:
operator
(
)
(
FileHandleHelper
aHelper
)
{
if
(
aHelper
!
=
nullptr
)
{
DebugOnly
<
bool
>
ok
;
#
ifdef
XP_WIN
ok
=
CloseHandle
(
aHelper
)
;
#
else
ok
=
close
(
aHelper
)
=
=
0
|
|
errno
=
=
EINTR
;
#
endif
MOZ_ASSERT
(
ok
"
failed
to
close
file
handle
"
)
;
}
}
}
}
