#
ifndef
mozilla_CheckedArithmetic_h
#
define
mozilla_CheckedArithmetic_h
namespace
mozilla
{
template
<
typename
T
>
[
[
nodiscard
]
]
constexpr
bool
SafeAdd
(
T
lhs
T
rhs
T
*
res
)
{
return
!
__builtin_add_overflow
(
lhs
rhs
res
)
;
}
template
<
typename
T
>
[
[
nodiscard
]
]
constexpr
bool
SafeSub
(
T
lhs
T
rhs
T
*
res
)
{
return
!
__builtin_sub_overflow
(
lhs
rhs
res
)
;
}
template
<
typename
T
>
[
[
nodiscard
]
]
constexpr
bool
SafeMul
(
T
lhs
T
rhs
T
*
res
)
{
return
!
__builtin_mul_overflow
(
lhs
rhs
res
)
;
}
}
#
endif
