#
include
"
mozilla
/
DefineEnum
.
h
"
MOZ_DEFINE_ENUM
(
TestEnum1
(
EnumeratorA
EnumeratorB
EnumeratorC
)
)
;
static_assert
(
EnumeratorA
=
=
0
"
Unexpected
enumerator
value
"
)
;
static_assert
(
EnumeratorB
=
=
1
"
Unexpected
enumerator
value
"
)
;
static_assert
(
EnumeratorC
=
=
2
"
Unexpected
enumerator
value
"
)
;
static_assert
(
kHighestTestEnum1
=
=
EnumeratorC
"
Incorrect
highest
value
"
)
;
static_assert
(
kTestEnum1Count
=
=
3
"
Incorrect
enumerator
count
"
)
;
MOZ_DEFINE_ENUM_CLASS
(
TestEnum2
(
A
B
C
)
)
;
static_assert
(
TestEnum2
:
:
A
=
=
TestEnum2
(
0
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
TestEnum2
:
:
B
=
=
TestEnum2
(
1
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
TestEnum2
:
:
C
=
=
TestEnum2
(
2
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
kHighestTestEnum2
=
=
TestEnum2
:
:
C
"
Incorrect
highest
value
"
)
;
static_assert
(
kTestEnum2Count
=
=
3
"
Incorrect
enumerator
count
"
)
;
struct
TestClass
{
MOZ_DEFINE_ENUM_AT_CLASS_SCOPE
(
TestEnum3
(
EnumeratorA
EnumeratorB
EnumeratorC
)
)
;
MOZ_DEFINE_ENUM_CLASS_AT_CLASS_SCOPE
(
TestEnum4
(
A
B
C
)
)
;
static_assert
(
EnumeratorA
=
=
0
"
Unexpected
enumerator
value
"
)
;
static_assert
(
EnumeratorB
=
=
1
"
Unexpected
enumerator
value
"
)
;
static_assert
(
EnumeratorC
=
=
2
"
Unexpected
enumerator
value
"
)
;
static_assert
(
sHighestTestEnum3
=
=
EnumeratorC
"
Incorrect
highest
value
"
)
;
static_assert
(
sTestEnum3Count
=
=
3
"
Incorrect
enumerator
count
"
)
;
static_assert
(
TestEnum4
:
:
A
=
=
TestEnum4
(
0
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
TestEnum4
:
:
B
=
=
TestEnum4
(
1
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
TestEnum4
:
:
C
=
=
TestEnum4
(
2
)
"
Unexpected
enumerator
value
"
)
;
static_assert
(
sHighestTestEnum4
=
=
TestEnum4
:
:
C
"
Incorrect
highest
value
"
)
;
static_assert
(
sTestEnum4Count
=
=
3
"
Incorrect
enumerator
count
"
)
;
}
;
#
ifdef
CONFIRM_COMPILATION_ERRORS
MOZ_DEFINE_ENUM_CLASS
(
EnumWithInitializer1
(
A
=
-
1
B
C
)
)
MOZ_DEFINE_ENUM_CLASS
(
EnumWithInitializer2
(
A
=
1
B
C
)
)
MOZ_DEFINE_ENUM_CLASS
(
EnumWithInitializer3
(
A
B
=
6
C
)
)
#
endif
int
main
(
)
{
return
0
;
}
