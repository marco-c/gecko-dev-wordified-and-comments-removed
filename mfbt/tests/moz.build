if
CONFIG
[
"
MOZ_WIDGET_TOOLKIT
"
]
:
TEST_DIRS
+
=
[
"
gtest
"
]
CppUnitTests
(
[
"
TestAlgorithm
"
"
TestArray
"
"
TestArrayUtils
"
"
TestAtomicBitfields
"
"
TestAtomics
"
"
TestBinarySearch
"
"
TestBloomFilter
"
"
TestBufferList
"
"
TestCasting
"
"
TestCeilingFloor
"
"
TestCheckedInt
"
"
TestCompactPair
"
"
TestCountPopulation
"
"
TestCountZeroes
"
"
TestDefineEnum
"
"
TestDoublyLinkedList
"
"
TestEndian
"
"
TestEnumeratedArray
"
"
TestEnumSet
"
"
TestEnumTypeTraits
"
"
TestFastBernoulliTrial
"
"
TestFloatingPoint
"
"
TestFunctionRef
"
"
TestFunctionTypeTraits
"
"
TestHashTable
"
"
TestIntegerPrintfMacros
"
"
TestIntegerRange
"
"
TestJSONWriter
"
"
TestLinkedList
"
"
TestMacroArgs
"
"
TestMacroForEach
"
"
TestMathAlgorithms
"
"
TestMaybe
"
"
TestNonDereferenceable
"
"
TestNotNull
"
"
TestRandomNum
"
"
TestRange
"
"
TestRefPtr
"
"
TestResult
"
"
TestRollingMean
"
"
TestSaturate
"
"
TestScopeExit
"
"
TestSegmentedVector
"
"
TestSHA1
"
"
TestSmallPointerArray
"
"
TestSplayTree
"
"
TestSPSCQueue
"
"
TestTainting
"
"
TestTemplateLib
"
"
TestTextUtils
"
"
TestThreadSafeWeakPtr
"
"
TestTuple
"
"
TestTypedEnum
"
"
TestTypeTraits
"
"
TestUniquePtr
"
"
TestVariant
"
"
TestVector
"
"
TestWeakPtr
"
"
TestWrappingOperations
"
"
TestXorShift128PlusRNG
"
]
)
CppUnitTests
(
[
"
TestUtf8
"
]
)
if
not
CONFIG
[
"
MOZ_ASAN
"
]
:
CppUnitTests
(
[
"
TestPoisonArea
"
]
)
DEFINES
[
"
IMPL_MFBT
"
]
=
True
DisableStlWrapping
(
)
if
CONFIG
[
"
CC_TYPE
"
]
=
=
"
clang
-
cl
"
:
CXXFLAGS
+
=
[
"
-
wd4275
"
"
-
wd4530
"
]
USE_LIBS
+
=
[
"
mfbt
"
]
if
CONFIG
[
"
CC_TYPE
"
]
in
(
"
clang
"
"
gcc
"
)
:
CXXFLAGS
+
=
[
"
-
Wno
-
error
=
shadow
"
]
