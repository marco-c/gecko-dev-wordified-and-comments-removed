#
ifndef
mozilla_TextUtils_h
#
define
mozilla_TextUtils_h
#
include
"
mozilla
/
Assertions
.
h
"
#
include
"
mozilla
/
TypeTraits
.
h
"
namespace
mozilla
{
namespace
detail
{
template
<
typename
Char
>
class
MakeUnsignedChar
:
public
MakeUnsigned
<
Char
>
{
}
;
template
<
>
class
MakeUnsignedChar
<
char16_t
>
{
public
:
using
Type
=
char16_t
;
}
;
template
<
>
class
MakeUnsignedChar
<
char32_t
>
{
public
:
using
Type
=
char32_t
;
}
;
}
template
<
typename
Char
>
constexpr
bool
IsAscii
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
uc
<
0x80
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiWhitespace
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
uc
=
=
0x9
|
|
uc
=
=
0xA
|
|
uc
=
=
0xC
|
|
uc
=
=
0xD
|
|
uc
=
=
0x20
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiLowercaseAlpha
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
'
a
'
<
=
uc
&
&
uc
<
=
'
z
'
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiUppercaseAlpha
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
'
A
'
<
=
uc
&
&
uc
<
=
'
Z
'
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiAlpha
(
Char
aChar
)
{
return
IsAsciiLowercaseAlpha
(
aChar
)
|
|
IsAsciiUppercaseAlpha
(
aChar
)
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiDigit
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
'
0
'
<
=
uc
&
&
uc
<
=
'
9
'
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiHexDigit
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
return
(
'
0
'
<
=
uc
&
&
uc
<
=
'
9
'
)
|
|
(
'
a
'
<
=
uc
&
&
uc
<
=
'
f
'
)
|
|
(
'
A
'
<
=
uc
&
&
uc
<
=
'
F
'
)
;
}
template
<
typename
Char
>
constexpr
bool
IsAsciiAlphanumeric
(
Char
aChar
)
{
return
IsAsciiDigit
(
aChar
)
|
|
IsAsciiAlpha
(
aChar
)
;
}
template
<
typename
Char
>
uint8_t
AsciiAlphanumericToNumber
(
Char
aChar
)
{
using
UnsignedChar
=
typename
detail
:
:
MakeUnsignedChar
<
Char
>
:
:
Type
;
auto
uc
=
static_cast
<
UnsignedChar
>
(
aChar
)
;
if
(
'
0
'
<
=
uc
&
&
uc
<
=
'
9
'
)
{
return
uc
-
'
0
'
;
}
if
(
'
A
'
<
=
uc
&
&
uc
<
=
'
Z
'
)
{
return
uc
-
'
A
'
+
10
;
}
MOZ_ASSERT
(
'
a
'
<
=
uc
&
&
uc
<
=
'
z
'
"
non
-
ASCII
alphanumeric
character
can
'
t
be
converted
to
number
"
)
;
return
uc
-
'
a
'
+
10
;
}
}
#
endif
