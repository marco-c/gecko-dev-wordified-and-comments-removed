depends
(
linker_optimize_flags
moz_optimize_flags
lto
c_compiler
)
def
moz_optimize_ldflags
(
linker_optimize_flags
moz_optimize_flags
lto
c_compiler
)
:
flags
=
[
]
if
linker_optimize_flags
:
flags
+
=
linker_optimize_flags
.
ldflags
flags
+
=
moz_optimize_flags
if
lto
and
lto
.
enabled
and
c_compiler
.
type
=
=
"
clang
"
:
flags
=
[
"
-
O2
"
if
flag
in
(
"
-
Oz
"
"
-
Os
"
)
else
flag
for
flag
in
flags
]
return
flags
set_config
(
"
MOZ_OPTIMIZE_LDFLAGS
"
moz_optimize_ldflags
)
