#
ifndef
FileOperations_h
#
define
FileOperations_h
#
include
<
stdio
.
h
>
#
include
<
string
>
#
if
defined
(
_WIN32
)
|
|
defined
(
_WIN64
)
#
include
<
windows
.
h
>
#
define
PATHSEP_CHAR
'
\
\
'
#
define
PATHSEP_STRING
"
\
\
"
#
else
#
define
PATHSEP_CHAR
'
/
'
#
define
PATHSEP_STRING
"
/
"
#
endif
void
ensurePath
(
std
:
:
string
Path
)
;
std
:
:
string
getAbsolutePath
(
const
std
:
:
string
&
Filename
)
;
struct
AutoLockFile
{
std
:
:
string
Filename
;
#
if
defined
(
_WIN32
)
|
|
defined
(
_WIN64
)
HANDLE
Handle
=
NULL
;
#
else
int
FileDescriptor
=
-
1
;
#
endif
AutoLockFile
(
const
std
:
:
string
&
SrcFile
const
std
:
:
string
&
DstFile
)
;
~
AutoLockFile
(
)
;
bool
success
(
)
;
FILE
*
openTmp
(
)
;
bool
moveTmp
(
)
;
}
;
#
endif
