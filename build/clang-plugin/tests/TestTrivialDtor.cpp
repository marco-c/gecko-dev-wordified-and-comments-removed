#
define
MOZ_TRIVIAL_DTOR
__attribute__
(
(
annotate
(
"
moz_trivial_dtor
"
)
)
)
struct
MOZ_TRIVIAL_DTOR
EmptyClass
{
}
;
template
<
class
T
>
struct
MOZ_TRIVIAL_DTOR
TemplateEmptyClass
{
}
;
struct
MOZ_TRIVIAL_DTOR
NonEmptyClass
{
void
*
m
;
}
;
template
<
class
T
>
struct
MOZ_TRIVIAL_DTOR
TemplateNonEmptyClass
{
T
*
m
;
}
;
struct
MOZ_TRIVIAL_DTOR
BadUserDefinedDtor
{
~
BadUserDefinedDtor
(
)
{
}
}
;
struct
MOZ_TRIVIAL_DTOR
BadVirtualDtor
{
virtual
~
BadVirtualDtor
(
)
{
}
}
;
struct
MOZ_TRIVIAL_DTOR
OkVirtualMember
{
virtual
void
f
(
)
;
}
;
void
foo
(
)
;
struct
MOZ_TRIVIAL_DTOR
BadNonEmptyCtorDtor
{
BadNonEmptyCtorDtor
(
)
{
foo
(
)
;
}
~
BadNonEmptyCtorDtor
(
)
{
foo
(
)
;
}
}
;
struct
NonTrivialDtor
{
~
NonTrivialDtor
(
)
{
foo
(
)
;
}
}
;
struct
VirtualMember
{
virtual
void
f
(
)
;
}
;
struct
MOZ_TRIVIAL_DTOR
BadNonTrivialDtorInBase
:
NonTrivialDtor
{
}
;
struct
MOZ_TRIVIAL_DTOR
BadNonTrivialDtorInMember
{
NonTrivialDtor
m
;
}
;
struct
MOZ_TRIVIAL_DTOR
OkVirtualMemberInMember
{
VirtualMember
m
;
}
;
