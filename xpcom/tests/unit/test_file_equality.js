var
LocalFile
=
CC
(
"
mozilla
.
org
/
file
/
local
;
1
"
"
nsIFile
"
"
initWithPath
"
)
;
const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
function
run_test
(
)
{
test_normalized_vs_non_normalized
(
)
;
}
function
test_normalized_vs_non_normalized
(
)
{
var
tmp1
=
Services
.
dirsvc
.
get
(
"
TmpD
"
Ci
.
nsIFile
)
;
var
exists
=
tmp1
.
exists
(
)
;
Assert
.
ok
(
exists
)
;
if
(
!
exists
)
return
;
tmp1
.
normalize
(
)
;
var
tmp2
=
new
LocalFile
(
tmp1
.
path
)
;
Assert
.
ok
(
tmp1
.
equals
(
tmp2
)
)
;
tmp2
.
appendRelativePath
(
"
.
"
)
;
Assert
.
ok
(
!
tmp1
.
equals
(
tmp2
)
)
;
tmp2
.
normalize
(
)
;
Assert
.
ok
(
tmp1
.
equals
(
tmp2
)
)
;
}
