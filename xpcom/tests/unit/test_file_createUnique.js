const
{
Services
}
=
ChromeUtils
.
import
(
"
resource
:
/
/
gre
/
modules
/
Services
.
jsm
"
)
;
function
run_test
(
)
{
var
longLeafName
=
new
Array
(
256
)
.
join
(
"
T
"
)
;
var
tempFile
=
Services
.
dirsvc
.
get
(
"
TmpD
"
Ci
.
nsIFile
)
;
tempFile
.
append
(
longLeafName
)
;
tempFile
.
append
(
"
test
.
txt
"
)
;
try
{
tempFile
.
createUnique
(
Ci
.
nsIFile
.
NORMAL_FILE_TYPE
0o600
)
;
do_throw
(
"
Creating
an
item
in
a
folder
with
a
very
long
name
should
throw
"
)
;
}
catch
(
e
)
{
if
(
!
(
e
instanceof
Ci
.
nsIException
&
&
e
.
result
=
=
Cr
.
NS_ERROR_FILE_UNRECOGNIZED_PATH
)
)
{
throw
e
;
}
}
}
