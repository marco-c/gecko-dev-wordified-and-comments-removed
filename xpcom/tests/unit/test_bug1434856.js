function
run_test
(
)
{
let
complete
=
false
;
let
runnable
=
{
internalQI
:
ChromeUtils
.
generateQI
(
[
"
nsIRunnable
"
]
)
QueryInterface
(
iid
)
{
Services
.
tm
.
dispatchToMainThread
(
(
)
=
>
false
)
;
return
this
.
internalQI
(
iid
)
;
}
run
(
)
{
complete
=
true
;
}
}
;
Services
.
tm
.
dispatchToMainThread
(
runnable
)
;
Services
.
tm
.
spinEventLoopUntil
(
"
Test
(
test_bug1434856
.
js
:
run_test
)
"
(
)
=
>
complete
)
;
}
