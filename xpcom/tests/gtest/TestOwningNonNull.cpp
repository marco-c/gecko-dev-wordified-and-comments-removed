#
include
"
mozilla
/
OwningNonNull
.
h
"
#
include
"
mozilla
/
RefCounted
.
h
"
#
include
"
mozilla
/
RefPtr
.
h
"
#
include
"
gtest
/
gtest
.
h
"
using
namespace
mozilla
;
struct
OwnedRefCounted
:
public
RefCounted
<
OwnedRefCounted
>
{
MOZ_DECLARE_REFCOUNTED_TYPENAME
(
OwnedRefCounted
)
OwnedRefCounted
(
)
=
default
;
private
:
~
OwnedRefCounted
(
)
=
default
;
}
;
TEST
(
OwningNonNull
Move
)
{
auto
refptr
=
MakeRefPtr
<
OwnedRefCounted
>
(
)
;
OwningNonNull
<
OwnedRefCounted
>
owning
(
std
:
:
move
(
refptr
)
)
;
EXPECT_FALSE
(
!
!
refptr
)
;
}
