TEST_DIRS
+
=
[
"
gtest
"
]
if
CONFIG
[
"
OS_ARCH
"
]
=
=
"
WINNT
"
:
TEST_DIRS
+
=
[
"
windows
"
]
if
CONFIG
[
"
OS_TARGET
"
]
=
=
"
Linux
"
:
CppUnitTests
(
[
"
TestMemoryPressureWatcherLinux
"
]
)
EXPORTS
.
testing
+
=
[
"
TestHarness
.
h
"
]
test_progs
=
[
"
TestArguments
"
"
TestBlockingProcess
"
"
TestPRIntN
"
"
TestQuickReturn
"
"
TestUnicodeArguments
"
]
SimplePrograms
(
test_progs
)
USE_LIBS
+
=
[
"
mozglue
"
]
if
CONFIG
[
"
MOZ_ASAN
"
]
or
CONFIG
[
"
MOZ_UBSAN
"
]
or
CONFIG
[
"
MOZ_TSAN
"
]
:
USE_LIBS
+
=
[
"
sanitizer
-
options
"
]
XPCSHELL_TESTS_MANIFESTS
+
=
[
"
unit
/
xpcshell
.
toml
"
]
if
CONFIG
[
"
COMPILE_ENVIRONMENT
"
]
:
TEST_HARNESS_FILES
.
xpcshell
.
xpcom
.
tests
.
unit
+
=
[
"
!
%
s
%
s
"
%
(
f
CONFIG
[
"
BIN_SUFFIX
"
]
)
for
f
in
test_progs
]
XPIDL_MODULE
=
"
xpcomtest
"
XPIDL_SOURCES
+
=
[
"
NotXPCOMTest
.
idl
"
]
LOCAL_INCLUDES
+
=
[
"
.
.
/
base
"
"
.
.
/
ds
"
]
CRASHTEST_MANIFESTS
+
=
[
"
crashtests
/
crashtests
.
list
"
]
