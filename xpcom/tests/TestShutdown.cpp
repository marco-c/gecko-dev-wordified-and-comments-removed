#
include
"
nsIServiceManager
.
h
"
void
main
(
int
argc
char
*
argv
[
]
)
{
nsIServiceManager
*
servMgr
;
nsresult
rv
=
NS_InitXPCOM
(
&
servMgr
nullptr
nullptr
)
;
MOZ_RELEASE_ASSERT
(
NS_SUCCEEDED
(
rv
)
"
NS_InitXPCOM
failed
"
)
;
if
(
argc
>
1
&
&
argv
[
1
]
!
=
nullptr
)
{
char
*
cidStr
=
argv
[
1
]
;
nsISupports
*
obj
=
nullptr
;
if
(
cidStr
[
0
]
=
=
'
{
'
)
{
nsCID
cid
;
cid
.
Parse
(
cidStr
)
;
rv
=
CallCreateInstance
(
cid
&
obj
)
;
}
else
{
rv
=
CallCreateInstance
(
cidStr
&
obj
)
;
}
if
(
NS_SUCCEEDED
(
rv
)
)
{
printf
(
"
Successfully
created
%
s
\
n
"
cidStr
)
;
NS_RELEASE
(
obj
)
;
}
else
{
printf
(
"
Failed
to
create
%
s
(
%
x
)
\
n
"
cidStr
rv
)
;
}
}
rv
=
NS_ShutdownXPCOM
(
servMgr
)
;
MOZ_RELEASE_ASSERT
(
NS_SUCCEEDED
(
rv
)
"
NS_ShutdownXPCOM
failed
"
)
;
}
