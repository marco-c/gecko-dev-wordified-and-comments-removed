extern
crate
nsstring
;
use
nsstring
:
:
{
nsCString
nsACString
}
;
#
[
allow
(
non_camel_case_types
)
]
pub
type
nsresult
=
u32
;
pub
trait
NsresultExt
{
fn
failed
(
self
)
-
>
bool
;
fn
succeeded
(
self
)
-
>
bool
;
fn
to_result
(
self
)
-
>
Result
<
nsresult
nsresult
>
;
fn
error_name
(
self
)
-
>
nsCString
<
'
static
>
;
}
impl
NsresultExt
for
nsresult
{
fn
failed
(
self
)
-
>
bool
{
(
self
>
>
31
)
!
=
0
}
fn
succeeded
(
self
)
-
>
bool
{
!
self
.
failed
(
)
}
fn
to_result
(
self
)
-
>
Result
<
nsresult
nsresult
>
{
if
self
.
failed
(
)
{
Err
(
self
)
}
else
{
Ok
(
self
)
}
}
fn
error_name
(
self
)
-
>
nsCString
<
'
static
>
{
let
mut
cstr
=
nsCString
:
:
new
(
)
;
unsafe
{
Gecko_GetErrorName
(
self
&
mut
*
cstr
)
;
}
cstr
}
}
extern
"
C
"
{
fn
Gecko_GetErrorName
(
rv
:
nsresult
cstr
:
*
mut
nsACString
)
;
}
mod
error_list
{
include
!
(
concat
!
(
env
!
(
"
MOZ_OBJDIR
"
)
"
/
xpcom
/
base
/
error_list
.
rs
"
)
)
;
}
pub
use
error_list
:
:
*
;
