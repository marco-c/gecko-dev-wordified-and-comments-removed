use
libc
:
:
c_char
;
#
[
macro_export
]
macro_rules
!
c_str
{
(
str
:
expr
)
=
>
{
crate
:
:
NulTerminatedCStr
(
concat
!
(
str
'
\
0
'
)
.
as_bytes
(
)
)
}
;
}
pub
struct
NulTerminatedCStr
(
pub
&
'
static
[
u8
]
)
;
impl
NulTerminatedCStr
{
#
[
inline
]
pub
fn
as_ptr
(
&
self
)
-
>
*
const
c_char
{
assert_eq
!
(
self
.
0
.
last
(
)
Some
(
&
0
)
"
C
strings
must
be
nul
-
terminated
"
)
;
self
.
0
as
*
const
[
u8
]
as
*
const
c_char
}
}
