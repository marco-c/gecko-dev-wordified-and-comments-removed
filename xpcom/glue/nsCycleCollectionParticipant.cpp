#
include
"
nsCycleCollectionParticipant
.
h
"
#
include
"
nsCOMPtr
.
h
"
NS_IMETHODIMP_
(
void
)
nsXPCOMCycleCollectionParticipant
:
:
Root
(
void
*
aPtr
)
{
nsISupports
*
s
=
static_cast
<
nsISupports
*
>
(
aPtr
)
;
NS_ADDREF
(
s
)
;
}
NS_IMETHODIMP_
(
void
)
nsXPCOMCycleCollectionParticipant
:
:
Unroot
(
void
*
aPtr
)
{
nsISupports
*
s
=
static_cast
<
nsISupports
*
>
(
aPtr
)
;
NS_RELEASE
(
s
)
;
}
NS_IMETHODIMP_
(
void
)
nsXPCOMCycleCollectionParticipant
:
:
Trace
(
void
*
aPtr
const
TraceCallbacks
&
aCb
void
*
aClosure
)
{
}
bool
nsXPCOMCycleCollectionParticipant
:
:
CheckForRightISupports
(
nsISupports
*
aSupports
)
{
nsISupports
*
foo
;
aSupports
-
>
QueryInterface
(
NS_GET_IID
(
nsCycleCollectionISupports
)
reinterpret_cast
<
void
*
*
>
(
&
foo
)
)
;
return
aSupports
=
=
foo
;
}
