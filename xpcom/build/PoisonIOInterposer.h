#
ifndef
mozilla_PoisonIOInterposer_h
#
define
mozilla_PoisonIOInterposer_h
#
include
"
mozilla
/
Types
.
h
"
#
include
<
stdio
.
h
>
#
ifdef
_WIN32
typedef
void
*
platform_handle_t
;
#
else
typedef
int
platform_handle_t
;
#
endif
MOZ_BEGIN_EXTERN_C
void
MozillaRegisterDebugHandle
(
platform_handle_t
aHandle
)
;
void
MozillaRegisterDebugFD
(
int
aFd
)
;
void
MozillaRegisterDebugFILE
(
FILE
*
aFile
)
;
void
MozillaUnRegisterDebugHandle
(
platform_handle_t
aHandle
)
;
void
MozillaUnRegisterDebugFD
(
int
aFd
)
;
void
MozillaUnRegisterDebugFILE
(
FILE
*
aFile
)
;
MOZ_END_EXTERN_C
#
if
defined
(
XP_MACOSX
)
|
|
defined
(
XP_WIN
)
#
ifdef
__cplusplus
namespace
mozilla
{
bool
IsDebugFile
(
platform_handle_t
aFileID
)
;
void
InitPoisonIOInterposer
(
)
;
#
ifdef
XP_MACOSX
void
OnlyReportDirtyWrites
(
)
;
#
endif
void
ClearPoisonIOInterposer
(
)
;
}
#
endif
#
else
#
ifdef
__cplusplus
namespace
mozilla
{
inline
bool
IsDebugFile
(
platform_handle_t
aFileID
)
{
return
true
;
}
inline
void
InitPoisonIOInterposer
(
)
{
}
inline
void
ClearPoisonIOInterposer
(
)
{
}
#
ifdef
XP_MACOSX
inline
void
OnlyReportDirtyWrites
(
)
{
}
#
endif
}
#
endif
#
endif
#
endif
