#
include
"
SystemGroup
.
h
"
#
include
"
mozilla
/
Move
.
h
"
#
include
"
nsINamed
.
h
"
using
namespace
mozilla
;
nsresult
SystemGroup
:
:
Dispatch
(
const
char
*
aName
TaskCategory
aCategory
already_AddRefed
<
nsIRunnable
>
&
&
aRunnable
)
{
nsCOMPtr
<
nsIRunnable
>
runnable
(
aRunnable
)
;
if
(
aName
)
{
if
(
nsCOMPtr
<
nsINamed
>
named
=
do_QueryInterface
(
runnable
)
)
{
named
-
>
SetName
(
aName
)
;
}
}
if
(
NS_IsMainThread
(
)
)
{
return
NS_DispatchToCurrentThread
(
runnable
.
forget
(
)
)
;
}
else
{
return
NS_DispatchToMainThread
(
runnable
.
forget
(
)
)
;
}
}
nsIEventTarget
*
SystemGroup
:
:
EventTargetFor
(
TaskCategory
aCategory
)
{
nsCOMPtr
<
nsIEventTarget
>
main
=
do_GetMainThread
(
)
;
return
main
;
}
