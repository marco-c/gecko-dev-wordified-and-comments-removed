#
ifndef
mozilla_ThreadEventTarget_h
#
define
mozilla_ThreadEventTarget_h
#
include
"
mozilla
/
Mutex
.
h
"
#
include
"
mozilla
/
SynchronizedEventQueue
.
h
"
#
include
"
nsISerialEventTarget
.
h
"
namespace
mozilla
{
class
ThreadEventTarget
final
:
public
nsISerialEventTarget
{
public
:
ThreadEventTarget
(
ThreadTargetSink
*
aSink
bool
aIsMainThread
)
;
NS_DECL_THREADSAFE_ISUPPORTS
NS_DECL_NSIEVENTTARGET_FULL
void
Disconnect
(
const
MutexAutoLock
&
aProofOfLock
)
{
mSink
-
>
Disconnect
(
aProofOfLock
)
;
}
void
SetCurrentThread
(
)
;
private
:
~
ThreadEventTarget
(
)
{
}
RefPtr
<
ThreadTargetSink
>
mSink
;
bool
mIsMainThread
;
}
;
}
#
endif
