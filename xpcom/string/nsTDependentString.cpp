nsTDependentString_CharT
:
:
nsTDependentString_CharT
(
const
char_type
*
aStart
const
char_type
*
aEnd
)
:
string_type
(
const_cast
<
char_type
*
>
(
aStart
)
uint32_t
(
aEnd
-
aStart
)
DataFlags
:
:
TERMINATED
ClassFlags
(
0
)
)
{
MOZ_RELEASE_ASSERT
(
aStart
<
=
aEnd
"
Overflow
!
"
)
;
AssertValidDependentString
(
)
;
}
void
nsTDependentString_CharT
:
:
Rebind
(
const
string_type
&
str
uint32_t
startPos
)
{
MOZ_ASSERT
(
str
.
GetDataFlags
(
)
&
DataFlags
:
:
TERMINATED
"
Unterminated
flat
string
"
)
;
Finalize
(
)
;
size_type
strLength
=
str
.
Length
(
)
;
if
(
startPos
>
strLength
)
{
startPos
=
strLength
;
}
char_type
*
newData
=
const_cast
<
char_type
*
>
(
static_cast
<
const
char_type
*
>
(
str
.
Data
(
)
)
)
+
startPos
;
size_type
newLen
=
strLength
-
startPos
;
DataFlags
newDataFlags
=
str
.
GetDataFlags
(
)
&
(
DataFlags
:
:
TERMINATED
|
DataFlags
:
:
LITERAL
)
;
SetData
(
newData
newLen
newDataFlags
)
;
}
void
nsTDependentString_CharT
:
:
Rebind
(
const
char_type
*
aStart
const
char_type
*
aEnd
)
{
MOZ_RELEASE_ASSERT
(
aStart
<
=
aEnd
"
Overflow
!
"
)
;
Rebind
(
aStart
uint32_t
(
aEnd
-
aStart
)
)
;
}
