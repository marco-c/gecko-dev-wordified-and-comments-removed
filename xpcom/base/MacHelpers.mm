#
include
"
nsString
.
h
"
#
include
"
MacHelpers
.
h
"
#
include
"
MacStringHelpers
.
h
"
#
include
"
nsObjCExceptions
.
h
"
#
import
<
Foundation
/
Foundation
.
h
>
namespace
mozilla
{
nsresult
GetSelectedCityInfo
(
nsAString
&
aCountryCode
)
{
NS_OBJC_BEGIN_TRY_BLOCK_RETURN
;
id
countryCode
=
[
[
NSLocale
currentLocale
]
objectForKey
:
NSLocaleCountryCode
]
;
if
(
!
[
countryCode
isKindOfClass
:
[
NSString
class
]
]
)
{
return
NS_ERROR_FAILURE
;
}
mozilla
:
:
CopyNSStringToXPCOMString
(
(
NSString
*
)
countryCode
aCountryCode
)
;
return
NS_OK
;
NS_OBJC_END_TRY_BLOCK_RETURN
(
NS_ERROR_FAILURE
)
;
}
}
