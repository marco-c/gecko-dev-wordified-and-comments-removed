#
include
"
nsISupportsImpl
.
h
"
#
include
"
mozilla
/
Assertions
.
h
"
nsresult
NS_FASTCALL
NS_TableDrivenQI
(
void
*
aThis
REFNSIID
aIID
void
*
*
aInstancePtr
const
QITableEntry
*
aEntries
)
{
do
{
if
(
aIID
.
Equals
(
*
aEntries
-
>
iid
)
)
{
nsISupports
*
r
=
reinterpret_cast
<
nsISupports
*
>
(
reinterpret_cast
<
char
*
>
(
aThis
)
+
aEntries
-
>
offset
)
;
NS_ADDREF
(
r
)
;
*
aInstancePtr
=
r
;
return
NS_OK
;
}
+
+
aEntries
;
}
while
(
aEntries
-
>
iid
)
;
*
aInstancePtr
=
nullptr
;
return
NS_ERROR_NO_INTERFACE
;
}
#
ifdef
MOZ_THREAD_SAFETY_OWNERSHIP_CHECKS_SUPPORTED
void
nsAutoOwningThread
:
:
AssertCurrentThreadOwnsMe
(
const
char
*
msg
)
const
{
if
(
MOZ_UNLIKELY
(
mThread
!
=
PR_GetCurrentThread
(
)
)
)
{
MOZ_CRASH_UNSAFE_OOL
(
msg
)
;
}
}
#
endif
