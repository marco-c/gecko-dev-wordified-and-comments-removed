#
ifndef
mozilla_GenericModule_h
#
define
mozilla_GenericModule_h
#
include
"
mozilla
/
Attributes
.
h
"
#
include
"
mozilla
/
Module
.
h
"
#
define
NS_GENERIC_FACTORY_CONSTRUCTOR
(
_InstanceClass
)
\
static
nsresult
\
_InstanceClass
#
#
Constructor
(
nsISupports
*
aOuter
REFNSIID
aIID
\
void
*
*
aResult
)
\
{
\
RefPtr
<
_InstanceClass
>
inst
;
\
\
*
aResult
=
nullptr
;
\
if
(
nullptr
!
=
aOuter
)
{
\
return
NS_ERROR_NO_AGGREGATION
;
\
}
\
\
inst
=
new
_InstanceClass
(
)
;
\
return
inst
-
>
QueryInterface
(
aIID
aResult
)
;
\
}
#
define
NS_GENERIC_FACTORY_CONSTRUCTOR_INIT
(
_InstanceClass
_InitMethod
)
\
static
nsresult
\
_InstanceClass
#
#
Constructor
(
nsISupports
*
aOuter
REFNSIID
aIID
\
void
*
*
aResult
)
\
{
\
nsresult
rv
;
\
\
RefPtr
<
_InstanceClass
>
inst
;
\
\
*
aResult
=
nullptr
;
\
if
(
nullptr
!
=
aOuter
)
{
\
return
NS_ERROR_NO_AGGREGATION
;
\
}
\
\
inst
=
new
_InstanceClass
(
)
;
\
rv
=
inst
-
>
_InitMethod
(
)
;
\
if
(
NS_SUCCEEDED
(
rv
)
)
{
\
rv
=
inst
-
>
QueryInterface
(
aIID
aResult
)
;
\
}
\
\
return
rv
;
\
}
#
define
NS_GENERIC_FACTORY_SINGLETON_CONSTRUCTOR
(
_InstanceClass
_GetterProc
)
\
static
nsresult
\
_InstanceClass
#
#
Constructor
(
nsISupports
*
aOuter
REFNSIID
aIID
\
void
*
*
aResult
)
\
{
\
RefPtr
<
_InstanceClass
>
inst
;
\
\
*
aResult
=
nullptr
;
\
if
(
nullptr
!
=
aOuter
)
{
\
return
NS_ERROR_NO_AGGREGATION
;
\
}
\
\
inst
=
already_AddRefed
<
_InstanceClass
>
(
_GetterProc
(
)
)
;
\
if
(
nullptr
=
=
inst
)
{
\
return
NS_ERROR_OUT_OF_MEMORY
;
\
}
\
return
inst
-
>
QueryInterface
(
aIID
aResult
)
;
\
}
#
endif
