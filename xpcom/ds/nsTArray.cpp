#
include
<
string
.
h
>
#
include
"
nsTArray
.
h
"
#
include
"
nsXPCOM
.
h
"
#
include
"
nsDebug
.
h
"
#
include
"
mozilla
/
CheckedInt
.
h
"
#
include
"
mozilla
/
IntegerPrintfMacros
.
h
"
alignas
(
8
)
const
nsTArrayHeader
sEmptyTArrayHeader
=
{
0
0
0
}
;
bool
IsTwiceTheRequiredBytesRepresentableAsUint32
(
size_t
aCapacity
size_t
aElemSize
)
{
using
mozilla
:
:
CheckedUint32
;
return
(
(
CheckedUint32
(
aCapacity
)
*
aElemSize
)
*
2
)
.
isValid
(
)
;
}
MOZ_NORETURN
MOZ_COLD
void
InvalidArrayIndex_CRASH
(
size_t
aIndex
size_t
aLength
)
{
MOZ_CRASH_UNSAFE_PRINTF
(
"
ElementAt
(
aIndex
=
%
"
PRIu64
"
aLength
=
%
"
PRIu64
"
)
"
static_cast
<
uint64_t
>
(
aIndex
)
static_cast
<
uint64_t
>
(
aLength
)
)
;
}
