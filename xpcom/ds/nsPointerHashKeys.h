#
ifndef
nsPointerHashKeys_h
#
define
nsPointerHashKeys_h
#
include
"
nscore
.
h
"
#
include
"
mozilla
/
Attributes
.
h
"
template
<
class
T
>
class
nsPtrHashKey
:
public
PLDHashEntryHdr
{
public
:
typedef
T
*
KeyType
;
typedef
const
T
*
KeyTypePointer
;
explicit
nsPtrHashKey
(
const
T
*
aKey
)
:
mKey
(
const_cast
<
T
*
>
(
aKey
)
)
{
}
nsPtrHashKey
(
const
nsPtrHashKey
<
T
>
&
aToCopy
)
:
mKey
(
aToCopy
.
mKey
)
{
}
~
nsPtrHashKey
(
)
{
}
KeyType
GetKey
(
)
const
{
return
mKey
;
}
bool
KeyEquals
(
KeyTypePointer
aKey
)
const
{
return
aKey
=
=
mKey
;
}
static
KeyTypePointer
KeyToPointer
(
KeyType
aKey
)
{
return
aKey
;
}
static
PLDHashNumber
HashKey
(
KeyTypePointer
aKey
)
{
return
NS_PTR_TO_UINT32
(
aKey
)
>
>
2
;
}
enum
{
ALLOW_MEMMOVE
=
true
}
;
protected
:
T
*
MOZ_NON_OWNING_REF
mKey
;
}
;
typedef
nsPtrHashKey
<
const
void
>
nsVoidPtrHashKey
;
#
endif
