#
ifndef
nsDataHashtable_h__
#
define
nsDataHashtable_h__
#
include
"
nsHashKeys
.
h
"
#
include
"
nsBaseHashtable
.
h
"
#
include
"
mozilla
/
Maybe
.
h
"
template
<
class
KeyClass
class
DataType
>
class
nsDataHashtable
:
public
nsBaseHashtable
<
KeyClass
DataType
DataType
>
{
private
:
typedef
nsBaseHashtable
<
KeyClass
DataType
DataType
>
BaseClass
;
public
:
using
typename
BaseClass
:
:
EntryType
;
using
typename
BaseClass
:
:
KeyType
;
nsDataHashtable
(
)
{
}
explicit
nsDataHashtable
(
uint32_t
aInitLength
)
:
BaseClass
(
aInitLength
)
{
}
DataType
*
GetValue
(
KeyType
aKey
)
{
if
(
EntryType
*
ent
=
this
-
>
GetEntry
(
aKey
)
)
{
return
ent
-
>
GetModifiableData
(
)
;
}
return
nullptr
;
}
mozilla
:
:
Maybe
<
DataType
>
GetAndRemove
(
KeyType
aKey
)
{
mozilla
:
:
Maybe
<
DataType
>
value
;
if
(
EntryType
*
ent
=
this
-
>
GetEntry
(
aKey
)
)
{
value
.
emplace
(
std
:
:
move
(
*
ent
-
>
GetModifiableData
(
)
)
)
;
this
-
>
RemoveEntry
(
ent
)
;
}
return
value
;
}
}
;
#
endif
