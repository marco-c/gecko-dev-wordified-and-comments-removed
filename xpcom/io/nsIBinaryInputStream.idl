#
include
"
nsIInputStream
.
idl
"
[
scriptable
builtinclass
uuid
(
899b826b
-
2eb3
-
469c
-
8b31
-
4c29f5d341a6
)
]
interface
nsIBinaryInputStream
:
nsIInputStream
{
void
setInputStream
(
in
nsIInputStream
aInputStream
)
;
[
must_use
]
boolean
readBoolean
(
)
;
[
must_use
]
uint8_t
read8
(
)
;
[
must_use
]
uint16_t
read16
(
)
;
[
must_use
]
uint32_t
read32
(
)
;
[
must_use
]
uint64_t
read64
(
)
;
[
must_use
]
float
readFloat
(
)
;
[
must_use
]
double
readDouble
(
)
;
[
must_use
]
ACString
readCString
(
)
;
[
must_use
]
AString
readString
(
)
;
[
must_use
]
void
readBytes
(
in
uint32_t
aLength
[
size_is
(
aLength
)
retval
]
out
string
aString
)
;
[
must_use
]
Array
<
uint8_t
>
readByteArray
(
in
uint32_t
aLength
)
;
[
implicit_jscontext
must_use
]
uint64_t
readArrayBuffer
(
in
uint64_t
aLength
in
jsval
aArrayBuffer
)
;
}
;
%
{
C
+
+
#
ifdef
MOZILLA_INTERNAL_API
#
include
"
nsString
.
h
"
inline
nsresult
NS_ReadOptionalCString
(
nsIBinaryInputStream
*
aStream
nsACString
&
aResult
)
{
bool
nonnull
;
nsresult
rv
=
aStream
-
>
ReadBoolean
(
&
nonnull
)
;
if
(
NS_SUCCEEDED
(
rv
)
)
{
if
(
nonnull
)
rv
=
aStream
-
>
ReadCString
(
aResult
)
;
else
aResult
.
Truncate
(
)
;
}
return
rv
;
}
inline
nsresult
NS_ReadOptionalString
(
nsIBinaryInputStream
*
aStream
nsAString
&
aResult
)
{
bool
nonnull
;
nsresult
rv
=
aStream
-
>
ReadBoolean
(
&
nonnull
)
;
if
(
NS_SUCCEEDED
(
rv
)
)
{
if
(
nonnull
)
rv
=
aStream
-
>
ReadString
(
aResult
)
;
else
aResult
.
Truncate
(
)
;
}
return
rv
;
}
#
endif
%
}
