#
include
"
Alloc
.
h
"
#
include
"
LzmaDec
.
h
"
#
include
"
LzmaEnc
.
h
"
#
include
"
LzmaLib
.
h
"
MY_STDAPI
LzmaCompress
(
unsigned
char
*
dest
size_t
*
destLen
const
unsigned
char
*
src
size_t
srcLen
unsigned
char
*
outProps
size_t
*
outPropsSize
int
level
unsigned
dictSize
int
lc
int
lp
int
pb
int
fb
int
numThreads
)
{
CLzmaEncProps
props
;
LzmaEncProps_Init
(
&
props
)
;
props
.
level
=
level
;
props
.
dictSize
=
dictSize
;
props
.
lc
=
lc
;
props
.
lp
=
lp
;
props
.
pb
=
pb
;
props
.
fb
=
fb
;
props
.
numThreads
=
numThreads
;
return
LzmaEncode
(
dest
destLen
src
srcLen
&
props
outProps
outPropsSize
0
NULL
&
g_Alloc
&
g_Alloc
)
;
}
MY_STDAPI
LzmaUncompress
(
unsigned
char
*
dest
size_t
*
destLen
const
unsigned
char
*
src
size_t
*
srcLen
const
unsigned
char
*
props
size_t
propsSize
)
{
ELzmaStatus
status
;
return
LzmaDecode
(
dest
destLen
src
srcLen
props
(
unsigned
)
propsSize
LZMA_FINISH_ANY
&
status
&
g_Alloc
)
;
}
