depends
(
"
-
-
help
"
)
imports
(
"
codecs
"
)
imports
(
_from
=
"
mozbuild
.
configure
.
util
"
_import
=
"
getpreferredencoding
"
)
imports
(
"
os
"
)
imports
(
_from
=
"
__builtin__
"
_import
=
"
open
"
)
def
dies_when_logging
(
_
)
:
test_file
=
"
test
.
txt
"
quote_char
=
"
'
"
if
getpreferredencoding
(
)
.
lower
(
)
=
=
"
utf
-
8
"
:
quote_char
=
"
\
u00b4
"
try
:
with
open
(
test_file
"
w
+
"
)
as
fh
:
fh
.
write
(
quote_char
)
out
=
check_cmd_output
(
"
cat
"
"
test
.
txt
"
)
log
.
info
(
out
)
finally
:
os
.
remove
(
test_file
)
