from
__future__
import
absolute_import
import
gdb
from
gdbpp
import
GeckoPrettyPrinter
GeckoPrettyPrinter
(
'
nsAutoOwningThread
'
'
^
nsAutoOwningThread
'
)
class
owning_thread_printer
(
object
)
:
    
def
__init__
(
self
value
)
:
        
self
.
value
=
value
    
def
to_string
(
self
)
:
        
prthread_type
=
gdb
.
lookup_type
(
'
PRThread
'
)
.
pointer
(
)
        
prthread
=
self
.
value
[
'
mThread
'
]
.
cast
(
prthread_type
)
        
name
=
prthread
[
'
name
'
]
        
name
=
prthread
[
'
tid
'
]
        
return
name
if
name
else
'
(
PRThread
*
)
%
s
'
%
prthread
